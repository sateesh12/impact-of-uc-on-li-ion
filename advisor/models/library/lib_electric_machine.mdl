Library {
  Name			  "lib_electric_machine"
  Version		  4.1.1
  LibraryLinkDisplay	  "none"
  CovSaveName		  "covdata"
  CovMetricSettings	  "dw"
  CovNameIncrementing	  off
  CovHtmlReporting	  on
  BlockNameDataTip	  off
  BlockParametersDataTip  off
  BlockDescriptionStringDataTip	off
  ToolBar		  off
  StatusBar		  off
  BrowserShowLibraryLinks off
  BrowserLookUnderMasks	  off
  Created		  "Tue May 30 16:33:10 2000"
  UpdateHistory		  "UpdateHistoryNever"
  ModifiedByFormat	  "%<Auto>"
  LastModifiedBy	  "ssprik"
  ModifiedDateFormat	  "%<Auto>"
  LastModifiedDate	  "Thu Oct 09 15:31:25 2003"
  ModifiedComment	  "abrooker -- Wed Aug 13 10:56:21 2003 -- Version 1.2"
"0\nchanged mc_eff_scale implementation into model"
  ModifiedHistory	  "abrooker -- Tue Feb 04 10:35:40 2003 -- Version 1.1"
"9\nadded pwr goto for Altia\n\nmokeefe -- Thu Apr 18 08:27:13 2002 -- Version"
" 1.18\nsaving the model:\no \"without the model browser open\"\no with only t"
"op-level screen visible \no with \"fit to view\" enabled\no with \"status bar"
"\" off and \"toolbar\" off\no with \"prompt to update model history with each"
" save\" on\n\n"
  ModelVersionFormat	  "1.%<AutoIncrement:28>"
  ConfigurationManager	  "none"
  SimParamPage		  "Solver"
  AlgebraicLoopMsg	  "warning"
  MinStepSizeMsg	  "warning"
  UnconnectedInputMsg	  "warning"
  UnconnectedOutputMsg	  "warning"
  UnconnectedLineMsg	  "warning"
  InheritedTsInSrcMsg	  "warning"
  SingleTaskRateTransMsg  "none"
  MultiTaskRateTransMsg	  "error"
  IntegerOverflowMsg	  "warning"
  CheckForMatrixSingularity "none"
  UnnecessaryDatatypeConvMsg "none"
  Int32ToFloatConvMsg	  "warning"
  InvalidFcnCallConnMsg	  "error"
  SignalLabelMismatchMsg  "none"
  LinearizationMsg	  "none"
  VectorMatrixConversionMsg "none"
  SfunCompatibilityCheckMsg "none"
  BlockPriorityViolationMsg "warning"
  ArrayBoundsChecking	  "none"
  ConsistencyChecking	  "none"
  Profile		  off
  SimulationMode	  "normal"
  RTWRetainRTWFile	  off
  RTWMakeCommand	  "make_rtw"
  RTWGenerateCodeOnly	  off
  TLCProfiler		  off
  TLCDebug		  off
  TLCCoverage		  off
  ExtModeMexFile	  "ext_comm"
  ExtModeBatchMode	  off
  ExtModeTrigType	  "manual"
  ExtModeTrigMode	  "normal"
  ExtModeTrigPort	  "1"
  ExtModeTrigElement	  "any"
  ExtModeTrigDuration	  1000
  ExtModeTrigHoldOff	  0
  ExtModeTrigDelay	  0
  ExtModeTrigDirection	  "rising"
  ExtModeTrigLevel	  0
  ExtModeArchiveMode	  "off"
  ExtModeAutoIncOneShot	  off
  ExtModeIncDirWhenArm	  off
  ExtModeAddSuffixToVar	  off
  ExtModeWriteAllDataToWs off
  ExtModeArmWhenConnect	  on
  ExtModeSkipDownloadWhenConnect off
  ExtModeLogAll		  on
  ExtModeAutoUpdateStatusClock on
  BlockDefaults {
    Orientation		    "right"
    ForegroundColor	    "black"
    BackgroundColor	    "white"
    DropShadow		    off
    NamePlacement	    "normal"
    FontName		    "Helvetica"
    FontSize		    10
    FontWeight		    "normal"
    FontAngle		    "normal"
    ShowName		    on
  }
  AnnotationDefaults {
    HorizontalAlignment	    "center"
    VerticalAlignment	    "middle"
    ForegroundColor	    "black"
    BackgroundColor	    "white"
    DropShadow		    off
    FontName		    "Helvetica"
    FontSize		    10
    FontWeight		    "normal"
    FontAngle		    "normal"
  }
  LineDefaults {
    FontName		    "Helvetica"
    FontSize		    9
    FontWeight		    "normal"
    FontAngle		    "normal"
  }
  System {
    Name		    "lib_electric_machine"
    Location		    [-4, 330, 959, 1056]
    Open		    on
    ModelBrowserVisibility  off
    ModelBrowserWidth	    212
    ScreenColor		    "automatic"
    PaperOrientation	    "landscape"
    PaperPositionMode	    "auto"
    PaperType		    "usletter"
    PaperUnits		    "inches"
    ZoomFactor		    "214"
    ReportName		    "simulink-default.rpt"
    Block {
      BlockType		      SubSystem
      Name		      "Sub-models"
      Ports		      []
      Position		      [101, 287, 140, 318]
      ShowPortLabels	      on
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      System {
	Name			"Sub-models"
	Location		[245, 76, 961, 542]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  SubSystem
	  Name			  "motor inertia as a function of total\nvehic"
"le inertia (generous approximation)"
	  Ports			  [1, 1]
	  Position		  [55, 90, 85, 140]
	  Orientation		  "up"
	  BackgroundColor	  "darkGreen"
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "motor inertia as a function of total\nveh"
"icle inertia (generous approximation)"
	    Location		    [237, 353, 953, 819]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "automatic"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "76"
	    Block {
	      BlockType		      Inport
	      Name		      "gear ratio"
	      Position		      [55, 20, 85, 30]
	      Orientation	      "down"
	      NamePlacement	      "alternate"
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [162, 275, 193, 310]
	      Orientation	      "down"
	      NamePlacement	      "alternate"
	      Inputs		      "*/"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [265, 205, 285, 225]
	      Orientation	      "down"
	      ShowName		      off
	      IconShape		      "round"
	      Inputs		      "++|"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "engine inertia\nas a fraction of\ntotal"
" vehicle\ninertia \n(generous\napproximation)--denomenator"
	      Position		      [230, 160, 320, 180]
	      Orientation	      "down"
	      Expr		      "mc_inertia*u^2"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "engine inertia\nas a fraction of\ntotal"
" vehicle\ninertia \n(generous\napproximation)--numerator"
	      Position		      [23, 100, 117, 120]
	      Orientation	      "down"
	      Expr		      "mc_inertia*u^2"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "veh mass calc"
	      Ports		      [0, 1]
	      Position		      [150, 207, 205, 223]
	      BackgroundColor	      "darkGreen"
	      SourceBlock	      "lib_electric_machine/Sub-models/veh mas"
"s calc"
	      SourceType	      "SubSystem"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Out1"
	      Position		      [165, 370, 195, 385]
	      Orientation	      "down"
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Line {
	      SrcBlock		      "engine inertia\nas a fraction of\ntotal"
" vehicle\ninertia \n(generous\napproximation)--numerator"
	      SrcPort		      1
	      Points		      [0, 135]
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "Out1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gear ratio"
	      SrcPort		      1
	      Points		      [0, 30]
	      Branch {
		DstBlock		"engine inertia\nas a fraction of\ntot"
"al vehicle\ninertia \n(generous\napproximation)--numerator"
		DstPort			1
	      }
	      Branch {
		Points			[205, 0]
		DstBlock		"engine inertia\nas a fraction of\ntot"
"al vehicle\ninertia \n(generous\napproximation)--denomenator"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "veh mass calc"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "engine inertia\nas a fraction of\ntotal"
" vehicle\ninertia \n(generous\napproximation)--denomenator"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      Points		      [0, 30]
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "veh mass calc"
	  Ports			  [0, 1]
	  Position		  [50, 42, 105, 58]
	  BackgroundColor	  "darkGreen"
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "veh mass calc"
	    Location		    [152, 178, 650, 478]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [125, 157, 220, 183]
	      BackgroundColor	      "darkGreen"
	      Value		      "veh_mass"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      Position		      [125, 100, 245, 130]
	      BackgroundColor	      "darkGreen"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "veh_cargo_mass"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [270, 105, 290, 125]
	      ShowName		      off
	      IconShape		      "round"
	      Inputs		      "|++"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Out1"
	      Position		      [365, 108, 395, 122]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Line {
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [55, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "Out1"
	      DstPort		      1
	    }
	  }
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "generator/\ncontroller <gc>"
      Ports		      [1, 1]
      Position		      [55, 46, 100, 84]
      BackgroundColor	      "yellow"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskDisplay	      "image(imread('bdi_mc.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      System {
	Name			"generator/\ncontroller <gc>"
	Location		[192, 196, 954, 478]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "torque and speed\nsupplied to rotor\n(Nm), "
"(rad/s)"
	  Position		  [40, 55, 60, 75]
	  FontName		  "Arial"
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Goto
	  Name			  "<sdo>"
	  Position		  [60, 119, 140, 141]
	  Orientation		  "left"
	  GotoTag		  "gc_trq_in_a"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "<sdo>1"
	  Position		  [60, 154, 140, 176]
	  Orientation		  "left"
	  GotoTag		  "gc_spd_in_a"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "<sdo>2"
	  Position		  [655, 114, 735, 136]
	  GotoTag		  "gc_pwr_out_a"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Saturate
	  Name			  ">=0"
	  Position		  [585, 55, 615, 85]
	  UpperLimit		  "inf"
	  LowerLimit		  "0"
	  LinearizeAsGain	  on
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Block NOTES"
	  Ports			  []
	  Position		  [630, 190, 686, 230]
	  BackgroundColor	  "green"
	  ShowName		  off
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "disp('Block\\nNOTES')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Block NOTES"
	    Location		    [229, 259, 738, 365]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Annotation {
	      Position		      [247, 17]
	      VerticalAlignment	      "top"
	      Text		      "This generator/controller model include"
"s loss data, rotational inertia, and performance limits.\nThis is the only en"
"tirely forward-facing block in ADVISOR, computing the output power from the\n"
"input torque and speed.  The generator map used in the lookup table block is "
"VERY similar to\nthe input power motor map, with the main difference being th"
"at the torque and power sign\nconventions are opposite: here torque input to "
"the machine and power output by the machine\nare positive."
	    }
	  }
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux"
	  Ports			  [1, 2]
	  Position		  [95, 29, 125, 96]
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  From
	  Name			  "From<ess>"
	  Position		  [15, 195, 100, 215]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "bus_voltage"
	}
	Block {
	  BlockType		  Memory
	  Name			  "Memory"
	  Position		  [385, 195, 420, 215]
	  FontName		  "Arial"
	  X0			  "ess_module_num*mean(ess_voc(1,:))"
	  InheritSampleTime	  off
	  RTWStateStorageClass	  "Auto"
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  Ports			  [2, 1]
	  Position		  [280, 40, 300, 60]
	  IconShape		  "rectangular"
	  Inputs		  "+-"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace9"
	  Position		  [592, 145, 668, 165]
	  Orientation		  "down"
	  NamePlacement		  "alternate"
	  VariableName		  "gc_pwr_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "effect of inertia\n(Nm)"
	  Ports			  [1, 1]
	  Position		  [195, 57, 230, 103]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "effect of inertia\n(Nm)"
	    Location		    [200, 196, 496, 316]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "in_1"
	      Position		      [20, 50, 40, 70]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      Position		      [140, 35, 205, 85]
	      Gain		      "gc_inertia"
	      Multiplication	      "Element-wise(K.*u)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Derivative
	      Name		      "alpha"
	      Position		      [70, 50, 100, 70]
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "out_1"
	      Position		      [240, 50, 260, 70]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "out_1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "alpha"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "in_1"
	      SrcPort		      1
	      DstBlock		      "alpha"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "enforce\ntorque\nlimit"
	  Ports			  [2, 1]
	  Position		  [335, 39, 370, 86]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "enforce\ntorque\nlimit"
	    Location		    [203, 331, 574, 487]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "req'd generator\ninput torque (Nm)"
	      Position		      [45, 23, 75, 37]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "limited generator\nspeed (rad/s)"
	      Position		      [45, 103, 75, 117]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [300, 105, 356, 145]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[199, 193, 456, 260]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [132, 29]
		  Text			  "This block enforces the maximum tor"
"que\nabsorption capability limit of the generator."
		}
	      }
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      Ports		      [2, 1]
	      Position		      [220, 22, 250, 53]
	      Function		      "min"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max torque"
	      Position		      [125, 100, 155, 120]
	      InputValues	      "gc_map_spd*gc_spd_scale"
	      OutputValues	      "gc_max_trq*gc_overtrq_factor*gc_trq_sca"
"le"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "limited generator\ninput torque (Nm)"
	      Position		      [300, 33, 330, 47]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Line {
	      SrcBlock		      "limited generator\nspeed (rad/s)"
	      SrcPort		      1
	      DstBlock		      "max torque"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      DstBlock		      "limited generator\ninput torque (Nm)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "max torque"
	      SrcPort		      1
	      Points		      [20, 0; 0, -65]
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "req'd generator\ninput torque (Nm)"
	      SrcPort		      1
	      DstBlock		      "MinMax"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  Saturate
	  Name			  "enforce max\nspeed"
	  Position		  [255, 131, 285, 149]
	  UpperLimit		  "max(gc_map_spd)*gc_spd_scale"
	  LowerLimit		  "0"
	  LinearizeAsGain	  on
	}
	Block {
	  BlockType		  Lookup2D
	  Name			  "generator\noutput power\nmap (W)"
	  Position		  [410, 36, 475, 74]
	  RowIndex		  "gc_map_spd*gc_spd_scale"
	  ColumnIndex		  "gc_map_trq*gc_trq_scale"
	  OutputValues		  "gc_outpwr_map*gc_spd_scale*gc_trq_scale"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "help"
	  Ports			  []
	  Position		  [581, 194, 612, 237]
	  BackgroundColor	  "yellow"
	  DropShadow		  on
	  ShowName		  off
	  OpenFcn		  "web(['file:\\\\\\' which('generator_control"
"ler.htm')]);"
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "help"
	    Location		    [203, 331, 569, 538]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "limit request:\ncontroller current limit"
	  Ports			  [2, 1]
	  Position		  [520, 42, 550, 93]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "limit request:\ncontroller current limit"
	    Location		    [350, 374, 667, 527]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "computed output\npower (W)"
	      Position		      [35, 20, 55, 40]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "bus voltage\n(V)"
	      Position		      [35, 90, 55, 110]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [245, 100, 301, 140]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[229, 259, 525, 320]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [147, 12]
		  VerticalAlignment	  "top"
		  Text			  "This block prevents the generator/c"
"ontroller set from\noutputting more than its maximum rated current."
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [90, 49, 160, 71]
	      FontName		      "Arial"
	      Value		      "gc_max_crrnt"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      Ports		      [2, 1]
	      Position		      [220, 12, 250, 83]
	      Function		      "min"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      Ports		      [2, 1]
	      Position		      [180, 56, 200, 74]
	      FontName		      "Arial"
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "out_1"
	      Position		      [275, 40, 295, 60]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "computed output\npower (W)"
	      SrcPort		      1
	      DstBlock		      "MinMax"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "bus voltage\n(V)"
	      SrcPort		      1
	      Points		      [105, 0]
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      DstBlock		      "out_1"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "generator\noutput power (W)"
	  Position		  [660, 60, 680, 80]
	  FontName		  "Arial"
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Line {
	  SrcBlock		  ">=0"
	  SrcPort		  1
	  Points		  [10, 0]
	  Branch {
	    DstBlock		    "generator\noutput power (W)"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 55]
	    Branch {
	      DstBlock		      "To Workspace9"
	      DstPort		      1
	    }
	    Branch {
	      DstBlock		      "<sdo>2"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "limit request:\ncontroller current limit"
	  SrcPort		  1
	  DstBlock		  ">=0"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  1
	  Points		  [30, 0]
	  Branch {
	    DstBlock		    "Sum"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 85]
	    DstBlock		    "<sdo>"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "From<ess>"
	  SrcPort		  1
	  DstBlock		  "Memory"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "enforce max\nspeed"
	  SrcPort		  1
	  Points		  [20, 0]
	  Branch {
	    Points		    [75, 0; 0, -95]
	    DstBlock		    "generator\noutput power\nmap (W)"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -65]
	    DstBlock		    "enforce\ntorque\nlimit"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "generator\noutput power\nmap (W)"
	  SrcPort		  1
	  DstBlock		  "limit request:\ncontroller current limit"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "enforce\ntorque\nlimit"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "enforce\ntorque\nlimit"
	  SrcPort		  1
	  DstBlock		  "generator\noutput power\nmap (W)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "effect of inertia\n(Nm)"
	  SrcPort		  1
	  Points		  [15, 0; 0, -25]
	  DstBlock		  "Sum"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Memory"
	  SrcPort		  1
	  Points		  [55, 0; 0, -125]
	  DstBlock		  "limit request:\ncontroller current limit"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "torque and speed\nsupplied to rotor\n(Nm), "
"(rad/s)"
	  SrcPort		  1
	  DstBlock		  "Demux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  2
	  Points		  [40, 0]
	  Branch {
	    DstBlock		    "effect of inertia\n(Nm)"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 60]
	    Branch {
	      DstBlock		      "enforce max\nspeed"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [0, 25]
	      DstBlock		      "<sdo>1"
	      DstPort		      1
	    }
	  }
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "motor/\ncontroller <mc>"
      Ports		      [2, 2]
      Position		      [50, 164, 105, 206]
      BackgroundColor	      "yellow"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskDisplay	      "image(imread('bdi_mc.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      System {
	Name			"motor/\ncontroller <mc>"
	Location		[37, 253, 1028, 751]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "torque and speed\n req'd at rotor\n(Nm), (r"
"ad/s)"
	  Position		  [45, 70, 65, 90]
	  FontName		  "Arial"
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Inport
	  Name			  "available motor\ninput power (W)"
	  Position		  [35, 315, 55, 335]
	  FontName		  "Arial"
	  Port			  "2"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Goto
	  Name			  "<sdo>"
	  Position		  [430, 274, 510, 296]
	  GotoTag		  "mc_trq_out_a"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "<sdo>1"
	  Position		  [345, 354, 425, 376]
	  GotoTag		  "mc_spd_out_a"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  From
	  Name			  "<vc>"
	  Position		  [575, 392, 625, 408]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_prev"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Block NOTES"
	  Ports			  []
	  Position		  [865, 190, 921, 230]
	  BackgroundColor	  "green"
	  ShowName		  off
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "disp('Block\\nNOTES')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Block NOTES"
	    Location		    [497, 485, 1012, 601]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Annotation {
	      Position		      [247, 17]
	      VerticalAlignment	      "top"
	      Text		      "This motor/controller model includes lo"
"ss data, rotational inertia, and performance limits."
	    }
	    Annotation {
	      Position		      [256, 69]
	      Text		      "Available torque is computed from avail"
"able power by assuming that the ratio of rotor torque to input\n(electric) po"
"wer is the same for the actual/achievable situation as was computed for the r"
"equest.  This\nis mathematically equivalent to assuming that the motor/contro"
"ller efficiency.  Rotor speed for the\nactual/achievable calculations is as c"
"omputed in the 'request' branch."
	    }
	  }
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant"
	  Position		  [525, 130, 595, 150]
	  Value			  "mc_eff_scale"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux"
	  Ports			  [1, 2]
	  Position		  [100, 21, 125, 134]
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  Fcn
	  Name			  "Fcn"
	  Position		  [575, 371, 600, 389]
	  ShowName		  off
	  Expr			  "u(3)-u(1)*u(2)"
	}
	Block {
	  BlockType		  From
	  Name			  "From <vc>"
	  Position		  [565, 413, 630, 427]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "key_on"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux2"
	  Ports			  [2, 1]
	  Position		  [500, 302, 520, 353]
	  ShowName		  off
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux3"
	  Ports			  [3, 1]
	  Position		  [550, 353, 555, 407]
	  ShowName		  off
	  Inputs		  "3"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "N-m drive torque\nper W input"
	  Ports			  [2, 1]
	  Position		  [790, 152, 820, 183]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "N-m drive torque\nper W input"
	    Location		    [131, 627, 600, 859]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "req'd input power\n(W)"
	      Position		      [55, 50, 75, 70]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd rotor drive torque\n(Nm)"
	      Position		      [55, 120, 75, 140]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [395, 160, 451, 200]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[101, 64, 548, 181]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [223, 58]
		  Text			  "This block determines the ratio of "
"req'd rotor torque to req'd electrical input power,\n which is proportional t"
"o efficiency if the motor is providing torque.  This ratio is used\nto comput"
"e actual rotor torque given some input power which may be different from\nthe"
" req'd value.\n\nIf the denominator, the req'd input power, is zero, this blo"
"ck outputs inf,\nwhich is a flag used by the block .../rotor drive torque ava"
"ilable (Nm)."
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [90, 15, 110, 35]
	      Value		      "eps"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      Position		      [205, 155, 225, 175]
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      Position		      [295, 155, 315, 175]
	      Value		      "inf"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [220, 47, 250, 78]
	      Inputs		      "/*"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      Position		      [260, 92, 290, 123]
	      Operator		      "~="
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [150, 37, 180, 68]
	      IconShape		      "rectangular"
	      Inputs		      "++"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [345, 60, 375, 90]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Nm per W"
	      Position		      [425, 65, 445, 85]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "req'd rotor drive torque\n(Nm)"
	      SrcPort		      1
	      Points		      [120, 0; 0, -60]
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [25, 0; 0, -35]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Nm per W"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "req'd input power\n(W)"
	      SrcPort		      1
	      Points		      [40, 0]
	      Branch {
		DstBlock		"Sum"
		DstPort			2
	      }
	      Branch {
		Points			[0, 40]
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [10, 0; 0, -50]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	  }
	}
	Block {
	  BlockType		  Product
	  Name			  "Product"
	  Ports			  [2, 1]
	  Position		  [650, 66, 675, 84]
	  ShowName		  off
	  Inputs		  "2"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Product
	  Name			  "Product1"
	  Ports			  [2, 1]
	  Position		  [650, 33, 675, 57]
	  ShowName		  off
	  Inputs		  "*/"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Saturate
	  Name			  "Saturation"
	  Position		  [190, 90, 220, 120]
	  UpperLimit		  "max(mc_map_spd)*mc_spd_scale"
	  LowerLimit		  "0"
	  LinearizeAsGain	  on
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  Ports			  [2, 1]
	  Position		  [385, 45, 405, 65]
	  IconShape		  "rectangular"
	  Inputs		  "++"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum1"
	  Ports			  [2, 1]
	  Position		  [385, 305, 405, 325]
	  IconShape		  "rectangular"
	  Inputs		  "-+"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch"
	  Position		  [695, 40, 725, 80]
	  ShowName		  off
	  Threshold		  "0"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To WS1"
	  Position		  [584, 345, 646, 360]
	  Orientation		  "up"
	  NamePlacement		  "alternate"
	  ShowName		  off
	  FontName		  "Arial"
	  VariableName		  "mc_pwr_loss"
	  MaxDataPoints		  "50000"
	  Decimation		  "1"
	  SampleTime		  "0"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To WS2"
	  Position		  [770, 378, 820, 392]
	  ShowName		  off
	  FontName		  "Arial"
	  VariableName		  "mc_tmp"
	  MaxDataPoints		  "50000"
	  Decimation		  "1"
	  SampleTime		  "0"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To WS4"
	  Position		  [765, 412, 840, 428]
	  ShowName		  off
	  FontName		  "Arial"
	  VariableName		  "mc_clt_th_pwr"
	  MaxDataPoints		  "50000"
	  Decimation		  "1"
	  SampleTime		  "0"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace10"
	  Position		  [192, 200, 288, 220]
	  Orientation		  "up"
	  NamePlacement		  "alternate"
	  ShowName		  off
	  VariableName		  "mc_ni_trq_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace4"
	  Position		  [50, 155, 130, 175]
	  Orientation		  "left"
	  VariableName		  "mc_trq_out_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace5"
	  Position		  [50, 195, 130, 215]
	  Orientation		  "left"
	  VariableName		  "mc_spd_out_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace8"
	  Position		  [225, 365, 305, 385]
	  ShowName		  off
	  VariableName		  "mc_pwr_in_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace9"
	  Position		  [870, 94, 940, 116]
	  VariableName		  "mc_pwr_in_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  Constant
	  Name			  "do ex calcs?"
	  Position		  [665, 335, 725, 350]
	  Orientation		  "down"
	  ShowName		  off
	  Value			  "mc_th_calc"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "documentation10"
	  Ports			  []
	  Position		  [930, 191, 959, 230]
	  BackgroundColor	  "orange"
	  DropShadow		  on
	  ShowName		  off
	  OpenFcn		  "web(['file:\\\\\\' which('motor_controller."
"htm')]);"
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "documentation10"
	    Location		    [129, 62, 308, 146]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "effect of inertia\n(Nm)"
	  Ports			  [1, 1]
	  Position		  [320, 86, 350, 124]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "effect of inertia\n(Nm)"
	    Location		    [245, 76, 961, 542]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "mc_spd_out_a"
	      Position		      [35, 25, 55, 45]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [500, 195, 556, 235]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[497, 485, 951, 582]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [226, 34]
		  Text			  "Torque required to accelerate the m"
"otor's inertia is calculated from the rate of change\nof mc_spd_out_a.  It is"
" no greater than the product of the maximum motor torque and\nthe fractional "
"contribution of the motor's inertia to the total vehicle inertia."
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [75, 330, 95, 350]
	      Value		      "eps"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      Position		      [140, 83, 405, 107]
	      Value		      "max(mc_max_trq)*mc_trq_scale*mc_overtrq"
"_factor"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      Position		      [190, 334, 355, 356]
	      Orientation	      "left"
	      Value		      "gb_ratio(1)*fd_ratio/wh_radius"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <wh>/\ntire slip model (m/s)"
	      Position		      [15, 259, 105, 291]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "veh_spd_a_rec"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      Position		      [165, 14, 245, 56]
	      Gain		      "mc_inertia"
	      Multiplication	      "Element-wise(K.*u)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      Position		      [255, 185, 285, 215]
	      X0		      "0"
	      InheritSampleTime	      off
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      Ports		      [2, 1]
	      Position		      [480, 27, 510, 58]
	      Function		      "min"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [425, 87, 455, 118]
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [135, 267, 165, 298]
	      IconShape		      "rectangular"
	      Inputs		      "++"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [195, 280, 225, 310]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Derivative
	      Name		      "alpha"
	      Position		      [100, 25, 130, 45]
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "motor inertia as a fraction of total\nv"
"ehicle inertia (generous approximation)"
	      Ports		      [1, 1]
	      Position		      [280, 125, 310, 175]
	      Orientation	      "up"
	      BackgroundColor	      "darkGreen"
	      SourceBlock	      "lib_electric_machine/Sub-models/motor i"
"nertia as a function of total\nvehicle inertia (generous approximation)"
	      SourceType	      "SubSystem"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "overall gear ratio\n/\nwh_radius"
	      Ports		      [2, 1]
	      Position		      [190, 182, 220, 213]
	      Inputs		      "*/"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "out_1"
	      Position		      [555, 35, 575, 55]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "alpha"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "mc_spd_out_a"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"alpha"
		DstPort			1
	      }
	      Branch {
		Points			[0, 155]
		DstBlock		"overall gear ratio\n/\nwh_radius"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      DstBlock		      "out_1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "MinMax"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "overall gear ratio\n/\nwh_radius"
	      SrcPort		      1
	      DstBlock		      "Memory"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "motor inertia as a fraction of total\nv"
"ehicle inertia (generous approximation)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "motor inertia as a fraction of total\nv"
"ehicle inertia (generous approximation)"
	      SrcPort		      1
	      Points		      [0, -10]
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <wh>/\ntire slip model (m/s)"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"Sum"
		DstPort			1
	      }
	      Branch {
		Points			[0, 20]
		DstBlock		"Switch"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-5, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [0, -30; -55, 0]
	      DstBlock		      "overall gear ratio\n/\nwh_radius"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "enforce\ntorque\nlimit"
	  Ports			  [2, 1]
	  Position		  [435, 44, 470, 91]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "enforce\ntorque\nlimit"
	    Location		    [192, 297, 795, 533]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "req'd motor\ntorque (Nm)"
	      Position		      [45, 68, 75, 82]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "limited motor\nspeed (rad/s)"
	      Position		      [45, 148, 75, 162]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [475, 160, 531, 200]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[151, 104, 560, 200]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [207, 39]
		  Text			  "This block enforces the maximum tor"
"que production and absorption\ncapability limits of the motor.  It assumes th"
"at exactly as much torque\ncan be absorbed as can be produced at a given spee"
"d."
		}
	      }
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <sdo>"
	      Position		      [490, 19, 580, 41]
	      GotoTag		      "mc_trq_limited"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      Ports		      [2, 1]
	      Position		      [340, 67, 370, 98]
	      Function		      "min"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax1"
	      Ports		      [2, 1]
	      Position		      [340, 132, 370, 163]
	      Function		      "max"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      Position		      [440, 12, 470, 43]
	      Operator		      "~="
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [440, 80, 470, 110]
	      Threshold		      "0"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To WS2"
	      Position		      [215, 166, 305, 184]
	      ShowName		      off
	      FontName		      "Arial"
	      VariableName	      "mc_max_trq_vec"
	      MaxDataPoints	      "50000"
	      Decimation	      "1"
	      SampleTime	      "0"
	      SaveFormat	      "Array"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max gen torque"
	      Position		      [140, 185, 170, 205]
	      InputValues	      "mc_map_spd*mc_spd_scale"
	      OutputValues	      "mc_max_gen_trq*mc_overtrq_factor*mc_trq"
"_scale"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max torque"
	      Position		      [140, 145, 170, 165]
	      InputValues	      "mc_map_spd*mc_spd_scale"
	      OutputValues	      "mc_max_trq*mc_overtrq_factor*mc_trq_sca"
"le"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "limited motor\ntorque (Nm)"
	      Position		      [520, 88, 550, 102]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Line {
	      SrcBlock		      "max torque"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		Points			[0, 20]
		DstBlock		"To WS2"
		DstPort			1
	      }
	      Branch {
		Points			[20, 0; 0, -65]
		DstBlock		"MinMax"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "req'd motor\ntorque (Nm)"
	      SrcPort		      1
	      Points		      [225, 0]
	      Branch {
		Points			[0, -55]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	      Branch {
		Points			[10, 0]
		Branch {
		  Points		  [0, 45]
		  Branch {
		    Points		    [80, 0; 0, -25]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 20]
		    DstBlock		    "MinMax1"
		    DstPort		    1
		  }
		}
		Branch {
		  DstBlock		  "MinMax"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, -25; -65, 0]
		DstBlock		"Relational\nOperator2"
		DstPort			2
	      }
	      Branch {
		DstBlock		"limited motor\ntorque (Nm)"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "MinMax1"
	      SrcPort		      1
	      Points		      [30, 0; 0, -45]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Goto <sdo>"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "limited motor\nspeed (rad/s)"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"max torque"
		DstPort			1
	      }
	      Branch {
		Points			[0, 40]
		DstBlock		"max gen torque"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "max gen torque"
	      SrcPort		      1
	      Points		      [150, 0]
	      DstBlock		      "MinMax1"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "mc tmp"
	  Ports			  [3, 2, 1]
	  Position		  [645, 366, 745, 434]
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  on
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "mc tmp"
	    Location		    [12, 57, 769, 241]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Qmc_gen"
	      Position		      [35, 35, 55, 55]
	      NamePlacement	      "alternate"
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "veh spd"
	      Position		      [35, 65, 55, 85]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "key ON?"
	      Position		      [455, 35, 475, 55]
	      NamePlacement	      "alternate"
	      Port		      "3"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      EnablePort
	      Name		      "Enable"
	      Ports		      []
	      Position		      [30, 122, 60, 148]
	      StatesWhenEnabling      "reset"
	      ShowOutputPort	      off
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "1/mcp"
	      Position		      [590, 93, 615, 117]
	      Gain		      "1/(mc_mass*mc_cp)"
	      Multiplication	      "Element-wise(K.*u)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      ">=0"
	      Position		      [640, 35, 650, 55]
	      NamePlacement	      "alternate"
	      UpperLimit	      "Inf"
	      LowerLimit	      "0"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      ">=0 "
	      Position		      [170, 35, 180, 55]
	      NamePlacement	      "alternate"
	      UpperLimit	      "Inf"
	      LowerLimit	      "0"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [675, 135, 731, 175]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[505, 510, 848, 589]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [172, 38]
		  Text			  "This block models the thermal behav"
"ior of a motor \nand controller  with active fluid cooling.\nThe module is mo"
"deled as a single lumped thermal mass.  \nThe fan is on whenever the battery "
"temp is > the set temp."
		}
	      }
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux10"
	      Ports		      [2, 1]
	      Position		      [320, 74, 325, 121]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Inputs		      "2"
	      DisplayOption	      "none"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux9"
	      Ports		      [2, 1]
	      Position		      [240, 65, 245, 105]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Inputs		      "2"
	      DisplayOption	      "none"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Qa"
	      Position		      [350, 91, 390, 109]
	      NamePlacement	      "alternate"
	      FontName		      "Arial"
	      Expr		      "u(1)*(mc_sarea*mc_trq_scale*mc_spd_scal"
"e)*u(2)"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Qc1"
	      Ports		      [2, 1]
	      Position		      [560, 86, 570, 119]
	      ShowName		      off
	      IconShape		      "rectangular"
	      Inputs		      "-+"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Qnet"
	      Ports		      [3, 1]
	      Position		      [410, 54, 420, 146]
	      NamePlacement	      "alternate"
	      IconShape		      "rectangular"
	      Inputs		      "+++"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Qp2a,v7"
	      Position		      [145, 86, 220, 104]
	      ShowName		      off
	      FontName		      "Arial"
	      Expr		      "amb_tmp-u(1)"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Qr"
	      Position		      [350, 122, 390, 138]
	      FontName		      "Arial"
	      Expr		      "0.9*(5.67e-8)*(mc_sarea*mc_trq_scale*mc"
"_spd_scale)*((amb_tmp+273)^4 - (u(1)+273)^4)"
	    }
	    Block {
	      BlockType		      Integrator
	      Name		      "Tmc3"
	      Ports		      [1, 1]
	      Position		      [630, 95, 650, 115]
	      ShowName		      off
	      ExternalReset	      "none"
	      InitialConditionSource  "internal"
	      InitialCondition	      "mc_init_tmp"
	      LimitOutput	      off
	      UpperSaturationLimit    "inf"
	      LowerSaturationLimit    "-inf"
	      ShowSaturationPort      off
	      ShowStatePort	      off
	      AbsoluteTolerance	      "auto"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Va/Vv"
	      Position		      [90, 62, 120, 88]
	      Gain		      "0.5"
	      Multiplication	      "Element-wise(K.*u)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "ha"
	      Position		      [260, 76, 295, 94]
	      NamePlacement	      "alternate"
	      FontName		      "Arial"
	      Expr		      "6 + 6*((abs(u(2))/1000))^0.25 + 60*(abs"
"(u(1))/30)^0.63"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "mc coolant"
	      Ports		      [2, 1, 1]
	      Position		      [445, 77, 530, 108]
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      on
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"mc coolant"
		Location		[715, 352, 965, 467]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Tcl"
		  Position		  [15, 58, 45, 72]
		  NamePlacement		  "alternate"
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Inport
		  Name			  "Qmc "
		  Position		  [20, 78, 50, 92]
		  Port			  "2"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  EnablePort
		  Name			  "Enable"
		  Ports			  []
		  Position		  [186, 25, 223, 43]
		  NamePlacement		  "alternate"
		  StatesWhenEnabling	  "reset"
		  ShowOutputPort	  off
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  Position		  [50, 44, 95, 56]
		  ShowName		  off
		  Value			  "mc_tstat"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  Ports			  [2, 1]
		  Position		  [165, 62, 180, 93]
		  ShowName		  off
		  Inputs		  "2"
		  Multiplication	  "Element-wise(.*)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  Position		  [120, 44, 140, 71]
		  ShowName		  off
		  Operator		  "<="
		}
		Block {
		  BlockType		  Outport
		  Name			  "Qmc_clt"
		  Position		  [200, 73, 230, 87]
		  NamePlacement		  "alternate"
		  Port			  "1"
		  OutputWhenDisabled	  "reset"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Product1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  DstBlock		  "Qmc_clt"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Qmc "
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Tcl"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Tmc"
	      Position		      [695, 95, 715, 115]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Qmc_clt"
	      Position		      [695, 35, 715, 55]
	      Port		      "2"
	      OutputWhenDisabled      "reset"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Mux10"
	      SrcPort		      1
	      DstBlock		      "Qa"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mux9"
	      SrcPort		      1
	      DstBlock		      "ha"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Va/Vv"
	      SrcPort		      1
	      DstBlock		      "Mux9"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "ha"
	      SrcPort		      1
	      DstBlock		      "Mux10"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Qp2a,v7"
	      SrcPort		      1
	      Points		      [0, 0]
	      Branch {
		DstBlock		"Mux9"
		DstPort			2
	      }
	      Branch {
		Points			[0, 15]
		DstBlock		"Mux10"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Qr"
	      SrcPort		      1
	      DstBlock		      "Qnet"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Qmc_gen"
	      SrcPort		      1
	      DstBlock		      ">=0 "
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      ">=0 "
	      SrcPort		      1
	      Points		      [210, 0]
	      DstBlock		      "Qnet"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Qa"
	      SrcPort		      1
	      DstBlock		      "Qnet"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "veh spd"
	      SrcPort		      1
	      DstBlock		      "Va/Vv"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "key ON?"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "mc coolant"
	      DstPort		      enable
	    }
	    Line {
	      SrcBlock		      ">=0"
	      SrcPort		      1
	      DstBlock		      "Qmc_clt"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "mc coolant"
	      SrcPort		      1
	      Points		      [0, 0]
	      Branch {
		Points			[0, -50]
		DstBlock		">=0"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Qc1"
		DstPort			1
	      }
	    }
	    Line {
	      Labels		      [0, 0]
	      SrcBlock		      "Tmc3"
	      SrcPort		      1
	      Points		      [0, 0]
	      Branch {
		Points			[0, -40; -225, 0]
		DstBlock		"mc coolant"
		DstPort			1
	      }
	      Branch {
		Points			[10, 0]
		Branch {
		  DstBlock		  "Tmc"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 50; -330, 0]
		  Branch {
		    DstBlock		    "Qr"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [-205, 0]
		    DstBlock		    "Qp2a,v7"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Line {
	      SrcBlock		      "1/mcp"
	      SrcPort		      1
	      DstBlock		      "Tmc3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Qc1"
	      SrcPort		      1
	      DstBlock		      "1/mcp"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Qnet"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"mc coolant"
		DstPort			2
	      }
	      Branch {
		Points			[0, 25; 115, 0]
		DstBlock		"Qc1"
		DstPort			2
	      }
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "motor controller\nlogic interface"
	  Ports			  [2, 1]
	  Position		  [745, 14, 820, 76]
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "motor controller\nlogic interface"
	    Location		    [809, 788, 1234, 957]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "w_mc_out_r"
	      Position		      [40, 45, 60, 65]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "P_mc_in_1lim"
	      Position		      [40, 105, 60, 125]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>"
	      Position		      [225, 64, 330, 96]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "P_mc_in_r"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <vc>"
	      Position		      [95, 37, 185, 73]
	      GotoTag		      "w_mc_out_r"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <vc>1"
	      Position		      [95, 98, 185, 132]
	      GotoTag		      "P_mc_in_1lim"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "P_mc_in_r"
	      Position		      [365, 70, 385, 90]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "P_mc_in_1lim"
	      SrcPort		      1
	      DstBlock		      "Goto <vc>1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "w_mc_out_r"
	      SrcPort		      1
	      DstBlock		      "Goto <vc>"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <vc>"
	      SrcPort		      1
	      DstBlock		      "P_mc_in_r"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "motor speed\nestimator"
	  Ports			  [1, 1]
	  Position		  [255, 64, 285, 96]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "motor speed\nestimator"
	    Location		    [49, 234, 852, 653]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "mc_spd_out_a"
	      Position		      [45, 58, 75, 72]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "<= max spd"
	      Position		      [545, 120, 575, 150]
	      UpperLimit	      "max(mc_map_spd)*mc_spd_scale"
	      LowerLimit	      "-inf"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [730, 360, 786, 400]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[497, 485, 832, 570]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [167, 41]
		  Text			  "The requested motor speed is replac"
"ed by an estimate of the\nmotor's previous speed, for loss and max. torque ca"
"lculations,\nwhenever the vehicle missed the trace by more than 1 mph\non the"
" last time step."
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [165, 240, 185, 260]
	      Orientation	      "left"
	      Value		      "eps"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      Position		      [315, 165, 335, 185]
	      Orientation	      "left"
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      Position		      [230, 360, 250, 380]
	      Orientation	      "left"
	      Value		      "2"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <cyc>"
	      Position		      [30, 304, 120, 336]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "cyc_mph_r"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <veh>"
	      Position		      [30, 99, 85, 131]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "mpha"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <wh>/\ntire slip model (m/s)"
	      Position		      [30, 184, 120, 216]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "veh_spd_a_rec"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      Position		      [150, 97, 190, 133]
	      Gain		      "0.447"
	      Multiplication	      "Element-wise(K.*u)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <sdo>1"
	      Position		      [705, 44, 790, 66]
	      GotoTag		      "mc_spd_limited"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      Ports		      [2, 1]
	      Position		      [660, 37, 690, 68]
	      Operator		      "AND"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      Position		      [395, 110, 425, 140]
	      X0		      "cyc_mph(1,2)*0.447/wh_radius*fd_ratio*g"
"b_ratio(gb_num_init)"
	      InheritSampleTime	      off
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory1"
	      Position		      [310, 310, 340, 340]
	      X0		      "1"
	      InheritSampleTime	      off
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory2"
	      Position		      [605, 60, 635, 90]
	      X0		      "0"
	      InheritSampleTime	      off
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [3, 1]
	      Position		      [215, 99, 245, 131]
	      Inputs		      "**/"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational"
	      Position		      [225, 307, 255, 338]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      Position		      [545, 27, 575, 58]
	      Operator		      "~="
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [160, 192, 190, 223]
	      IconShape		      "rectangular"
	      Inputs		      "++"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum1"
	      Ports		      [2, 1]
	      Position		      [160, 297, 190, 328]
	      IconShape		      "rectangular"
	      Inputs		      "-+"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [310, 110, 340, 140]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      Position		      [465, 120, 495, 150]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To Workspace7"
	      Position		      [510, 185, 590, 205]
	      Orientation	      "left"
	      ShowName		      off
	      VariableName	      "mc_spd_est"
	      MaxDataPoints	      "inf"
	      Decimation	      "1"
	      SampleTime	      "-1"
	      SaveFormat	      "Array"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Out1"
	      Position		      [625, 128, 655, 142]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Line {
	      SrcBlock		      "<= max spd"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, -40; -65, 0; 0, -45]
		DstBlock		"Relational\nOperator1"
		DstPort			2
	      }
	      Branch {
		Points			[20, 0]
		Branch {
		  Points		  [0, 60]
		  DstBlock		  "To Workspace7"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "Out1"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, -100]
		DstBlock		"Relational\nOperator1"
		DstPort			1
	      }
	      Branch {
		DstBlock		"<= max spd"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"Memory2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Logical\nOperator1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      DstBlock		      "Goto <sdo>1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory2"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "mc_spd_out_a"
	      SrcPort		      1
	      Points		      [115, 0]
	      Branch {
		Points			[255, 0]
		DstBlock		"Switch1"
		DstPort			3
	      }
	      Branch {
		Points			[0, 40]
		DstBlock		"Product"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Product"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      Labels		      [1, 0]
	      SrcBlock		      "From <wh>/\ntire slip model (m/s)"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"Sum"
		DstPort			1
	      }
	      Branch {
		Points			[0, -25; 155, 0; 0, -50]
		DstBlock		"Switch"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <cyc>"
	      SrcPort		      1
	      DstBlock		      "Sum1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <veh>"
	      SrcPort		      1
	      Points		      [35, 0]
	      Branch {
		DstBlock		"Gain"
		DstPort			1
	      }
	      Branch {
		Points			[0, 190]
		DstBlock		"Sum1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Relational"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum1"
	      SrcPort		      1
	      DstBlock		      "Relational"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational"
	      SrcPort		      1
	      DstBlock		      "Memory1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory1"
	      SrcPort		      1
	      Points		      [95, 0; 0, -190]
	      DstBlock		      "Switch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Memory"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  Lookup2D
	  Name			  "motor/controller\ninput power\nmap (W)"
	  Position		  [530, 40, 590, 80]
	  RowIndex		  "mc_map_spd*mc_spd_scale"
	  ColumnIndex		  "mc_map_trq*mc_trq_scale"
	  OutputValues		  "mc_inpwr_map*mc_spd_scale*mc_trq_scale"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "rotor drive torque\navailable (Nm)"
	  Ports			  [2, 1]
	  Position		  [130, 300, 160, 335]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "rotor drive torque\navailable (Nm)"
	    Location		    [189, 257, 660, 470]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "torque per unit\ninput power (N-m/W)"
	      Position		      [55, 15, 75, 35]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "available input power\n(W)"
	      Position		      [55, 90, 75, 110]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [395, 155, 451, 195]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[152, 98, 643, 260]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [243, 78]
		  Text			  "This block computes the actual roto"
"r torque given the actual motor input power and\nthe ratio (req'd rotor torqu"
"e)/(req'd input power).\n\nIf the above ratio has the value inf, which implie"
"s that the req'd input power is zero,\nthen the actual rotor torque is assume"
"d to be zero.  This is not reflective of reality, of course:\nwith zero input"
" power, the rotor torque would be the motor spin-loss torque at the given spe"
"ed.\nBecause this simplification occurs only when req'd input power is zero, "
"it does not.\naffect fuel economy or max effort acceleration calculations."
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      Position		      [205, 110, 225, 130]
	      Value		      "inf"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      Position		      [155, 140, 175, 160]
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [220, 17, 250, 48]
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      Position		      [260, 62, 290, 93]
	      Operator		      "~="
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [345, 30, 375, 60]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "rotor drive\ntorque\navailable"
	      Position		      [425, 35, 445, 55]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      Points		      [150, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "available input power\n(W)"
	      SrcPort		      1
	      Points		      [120, 0; 0, -60]
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [25, 0; 0, -35]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "rotor drive\ntorque\navailable"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "torque per unit\ninput power (N-m/W)"
	      SrcPort		      1
	      Points		      [40, 0]
	      Branch {
		DstBlock		"Product"
		DstPort			1
	      }
	      Branch {
		Points			[0, 45]
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	    }
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "req'd motor\ninput power (W)"
	  Position		  [895, 35, 915, 55]
	  FontName		  "Arial"
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Block {
	  BlockType		  Outport
	  Name			  "drive torque and\nspeed avail. at rotor\n(N"
"m), (rad/s)"
	  Position		  [765, 290, 785, 310]
	  NamePlacement		  "alternate"
	  FontName		  "Arial"
	  Port			  "2"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Line {
	  SrcBlock		  "torque and speed\n req'd at rotor\n(Nm), (r"
"ad/s)"
	  SrcPort		  1
	  DstBlock		  "Demux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    DstBlock		    "To Workspace4"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Sum"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "available motor\ninput power (W)"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    DstBlock		    "rotor drive torque\navailable (Nm)"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [0, 65; 70, 0]
	    Branch {
	      Points		      [0, -15]
	      DstBlock		      "To Workspace8"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [0, 5]
	      DstBlock		      "Mux3"
	      DstPort		      3
	    }
	  }
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  2
	  Points		  [25, 0]
	  Branch {
	    Points		    [0, -75]
	    DstBlock		    "motor controller\nlogic interface"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [5, 0]
	    Branch {
	      Points		      [-5, 0; 0, 100]
	      DstBlock		      "To Workspace5"
	      DstPort		      1
	    }
	    Branch {
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "From <vc>"
	  SrcPort		  1
	  DstBlock		  "mc tmp"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "<vc>"
	  SrcPort		  1
	  DstBlock		  "mc tmp"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "mc tmp"
	  SrcPort		  2
	  DstBlock		  "To WS4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "mc tmp"
	  SrcPort		  1
	  DstBlock		  "To WS2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "do ex calcs?"
	  SrcPort		  1
	  DstBlock		  "mc tmp"
	  DstPort		  enable
	}
	Line {
	  SrcBlock		  "Fcn"
	  SrcPort		  1
	  Points		  [10, 0]
	  Branch {
	    DstBlock		    "mc tmp"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "To WS1"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Mux3"
	  SrcPort		  1
	  DstBlock		  "Fcn"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux2"
	  SrcPort		  1
	  Points		  [5, 0; 0, -30]
	  DstBlock		  "drive torque and\nspeed avail. at rotor\n(N"
"m), (rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "motor controller\nlogic interface"
	  SrcPort		  1
	  Points		  [0, 0; 30, 0]
	  Branch {
	    DstBlock		    "req'd motor\ninput power (W)"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "To Workspace9"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "enforce\ntorque\nlimit"
	  SrcPort		  1
	  Points		  [30, 0]
	  Branch {
	    Points		    [0, 105]
	    DstBlock		    "N-m drive torque\nper W input"
	    DstPort		    2
	  }
	  Branch {
	    DstBlock		    "motor/controller\ninput power\nmap (W)"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "effect of inertia\n(Nm)"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    Points		    [0, 205]
	    DstBlock		    "Sum1"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -45]
	    DstBlock		    "Sum"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "enforce\ntorque\nlimit"
	  DstPort		  1
	}
	Line {
	  Labels		  [1, 0]
	  SrcBlock		  "Sum1"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    DstBlock		    "<sdo>"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [50, 0]
	    Branch {
	      DstBlock		      "Mux2"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [0, 50]
	      DstBlock		      "Mux3"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "Saturation"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    DstBlock		    "motor speed\nestimator"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "effect of inertia\n(Nm)"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 45; 60, 0; 0, 190; 25, 0]
	    Branch {
	      Points		      [0, 25]
	      DstBlock		      "<sdo>1"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [115, 0]
	      Branch {
		DstBlock		"Mux2"
		DstPort			2
	      }
	      Branch {
		Points			[0, 40]
		DstBlock		"Mux3"
		DstPort			2
	      }
	    }
	  }
	}
	Line {
	  SrcBlock		  "motor speed\nestimator"
	  SrcPort		  1
	  Points		  [45, 0]
	  Branch {
	    DstBlock		    "enforce\ntorque\nlimit"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [0, -45; 180, 0]
	    DstBlock		    "motor/controller\ninput power\nmap (W)"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "N-m drive torque\nper W input"
	  SrcPort		  1
	  Points		  [20, 0; 0, 85; -745, 0; 0, 55]
	  DstBlock		  "rotor drive torque\navailable (Nm)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "rotor drive torque\navailable (Nm)"
	  SrcPort		  1
	  Points		  [130, 0]
	  Branch {
	    Points		    [0, -85]
	    DstBlock		    "To Workspace10"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Sum1"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "Switch"
	  SrcPort		  1
	  Points		  [0, 0]
	  Branch {
	    DstBlock		    "motor controller\nlogic interface"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [0, 100]
	    DstBlock		    "N-m drive torque\nper W input"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Product1"
	  SrcPort		  1
	  DstBlock		  "Switch"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "motor/controller\ninput power\nmap (W)"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    Points		    [0, -20]
	    DstBlock		    "Product1"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [35, 0]
	    Branch {
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Branch {
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "Constant"
	  SrcPort		  1
	  Points		  [30, 0; 0, -60]
	  Branch {
	    Points		    [0, -30]
	    DstBlock		    "Product1"
	    DstPort		    2
	  }
	  Branch {
	    DstBlock		    "Product"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "Product"
	  SrcPort		  1
	  DstBlock		  "Switch"
	  DstPort		  3
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "motor/\ncontroller <mc> par"
      Ports		      [2, 2]
      Position		      [155, 165, 205, 205]
      BackgroundColor	      "yellow"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskDisplay	      "image(imread('bdi_mc.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      System {
	Name			"motor/\ncontroller <mc> par"
	Location		[109, 191, 1136, 792]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "torque and speed\n req'd at rotor\n(Nm), (r"
"ad/s)"
	  Position		  [45, 70, 65, 90]
	  FontName		  "Arial"
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Inport
	  Name			  "available motor\ninput power (W)"
	  Position		  [35, 385, 55, 405]
	  FontName		  "Arial"
	  Port			  "2"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Goto
	  Name			  "<sdo>"
	  Position		  [430, 344, 510, 366]
	  GotoTag		  "mc_trq_out_a"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "<sdo>1"
	  Position		  [335, 424, 415, 446]
	  GotoTag		  "mc_spd_out_a"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  From
	  Name			  "<vc>"
	  Position		  [575, 462, 625, 478]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_prev"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Block NOTES"
	  Ports			  []
	  Position		  [855, 190, 911, 230]
	  BackgroundColor	  "green"
	  ShowName		  off
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "disp('Block\\nNOTES')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Block NOTES"
	    Location		    [497, 485, 1012, 601]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Annotation {
	      Position		      [247, 17]
	      VerticalAlignment	      "top"
	      Text		      "This motor/controller model includes lo"
"ss data, rotational inertia, and performance limits."
	    }
	    Annotation {
	      Position		      [256, 69]
	      Text		      "Available torque is computed from avail"
"able power by assuming that the ratio of rotor torque to input\n(electric) po"
"wer is the same for the actual/achievable situation as was computed for the r"
"equest.  This\nis mathematically equivalent to assuming that the motor/contro"
"ller efficiency.  Rotor speed for the\nactual/achievable calculations is as c"
"omputed in the 'request' branch."
	    }
	  }
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant"
	  Position		  [545, 130, 615, 150]
	  Value			  "mc_eff_scale"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux"
	  Ports			  [1, 2]
	  Position		  [100, 21, 125, 134]
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  Fcn
	  Name			  "Fcn"
	  Position		  [575, 441, 600, 459]
	  ShowName		  off
	  Expr			  "u[3]-u[1]*u[2]"
	}
	Block {
	  BlockType		  From
	  Name			  "From <vc>"
	  Position		  [565, 483, 630, 497]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "key_on"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux2"
	  Ports			  [2, 1]
	  Position		  [500, 372, 520, 423]
	  ShowName		  off
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux3"
	  Ports			  [3, 1]
	  Position		  [550, 423, 555, 477]
	  ShowName		  off
	  Inputs		  "3"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "N-m drive torque\nper W input"
	  Ports			  [2, 1]
	  Position		  [775, 182, 805, 213]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "N-m drive torque\nper W input"
	    Location		    [131, 627, 600, 859]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "req'd input power\n(W)"
	      Position		      [55, 50, 75, 70]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd rotor drive torque\n(Nm)"
	      Position		      [55, 120, 75, 140]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [395, 160, 451, 200]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[101, 64, 548, 181]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [223, 58]
		  Text			  "This block determines the ratio of "
"req'd rotor torque to req'd electrical input power,\n which is proportional t"
"o efficiency if the motor is providing torque.  This ratio is used\nto comput"
"e actual rotor torque given some input power which may be different from\nthe"
" req'd value.\n\nIf the denominator, the req'd input power, is zero, this blo"
"ck outputs inf,\nwhich is a flag used by the block .../rotor drive torque ava"
"ilable (Nm)."
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [90, 15, 110, 35]
	      Value		      "eps"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      Position		      [205, 155, 225, 175]
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      Position		      [295, 155, 315, 175]
	      Value		      "inf"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [220, 47, 250, 78]
	      Inputs		      "/*"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      Position		      [260, 92, 290, 123]
	      Operator		      "~="
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [150, 37, 180, 68]
	      IconShape		      "rectangular"
	      Inputs		      "++"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [345, 60, 375, 90]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Nm per W"
	      Position		      [425, 65, 445, 85]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "req'd rotor drive torque\n(Nm)"
	      SrcPort		      1
	      Points		      [120, 0; 0, -60]
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [25, 0; 0, -35]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Nm per W"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "req'd input power\n(W)"
	      SrcPort		      1
	      Points		      [40, 0]
	      Branch {
		DstBlock		"Sum"
		DstPort			2
	      }
	      Branch {
		Points			[0, 40]
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [10, 0; 0, -50]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	  }
	}
	Block {
	  BlockType		  Product
	  Name			  "Product"
	  Ports			  [2, 1]
	  Position		  [655, 66, 680, 84]
	  ShowName		  off
	  Inputs		  "2"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Product
	  Name			  "Product1"
	  Ports			  [2, 1]
	  Position		  [655, 33, 680, 57]
	  ShowName		  off
	  Inputs		  "*/"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Saturate
	  Name			  "Saturation"
	  Position		  [190, 90, 220, 120]
	  UpperLimit		  "max(mc_map_spd)*mc_spd_scale"
	  LowerLimit		  "0"
	  LinearizeAsGain	  on
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  Ports			  [2, 1]
	  Position		  [385, 45, 405, 65]
	  IconShape		  "rectangular"
	  Inputs		  "++"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum1"
	  Ports			  [2, 1]
	  Position		  [385, 375, 405, 395]
	  IconShape		  "rectangular"
	  Inputs		  "-+"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch"
	  Position		  [710, 40, 740, 80]
	  ShowName		  off
	  Threshold		  "0"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To WS1"
	  Position		  [584, 415, 646, 430]
	  Orientation		  "up"
	  NamePlacement		  "alternate"
	  ShowName		  off
	  FontName		  "Arial"
	  VariableName		  "mc_pwr_loss"
	  MaxDataPoints		  "50000"
	  Decimation		  "1"
	  SampleTime		  "0"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To WS2"
	  Position		  [770, 448, 820, 462]
	  ShowName		  off
	  FontName		  "Arial"
	  VariableName		  "mc_tmp"
	  MaxDataPoints		  "50000"
	  Decimation		  "1"
	  SampleTime		  "0"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To WS4"
	  Position		  [765, 482, 840, 498]
	  ShowName		  off
	  FontName		  "Arial"
	  VariableName		  "mc_clt_th_pwr"
	  MaxDataPoints		  "50000"
	  Decimation		  "1"
	  SampleTime		  "0"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace10"
	  Position		  [142, 340, 238, 360]
	  Orientation		  "up"
	  NamePlacement		  "alternate"
	  ShowName		  off
	  VariableName		  "mc_ni_trq_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace4"
	  Position		  [50, 155, 130, 175]
	  Orientation		  "left"
	  VariableName		  "mc_trq_out_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace5"
	  Position		  [50, 195, 130, 215]
	  Orientation		  "left"
	  VariableName		  "mc_spd_out_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace8"
	  Position		  [225, 435, 305, 455]
	  ShowName		  off
	  VariableName		  "mc_pwr_in_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace9"
	  Position		  [865, 94, 935, 116]
	  VariableName		  "mc_pwr_in_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  Constant
	  Name			  "do ex calcs?"
	  Position		  [665, 405, 725, 420]
	  Orientation		  "down"
	  ShowName		  off
	  Value			  "mc_th_calc"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "documentation10"
	  Ports			  []
	  Position		  [925, 191, 954, 230]
	  BackgroundColor	  "orange"
	  DropShadow		  on
	  ShowName		  off
	  OpenFcn		  "web(['file:\\\\\\' which('motor_controller."
"htm')]);"
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "documentation10"
	    Location		    [129, 62, 308, 146]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "effect of inertia\n(Nm)"
	  Ports			  [1, 1]
	  Position		  [320, 86, 350, 124]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "effect of inertia\n(Nm)"
	    Location		    [245, 76, 961, 542]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "mc_spd_out_a"
	      Position		      [35, 25, 55, 45]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [500, 195, 556, 235]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[497, 485, 951, 582]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [226, 34]
		  Text			  "Torque required to accelerate the m"
"otor's inertia is calculated from the rate of change\nof mc_spd_out_a.  It is"
" no greater than the product of the maximum motor torque and\nthe fractional "
"contribution of the motor's inertia to the total vehicle inertia."
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [75, 330, 95, 350]
	      Value		      "eps"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      Position		      [140, 83, 405, 107]
	      Value		      "max(mc_max_trq)*mc_trq_scale*mc_overtrq"
"_factor"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      Position		      [190, 334, 355, 356]
	      Orientation	      "left"
	      Value		      "gb_ratio(1)*fd_ratio/wh_radius"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <wh>/\ntire slip model (m/s)"
	      Position		      [15, 259, 105, 291]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "veh_spd_a_rec"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      Position		      [165, 14, 245, 56]
	      Gain		      "mc_inertia"
	      Multiplication	      "Element-wise(K.*u)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      Position		      [255, 185, 285, 215]
	      X0		      "0"
	      InheritSampleTime	      off
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      Ports		      [2, 1]
	      Position		      [480, 27, 510, 58]
	      Function		      "min"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [425, 87, 455, 118]
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [135, 267, 165, 298]
	      IconShape		      "rectangular"
	      Inputs		      "++"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [195, 280, 225, 310]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Derivative
	      Name		      "alpha"
	      Position		      [100, 25, 130, 45]
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "motor inertia as a function of total\nv"
"ehicle inertia (generous approximation)"
	      Ports		      [1, 1]
	      Position		      [280, 125, 310, 175]
	      Orientation	      "up"
	      BackgroundColor	      "darkGreen"
	      SourceBlock	      "lib_electric_machine/Sub-models/motor i"
"nertia as a function of total\nvehicle inertia (generous approximation)"
	      SourceType	      "SubSystem"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "overall gear ratio\n/\nwh_radius"
	      Ports		      [2, 1]
	      Position		      [190, 182, 220, 213]
	      Inputs		      "*/"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "out_1"
	      Position		      [555, 35, 575, 55]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "alpha"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "mc_spd_out_a"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"alpha"
		DstPort			1
	      }
	      Branch {
		Points			[0, 155]
		DstBlock		"overall gear ratio\n/\nwh_radius"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      DstBlock		      "out_1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "MinMax"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "overall gear ratio\n/\nwh_radius"
	      SrcPort		      1
	      DstBlock		      "Memory"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "motor inertia as a function of total\nv"
"ehicle inertia (generous approximation)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "motor inertia as a function of total\nv"
"ehicle inertia (generous approximation)"
	      SrcPort		      1
	      Points		      [0, -10]
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <wh>/\ntire slip model (m/s)"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"Sum"
		DstPort			1
	      }
	      Branch {
		Points			[0, 20]
		DstBlock		"Switch"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-5, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [0, -30; -55, 0]
	      DstBlock		      "overall gear ratio\n/\nwh_radius"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "enforce\ntorque\nlimit"
	  Ports			  [2, 1]
	  Position		  [435, 44, 470, 91]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "enforce\ntorque\nlimit"
	    Location		    [192, 297, 795, 533]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "req'd motor\ntorque (Nm)"
	      Position		      [45, 68, 75, 82]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "limited motor\nspeed (rad/s)"
	      Position		      [45, 148, 75, 162]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [470, 155, 526, 195]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[151, 104, 560, 200]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [207, 39]
		  Text			  "This block enforces the maximum tor"
"que production and absorption\ncapability limits of the motor.  It assumes th"
"at exactly as much torque\ncan be absorbed as can be produced at a given spee"
"d."
		}
	      }
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <sdo>"
	      Position		      [490, 19, 580, 41]
	      GotoTag		      "mc_trq_limited"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      Ports		      [2, 1]
	      Position		      [340, 67, 370, 98]
	      Function		      "min"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax1"
	      Ports		      [2, 1]
	      Position		      [340, 132, 370, 163]
	      Function		      "max"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      Position		      [440, 12, 470, 43]
	      Operator		      "~="
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [440, 80, 470, 110]
	      Threshold		      "0"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To WS2"
	      Position		      [215, 166, 305, 184]
	      ShowName		      off
	      FontName		      "Arial"
	      VariableName	      "mc_max_trq_vec"
	      MaxDataPoints	      "50000"
	      Decimation	      "1"
	      SampleTime	      "0"
	      SaveFormat	      "Array"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max gen torque"
	      Position		      [140, 185, 170, 205]
	      InputValues	      "mc_map_spd*mc_spd_scale"
	      OutputValues	      "mc_max_gen_trq*mc_overtrq_factor*mc_trq"
"_scale"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max torque"
	      Position		      [140, 145, 170, 165]
	      InputValues	      "mc_map_spd*mc_spd_scale"
	      OutputValues	      "mc_max_trq*mc_overtrq_factor*mc_trq_sca"
"le"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "limited motor\ntorque (Nm)"
	      Position		      [520, 88, 550, 102]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Line {
	      SrcBlock		      "max torque"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		Points			[0, 20]
		DstBlock		"To WS2"
		DstPort			1
	      }
	      Branch {
		Points			[20, 0; 0, -65]
		DstBlock		"MinMax"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "req'd motor\ntorque (Nm)"
	      SrcPort		      1
	      Points		      [225, 0]
	      Branch {
		Points			[0, -55]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	      Branch {
		Points			[10, 0]
		Branch {
		  Points		  [0, 45]
		  Branch {
		    Points		    [80, 0; 0, -25]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 20]
		    DstBlock		    "MinMax1"
		    DstPort		    1
		  }
		}
		Branch {
		  DstBlock		  "MinMax"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, -25; -65, 0]
		DstBlock		"Relational\nOperator2"
		DstPort			2
	      }
	      Branch {
		DstBlock		"limited motor\ntorque (Nm)"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "MinMax1"
	      SrcPort		      1
	      Points		      [30, 0; 0, -45]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Goto <sdo>"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "limited motor\nspeed (rad/s)"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"max torque"
		DstPort			1
	      }
	      Branch {
		Points			[0, 40]
		DstBlock		"max gen torque"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "max gen torque"
	      SrcPort		      1
	      Points		      [150, 0]
	      DstBlock		      "MinMax1"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "mc tmp"
	  Ports			  [3, 2, 1]
	  Position		  [645, 436, 745, 504]
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  on
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "mc tmp"
	    Location		    [12, 57, 769, 241]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Qmc_gen"
	      Position		      [35, 35, 55, 55]
	      NamePlacement	      "alternate"
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "veh spd"
	      Position		      [35, 65, 55, 85]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "key ON?"
	      Position		      [455, 35, 475, 55]
	      NamePlacement	      "alternate"
	      Port		      "3"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      EnablePort
	      Name		      "Enable"
	      Ports		      []
	      Position		      [30, 122, 60, 148]
	      StatesWhenEnabling      "reset"
	      ShowOutputPort	      off
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "1/mcp"
	      Position		      [590, 93, 615, 117]
	      Gain		      "1/(mc_mass*mc_cp)"
	      Multiplication	      "Element-wise(K.*u)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      ">=0"
	      Position		      [640, 35, 650, 55]
	      NamePlacement	      "alternate"
	      UpperLimit	      "Inf"
	      LowerLimit	      "0"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      ">=0 "
	      Position		      [170, 35, 180, 55]
	      NamePlacement	      "alternate"
	      UpperLimit	      "Inf"
	      LowerLimit	      "0"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [675, 135, 731, 175]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[505, 510, 848, 589]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [172, 38]
		  Text			  "This block models the thermal behav"
"ior of a motor \nand controller  with active fluid cooling.\nThe module is mo"
"deled as a single lumped thermal mass.  \nThe fan is on whenever the battery "
"temp is > the set temp."
		}
	      }
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux10"
	      Ports		      [2, 1]
	      Position		      [320, 74, 325, 121]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Inputs		      "2"
	      DisplayOption	      "none"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux9"
	      Ports		      [2, 1]
	      Position		      [240, 65, 245, 105]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Inputs		      "2"
	      DisplayOption	      "none"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Qa"
	      Position		      [350, 91, 390, 109]
	      NamePlacement	      "alternate"
	      FontName		      "Arial"
	      Expr		      "u(1)*(mc_sarea*mc_trq_scale*mc_spd_scal"
"e)*u(2)"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Qc1"
	      Ports		      [2, 1]
	      Position		      [560, 86, 570, 119]
	      ShowName		      off
	      IconShape		      "rectangular"
	      Inputs		      "-+"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Qnet"
	      Ports		      [3, 1]
	      Position		      [410, 54, 420, 146]
	      NamePlacement	      "alternate"
	      IconShape		      "rectangular"
	      Inputs		      "+++"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Qp2a,v7"
	      Position		      [145, 86, 220, 104]
	      ShowName		      off
	      FontName		      "Arial"
	      Expr		      "amb_tmp-u(1)"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Qr"
	      Position		      [350, 122, 390, 138]
	      FontName		      "Arial"
	      Expr		      "0.9*(5.67e-8)*(mc_sarea*mc_trq_scale*mc"
"_spd_scale)*((amb_tmp+273)^4 - (u(1)+273)^4)"
	    }
	    Block {
	      BlockType		      Integrator
	      Name		      "Tmc3"
	      Ports		      [1, 1]
	      Position		      [630, 95, 650, 115]
	      ShowName		      off
	      ExternalReset	      "none"
	      InitialConditionSource  "internal"
	      InitialCondition	      "mc_init_tmp"
	      LimitOutput	      off
	      UpperSaturationLimit    "inf"
	      LowerSaturationLimit    "-inf"
	      ShowSaturationPort      off
	      ShowStatePort	      off
	      AbsoluteTolerance	      "auto"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Va/Vv"
	      Position		      [90, 62, 120, 88]
	      Gain		      "0.5"
	      Multiplication	      "Element-wise(K.*u)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "ha"
	      Position		      [260, 76, 295, 94]
	      NamePlacement	      "alternate"
	      FontName		      "Arial"
	      Expr		      "6 + 6*((abs(u(2))/1000))^0.25 + 60*(abs"
"(u(1))/30)^0.63"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "mc coolant"
	      Ports		      [2, 1, 1]
	      Position		      [445, 77, 530, 108]
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      on
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"mc coolant"
		Location		[715, 352, 965, 467]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Tcl"
		  Position		  [15, 58, 45, 72]
		  NamePlacement		  "alternate"
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Inport
		  Name			  "Qmc "
		  Position		  [20, 78, 50, 92]
		  Port			  "2"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  EnablePort
		  Name			  "Enable"
		  Ports			  []
		  Position		  [186, 25, 223, 43]
		  NamePlacement		  "alternate"
		  StatesWhenEnabling	  "reset"
		  ShowOutputPort	  off
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  Position		  [50, 44, 95, 56]
		  ShowName		  off
		  Value			  "mc_tstat"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  Ports			  [2, 1]
		  Position		  [165, 62, 180, 93]
		  ShowName		  off
		  Inputs		  "2"
		  Multiplication	  "Element-wise(.*)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  Position		  [120, 44, 140, 71]
		  ShowName		  off
		  Operator		  "<="
		}
		Block {
		  BlockType		  Outport
		  Name			  "Qmc_clt"
		  Position		  [200, 73, 230, 87]
		  NamePlacement		  "alternate"
		  Port			  "1"
		  OutputWhenDisabled	  "reset"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Product1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  DstBlock		  "Qmc_clt"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Qmc "
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Tcl"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Tmc"
	      Position		      [695, 95, 715, 115]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Qmc_clt"
	      Position		      [695, 35, 715, 55]
	      Port		      "2"
	      OutputWhenDisabled      "reset"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Mux10"
	      SrcPort		      1
	      DstBlock		      "Qa"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mux9"
	      SrcPort		      1
	      DstBlock		      "ha"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Va/Vv"
	      SrcPort		      1
	      DstBlock		      "Mux9"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "ha"
	      SrcPort		      1
	      DstBlock		      "Mux10"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Qp2a,v7"
	      SrcPort		      1
	      Points		      [0, 0]
	      Branch {
		DstBlock		"Mux9"
		DstPort			2
	      }
	      Branch {
		Points			[0, 15]
		DstBlock		"Mux10"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Qr"
	      SrcPort		      1
	      DstBlock		      "Qnet"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Qmc_gen"
	      SrcPort		      1
	      DstBlock		      ">=0 "
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      ">=0 "
	      SrcPort		      1
	      Points		      [210, 0]
	      DstBlock		      "Qnet"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Qa"
	      SrcPort		      1
	      DstBlock		      "Qnet"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "veh spd"
	      SrcPort		      1
	      DstBlock		      "Va/Vv"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "key ON?"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "mc coolant"
	      DstPort		      enable
	    }
	    Line {
	      SrcBlock		      ">=0"
	      SrcPort		      1
	      DstBlock		      "Qmc_clt"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "mc coolant"
	      SrcPort		      1
	      Points		      [0, 0]
	      Branch {
		Points			[0, -50]
		DstBlock		">=0"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Qc1"
		DstPort			1
	      }
	    }
	    Line {
	      Labels		      [0, 0]
	      SrcBlock		      "Tmc3"
	      SrcPort		      1
	      Points		      [0, 0]
	      Branch {
		Points			[0, -40; -225, 0]
		DstBlock		"mc coolant"
		DstPort			1
	      }
	      Branch {
		Points			[10, 0]
		Branch {
		  DstBlock		  "Tmc"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 50; -330, 0]
		  Branch {
		    DstBlock		    "Qr"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [-205, 0]
		    DstBlock		    "Qp2a,v7"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Line {
	      SrcBlock		      "1/mcp"
	      SrcPort		      1
	      DstBlock		      "Tmc3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Qc1"
	      SrcPort		      1
	      DstBlock		      "1/mcp"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Qnet"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"mc coolant"
		DstPort			2
	      }
	      Branch {
		Points			[0, 25; 115, 0]
		DstBlock		"Qc1"
		DstPort			2
	      }
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "motor controller\nlogic interface"
	  Ports			  [2, 1]
	  Position		  [765, 14, 840, 76]
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "motor controller\nlogic interface"
	    Location		    [809, 788, 1234, 957]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "w_mc_out_r"
	      Position		      [40, 45, 60, 65]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "P_mc_in_1lim"
	      Position		      [40, 105, 60, 125]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>"
	      Position		      [225, 64, 330, 96]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "P_mc_in_r"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <vc>"
	      Position		      [95, 37, 185, 73]
	      GotoTag		      "w_mc_out_r"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <vc>1"
	      Position		      [95, 98, 185, 132]
	      GotoTag		      "P_mc_in_1lim"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "P_mc_in_r"
	      Position		      [365, 70, 385, 90]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "P_mc_in_1lim"
	      SrcPort		      1
	      DstBlock		      "Goto <vc>1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "w_mc_out_r"
	      SrcPort		      1
	      DstBlock		      "Goto <vc>"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <vc>"
	      SrcPort		      1
	      DstBlock		      "P_mc_in_r"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "motor speed\nestimator"
	  Ports			  [1, 1]
	  Position		  [255, 64, 285, 96]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "motor speed\nestimator"
	    Location		    [152, 233, 955, 652]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "mc_spd_out_a"
	      Position		      [45, 58, 75, 72]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "<= max spd"
	      Position		      [545, 120, 575, 150]
	      UpperLimit	      "max(mc_map_spd)*mc_spd_scale"
	      LowerLimit	      "-inf"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [730, 360, 786, 400]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[497, 485, 832, 570]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [167, 41]
		  Text			  "The requested motor speed is replac"
"ed by an estimate of the\nmotor's previous speed, for loss and max. torque ca"
"lculations,\nwhenever the vehicle missed the trace by more than 1 mph\non the"
" last time step."
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [165, 240, 185, 260]
	      Orientation	      "left"
	      Value		      "eps"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      Position		      [315, 165, 335, 185]
	      Orientation	      "left"
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      Position		      [230, 360, 250, 380]
	      Orientation	      "left"
	      Value		      "2"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <cyc>"
	      Position		      [30, 304, 120, 336]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "cyc_mph_r"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <veh>"
	      Position		      [30, 99, 85, 131]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "mpha"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <wh>/\ntire slip model (m/s)"
	      Position		      [30, 184, 120, 216]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "veh_spd_a_rec"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      Position		      [150, 97, 190, 133]
	      Gain		      "0.447"
	      Multiplication	      "Element-wise(K.*u)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <sdo>1"
	      Position		      [705, 44, 790, 66]
	      GotoTag		      "mc_spd_limited"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      Ports		      [2, 1]
	      Position		      [660, 37, 690, 68]
	      Operator		      "AND"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      Position		      [395, 110, 425, 140]
	      X0		      "cyc_mph(1,2)*0.447/wh_radius*fd_ratio*m"
"ax(gb_ratio)*tc_mc_to_fc_ratio"
	      InheritSampleTime	      off
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory1"
	      Position		      [310, 310, 340, 340]
	      X0		      "1"
	      InheritSampleTime	      off
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory2"
	      Position		      [605, 60, 635, 90]
	      X0		      "0"
	      InheritSampleTime	      off
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [3, 1]
	      Position		      [215, 99, 245, 131]
	      Inputs		      "**/"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational"
	      Position		      [225, 307, 255, 338]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      Position		      [545, 27, 575, 58]
	      Operator		      "~="
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [160, 192, 190, 223]
	      IconShape		      "rectangular"
	      Inputs		      "++"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum1"
	      Ports		      [2, 1]
	      Position		      [160, 297, 190, 328]
	      IconShape		      "rectangular"
	      Inputs		      "-+"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [310, 110, 340, 140]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      Position		      [465, 120, 495, 150]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To Workspace7"
	      Position		      [510, 185, 590, 205]
	      Orientation	      "left"
	      ShowName		      off
	      VariableName	      "mc_spd_est"
	      MaxDataPoints	      "inf"
	      Decimation	      "1"
	      SampleTime	      "-1"
	      SaveFormat	      "Array"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Out1"
	      Position		      [625, 128, 655, 142]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Line {
	      SrcBlock		      "<= max spd"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, -40; -65, 0; 0, -45]
		DstBlock		"Relational\nOperator1"
		DstPort			2
	      }
	      Branch {
		Points			[20, 0]
		Branch {
		  Points		  [0, 60]
		  DstBlock		  "To Workspace7"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "Out1"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, -100]
		DstBlock		"Relational\nOperator1"
		DstPort			1
	      }
	      Branch {
		DstBlock		"<= max spd"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"Memory2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Logical\nOperator1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      DstBlock		      "Goto <sdo>1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory2"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "mc_spd_out_a"
	      SrcPort		      1
	      Points		      [115, 0]
	      Branch {
		Points			[255, 0]
		DstBlock		"Switch1"
		DstPort			3
	      }
	      Branch {
		Points			[0, 40]
		DstBlock		"Product"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Product"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      Labels		      [1, 0]
	      SrcBlock		      "From <wh>/\ntire slip model (m/s)"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"Sum"
		DstPort			1
	      }
	      Branch {
		Points			[0, -25; 155, 0; 0, -50]
		DstBlock		"Switch"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <cyc>"
	      SrcPort		      1
	      DstBlock		      "Sum1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <veh>"
	      SrcPort		      1
	      Points		      [35, 0]
	      Branch {
		DstBlock		"Gain"
		DstPort			1
	      }
	      Branch {
		Points			[0, 190]
		DstBlock		"Sum1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Relational"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum1"
	      SrcPort		      1
	      DstBlock		      "Relational"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational"
	      SrcPort		      1
	      DstBlock		      "Memory1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory1"
	      SrcPort		      1
	      Points		      [95, 0; 0, -190]
	      DstBlock		      "Switch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Memory"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  Lookup2D
	  Name			  "motor/controller\ninput power\nmap (W)"
	  Position		  [555, 40, 615, 80]
	  RowIndex		  "mc_map_spd*mc_spd_scale"
	  ColumnIndex		  "mc_map_trq*mc_trq_scale"
	  OutputValues		  "mc_inpwr_map*mc_spd_scale*mc_trq_scale"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "rotor drive torque\navailable (Nm)"
	  Ports			  [2, 1]
	  Position		  [115, 370, 145, 405]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "rotor drive torque\navailable (Nm)"
	    Location		    [191, 259, 662, 472]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "torque per unit\ninput power (N-m/W)"
	      Position		      [55, 15, 75, 35]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "available input power\n(W)"
	      Position		      [55, 90, 75, 110]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [395, 155, 451, 195]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[150, 96, 641, 258]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [243, 78]
		  Text			  "This block computes the actual roto"
"r torque given the actual motor input power and\nthe ratio (req'd rotor torqu"
"e)/(req'd input power).\n\nIf the above ratio has the value inf, which implie"
"s that the req'd input power is zero,\nthen the actual rotor torque is assume"
"d to be zero.  This is not reflective of reality, of course:\nwith zero input"
" power, the rotor torque would be the motor spin-loss torque at the given spe"
"ed.\nBecause this simplification occurs only when req'd input power is zero, "
"it does not.\naffect fuel economy or max effort acceleration calculations."
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      Position		      [205, 110, 225, 130]
	      Value		      "inf"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      Position		      [155, 140, 175, 160]
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [220, 17, 250, 48]
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      Position		      [260, 62, 290, 93]
	      Operator		      "~="
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [345, 30, 375, 60]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "rotor drive\ntorque\navailable"
	      Position		      [425, 35, 445, 55]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      Points		      [150, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "available input power\n(W)"
	      SrcPort		      1
	      Points		      [120, 0; 0, -60]
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [25, 0; 0, -35]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "rotor drive\ntorque\navailable"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "torque per unit\ninput power (N-m/W)"
	      SrcPort		      1
	      Points		      [40, 0]
	      Branch {
		DstBlock		"Product"
		DstPort			1
	      }
	      Branch {
		Points			[0, 45]
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	    }
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "req'd motor\ninput power (W)"
	  Position		  [890, 35, 910, 55]
	  FontName		  "Arial"
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Block {
	  BlockType		  Outport
	  Name			  "drive torque and\nspeed avail. at rotor\n(N"
"m), (rad/s)"
	  Position		  [765, 360, 785, 380]
	  NamePlacement		  "alternate"
	  FontName		  "Arial"
	  Port			  "2"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Line {
	  SrcBlock		  "rotor drive torque\navailable (Nm)"
	  SrcPort		  1
	  Points		  [0, 0; 40, 0]
	  Branch {
	    DstBlock		    "To Workspace10"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Sum1"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "torque and speed\n req'd at rotor\n(Nm), (r"
"ad/s)"
	  SrcPort		  1
	  DstBlock		  "Demux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    DstBlock		    "To Workspace4"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Sum"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "available motor\ninput power (W)"
	  SrcPort		  1
	  Points		  [0, 0; 15, 0]
	  Branch {
	    DstBlock		    "rotor drive torque\navailable (Nm)"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [0, 70; 70, 0]
	    Branch {
	      Points		      [0, -20]
	      DstBlock		      "To Workspace8"
	      DstPort		      1
	    }
	    Branch {
	      DstBlock		      "Mux3"
	      DstPort		      3
	    }
	  }
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  2
	  Points		  [25, 0]
	  Branch {
	    Points		    [0, -75]
	    DstBlock		    "motor controller\nlogic interface"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [5, 0]
	    Branch {
	      Points		      [0, 100]
	      DstBlock		      "To Workspace5"
	      DstPort		      1
	    }
	    Branch {
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "From <vc>"
	  SrcPort		  1
	  DstBlock		  "mc tmp"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "<vc>"
	  SrcPort		  1
	  DstBlock		  "mc tmp"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "mc tmp"
	  SrcPort		  2
	  DstBlock		  "To WS4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "mc tmp"
	  SrcPort		  1
	  DstBlock		  "To WS2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "do ex calcs?"
	  SrcPort		  1
	  DstBlock		  "mc tmp"
	  DstPort		  enable
	}
	Line {
	  SrcBlock		  "Fcn"
	  SrcPort		  1
	  Points		  [0, 0; 10, 0]
	  Branch {
	    DstBlock		    "mc tmp"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "To WS1"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Mux3"
	  SrcPort		  1
	  DstBlock		  "Fcn"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux2"
	  SrcPort		  1
	  Points		  [5, 0; 0, -30]
	  DstBlock		  "drive torque and\nspeed avail. at rotor\n(N"
"m), (rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "motor controller\nlogic interface"
	  SrcPort		  1
	  Points		  [0, 0; 5, 0]
	  Branch {
	    DstBlock		    "req'd motor\ninput power (W)"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "To Workspace9"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "enforce\ntorque\nlimit"
	  SrcPort		  1
	  Points		  [30, 0]
	  Branch {
	    DstBlock		    "motor/controller\ninput power\nmap (W)"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [0, 135]
	    DstBlock		    "N-m drive torque\nper W input"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "effect of inertia\n(Nm)"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    Points		    [0, 275]
	    DstBlock		    "Sum1"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -45]
	    DstBlock		    "Sum"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "enforce\ntorque\nlimit"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "N-m drive torque\nper W input"
	  SrcPort		  1
	  Points		  [5, 0; 0, 105; -720, 0; 0, 75]
	  DstBlock		  "rotor drive torque\navailable (Nm)"
	  DstPort		  1
	}
	Line {
	  Labels		  [2, 0]
	  SrcBlock		  "Sum1"
	  SrcPort		  1
	  Points		  [0, 0; 5, 0]
	  Branch {
	    DstBlock		    "<sdo>"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [45, 0]
	    Branch {
	      DstBlock		      "Mux2"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [0, 50]
	      DstBlock		      "Mux3"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "Saturation"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    Points		    [0, 115; 60, 0; 0, 190; 20, 0]
	    Branch {
	      DstBlock		      "<sdo>1"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [120, 0]
	      Branch {
		DstBlock		"Mux2"
		DstPort			2
	      }
	      Branch {
		Points			[0, 40]
		DstBlock		"Mux3"
		DstPort			2
	      }
	    }
	  }
	  Branch {
	    DstBlock		    "motor speed\nestimator"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "effect of inertia\n(Nm)"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "motor speed\nestimator"
	  SrcPort		  1
	  Points		  [45, 0]
	  Branch {
	    DstBlock		    "enforce\ntorque\nlimit"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [0, -45; 205, 0]
	    DstBlock		    "motor/controller\ninput power\nmap (W)"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Constant"
	  SrcPort		  1
	  Points		  [15, 0; 0, -60]
	  Branch {
	    Points		    [0, -30]
	    DstBlock		    "Product1"
	    DstPort		    2
	  }
	  Branch {
	    DstBlock		    "Product"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "Switch"
	  SrcPort		  1
	  Points		  [0, 0]
	  Branch {
	    DstBlock		    "motor controller\nlogic interface"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [0, 130]
	    DstBlock		    "N-m drive torque\nper W input"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Product1"
	  SrcPort		  1
	  DstBlock		  "Switch"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Product"
	  SrcPort		  1
	  DstBlock		  "Switch"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "motor/controller\ninput power\nmap (W)"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    Points		    [0, -20]
	    DstBlock		    "Product1"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [15, 0]
	    Branch {
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Branch {
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	  }
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "motor/\ncontroller <mc> prius"
      Ports		      [2, 2]
      Position		      [265, 169, 320, 211]
      BackgroundColor	      "yellow"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskDisplay	      "image(imread('bdi_mc.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      System {
	Name			"motor/\ncontroller <mc> prius"
	Location		[272, 50, 1249, 505]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "torque and speed\n req'd at rotor\n(Nm), (r"
"ad/s)"
	  Position		  [45, 70, 65, 90]
	  FontName		  "Arial"
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Inport
	  Name			  "available motor\ninput power (W)"
	  Position		  [35, 315, 55, 335]
	  FontName		  "Arial"
	  Port			  "2"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Goto
	  Name			  "<sdo>"
	  Position		  [430, 274, 510, 296]
	  GotoTag		  "mc_trq_out_a"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "<sdo>1"
	  Position		  [345, 349, 425, 371]
	  GotoTag		  "mc_spd_out_a"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  From
	  Name			  "<vc>"
	  Position		  [575, 392, 625, 408]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_prev"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Block NOTES"
	  Ports			  []
	  Position		  [855, 190, 911, 230]
	  BackgroundColor	  "green"
	  ShowName		  off
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "disp('Block\\nNOTES')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Block NOTES"
	    Location		    [497, 485, 1012, 601]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Annotation {
	      Position		      [247, 17]
	      VerticalAlignment	      "top"
	      Text		      "This motor/controller model includes lo"
"ss data, rotational inertia, and performance limits."
	    }
	    Annotation {
	      Position		      [256, 69]
	      Text		      "Available torque is computed from avail"
"able power by assuming that the ratio of rotor torque to input\n(electric) po"
"wer is the same for the actual/achievable situation as was computed for the r"
"equest.  This\nis mathematically equivalent to assuming that the motor/contro"
"ller efficiency.  Rotor speed for the\nactual/achievable calculations is as c"
"omputed in the 'request' branch."
	    }
	  }
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant"
	  Position		  [525, 130, 595, 150]
	  Value			  "mc_eff_scale"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux"
	  Ports			  [1, 2]
	  Position		  [100, 21, 125, 134]
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  Fcn
	  Name			  "Fcn"
	  Position		  [575, 371, 600, 389]
	  ShowName		  off
	  Expr			  "u(3)-u(1)*u(2)"
	}
	Block {
	  BlockType		  From
	  Name			  "From <vc>"
	  Position		  [565, 413, 630, 427]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "key_on"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux2"
	  Ports			  [2, 1]
	  Position		  [500, 302, 520, 353]
	  ShowName		  off
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux3"
	  Ports			  [3, 1]
	  Position		  [550, 353, 555, 407]
	  ShowName		  off
	  Inputs		  "3"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "N-m drive torque\nper W input"
	  Ports			  [2, 1]
	  Position		  [755, 152, 785, 183]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "N-m drive torque\nper W input"
	    Location		    [131, 627, 600, 859]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "req'd input power\n(W)"
	      Position		      [55, 50, 75, 70]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd rotor drive torque\n(Nm)"
	      Position		      [55, 120, 75, 140]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [395, 160, 451, 200]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[101, 64, 548, 181]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [223, 58]
		  Text			  "This block determines the ratio of "
"req'd rotor torque to req'd electrical input power,\n which is proportional t"
"o efficiency if the motor is providing torque.  This ratio is used\nto comput"
"e actual rotor torque given some input power which may be different from\nthe"
" req'd value.\n\nIf the denominator, the req'd input power, is zero, this blo"
"ck outputs inf,\nwhich is a flag used by the block .../rotor drive torque ava"
"ilable (Nm)."
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [90, 15, 110, 35]
	      Value		      "eps"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      Position		      [205, 155, 225, 175]
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      Position		      [295, 155, 315, 175]
	      Value		      "inf"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [220, 47, 250, 78]
	      Inputs		      "/*"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      Position		      [260, 92, 290, 123]
	      Operator		      "~="
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [150, 37, 180, 68]
	      IconShape		      "rectangular"
	      Inputs		      "++"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [345, 60, 375, 90]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Nm per W"
	      Position		      [425, 65, 445, 85]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "req'd rotor drive torque\n(Nm)"
	      SrcPort		      1
	      Points		      [120, 0; 0, -60]
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [25, 0; 0, -35]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Nm per W"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "req'd input power\n(W)"
	      SrcPort		      1
	      Points		      [40, 0]
	      Branch {
		DstBlock		"Sum"
		DstPort			2
	      }
	      Branch {
		Points			[0, 40]
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [10, 0; 0, -50]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	  }
	}
	Block {
	  BlockType		  Product
	  Name			  "Product"
	  Ports			  [2, 1]
	  Position		  [620, 66, 645, 84]
	  ShowName		  off
	  Inputs		  "2"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Product
	  Name			  "Product1"
	  Ports			  [2, 1]
	  Position		  [620, 33, 645, 57]
	  ShowName		  off
	  Inputs		  "*/"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Saturate
	  Name			  "Saturation"
	  Position		  [190, 90, 220, 120]
	  UpperLimit		  "max(mc_map_spd)*mc_spd_scale"
	  LowerLimit		  "0"
	  LinearizeAsGain	  on
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  Ports			  [2, 1]
	  Position		  [385, 45, 405, 65]
	  IconShape		  "rectangular"
	  Inputs		  "++"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum1"
	  Ports			  [2, 1]
	  Position		  [385, 305, 405, 325]
	  IconShape		  "rectangular"
	  Inputs		  "-+"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch"
	  Position		  [665, 40, 695, 80]
	  ShowName		  off
	  Threshold		  "0"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To WS1"
	  Position		  [584, 345, 646, 360]
	  Orientation		  "up"
	  NamePlacement		  "alternate"
	  ShowName		  off
	  FontName		  "Arial"
	  VariableName		  "mc_pwr_loss"
	  MaxDataPoints		  "50000"
	  Decimation		  "1"
	  SampleTime		  "0"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To WS2"
	  Position		  [770, 378, 820, 392]
	  ShowName		  off
	  FontName		  "Arial"
	  VariableName		  "mc_tmp"
	  MaxDataPoints		  "50000"
	  Decimation		  "1"
	  SampleTime		  "0"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To WS4"
	  Position		  [765, 412, 840, 428]
	  ShowName		  off
	  FontName		  "Arial"
	  VariableName		  "mc_clt_th_pwr"
	  MaxDataPoints		  "50000"
	  Decimation		  "1"
	  SampleTime		  "0"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace10"
	  Position		  [142, 270, 238, 290]
	  Orientation		  "up"
	  NamePlacement		  "alternate"
	  ShowName		  off
	  VariableName		  "mc_ni_trq_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace4"
	  Position		  [50, 155, 130, 175]
	  Orientation		  "left"
	  VariableName		  "mc_trq_out_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace5"
	  Position		  [50, 195, 130, 215]
	  Orientation		  "left"
	  VariableName		  "mc_spd_out_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace8"
	  Position		  [225, 365, 305, 385]
	  ShowName		  off
	  VariableName		  "mc_pwr_in_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace9"
	  Position		  [835, 94, 905, 116]
	  VariableName		  "mc_pwr_in_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  Constant
	  Name			  "do ex calcs?"
	  Position		  [665, 335, 725, 350]
	  Orientation		  "down"
	  ShowName		  off
	  Value			  "mc_th_calc"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "documentation10"
	  Ports			  []
	  Position		  [925, 191, 954, 230]
	  BackgroundColor	  "orange"
	  DropShadow		  on
	  ShowName		  off
	  OpenFcn		  "web(['file:\\\\\\' which('motor_controller."
"htm')]);"
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "documentation10"
	    Location		    [129, 62, 308, 146]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "effect of inertia\n(Nm)"
	  Ports			  [1, 1]
	  Position		  [320, 86, 350, 124]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "effect of inertia\n(Nm)"
	    Location		    [245, 76, 961, 542]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "mc_spd_out_a"
	      Position		      [35, 25, 55, 45]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [500, 195, 556, 235]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[497, 485, 951, 582]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [226, 34]
		  Text			  "Torque required to accelerate the m"
"otor's inertia is calculated from the rate of change\nof mc_spd_out_a.  It is"
" no greater than the product of the maximum motor torque and\nthe fractional "
"contribution of the motor's inertia to the total vehicle inertia."
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [75, 330, 95, 350]
	      Value		      "eps"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      Position		      [140, 83, 405, 107]
	      Value		      "max(mc_max_trq)*mc_trq_scale*mc_overtrq"
"_factor"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      Position		      [190, 334, 355, 356]
	      Orientation	      "left"
	      Value		      "fd_ratio/wh_radius"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <wh>/\ntire slip model (m/s)"
	      Position		      [15, 259, 105, 291]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "veh_spd_a_rec"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      Position		      [165, 14, 245, 56]
	      Gain		      "mc_inertia"
	      Multiplication	      "Element-wise(K.*u)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      Position		      [255, 185, 285, 215]
	      X0		      "0"
	      InheritSampleTime	      off
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      Ports		      [2, 1]
	      Position		      [480, 27, 510, 58]
	      Function		      "min"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [425, 87, 455, 118]
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [135, 267, 165, 298]
	      IconShape		      "rectangular"
	      Inputs		      "++"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [195, 280, 225, 310]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Derivative
	      Name		      "alpha"
	      Position		      [100, 25, 130, 45]
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "motor inertia as a function of total\nv"
"ehicle inertia (generous approximation)"
	      Ports		      [1, 1]
	      Position		      [280, 125, 310, 175]
	      Orientation	      "up"
	      BackgroundColor	      "darkGreen"
	      SourceBlock	      "lib_electric_machine/Sub-models/motor i"
"nertia as a function of total\nvehicle inertia (generous approximation)"
	      SourceType	      "SubSystem"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "overall gear ratio\n/\nwh_radius"
	      Ports		      [2, 1]
	      Position		      [190, 182, 220, 213]
	      Inputs		      "*/"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "out_1"
	      Position		      [555, 35, 575, 55]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "alpha"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "mc_spd_out_a"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"alpha"
		DstPort			1
	      }
	      Branch {
		Points			[0, 155]
		DstBlock		"overall gear ratio\n/\nwh_radius"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      DstBlock		      "out_1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "MinMax"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "overall gear ratio\n/\nwh_radius"
	      SrcPort		      1
	      DstBlock		      "Memory"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "motor inertia as a function of total\nv"
"ehicle inertia (generous approximation)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "motor inertia as a function of total\nv"
"ehicle inertia (generous approximation)"
	      SrcPort		      1
	      Points		      [0, -10]
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <wh>/\ntire slip model (m/s)"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"Sum"
		DstPort			1
	      }
	      Branch {
		Points			[0, 20]
		DstBlock		"Switch"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-5, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [0, -30; -55, 0]
	      DstBlock		      "overall gear ratio\n/\nwh_radius"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "enforce\ntorque\nlimit"
	  Ports			  [2, 1]
	  Position		  [435, 44, 470, 91]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "enforce\ntorque\nlimit"
	    Location		    [192, 297, 795, 533]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "req'd motor\ntorque (Nm)"
	      Position		      [45, 68, 75, 82]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "limited motor\nspeed (rad/s)"
	      Position		      [45, 148, 75, 162]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [455, 155, 511, 195]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[151, 104, 560, 200]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [207, 39]
		  Text			  "This block enforces the maximum tor"
"que production and absorption\ncapability limits of the motor.  It assumes th"
"at exactly as much torque\ncan be absorbed as can be produced at a given spee"
"d."
		}
	      }
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <sdo>"
	      Position		      [490, 19, 580, 41]
	      GotoTag		      "mc_trq_limited"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      Ports		      [2, 1]
	      Position		      [340, 67, 370, 98]
	      Function		      "min"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax1"
	      Ports		      [2, 1]
	      Position		      [340, 132, 370, 163]
	      Function		      "max"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      Position		      [440, 12, 470, 43]
	      Operator		      "~="
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [440, 80, 470, 110]
	      Threshold		      "0"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To WS2"
	      Position		      [215, 166, 305, 184]
	      ShowName		      off
	      FontName		      "Arial"
	      VariableName	      "mc_max_trq_vec"
	      MaxDataPoints	      "50000"
	      Decimation	      "1"
	      SampleTime	      "0"
	      SaveFormat	      "Array"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max gen torque"
	      Position		      [140, 185, 170, 205]
	      InputValues	      "mc_map_spd*mc_spd_scale"
	      OutputValues	      "mc_max_gen_trq*mc_overtrq_factor*mc_trq"
"_scale"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max torque"
	      Position		      [140, 145, 170, 165]
	      InputValues	      "mc_map_spd*mc_spd_scale"
	      OutputValues	      "mc_max_trq*mc_overtrq_factor*mc_trq_sca"
"le"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "limited motor\ntorque (Nm)"
	      Position		      [520, 88, 550, 102]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Line {
	      SrcBlock		      "max torque"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		Points			[0, 20]
		DstBlock		"To WS2"
		DstPort			1
	      }
	      Branch {
		Points			[20, 0; 0, -65]
		DstBlock		"MinMax"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "req'd motor\ntorque (Nm)"
	      SrcPort		      1
	      Points		      [225, 0]
	      Branch {
		Points			[0, -55]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	      Branch {
		Points			[10, 0]
		Branch {
		  Points		  [0, 45]
		  Branch {
		    Points		    [80, 0; 0, -25]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 20]
		    DstBlock		    "MinMax1"
		    DstPort		    1
		  }
		}
		Branch {
		  DstBlock		  "MinMax"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, -25; -65, 0]
		DstBlock		"Relational\nOperator2"
		DstPort			2
	      }
	      Branch {
		DstBlock		"limited motor\ntorque (Nm)"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "MinMax1"
	      SrcPort		      1
	      Points		      [30, 0; 0, -45]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Goto <sdo>"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "limited motor\nspeed (rad/s)"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"max torque"
		DstPort			1
	      }
	      Branch {
		Points			[0, 40]
		DstBlock		"max gen torque"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "max gen torque"
	      SrcPort		      1
	      Points		      [150, 0]
	      DstBlock		      "MinMax1"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "mc tmp"
	  Ports			  [3, 2, 1]
	  Position		  [645, 366, 745, 434]
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  on
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "mc tmp"
	    Location		    [12, 57, 769, 241]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Qmc_gen"
	      Position		      [35, 35, 55, 55]
	      NamePlacement	      "alternate"
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "veh spd"
	      Position		      [35, 65, 55, 85]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "key ON?"
	      Position		      [455, 35, 475, 55]
	      NamePlacement	      "alternate"
	      Port		      "3"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      EnablePort
	      Name		      "Enable"
	      Ports		      []
	      Position		      [30, 122, 60, 148]
	      StatesWhenEnabling      "reset"
	      ShowOutputPort	      off
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "1/mcp"
	      Position		      [590, 93, 615, 117]
	      Gain		      "1/(mc_mass*mc_cp)"
	      Multiplication	      "Element-wise(K.*u)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      ">=0"
	      Position		      [640, 35, 650, 55]
	      NamePlacement	      "alternate"
	      UpperLimit	      "Inf"
	      LowerLimit	      "0"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      ">=0 "
	      Position		      [170, 35, 180, 55]
	      NamePlacement	      "alternate"
	      UpperLimit	      "Inf"
	      LowerLimit	      "0"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [675, 135, 731, 175]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[505, 510, 848, 589]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [172, 38]
		  Text			  "This block models the thermal behav"
"ior of a motor \nand controller  with active fluid cooling.\nThe module is mo"
"deled as a single lumped thermal mass.  \nThe fan is on whenever the battery "
"temp is > the set temp."
		}
	      }
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux10"
	      Ports		      [2, 1]
	      Position		      [320, 74, 325, 121]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Inputs		      "2"
	      DisplayOption	      "none"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux9"
	      Ports		      [2, 1]
	      Position		      [240, 65, 245, 105]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Inputs		      "2"
	      DisplayOption	      "none"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Qa"
	      Position		      [350, 91, 390, 109]
	      NamePlacement	      "alternate"
	      FontName		      "Arial"
	      Expr		      "u(1)*(mc_sarea*mc_trq_scale*mc_spd_scal"
"e)*u(2)"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Qc1"
	      Ports		      [2, 1]
	      Position		      [560, 86, 570, 119]
	      ShowName		      off
	      IconShape		      "rectangular"
	      Inputs		      "-+"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Qnet"
	      Ports		      [3, 1]
	      Position		      [410, 54, 420, 146]
	      NamePlacement	      "alternate"
	      IconShape		      "rectangular"
	      Inputs		      "+++"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Qp2a,v7"
	      Position		      [145, 86, 220, 104]
	      ShowName		      off
	      FontName		      "Arial"
	      Expr		      "amb_tmp-u(1)"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Qr"
	      Position		      [350, 122, 390, 138]
	      FontName		      "Arial"
	      Expr		      "0.9*(5.67e-8)*(mc_sarea*mc_trq_scale*mc"
"_spd_scale)*((amb_tmp+273)^4 - (u(1)+273)^4)"
	    }
	    Block {
	      BlockType		      Integrator
	      Name		      "Tmc3"
	      Ports		      [1, 1]
	      Position		      [630, 95, 650, 115]
	      ShowName		      off
	      ExternalReset	      "none"
	      InitialConditionSource  "internal"
	      InitialCondition	      "mc_init_tmp"
	      LimitOutput	      off
	      UpperSaturationLimit    "inf"
	      LowerSaturationLimit    "-inf"
	      ShowSaturationPort      off
	      ShowStatePort	      off
	      AbsoluteTolerance	      "auto"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Va/Vv"
	      Position		      [90, 62, 120, 88]
	      Gain		      "0.5"
	      Multiplication	      "Element-wise(K.*u)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "ha"
	      Position		      [260, 76, 295, 94]
	      NamePlacement	      "alternate"
	      FontName		      "Arial"
	      Expr		      "6 + 6*((abs(u(2))/1000))^0.25 + 60*(abs"
"(u(1))/30)^0.63"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "mc coolant"
	      Ports		      [2, 1, 1]
	      Position		      [445, 77, 530, 108]
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      on
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"mc coolant"
		Location		[715, 352, 965, 467]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Tcl"
		  Position		  [15, 58, 45, 72]
		  NamePlacement		  "alternate"
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Inport
		  Name			  "Qmc "
		  Position		  [20, 78, 50, 92]
		  Port			  "2"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  EnablePort
		  Name			  "Enable"
		  Ports			  []
		  Position		  [186, 25, 223, 43]
		  NamePlacement		  "alternate"
		  StatesWhenEnabling	  "reset"
		  ShowOutputPort	  off
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  Position		  [50, 44, 95, 56]
		  ShowName		  off
		  Value			  "mc_tstat"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  Ports			  [2, 1]
		  Position		  [165, 62, 180, 93]
		  ShowName		  off
		  Inputs		  "2"
		  Multiplication	  "Element-wise(.*)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  Position		  [120, 44, 140, 71]
		  ShowName		  off
		  Operator		  "<="
		}
		Block {
		  BlockType		  Outport
		  Name			  "Qmc_clt"
		  Position		  [200, 73, 230, 87]
		  NamePlacement		  "alternate"
		  Port			  "1"
		  OutputWhenDisabled	  "reset"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Product1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  DstBlock		  "Qmc_clt"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Qmc "
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Tcl"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Tmc"
	      Position		      [695, 95, 715, 115]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Qmc_clt"
	      Position		      [695, 35, 715, 55]
	      Port		      "2"
	      OutputWhenDisabled      "reset"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Mux10"
	      SrcPort		      1
	      DstBlock		      "Qa"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mux9"
	      SrcPort		      1
	      DstBlock		      "ha"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Va/Vv"
	      SrcPort		      1
	      DstBlock		      "Mux9"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "ha"
	      SrcPort		      1
	      DstBlock		      "Mux10"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Qp2a,v7"
	      SrcPort		      1
	      Points		      [0, 0]
	      Branch {
		DstBlock		"Mux9"
		DstPort			2
	      }
	      Branch {
		Points			[0, 15]
		DstBlock		"Mux10"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Qr"
	      SrcPort		      1
	      DstBlock		      "Qnet"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Qmc_gen"
	      SrcPort		      1
	      DstBlock		      ">=0 "
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      ">=0 "
	      SrcPort		      1
	      Points		      [210, 0]
	      DstBlock		      "Qnet"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Qa"
	      SrcPort		      1
	      DstBlock		      "Qnet"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "veh spd"
	      SrcPort		      1
	      DstBlock		      "Va/Vv"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "key ON?"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "mc coolant"
	      DstPort		      enable
	    }
	    Line {
	      SrcBlock		      ">=0"
	      SrcPort		      1
	      DstBlock		      "Qmc_clt"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "mc coolant"
	      SrcPort		      1
	      Points		      [0, 0]
	      Branch {
		Points			[0, -50]
		DstBlock		">=0"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Qc1"
		DstPort			1
	      }
	    }
	    Line {
	      Labels		      [0, 0]
	      SrcBlock		      "Tmc3"
	      SrcPort		      1
	      Points		      [0, 0]
	      Branch {
		Points			[0, -40; -225, 0]
		DstBlock		"mc coolant"
		DstPort			1
	      }
	      Branch {
		Points			[10, 0]
		Branch {
		  DstBlock		  "Tmc"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 50; -330, 0]
		  Branch {
		    DstBlock		    "Qr"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [-205, 0]
		    DstBlock		    "Qp2a,v7"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Line {
	      SrcBlock		      "1/mcp"
	      SrcPort		      1
	      DstBlock		      "Tmc3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Qc1"
	      SrcPort		      1
	      DstBlock		      "1/mcp"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Qnet"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"mc coolant"
		DstPort			2
	      }
	      Branch {
		Points			[0, 25; 115, 0]
		DstBlock		"Qc1"
		DstPort			2
	      }
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "motor controller\nlogic interface"
	  Ports			  [2, 1]
	  Position		  [720, 14, 795, 76]
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "motor controller\nlogic interface"
	    Location		    [809, 788, 1234, 957]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "w_mc_out_r"
	      Position		      [40, 45, 60, 65]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "P_mc_in_1lim"
	      Position		      [40, 105, 60, 125]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>"
	      Position		      [225, 64, 330, 96]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "P_mc_in_r"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <vc>"
	      Position		      [95, 37, 185, 73]
	      GotoTag		      "w_mc_out_r"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <vc>1"
	      Position		      [95, 98, 185, 132]
	      GotoTag		      "P_mc_in_1lim"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "P_mc_in_r"
	      Position		      [365, 70, 385, 90]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "P_mc_in_1lim"
	      SrcPort		      1
	      DstBlock		      "Goto <vc>1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "w_mc_out_r"
	      SrcPort		      1
	      DstBlock		      "Goto <vc>"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <vc>"
	      SrcPort		      1
	      DstBlock		      "P_mc_in_r"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "motor speed\nestimator"
	  Ports			  [1, 1]
	  Position		  [255, 64, 285, 96]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "motor speed\nestimator"
	    Location		    [75, 189, 878, 608]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "mc_spd_out_a"
	      Position		      [45, 58, 75, 72]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "<= max spd"
	      Position		      [545, 120, 575, 150]
	      UpperLimit	      "max(mc_map_spd)*mc_spd_scale"
	      LowerLimit	      "-inf"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [730, 360, 786, 400]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[497, 485, 832, 570]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [167, 41]
		  Text			  "The requested motor speed is replac"
"ed by an estimate of the\nmotor's previous speed, for loss and max. torque ca"
"lculations,\nwhenever the vehicle missed the trace by more than 1 mph\non the"
" last time step."
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [165, 240, 185, 260]
	      Orientation	      "left"
	      Value		      "eps"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      Position		      [315, 165, 335, 185]
	      Orientation	      "left"
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      Position		      [230, 360, 250, 380]
	      Orientation	      "left"
	      Value		      "2"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <cyc>"
	      Position		      [30, 304, 120, 336]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "cyc_mph_r"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <veh>"
	      Position		      [30, 99, 85, 131]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "mpha"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <wh>/\ntire slip model (m/s)"
	      Position		      [30, 184, 120, 216]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "veh_spd_a_rec"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      Position		      [150, 97, 190, 133]
	      Gain		      "0.447"
	      Multiplication	      "Element-wise(K.*u)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <sdo>1"
	      Position		      [705, 44, 790, 66]
	      GotoTag		      "mc_spd_limited"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      Ports		      [2, 1]
	      Position		      [660, 37, 690, 68]
	      Operator		      "AND"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      Position		      [395, 110, 425, 140]
	      X0		      "cyc_mph(1,2)*0.447/wh_radius*fd_ratio"
	      InheritSampleTime	      off
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory1"
	      Position		      [310, 310, 340, 340]
	      X0		      "1"
	      InheritSampleTime	      off
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory2"
	      Position		      [605, 60, 635, 90]
	      X0		      "0"
	      InheritSampleTime	      off
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [3, 1]
	      Position		      [215, 99, 245, 131]
	      Inputs		      "**/"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational"
	      Position		      [225, 307, 255, 338]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      Position		      [545, 27, 575, 58]
	      Operator		      "~="
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [160, 192, 190, 223]
	      IconShape		      "rectangular"
	      Inputs		      "++"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum1"
	      Ports		      [2, 1]
	      Position		      [160, 297, 190, 328]
	      IconShape		      "rectangular"
	      Inputs		      "-+"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [310, 110, 340, 140]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      Position		      [465, 120, 495, 150]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To Workspace7"
	      Position		      [510, 185, 590, 205]
	      Orientation	      "left"
	      ShowName		      off
	      VariableName	      "mc_spd_est"
	      MaxDataPoints	      "inf"
	      Decimation	      "1"
	      SampleTime	      "-1"
	      SaveFormat	      "Array"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Out1"
	      Position		      [625, 128, 655, 142]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Line {
	      SrcBlock		      "<= max spd"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, -40; -65, 0; 0, -45]
		DstBlock		"Relational\nOperator1"
		DstPort			2
	      }
	      Branch {
		Points			[20, 0]
		Branch {
		  Points		  [0, 60]
		  DstBlock		  "To Workspace7"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "Out1"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, -100]
		DstBlock		"Relational\nOperator1"
		DstPort			1
	      }
	      Branch {
		DstBlock		"<= max spd"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"Memory2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Logical\nOperator1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      DstBlock		      "Goto <sdo>1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory2"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "mc_spd_out_a"
	      SrcPort		      1
	      Points		      [115, 0]
	      Branch {
		Points			[255, 0]
		DstBlock		"Switch1"
		DstPort			3
	      }
	      Branch {
		Points			[0, 40]
		DstBlock		"Product"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Product"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      Labels		      [1, 0]
	      SrcBlock		      "From <wh>/\ntire slip model (m/s)"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"Sum"
		DstPort			1
	      }
	      Branch {
		Points			[0, -25; 155, 0; 0, -50]
		DstBlock		"Switch"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <cyc>"
	      SrcPort		      1
	      DstBlock		      "Sum1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <veh>"
	      SrcPort		      1
	      Points		      [35, 0]
	      Branch {
		DstBlock		"Gain"
		DstPort			1
	      }
	      Branch {
		Points			[0, 190]
		DstBlock		"Sum1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Relational"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum1"
	      SrcPort		      1
	      DstBlock		      "Relational"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational"
	      SrcPort		      1
	      DstBlock		      "Memory1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory1"
	      SrcPort		      1
	      Points		      [95, 0; 0, -190]
	      DstBlock		      "Switch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Memory"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  Lookup2D
	  Name			  "motor/controller\ninput power\nmap (W)"
	  Position		  [530, 40, 590, 80]
	  RowIndex		  "mc_map_spd*mc_spd_scale"
	  ColumnIndex		  "mc_map_trq*mc_trq_scale"
	  OutputValues		  "mc_inpwr_map*mc_spd_scale*mc_trq_scale"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "rotor drive torque\navailable (Nm)"
	  Ports			  [2, 1]
	  Position		  [115, 300, 145, 335]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "rotor drive torque\navailable (Nm)"
	    Location		    [199, 267, 670, 480]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "torque per unit\ninput power (N-m/W)"
	      Position		      [55, 15, 75, 35]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "available input power\n(W)"
	      Position		      [55, 90, 75, 110]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [395, 155, 451, 195]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[150, 96, 641, 258]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [243, 78]
		  Text			  "This block computes the actual roto"
"r torque given the actual motor input power and\nthe ratio (req'd rotor torqu"
"e)/(req'd input power).\n\nIf the above ratio has the value inf, which implie"
"s that the req'd input power is zero,\nthen the actual rotor torque is assume"
"d to be zero.  This is not reflective of reality, of course:\nwith zero input"
" power, the rotor torque would be the motor spin-loss torque at the given spe"
"ed.\nBecause this simplification occurs only when req'd input power is zero, "
"it does not.\naffect fuel economy or max effort acceleration calculations."
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      Position		      [205, 110, 225, 130]
	      Value		      "inf"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      Position		      [155, 140, 175, 160]
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [220, 17, 250, 48]
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      Position		      [260, 62, 290, 93]
	      Operator		      "~="
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [345, 30, 375, 60]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "rotor drive\ntorque\navailable"
	      Position		      [425, 35, 445, 55]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "torque per unit\ninput power (N-m/W)"
	      SrcPort		      1
	      Points		      [40, 0]
	      Branch {
		Points			[0, 45]
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Product"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "rotor drive\ntorque\navailable"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [25, 0; 0, -35]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "available input power\n(W)"
	      SrcPort		      1
	      Points		      [120, 0; 0, -60]
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      Points		      [150, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "req'd motor\ninput power (W)"
	  Position		  [860, 35, 880, 55]
	  FontName		  "Arial"
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Block {
	  BlockType		  Outport
	  Name			  "drive torque and\nspeed avail. at rotor\n(N"
"m), (rad/s)"
	  Position		  [765, 290, 785, 310]
	  NamePlacement		  "alternate"
	  FontName		  "Arial"
	  Port			  "2"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Line {
	  SrcBlock		  "rotor drive torque\navailable (Nm)"
	  SrcPort		  1
	  Points		  [40, 0]
	  Branch {
	    DstBlock		    "To Workspace10"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Sum1"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "torque and speed\n req'd at rotor\n(Nm), (r"
"ad/s)"
	  SrcPort		  1
	  DstBlock		  "Demux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    DstBlock		    "To Workspace4"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Sum"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "available motor\ninput power (W)"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    DstBlock		    "rotor drive torque\navailable (Nm)"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [0, 70; 70, 0]
	    Branch {
	      Points		      [0, -20]
	      DstBlock		      "To Workspace8"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [0, 0]
	      DstBlock		      "Mux3"
	      DstPort		      3
	    }
	  }
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  2
	  Points		  [25, 0]
	  Branch {
	    Points		    [0, -75]
	    DstBlock		    "motor controller\nlogic interface"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [5, 0]
	    Branch {
	      Points		      [0, 100]
	      DstBlock		      "To Workspace5"
	      DstPort		      1
	    }
	    Branch {
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "From <vc>"
	  SrcPort		  1
	  DstBlock		  "mc tmp"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "<vc>"
	  SrcPort		  1
	  DstBlock		  "mc tmp"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "mc tmp"
	  SrcPort		  2
	  DstBlock		  "To WS4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "mc tmp"
	  SrcPort		  1
	  DstBlock		  "To WS2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "do ex calcs?"
	  SrcPort		  1
	  DstBlock		  "mc tmp"
	  DstPort		  enable
	}
	Line {
	  SrcBlock		  "Fcn"
	  SrcPort		  1
	  Points		  [10, 0]
	  Branch {
	    DstBlock		    "mc tmp"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "To WS1"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Mux3"
	  SrcPort		  1
	  DstBlock		  "Fcn"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux2"
	  SrcPort		  1
	  Points		  [5, 0; 0, -30]
	  DstBlock		  "drive torque and\nspeed avail. at rotor\n(N"
"m), (rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "motor controller\nlogic interface"
	  SrcPort		  1
	  Points		  [-10, 0; 30, 0]
	  Branch {
	    DstBlock		    "req'd motor\ninput power (W)"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "To Workspace9"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "enforce\ntorque\nlimit"
	  SrcPort		  1
	  Points		  [30, 0]
	  Branch {
	    Points		    [0, 105]
	    DstBlock		    "N-m drive torque\nper W input"
	    DstPort		    2
	  }
	  Branch {
	    DstBlock		    "motor/controller\ninput power\nmap (W)"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "effect of inertia\n(Nm)"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    Points		    [0, 205]
	    DstBlock		    "Sum1"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -45]
	    DstBlock		    "Sum"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "enforce\ntorque\nlimit"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "N-m drive torque\nper W input"
	  SrcPort		  1
	  Points		  [25, 0; 0, 75; -625, 0; 0, 65]
	  DstBlock		  "rotor drive torque\navailable (Nm)"
	  DstPort		  1
	}
	Line {
	  Labels		  [1, 0]
	  SrcBlock		  "Sum1"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    DstBlock		    "<sdo>"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [60, 0]
	    Branch {
	      DstBlock		      "Mux2"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [0, 50]
	      DstBlock		      "Mux3"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "Saturation"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    Points		    [0, 45; 60, 0; 0, 190; 15, 0]
	    Branch {
	      Points		      [0, 20]
	      DstBlock		      "<sdo>1"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [135, 0]
	      Branch {
		DstBlock		"Mux2"
		DstPort			2
	      }
	      Branch {
		Points			[0, 40]
		DstBlock		"Mux3"
		DstPort			2
	      }
	    }
	  }
	  Branch {
	    DstBlock		    "motor speed\nestimator"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "effect of inertia\n(Nm)"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "motor speed\nestimator"
	  SrcPort		  1
	  Points		  [45, 0]
	  Branch {
	    DstBlock		    "enforce\ntorque\nlimit"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [0, -45; 180, 0]
	    DstBlock		    "motor/controller\ninput power\nmap (W)"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Product"
	  SrcPort		  1
	  DstBlock		  "Switch"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "motor/controller\ninput power\nmap (W)"
	  SrcPort		  1
	  Points		  [0, 0]
	  Branch {
	    Points		    [0, -20]
	    DstBlock		    "Product1"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [10, 0]
	    Branch {
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Branch {
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "Switch"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    DstBlock		    "motor controller\nlogic interface"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [0, 100]
	    DstBlock		    "N-m drive torque\nper W input"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Product1"
	  SrcPort		  1
	  DstBlock		  "Switch"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant"
	  SrcPort		  1
	  Points		  [0, -60]
	  Branch {
	    Points		    [0, -30]
	    DstBlock		    "Product1"
	    DstPort		    2
	  }
	  Branch {
	    DstBlock		    "Product"
	    DstPort		    2
	  }
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "prius gen/\ncontroller <gc>"
      Ports		      [2, 2]
      Position		      [150, 46, 200, 84]
      BackgroundColor	      "yellow"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskDisplay	      "image(imread('bdi_mc.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      System {
	Name			"prius gen/\ncontroller <gc>"
	Location		[245, 76, 961, 542]
	Open			on
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"89"
	Block {
	  BlockType		  Inport
	  Name			  "torque and speed\n req'd at rotor\n(Nm), (r"
"ad/s)"
	  Position		  [45, 70, 65, 90]
	  FontName		  "Arial"
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Inport
	  Name			  "available gen\ninput power (W)"
	  Position		  [35, 315, 55, 335]
	  FontName		  "Arial"
	  Port			  "2"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Goto
	  Name			  "<sdo>"
	  Position		  [420, 274, 500, 296]
	  GotoTag		  "gc_trq_in_a"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "<sdo>1"
	  Position		  [280, 349, 360, 371]
	  GotoTag		  "gc_spd_in_a"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  From
	  Name			  "<vc>"
	  Position		  [525, 392, 575, 408]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_prev"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Block NOTES"
	  Ports			  []
	  Position		  [715, 190, 771, 230]
	  BackgroundColor	  "green"
	  ShowName		  off
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "disp('Block\\nNOTES')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Block NOTES"
	    Location		    [251, 412, 766, 528]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Annotation {
	      Position		      [247, 17]
	      VerticalAlignment	      "top"
	      Text		      "This generator/controller model include"
"s loss data, rotational inertia, and performance limits."
	    }
	    Annotation {
	      Position		      [256, 69]
	      Text		      "Available torque is computed from avail"
"able power by assuming that the ratio of rotor torque to input\n(electric) po"
"wer is the same for the actual/achievable situation as was computed for the r"
"equest.  This\nis mathematically equivalent to assuming that the generator/co"
"ntroller efficiency.  Rotor speed for the\nactual/achievable calculations is "
"as computed in the 'request' branch."
	    }
	  }
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux"
	  Ports			  [1, 2]
	  Position		  [100, 21, 125, 134]
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  Fcn
	  Name			  "Fcn"
	  Position		  [525, 371, 550, 389]
	  ShowName		  off
	  Expr			  "u(3)-u(1)*u(2)"
	}
	Block {
	  BlockType		  From
	  Name			  "From <vc>"
	  Position		  [515, 413, 580, 427]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "key_on"
	}
	Block {
	  BlockType		  Gain
	  Name			  "Gain"
	  Position		  [380, 270, 400, 300]
	  Gain			  "-1"
	  Multiplication	  "Element-wise(K.*u)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>"
	  Position		  [325, 149, 415, 171]
	  GotoTag		  "gc_spd_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux2"
	  Ports			  [2, 1]
	  Position		  [450, 302, 470, 353]
	  ShowName		  off
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux3"
	  Ports			  [3, 1]
	  Position		  [500, 353, 505, 407]
	  ShowName		  off
	  Inputs		  "3"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "N-m drive torque\nper W input"
	  Ports			  [2, 1]
	  Position		  [615, 152, 645, 183]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "N-m drive torque\nper W input"
	    Location		    [183, 255, 652, 471]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "req'd input power\n(W)"
	      Position		      [55, 50, 75, 70]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd rotor drive torque\n(Nm)"
	      Position		      [55, 120, 75, 140]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [395, 160, 451, 200]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[101, 64, 548, 181]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [223, 58]
		  Text			  "This block determines the ratio of "
"req'd rotor torque to req'd electrical input power,\n which is proportional t"
"o efficiency if the motor is providing torque.  This ratio is used\nto comput"
"e actual rotor torque given some input power which may be different from\nthe"
" req'd value.\n\nIf the denominator, the req'd input power, is zero, this blo"
"ck outputs inf,\nwhich is a flag used by the block .../rotor drive torque ava"
"ilable (Nm)."
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [90, 15, 110, 35]
	      Value		      "eps"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      Position		      [205, 155, 225, 175]
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      Position		      [295, 155, 315, 175]
	      Value		      "inf"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [220, 47, 250, 78]
	      Inputs		      "/*"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      Position		      [260, 92, 290, 123]
	      Operator		      "~="
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [150, 37, 180, 68]
	      IconShape		      "rectangular"
	      Inputs		      "++"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [345, 60, 375, 90]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Nm per W"
	      Position		      [425, 65, 445, 85]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "req'd rotor drive torque\n(Nm)"
	      SrcPort		      1
	      Points		      [120, 0; 0, -60]
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [25, 0; 0, -35]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Nm per W"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "req'd input power\n(W)"
	      SrcPort		      1
	      Points		      [40, 0]
	      Branch {
		DstBlock		"Sum"
		DstPort			2
	      }
	      Branch {
		Points			[0, 40]
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [10, 0; 0, -50]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	  }
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator2"
	  Position		  [270, 142, 300, 173]
	  Operator		  "~="
	}
	Block {
	  BlockType		  Saturate
	  Name			  "Saturation"
	  Position		  [190, 90, 220, 120]
	  UpperLimit		  "max(gc_map_spd)*gc_spd_scale"
	  LowerLimit		  "-max(gc_map_spd)*gc_spd_scale"
	  LinearizeAsGain	  on
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  Ports			  [2, 1]
	  Position		  [335, 45, 355, 65]
	  IconShape		  "rectangular"
	  Inputs		  "++"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum1"
	  Ports			  [2, 1]
	  Position		  [335, 305, 355, 325]
	  IconShape		  "rectangular"
	  Inputs		  "-+"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To WS1"
	  Position		  [534, 345, 596, 360]
	  Orientation		  "up"
	  NamePlacement		  "alternate"
	  ShowName		  off
	  FontName		  "Arial"
	  VariableName		  "gc_pwr_loss"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "0"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To WS2"
	  Position		  [720, 378, 770, 392]
	  ShowName		  off
	  FontName		  "Arial"
	  VariableName		  "gc_tmp"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "0"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To WS4"
	  Position		  [715, 412, 790, 428]
	  ShowName		  off
	  FontName		  "Arial"
	  VariableName		  "gc_clt_th_pwr"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "0"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace10"
	  Position		  [142, 270, 238, 290]
	  Orientation		  "up"
	  NamePlacement		  "alternate"
	  ShowName		  off
	  VariableName		  "gc_ni_trq_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace4"
	  Position		  [50, 155, 130, 175]
	  Orientation		  "left"
	  VariableName		  "gc_trq_out_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace5"
	  Position		  [50, 195, 130, 215]
	  Orientation		  "left"
	  VariableName		  "gc_spd_out_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace8"
	  Position		  [175, 365, 255, 385]
	  ShowName		  off
	  VariableName		  "gc_pwr_in_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace9"
	  Position		  [695, 94, 765, 116]
	  VariableName		  "gc_pwr_in_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  Constant
	  Name			  "do ex calcs?"
	  Position		  [615, 335, 675, 350]
	  Orientation		  "down"
	  ShowName		  off
	  Value			  "gc_th_calc"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "effect of inertia\n(Nm)"
	  Ports			  [1, 1]
	  Position		  [270, 86, 300, 124]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "effect of inertia\n(Nm)"
	    Location		    [200, 196, 481, 321]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "in_1"
	      Position		      [20, 50, 40, 70]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      Position		      [125, 39, 205, 81]
	      Gain		      "gc_inertia"
	      Multiplication	      "Element-wise(K.*u)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To Workspace9"
	      Position		      [187, 15, 263, 35]
	      Orientation	      "up"
	      NamePlacement	      "alternate"
	      VariableName	      "gc_inertia_trq"
	      MaxDataPoints	      "inf"
	      Decimation	      "1"
	      SampleTime	      "-1"
	      SaveFormat	      "Array"
	    }
	    Block {
	      BlockType		      Derivative
	      Name		      "alpha"
	      Position		      [70, 50, 100, 70]
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "out_1"
	      Position		      [240, 50, 260, 70]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "in_1"
	      SrcPort		      1
	      DstBlock		      "alpha"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "alpha"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"out_1"
		DstPort			1
	      }
	      Branch {
		DstBlock		"To Workspace9"
		DstPort			1
	      }
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "enforce\ntorque\nlimit"
	  Ports			  [2, 1]
	  Position		  [385, 44, 420, 91]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "enforce\ntorque\nlimit"
	    Location		    [66, 403, 658, 602]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "req'd gen\ntorque (Nm)"
	      Position		      [45, 68, 75, 82]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "limited gen\nspeed (rad/s)"
	      Position		      [45, 148, 75, 162]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [520, 145, 576, 185]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[149, 106, 558, 202]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [207, 39]
		  Text			  "This block enforces the maximum tor"
"que production and absorption\ncapability limits of the generator.  It assume"
"s that exactly as much torque\ncan be absorbed as can be produced at a given "
"speed."
		}
	      }
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      Position		      [260, 140, 290, 170]
	      Gain		      "-1"
	      Multiplication	      "Element-wise(K.*u)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <sdo>"
	      Position		      [490, 19, 580, 41]
	      GotoTag		      "gc_trq_limited"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      Ports		      [2, 1]
	      Position		      [340, 67, 370, 98]
	      Function		      "min"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax1"
	      Ports		      [2, 1]
	      Position		      [340, 132, 370, 163]
	      Function		      "max"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      Position		      [440, 12, 470, 43]
	      Operator		      "~="
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [440, 80, 470, 110]
	      Threshold		      "0"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max torque"
	      Position		      [140, 145, 170, 165]
	      InputValues	      "gc_map_spd*gc_spd_scale"
	      OutputValues	      "gc_max_trq*gc_overtrq_factor*gc_trq_sca"
"le"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "limited generator\ntorque (Nm)"
	      Position		      [520, 88, 550, 102]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Goto <sdo>"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "max torque"
	      SrcPort		      1
	      Points		      [40, 0]
	      Branch {
		Points			[0, -65]
		DstBlock		"MinMax"
		DstPort			2
	      }
	      Branch {
		DstBlock		"Gain"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "MinMax1"
	      SrcPort		      1
	      Points		      [30, 0; 0, -45]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "MinMax1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "limited gen\nspeed (rad/s)"
	      SrcPort		      1
	      DstBlock		      "max torque"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"limited generator\ntorque (Nm)"
		DstPort			1
	      }
	      Branch {
		Points			[0, -25; -65, 0]
		DstBlock		"Relational\nOperator2"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "req'd gen\ntorque (Nm)"
	      SrcPort		      1
	      Points		      [225, 0]
	      Branch {
		Points			[10, 0]
		Branch {
		  DstBlock		  "MinMax"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 45]
		  Branch {
		    Points		    [0, 20]
		    DstBlock		    "MinMax1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [80, 0; 0, -25]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		}
	      }
	      Branch {
		Points			[0, -55]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "gc tmp"
	  Ports			  [3, 2, 1]
	  Position		  [595, 366, 695, 434]
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  on
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "gc tmp"
	    Location		    [11, 290, 752, 474]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Qgc_gen"
	      Position		      [35, 35, 55, 55]
	      NamePlacement	      "alternate"
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "veh spd"
	      Position		      [35, 65, 55, 85]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "key ON?"
	      Position		      [455, 35, 475, 55]
	      NamePlacement	      "alternate"
	      Port		      "3"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      EnablePort
	      Name		      "Enable"
	      Ports		      []
	      Position		      [30, 122, 60, 148]
	      StatesWhenEnabling      "reset"
	      ShowOutputPort	      off
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "1/mcp"
	      Position		      [590, 93, 615, 117]
	      Gain		      "1/(gc_mass*gc_cp)"
	      Multiplication	      "Element-wise(K.*u)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      ">=0"
	      Position		      [640, 35, 650, 55]
	      NamePlacement	      "alternate"
	      UpperLimit	      "Inf"
	      LowerLimit	      "0"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      ">=0 "
	      Position		      [170, 35, 180, 55]
	      NamePlacement	      "alternate"
	      UpperLimit	      "Inf"
	      LowerLimit	      "0"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [675, 135, 731, 175]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[505, 510, 848, 589]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [172, 38]
		  Text			  "This block models the thermal behav"
"ior of a motor/generator \nand controller  with active fluid cooling.\nThe mo"
"dule is modeled as a single lumped thermal mass.  \nThe fan is on whenever th"
"e battery temp is > the set temp."
		}
	      }
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux10"
	      Ports		      [2, 1]
	      Position		      [320, 74, 325, 121]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Inputs		      "2"
	      DisplayOption	      "none"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux9"
	      Ports		      [2, 1]
	      Position		      [240, 65, 245, 105]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Inputs		      "2"
	      DisplayOption	      "none"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Qa"
	      Position		      [350, 91, 390, 109]
	      NamePlacement	      "alternate"
	      FontName		      "Arial"
	      Expr		      "u(1)*(gc_sarea*gc_trq_scale*gc_spd_scal"
"e)*u(2)"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Qc1"
	      Ports		      [2, 1]
	      Position		      [560, 86, 570, 119]
	      ShowName		      off
	      IconShape		      "rectangular"
	      Inputs		      "-+"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Qnet"
	      Ports		      [3, 1]
	      Position		      [410, 54, 420, 146]
	      NamePlacement	      "alternate"
	      IconShape		      "rectangular"
	      Inputs		      "+++"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Qp2a,v7"
	      Position		      [145, 86, 220, 104]
	      ShowName		      off
	      FontName		      "Arial"
	      Expr		      "amb_tmp-u(1)"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Qr"
	      Position		      [350, 122, 390, 138]
	      FontName		      "Arial"
	      Expr		      "0.9*(5.67e-8)*(mc_sarea*mc_trq_scale*gc"
"_spd_scale)*((amb_tmp+273)^4 - (u(1)+273)^4)"
	    }
	    Block {
	      BlockType		      Integrator
	      Name		      "Tmc3"
	      Ports		      [1, 1]
	      Position		      [630, 95, 650, 115]
	      ShowName		      off
	      ExternalReset	      "none"
	      InitialConditionSource  "internal"
	      InitialCondition	      "mc_init_tmp"
	      LimitOutput	      off
	      UpperSaturationLimit    "inf"
	      LowerSaturationLimit    "-inf"
	      ShowSaturationPort      off
	      ShowStatePort	      off
	      AbsoluteTolerance	      "auto"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Va/Vv"
	      Position		      [90, 62, 120, 88]
	      Gain		      "0.5"
	      Multiplication	      "Element-wise(K.*u)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "gc coolant"
	      Ports		      [2, 1, 1]
	      Position		      [445, 77, 530, 108]
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      on
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"gc coolant"
		Location		[713, 350, 963, 465]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Tcl"
		  Position		  [15, 58, 45, 72]
		  NamePlacement		  "alternate"
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Inport
		  Name			  "Qgc "
		  Position		  [20, 78, 50, 92]
		  Port			  "2"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  EnablePort
		  Name			  "Enable"
		  Ports			  []
		  Position		  [186, 25, 223, 43]
		  NamePlacement		  "alternate"
		  StatesWhenEnabling	  "reset"
		  ShowOutputPort	  off
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  Position		  [50, 44, 95, 56]
		  ShowName		  off
		  Value			  "gc_tstat"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  Ports			  [2, 1]
		  Position		  [165, 62, 180, 93]
		  ShowName		  off
		  Inputs		  "2"
		  Multiplication	  "Element-wise(.*)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  Position		  [120, 44, 140, 71]
		  ShowName		  off
		  Operator		  "<="
		}
		Block {
		  BlockType		  Outport
		  Name			  "Qgc_clt"
		  Position		  [200, 73, 230, 87]
		  NamePlacement		  "alternate"
		  Port			  "1"
		  OutputWhenDisabled	  "reset"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Tcl"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Qgc "
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  DstBlock		  "Qgc_clt"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Product1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "ha"
	      Position		      [260, 76, 295, 94]
	      NamePlacement	      "alternate"
	      FontName		      "Arial"
	      Expr		      "6 + 6*((abs(u(2))/1000))^0.25 + 60*(abs"
"(u(1))/30)^0.63"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Tgc"
	      Position		      [695, 95, 715, 115]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Qgc_clt"
	      Position		      [695, 35, 715, 55]
	      Port		      "2"
	      OutputWhenDisabled      "reset"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Qnet"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		Points			[0, 25; 115, 0]
		DstBlock		"Qc1"
		DstPort			2
	      }
	      Branch {
		DstBlock		"gc coolant"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Qc1"
	      SrcPort		      1
	      DstBlock		      "1/mcp"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "1/mcp"
	      SrcPort		      1
	      DstBlock		      "Tmc3"
	      DstPort		      1
	    }
	    Line {
	      Labels		      [0, 0]
	      SrcBlock		      "Tmc3"
	      SrcPort		      1
	      Points		      [0, 0]
	      Branch {
		Points			[10, 0]
		Branch {
		  Points		  [0, 50; -330, 0]
		  Branch {
		    Points		    [-205, 0]
		    DstBlock		    "Qp2a,v7"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Qr"
		    DstPort		    1
		  }
		}
		Branch {
		  DstBlock		  "Tgc"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[0, -40; -225, 0]
		DstBlock		"gc coolant"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "gc coolant"
	      SrcPort		      1
	      Points		      [0, 0]
	      Branch {
		DstBlock		"Qc1"
		DstPort			1
	      }
	      Branch {
		Points			[0, -50]
		DstBlock		">=0"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      ">=0"
	      SrcPort		      1
	      DstBlock		      "Qgc_clt"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "key ON?"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "gc coolant"
	      DstPort		      enable
	    }
	    Line {
	      SrcBlock		      "veh spd"
	      SrcPort		      1
	      DstBlock		      "Va/Vv"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Qa"
	      SrcPort		      1
	      DstBlock		      "Qnet"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      ">=0 "
	      SrcPort		      1
	      Points		      [210, 0]
	      DstBlock		      "Qnet"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Qgc_gen"
	      SrcPort		      1
	      DstBlock		      ">=0 "
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Qr"
	      SrcPort		      1
	      DstBlock		      "Qnet"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Qp2a,v7"
	      SrcPort		      1
	      Points		      [0, 0]
	      Branch {
		Points			[0, 15]
		DstBlock		"Mux10"
		DstPort			2
	      }
	      Branch {
		DstBlock		"Mux9"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "ha"
	      SrcPort		      1
	      DstBlock		      "Mux10"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Va/Vv"
	      SrcPort		      1
	      DstBlock		      "Mux9"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mux9"
	      SrcPort		      1
	      DstBlock		      "ha"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mux10"
	      SrcPort		      1
	      DstBlock		      "Qa"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "gen controller\nlogic interface"
	  Ports			  [2, 1]
	  Position		  [570, 14, 645, 76]
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "gen controller\nlogic interface"
	    Location		    [0, 42, 804, 608]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "w_gc_out_r"
	      Position		      [40, 45, 60, 65]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "P_gc_in_1lim"
	      Position		      [40, 105, 60, 125]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>"
	      Position		      [225, 64, 330, 96]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "P_gc_in_r"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <vc>"
	      Position		      [95, 37, 185, 73]
	      GotoTag		      "w_gc_out_r"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <vc>1"
	      Position		      [95, 98, 185, 132]
	      GotoTag		      "P_gc_in_1lim"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "P_gc_in_r"
	      Position		      [365, 70, 385, 90]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "P_gc_in_1lim"
	      SrcPort		      1
	      DstBlock		      "Goto <vc>1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "w_gc_out_r"
	      SrcPort		      1
	      DstBlock		      "Goto <vc>"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <vc>"
	      SrcPort		      1
	      DstBlock		      "P_gc_in_r"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  Lookup2D
	  Name			  "generator/controller\ninput power\nmap (W)"
	  Position		  [480, 40, 540, 80]
	  RowIndex		  "gc_map_spd*gc_spd_scale"
	  ColumnIndex		  "gc_map_trq*gc_trq_scale"
	  OutputValues		  "gc_inpwr_map*gc_spd_scale*gc_trq_scale"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "rotor drive torque\navailable (Nm)"
	  Ports			  [2, 1]
	  Position		  [115, 300, 145, 335]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "rotor drive torque\navailable (Nm)"
	    Location		    [186, 268, 657, 481]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "torque per unit\ninput power (N-m/W)"
	      Position		      [55, 15, 75, 35]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "available input power\n(W)"
	      Position		      [55, 90, 75, 110]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [395, 155, 451, 195]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[150, 96, 641, 258]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [243, 78]
		  Text			  "This block computes the actual roto"
"r torque given the actual motor input power and\nthe ratio (req'd rotor torqu"
"e)/(req'd input power).\n\nIf the above ratio has the value inf, which implie"
"s that the req'd input power is zero,\nthen the actual rotor torque is assume"
"d to be zero.  This is not reflective of reality, of course:\nwith zero input"
" power, the rotor torque would be the motor spin-loss torque at the given spe"
"ed.\nBecause this simplification occurs only when req'd input power is zero, "
"it does not.\naffect fuel economy or max effort acceleration calculations."
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      Position		      [205, 110, 225, 130]
	      Value		      "inf"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      Position		      [155, 140, 175, 160]
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [220, 17, 250, 48]
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      Position		      [260, 62, 290, 93]
	      Operator		      "~="
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [345, 30, 375, 60]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "rotor drive\ntorque\navailable"
	      Position		      [425, 35, 445, 55]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "torque per unit\ninput power (N-m/W)"
	      SrcPort		      1
	      Points		      [40, 0]
	      Branch {
		Points			[0, 45]
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Product"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "rotor drive\ntorque\navailable"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [25, 0; 0, -35]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "available input power\n(W)"
	      SrcPort		      1
	      Points		      [120, 0; 0, -60]
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      Points		      [150, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "req'd gen\ninput power (W)"
	  Position		  [750, 35, 770, 55]
	  FontName		  "Arial"
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Block {
	  BlockType		  Outport
	  Name			  "drive torque and\nspeed avail. at rotor\n(N"
"m), (rad/s)"
	  Position		  [715, 290, 735, 310]
	  NamePlacement		  "alternate"
	  FontName		  "Arial"
	  Port			  "2"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Line {
	  SrcBlock		  "From <vc>"
	  SrcPort		  1
	  DstBlock		  "gc tmp"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "<vc>"
	  SrcPort		  1
	  DstBlock		  "gc tmp"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "gc tmp"
	  SrcPort		  2
	  DstBlock		  "To WS4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gc tmp"
	  SrcPort		  1
	  DstBlock		  "To WS2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "do ex calcs?"
	  SrcPort		  1
	  DstBlock		  "gc tmp"
	  DstPort		  enable
	}
	Line {
	  SrcBlock		  "Fcn"
	  SrcPort		  1
	  Points		  [10, 0; 0, 0]
	  Branch {
	    Points		    [0, 0]
	    DstBlock		    "gc tmp"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "To WS1"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Mux3"
	  SrcPort		  1
	  DstBlock		  "Fcn"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux2"
	  SrcPort		  1
	  Points		  [5, 0; 0, -30]
	  DstBlock		  "drive torque and\nspeed avail. at rotor\n(N"
"m), (rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "generator/controller\ninput power\nmap (W)"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    Points		    [0, 100]
	    DstBlock		    "N-m drive torque\nper W input"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "gen controller\nlogic interface"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "rotor drive torque\navailable (Nm)"
	  SrcPort		  1
	  Points		  [40, 0]
	  Branch {
	    DstBlock		    "To Workspace10"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Sum1"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "torque and speed\n req'd at rotor\n(Nm), (r"
"ad/s)"
	  SrcPort		  1
	  DstBlock		  "Demux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "enforce\ntorque\nlimit"
	  SrcPort		  1
	  Points		  [0, -5; 30, 0]
	  Branch {
	    Points		    [0, 110]
	    DstBlock		    "N-m drive torque\nper W input"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [10, 0]
	    DstBlock		    "generator/controller\ninput power\nmap (W"
")"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "effect of inertia\n(Nm)"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    Points		    [0, 205]
	    DstBlock		    "Sum1"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -45]
	    DstBlock		    "Sum"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "enforce\ntorque\nlimit"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Saturation"
	  SrcPort		  1
	  Points		  [20, 0]
	  Branch {
	    Points		    [5, 0]
	    Branch {
	      DstBlock		      "effect of inertia\n(Nm)"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [0, -25]
	      Branch {
		Points			[0, -45; 205, 0]
		Branch {
		  Points		  [0, -5]
		  DstBlock		  "gen controller\nlogic interface"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 15]
		  DstBlock		  "generator/controller\ninput power\n"
"map (W)"
		  DstPort		  1
		}
	      }
	      Branch {
		DstBlock		"enforce\ntorque\nlimit"
		DstPort			2
	      }
	    }
	  }
	  Branch {
	    Points		    [0, 45]
	    Branch {
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [0, 190; 20, 0]
	      Branch {
		DstBlock		"<sdo>1"
		DstPort			1
	      }
	      Branch {
		Points			[125, 0]
		Branch {
		  DstBlock		  "Mux2"
		  DstPort		  2
		}
		Branch {
		  Points		  [0, 40]
		  DstBlock		  "Mux3"
		  DstPort		  2
		}
	      }
	    }
	  }
	}
	Line {
	  SrcBlock		  "Relational\nOperator2"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  2
	  Points		  [30, 0]
	  Branch {
	    DstBlock		    "Saturation"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 60]
	    Branch {
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Branch {
	      Points		      [0, 40]
	      DstBlock		      "To Workspace5"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "N-m drive torque\nper W input"
	  SrcPort		  1
	  Points		  [25, 0; 0, 85; -575, 0]
	  DstBlock		  "rotor drive torque\navailable (Nm)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    DstBlock		    "Sum"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "To Workspace4"
	    DstPort		    1
	  }
	}
	Line {
	  Labels		  [1, 0]
	  SrcBlock		  "Sum1"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    DstBlock		    "Gain"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [55, 0]
	    Branch {
	      DstBlock		      "Mux2"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [0, 50]
	      DstBlock		      "Mux3"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "available gen\ninput power (W)"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    DstBlock		    "rotor drive torque\navailable (Nm)"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [0, 70; 70, 0]
	    Branch {
	      Points		      [0, -20]
	      DstBlock		      "To Workspace8"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [0, 0]
	      DstBlock		      "Mux3"
	      DstPort		      3
	    }
	  }
	}
	Line {
	  SrcBlock		  "gen controller\nlogic interface"
	  SrcPort		  1
	  Points		  [30, 0]
	  Branch {
	    DstBlock		    "To Workspace9"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "req'd gen\ninput power (W)"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Gain"
	  SrcPort		  1
	  DstBlock		  "<sdo>"
	  DstPort		  1
	}
      }
    }
    Annotation {
      Position		      [91, 16]
      ForegroundColor	      "blue"
      BackgroundColor	      "yellow"
      Text		      "Generator/Controller:"
      DropShadow	      on
      FontName		      "Arial"
      FontSize		      14
    }
    Annotation {
      Position		      [81, 136]
      ForegroundColor	      "blue"
      BackgroundColor	      "yellow"
      Text		      "Motor/Controller:"
      DropShadow	      on
      FontName		      "Arial"
      FontSize		      14
    }
    Annotation {
      Position		      [188, 249]
      Text		      "-----------------------------------------------"
"-----------------------------------------------------------------"
    }
    Annotation {
      Position		      [40, 270]
      Text		      "sub-models"
    }
  }
}
