Library {
  Name			  "lib_controls"
  Version		  7.9
  MdlSubVersion		  0
  SavedCharacterEncoding  "windows-1252"
  LibraryType		  "BlockLibrary"
  SaveDefaultBlockParams  on
  ScopeRefreshTime	  0.035000
  OverrideScopeRefreshTime on
  DisableAllScopes	  off
  FPTRunName		  "Run 1"
  MaxMDLFileLineLength	  120
  Created		  "Tue May 30 16:47:17 2000"
  Creator		  "mokeefe"
  UpdateHistory		  "UpdateHistoryWhenSave"
  ModifiedByFormat	  "%<Auto>"
  LastModifiedBy	  "mokeefe"
  ModifiedDateFormat	  "%<Auto>"
  LastModifiedDate	  "Fri Mar 23 16:02:54 2012"
  RTWModifiedTimeStamp	  254418959
  ModifiedComment	  "mokeefe -- Fri Mar 23 16:02:54 2012 -- Version 1.480\nUpdated all instances of @1 variables in ke"
  "y-on block masks to use the variable name (\"t\" in all cases)."
  ModifiedHistory	  "mokeefe -- Fri Mar 23 16:02:54 2012 -- Version 1.480\nUpdated all instances of @1 variables in ke"
  "y-on block masks to use the variable name (\"t\" in all cases).\n\nmokeefe -- Fri Mar 23 15:55:42 2012 -- Version 1."
  "479\nFixed mask issues -- key_on @1 to \"t\"\n\nmokeefe -- Fri Mar 23 15:20:48 2012 -- Version 1.478\nupdated maks v"
  "ariable from @1 to variable name.\n\nmokeefe -- Fri Mar 23 14:57:12 2012 -- Version 1.477\n\n\nmokeefe -- Fri Mar 23"
  " 14:56:40 2012 -- Version 1.476\nUpdated <vc> conv cvt/engine control/key_on mask initialization from @1 to variable"
  " name.\n\nmokeefe -- Fri Mar 23 14:35:59 2012 -- Version 1.475\nUpdated mask variable from @1 to variable name.\n\nm"
  "okeefe -- Fri Mar 23 09:48:31 2012 -- Version 1.474\nFixed MaskInitiation string of block 'engine control/key_on' wh"
  "ich used mask variables by reference (@1) vs by variable name.\n\nssprik -- Fri Oct 10 08:40:34 2003 -- Version 1.47"
  "3\nadded goto tag for F_rear_brake_req\n\nssprik -- Thu Oct 09 15:11:40 2003 -- Version 1.472\nadded F_rear_brake_re"
  "q   goto \n\ntmarkel -- Fri Mar 07 09:53:07 2003 -- Version 1.471\n\nadded logic to allow user to keep the engine on"
  " during a drive cycle unless the key if off or the engine has been manually disabled\n\ntmarkel -- Fri Mar 07 09:43:"
  "58 2003 -- Version 1.470\n\nadded an override bool to keep engine on at all times\n\n\ntmarkel -- Mon Mar 03 14:14:4"
  "3 2003 -- Version 1.469\n\nupdated traction control block in all vehicle control blocks to 2 axle version\n\ntmarkel"
  " -- Mon Mar 03 14:07:59 2003 -- Version 1.468\n\nadded output from blocks for rear params from traction blocks in al"
  "l vehicle control blocks\n\ntemp solution - added grounds as inputs to the brake controller for rear drivetrain outp"
  "ut to eliminate warnings\n\n\n\n\ntmarkel -- Mon Mar 03 12:40:46 2003 -- Version 1.467\n\n\ntmarkel -- Mon Mar 03 12"
  ":37:51 2003 -- Version 1.466\nremoved extra traction control model from conv.\n\ntmarkel -- Mon Mar 03 12:29:10 2003"
  " -- Version 1.465\n\nupdated traction control config subsystem to be two axle model\n\ntmarkel -- Mon Feb 24 16:12:3"
  "7 2003 -- Version 1.464\nupdated j2452 model for 2 axles\n\nabrooker -- Thu Feb 20 14:21:28 2003 -- Version 1.463\n\n"
  "\nmokeefe -- Wed Feb 19 08:45:17 2003 -- Version 1.462\n\n\nmokeefe -- Wed Feb 19 08:43:58 2003 -- Version 1.461\n\n"
  "\ntmarkel -- Fri Feb 14 10:10:01 2003 -- Version 1.460\n\n\ntmarkel -- Fri Feb 14 10:08:23 2003 -- Version 1.459\n\n"
  "\ntmarkel -- Thu Feb 13 12:55:41 2003 -- Version 1.458\n\n\ntmarkel -- Thu Feb 13 12:32:44 2003 -- Version 1.457\n\n"
  "\ntmarkel -- Wed Feb 12 15:47:27 2003 -- Version 1.456\nfixed one more broken link\n\ntmarkel -- Wed Feb 12 15:29:50"
  " 2003 -- Version 1.455\nupdated conv controller to include front/rear traction model\n\n\ntmarkel -- Wed Feb 12 15:0"
  "7:56 2003 -- Version 1.454\nfixed broken link to lib_controls_2axle\n\ntmarkel -- Wed Feb 12 14:32:44 2003 -- Versio"
  "n 1.453\nfixed bad link errors\n\ntmarkel -- Wed Feb 12 09:39:27 2003 -- Version 1.452\n\nAdded the traction control"
  " blocks for a front/rear traction system to the subsystem box\n\n\nbjeanner -- Thu Dec 26 09:42:29 2002 -- Version 1"
  ".451\nadd three new parameters: allowing calcultion of equivallent ESS function with mean efficiency; plus plotting "
  "results parameter\n\n\nbjeanner -- Thu Dec 12 14:52:52 2002 -- Version 1.450\n\n\nbjeanner -- Tue Dec 10 14:49:05 20"
  "02 -- Version 1.449\n\n\nbjeanner -- Tue Dec 10 13:14:31 2002 -- Version 1.448\n\n\nbjeanner -- Tue Dec 10 11:50:56 "
  "2002 -- Version 1.447\n\n\nbjeanner -- Tue Dec 10 11:41:01 2002 -- Version 1.446\n\n\nbjeanner -- Tue Dec 10 11:30:4"
  "0 2002 -- Version 1.445\n\n\nbjeanner -- Tue Dec 10 11:29:40 2002 -- Version 1.444\n\n\nbjeanner -- Tue Dec 10 11:10"
  ":40 2002 -- Version 1.443\n\n\nbjeanner -- Tue Dec 10 10:31:25 2002 -- Version 1.442\n\n\nbjeanner -- Tue Dec 10 10:"
  "30:04 2002 -- Version 1.441\n\n\nbjeanner -- Tue Dec 10 10:29:36 2002 -- Version 1.440\n\n\nbjeanner -- Tue Dec 10 1"
  "0:23:30 2002 -- Version 1.439\n\n\nbjeanner -- Tue Dec 10 09:20:40 2002 -- Version 1.438\n\n\nbjeanner -- Tue Dec 10"
  " 09:16:26 2002 -- Version 1.437\nAdd the template for the configurable subsystem for the BD_FUELCELL control strateg"
  "y.\nAdd the fuel cell adaptive control strategy\n\n\nmokeefe -- Tue Aug 13 07:36:17 2002 -- Version 1.436\nMaking th"
  "e model look \"pretty\"\n\nmokeefe -- Tue Aug 13 07:35:11 2002 -- Version 1.435\nchanged <vc> conv cvt/cvt control t"
  "o use \"acc_mech_pwr_est\" instead of \"acc_mech_trq_est\" as had been used previously (the required datum is the po"
  "wer and not the torque!)\n\nssprik -- Tue Apr 30 11:21:35 2002 -- Version 1.434\nadded user contributed par bal engi"
  "ne on  block\n\nmokeefe -- Tue Apr 23 09:06:10 2002 -- Version 1.433\nchanged Insight electric assist control strate"
  "gy <cs> DIRECT SPLIT/Hard Acceleration to prevent a divide by zero warning. Also added logic to prevent a torque req"
  "uest above the maximum achievable motor torque.\n\nmokeefe -- Tue Apr 23 09:03:51 2002 -- Version 1.432\nchanged Ins"
  "ight electric assist control strategy <cs> DIRECT SPLIT/Hard Acceleration to prevent a divide by zero warning. Also "
  "added logic to prevent a torque request above the maximum achievable motor torque.\n\nmokeefe -- Tue Apr 23 08:50:58"
  " 2002 -- Version 1.431\n\n\nssprik -- Thu Apr 18 14:34:50 2002 -- Version 1.430\n\n\nssprik -- Thu Apr 18 14:32:52 2"
  "002 -- Version 1.429\n\n\nssprik -- Thu Apr 18 14:06:57 2002 -- Version 1.428\n\n\nssprik -- Thu Apr 18 13:56:10 200"
  "2 -- Version 1.427\n\n\nssprik -- Thu Apr 18 13:46:32 2002 -- Version 1.426\n\n\nkkelly -- Thu Apr 18 10:17:40 2002 "
  "-- Version 1.425\n\n\nmokeefe -- Thu Apr 18 08:23:32 2002 -- Version 1.424\nsaving the model:\no \"without the model"
  " browser open\"\no with only top-level screen visible \no with \"fit to view\" enabled\no with \"status bar\" off an"
  "d \"toolbar\" off\no with \"prompt to update model history with each save\" on\n\nkkelly -- Wed Mar 27 14:57:12 2002"
  " -- Version 1.423\n\n\nkkelly -- Wed Mar 27 14:57:12 2002 -- Version 1.423\n\n\nkkelly -- Wed Mar 27 14:50:41 2002 -"
  "- Version 1.422\n\n\nkkelly -- Wed Mar 27 14:50:24 2002 -- Version 1.421\n\n\nkkelly -- Wed Mar 27 14:26:31 2002 -- "
  "Version 1.420\n\n\nkkelly -- Wed Mar 27 14:26:16 2002 -- Version 1.419\n\n\nkkelly -- Wed Mar 27 14:25:54 2002 -- Ve"
  "rsion 1.418\n\n\nkkelly -- Wed Mar 27 14:20:49 2002 -- Version 1.417\n\n\nkkelly -- Wed Mar 27 14:18:25 2002 -- Vers"
  "ion 1.416\n\n\nkkelly -- Wed Mar 27 14:17:14 2002 -- Version 1.415\n\n\nkkelly -- Wed Mar 27 14:09:18 2002 -- Versio"
  "n 1.414\n\n\nkkelly -- Wed Mar 27 14:07:10 2002 -- Version 1.413\n\n\nkkelly -- Wed Mar 27 14:04:42 2002 -- Version "
  "1.412\n\n\nkkelly -- Wed Mar 27 12:39:55 2002 -- Version 1.411\n\n\nkkelly -- Wed Mar 27 12:39:35 2002 -- Version 1."
  "410\n\n\nkkelly -- Wed Mar 27 12:31:18 2002 -- Version 1.409\n\n\nkkelly -- Wed Mar 27 12:12:25 2002 -- Version 1.40"
  "8\n\n\nkkelly -- Wed Mar 27 12:03:57 2002 -- Version 1.407\n\n\nkkelly -- Wed Mar 27 12:03:11 2002 -- Version 1.406\n"
  "Added logic to increase torque request for very hard acceleration\n\nkkelly -- Wed Mar 27 11:51:32 2002 -- Version 1"
  ".405\nAdded logic to allow EM in 1st gear when torque request is high\n\nkkelly -- Wed Mar 27 11:48:18 2002 -- Versi"
  "on 1.404\nAdded logic to allow EM at low speed with high torque request \n\nkkelly -- Wed Mar 27 11:36:20 2002 -- Ve"
  "rsion 1.403\nAdded zero-torque request logic\n\nkkelly -- Wed Mar 27 11:09:35 2002 -- Version 1.402\n\n\nkkelly -- W"
  "ed Mar 27 11:07:39 2002 -- Version 1.401\n\n\nkkelly -- Wed Mar 27 10:43:33 2002 -- Version 1.400\n\n\nmokeefe -- Fr"
  "i Mar 08 08:11:28 2002 -- Version 1.399\ntook all separate auxiliary load calculations out of the <vc> libraries. Th"
  "ese will now use the lib_accessory goto tags (acc_mech_trq_est, acc_mech_pwr_est, acc_elec_pwr_est)\n\nmokeefe -- Mo"
  "n Jul 02 10:08:55 2001 -- Version 1.184\n\n\nmokeefe -- Mon Jul 02 10:08:07 2001 -- Version 1.183\n\n\nmokeefe -- Mo"
  "n Jul 02 10:06:51 2001 -- Version 1.182\n\n\nmokeefe -- Mon Jul 02 10:05:17 2001 -- Version 1.181\n\n\nmokeefe -- Mo"
  "n Jul 02 10:04:17 2001 -- Version 1.180\n\n\nmokeefe -- Fri Jun 29 13:59:18 2001 -- Version 1.179\n\nall <vc> blocks"
  " updated for use with variable cargo mass functionality (cargo mass by distance)--also, all <vc> top-level blocks ha"
  "ve been \"cleaned up\" to look neat and organized. A sub-model library has been made and is the preferred way to do "
  "future development.\n\nmokeefe -- Fri Jun 29 13:56:37 2001 -- Version 1.178\n\n<vc> prius\n\nmokeefe -- Fri Jun 29 1"
  "3:46:29 2001 -- Version 1.177\n\n\nmokeefe -- Fri Jun 29 13:40:43 2001 -- Version 1.176\n\n\nmokeefe -- Fri Jun 29 1"
  "3:39:38 2001 -- Version 1.175\n\n<vc> series (\"\" \"\")\n\n\nmokeefe -- Fri Jun 29 13:34:00 2001 -- Version 1.174\n"
  "\n<vc> par Adaptive (\"\" \"\")\n\nmokeefe -- Fri Jun 29 13:23:41 2001 -- Version 1.173\n\ninsight (ibid.)\n\n\nmoke"
  "efe -- Fri Jun 29 13:15:22 2001 -- Version 1.172\n\n<vc> par balanced--> veh_mass to veh_mass+veh_cargo_mass\n\n\nmo"
  "keefe -- Fri Jun 29 13:05:39 2001 -- Version 1.171\n\n\nmokeefe -- Fri Jun 29 12:10:12 2001 -- Version 1.170\n\nfini"
  "shed veh_mass mods for the <vc> par cvt...\n\n\nmokeefe -- Fri Jun 29 12:09:18 2001 -- Version 1.169\n\n\nmokeefe --"
  " Fri Jun 29 11:56:20 2001 -- Version 1.168\n\n\nmokeefe -- Fri Jun 29 11:44:30 2001 -- Version 1.167\n\n\nmokeefe --"
  " Fri Jun 29 11:33:07 2001 -- Version 1.166\n\n\nmokeefe -- Fri Jun 29 11:21:54 2001 -- Version 1.165\n\n\nmokeefe --"
  " Fri Jun 29 11:15:04 2001 -- Version 1.164\n\n\nmokeefe -- Fri Jun 29 11:13:02 2001 -- Version 1.163\n\n\nmokeefe --"
  " Fri Jun 29 11:06:47 2001 -- Version 1.162\n\n\nmokeefe -- Fri Jun 29 11:04:27 2001 -- Version 1.161\n\n\nmokeefe --"
  " Fri Jun 29 10:40:33 2001 -- Version 1.160\n\n\nmokeefe -- Fri Jun 29 10:35:18 2001 -- Version 1.159\n\n\nmokeefe --"
  " Fri Jun 29 10:29:06 2001 -- Version 1.158\n\n\nmokeefe -- Fri Jun 29 10:26:50 2001 -- Version 1.157\n\n\nmokeefe --"
  " Fri Jun 29 10:18:10 2001 -- Version 1.156\n\nmade traction control, front and rear brake controller, and braking st"
  "rategy into \"sub-libraries\" for vehicle control\n\nmokeefe -- Fri Jun 29 10:17:11 2001 -- Version 1.155\n\n\nmokee"
  "fe -- Fri Jun 29 10:15:46 2001 -- Version 1.154\n\n\nmokeefe -- Fri Jun 29 10:09:48 2001 -- Version 1.153\n\n\nmokee"
  "fe -- Fri Jun 29 09:58:42 2001 -- Version 1.152\n\n\nmokeefe -- Fri Jun 29 09:57:37 2001 -- Version 1.151\n\ncreatin"
  "g sub-components for vehicle control model (traction control)\n\nmokeefe -- Fri Jun 29 09:21:23 2001 -- Version 1.15"
  "0\n\n\nmokeefe -- Fri Jun 29 09:19:46 2001 -- Version 1.149\n\n\nmokeefe -- Fri Jun 29 09:09:49 2001 -- Version 1.14"
  "8\n\n\nmokeefe -- Fri Jun 29 08:32:46 2001 -- Version 1.147\n\n\nmokeefe -- Fri Jun 29 08:29:03 2001 -- Version 1.14"
  "6\n\nreplacing veh_mass with veh_mass plus veh_cargo_mass in <vc> conv auto Saber Custom\n\n\nmokeefe -- Thu Jun 28 "
  "17:08:40 2001 -- Version 1.145\n\n\nmokeefe -- Thu Jun 28 17:07:02 2001 -- Version 1.144\n\n\nmokeefe -- Thu Jun 28 "
  "17:06:28 2001 -- Version 1.143\n\nchanges to the CVT controls to subsitute veh_mass + veh_cargo_mass for veh_mass\n\n"
  "\nmokeefe -- Thu Jun 28 16:55:42 2001 -- Version 1.142\n\n\nmokeefe -- Thu Jun 28 16:32:01 2001 -- Version 1.141\n\n"
  "changing veh_mass to veh_mass plus veh_cargo_mass\n\n\nmokeefe -- Thu Jun 28 16:21:30 2001 -- Version 1.140\n\nrepla"
  "cing veh_mass with veh_mass + (cargo mass vs time)\n\nmokeefe -- Thu Jun 28 14:12:51 2001 -- Version 1.139\n\nreplac"
  "ed all 'veh_mass' references with a veh_mass plus a FROM block (originating from drive cycle) that gives variable ca"
  "rgo mass by time\n\n"
  ModelVersionFormat	  "1.%<AutoIncrement:480>"
  ConfigurationManager	  "none"
  SampleTimeColors	  off
  SampleTimeAnnotations	  off
  LibraryLinkDisplay	  "all"
  WideLines		  off
  ShowLineDimensions	  off
  ShowPortDataTypes	  off
  ShowDesignRanges	  off
  ShowLoopsOnError	  on
  IgnoreBidirectionalLines off
  ShowStorageClass	  off
  ShowTestPointIcons	  on
  ShowSignalResolutionIcons on
  ShowViewerIcons	  on
  SortedOrder		  off
  ExecutionContextIcon	  off
  ShowLinearizationAnnotations on
  BlockNameDataTip	  off
  BlockParametersDataTip  off
  BlockDescriptionStringDataTip	off
  ToolBar		  on
  StatusBar		  off
  BrowserShowLibraryLinks on
  BrowserLookUnderMasks	  off
  SimulationMode	  "normal"
  LinearizationMsg	  "none"
  Profile		  off
  ParamWorkspaceSource	  "MATLABWorkspace"
  RecordCoverage	  off
  CovSaveName		  "covdata"
  CovMetricSettings	  "dw"
  CovNameIncrementing	  off
  CovHtmlReporting	  on
  CovForceBlockReductionOff on
  covSaveCumulativeToWorkspaceVar on
  CovSaveSingleToWorkspaceVar on
  CovCumulativeReport	  off
  CovReportOnPause	  on
  CovModelRefEnable	  "Off"
  CovExternalEMLEnable	  off
  ExtModeBatchMode	  off
  ExtModeEnableFloating	  on
  ExtModeTrigType	  "manual"
  ExtModeTrigMode	  "normal"
  ExtModeTrigPort	  "1"
  ExtModeTrigElement	  "any"
  ExtModeTrigDuration	  1000
  ExtModeTrigDurationFloating "auto"
  ExtModeTrigHoldOff	  0
  ExtModeTrigDelay	  0
  ExtModeTrigDirection	  "rising"
  ExtModeTrigLevel	  0
  ExtModeArchiveMode	  "off"
  ExtModeAutoIncOneShot	  off
  ExtModeIncDirWhenArm	  off
  ExtModeAddSuffixToVar	  off
  ExtModeWriteAllDataToWs off
  ExtModeArmWhenConnect	  on
  ExtModeSkipDownloadWhenConnect off
  ExtModeLogAll		  on
  ExtModeAutoUpdateStatusClock on
  ShowModelReferenceBlockVersion off
  ShowModelReferenceBlockIO off
  Array {
    Type		    "Handle"
    Dimension		    1
    Simulink.ConfigSet {
      $ObjectID		      1
      Version		      "1.12.0"
      Array {
	Type			"Handle"
	Dimension		8
	Simulink.SolverCC {
	  $ObjectID		  2
	  Version		  "1.12.0"
	  StartTime		  "0.0"
	  StopTime		  "10.0"
	  AbsTol		  "auto"
	  FixedStep		  "auto"
	  InitialStep		  "auto"
	  MaxNumMinSteps	  "-1"
	  MaxOrder		  5
	  ZcThreshold		  "auto"
	  ConsecutiveZCsStepRelTol "10*128*eps"
	  MaxConsecutiveZCs	  "1000"
	  ExtrapolationOrder	  4
	  NumberNewtonIterations  1
	  MaxStep		  "auto"
	  MinStep		  "auto"
	  MaxConsecutiveMinStep	  "1"
	  RelTol		  "1e-3"
	  SolverMode		  "SingleTasking"
	  EnableConcurrentExecution off
	  ConcurrentTasks	  off
	  Solver		  "ode45"
	  SolverName		  "ode45"
	  SolverJacobianMethodControl "auto"
	  ShapePreserveControl	  "DisableAll"
	  ZeroCrossControl	  "UseLocalSettings"
	  ZeroCrossAlgorithm	  "Nonadaptive"
	  AlgebraicLoopSolver	  "TrustRegion"
	  SolverResetMethod	  "Fast"
	  PositivePriorityOrder	  off
	  AutoInsertRateTranBlk	  off
	  SampleTimeConstraint	  "Unconstrained"
	  InsertRTBMode		  "Whenever possible"
	}
	Simulink.DataIOCC {
	  $ObjectID		  3
	  Version		  "1.12.0"
	  Decimation		  "1"
	  ExternalInput		  "[t, u]"
	  FinalStateName	  "xFinal"
	  InitialState		  "xInitial"
	  LimitDataPoints	  on
	  MaxDataPoints		  "1000"
	  LoadExternalInput	  off
	  LoadInitialState	  off
	  SaveFinalState	  off
	  SaveCompleteFinalSimState off
	  SaveFormat		  "Array"
	  SignalLoggingSaveFormat "ModelDataLogs"
	  SaveOutput		  on
	  SaveState		  off
	  SignalLogging		  on
	  DSMLogging		  on
	  InspectSignalLogs	  off
	  SaveTime		  on
	  ReturnWorkspaceOutputs  off
	  StateSaveName		  "xout"
	  TimeSaveName		  "tout"
	  OutputSaveName	  "yout"
	  SignalLoggingName	  "logsout"
	  DSMLoggingName	  "dsmout"
	  OutputOption		  "RefineOutputTimes"
	  OutputTimes		  "[]"
	  ReturnWorkspaceOutputsName "out"
	  Refine		  "1"
	}
	Simulink.OptimizationCC {
	  $ObjectID		  4
	  Version		  "1.12.0"
	  Array {
	    Type		    "Cell"
	    Dimension		    8
	    Cell		    "BooleansAsBitfields"
	    Cell		    "PassReuseOutputArgsAs"
	    Cell		    "PassReuseOutputArgsThreshold"
	    Cell		    "ZeroExternalMemoryAtStartup"
	    Cell		    "ZeroInternalMemoryAtStartup"
	    Cell		    "OptimizeModelRefInitCode"
	    Cell		    "NoFixptDivByZeroProtection"
	    Cell		    "UseSpecifiedMinMax"
	    PropName		    "DisabledProps"
	  }
	  BlockReduction	  off
	  BooleanDataType	  off
	  ConditionallyExecuteInputs on
	  InlineParams		  off
	  UseIntDivNetSlope	  off
	  UseFloatMulNetSlope	  off
	  UseSpecifiedMinMax	  off
	  InlineInvariantSignals  off
	  OptimizeBlockIOStorage  on
	  BufferReuse		  on
	  EnhancedBackFolding	  off
	  StrengthReduction	  off
	  ExpressionFolding	  on
	  BooleansAsBitfields	  off
	  BitfieldContainerType	  "uint_T"
	  EnableMemcpy		  on
	  MemcpyThreshold	  64
	  PassReuseOutputArgsAs	  "Structure reference"
	  ExpressionDepthLimit	  2147483647
	  FoldNonRolledExpr	  on
	  LocalBlockOutputs	  on
	  RollThreshold		  5
	  SystemCodeInlineAuto	  off
	  StateBitsets		  off
	  DataBitsets		  off
	  UseTempVars		  off
	  ZeroExternalMemoryAtStartup on
	  ZeroInternalMemoryAtStartup on
	  InitFltsAndDblsToZero	  off
	  NoFixptDivByZeroProtection off
	  EfficientFloat2IntCast  off
	  EfficientMapNaN2IntZero on
	  OptimizeModelRefInitCode off
	  LifeSpan		  "inf"
	  MaxStackSize		  "Inherit from target"
	  BufferReusableBoundary  on
	  SimCompilerOptimization "Off"
	  AccelVerboseBuild	  off
	  ParallelExecutionInRapidAccelerator on
	}
	Simulink.DebuggingCC {
	  $ObjectID		  5
	  Version		  "1.12.0"
	  RTPrefix		  "error"
	  ConsistencyChecking	  "none"
	  ArrayBoundsChecking	  "none"
	  SignalInfNanChecking	  "none"
	  SignalRangeChecking	  "none"
	  ReadBeforeWriteMsg	  "UseLocalSettings"
	  WriteAfterWriteMsg	  "UseLocalSettings"
	  WriteAfterReadMsg	  "UseLocalSettings"
	  AlgebraicLoopMsg	  "warning"
	  ArtificialAlgebraicLoopMsg "warning"
	  SaveWithDisabledLinksMsg "warning"
	  SaveWithParameterizedLinksMsg	"none"
	  CheckSSInitialOutputMsg on
	  UnderspecifiedInitializationDetection	"Classic"
	  MergeDetectMultiDrivingBlocksExec "none"
	  CheckExecutionContextPreStartOutputMsg off
	  CheckExecutionContextRuntimeOutputMsg	off
	  SignalResolutionControl "TryResolveAllWithWarning"
	  BlockPriorityViolationMsg "warning"
	  MinStepSizeMsg	  "warning"
	  TimeAdjustmentMsg	  "none"
	  MaxConsecutiveZCsMsg	  "error"
	  MaskedZcDiagnostic	  "warning"
	  IgnoredZcDiagnostic	  "warning"
	  SolverPrmCheckMsg	  "none"
	  InheritedTsInSrcMsg	  "warning"
	  DiscreteInheritContinuousMsg "warning"
	  MultiTaskDSMMsg	  "warning"
	  MultiTaskCondExecSysMsg "none"
	  MultiTaskRateTransMsg	  "error"
	  SingleTaskRateTransMsg  "none"
	  TasksWithSamePriorityMsg "warning"
	  SigSpecEnsureSampleTimeMsg "warning"
	  CheckMatrixSingularityMsg "none"
	  IntegerOverflowMsg	  "warning"
	  Int32ToFloatConvMsg	  "warning"
	  ParameterDowncastMsg	  "error"
	  ParameterOverflowMsg	  "error"
	  ParameterUnderflowMsg	  "none"
	  ParameterPrecisionLossMsg "warning"
	  ParameterTunabilityLossMsg "warning"
	  FixptConstUnderflowMsg  "none"
	  FixptConstOverflowMsg	  "none"
	  FixptConstPrecisionLossMsg "none"
	  UnderSpecifiedDataTypeMsg "none"
	  UnnecessaryDatatypeConvMsg "none"
	  VectorMatrixConversionMsg "none"
	  InvalidFcnCallConnMsg	  "error"
	  FcnCallInpInsideContextMsg "Enable All"
	  SignalLabelMismatchMsg  "none"
	  UnconnectedInputMsg	  "warning"
	  UnconnectedOutputMsg	  "warning"
	  UnconnectedLineMsg	  "warning"
	  SFcnCompatibilityMsg	  "none"
	  FrameProcessingCompatibilityMsg "warning"
	  UniqueDataStoreMsg	  "none"
	  BusObjectLabelMismatch  "warning"
	  RootOutportRequireBusObject "warning"
	  AssertControl		  "UseLocalSettings"
	  EnableOverflowDetection off
	  ModelReferenceIOMsg	  "none"
	  ModelReferenceMultiInstanceNormalModeStructChecksumCheck "error"
	  ModelReferenceVersionMismatchMessage "none"
	  ModelReferenceIOMismatchMessage "none"
	  ModelReferenceCSMismatchMessage "none"
	  UnknownTsInhSupMsg	  "warning"
	  ModelReferenceDataLoggingMessage "warning"
	  ModelReferenceSymbolNameMessage "warning"
	  ModelReferenceExtraNoncontSigs "error"
	  StateNameClashWarn	  "warning"
	  SimStateInterfaceChecksumMismatchMsg "warning"
	  SimStateOlderReleaseMsg "error"
	  InitInArrayFormatMsg	  "warning"
	  StrictBusMsg		  "None"
	  BusNameAdapt		  "WarnAndRepair"
	  NonBusSignalsTreatedAsBus "none"
	  LoggingUnavailableSignals "error"
	  BlockIODiagnostic	  "none"
	  SFUnusedDataAndEventsDiag "warning"
	  SFUnexpectedBacktrackingDiag "warning"
	  SFInvalidInputDataAccessInChartInitDiag "warning"
	  SFNoUnconditionalDefaultTransitionDiag "warning"
	  SFTransitionOutsideNaturalParentDiag "warning"
	  SFUnconditionalTransitionShadowingDiag "warning"
	}
	Simulink.HardwareCC {
	  $ObjectID		  6
	  Version		  "1.12.0"
	  ProdBitPerChar	  8
	  ProdBitPerShort	  16
	  ProdBitPerInt		  32
	  ProdBitPerLong	  32
	  ProdBitPerFloat	  32
	  ProdBitPerDouble	  64
	  ProdBitPerPointer	  32
	  ProdLargestAtomicInteger "Char"
	  ProdLargestAtomicFloat  "None"
	  ProdIntDivRoundTo	  "Undefined"
	  ProdEndianess		  "Unspecified"
	  ProdWordSize		  32
	  ProdShiftRightIntArith  on
	  ProdHWDeviceType	  "32-bit Generic"
	  TargetBitPerChar	  8
	  TargetBitPerShort	  16
	  TargetBitPerInt	  32
	  TargetBitPerLong	  32
	  TargetBitPerFloat	  32
	  TargetBitPerDouble	  64
	  TargetBitPerPointer	  32
	  TargetLargestAtomicInteger "Char"
	  TargetLargestAtomicFloat "None"
	  TargetShiftRightIntArith on
	  TargetIntDivRoundTo	  "Undefined"
	  TargetEndianess	  "Unspecified"
	  TargetWordSize	  32
	  TargetTypeEmulationWarnSuppressLevel 0
	  TargetPreprocMaxBitsSint 32
	  TargetPreprocMaxBitsUint 32
	  TargetHWDeviceType	  "Specified"
	  TargetUnknown		  on
	  ProdEqTarget		  on
	}
	Simulink.ModelReferenceCC {
	  $ObjectID		  7
	  Version		  "1.12.0"
	  UpdateModelReferenceTargets "IfOutOfDateOrStructuralChange"
	  CheckModelReferenceTargetMessage "error"
	  EnableParallelModelReferenceBuilds off
	  ParallelModelReferenceErrorOnInvalidPool on
	  ParallelModelReferenceMATLABWorkerInit "None"
	  ModelReferenceNumInstancesAllowed "Multi"
	  PropagateVarSize	  "Infer from blocks in model"
	  ModelReferencePassRootInputsByReference on
	  ModelReferenceMinAlgLoopOccurrences off
	  PropagateSignalLabelsOutOfModel off
	  SupportModelReferenceSimTargetCustomCode off
	}
	Simulink.SFSimCC {
	  $ObjectID		  8
	  Version		  "1.12.0"
	  SFSimEnableDebug	  on
	  SFSimOverflowDetection  on
	  SFSimEcho		  on
	  SimBlas		  on
	  SimCtrlC		  on
	  SimExtrinsic		  on
	  SimIntegrity		  on
	  SimUseLocalCustomCode	  off
	  SimParseCustomCode	  on
	  SimBuildMode		  "sf_incremental_build"
	}
	Simulink.RTWCC {
	  $BackupClass		  "Simulink.RTWCC"
	  $ObjectID		  9
	  Version		  "1.12.0"
	  Array {
	    Type		    "Cell"
	    Dimension		    9
	    Cell		    "IncludeHyperlinkInReport"
	    Cell		    "GenerateTraceInfo"
	    Cell		    "GenerateTraceReport"
	    Cell		    "GenerateTraceReportSl"
	    Cell		    "GenerateTraceReportSf"
	    Cell		    "GenerateTraceReportEml"
	    Cell		    "GenerateWebview"
	    Cell		    "GenerateCodeMetricsReport"
	    Cell		    "GenerateCodeReplacementReport"
	    PropName		    "DisabledProps"
	  }
	  SystemTargetFile	  "grt.tlc"
	  GenCodeOnly		  off
	  MakeCommand		  "make_rtw"
	  GenerateMakefile	  on
	  TemplateMakefile	  "grt_default_tmf"
	  GenerateReport	  off
	  SaveLog		  off
	  RTWVerbose		  on
	  RetainRTWFile		  off
	  ProfileTLC		  off
	  TLCDebug		  off
	  TLCCoverage		  off
	  TLCAssert		  off
	  ProcessScriptMode	  "Default"
	  ConfigurationMode	  "Optimized"
	  ConfigAtBuild		  off
	  RTWUseLocalCustomCode	  off
	  RTWUseSimCustomCode	  off
	  IncludeHyperlinkInReport off
	  LaunchReport		  off
	  TargetLang		  "C"
	  IncludeBusHierarchyInRTWFileBlockHierarchyMap	off
	  IncludeERTFirstTime	  on
	  GenerateTraceInfo	  off
	  GenerateTraceReport	  off
	  GenerateTraceReportSl	  off
	  GenerateTraceReportSf	  off
	  GenerateTraceReportEml  off
	  GenerateCodeInfo	  off
	  GenerateWebview	  off
	  GenerateCodeMetricsReport off
	  GenerateCodeReplacementReport	off
	  RTWCompilerOptimization "Off"
	  CheckMdlBeforeBuild	  "Off"
	  CustomRebuildMode	  "OnUpdate"
	  Array {
	    Type		    "Handle"
	    Dimension		    2
	    Simulink.CodeAppCC {
	      $ObjectID		      10
	      Version		      "1.12.0"
	      Array {
		Type			"Cell"
		Dimension		21
		Cell			"IgnoreCustomStorageClasses"
		Cell			"IgnoreTestpoints"
		Cell			"InsertBlockDesc"
		Cell			"InsertPolySpaceComments"
		Cell			"SFDataObjDesc"
		Cell			"MATLABFcnDesc"
		Cell			"SimulinkDataObjDesc"
		Cell			"DefineNamingRule"
		Cell			"SignalNamingRule"
		Cell			"ParamNamingRule"
		Cell			"InlinedPrmAccess"
		Cell			"CustomSymbolStr"
		Cell			"CustomSymbolStrGlobalVar"
		Cell			"CustomSymbolStrType"
		Cell			"CustomSymbolStrField"
		Cell			"CustomSymbolStrFcn"
		Cell			"CustomSymbolStrFcnArg"
		Cell			"CustomSymbolStrBlkIO"
		Cell			"CustomSymbolStrTmpVar"
		Cell			"CustomSymbolStrMacro"
		Cell			"ReqsInCode"
		PropName		"DisabledProps"
	      }
	      ForceParamTrailComments off
	      GenerateComments	      on
	      IgnoreCustomStorageClasses on
	      IgnoreTestpoints	      off
	      IncHierarchyInIds	      off
	      MaxIdLength	      31
	      PreserveName	      off
	      PreserveNameWithParent  off
	      ShowEliminatedStatement off
	      IncAutoGenComments      off
	      SimulinkDataObjDesc     off
	      SFDataObjDesc	      off
	      MATLABFcnDesc	      off
	      IncDataTypeInIds	      off
	      MangleLength	      1
	      CustomSymbolStrGlobalVar "$R$N$M"
	      CustomSymbolStrType     "$N$R$M"
	      CustomSymbolStrField    "$N$M"
	      CustomSymbolStrFcn      "$R$N$M$F"
	      CustomSymbolStrFcnArg   "rt$I$N$M"
	      CustomSymbolStrBlkIO    "rtb_$N$M"
	      CustomSymbolStrTmpVar   "$N$M"
	      CustomSymbolStrMacro    "$R$N$M"
	      DefineNamingRule	      "None"
	      ParamNamingRule	      "None"
	      SignalNamingRule	      "None"
	      InsertBlockDesc	      off
	      InsertPolySpaceComments off
	      SimulinkBlockComments   on
	      MATLABSourceComments    off
	      EnableCustomComments    off
	      InlinedPrmAccess	      "Literals"
	      ReqsInCode	      off
	      UseSimReservedNames     off
	    }
	    Simulink.GRTTargetCC {
	      $BackupClass	      "Simulink.TargetCC"
	      $ObjectID		      11
	      Version		      "1.12.0"
	      Array {
		Type			"Cell"
		Dimension		16
		Cell			"GeneratePreprocessorConditionals"
		Cell			"IncludeMdlTerminateFcn"
		Cell			"CombineOutputUpdateFcns"
		Cell			"SuppressErrorStatus"
		Cell			"ERTCustomFileBanners"
		Cell			"GenerateSampleERTMain"
		Cell			"GenerateTestInterfaces"
		Cell			"ModelStepFunctionPrototypeControlCompliant"
		Cell			"CPPClassGenCompliant"
		Cell			"MultiInstanceERTCode"
		Cell			"PurelyIntegerCode"
		Cell			"SupportComplex"
		Cell			"SupportAbsoluteTime"
		Cell			"SupportContinuousTime"
		Cell			"SupportNonInlinedSFcns"
		Cell			"PortableWordSizes"
		PropName		"DisabledProps"
	      }
	      TargetFcnLib	      "ansi_tfl_table_tmw.mat"
	      TargetLibSuffix	      ""
	      TargetPreCompLibLocation ""
	      CodeReplacementLibrary  "ANSI_C"
	      UtilityFuncGeneration   "Auto"
	      ERTMultiwordTypeDef     "System defined"
	      CodeExecutionProfiling  off
	      ERTMultiwordLength      256
	      MultiwordLength	      2048
	      GenerateFullHeader      on
	      GenerateSampleERTMain   off
	      GenerateTestInterfaces  off
	      IsPILTarget	      off
	      ModelReferenceCompliant on
	      ParMdlRefBuildCompliant on
	      CompOptLevelCompliant   on
	      ConcurrentExecutionCompliant on
	      IncludeMdlTerminateFcn  on
	      GeneratePreprocessorConditionals "Disable all"
	      CombineOutputUpdateFcns on
	      CombineSignalStateStructs	off
	      SuppressErrorStatus     off
	      ERTFirstTimeCompliant   off
	      IncludeFileDelimiter    "Auto"
	      ERTCustomFileBanners    off
	      SupportAbsoluteTime     on
	      LogVarNameModifier      "rt_"
	      MatFileLogging	      on
	      MultiInstanceERTCode    off
	      SupportNonFinite	      on
	      SupportComplex	      on
	      PurelyIntegerCode	      off
	      SupportContinuousTime   on
	      SupportNonInlinedSFcns  on
	      SupportVariableSizeSignals off
	      EnableShiftOperators    on
	      ParenthesesLevel	      "Nominal"
	      PortableWordSizes	      off
	      ModelStepFunctionPrototypeControlCompliant off
	      CPPClassGenCompliant    off
	      AutosarCompliant	      off
	      GRTInterface	      off
	      UseMalloc		      off
	      ExtMode		      off
	      ExtModeStaticAlloc      off
	      ExtModeTesting	      off
	      ExtModeStaticAllocSize  1000000
	      ExtModeTransport	      0
	      ExtModeMexFile	      "ext_comm"
	      ExtModeIntrfLevel	      "Level1"
	      RTWCAPISignals	      off
	      RTWCAPIParams	      off
	      RTWCAPIStates	      off
	      RTWCAPIRootIO	      off
	      GenerateASAP2	      off
	    }
	    PropName		    "Components"
	  }
	}
	PropName		"Components"
      }
      Name		      "Configuration"
      CurrentDlgPage	      "Solver"
      ConfigPrmDlgPosition     [ 520, 285, 1400, 915 ] 
    }
    PropName		    "ConfigurationSets"
  }
  ExplicitPartitioning	  off
  BlockDefaults {
    ForegroundColor	    "black"
    BackgroundColor	    "white"
    DropShadow		    off
    NamePlacement	    "normal"
    FontName		    "Helvetica"
    FontSize		    10
    FontWeight		    "normal"
    FontAngle		    "normal"
    ShowName		    on
    BlockRotation	    0
    BlockMirror		    off
  }
  AnnotationDefaults {
    HorizontalAlignment	    "center"
    VerticalAlignment	    "middle"
    ForegroundColor	    "black"
    BackgroundColor	    "white"
    DropShadow		    off
    FontName		    "Helvetica"
    FontSize		    10
    FontWeight		    "normal"
    FontAngle		    "normal"
    UseDisplayTextAsClickCallback off
  }
  LineDefaults {
    FontName		    "Helvetica"
    FontSize		    9
    FontWeight		    "normal"
    FontAngle		    "normal"
  }
  BlockParameterDefaults {
    Block {
      BlockType		      Abs
      ZeroCross		      on
      SampleTime	      "-1"
      OutMin		      "[]"
      OutMax		      "[]"
      OutDataTypeStr	      "Inherit: Same as input"
      LockScale		      off
      RndMeth		      "Floor"
      SaturateOnIntegerOverflow	on
    }
    Block {
      BlockType		      Clock
      DisplayTime	      off
      Decimation	      "10"
    }
    Block {
      BlockType		      Constant
      Value		      "1"
      VectorParams1D	      on
      SamplingMode	      "Sample based"
      OutMin		      "[]"
      OutMax		      "[]"
      OutDataTypeStr	      "Inherit: Inherit from 'Constant value'"
      LockScale		      off
      SampleTime	      "inf"
      FramePeriod	      "inf"
      PreserveConstantTs      off
    }
    Block {
      BlockType		      Demux
      Outputs		      "4"
      DisplayOption	      "none"
      BusSelectionMode	      off
    }
    Block {
      BlockType		      Derivative
      CoefficientInTFapproximation "inf"
    }
    Block {
      BlockType		      Display
      Format		      "short"
      Decimation	      "10"
      Floating		      off
      SampleTime	      "-1"
    }
    Block {
      BlockType		      EnablePort
      StatesWhenEnabling      "held"
      PropagateVarSize	      "Only when enabling"
      ShowOutputPort	      off
      ZeroCross		      on
      PortDimensions	      "1"
      SampleTime	      "-1"
      OutMin		      "[]"
      OutMax		      "[]"
      OutDataTypeStr	      "double"
      Interpolate	      on
    }
    Block {
      BlockType		      Fcn
      Expr		      "sin(u[1])"
      SampleTime	      "-1"
    }
    Block {
      BlockType		      From
      IconDisplay	      "Tag"
      TagVisibility	      "local"
    }
    Block {
      BlockType		      Gain
      Gain		      "1"
      Multiplication	      "Element-wise(K.*u)"
      ParamMin		      "[]"
      ParamMax		      "[]"
      ParamDataTypeStr	      "Inherit: Same as input"
      OutMin		      "[]"
      OutMax		      "[]"
      OutDataTypeStr	      "Inherit: Same as input"
      LockScale		      off
      RndMeth		      "Floor"
      SaturateOnIntegerOverflow	on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Goto
      IconDisplay	      "Tag"
      TagVisibility	      "local"
    }
    Block {
      BlockType		      Ground
    }
    Block {
      BlockType		      HitCross
      HitCrossingOffset	      "0"
      HitCrossingDirection    "either"
      ShowOutputPort	      on
      ZeroCross		      on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Inport
      Port		      "1"
      OutputFunctionCall      off
      OutMin		      "[]"
      OutMax		      "[]"
      OutDataTypeStr	      "Inherit: auto"
      LockScale		      off
      BusOutputAsStruct	      off
      PortDimensions	      "-1"
      VarSizeSig	      "Inherit"
      SampleTime	      "-1"
      SignalType	      "auto"
      SamplingMode	      "auto"
      LatchByDelayingOutsideSignal off
      LatchInputForFeedbackSignals off
      Interpolate	      on
    }
    Block {
      BlockType		      Integrator
      ExternalReset	      "none"
      InitialConditionSource  "internal"
      InitialCondition	      "0"
      LimitOutput	      off
      UpperSaturationLimit    "inf"
      LowerSaturationLimit    "-inf"
      ShowSaturationPort      off
      ShowStatePort	      off
      AbsoluteTolerance	      "auto"
      IgnoreLimit	      off
      ZeroCross		      on
      ContinuousStateAttributes	"''"
    }
    Block {
      BlockType		      Logic
      Operator		      "AND"
      Inputs		      "2"
      IconShape		      "rectangular"
      AllPortsSameDT	      on
      OutDataTypeStr	      "Inherit: Logical (see Configuration Parameters: Optimization)"
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Lookup
      InputValues	      "[-4:5]"
      Table		      " rand(1,10)-0.5"
      LookUpMeth	      "Interpolation-Extrapolation"
      OutMin		      "[]"
      OutMax		      "[]"
      OutDataTypeStr	      "Inherit: Same as input"
      LockScale		      off
      RndMeth		      "Floor"
      SaturateOnIntegerOverflow	on
      SampleTime	      "-1"
      LUTDesignTableMode      "Redesign Table"
      LUTDesignDataSource     "Block Dialog"
      LUTDesignFunctionName   "sqrt(x)"
      LUTDesignUseExistingBP  on
      LUTDesignRelError	      "0.01"
      LUTDesignAbsError	      "1e-6"
    }
    Block {
      BlockType		      Lookup2D
      RowIndex		      "[0 1]"
      ColumnIndex	      "[0 1]"
      Table		      "[0 0;0 0]"
      LookUpMeth	      "Interpolation-Extrapolation"
      InputSameDT	      on
      OutMin		      "[]"
      OutMax		      "[]"
      OutDataTypeStr	      "Inherit: Same as first input"
      LockScale		      off
      RndMeth		      "Floor"
      SaturateOnIntegerOverflow	on
      SampleTime	      "-1"
      LUTDesignTableMode      "Redesign Table"
      LUTDesignDataSource     "Block Dialog"
      LUTDesignFunctionName   "sqrt(x)"
      LUTDesignUseExistingBP  on
      LUTDesignRelError	      "0.01"
      LUTDesignAbsError	      "1e-6"
    }
    Block {
      BlockType		      MATLABFcn
      MATLABFcn		      "sin"
      OutputDimensions	      "-1"
      OutputSignalType	      "auto"
      Output1D		      on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Math
      Operator		      "exp"
      OutputSignalType	      "auto"
      SampleTime	      "-1"
      OutMin		      "[]"
      OutMax		      "[]"
      OutDataTypeStr	      "Inherit: Same as first input"
      LockScale		      off
      RndMeth		      "Floor"
      SaturateOnIntegerOverflow	on
      IntermediateResultsDataTypeStr "Inherit: Inherit via internal rule"
      AlgorithmType	      "Newton-Raphson"
      Iterations	      "3"
    }
    Block {
      BlockType		      Memory
      X0		      "0"
      InheritSampleTime	      off
      LinearizeMemory	      off
      LinearizeAsDelay	      off
      StateMustResolveToSignalObject off
      RTWStateStorageClass    "Auto"
    }
    Block {
      BlockType		      MinMax
      Function		      "min"
      Inputs		      "1"
      InputSameDT	      on
      OutMin		      "[]"
      OutMax		      "[]"
      OutDataTypeStr	      "Inherit: Inherit via internal rule"
      LockScale		      off
      RndMeth		      "Floor"
      SaturateOnIntegerOverflow	on
      ZeroCross		      on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      MultiPortSwitch
      DataPortOrder	      "One-based contiguous"
      Inputs		      "3"
      DataPortIndices	      "{1,2,3}"
      DataPortForDefault      "Last data port"
      DiagnosticForDefault    "Error"
      InputSameDT	      on
      OutMin		      "[]"
      OutMax		      "[]"
      OutDataTypeStr	      "Inherit: Inherit via internal rule"
      LockScale		      off
      RndMeth		      "Floor"
      SaturateOnIntegerOverflow	on
      SampleTime	      "-1"
      AllowDiffInputSizes     off
    }
    Block {
      BlockType		      Mux
      Inputs		      "4"
      DisplayOption	      "none"
      UseBusObject	      off
      BusObject		      "BusObject"
      NonVirtualBus	      off
    }
    Block {
      BlockType		      Outport
      Port		      "1"
      OutMin		      "[]"
      OutMax		      "[]"
      OutDataTypeStr	      "Inherit: auto"
      LockScale		      off
      BusOutputAsStruct	      off
      PortDimensions	      "-1"
      VarSizeSig	      "Inherit"
      SampleTime	      "-1"
      SignalType	      "auto"
      SamplingMode	      "auto"
      SourceOfInitialOutputValue "Dialog"
      OutputWhenDisabled      "held"
      InitialOutput	      "[]"
    }
    Block {
      BlockType		      Product
      Inputs		      "2"
      Multiplication	      "Element-wise(.*)"
      CollapseMode	      "All dimensions"
      CollapseDim	      "1"
      InputSameDT	      on
      OutMin		      "[]"
      OutMax		      "[]"
      OutDataTypeStr	      "Inherit: Same as first input"
      LockScale		      off
      RndMeth		      "Zero"
      SaturateOnIntegerOverflow	on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      RateLimiter
      RisingSlewLimit	      "1"
      FallingSlewLimit	      "-1"
      SampleTimeMode	      "continuous"
      InitialCondition	      "0"
      LinearizeAsGain	      on
    }
    Block {
      BlockType		      RelationalOperator
      Operator		      ">="
      InputSameDT	      on
      OutDataTypeStr	      "Inherit: Logical (see Configuration Parameters: Optimization)"
      ZeroCross		      on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Rounding
      Operator		      "floor"
      SampleTime	      "-1"
    }
    Block {
      BlockType		      S-Function
      FunctionName	      "system"
      SFunctionModules	      "''"
      PortCounts	      "[]"
      SFunctionDeploymentMode off
    }
    Block {
      BlockType		      Saturate
      UpperLimitSource	      "Dialog"
      UpperLimit	      "0.5"
      LowerLimitSource	      "Dialog"
      LowerLimit	      "-0.5"
      LinearizeAsGain	      on
      ZeroCross		      on
      SampleTime	      "-1"
      OutMin		      "[]"
      OutMax		      "[]"
      OutDataTypeStr	      "Inherit: Same as input"
      LockScale		      off
      RndMeth		      "Floor"
    }
    Block {
      BlockType		      Selector
      NumberOfDimensions      "1"
      IndexMode		      "One-based"
      InputPortWidth	      "-1"
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Signum
      ZeroCross		      on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Stop
    }
    Block {
      BlockType		      SubSystem
      ShowPortLabels	      "FromPortIcon"
      Permissions	      "ReadWrite"
      PermitHierarchicalResolution "All"
      TreatAsAtomicUnit	      off
      CheckFcnCallInpInsideContextMsg off
      SystemSampleTime	      "-1"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      RTWMemSecFuncInitTerm   "Inherit from model"
      RTWMemSecFuncExecute    "Inherit from model"
      RTWMemSecDataConstants  "Inherit from model"
      RTWMemSecDataInternal   "Inherit from model"
      RTWMemSecDataParameters "Inherit from model"
      SimViewingDevice	      off
      DataTypeOverride	      "UseLocalSettings"
      DataTypeOverrideAppliesTo	"AllNumericTypes"
      MinMaxOverflowLogging   "UseLocalSettings"
      SFBlockType	      "NONE"
      Variant		      off
      GeneratePreprocessorConditionals off
    }
    Block {
      BlockType		      Sum
      IconShape		      "rectangular"
      Inputs		      "++"
      CollapseMode	      "All dimensions"
      CollapseDim	      "1"
      InputSameDT	      on
      AccumDataTypeStr	      "Inherit: Inherit via internal rule"
      OutMin		      "[]"
      OutMax		      "[]"
      OutDataTypeStr	      "Inherit: Same as first input"
      LockScale		      off
      RndMeth		      "Floor"
      SaturateOnIntegerOverflow	on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Switch
      Criteria		      "u2 >= Threshold"
      Threshold		      "0"
      InputSameDT	      on
      OutMin		      "[]"
      OutMax		      "[]"
      OutDataTypeStr	      "Inherit: Inherit via internal rule"
      LockScale		      off
      RndMeth		      "Floor"
      SaturateOnIntegerOverflow	on
      ZeroCross		      on
      SampleTime	      "-1"
      AllowDiffInputSizes     off
    }
    Block {
      BlockType		      Terminator
    }
    Block {
      BlockType		      ToWorkspace
      VariableName	      "simulink_output"
      MaxDataPoints	      "1000"
      Decimation	      "1"
      SampleTime	      "0"
      SaveFormat	      "Array"
      FixptAsFi		      off
      NumInputs		      "1"
    }
    Block {
      BlockType		      TransportDelay
      DelayTime		      "1"
      InitialOutput	      "0"
      BufferSize	      "1024"
      FixedBuffer	      off
      TransDelayFeedthrough   off
      PadeOrder		      "0"
    }
    Block {
      BlockType		      Trigonometry
      Operator		      "sin"
      ApproximationMethod     "None"
      NumberOfIterations      "11"
      OutputSignalType	      "auto"
      SampleTime	      "-1"
    }
    Block {
      BlockType		      VariableTransportDelay
      VariableDelayType	      "Variable time delay"
      MaximumDelay	      "1"
      InitialOutput	      "0"
      MaximumPoints	      "1024"
      FixedBuffer	      off
      ZeroDelay		      off
      TransDelayFeedthrough   off
      PadeOrder		      "0"
      AbsoluteTolerance	      "auto"
      ContinuousStateAttributes	"''"
    }
  }
  System {
    Name		    "lib_controls"
    Location		    [666, 277, 1679, 945]
    Open		    on
    ModelBrowserVisibility  off
    ModelBrowserWidth	    200
    ScreenColor		    "white"
    PaperOrientation	    "landscape"
    PaperPositionMode	    "auto"
    PaperType		    "usletter"
    PaperUnits		    "inches"
    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
    TiledPageScale	    1
    ShowPageBoundaries	    off
    ZoomFactor		    "100"
    ReportName		    "simulink-default.rpt"
    SIDHighWatermark	    "6898"
    Block {
      BlockType		      SubSystem
      Name		      "<vc> conv"
      SID		      "1"
      Ports		      [0, 1]
      Position		      [100, 48, 160, 102]
      BackgroundColor	      "yellow"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_vc.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"<vc> conv"
	Location		[59, 268, 871, 938]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"94"
	Block {
	  BlockType		  From
	  Name			  "From <fc>"
	  SID			  "2"
	  Position		  [590, 525, 685, 545]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_spd_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>1"
	  SID			  "3"
	  Position		  [595, 144, 675, 166]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>2"
	  SID			  "4"
	  Position		  [595, 181, 690, 199]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "eta_gb"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>4"
	  SID			  "5"
	  Position		  [580, 360, 675, 380]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>5"
	  SID			  "6"
	  Position		  [580, 385, 675, 405]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <vc> clutch cntrl"
	  SID			  "7"
	  Position		  [590, 477, 675, 493]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "clutch_state"
	}
	Block {
	  BlockType		  From
	  Name			  "From <vc> gb cntrol"
	  SID			  "8"
	  Position		  [590, 507, 675, 523]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <vc> gb cntrol1"
	  SID			  "9"
	  Position		  [580, 327, 665, 343]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <veh>"
	  SID			  "10"
	  Position		  [55, 257, 130, 273]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_prev"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>"
	  SID			  "11"
	  Position		  [60, 290, 120, 310]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>1"
	  SID			  "12"
	  Position		  [45, 221, 130, 239]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>2"
	  SID			  "13"
	  Position		  [125, 427, 235, 443]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_drivetrain_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>3"
	  SID			  "14"
	  Position		  [130, 461, 230, 479]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_wheel_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>4"
	  SID			  "15"
	  Position		  [590, 561, 675, 579]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>5"
	  SID			  "16"
	  Position		  [120, 516, 240, 534]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_rear_brake"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>6"
	  SID			  "17"
	  Position		  [145, 390, 205, 410]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>7"
	  SID			  "18"
	  Position		  [310, 255, 370, 275]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>8"
	  SID			  "19"
	  Position		  [110, 146, 195, 164]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>9"
	  SID			  "20"
	  Position		  [130, 557, 240, 573]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_rear_drivetrain_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From traction cntrl"
	  SID			  "21"
	  Position		  [595, 215, 690, 235]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "slip_limited"
	}
	Block {
	  BlockType		  From
	  Name			  "From<gb>"
	  SID			  "22"
	  Position		  [595, 111, 680, 129]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From<wh>4"
	  SID			  "23"
	  Position		  [120, 481, 235, 499]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_front_brake"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto"
	  SID			  "24"
	  Position		  [770, 207, 845, 233]
	  GotoTag		  "gear_number"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>"
	  SID			  "25"
	  Position		  [770, 486, 835, 504]
	  NamePlacement		  "alternate"
	  GotoTag		  "engine_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>1"
	  SID			  "26"
	  Position		  [765, 516, 850, 534]
	  GotoTag		  "spd_command"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc><mc>"
	  SID			  "27"
	  Position		  [775, 551, 825, 569]
	  GotoTag		  "key_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>"
	  SID			  "28"
	  Position		  [760, 120, 845, 140]
	  GotoTag		  "gear_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>1"
	  SID			  "29"
	  Position		  [765, 166, 845, 184]
	  GotoTag		  "shifting"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>"
	  SID			  "30"
	  Position		  [770, 336, 845, 354]
	  NamePlacement		  "alternate"
	  GotoTag		  "clutch_state"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>1"
	  SID			  "31"
	  Position		  [455, 251, 540, 269]
	  GotoTag		  "slip_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>"
	  SID			  "32"
	  Position		  [450, 180, 535, 200]
	  NamePlacement		  "alternate"
	  GotoTag		  "F_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>1"
	  SID			  "33"
	  Position		  [210, 239, 300, 261]
	  GotoTag		  "v_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>2"
	  SID			  "34"
	  Position		  [215, 276, 305, 294]
	  GotoTag		  "wt_front_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>3"
	  SID			  "35"
	  Position		  [355, 436, 440, 454]
	  GotoTag		  "F_front_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>4"
	  SID			  "36"
	  Position		  [355, 499, 440, 521]
	  GotoTag		  "F_rear_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>5"
	  SID			  "37"
	  Position		  [255, 145, 365, 165]
	  GotoTag		  "F_front_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>6"
	  SID			  "38"
	  Position		  [210, 306, 300, 324]
	  GotoTag		  "wt_rear_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>7"
	  SID			  "39"
	  Position		  [205, 336, 295, 354]
	  GotoTag		  "front_traction_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>8"
	  SID			  "40"
	  Position		  [420, 120, 530, 140]
	  GotoTag		  "F_rear_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator"
	  SID			  "41"
	  Ports			  [2, 1]
	  Position		  [400, 242, 430, 273]
	  Operator		  "~="
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  SID			  "42"
	  Ports			  [2, 1]
	  Position		  [400, 172, 430, 203]
	  Inputs		  "-+"
	}
	Block {
	  BlockType		  Reference
	  Name			  "braking strategy"
	  SID			  "43"
	  Ports			  [2, 2]
	  Position		  [210, 142, 240, 193]
	  NamePlacement		  "alternate"
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/braking strategy"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "clutch\ncontrol"
	  SID			  "44"
	  Ports			  [3, 1]
	  Position		  [710, 333, 745, 407]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "clutch\ncontrol"
	    Location		    [69, 202, 914, 652]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "45"
	      Position		      [30, 43, 60, 57]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_in_r"
	      SID		      "46"
	      Position		      [30, 83, 60, 97]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_in_r"
	      SID		      "47"
	      Position		      [25, 193, 55, 207]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "48"
	      Ports		      []
	      Position		      [775, 395, 831, 435]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[307, 823, 765, 985]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "49"
		  Name			  "This clutch control block determines the clutch state given the req'd clutch output torque \nand speed ("
		  "labelled as gearbox input torque and speed), and the gear number history.\n                          conditions   "
		  "                                                                    clutch state\ngear is being shifted OR (trq <~"
		  " 0 AND (engine is                                     1 == disengaged\nclutched to avoid compression braking OR sp"
		  "d < idle))                                                              \n\n(trq >~ 0) AND (spd < launch speed) AN"
		  "D clutch                                       2 == slipping     \nwas not engaged during previous time step      "
		  "                                                           \n\nneither of above sets of conditions are met        "
		  "                                  3 == engaged"
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "50"
	      Position		      [155, 108, 190, 132]
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "51"
	      Position		      [155, 149, 235, 171]
	      Value		      "vc_clutch_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "52"
	      Position		      [155, 214, 235, 236]
	      Value		      "vc_idle_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "53"
	      Position		      [155, 280, 190, 300]
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "54"
	      Position		      [155, 344, 235, 366]
	      Value		      "vc_launch_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "55"
	      Position		      [580, 380, 615, 400]
	      BlockMirror	      on
	      Value		      "2.5"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      SID		      "56"
	      Position		      [670, 135, 730, 165]
	      Expr		      "u[1]+2*u[2]*(1-u[1])*(1-u[3])+3*u[3]*(1-u[1])"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "57"
	      Ports		      [2, 1]
	      Position		      [390, 92, 420, 123]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "58"
	      Ports		      [2, 1]
	      Position		      [325, 152, 355, 183]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "59"
	      Position		      [580, 325, 610, 355]
	      BlockMirror	      on
	      X0		      "1+(2*(cyc_mph(1,2)>0))"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "60"
	      Ports		      [3, 1]
	      Position		      [600, 132, 635, 168]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "61"
	      Ports		      [2, 1]
	      Position		      [310, 82, 340, 113]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "62"
	      Ports		      [2, 1]
	      Position		      [270, 202, 300, 233]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "63"
	      Ports		      [2, 1]
	      Position		      [270, 267, 300, 298]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      SID		      "64"
	      Ports		      [2, 1]
	      Position		      [270, 332, 300, 363]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\ndisengaged"
	      SID		      "65"
	      Ports		      [2, 1]
	      Position		      [460, 42, 490, 73]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nengaged"
	      SID		      "66"
	      Ports		      [2, 1]
	      Position		      [530, 142, 560, 173]
	      Operator		      "NOR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping"
	      SID		      "67"
	      Ports		      [3, 1]
	      Position		      [390, 279, 420, 311]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch was NOT\nfully engaged\nduring last time step"
	      SID		      "68"
	      Ports		      [2, 1]
	      Position		      [470, 330, 505, 365]
	      BlockMirror	      on
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "gearbox speed\nestimator"
	      SID		      "69"
	      Ports		      [1, 1]
	      Position		      [85, 185, 115, 215]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"gearbox speed\nestimator"
		Location		[222, 219, 810, 728]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_in_r\nif no gear change"
		  SID			  "70"
		  Position		  [45, 18, 75, 32]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "71"
		  Ports			  []
		  Position		  [515, 345, 571, 385]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [497, 485, 832, 570]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "72"
		    Name		    "The requested engine speed is replaced by an estimate of the\nengine's previous speed whenever the ve"
		    "hicle missed the trace\n by more than 1 mph on the last time step."
		    Position		    [167, 41]
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "73"
		  Position		  [165, 240, 185, 260]
		  BlockMirror		  on
		  Value			  "eps"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "74"
		  Position		  [315, 165, 335, 185]
		  BlockMirror		  on
		  Value			  "0"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "75"
		  Position		  [230, 360, 250, 380]
		  BlockMirror		  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "76"
		  Position		  [230, 460, 250, 480]
		  BlockMirror		  on
		  Value			  "0.11"
		}
		Block {
		  BlockType		  From
		  Name			  "From"
		  SID			  "77"
		  Position		  [195, 40, 285, 70]
		  BlockMirror		  on
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "gb_spd_in_a"
		}
		Block {
		  BlockType		  From
		  Name			  "From <cyc>"
		  SID			  "78"
		  Position		  [30, 304, 120, 336]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "cyc_mph_r"
		}
		Block {
		  BlockType		  From
		  Name			  "From <veh>"
		  SID			  "79"
		  Position		  [30, 99, 85, 131]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "mpha"
		}
		Block {
		  BlockType		  From
		  Name			  "From <wh>/\ntire slip model (m/s)"
		  SID			  "80"
		  Position		  [30, 184, 120, 216]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "veh_spd_a_rec"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  SID			  "81"
		  Position		  [150, 97, 190, 133]
		  Gain			  "0.447"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical"
		  SID			  "82"
		  Ports			  [2, 1]
		  Position		  [375, 317, 405, 348]
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "83"
		  Position		  [370, 110, 400, 140]
		  X0			  "cyc_mph(1,2)*0.447/wh_radius*fd_ratio*gb_ratio(gb_num_init)"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "84"
		  Position		  [310, 310, 340, 340]
		  X0			  "1"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "85"
		  Ports			  [3, 1]
		  Position		  [215, 99, 245, 131]
		  Inputs		  "**/"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational"
		  SID			  "86"
		  Ports			  [2, 1]
		  Position		  [225, 307, 255, 338]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational1"
		  SID			  "87"
		  Ports			  [2, 1]
		  Position		  [225, 412, 255, 443]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "88"
		  Ports			  [2, 1]
		  Position		  [160, 192, 190, 223]
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "89"
		  Ports			  [2, 1]
		  Position		  [160, 297, 190, 328]
		  Inputs		  "-+"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "90"
		  Position		  [310, 110, 340, 140]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "91"
		  Position		  [445, 120, 475, 150]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "dt"
		  SID			  "92"
		  Ports			  [0, 1]
		  Position		  [165, 408, 185, 432]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "dt"
		    Location		    [240, 561, 480, 665]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "93"
		    Position		    [25, 25, 45, 45]
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "94"
		    Position		    [75, 53, 105, 77]
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum4"
		    SID			    "95"
		    Ports		    [2, 1]
		    Position		    [130, 27, 160, 58]
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "96"
		    Position		    [185, 38, 215, 52]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "Sum4"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Sum4"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum4"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  SID			  "97"
		  Position		  [545, 128, 575, 142]
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "dt"
		  SrcPort		  1
		  DstBlock		  "Relational1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical"
		  SrcPort		  1
		  Points		  [10, 0; 0, -200]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Logical"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational1"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From"
		  SrcPort		  1
		  Points		  [0, 50]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gb_spd_in_r\nif no gear change"
		  SrcPort		  1
		  Points		  [350, 0]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Relational"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <veh>"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    Points		    [0, 190]
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Gain"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "From <cyc>"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  Labels		  [1, 0]
		  SrcBlock		  "From <wh>/\ntire slip model (m/s)"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    Points		    [0, -25; 155, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Product"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "clutch\nstate"
	      SID		      "98"
	      Position		      [795, 143, 825, 157]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "gearbox speed\nestimator"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, 140]
		DstBlock		"Relational\nOperator3"
		DstPort			1
	      }
	      Branch {
		Points			[105, 0; 0, 10]
		DstBlock		"Relational\nOperator1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "gb_spd_in_r"
	      SrcPort		      1
	      DstBlock		      "gearbox speed\nestimator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      Points		      [15, 0; 0, -45]
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gb_trq_in_r"
	      SrcPort		      1
	      Points		      [80, 0]
	      Branch {
		Points			[0, 185]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [90, 0; 0, -15]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      SrcPort		      1
	      Points		      [-105, 0; 0, -45]
	      DstBlock		      "clutch\nslipping"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      Points		      [-30, 0; 0, -35]
	      DstBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      Points		      [30, 0; 0, -55]
	      DstBlock		      "clutch\nslipping"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping"
	      SrcPort		      1
	      Points		      [80, 0; 0, -95]
	      Branch {
		Points			[80, 0]
		DstBlock		"Mux"
		DstPort			2
	      }
	      Branch {
		Points			[0, -35]
		DstBlock		"clutch\nengaged"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "clutch\nslipping"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		Points			[0, 190]
		DstBlock		"Memory"
		DstPort			1
	      }
	      Branch {
		DstBlock		"clutch\nstate"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "clutch\ndisengaged"
	      SrcPort		      1
	      Points		      [10, 0; 0, 40]
	      Branch {
		Points			[80, 0]
		DstBlock		"Mux"
		DstPort			1
	      }
	      Branch {
		Points			[0, 50]
		DstBlock		"clutch\nengaged"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "clutch\nengaged"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      DstBlock		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "config traction control"
	  SID			  "99"
	  Ports			  [3, 5]
	  Position		  [145, 214, 180, 316]
	  BackgroundColor	  "darkGreen"
	  AttributesFormatString  "%<BlockChoice>"
	  ShowPortLabels	  "none"
	  BlockChoice		  "traction control 2 axle"
	  TemplateBlock		  "lib_controls/SubSystem/config traction control"
	  MemberBlocks		  "traction control 2 axle,traction control J2452 2 axle"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "config traction control"
	    Location		    [148, 182, 646, 482]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    SIDHighWatermark	    "6898"
	    Block {
	      BlockType		      Inport
	      Name		      "time-average\nvehicle speed\n req'd (m/s)"
	      SID		      "99::706"
	      Position		      [20, 40, 40, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SID		      "99::707"
	      Position		      [20, 80, 40, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "total tractive\nforce req'd\n(N)"
	      SID		      "99::708"
	      Position		      [20, 120, 40, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "traction control\n2 axle"
	      SID		      "99::709"
	      Ports		      [3, 5]
	      Position		      [100, 40, 140, 80]
	      BackgroundColor	      "darkGreen"
	      LibraryVersion	      "1.479"
	      SourceBlock	      "lib_controls/SubSystem/traction control 2 axle"
	      SourceType	      "SubSystem"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd force\n(N)"
	      SID		      "99::710"
	      Position		      [200, 40, 220, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd speed\n(m/s)"
	      SID		      "99::711"
	      Position		      [200, 80, 220, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nfront axle\n(N)"
	      SID		      "99::712"
	      Position		      [200, 120, 220, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nrear axle\n(N)"
	      SID		      "99::713"
	      Position		      [200, 160, 220, 180]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "front/total \ntraction ratio"
	      SID		      "99::714"
	      Position		      [200, 200, 220, 220]
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "time-average\nvehicle speed\n req'd (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "total tractive\nforce req'd\n(N)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      1
	      DstBlock		      "req'd force\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      2
	      DstBlock		      "req'd speed\n(m/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      3
	      DstBlock		      "weight on\nfront axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      4
	      DstBlock		      "weight on\nrear axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      5
	      DstBlock		      "front/total \ntraction ratio"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "engine\ncontrol"
	  SID			  "100"
	  Ports			  [4, 3]
	  Position		  [715, 481, 750, 569]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "engine\ncontrol"
	    Location		    [159, 197, 982, 1086]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "clutch state"
	      SID		      "101"
	      Position		      [35, 33, 65, 47]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "102"
	      Position		      [30, 163, 60, 177]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "fc_spd_out_r"
	      SID		      "103"
	      Position		      [45, 483, 75, 497]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "v_ave_req"
	      SID		      "104"
	      Position		      [30, 303, 60, 317]
	      NamePlacement	      "alternate"
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "105"
	      Ports		      []
	      Position		      [555, 335, 611, 375]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[156, 423, 612, 520]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "106"
		  Name			  "This engine control block determines whether the engine is on, which it is when\n[(the clutch is slippin"
		  "g or engaged OR idling is allowed) AND the ignition key is on]\nOR\n(the transmission is shifting AND the engine w"
		  "as on during the previous time step).\nThe second part involving shifting is to prevent the engine from shutting d"
		  "own\nfor 1 or 2 seconds during shifts."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "107"
	      Position		      [150, 80, 170, 100]
	      BlockRotation	      270
	      NamePlacement	      "alternate"
	      Value		      "1.1"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "108"
	      Position		      [140, 132, 215, 148]
	      ShowName		      off
	      Value		      "vc_idle_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "109"
	      Position		      [300, 424, 380, 446]
	      BlockMirror	      on
	      Value		      "vc_launch_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "110"
	      Position		      [55, 205, 75, 225]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "111"
	      Position		      [55, 325, 75, 345]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "112"
	      Position		      [95, 440, 115, 460]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "113"
	      Position		      [460, 490, 480, 510]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "114"
	      Ports		      [2, 1]
	      Position		      [390, 111, 420, 144]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator2"
	      SID		      "115"
	      Ports		      [2, 1]
	      Position		      [265, 116, 295, 149]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator3"
	      SID		      "116"
	      Ports		      [2, 1]
	      Position		      [445, 121, 475, 154]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator7"
	      SID		      "117"
	      Ports		      [2, 1]
	      Position		      [390, 160, 420, 195]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator8"
	      SID		      "118"
	      Ports		      [3, 1]
	      Position		      [205, 302, 235, 338]
	      ShowName		      off
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "119"
	      Position		      [395, 215, 425, 245]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "120"
	      Ports		      [1, 1]
	      Position		      [385, 465, 415, 495]
	      InputPortMap	      "u0"
	      UpperLimit	      "max(fc_map_spd)*fc_spd_scale"
	      LowerLimit	      "vc_idle_spd*vc_idle_bool"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "121"
	      Position		      [325, 465, 355, 495]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "122"
	      Position		      [515, 475, 545, 505]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch\ndisengaged"
	      SID		      "123"
	      Ports		      [2, 1]
	      Position		      [110, 192, 140, 223]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch\nslipping\nor engaged"
	      SID		      "124"
	      Ports		      [2, 1]
	      Position		      [195, 32, 225, 63]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "key_on"
	      SID		      "125"
	      Ports		      [0, 1]
	      Position		      [310, 91, 355, 119]
	      NamePlacement	      "alternate"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Repeating table"
	      MaskDescription	      "Repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table. Time values should be monotonically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "vc_key_on(:,1)|vc_key_on(:,2)"
	      System {
		Name			"key_on"
		Location		[5, 40, 315, 196]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "126"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "127"
		  Position		  [110, 60, 150, 80]
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "128"
		  Position		  [210, 58, 250, 82]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "129"
		  Position		  [285, 60, 305, 80]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  DstBlock		  "Fcn1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "moving next\ntime"
	      SID		      "130"
	      Ports		      [2, 1]
	      Position		      [140, 427, 170, 458]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "not\nmoving"
	      SID		      "131"
	      Ports		      [2, 1]
	      Position		      [110, 302, 140, 333]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "repeated cycle:\n speed required at\nend of NEXT step"
	      SID		      "132"
	      Ports		      [0, 1]
	      Position		      [35, 402, 70, 438]
	      ForegroundColor	      "green"
	      FontName		      "Arial"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Forward looking repeating table"
	      MaskDescription	      "Forward looking repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table with a one time step forward offset. Time values should be monoto"
	      "nically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "cyc_mph(:,1)|cyc_mph(:,2)"
	      System {
		Name			"repeated cycle:\n speed required at\nend of NEXT step"
		Location		[59, 74, 434, 236]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "133"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "134"
		  Position		  [110, 25, 150, 45]
		  ForegroundColor	  "green"
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "135"
		  Position		  [260, 33, 300, 57]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "136"
		  Position		  [90, 85, 120, 115]
		  ForegroundColor	  "green"
		  X0			  "-0.1"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "137"
		  Ports			  [2, 1]
		  Position		  [150, 62, 180, 93]
		  ForegroundColor	  "green"
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "138"
		  Ports			  [2, 1]
		  Position		  [205, 26, 235, 59]
		  ForegroundColor	  "green"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "139"
		  Position		  [335, 35, 355, 55]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -35]
		    DstBlock		    "Fcn1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0; 0, -15]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "engine on"
	      SID		      "140"
	      Position		      [550, 133, 580, 147]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "spd command\n (rad/s)"
	      SID		      "141"
	      Position		      [580, 483, 610, 497]
	      NamePlacement	      "alternate"
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "key on"
	      SID		      "142"
	      Position		      [550, 53, 580, 67]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "key_on"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, -45]
		DstBlock		"key on"
		DstPort			1
	      }
	      Branch {
		Points			[5, 0]
		DstBlock		"Logical\nOperator1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "spd command\n (rad/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator3"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, 90]
		Branch {
		  Points		  [0, 260]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Branch {
		  DstBlock		  "Memory"
		  DstPort		  1
		}
	      }
	      Branch {
		DstBlock		"engine on"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0; 0, 35]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "fc_spd_out_r"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator8"
	      SrcPort		      1
	      Points		      [0, 160]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      Points		      [10, 0; 0, -10]
	      DstBlock		      "not\nmoving"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "v_ave_req"
	      SrcPort		      1
	      DstBlock		      "not\nmoving"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "repeated cycle:\n speed required at\nend of NEXT step"
	      SrcPort		      1
	      Points		      [0, 15]
	      DstBlock		      "moving next\ntime"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      DstBlock		      "moving next\ntime"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator7"
	      SrcPort		      1
	      Points		      [0, -35]
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Logical\nOperator7"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator7"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping\nor engaged"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [0, -20]
	      DstBlock		      "clutch\nslipping\nor engaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch state"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"clutch\nslipping\nor engaged"
		DstPort			1
	      }
	      Branch {
		Points			[0, 160]
		DstBlock		"clutch\ndisengaged"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "moving next\ntime"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "not\nmoving"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\ndisengaged"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "front and rear\nbrake controller\n(achievable)"
	  SID			  "143"
	  Ports			  [6, 2]
	  Position		  [290, 411, 325, 539]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/front and rear\nbrake controller\n(achievable)"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "gearbox\n control"
	  SID			  "144"
	  Ports			  [4, 3]
	  Position		  [705, 101, 740, 244]
	  FontName		  "Arial"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "gearbox\n control"
	    Location		    [153, 127, 910, 797]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "78"
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_out_r"
	      SID		      "145"
	      Position		      [45, 130, 65, 150]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_out_r"
	      SID		      "146"
	      Position		      [45, 255, 65, 275]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "prev.\nPout/Pin"
	      SID		      "147"
	      Position		      [45, 20, 65, 40]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "tires are at\ntraction limit"
	      SID		      "148"
	      Position		      [45, 75, 65, 95]
	      FontName		      "Arial"
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "149"
	      Ports		      []
	      Position		      [900, 610, 956, 650]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[229, 259, 687, 388]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "150"
		  Name			  "This gearbox control block computes the current gear number given the gearbox's\nreq'd output torque and"
		  " speed and an estimate its efficiency.  Upshifts occur, given a\ncertain engine speed,  when the estimated engine "
		  "load falls below the upshift curve\nin engine speed/load space, and downshifts likewise occur when estimated engin"
		  "e\nload rises above the downshift curve.  Separate upshift and downshift curves are\ndefined for each gear.  An up"
		  "shift may not be immediately followed by a downshift.\nIf the tires are about to slip, don't upshift unless the en"
		  "gine would be at max. speed.\nEnforce this rule by setting the load to 1 when the tires are about to slip."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "151"
	      Position		      [370, 95, 390, 115]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant14"
	      SID		      "152"
	      Position		      [420, 558, 515, 572]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant15"
	      SID		      "153"
	      Position		      [350, 423, 445, 437]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      SID		      "154"
	      Ports		      [1, 2]
	      Position		      [690, 411, 695, 449]
	      BackgroundColor	      "black"
	      ShowName		      off
	      Outputs		      "2"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn"
	      SID		      "155"
	      Position		      [155, 20, 185, 40]
	      FontName		      "Arial"
	      Expr		      "1/u"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn1"
	      SID		      "156"
	      Position		      [85, 180, 115, 200]
	      BlockRotation	      270
	      FontName		      "Arial"
	      Expr		      "1/u"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      SID		      "157"
	      Position		      [520, 530, 645, 550]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <logic>2"
	      SID		      "158"
	      Position		      [45, 504, 150, 536]
	      ForegroundColor	      "red"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "v_req_limited"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      SID		      "159"
	      Position		      [520, 590, 645, 610]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From2"
	      SID		      "160"
	      Position		      [460, 450, 585, 470]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From3"
	      SID		      "161"
	      Position		      [460, 475, 585, 495]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From4"
	      SID		      "162"
	      Position		      [460, 385, 585, 405]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From5"
	      SID		      "163"
	      Position		      [115, 213, 225, 237]
	      BackgroundColor	      "gray"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "acc_mech_trq_est"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      SID		      "164"
	      Position		      [530, 242, 555, 268]
	      FontName		      "Arial"
	      Gain		      "-1"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto1"
	      SID		      "165"
	      Position		      [270, 495, 390, 515]
	      NamePlacement	      "alternate"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto2"
	      SID		      "166"
	      Position		      [270, 519, 390, 541]
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto3"
	      SID		      "167"
	      Position		      [825, 250, 960, 270]
	      NamePlacement	      "alternate"
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto4"
	      SID		      "168"
	      Position		      [835, 95, 945, 115]
	      NamePlacement	      "alternate"
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto5"
	      SID		      "169"
	      Position		      [835, 170, 945, 190]
	      NamePlacement	      "alternate"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "170"
	      Ports		      [2, 1]
	      Position		      [605, 447, 610, 498]
	      ShowName		      off
	      Inputs		      "2"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      SID		      "171"
	      Ports		      [2, 1]
	      Position		      [265, 142, 295, 173]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      SID		      "172"
	      Ports		      [2, 1]
	      Position		      [575, 238, 595, 262]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      RateLimiter
	      Name		      "Rate Limiter"
	      SID		      "173"
	      Position		      [475, 312, 505, 338]
	      BlockMirror	      on
	      RisingSlewLimit	      "1/(gb_shift_delay+eps)"
	      FallingSlewLimit	      "-1/(gb_shift_delay+eps)"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "174"
	      Ports		      [1, 1]
	      Position		      [90, 20, 120, 40]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "0.2"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation1"
	      SID		      "175"
	      Ports		      [1, 1]
	      Position		      [725, 96, 745, 114]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "gb_gears_num"
	      LowerLimit	      "1"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Speed Dependent Shifting"
	      SID		      "176"
	      Ports		      [1, 2]
	      Position		      [195, 492, 225, 543]
	      SourceBlock	      "lib_controls/SubSystem/Speed Dependent Shifting"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "off"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "177"
	      Position		      [365, 135, 395, 165]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "178"
	      Position		      [665, 550, 695, 580]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch2"
	      SID		      "179"
	      Position		      [635, 415, 665, 445]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "allow downshift?"
	      SID		      "180"
	      Ports		      [1, 1]
	      Position		      [475, 42, 505, 78]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"allow downshift?"
		Location		[330, 267, 819, 482]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gearnum"
		  SID			  "181"
		  Position		  [35, 35, 55, 55]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  SID			  "182"
		  Ports			  [2, 1]
		  Position		  [375, 43, 405, 67]
		  FontName		  "Arial"
		  Operator		  "NOR"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "183"
		  Position		  [145, 60, 180, 80]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "184"
		  Position		  [145, 105, 180, 125]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "185"
		  Ports			  [2, 1]
		  Position		  [225, 38, 255, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator2"
		  SID			  "186"
		  Ports			  [2, 1]
		  Position		  [225, 98, 255, 122]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  Outport
		  Name			  "allow shift"
		  SID			  "187"
		  Position		  [445, 45, 465, 65]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator2"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [0, 30; -60, 0]
		    DstBlock		    "Memory1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [15, 0; 0, -15]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gearnum"
		  SrcPort		  1
		  Points		  [45, 0]
		  Branch {
		    Points		    [0, 25]
		    Branch {
		    Points		    [0, 35]
		    DstBlock		    "Relational\nOperator2"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  DstBlock		  "allow shift"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "current\ngear\nnumber"
	      SID		      "188"
	      Ports		      [2, 1]
	      Position		      [670, 87, 690, 123]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "delta\ngear\nnumber"
	      SID		      "189"
	      Position		      [615, 144, 645, 176]
	      FontName		      "Arial"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "downshift \ncommand"
	      SID		      "190"
	      Ports		      [3, 1]
	      Position		      [470, 229, 500, 281]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"downshift \ncommand"
		Location		[433, 370, 908, 665]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "191"
		  Position		  [45, 98, 75, 112]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "192"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "193"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "194"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "195"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "196"
		  Ports			  [1, 1]
		  Position		  [240, 100, 270, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_dnshift_spd|gb_dnshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "197"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "198"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "199"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "200"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [55, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "engine\ntorque\ncapability"
	      SID		      "201"
	      Position		      [310, 210, 340, 230]
	      BlockMirror	      on
	      FontName		      "Arial"
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      Table		      "fc_max_trq*fc_trq_scale+eps"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "est eng\ntrq"
	      SID		      "202"
	      Ports		      [2, 1]
	      Position		      [220, 132, 240, 168]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "gb_spd_in_r"
	      SID		      "203"
	      Ports		      [2, 1]
	      Position		      [150, 258, 170, 282]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio"
	      SID		      "204"
	      Position		      [400, 313, 430, 337]
	      BlockMirror	      on
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      Table		      "gb_ratio"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio1"
	      SID		      "205"
	      Position		      [785, 93, 815, 117]
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      Table		      "gb_ratio"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "gearbox speed\nestimator"
	      SID		      "206"
	      Ports		      [1, 1]
	      Position		      [220, 255, 250, 285]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"gearbox speed\nestimator"
		Location		[224, 221, 812, 730]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_in_r\nif no gear change"
		  SID			  "207"
		  Position		  [45, 18, 75, 32]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "208"
		  Ports			  []
		  Position		  [515, 345, 571, 385]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [497, 485, 832, 570]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "209"
		    Name		    "The requested engine speed is replaced by an estimate of the\nengine's previous speed whenever the ve"
		    "hicle missed the trace\n by more than 1 mph on the last time step."
		    Position		    [167, 41]
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "210"
		  Position		  [165, 240, 185, 260]
		  BlockMirror		  on
		  Value			  "eps"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "211"
		  Position		  [315, 165, 335, 185]
		  BlockMirror		  on
		  Value			  "0"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "212"
		  Position		  [230, 360, 250, 380]
		  BlockMirror		  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "213"
		  Position		  [230, 461, 265, 479]
		  BlockMirror		  on
		  Value			  "0.11"
		}
		Block {
		  BlockType		  From
		  Name			  "From"
		  SID			  "214"
		  Position		  [195, 40, 285, 70]
		  BlockMirror		  on
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "gb_spd_in_a"
		}
		Block {
		  BlockType		  From
		  Name			  "From <cyc>"
		  SID			  "215"
		  Position		  [30, 304, 120, 336]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "cyc_mph_r"
		}
		Block {
		  BlockType		  From
		  Name			  "From <veh>"
		  SID			  "216"
		  Position		  [30, 99, 85, 131]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "mpha"
		}
		Block {
		  BlockType		  From
		  Name			  "From <wh>/\ntire slip model (m/s)"
		  SID			  "217"
		  Position		  [30, 184, 120, 216]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "veh_spd_a_rec"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  SID			  "218"
		  Position		  [150, 97, 190, 133]
		  Gain			  "0.447"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical"
		  SID			  "219"
		  Ports			  [2, 1]
		  Position		  [375, 317, 405, 348]
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "220"
		  Position		  [370, 110, 400, 140]
		  X0			  "cyc_mph(1,2)*0.447/wh_radius*fd_ratio*gb_ratio(gb_num_init)"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "221"
		  Position		  [310, 310, 340, 340]
		  X0			  "1"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "222"
		  Ports			  [3, 1]
		  Position		  [215, 99, 245, 131]
		  Inputs		  "**/"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational"
		  SID			  "223"
		  Ports			  [2, 1]
		  Position		  [225, 307, 255, 338]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational1"
		  SID			  "224"
		  Ports			  [2, 1]
		  Position		  [225, 412, 255, 443]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "225"
		  Ports			  [2, 1]
		  Position		  [160, 192, 190, 223]
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "226"
		  Ports			  [2, 1]
		  Position		  [160, 297, 190, 328]
		  Inputs		  "-+"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "227"
		  Position		  [310, 110, 340, 140]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "228"
		  Position		  [445, 120, 475, 150]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "dt"
		  SID			  "229"
		  Ports			  [0, 1]
		  Position		  [165, 408, 185, 432]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "dt"
		    Location		    [240, 561, 480, 665]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "230"
		    Position		    [25, 25, 45, 45]
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "231"
		    Position		    [75, 53, 105, 77]
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum4"
		    SID			    "232"
		    Ports		    [2, 1]
		    Position		    [130, 27, 160, 58]
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "233"
		    Position		    [185, 38, 215, 52]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "Sum4"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Sum4"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum4"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  SID			  "234"
		  Position		  [545, 128, 575, 142]
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "dt"
		  SrcPort		  1
		  DstBlock		  "Relational1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical"
		  SrcPort		  1
		  Points		  [10, 0; 0, -200]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Logical"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational1"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From"
		  SrcPort		  1
		  Points		  [0, 50]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gb_spd_in_r\nif no gear change"
		  SrcPort		  1
		  Points		  [350, 0]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Relational"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <veh>"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    Points		    [0, 190]
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Gain"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "From <cyc>"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  Labels		  [1, 0]
		  SrcBlock		  "From <wh>/\ntire slip model (m/s)"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    Points		    [0, -25; 155, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Product"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "load=T/\n(maxT\nat spd)"
	      SID		      "235"
	      Ports		      [1, 1]
	      Position		      [315, 151, 335, 169]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "0"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev gear\nnumber"
	      SID		      "236"
	      Position		      [690, 20, 730, 40]
	      BlockMirror	      on
	      FontName		      "Arial"
	      X0		      "gb_num_init"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev gear\nratio"
	      SID		      "237"
	      Position		      [305, 315, 340, 335]
	      BlockMirror	      on
	      FontName		      "Arial"
	      X0		      "gb_ratio(gb_num_init)"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "shifting1"
	      SID		      "238"
	      Ports		      [1, 1]
	      Position		      [785, 164, 815, 196]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"shifting1"
		Location		[164, 210, 454, 401]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gear\nnumber"
		  SID			  "239"
		  Position		  [15, 50, 35, 70]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "240"
		  Position		  [20, 131, 120, 159]
		  FontName		  "Arial"
		  Value			  "gb_shift_delay-1e-6"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "241"
		  Ports			  [2, 1]
		  Position		  [185, 53, 215, 77]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "time since last shift"
		  SID			  "242"
		  Ports			  [1, 1]
		  Position		  [65, 43, 125, 77]
		  ShowName		  off
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('time since\\nlast shift')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "time since last shift"
		    Location		    [16, 396, 306, 535]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "243"
		    Position		    [10, 60, 30, 80]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "just shifted"
		    SID			    "244"
		    Ports		    [1, 1]
		    Position		    [60, 57, 110, 83]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('just\\nshifted')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "just shifted"
		    Location		    [140, 214, 463, 359]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "245"
		    Position		    [55, 55, 75, 75]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "246"
		    Position		    [120, 55, 155, 75]
		    FontName		    "Arial"
		    X0			    "1"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    SID			    "247"
		    Ports		    [2, 1]
		    Position		    [190, 58, 220, 82]
		    FontName		    "Arial"
		    Operator		    "~="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "248"
		    Position		    [250, 60, 270, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 30; 75, 0; 0, -20]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "timer"
		    SID			    "249"
		    Ports		    [1, 1]
		    Position		    [140, 55, 175, 85]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('timer')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "timer"
		    Location		    [455, 179, 859, 394]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "trigger"
		    SID			    "250"
		    Position		    [15, 125, 35, 145]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "251"
		    Position		    [100, 100, 120, 120]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant1"
		    SID			    "252"
		    Position		    [100, 150, 120, 170]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant2"
		    SID			    "253"
		    Position		    [150, 5, 170, 25]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "254"
		    Position		    [265, 59, 295, 91]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "no-lag\nReset Integrator"
		    SID			    "255"
		    Ports		    [3, 1]
		    Position		    [155, 96, 205, 174]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskType		    "No-lag Reset Integrator"
		    MaskDescription	    "No-lag Reset Integrator"
		    MaskHelp		    "Integrates first input using Euler technique.\\nAt the time step that input 2 <> zero,\\noutput i"
		    "s reset to input 3."
		    MaskPromptString	    "Initial Value"
		    MaskStyleString	    "edit"
		    MaskVariables	    "initval=@1;"
		    MaskTunableValueString  "on"
		    MaskEnableString	    "on"
		    MaskVisibilityString    "on"
		    MaskToolTipString	    "on"
		    MaskDisplay		    "disp('1/s\\nw/ reset\\nno lag')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "15"
		    System {
		    Name		    "no-lag\nReset Integrator"
		    Location		    [258, 616, 780, 880]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "256"
		    Position		    [60, 100, 80, 120]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    SID			    "257"
		    Position		    [60, 140, 80, 160]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_3"
		    SID			    "258"
		    Position		    [45, 185, 65, 205]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "259"
		    Position		    [125, 205, 145, 225]
		    BlockRotation	    270
		    NamePlacement	    "alternate"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "260"
		    Position		    [340, 55, 375, 75]
		    BlockMirror		    on
		    FontName		    "Arial"
		    X0			    "initval"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    SID			    "261"
		    Ports		    [2, 1]
		    Position		    [160, 96, 180, 114]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    SID			    "262"
		    Ports		    [2, 1]
		    Position		    [230, 90, 250, 110]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "263"
		    Position		    [290, 139, 320, 171]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "dt"
		    SID			    "264"
		    Ports		    [0, 1]
		    Position		    [112, 50, 138, 80]
		    BlockRotation	    270
		    BlockMirror		    on
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "dt"
		    Location		    [80, 285, 429, 424]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "265"
		    Position		    [65, 60, 85, 80]
		    FontName		    "Arial"
		    FontSize		    8
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "266"
		    Position		    [125, 85, 160, 105]
		    FontName		    "Arial"
		    FontSize		    8
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    SID			    "267"
		    Ports		    [2, 1]
		    Position		    [205, 65, 225, 85]
		    FontName		    "Arial"
		    FontSize		    8
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "268"
		    Position		    [255, 65, 275, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [10, 0; 0, -15]
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    }
		    }
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "in_2==0"
		    SID			    "269"
		    Ports		    [2, 1]
		    Position		    [160, 143, 190, 167]
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "270"
		    Position		    [455, 145, 475, 165]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    Points		    [0, -40]
		    DstBlock		    "in_2==0"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "in_2==0"
		    SrcPort		    1
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    Points		    [85, 0]
		    Branch {
		    Points		    [0, -90]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    Points		    [10, 0; 0, 45]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    Points		    [-130, 0; 0, 30]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "dt"
		    SrcPort		    1
		    Points		    [0, 15]
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "in_2==0"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_3"
		    SrcPort		    1
		    Points		    [200, 0; 0, -30]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "time"
		    SID			    "271"
		    Position		    [350, 65, 370, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "no-lag\nReset Integrator"
		    SrcPort		    1
		    Points		    [35, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Constant1"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant2"
		    SrcPort		    1
		    Points		    [35, 0; 0, 50]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "trigger"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, -60]
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    DstBlock		    "time"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "272"
		    Position		    [225, 60, 245, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "timer"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "just shifted"
		    SrcPort		    1
		    DstBlock		    "timer"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "just shifted"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "273"
		  Position		  [250, 55, 270, 75]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "time since last shift"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [15, 0; 0, -75]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "gear\nnumber"
		  SrcPort		  1
		  DstBlock		  "time since last shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "upshift\n command"
	      SID		      "274"
	      Ports		      [3, 1]
	      Position		      [470, 124, 500, 176]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"upshift\n command"
		Location		[326, 353, 801, 648]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "275"
		  Position		  [45, 103, 75, 117]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "276"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "277"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "278"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "279"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "280"
		  Ports			  [1, 1]
		  Position		  [245, 100, 275, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_upshift_spd|gb_upshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "281"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "282"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "283"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "284"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [50, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Product
	      Name		      "~gb_trq_in_r"
	      SID		      "285"
	      Ports		      [3, 1]
	      Position		      [150, 132, 170, 168]
	      FontName		      "Arial"
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear ratio, out"
	      SID		      "286"
	      Position		      [760, 395, 780, 415]
	      NamePlacement	      "alternate"
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "shifting, out"
	      SID		      "287"
	      Position		      [760, 440, 780, 460]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear number, out"
	      SID		      "288"
	      Position		      [760, 555, 780, 575]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "delta\ngear\nnumber"
	      SrcPort		      1
	      Points		      [0, -45]
	      DstBlock		      "current\ngear\nnumber"
	      DstPort		      2
	    }
	    Line {
	      Labels		      [1, 0]
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		Points			[0, 105]
		DstBlock		"downshift \ncommand"
		DstPort			2
	      }
	      Branch {
		DstBlock		"upshift\n command"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "load=T/\n(maxT\nat spd)"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "est eng\ntrq"
	      SrcPort		      1
	      DstBlock		      "Product2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "~gb_trq_in_r"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "est eng\ntrq"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gearbox speed\nestimator"
	      SrcPort		      1
	      Points		      [115, 0]
	      Branch {
		Points			[50, 0]
		Branch {
		  Points		  [0, -105]
		  DstBlock		  "upshift\n command"
		  DstPort		  3
		}
		Branch {
		  DstBlock		  "downshift \ncommand"
		  DstPort		  3
		}
	      }
	      Branch {
		Points			[0, -50]
		DstBlock		"engine\ntorque\ncapability"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "allow downshift?"
	      SrcPort		      1
	      Points		      [50, 0]
	      DstBlock		      "Product3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      DstBlock		      "delta\ngear\nnumber"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      DstBlock		      "Product3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "prev gear\nratio"
	      SrcPort		      1
	      Points		      [-200, 0; 0, -50]
	      Branch {
		DstBlock		"Fcn1"
		DstPort			1
	      }
	      Branch {
		DstBlock		"gb_spd_in_r"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "gear ratio"
	      SrcPort		      1
	      DstBlock		      "prev gear\nratio"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gb_spd_in_r"
	      SrcPort		      1
	      DstBlock		      "gearbox speed\nestimator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gb_spd_out_r"
	      SrcPort		      1
	      DstBlock		      "gb_spd_in_r"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Rate Limiter"
	      SrcPort		      1
	      DstBlock		      "gear ratio"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "tires are at\ntraction limit"
	      SrcPort		      1
	      Points		      [265, 0; 0, 65]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "load=T/\n(maxT\nat spd)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "prev gear\nnumber"
	      SrcPort		      1
	      Points		      [-35, 0]
	      Branch {
		Points			[0, 65]
		DstBlock		"current\ngear\nnumber"
		DstPort			1
	      }
	      Branch {
		Points			[-210, 0; 0, 30]
		Branch {
		  Points		  [0, 75]
		  Branch {
		    Points		    [0, 105]
		    DstBlock		    "downshift \ncommand"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "upshift\n command"
		    DstPort		    1
		  }
		}
		Branch {
		  DstBlock		  "allow downshift?"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Saturation1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, 75]
		Branch {
		  DstBlock		  "shifting1"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 80]
		  Branch {
		    Points		    [0, 65]
		    DstBlock		    "Rate Limiter"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Goto3"
		    DstPort		    1
		  }
		}
	      }
	      Branch {
		Points			[0, 0]
		Branch {
		  DstBlock		  "gear ratio1"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, -75]
		  DstBlock		  "prev gear\nnumber"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Fcn"
	      SrcPort		      1
	      Points		      [10, 0; 0, 85; -75, 0; 0, 35]
	      DstBlock		      "~gb_trq_in_r"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "engine\ntorque\ncapability"
	      SrcPort		      1
	      Points		      [-55, 0]
	      DstBlock		      "Product2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Fcn1"
	      SrcPort		      1
	      Points		      [0, -15]
	      DstBlock		      "~gb_trq_in_r"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "downshift \ncommand"
	      SrcPort		      1
	      DstBlock		      "Gain1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "upshift\n command"
	      SrcPort		      1
	      Points		      [95, 0]
	      Branch {
		DstBlock		"delta\ngear\nnumber"
		DstPort			2
	      }
	      Branch {
		DstBlock		"delta\ngear\nnumber"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "gb_trq_out_r"
	      SrcPort		      1
	      DstBlock		      "~gb_trq_in_r"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "prev.\nPout/Pin"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Fcn"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "current\ngear\nnumber"
	      SrcPort		      1
	      DstBlock		      "Saturation1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gear ratio1"
	      SrcPort		      1
	      DstBlock		      "Goto4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "shifting1"
	      SrcPort		      1
	      DstBlock		      "Goto5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant15"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From4"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Switch2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Switch2"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From2"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From3"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <logic>2"
	      SrcPort		      1
	      DstBlock		      "Speed Dependent Shifting"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      1
	      DstBlock		      "Goto1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      2
	      DstBlock		      "Goto2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch2"
	      SrcPort		      1
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "gear ratio, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      Points		      [45, 0]
	      DstBlock		      "shifting, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "gear number, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant14"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From5"
	      SrcPort		      1
	      Points		      [0, -25; -25, 0]
	      DstBlock		      "est eng\ntrq"
	      DstPort		      2
	    }
	    Annotation {
	      SID		      "295"
	      Name		      "default gear number\ncalculation"
	      Position		      [899, 289]
	    }
	    Annotation {
	      SID		      "294"
	      Name		      "default shifting\ncalculation"
	      Position		      [893, 206]
	    }
	    Annotation {
	      SID		      "293"
	      Name		      "default gear ratio\ncalculation"
	      Position		      [902, 134]
	    }
	    Annotation {
	      SID		      "292"
	      Name		      "gear ratio and shifting pre-muxed"
	      Position		      [509, 372]
	    }
	    Annotation {
	      SID		      "291"
	      Name		      "output changes depending\nupon whether speed\ndependent shifting is used"
	      Position		      [860, 515]
	    }
	    Annotation {
	      SID		      "290"
	      Name		      "local GOTO blocks:"
	      Position		      [902, 62]
	    }
	    Annotation {
	      SID		      "289"
	      Name		      "local GOTO blocks"
	      Position		      [336, 470]
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "sim stop\nsubsystem"
	  SID			  "296"
	  Ports			  []
	  Position		  [50, 30, 80, 80]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/sim stop\nsubsystem"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  Outport
	  Name			  "clutch\nstate"
	  SID			  "297"
	  Position		  [795, 363, 825, 377]
	  IconDisplay		  "Port number"
	}
	Line {
	  SrcBlock		  "engine\ncontrol"
	  SrcPort		  3
	  Points		  [5, 0]
	  DstBlock		  "Goto <fc><mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "engine\ncontrol"
	  SrcPort		  1
	  DstBlock		  "Goto <fc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "engine\ncontrol"
	  SrcPort		  2
	  DstBlock		  "Goto <fc>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <fc>"
	  SrcPort		  1
	  DstBlock		  "engine\ncontrol"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <vc> gb cntrol"
	  SrcPort		  1
	  DstBlock		  "engine\ncontrol"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <vc> clutch cntrl"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "engine\ncontrol"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>4"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "engine\ncontrol"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "clutch\ncontrol"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    DstBlock		    "Goto <sdo>"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "clutch\nstate"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "From <gb>5"
	  SrcPort		  1
	  DstBlock		  "clutch\ncontrol"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <gb>4"
	  SrcPort		  1
	  DstBlock		  "clutch\ncontrol"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <vc> gb cntrol1"
	  SrcPort		  1
	  Points		  [25, 0]
	  DstBlock		  "clutch\ncontrol"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox\n control"
	  SrcPort		  1
	  DstBlock		  "Goto <gb>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From<gb>"
	  SrcPort		  1
	  DstBlock		  "gearbox\n control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>1"
	  SrcPort		  1
	  DstBlock		  "gearbox\n control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <gb>2"
	  SrcPort		  1
	  DstBlock		  "gearbox\n control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From traction cntrl"
	  SrcPort		  1
	  DstBlock		  "gearbox\n control"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "gearbox\n control"
	  SrcPort		  2
	  DstBlock		  "Goto <gb>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>2"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <wh>3"
	  SrcPort		  1
	  Points		  [40, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From<wh>4"
	  SrcPort		  1
	  Points		  [35, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <wh>5"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>6"
	  SrcPort		  1
	  Points		  [65, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  2
	  Points		  [125, 0]
	  Branch {
	    DstBlock		    "Sum"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -50]
	    DstBlock		    "Goto <wh>8"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  1
	  Points		  [0, 5; 10, 0]
	  Branch {
	    DstBlock		    "braking strategy"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [190, 0]
	    Branch {
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Branch {
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>5"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <veh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  3
	  Points		  [0, 5; 15, 0]
	  DstBlock		  "Goto <wh>2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Relational\nOperator"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>7"
	  SrcPort		  1
	  DstBlock		  "Relational\nOperator"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <wh>1"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>8"
	  SrcPort		  1
	  DstBlock		  "braking strategy"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox\n control"
	  SrcPort		  3
	  DstBlock		  "Goto"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  2
	  Points		  [5, 0; 0, 5]
	  DstBlock		  "Goto <wh>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  4
	  Points		  [10, 0]
	  DstBlock		  "Goto <wh>6"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  5
	  Points		  [5, 0]
	  DstBlock		  "Goto <wh>7"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>9"
	  SrcPort		  1
	  Points		  [20, 0; 0, -40]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  6
	}
	Annotation {
	  SID			  "298"
	  Name			  "required force (N)"
	  Position		  [244, 222]
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "<vc> conv\nSaber custom"
      SID		      "299"
      Ports		      [0, 1]
      Position		      [500, 33, 560, 87]
      BackgroundColor	      "yellow"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_vc.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"<vc> conv\nSaber custom"
	Location		[10, 112, 950, 1190]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"100"
	Block {
	  BlockType		  From
	  Name			  "From <fc>"
	  SID			  "952"
	  Position		  [515, 515, 610, 535]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_spd_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>1"
	  SID			  "953"
	  Position		  [510, 480, 605, 500]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>2"
	  SID			  "954"
	  Position		  [510, 445, 605, 465]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "clutch_state"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>1"
	  SID			  "955"
	  Position		  [525, 134, 605, 156]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>2"
	  SID			  "956"
	  Position		  [525, 171, 620, 189]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "eta_gb"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>3"
	  SID			  "957"
	  Position		  [525, 206, 620, 224]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "slip_limited"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>4"
	  SID			  "958"
	  Position		  [515, 320, 610, 340]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>5"
	  SID			  "959"
	  Position		  [520, 345, 615, 365]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>6"
	  SID			  "960"
	  Position		  [515, 285, 610, 305]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <veh>"
	  SID			  "961"
	  Position		  [25, 237, 100, 253]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_prev"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>"
	  SID			  "962"
	  Position		  [40, 270, 100, 290]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>1"
	  SID			  "963"
	  Position		  [15, 201, 100, 219]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>2"
	  SID			  "964"
	  Position		  [45, 437, 155, 453]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_drivetrain_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>3"
	  SID			  "965"
	  Position		  [50, 471, 150, 489]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_wheel_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>4"
	  SID			  "966"
	  Position		  [520, 551, 605, 569]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>5"
	  SID			  "967"
	  Position		  [30, 526, 150, 544]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_rear_brake"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>6"
	  SID			  "968"
	  Position		  [65, 400, 125, 420]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>7"
	  SID			  "969"
	  Position		  [280, 215, 340, 235]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>8"
	  SID			  "970"
	  Position		  [80, 126, 165, 144]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From<gb>"
	  SID			  "971"
	  Position		  [525, 101, 610, 119]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From<wh>4"
	  SID			  "972"
	  Position		  [45, 496, 160, 514]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_front_brake"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto"
	  SID			  "973"
	  Position		  [710, 202, 785, 228]
	  GotoTag		  "gear_number"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>"
	  SID			  "974"
	  Position		  [695, 476, 760, 494]
	  NamePlacement		  "alternate"
	  GotoTag		  "engine_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>1"
	  SID			  "975"
	  Position		  [690, 506, 775, 524]
	  GotoTag		  "spd_command"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc><mc>"
	  SID			  "976"
	  Position		  [700, 541, 750, 559]
	  GotoTag		  "key_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>"
	  SID			  "977"
	  Position		  [705, 105, 790, 125]
	  GotoTag		  "gear_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>1"
	  SID			  "978"
	  Position		  [705, 156, 785, 174]
	  GotoTag		  "shifting"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>"
	  SID			  "979"
	  Position		  [700, 296, 775, 314]
	  NamePlacement		  "alternate"
	  GotoTag		  "clutch_state"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>1"
	  SID			  "980"
	  Position		  [420, 211, 505, 229]
	  GotoTag		  "slip_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>"
	  SID			  "981"
	  Position		  [415, 160, 500, 180]
	  NamePlacement		  "alternate"
	  GotoTag		  "F_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>1"
	  SID			  "982"
	  Position		  [180, 219, 270, 241]
	  GotoTag		  "v_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>2"
	  SID			  "983"
	  Position		  [225, 246, 315, 264]
	  GotoTag		  "wt_front_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>3"
	  SID			  "984"
	  Position		  [245, 441, 330, 459]
	  GotoTag		  "F_front_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>4"
	  SID			  "985"
	  Position		  [245, 504, 330, 526]
	  GotoTag		  "F_rear_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>5"
	  SID			  "986"
	  Position		  [225, 125, 335, 145]
	  GotoTag		  "F_front_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>6"
	  SID			  "987"
	  Position		  [180, 286, 270, 304]
	  GotoTag		  "wt_rear_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>7"
	  SID			  "988"
	  Position		  [175, 316, 265, 334]
	  GotoTag		  "front_traction_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>8"
	  SID			  "989"
	  Position		  [390, 75, 500, 95]
	  GotoTag		  "F_rear_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Ground
	  Name			  "Ground"
	  SID			  "990"
	  Position		  [135, 575, 155, 595]
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator"
	  SID			  "991"
	  Ports			  [2, 1]
	  Position		  [365, 202, 395, 233]
	  Operator		  "~="
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  SID			  "992"
	  Ports			  [2, 1]
	  Position		  [365, 152, 395, 183]
	  Inputs		  "-+"
	}
	Block {
	  BlockType		  Reference
	  Name			  "braking strategy"
	  SID			  "993"
	  Ports			  [2, 2]
	  Position		  [180, 122, 210, 173]
	  NamePlacement		  "alternate"
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/braking strategy"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "clutch\ncontrol"
	  SID			  "994"
	  Ports			  [3, 1]
	  Position		  [640, 293, 675, 367]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "clutch\ncontrol"
	    Location		    [69, 202, 914, 652]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "995"
	      Position		      [30, 43, 60, 57]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_in_r"
	      SID		      "996"
	      Position		      [30, 83, 60, 97]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_in_r"
	      SID		      "997"
	      Position		      [25, 193, 55, 207]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "998"
	      Ports		      []
	      Position		      [775, 395, 831, 435]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[307, 823, 765, 985]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "999"
		  Name			  "This clutch control block determines the clutch state given the req'd clutch output torque \nand speed ("
		  "labelled as gearbox input torque and speed), and the gear number history.\n                          conditions   "
		  "                                                                    clutch state\ngear is being shifted OR (trq <~"
		  " 0 AND (engine is                                     1 == disengaged\nclutched to avoid compression braking OR sp"
		  "d < idle))                                                              \n\n(trq >~ 0) AND (spd < launch speed) AN"
		  "D clutch                                       2 == slipping     \nwas not engaged during previous time step      "
		  "                                                           \n\nneither of above sets of conditions are met        "
		  "                                  3 == engaged"
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "1000"
	      Position		      [155, 108, 190, 132]
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "1001"
	      Position		      [155, 149, 235, 171]
	      Value		      "vc_clutch_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "1002"
	      Position		      [155, 214, 235, 236]
	      Value		      "vc_idle_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "1003"
	      Position		      [155, 280, 190, 300]
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "1004"
	      Position		      [155, 344, 235, 366]
	      Value		      "vc_launch_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "1005"
	      Position		      [580, 380, 615, 400]
	      BlockMirror	      on
	      Value		      "2.5"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      SID		      "1006"
	      Position		      [670, 135, 730, 165]
	      Expr		      "u[1]+2*u[2]*(1-u[1])*(1-u[3])+3*u[3]*(1-u[1])"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "1007"
	      Ports		      [2, 1]
	      Position		      [390, 92, 420, 123]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "1008"
	      Ports		      [2, 1]
	      Position		      [325, 152, 355, 183]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "1009"
	      Position		      [580, 325, 610, 355]
	      BlockMirror	      on
	      X0		      "1+(2*(cyc_mph(1,2)>0))"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "1010"
	      Ports		      [3, 1]
	      Position		      [600, 132, 635, 168]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "1011"
	      Ports		      [2, 1]
	      Position		      [310, 82, 340, 113]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "1012"
	      Ports		      [2, 1]
	      Position		      [270, 202, 300, 233]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "1013"
	      Ports		      [2, 1]
	      Position		      [270, 267, 300, 298]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      SID		      "1014"
	      Ports		      [2, 1]
	      Position		      [270, 332, 300, 363]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\ndisengaged"
	      SID		      "1015"
	      Ports		      [2, 1]
	      Position		      [460, 42, 490, 73]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nengaged"
	      SID		      "1016"
	      Ports		      [2, 1]
	      Position		      [530, 142, 560, 173]
	      Operator		      "NOR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping"
	      SID		      "1017"
	      Ports		      [3, 1]
	      Position		      [390, 279, 420, 311]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch was NOT\nfully engaged\nduring last time step"
	      SID		      "1018"
	      Ports		      [2, 1]
	      Position		      [470, 330, 505, 365]
	      BlockMirror	      on
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "gearbox speed\nestimator"
	      SID		      "1019"
	      Ports		      [1, 1]
	      Position		      [85, 185, 115, 215]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"gearbox speed\nestimator"
		Location		[222, 219, 810, 728]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_in_r\nif no gear change"
		  SID			  "1020"
		  Position		  [45, 18, 75, 32]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "1021"
		  Ports			  []
		  Position		  [515, 345, 571, 385]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [497, 485, 832, 570]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "1022"
		    Name		    "The requested engine speed is replaced by an estimate of the\nengine's previous speed whenever the ve"
		    "hicle missed the trace\n by more than 1 mph on the last time step."
		    Position		    [167, 41]
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "1023"
		  Position		  [165, 240, 185, 260]
		  BlockMirror		  on
		  Value			  "eps"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "1024"
		  Position		  [315, 165, 335, 185]
		  BlockMirror		  on
		  Value			  "0"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "1025"
		  Position		  [230, 360, 250, 380]
		  BlockMirror		  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "1026"
		  Position		  [230, 460, 250, 480]
		  BlockMirror		  on
		  Value			  "0.11"
		}
		Block {
		  BlockType		  From
		  Name			  "From"
		  SID			  "1027"
		  Position		  [195, 40, 285, 70]
		  BlockMirror		  on
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "gb_spd_in_a"
		}
		Block {
		  BlockType		  From
		  Name			  "From <cyc>"
		  SID			  "1028"
		  Position		  [30, 304, 120, 336]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "cyc_mph_r"
		}
		Block {
		  BlockType		  From
		  Name			  "From <veh>"
		  SID			  "1029"
		  Position		  [30, 99, 85, 131]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "mpha"
		}
		Block {
		  BlockType		  From
		  Name			  "From <wh>/\ntire slip model (m/s)"
		  SID			  "1030"
		  Position		  [30, 184, 120, 216]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "veh_spd_a_rec"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  SID			  "1031"
		  Position		  [150, 97, 190, 133]
		  Gain			  "0.447"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical"
		  SID			  "1032"
		  Ports			  [2, 1]
		  Position		  [375, 317, 405, 348]
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "1033"
		  Position		  [370, 110, 400, 140]
		  X0			  "cyc_mph(1,2)*0.447/wh_radius*fd_ratio*gb_ratio(gb_num_init)"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "1034"
		  Position		  [310, 310, 340, 340]
		  X0			  "1"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "1035"
		  Ports			  [3, 1]
		  Position		  [215, 99, 245, 131]
		  Inputs		  "**/"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational"
		  SID			  "1036"
		  Ports			  [2, 1]
		  Position		  [225, 307, 255, 338]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational1"
		  SID			  "1037"
		  Ports			  [2, 1]
		  Position		  [225, 412, 255, 443]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "1038"
		  Ports			  [2, 1]
		  Position		  [160, 192, 190, 223]
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "1039"
		  Ports			  [2, 1]
		  Position		  [160, 297, 190, 328]
		  Inputs		  "-+"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "1040"
		  Position		  [310, 110, 340, 140]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "1041"
		  Position		  [445, 120, 475, 150]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "dt"
		  SID			  "1042"
		  Ports			  [0, 1]
		  Position		  [165, 408, 185, 432]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "dt"
		    Location		    [240, 561, 480, 665]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "1043"
		    Position		    [25, 25, 45, 45]
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "1044"
		    Position		    [75, 53, 105, 77]
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum4"
		    SID			    "1045"
		    Ports		    [2, 1]
		    Position		    [130, 27, 160, 58]
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "1046"
		    Position		    [185, 38, 215, 52]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Sum4"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Sum4"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Sum4"
		    DstPort		    1
		    }
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  SID			  "1047"
		  Position		  [545, 128, 575, 142]
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Product"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  Labels		  [1, 0]
		  SrcBlock		  "From <wh>/\ntire slip model (m/s)"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -25; 155, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <cyc>"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <veh>"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    DstBlock		    "Gain"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 190]
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Relational"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gb_spd_in_r\nif no gear change"
		  SrcPort		  1
		  Points		  [350, 0]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "From"
		  SrcPort		  1
		  Points		  [0, 50]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational1"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Logical"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical"
		  SrcPort		  1
		  Points		  [10, 0; 0, -200]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "dt"
		  SrcPort		  1
		  DstBlock		  "Relational1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "clutch\nstate"
	      SID		      "1048"
	      Position		      [795, 143, 825, 157]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      DstBlock		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "clutch\nengaged"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "clutch\ndisengaged"
	      SrcPort		      1
	      Points		      [10, 0; 0, 40]
	      Branch {
		Points			[0, 50]
		DstBlock		"clutch\nengaged"
		DstPort			1
	      }
	      Branch {
		Points			[80, 0]
		DstBlock		"Mux"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		DstBlock		"clutch\nstate"
		DstPort			1
	      }
	      Branch {
		Points			[0, 190]
		DstBlock		"Memory"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "clutch\nslipping"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping"
	      SrcPort		      1
	      Points		      [80, 0; 0, -95]
	      Branch {
		Points			[0, -35]
		DstBlock		"clutch\nengaged"
		DstPort			2
	      }
	      Branch {
		Points			[80, 0]
		DstBlock		"Mux"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      Points		      [30, 0; 0, -55]
	      DstBlock		      "clutch\nslipping"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      Points		      [-30, 0; 0, -35]
	      DstBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      SrcPort		      1
	      Points		      [-105, 0; 0, -45]
	      DstBlock		      "clutch\nslipping"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [90, 0; 0, -15]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gb_trq_in_r"
	      SrcPort		      1
	      Points		      [80, 0]
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	      Branch {
		Points			[0, 185]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      Points		      [15, 0; 0, -45]
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gb_spd_in_r"
	      SrcPort		      1
	      DstBlock		      "gearbox speed\nestimator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gearbox speed\nestimator"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[105, 0; 0, 10]
		DstBlock		"Relational\nOperator1"
		DstPort			1
	      }
	      Branch {
		Points			[0, 140]
		DstBlock		"Relational\nOperator3"
		DstPort			1
	      }
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "config traction control"
	  SID			  "1049"
	  Ports			  [3, 5]
	  Position		  [115, 194, 150, 296]
	  BackgroundColor	  "darkGreen"
	  AttributesFormatString  "%<BlockChoice>"
	  ShowPortLabels	  "none"
	  BlockChoice		  "traction control 2 axle"
	  TemplateBlock		  "lib_controls/SubSystem/config traction control"
	  MemberBlocks		  "traction control 2 axle,traction control J2452 2 axle"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "config traction control"
	    Location		    [148, 182, 646, 482]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    SIDHighWatermark	    "6898"
	    Block {
	      BlockType		      Inport
	      Name		      "time-average\nvehicle speed\n req'd (m/s)"
	      SID		      "1049::706"
	      Position		      [20, 40, 40, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SID		      "1049::707"
	      Position		      [20, 80, 40, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "total tractive\nforce req'd\n(N)"
	      SID		      "1049::708"
	      Position		      [20, 120, 40, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "traction control\n2 axle"
	      SID		      "1049::709"
	      Ports		      [3, 5]
	      Position		      [100, 40, 140, 80]
	      BackgroundColor	      "darkGreen"
	      LibraryVersion	      "1.479"
	      SourceBlock	      "lib_controls/SubSystem/traction control 2 axle"
	      SourceType	      "SubSystem"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd force\n(N)"
	      SID		      "1049::710"
	      Position		      [200, 40, 220, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd speed\n(m/s)"
	      SID		      "1049::711"
	      Position		      [200, 80, 220, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nfront axle\n(N)"
	      SID		      "1049::712"
	      Position		      [200, 120, 220, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nrear axle\n(N)"
	      SID		      "1049::713"
	      Position		      [200, 160, 220, 180]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "front/total \ntraction ratio"
	      SID		      "1049::714"
	      Position		      [200, 200, 220, 220]
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "time-average\nvehicle speed\n req'd (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "total tractive\nforce req'd\n(N)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      1
	      DstBlock		      "req'd force\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      2
	      DstBlock		      "req'd speed\n(m/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      3
	      DstBlock		      "weight on\nfront axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      4
	      DstBlock		      "weight on\nrear axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      5
	      DstBlock		      "front/total \ntraction ratio"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "engine\ncontrol"
	  SID			  "1050"
	  Ports			  [4, 3]
	  Position		  [640, 471, 675, 559]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "engine\ncontrol"
	    Location		    [10, 112, 950, 1190]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "clutch state"
	      SID		      "1051"
	      Position		      [35, 33, 65, 47]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "1052"
	      Position		      [30, 163, 60, 177]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "fc_spd_out_r"
	      SID		      "1053"
	      Position		      [45, 483, 75, 497]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "v_ave_req"
	      SID		      "1054"
	      Position		      [30, 303, 60, 317]
	      NamePlacement	      "alternate"
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "1055"
	      Ports		      []
	      Position		      [555, 335, 611, 375]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[156, 423, 612, 520]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "1056"
		  Name			  "This engine control block determines whether the engine is on, which it is when\n[(the clutch is slippin"
		  "g or engaged OR idling is allowed) AND the ignition key is on]\nOR\n(the transmission is shifting AND the engine w"
		  "as on during the previous time step).\nThe second part involving shifting is to prevent the engine from shutting d"
		  "own\nfor 1 or 2 seconds during shifts."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "1057"
	      Position		      [150, 80, 170, 100]
	      BlockRotation	      270
	      NamePlacement	      "alternate"
	      Value		      "1.1"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "1058"
	      Position		      [140, 132, 215, 148]
	      ShowName		      off
	      Value		      "vc_idle_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "1059"
	      Position		      [300, 424, 380, 446]
	      BlockMirror	      on
	      Value		      "vc_launch_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "1060"
	      Position		      [55, 205, 75, 225]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "1061"
	      Position		      [55, 325, 75, 345]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "1062"
	      Position		      [95, 440, 115, 460]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "1063"
	      Position		      [460, 490, 480, 510]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "1064"
	      Ports		      [2, 1]
	      Position		      [390, 111, 420, 144]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator2"
	      SID		      "1065"
	      Ports		      [2, 1]
	      Position		      [265, 116, 295, 149]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator3"
	      SID		      "1066"
	      Ports		      [2, 1]
	      Position		      [445, 121, 475, 154]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator7"
	      SID		      "1067"
	      Ports		      [2, 1]
	      Position		      [390, 160, 420, 195]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator8"
	      SID		      "1068"
	      Ports		      [3, 1]
	      Position		      [205, 302, 235, 338]
	      ShowName		      off
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "1069"
	      Position		      [395, 215, 425, 245]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "1070"
	      Ports		      [1, 1]
	      Position		      [385, 465, 415, 495]
	      InputPortMap	      "u0"
	      UpperLimit	      "max(fc_map_spd)*fc_spd_scale"
	      LowerLimit	      "vc_idle_spd*vc_idle_bool"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "1071"
	      Position		      [325, 465, 355, 495]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "1072"
	      Position		      [515, 475, 545, 505]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch\ndisengaged"
	      SID		      "1073"
	      Ports		      [2, 1]
	      Position		      [110, 192, 140, 223]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch\nslipping\nor engaged"
	      SID		      "1074"
	      Ports		      [2, 1]
	      Position		      [195, 32, 225, 63]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "key_on"
	      SID		      "1075"
	      Ports		      [0, 1]
	      Position		      [310, 91, 355, 119]
	      NamePlacement	      "alternate"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Repeating table"
	      MaskDescription	      "Repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table. Time values should be monotonically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "vc_key_on(:,1)|vc_key_on(:,2)"
	      System {
		Name			"key_on"
		Location		[5, 40, 315, 196]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "1076"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "1077"
		  Position		  [110, 60, 150, 80]
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "1078"
		  Position		  [210, 58, 250, 82]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "1079"
		  Position		  [285, 60, 305, 80]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  DstBlock		  "Fcn1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "moving next\ntime"
	      SID		      "1080"
	      Ports		      [2, 1]
	      Position		      [140, 427, 170, 458]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "not\nmoving"
	      SID		      "1081"
	      Ports		      [2, 1]
	      Position		      [110, 302, 140, 333]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "repeated cycle:\n speed required at\nend of NEXT step"
	      SID		      "1082"
	      Ports		      [0, 1]
	      Position		      [35, 402, 70, 438]
	      ForegroundColor	      "green"
	      FontName		      "Arial"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Forward looking repeating table"
	      MaskDescription	      "Forward looking repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table with a one time step forward offset. Time values should be monoto"
	      "nically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "cyc_mph(:,1)|cyc_mph(:,2)"
	      System {
		Name			"repeated cycle:\n speed required at\nend of NEXT step"
		Location		[59, 74, 434, 236]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "1083"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "1084"
		  Position		  [110, 25, 150, 45]
		  ForegroundColor	  "green"
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "1085"
		  Position		  [260, 33, 300, 57]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "1086"
		  Position		  [90, 85, 120, 115]
		  ForegroundColor	  "green"
		  X0			  "-0.1"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "1087"
		  Ports			  [2, 1]
		  Position		  [150, 62, 180, 93]
		  ForegroundColor	  "green"
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "1088"
		  Ports			  [2, 1]
		  Position		  [205, 26, 235, 59]
		  ForegroundColor	  "green"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "1089"
		  Position		  [335, 35, 355, 55]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0; 0, -15]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [0, -35]
		    DstBlock		    "Fcn1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "engine on"
	      SID		      "1090"
	      Position		      [550, 133, 580, 147]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "spd command\n (rad/s)"
	      SID		      "1091"
	      Position		      [580, 483, 610, 497]
	      NamePlacement	      "alternate"
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "key on"
	      SID		      "1092"
	      Position		      [550, 53, 580, 67]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "clutch\ndisengaged"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "not\nmoving"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "moving next\ntime"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "clutch state"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		Points			[0, 160]
		DstBlock		"clutch\ndisengaged"
		DstPort			1
	      }
	      Branch {
		DstBlock		"clutch\nslipping\nor engaged"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [0, -20]
	      DstBlock		      "clutch\nslipping\nor engaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping\nor engaged"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator7"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Logical\nOperator7"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator7"
	      SrcPort		      1
	      Points		      [0, -35]
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      DstBlock		      "moving next\ntime"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "repeated cycle:\n speed required at\nend of NEXT step"
	      SrcPort		      1
	      Points		      [0, 15]
	      DstBlock		      "moving next\ntime"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "v_ave_req"
	      SrcPort		      1
	      DstBlock		      "not\nmoving"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      Points		      [10, 0; 0, -10]
	      DstBlock		      "not\nmoving"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator8"
	      SrcPort		      1
	      Points		      [0, 160]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "fc_spd_out_r"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0; 0, 35]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator3"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"engine on"
		DstPort			1
	      }
	      Branch {
		Points			[0, 90]
		Branch {
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 260]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "spd command\n (rad/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "key_on"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[5, 0]
		DstBlock		"Logical\nOperator1"
		DstPort			1
	      }
	      Branch {
		Points			[0, -45]
		DstBlock		"key on"
		DstPort			1
	      }
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "front and rear\nbrake controller\n(achievable)"
	  SID			  "1093"
	  Ports			  [6, 2]
	  Position		  [190, 416, 225, 544]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/front and rear\nbrake controller\n(achievable)"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "gearbox\n control"
	  SID			  "1094"
	  Ports			  [4, 3]
	  Position		  [640, 89, 675, 236]
	  FontName		  "Arial"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "gearbox\n control"
	    Location		    [-36, 77, 951, 745]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_out_r"
	      SID		      "1095"
	      Position		      [45, 130, 65, 150]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_out_r"
	      SID		      "1096"
	      Position		      [45, 255, 65, 275]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "prev.\nPout/Pin"
	      SID		      "1097"
	      Position		      [45, 20, 65, 40]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "tires are at\ntraction limit"
	      SID		      "1098"
	      Position		      [45, 75, 65, 95]
	      FontName		      "Arial"
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "1099"
	      Ports		      []
	      Position		      [855, 590, 911, 630]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[229, 259, 687, 388]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "1100"
		  Name			  "This gearbox control block computes the current gear number given the gearbox's\nreq'd output torque and"
		  " speed and an estimate its efficiency.  Upshifts occur, given a\ncertain engine speed,  when the estimated engine "
		  "load falls below the upshift curve\nin engine speed/load space, and downshifts likewise occur when estimated engin"
		  "e\nload rises above the downshift curve.  Separate upshift and downshift curves are\ndefined for each gear.  An up"
		  "shift may not be immediately followed by a downshift.\nIf the tires are about to slip, don't upshift unless the en"
		  "gine would be at max. speed.\nEnforce this rule by setting the load to 1 when the tires are about to slip."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "1101"
	      Position		      [370, 95, 390, 115]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant14"
	      SID		      "1102"
	      Position		      [435, 573, 530, 587]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant15"
	      SID		      "1103"
	      Position		      [365, 438, 460, 452]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      SID		      "1104"
	      Ports		      [1, 2]
	      Position		      [705, 426, 710, 464]
	      BackgroundColor	      "black"
	      ShowName		      off
	      Outputs		      "2"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn"
	      SID		      "1105"
	      Position		      [155, 20, 185, 40]
	      FontName		      "Arial"
	      Expr		      "1/u"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn1"
	      SID		      "1106"
	      Position		      [85, 180, 115, 200]
	      BlockRotation	      270
	      FontName		      "Arial"
	      Expr		      "1/u"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      SID		      "1107"
	      Position		      [535, 545, 660, 565]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <logic>2"
	      SID		      "1108"
	      Position		      [15, 499, 120, 531]
	      ForegroundColor	      "red"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "v_req_limited"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      SID		      "1109"
	      Position		      [535, 605, 660, 625]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From2"
	      SID		      "1110"
	      Position		      [475, 465, 600, 485]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From3"
	      SID		      "1111"
	      Position		      [475, 490, 600, 510]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From4"
	      SID		      "1112"
	      Position		      [475, 400, 600, 420]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      SID		      "1113"
	      Position		      [530, 242, 555, 268]
	      FontName		      "Arial"
	      Gain		      "-1"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto1"
	      SID		      "1114"
	      Position		      [240, 490, 360, 510]
	      NamePlacement	      "alternate"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto2"
	      SID		      "1115"
	      Position		      [240, 514, 360, 536]
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto3"
	      SID		      "1116"
	      Position		      [815, 245, 950, 265]
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto4"
	      SID		      "1117"
	      Position		      [835, 95, 945, 115]
	      NamePlacement	      "alternate"
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto5"
	      SID		      "1118"
	      Position		      [835, 170, 945, 190]
	      NamePlacement	      "alternate"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "1119"
	      Ports		      [2, 1]
	      Position		      [620, 462, 625, 513]
	      ShowName		      off
	      Inputs		      "2"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      SID		      "1120"
	      Ports		      [2, 1]
	      Position		      [265, 142, 295, 173]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      SID		      "1121"
	      Ports		      [2, 1]
	      Position		      [575, 238, 595, 262]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      RateLimiter
	      Name		      "Rate Limiter"
	      SID		      "1122"
	      Position		      [475, 312, 505, 338]
	      BlockMirror	      on
	      RisingSlewLimit	      "1/(gb_shift_delay+eps)"
	      FallingSlewLimit	      "-1/(gb_shift_delay+eps)"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "1123"
	      Ports		      [1, 1]
	      Position		      [90, 20, 120, 40]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "0.2"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation1"
	      SID		      "1124"
	      Ports		      [1, 1]
	      Position		      [725, 96, 745, 114]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "gb_gears_num"
	      LowerLimit	      "1"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Speed Dependent Shifting"
	      SID		      "1125"
	      Ports		      [1, 2]
	      Position		      [165, 487, 195, 538]
	      SourceBlock	      "lib_controls/SubSystem/Speed Dependent Shifting"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "off"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "1126"
	      Position		      [365, 135, 395, 165]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch2"
	      SID		      "1127"
	      Position		      [680, 565, 710, 595]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch3"
	      SID		      "1128"
	      Position		      [650, 430, 680, 460]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "accessories\n(Nm)"
	      SID		      "1129"
	      Ports		      [0, 1]
	      Position		      [150, 192, 180, 228]
	      ForegroundColor	      "magenta"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"accessories\n(Nm)"
		Location		[306, 375, 532, 495]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  From
		  Name			  "From <fc>"
		  SID			  "1130"
		  Position		  [30, 29, 120, 61]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "fc_acc_trq_r"
		}
		Block {
		  BlockType		  Outport
		  Name			  "T_acc"
		  SID			  "1131"
		  Position		  [145, 35, 165, 55]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "From <fc>"
		  SrcPort		  1
		  DstBlock		  "T_acc"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "allow downshift?"
	      SID		      "1132"
	      Ports		      [1, 1]
	      Position		      [475, 42, 505, 78]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"allow downshift?"
		Location		[330, 267, 819, 482]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gearnum"
		  SID			  "1133"
		  Position		  [35, 35, 55, 55]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  SID			  "1134"
		  Ports			  [2, 1]
		  Position		  [375, 43, 405, 67]
		  FontName		  "Arial"
		  Operator		  "NOR"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "1135"
		  Position		  [145, 60, 180, 80]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "1136"
		  Position		  [145, 105, 180, 125]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "1137"
		  Ports			  [2, 1]
		  Position		  [225, 38, 255, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator2"
		  SID			  "1138"
		  Ports			  [2, 1]
		  Position		  [225, 98, 255, 122]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  Outport
		  Name			  "allow shift"
		  SID			  "1139"
		  Position		  [445, 45, 465, 65]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  DstBlock		  "allow shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gearnum"
		  SrcPort		  1
		  Points		  [45, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 25]
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 35]
		    DstBlock		    "Relational\nOperator2"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [15, 0; 0, -15]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 30; -60, 0]
		    DstBlock		    "Memory1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator2"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical\nOperator"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "current\ngear\nnumber"
	      SID		      "1140"
	      Ports		      [2, 1]
	      Position		      [670, 87, 690, 123]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "delta\ngear\nnumber"
	      SID		      "1141"
	      Position		      [615, 144, 645, 176]
	      FontName		      "Arial"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "downshift \ncommand"
	      SID		      "1142"
	      Ports		      [3, 1]
	      Position		      [470, 229, 500, 281]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"downshift \ncommand"
		Location		[433, 370, 908, 665]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "1143"
		  Position		  [45, 98, 75, 112]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "1144"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "1145"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "1146"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "1147"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "1148"
		  Ports			  [1, 1]
		  Position		  [240, 100, 270, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_dnshift_spd|gb_dnshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "1149"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "1150"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "1151"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "1152"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [55, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "engine\ntorque\ncapability"
	      SID		      "1153"
	      Position		      [310, 210, 340, 230]
	      BlockMirror	      on
	      FontName		      "Arial"
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      Table		      "fc_max_trq*fc_trq_scale+eps"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "est eng\ntrq"
	      SID		      "1154"
	      Ports		      [2, 1]
	      Position		      [205, 142, 225, 178]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "gb_spd_in_r"
	      SID		      "1155"
	      Ports		      [2, 1]
	      Position		      [150, 258, 170, 282]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio"
	      SID		      "1156"
	      Position		      [400, 313, 430, 337]
	      BlockMirror	      on
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      Table		      "gb_ratio"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio1"
	      SID		      "1157"
	      Position		      [780, 93, 810, 117]
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      Table		      "gb_ratio"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "gearbox speed\nestimator"
	      SID		      "1158"
	      Ports		      [1, 1]
	      Position		      [220, 255, 250, 285]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"gearbox speed\nestimator"
		Location		[224, 221, 812, 730]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_in_r\nif no gear change"
		  SID			  "1159"
		  Position		  [45, 18, 75, 32]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "1160"
		  Ports			  []
		  Position		  [515, 345, 571, 385]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [497, 485, 832, 570]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "1161"
		    Name		    "The requested engine speed is replaced by an estimate of the\nengine's previous speed whenever the ve"
		    "hicle missed the trace\n by more than 1 mph on the last time step."
		    Position		    [167, 41]
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "1162"
		  Position		  [165, 240, 185, 260]
		  BlockMirror		  on
		  Value			  "eps"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "1163"
		  Position		  [315, 165, 335, 185]
		  BlockMirror		  on
		  Value			  "0"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "1164"
		  Position		  [230, 360, 250, 380]
		  BlockMirror		  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "1165"
		  Position		  [230, 461, 265, 479]
		  BlockMirror		  on
		  Value			  "0.11"
		}
		Block {
		  BlockType		  From
		  Name			  "From"
		  SID			  "1166"
		  Position		  [195, 40, 285, 70]
		  BlockMirror		  on
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "gb_spd_in_a"
		}
		Block {
		  BlockType		  From
		  Name			  "From <cyc>"
		  SID			  "1167"
		  Position		  [30, 304, 120, 336]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "cyc_mph_r"
		}
		Block {
		  BlockType		  From
		  Name			  "From <veh>"
		  SID			  "1168"
		  Position		  [30, 99, 85, 131]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "mpha"
		}
		Block {
		  BlockType		  From
		  Name			  "From <wh>/\ntire slip model (m/s)"
		  SID			  "1169"
		  Position		  [30, 184, 120, 216]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "veh_spd_a_rec"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  SID			  "1170"
		  Position		  [150, 97, 190, 133]
		  Gain			  "0.447"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical"
		  SID			  "1171"
		  Ports			  [2, 1]
		  Position		  [375, 317, 405, 348]
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "1172"
		  Position		  [370, 110, 400, 140]
		  X0			  "cyc_mph(1,2)*0.447/wh_radius*fd_ratio*gb_ratio(gb_num_init)"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "1173"
		  Position		  [310, 310, 340, 340]
		  X0			  "1"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "1174"
		  Ports			  [3, 1]
		  Position		  [215, 99, 245, 131]
		  Inputs		  "**/"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational"
		  SID			  "1175"
		  Ports			  [2, 1]
		  Position		  [225, 307, 255, 338]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational1"
		  SID			  "1176"
		  Ports			  [2, 1]
		  Position		  [225, 412, 255, 443]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "1177"
		  Ports			  [2, 1]
		  Position		  [160, 192, 190, 223]
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "1178"
		  Ports			  [2, 1]
		  Position		  [160, 297, 190, 328]
		  Inputs		  "-+"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "1179"
		  Position		  [310, 110, 340, 140]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "1180"
		  Position		  [445, 120, 475, 150]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "dt"
		  SID			  "1181"
		  Ports			  [0, 1]
		  Position		  [165, 408, 185, 432]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "dt"
		    Location		    [240, 561, 480, 665]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "1182"
		    Position		    [25, 25, 45, 45]
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "1183"
		    Position		    [75, 53, 105, 77]
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum4"
		    SID			    "1184"
		    Ports		    [2, 1]
		    Position		    [130, 27, 160, 58]
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "1185"
		    Position		    [185, 38, 215, 52]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Sum4"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Sum4"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Sum4"
		    DstPort		    1
		    }
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  SID			  "1186"
		  Position		  [545, 128, 575, 142]
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Product"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  Labels		  [1, 0]
		  SrcBlock		  "From <wh>/\ntire slip model (m/s)"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -25; 155, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <cyc>"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <veh>"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    DstBlock		    "Gain"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 190]
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Relational"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gb_spd_in_r\nif no gear change"
		  SrcPort		  1
		  Points		  [350, 0]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "From"
		  SrcPort		  1
		  Points		  [0, 50]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational1"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Logical"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical"
		  SrcPort		  1
		  Points		  [10, 0; 0, -200]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "dt"
		  SrcPort		  1
		  DstBlock		  "Relational1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "load=T/\n(maxT\nat spd)"
	      SID		      "1187"
	      Ports		      [1, 1]
	      Position		      [315, 151, 335, 169]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "0"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev gear\nnumber"
	      SID		      "1188"
	      Position		      [690, 20, 730, 40]
	      BlockMirror	      on
	      FontName		      "Arial"
	      X0		      "gb_num_init"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev gear\nratio"
	      SID		      "1189"
	      Position		      [305, 315, 340, 335]
	      BlockMirror	      on
	      FontName		      "Arial"
	      X0		      "gb_ratio(gb_num_init)"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "shifting1"
	      SID		      "1190"
	      Ports		      [1, 1]
	      Position		      [780, 164, 810, 196]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"shifting1"
		Location		[164, 210, 454, 401]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gear\nnumber"
		  SID			  "1191"
		  Position		  [15, 50, 35, 70]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "1192"
		  Position		  [20, 131, 120, 159]
		  FontName		  "Arial"
		  Value			  "gb_shift_delay-1e-6"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "1193"
		  Ports			  [2, 1]
		  Position		  [185, 53, 215, 77]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "time since last shift"
		  SID			  "1194"
		  Ports			  [1, 1]
		  Position		  [65, 43, 125, 77]
		  ShowName		  off
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('time since\\nlast shift')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "time since last shift"
		    Location		    [16, 396, 306, 535]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "1195"
		    Position		    [10, 60, 30, 80]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "just shifted"
		    SID			    "1196"
		    Ports		    [1, 1]
		    Position		    [60, 57, 110, 83]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('just\\nshifted')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "just shifted"
		    Location		    [140, 214, 463, 359]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "1197"
		    Position		    [55, 55, 75, 75]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "1198"
		    Position		    [120, 55, 155, 75]
		    FontName		    "Arial"
		    X0			    "1"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    SID			    "1199"
		    Ports		    [2, 1]
		    Position		    [190, 58, 220, 82]
		    FontName		    "Arial"
		    Operator		    "~="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "1200"
		    Position		    [250, 60, 270, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, 30; 75, 0; 0, -20]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "timer"
		    SID			    "1201"
		    Ports		    [1, 1]
		    Position		    [140, 55, 175, 85]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('timer')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "timer"
		    Location		    [455, 179, 859, 394]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "trigger"
		    SID			    "1202"
		    Position		    [15, 125, 35, 145]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "1203"
		    Position		    [100, 100, 120, 120]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant1"
		    SID			    "1204"
		    Position		    [100, 150, 120, 170]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant2"
		    SID			    "1205"
		    Position		    [150, 5, 170, 25]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "1206"
		    Position		    [265, 59, 295, 91]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "no-lag\nReset Integrator"
		    SID			    "1207"
		    Ports		    [3, 1]
		    Position		    [155, 96, 205, 174]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskType		    "No-lag Reset Integrator"
		    MaskDescription	    "No-lag Reset Integrator"
		    MaskHelp		    "Integrates first input using Euler technique.\\nAt the time step that input 2 <> zero,\\noutput i"
		    "s reset to input 3."
		    MaskPromptString	    "Initial Value"
		    MaskStyleString	    "edit"
		    MaskVariables	    "initval=@1;"
		    MaskTunableValueString  "on"
		    MaskEnableString	    "on"
		    MaskVisibilityString    "on"
		    MaskToolTipString	    "on"
		    MaskDisplay		    "disp('1/s\\nw/ reset\\nno lag')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "15"
		    System {
		    Name		    "no-lag\nReset Integrator"
		    Location		    [258, 616, 780, 880]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "1208"
		    Position		    [60, 100, 80, 120]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    SID			    "1209"
		    Position		    [60, 140, 80, 160]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_3"
		    SID			    "1210"
		    Position		    [45, 185, 65, 205]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "1211"
		    Position		    [125, 205, 145, 225]
		    BlockRotation	    270
		    NamePlacement	    "alternate"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "1212"
		    Position		    [340, 55, 375, 75]
		    BlockMirror		    on
		    FontName		    "Arial"
		    X0			    "initval"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    SID			    "1213"
		    Ports		    [2, 1]
		    Position		    [160, 96, 180, 114]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    SID			    "1214"
		    Ports		    [2, 1]
		    Position		    [230, 90, 250, 110]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "1215"
		    Position		    [290, 139, 320, 171]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "dt"
		    SID			    "1216"
		    Ports		    [0, 1]
		    Position		    [112, 50, 138, 80]
		    BlockRotation	    270
		    BlockMirror		    on
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "dt"
		    Location		    [80, 285, 429, 424]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "1217"
		    Position		    [65, 60, 85, 80]
		    FontName		    "Arial"
		    FontSize		    8
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "1218"
		    Position		    [125, 85, 160, 105]
		    FontName		    "Arial"
		    FontSize		    8
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    SID			    "1219"
		    Ports		    [2, 1]
		    Position		    [205, 65, 225, 85]
		    FontName		    "Arial"
		    FontSize		    8
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "1220"
		    Position		    [255, 65, 275, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [10, 0; 0, -15]
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "in_2==0"
		    SID			    "1221"
		    Ports		    [2, 1]
		    Position		    [160, 143, 190, 167]
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "1222"
		    Position		    [455, 145, 475, 165]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_3"
		    SrcPort		    1
		    Points		    [200, 0; 0, -30]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "in_2==0"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "dt"
		    SrcPort		    1
		    Points		    [0, 15]
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    Points		    [-130, 0; 0, 30]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    Points		    [10, 0; 0, 45]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    Points		    [85, 0]
		    Branch {
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -90]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "in_2==0"
		    SrcPort		    1
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    Points		    [0, -40]
		    DstBlock		    "in_2==0"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "time"
		    SID			    "1223"
		    Position		    [350, 65, 370, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    DstBlock		    "time"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "trigger"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, -60]
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Constant2"
		    SrcPort		    1
		    Points		    [35, 0; 0, 50]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant1"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "no-lag\nReset Integrator"
		    SrcPort		    1
		    Points		    [35, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "1224"
		    Position		    [225, 60, 245, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "just shifted"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "just shifted"
		    SrcPort		    1
		    DstBlock		    "timer"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "timer"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "1225"
		  Position		  [250, 55, 270, 75]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gear\nnumber"
		  SrcPort		  1
		  DstBlock		  "time since last shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [15, 0; 0, -75]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "time since last shift"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "upshift\n command"
	      SID		      "1226"
	      Ports		      [3, 1]
	      Position		      [470, 124, 500, 176]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"upshift\n command"
		Location		[326, 353, 801, 648]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "1227"
		  Position		  [45, 103, 75, 117]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "1228"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "1229"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "1230"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "1231"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "1232"
		  Ports			  [1, 1]
		  Position		  [245, 100, 275, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_upshift_spd|gb_upshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "1233"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "1234"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "1235"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "1236"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [50, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Product
	      Name		      "~gb_trq_in_r"
	      SID		      "1237"
	      Ports		      [3, 1]
	      Position		      [150, 132, 170, 168]
	      FontName		      "Arial"
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear ratio, out"
	      SID		      "1238"
	      Position		      [775, 410, 795, 430]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "shifting, out"
	      SID		      "1239"
	      Position		      [775, 455, 795, 475]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear number, out"
	      SID		      "1240"
	      Position		      [775, 570, 795, 590]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "current\ngear\nnumber"
	      SrcPort		      1
	      DstBlock		      "Saturation1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Fcn"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "prev.\nPout/Pin"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gb_trq_out_r"
	      SrcPort		      1
	      DstBlock		      "~gb_trq_in_r"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "upshift\n command"
	      SrcPort		      1
	      Points		      [95, 0]
	      Branch {
		DstBlock		"delta\ngear\nnumber"
		DstPort			1
	      }
	      Branch {
		DstBlock		"delta\ngear\nnumber"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "downshift \ncommand"
	      SrcPort		      1
	      DstBlock		      "Gain1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Fcn1"
	      SrcPort		      1
	      Points		      [0, -15]
	      DstBlock		      "~gb_trq_in_r"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "engine\ntorque\ncapability"
	      SrcPort		      1
	      Points		      [-55, 0]
	      DstBlock		      "Product2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Fcn"
	      SrcPort		      1
	      Points		      [10, 0; 0, 85; -75, 0; 0, 35]
	      DstBlock		      "~gb_trq_in_r"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Saturation1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, 0]
		Branch {
		  Points		  [0, -75]
		  DstBlock		  "prev gear\nnumber"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "gear ratio1"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[0, 75]
		Branch {
		  Points		  [0, 75]
		  Branch {
		    DstBlock		    "Goto3"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 70]
		    DstBlock		    "Rate Limiter"
		    DstPort		    1
		  }
		}
		Branch {
		  DstBlock		  "shifting1"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "prev gear\nnumber"
	      SrcPort		      1
	      Points		      [-35, 0]
	      Branch {
		Points			[-210, 0; 0, 30]
		Branch {
		  DstBlock		  "allow downshift?"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 75]
		  Branch {
		    DstBlock		    "upshift\n command"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 105]
		    DstBlock		    "downshift \ncommand"
		    DstPort		    1
		  }
		}
	      }
	      Branch {
		Points			[0, 65]
		DstBlock		"current\ngear\nnumber"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "load=T/\n(maxT\nat spd)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "tires are at\ntraction limit"
	      SrcPort		      1
	      Points		      [265, 0; 0, 65]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Rate Limiter"
	      SrcPort		      1
	      DstBlock		      "gear ratio"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gb_spd_out_r"
	      SrcPort		      1
	      DstBlock		      "gb_spd_in_r"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gb_spd_in_r"
	      SrcPort		      1
	      DstBlock		      "gearbox speed\nestimator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gear ratio"
	      SrcPort		      1
	      DstBlock		      "prev gear\nratio"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "prev gear\nratio"
	      SrcPort		      1
	      Points		      [-200, 0; 0, -50]
	      Branch {
		DstBlock		"gb_spd_in_r"
		DstPort			2
	      }
	      Branch {
		DstBlock		"Fcn1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      DstBlock		      "Product3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      DstBlock		      "delta\ngear\nnumber"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "allow downshift?"
	      SrcPort		      1
	      Points		      [50, 0]
	      DstBlock		      "Product3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "~gb_trq_in_r"
	      SrcPort		      1
	      DstBlock		      "est eng\ntrq"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "accessories\n(Nm)"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "est eng\ntrq"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "est eng\ntrq"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Product2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "load=T/\n(maxT\nat spd)"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      Labels		      [1, 0]
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		DstBlock		"upshift\n command"
		DstPort			2
	      }
	      Branch {
		Points			[0, 105]
		DstBlock		"downshift \ncommand"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "delta\ngear\nnumber"
	      SrcPort		      1
	      Points		      [0, -45]
	      DstBlock		      "current\ngear\nnumber"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gearbox speed\nestimator"
	      SrcPort		      1
	      Points		      [115, 0]
	      Branch {
		Points			[0, -50]
		DstBlock		"engine\ntorque\ncapability"
		DstPort			1
	      }
	      Branch {
		Points			[50, 0]
		Branch {
		  DstBlock		  "downshift \ncommand"
		  DstPort		  3
		}
		Branch {
		  Points		  [0, -105]
		  DstBlock		  "upshift\n command"
		  DstPort		  3
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Constant15"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From4"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Switch3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Switch3"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From2"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From3"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch3"
	      SrcPort		      1
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "gear ratio, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      Points		      [45, 0]
	      DstBlock		      "shifting, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch2"
	      SrcPort		      1
	      DstBlock		      "gear number, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant14"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From <logic>2"
	      SrcPort		      1
	      DstBlock		      "Speed Dependent Shifting"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      1
	      DstBlock		      "Goto1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      2
	      DstBlock		      "Goto2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gear ratio1"
	      SrcPort		      1
	      DstBlock		      "Goto4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "shifting1"
	      SrcPort		      1
	      DstBlock		      "Goto5"
	      DstPort		      1
	    }
	    Annotation {
	      SID		      "1241"
	      Name		      "gear ratio and shifting pre-muxed"
	      Position		      [524, 387]
	    }
	    Annotation {
	      SID		      "1242"
	      Name		      "output changes depending\nupon whether speed\ndependent shifting is used"
	      Position		      [875, 530]
	    }
	    Annotation {
	      SID		      "1243"
	      Name		      "default gear number\ncalculation"
	      Position		      [889, 299]
	    }
	    Annotation {
	      SID		      "1244"
	      Name		      "default gear ratio\ncalculation"
	      Position		      [897, 134]
	    }
	    Annotation {
	      SID		      "1245"
	      Name		      "local GOTO blocks:"
	      Position		      [887, 67]
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "sim stop\nsubsystem"
	  SID			  "1246"
	  Ports			  []
	  Position		  [50, 25, 80, 75]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/sim stop\nsubsystem"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  Outport
	  Name			  "clutch\nstate"
	  SID			  "1247"
	  Position		  [725, 323, 755, 337]
	  IconDisplay		  "Port number"
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>5"
	  SrcPort		  1
	  Points		  [0, -5]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "From<wh>4"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <wh>3"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <wh>2"
	  SrcPort		  1
	  Points		  [0, 10]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>6"
	  SrcPort		  1
	  Points		  [45, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>2"
	  SrcPort		  1
	  DstBlock		  "gearbox\n control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <gb>1"
	  SrcPort		  1
	  DstBlock		  "gearbox\n control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From<gb>"
	  SrcPort		  1
	  DstBlock		  "gearbox\n control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>3"
	  SrcPort		  1
	  DstBlock		  "gearbox\n control"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  3
	  Points		  [0, 10]
	  DstBlock		  "Goto <wh>2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  2
	  Points		  [0, 5]
	  DstBlock		  "Goto <wh>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <veh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>5"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  1
	  Points		  [0, 5; 10, 0]
	  Branch {
	    DstBlock		    "braking strategy"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [145, 0]
	    Branch {
	      Points		      [0, -35]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Branch {
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  2
	  Points		  [125, 0]
	  Branch {
	    DstBlock		    "Sum"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -75]
	    DstBlock		    "Goto <wh>8"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "From <wh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Relational\nOperator"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>7"
	  SrcPort		  1
	  DstBlock		  "Relational\nOperator"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <wh>1"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>8"
	  SrcPort		  1
	  DstBlock		  "braking strategy"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>4"
	  SrcPort		  1
	  DstBlock		  "clutch\ncontrol"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <gb>5"
	  SrcPort		  1
	  DstBlock		  "clutch\ncontrol"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "clutch\ncontrol"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    DstBlock		    "Goto <sdo>"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "clutch\nstate"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "From <gb>6"
	  SrcPort		  1
	  Points		  [10, 0]
	  DstBlock		  "clutch\ncontrol"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <fc>"
	  SrcPort		  1
	  DstBlock		  "engine\ncontrol"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "engine\ncontrol"
	  SrcPort		  2
	  DstBlock		  "Goto <fc>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "engine\ncontrol"
	  SrcPort		  1
	  DstBlock		  "Goto <fc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "engine\ncontrol"
	  SrcPort		  3
	  Points		  [5, 0]
	  DstBlock		  "Goto <fc><mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>4"
	  SrcPort		  1
	  Points		  [15, 0]
	  DstBlock		  "engine\ncontrol"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <fc>1"
	  SrcPort		  1
	  Points		  [15, 0]
	  DstBlock		  "engine\ncontrol"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <fc>2"
	  SrcPort		  1
	  Points		  [15, 0]
	  DstBlock		  "engine\ncontrol"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox\n control"
	  SrcPort		  3
	  DstBlock		  "Goto"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox\n control"
	  SrcPort		  2
	  DstBlock		  "Goto <gb>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox\n control"
	  SrcPort		  1
	  DstBlock		  "Goto <gb>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  4
	  Points		  [10, 0]
	  DstBlock		  "Goto <wh>6"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  5
	  Points		  [5, 0]
	  DstBlock		  "Goto <wh>7"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Ground"
	  SrcPort		  1
	  Points		  [0, -55]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  6
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "<vc> conv auto"
      SID		      "300"
      Ports		      []
      Position		      [182, 48, 244, 101]
      BackgroundColor	      "yellow"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_vc.jpg'))\n"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"<vc> conv auto"
	Location		[182, 94, 994, 700]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"100"
	Block {
	  BlockType		  Constant
	  Name			  "Constant"
	  SID			  "1248"
	  Position		  [590, 370, 610, 390]
	  Value			  "3"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>"
	  SID			  "1249"
	  Position		  [500, 485, 595, 505]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_spd_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>1"
	  SID			  "1250"
	  Position		  [500, 450, 595, 470]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "clutch_state"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>2"
	  SID			  "1251"
	  Position		  [500, 415, 595, 435]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>1"
	  SID			  "1252"
	  Position		  [505, 255, 600, 275]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>2"
	  SID			  "1253"
	  Position		  [505, 196, 600, 214]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "eta_gb"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>3"
	  SID			  "1254"
	  Position		  [505, 295, 600, 315]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "slip_limited"
	}
	Block {
	  BlockType		  From
	  Name			  "From <veh>"
	  SID			  "1255"
	  Position		  [30, 162, 105, 178]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_prev"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>"
	  SID			  "1256"
	  Position		  [20, 195, 80, 215]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>1"
	  SID			  "1257"
	  Position		  [20, 126, 105, 144]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>2"
	  SID			  "1258"
	  Position		  [50, 422, 160, 438]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_drivetrain_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>3"
	  SID			  "1259"
	  Position		  [55, 456, 155, 474]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_wheel_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>4"
	  SID			  "1260"
	  Position		  [50, 380, 110, 400]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>5"
	  SID			  "1261"
	  Position		  [50, 516, 170, 534]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_rear_brake"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>6"
	  SID			  "1262"
	  Position		  [500, 516, 585, 534]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>7"
	  SID			  "1263"
	  Position		  [135, 26, 220, 44]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>8"
	  SID			  "1264"
	  Position		  [370, 140, 430, 160]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From<gb>"
	  SID			  "1265"
	  Position		  [505, 230, 600, 250]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From<wh>4"
	  SID			  "1266"
	  Position		  [50, 481, 165, 499]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_front_brake"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>"
	  SID			  "1267"
	  Position		  [695, 443, 765, 467]
	  NamePlacement		  "alternate"
	  GotoTag		  "engine_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>1"
	  SID			  "1268"
	  Position		  [685, 473, 775, 497]
	  GotoTag		  "spd_command"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc><mc>"
	  SID			  "1269"
	  Position		  [705, 516, 755, 534]
	  GotoTag		  "key_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>"
	  SID			  "1270"
	  Position		  [700, 234, 775, 256]
	  GotoTag		  "gear_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>1"
	  SID			  "1271"
	  Position		  [720, 275, 775, 295]
	  GotoTag		  "shifting"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <htc>"
	  SID			  "1272"
	  Position		  [700, 312, 775, 328]
	  GotoTag		  "locked_up"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <htc>1"
	  SID			  "1273"
	  Position		  [700, 204, 775, 226]
	  NamePlacement		  "alternate"
	  GotoTag		  "gear_number"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>"
	  SID			  "1274"
	  Position		  [645, 369, 730, 391]
	  GotoTag		  "clutch_state"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>1"
	  SID			  "1275"
	  Position		  [560, 136, 645, 154]
	  GotoTag		  "slip_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>"
	  SID			  "1276"
	  Position		  [555, 60, 640, 80]
	  NamePlacement		  "alternate"
	  GotoTag		  "F_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>1"
	  SID			  "1277"
	  Position		  [180, 144, 270, 166]
	  GotoTag		  "v_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>2"
	  SID			  "1278"
	  Position		  [265, 171, 355, 189]
	  GotoTag		  "wt_front_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>3"
	  SID			  "1279"
	  Position		  [250, 426, 335, 444]
	  GotoTag		  "F_front_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>4"
	  SID			  "1280"
	  Position		  [250, 489, 335, 511]
	  GotoTag		  "F_rear_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>5"
	  SID			  "1281"
	  Position		  [290, 25, 400, 45]
	  GotoTag		  "F_front_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>6"
	  SID			  "1282"
	  Position		  [185, 191, 275, 209]
	  GotoTag		  "wt_rear_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>7"
	  SID			  "1283"
	  Position		  [210, 226, 300, 244]
	  GotoTag		  "front_traction_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>8"
	  SID			  "1284"
	  Position		  [490, 15, 600, 35]
	  GotoTag		  "F_rear_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Ground
	  Name			  "Ground"
	  SID			  "1285"
	  Position		  [140, 555, 160, 575]
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator"
	  SID			  "1286"
	  Ports			  [2, 1]
	  Position		  [505, 127, 535, 158]
	  Operator		  "~="
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  SID			  "1287"
	  Ports			  [2, 1]
	  Position		  [505, 52, 535, 83]
	  Inputs		  "-+"
	}
	Block {
	  BlockType		  Reference
	  Name			  "braking strategy"
	  SID			  "1288"
	  Ports			  [2, 2]
	  Position		  [245, 22, 275, 73]
	  NamePlacement		  "alternate"
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/braking strategy"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "config traction control"
	  SID			  "1289"
	  Ports			  [3, 5]
	  Position		  [125, 119, 160, 221]
	  BackgroundColor	  "darkGreen"
	  AttributesFormatString  "%<BlockChoice>"
	  ShowPortLabels	  "none"
	  BlockChoice		  "traction control 2 axle"
	  TemplateBlock		  "lib_controls/SubSystem/config traction control"
	  MemberBlocks		  "traction control 2 axle,traction control J2452 2 axle"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "config traction control"
	    Location		    [148, 182, 646, 482]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    SIDHighWatermark	    "6898"
	    Block {
	      BlockType		      Inport
	      Name		      "time-average\nvehicle speed\n req'd (m/s)"
	      SID		      "1289::706"
	      Position		      [20, 40, 40, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SID		      "1289::707"
	      Position		      [20, 80, 40, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "total tractive\nforce req'd\n(N)"
	      SID		      "1289::708"
	      Position		      [20, 120, 40, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "traction control\n2 axle"
	      SID		      "1289::709"
	      Ports		      [3, 5]
	      Position		      [100, 40, 140, 80]
	      BackgroundColor	      "darkGreen"
	      LibraryVersion	      "1.479"
	      SourceBlock	      "lib_controls/SubSystem/traction control 2 axle"
	      SourceType	      "SubSystem"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd force\n(N)"
	      SID		      "1289::710"
	      Position		      [200, 40, 220, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd speed\n(m/s)"
	      SID		      "1289::711"
	      Position		      [200, 80, 220, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nfront axle\n(N)"
	      SID		      "1289::712"
	      Position		      [200, 120, 220, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nrear axle\n(N)"
	      SID		      "1289::713"
	      Position		      [200, 160, 220, 180]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "front/total \ntraction ratio"
	      SID		      "1289::714"
	      Position		      [200, 200, 220, 220]
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "time-average\nvehicle speed\n req'd (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "total tractive\nforce req'd\n(N)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      1
	      DstBlock		      "req'd force\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      2
	      DstBlock		      "req'd speed\n(m/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      3
	      DstBlock		      "weight on\nfront axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      4
	      DstBlock		      "weight on\nrear axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      5
	      DstBlock		      "front/total \ntraction ratio"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "engine\ncontrol"
	  SID			  "1290"
	  Ports			  [4, 3]
	  Position		  [635, 434, 670, 531]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "engine\ncontrol"
	    Location		    [261, 145, 1157, 1059]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    281
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "1291"
	      Position		      [35, 168, 65, 182]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "clutch state"
	      SID		      "1292"
	      Position		      [35, 33, 65, 47]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "fc_spd_out_r"
	      SID		      "1293"
	      Position		      [40, 518, 70, 532]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "v_ave_req"
	      SID		      "1294"
	      Position		      [35, 333, 65, 347]
	      NamePlacement	      "alternate"
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "1295"
	      Ports		      []
	      Position		      [560, 355, 616, 395]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[156, 423, 612, 520]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "1296"
		  Name			  "This engine control block determines whether the engine is on, which it is when\n[(the clutch is slippin"
		  "g or engaged OR idling is allowed) AND the ignition key is on]\nOR\n(the transmission is shifting AND the engine w"
		  "as on during the previous time step).\nThe second part involving shifting is to prevent the engine from shutting d"
		  "own\nfor 1 or 2 seconds during shifts."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "1297"
	      Position		      [105, 70, 125, 90]
	      BlockRotation	      270
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Value		      "1.1"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "1298"
	      Position		      [125, 111, 200, 129]
	      ShowName		      off
	      Value		      "vc_idle_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "1299"
	      Position		      [315, 459, 395, 481]
	      BlockMirror	      on
	      ShowName		      off
	      Value		      "vc_launch_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "1300"
	      Position		      [55, 230, 75, 250]
	      NamePlacement	      "alternate"
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "1301"
	      Position		      [70, 355, 90, 375]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "1302"
	      Position		      [115, 430, 130, 450]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "1303"
	      Position		      [455, 535, 475, 555]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "1304"
	      Ports		      [2, 1]
	      Position		      [340, 91, 370, 124]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator2"
	      SID		      "1305"
	      Ports		      [2, 1]
	      Position		      [250, 96, 280, 129]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator3"
	      SID		      "1306"
	      Ports		      [2, 1]
	      Position		      [405, 101, 435, 134]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator7"
	      SID		      "1307"
	      Ports		      [2, 1]
	      Position		      [300, 165, 330, 200]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator8"
	      SID		      "1308"
	      Ports		      [3, 1]
	      Position		      [210, 324, 240, 376]
	      ShowName		      off
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "1309"
	      Position		      [400, 200, 430, 230]
	      BlockMirror	      on
	      NamePlacement	      "alternate"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "1310"
	      Ports		      [1, 1]
	      Position		      [400, 500, 430, 530]
	      InputPortMap	      "u0"
	      UpperLimit	      "max(fc_map_spd)*fc_spd_scale"
	      LowerLimit	      "vc_idle_spd*vc_idle_bool"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "1311"
	      Position		      [340, 500, 370, 530]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "1312"
	      Position		      [510, 507, 540, 553]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch\ndisengaged"
	      SID		      "1313"
	      Ports		      [2, 1]
	      Position		      [100, 217, 130, 248]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch\nslipping\nor engaged"
	      SID		      "1314"
	      Ports		      [2, 1]
	      Position		      [150, 32, 180, 63]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "key_on"
	      SID		      "1315"
	      Ports		      [0, 1]
	      Position		      [280, 57, 320, 83]
	      NamePlacement	      "alternate"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Repeating table"
	      MaskDescription	      "Repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table. Time values should be monotonically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "vc_key_on(:,1)|vc_key_on(:,2)"
	      System {
		Name			"key_on"
		Location		[5, 82, 315, 238]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "1316"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "1317"
		  Position		  [110, 60, 150, 80]
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "1318"
		  Position		  [210, 58, 250, 82]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "1319"
		  Position		  [285, 60, 305, 80]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  DstBlock		  "Fcn1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "moving next\ntime"
	      SID		      "1320"
	      Ports		      [2, 1]
	      Position		      [155, 412, 185, 443]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "not\nmoving"
	      SID		      "1321"
	      Ports		      [2, 1]
	      Position		      [115, 332, 145, 363]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "repeated cycle:\n speed required at\nend of NEXT step"
	      SID		      "1322"
	      Ports		      [0, 1]
	      Position		      [40, 397, 75, 433]
	      ForegroundColor	      "green"
	      FontName		      "Arial"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Forward looking repeating table"
	      MaskDescription	      "Forward looking repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table with a one time step forward offset. Time values should be monoto"
	      "nically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "cyc_mph(:,1)|cyc_mph(:,2)"
	      System {
		Name			"repeated cycle:\n speed required at\nend of NEXT step"
		Location		[59, 74, 434, 236]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "1323"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "1324"
		  Position		  [110, 25, 150, 45]
		  ForegroundColor	  "green"
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "1325"
		  Position		  [260, 33, 300, 57]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "1326"
		  Position		  [90, 85, 120, 115]
		  ForegroundColor	  "green"
		  X0			  "-0.1"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "1327"
		  Ports			  [2, 1]
		  Position		  [150, 62, 180, 93]
		  ForegroundColor	  "green"
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "1328"
		  Ports			  [2, 1]
		  Position		  [205, 26, 235, 59]
		  ForegroundColor	  "green"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "1329"
		  Position		  [335, 35, 355, 55]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -35]
		    DstBlock		    "Fcn1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0; 0, -15]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "engine on"
	      SID		      "1330"
	      Position		      [560, 113, 590, 127]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "spd command\n (rad/s)"
	      SID		      "1331"
	      Position		      [585, 523, 615, 537]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "key on"
	      SID		      "1332"
	      Position		      [560, 63, 590, 77]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "key_on"
	      SrcPort		      1
	      Points		      [0, 0]
	      Branch {
		DstBlock		"key on"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Logical\nOperator1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "spd command\n (rad/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator8"
	      SrcPort		      1
	      Points		      [15, 0; 0, 165]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "fc_spd_out_r"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0; 0, 35]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "moving next\ntime"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "repeated cycle:\n speed required at\nend of NEXT step"
	      SrcPort		      1
	      Points		      [60, 0]
	      DstBlock		      "moving next\ntime"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [-110, 0]
	      DstBlock		      "Logical\nOperator7"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator7"
	      SrcPort		      1
	      Points		      [50, 0; 0, -60]
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator7"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "moving next\ntime"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "not\nmoving"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\ndisengaged"
	      SrcPort		      1
	      Points		      [60, 0]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "not\nmoving"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "v_ave_req"
	      SrcPort		      1
	      DstBlock		      "not\nmoving"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator3"
	      SrcPort		      1
	      Points		      [40, 0]
	      Branch {
		DstBlock		"engine on"
		DstPort			1
	      }
	      Branch {
		Points			[0, 95]
		Branch {
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 315]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping\nor engaged"
	      SrcPort		      1
	      Points		      [50, 0]
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [0, -10]
	      DstBlock		      "clutch\nslipping\nor engaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch state"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, 185]
		DstBlock		"clutch\ndisengaged"
		DstPort			1
	      }
	      Branch {
		DstBlock		"clutch\nslipping\nor engaged"
		DstPort			1
	      }
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "front and rear\nbrake controller\n(achievable)"
	  SID			  "1333"
	  Ports			  [6, 2]
	  Position		  [195, 401, 230, 529]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/front and rear\nbrake controller\n(achievable)"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "gearbox control\nfor use w/ AT"
	  SID			  "1334"
	  Ports			  [4, 4]
	  Position		  [620, 204, 655, 316]
	  FontName		  "Arial"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "gearbox control\nfor use w/ AT"
	    Location		    [344, 74, 1167, 963]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "73"
	    Block {
	      BlockType		      Inport
	      Name		      "eta_gb"
	      SID		      "1335"
	      Position		      [45, 85, 65, 105]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_out_r"
	      SID		      "1336"
	      Position		      [45, 135, 65, 155]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_out_r"
	      SID		      "1337"
	      Position		      [45, 180, 65, 200]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "tires are at\ntraction limit"
	      SID		      "1338"
	      Position		      [45, 230, 65, 250]
	      FontName		      "Arial"
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "1339"
	      Ports		      []
	      Position		      [920, 555, 976, 595]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[430, 234, 888, 441]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "1340"
		  Name			  "This gearbox control block computes the current gear number given the gearbox's\nreq'd output torque and"
		  " speed and an estimate its efficiency.  Upshifts occur, given a\ncertain engine speed,  when the estimated engine "
		  "load falls below the upshift curve\nin engine speed/load space, and downshifts likewise occur when estimated engin"
		  "e\nload rises above the downshift curve.  Separate upshift and downshift curves are\ndefined for each gear.  An up"
		  "shift may not be immediately followed by a downshift.\nIf the tires are about to slip, don't upshift unless the en"
		  "gine would be at max. speed.\nEnforce this rule by setting the load to 1 when the tires are about to slip."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
		Annotation {
		  SID			  "1341"
		  Name			  "Lock-up of the HTC occurs when it is supposed to for the current gear, AND\nthe transmission isn't shift"
		  "ing, AND\nthe lockup wouldn't precipitate an immediate downshift."
		  Position		  [217, 162]
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "1342"
	      Position		      [385, 65, 405, 85]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "1343"
	      Position		      [225, 375, 245, 395]
	      BlockMirror	      on
	      Value		      "0.5"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant14"
	      SID		      "1344"
	      Position		      [460, 818, 555, 832]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant15"
	      SID		      "1345"
	      Position		      [390, 683, 485, 697]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "1346"
	      Position		      [385, 470, 405, 490]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      SID		      "1347"
	      Ports		      [1, 2]
	      Position		      [730, 671, 735, 709]
	      BackgroundColor	      "black"
	      ShowName		      off
	      Outputs		      "2"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      SID		      "1348"
	      Position		      [560, 790, 685, 810]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <logic>2"
	      SID		      "1349"
	      Position		      [40, 744, 145, 776]
	      ForegroundColor	      "red"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "v_req_limited"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      SID		      "1350"
	      Position		      [560, 850, 685, 870]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From2"
	      SID		      "1351"
	      Position		      [500, 710, 625, 730]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From3"
	      SID		      "1352"
	      Position		      [500, 735, 625, 755]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From4"
	      SID		      "1353"
	      Position		      [500, 645, 625, 665]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From5"
	      SID		      "1354"
	      Position		      [135, 425, 260, 445]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "shifting_out"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From6"
	      SID		      "1355"
	      Position		      [100, 255, 195, 275]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "gear_num_out"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      SID		      "1356"
	      Position		      [535, 207, 560, 233]
	      FontName		      "Arial"
	      Gain		      "-1"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto"
	      SID		      "1357"
	      Position		      [265, 735, 385, 755]
	      NamePlacement	      "alternate"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto1"
	      SID		      "1358"
	      Position		      [265, 759, 385, 781]
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto2"
	      SID		      "1359"
	      Position		      [760, 735, 880, 755]
	      GotoTag		      "shifting_out"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto3"
	      SID		      "1360"
	      Position		      [890, 45, 1025, 65]
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto4"
	      SID		      "1361"
	      Position		      [900, 110, 1010, 130]
	      NamePlacement	      "alternate"
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto5"
	      SID		      "1362"
	      Position		      [910, 285, 1020, 305]
	      NamePlacement	      "alternate"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto7"
	      SID		      "1363"
	      Position		      [815, 875, 935, 895]
	      GotoTag		      "gear_num_out"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "1364"
	      Ports		      [4, 1]
	      Position		      [665, 402, 695, 448]
	      Inputs		      "4"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "1365"
	      Ports		      [1, 1]
	      Position		      [310, 419, 340, 451]
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator2"
	      SID		      "1366"
	      Ports		      [1, 1]
	      Position		      [530, 506, 560, 544]
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "1367"
	      Position		      [600, 510, 630, 540]
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "1368"
	      Ports		      [2, 1]
	      Position		      [645, 707, 650, 758]
	      ShowName		      off
	      Inputs		      "2"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      SID		      "1369"
	      Ports		      [2, 1]
	      Position		      [255, 112, 285, 143]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      SID		      "1370"
	      Ports		      [2, 1]
	      Position		      [595, 203, 615, 227]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product4"
	      SID		      "1371"
	      Ports		      [2, 1]
	      Position		      [255, 517, 285, 548]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "1372"
	      Ports		      [2, 1]
	      Position		      [220, 317, 250, 348]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation1"
	      SID		      "1373"
	      Ports		      [1, 1]
	      Position		      [780, 111, 800, 129]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "gb_gears_num"
	      LowerLimit	      "1"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Speed Dependent Shifting"
	      SID		      "1374"
	      Ports		      [1, 2]
	      Position		      [190, 732, 220, 783]
	      SourceBlock	      "lib_controls/SubSystem/Speed Dependent Shifting"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "off"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "1375"
	      Position		      [380, 105, 410, 135]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "1376"
	      Position		      [380, 510, 410, 540]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch2"
	      SID		      "1377"
	      Position		      [705, 810, 735, 840]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch3"
	      SID		      "1378"
	      Position		      [675, 675, 705, 705]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "allow downshift?"
	      SID		      "1379"
	      Ports		      [1, 1]
	      Position		      [475, 32, 505, 68]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"allow downshift?"
		Location		[344, 273, 833, 488]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gearnum"
		  SID			  "1380"
		  Position		  [35, 35, 55, 55]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  SID			  "1381"
		  Ports			  [2, 1]
		  Position		  [380, 43, 410, 67]
		  FontName		  "Arial"
		  Operator		  "NOR"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "1382"
		  Position		  [150, 60, 185, 80]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "1383"
		  Position		  [150, 105, 185, 125]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "1384"
		  Ports			  [2, 1]
		  Position		  [230, 38, 260, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator2"
		  SID			  "1385"
		  Ports			  [2, 1]
		  Position		  [230, 98, 260, 122]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  Outport
		  Name			  "allow shift"
		  SID			  "1386"
		  Position		  [445, 45, 465, 65]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator2"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [0, 70; -60, 0]
		    DstBlock		    "Memory1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [15, 0; 0, -15]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gearnum"
		  SrcPort		  1
		  Points		  [50, 0]
		  Branch {
		    Points		    [0, 25]
		    Branch {
		    Points		    [0, 35]
		    DstBlock		    "Relational\nOperator2"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  DstBlock		  "allow shift"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "current\ngear\nnumber"
	      SID		      "1387"
	      Ports		      [2, 1]
	      Position		      [725, 102, 745, 138]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "delta\ngear\nnumber"
	      SID		      "1388"
	      Position		      [655, 114, 685, 146]
	      FontName		      "Arial"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "downshift \ncommand"
	      SID		      "1389"
	      Ports		      [3, 1]
	      Position		      [475, 194, 505, 246]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"downshift \ncommand"
		Location		[441, 362, 916, 657]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "1390"
		  Position		  [45, 98, 75, 112]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "1391"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "1392"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "1393"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "1394"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "1395"
		  Ports			  [1, 1]
		  Position		  [240, 100, 270, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_dnshift_spd|gb_dnshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "1396"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "1397"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "1398"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "1399"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [55, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "downshift \ncommand1"
	      SID		      "1400"
	      Ports		      [3, 1]
	      Position		      [475, 499, 505, 551]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"downshift \ncommand1"
		Location		[431, 372, 906, 667]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "1401"
		  Position		  [45, 98, 75, 112]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "1402"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "1403"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "1404"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "1405"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "1406"
		  Ports			  [1, 1]
		  Position		  [240, 100, 270, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_dnshift_spd|gb_dnshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "1407"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "1408"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "1409"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "1410"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [55, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "engine\ntorque\ncapability"
	      SID		      "1411"
	      Position		      [200, 125, 230, 145]
	      FontName		      "Arial"
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      Table		      "fc_max_trq*fc_trq_scale+eps"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "engine\ntorque\ncapability1"
	      SID		      "1412"
	      Position		      [200, 530, 230, 550]
	      FontName		      "Arial"
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      Table		      "fc_max_trq*fc_trq_scale+eps"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "est. engine trq\nand\nspd"
	      SID		      "1413"
	      Ports		      [4, 3]
	      Position		      [115, 84, 145, 116]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"est. engine trq\nand\nspd"
		Location		[29, 163, 760, 833]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	281
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"63"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear\nnumber"
		  SID			  "1414"
		  Position		  [20, 113, 50, 127]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  " prev eta_gb"
		  SID			  "1415"
		  Position		  [20, 168, 50, 182]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_trq_out_r"
		  SID			  "1416"
		  Position		  [20, 223, 50, 237]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_out_r"
		  SID			  "1417"
		  Position		  [20, 278, 50, 292]
		  Port			  "4"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "1418"
		  Ports			  []
		  Position		  [1095, 305, 1151, 345]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [231, 257, 689, 321]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "1419"
		    Name		    "Estimate engine torque and speed associated with the previous gear, assuming that\nthe gearbox effici"
		    "ency is constant."
		    Position		    [227, 12]
		    VerticalAlignment	    "top"
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "1420"
		  Position		  [760, 220, 780, 240]
		  BlockMirror		  on
		  Value			  "[1 1]"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant5"
		  SID			  "1421"
		  Position		  [620, 70, 640, 90]
		  BlockMirror		  on
		  Value			  "0"
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux"
		  SID			  "1422"
		  Ports			  [1, 2]
		  Position		  [980, 172, 1015, 208]
		  Outputs		  "2"
		}
		Block {
		  BlockType		  From
		  Name			  "From <vc>"
		  SID			  "1423"
		  Position		  [310, 50, 405, 70]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "locked_up"
		}
		Block {
		  BlockType		  From
		  Name			  "From5"
		  SID			  "1424"
		  Position		  [165, 223, 275, 247]
		  BackgroundColor	  "gray"
		  ShowName		  off
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "acc_mech_trq_est"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "K_adv"
		  SID			  "1425"
		  Ports			  [1, 1]
		  Position		  [460, 145, 490, 175]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "K_adv"
		    Location		    [502, 588, 994, 833]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Req'd output\ntrq and spd\n(Nm), (rad/s)"
		    SID			    "1426"
		    Position		    [45, 58, 75, 72]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "K_adv=wout/(Tout)^0.5"
		    SID			    "1427"
		    Position		    [160, 51, 280, 79]
		    FontName		    "Arial"
		    Expr		    "u[2]/u[1]^0.5"
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    "Saturation"
		    SID			    "1428"
		    Ports		    [1, 1]
		    Position		    [305, 50, 335, 80]
		    InputPortMap	    "u0"
		    UpperLimit		    "max(htc_k_adv)"
		    LowerLimit		    "min(htc_k_adv)"
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    "Saturation2"
		    SID			    "1429"
		    Ports		    [1, 1]
		    Position		    [105, 50, 135, 80]
		    ShowName		    off
		    InputPortMap	    "u0"
		    UpperLimit		    "inf"
		    LowerLimit		    "eps"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "K_adv"
		    SID			    "1430"
		    Position		    [385, 58, 415, 72]
		    IconDisplay		    "Port number"
		    }
		    Line {
		    SrcBlock		    "Saturation"
		    SrcPort		    1
		    DstBlock		    "K_adv"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "K_adv=wout/(Tout)^0.5"
		    SrcPort		    1
		    DstBlock		    "Saturation"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Saturation2"
		    SrcPort		    1
		    DstBlock		    "K_adv=wout/(Tout)^0.5"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Req'd output\ntrq and spd\n(Nm), (rad/s)"
		    SrcPort		    1
		    DstBlock		    "Saturation2"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  SID			  "1431"
		  Ports			  [2, 1]
		  Position		  [685, 36, 715, 69]
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator1"
		  SID			  "1432"
		  Ports			  [1, 1]
		  Position		  [510, 43, 540, 77]
		  Operator		  "NOT"
		  Inputs		  "1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "1433"
		  Position		  [445, 45, 475, 75]
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux1"
		  SID			  "1434"
		  Ports			  [2, 1]
		  Position		  [805, 97, 840, 133]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux2"
		  SID			  "1435"
		  Ports			  [2, 1]
		  Position		  [430, 142, 440, 178]
		  ShowName		  off
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "1436"
		  Ports			  [2, 1]
		  Position		  [615, 12, 645, 43]
		  Operator		  ">"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "SR Look-Up\nTable\nSR=wout/win"
		  SID			  "1437"
		  Position		  [535, 210, 565, 240]
		  InputValues		  "htc_k_adv"
		  Table			  "htc_sr"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation1"
		  SID			  "1438"
		  Ports			  [1, 1]
		  Position		  [85, 160, 115, 190]
		  InputPortMap		  "u0"
		  UpperLimit		  "1"
		  LowerLimit		  "0.7"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation2"
		  SID			  "1439"
		  Ports			  [1, 1]
		  Position		  [1035, 185, 1065, 215]
		  InputPortMap		  "u0"
		  UpperLimit		  "inf"
		  LowerLimit		  "0"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "1440"
		  Position		  [755, 170, 785, 200]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "TR Look-Up\nTable\nTR=Tout/Tin"
		  SID			  "1441"
		  Position		  [535, 125, 565, 155]
		  InputValues		  "htc_k_adv"
		  Table			  "htc_tr"
		}
		Block {
		  BlockType		  Mux
		  Name			  "TR,SR"
		  SID			  "1442"
		  Ports			  [2, 1]
		  Position		  [695, 157, 730, 193]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  Sum
		  Name			  "est eng\ntrq"
		  SID			  "1443"
		  Ports			  [2, 1]
		  Position		  [295, 132, 315, 168]
		  ForegroundColor	  "magenta"
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "gear ratio1"
		  SID			  "1444"
		  Position		  [85, 108, 115, 132]
		  FontName		  "Arial"
		  InputValues		  "[1:length(gb_ratio)]"
		  Table			  "gb_ratio"
		}
		Block {
		  BlockType		  Product
		  Name			  "~eng trq\nand spd"
		  SID			  "1445"
		  Ports			  [2, 1]
		  Position		  [870, 161, 900, 194]
		  Inputs		  "*/"
		}
		Block {
		  BlockType		  Product
		  Name			  "~gb_spd_in_r"
		  SID			  "1446"
		  Ports			  [2, 1]
		  Position		  [170, 260, 200, 295]
		}
		Block {
		  BlockType		  Product
		  Name			  "~gb_trq_in_r"
		  SID			  "1447"
		  Ports			  [3, 1]
		  Position		  [170, 105, 200, 195]
		  Inputs		  "//*"
		}
		Block {
		  BlockType		  Outport
		  Name			  "est eng trq\n(Nm)"
		  SID			  "1448"
		  Position		  [1105, 103, 1135, 117]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Outport
		  Name			  "est eng spd\n(rad/s)"
		  SID			  "1449"
		  Position		  [1100, 193, 1130, 207]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Outport
		  Name			  "gb_spd_in_est\n(rad/s)1"
		  SID			  "1450"
		  Position		  [1100, 238, 1130, 252]
		  ForegroundColor	  "blue"
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "gb_trq_out_r"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "~gb_trq_in_r"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "gb_spd_out_r"
		  SrcPort		  1
		  DstBlock		  "~gb_spd_in_r"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "gear ratio1"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    DstBlock		    "~gb_trq_in_r"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 150]
		    DstBlock		    "~gb_spd_in_r"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "TR,SR"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  DstBlock		  "~eng trq\nand spd"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  " prev eta_gb"
		  SrcPort		  1
		  DstBlock		  "Saturation1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation1"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "~gb_trq_in_r"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  2
		  DstBlock		  "Saturation2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation2"
		  SrcPort		  1
		  DstBlock		  "est eng spd\n(rad/s)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant5"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  Points		  [20, 0]
		  DstBlock		  "Logical\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear\nnumber"
		  SrcPort		  1
		  DstBlock		  "gear ratio1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  1
		  Points		  [40, 0; 0, -70]
		  DstBlock		  "est eng trq\n(Nm)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical\nOperator1"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  Points		  [20, 0]
		  DstBlock		  "Switch"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <vc>"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux1"
		  SrcPort		  1
		  Points		  [5, 0; 0, 55]
		  DstBlock		  "~eng trq\nand spd"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "~eng trq\nand spd"
		  SrcPort		  1
		  Points		  [60, 0]
		  DstBlock		  "Demux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux2"
		  SrcPort		  1
		  DstBlock		  "K_adv"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "K_adv"
		  SrcPort		  1
		  Points		  [15, 0; 0, -5]
		  Branch {
		    Points		    [0, -15]
		    DstBlock		    "TR Look-Up\nTable\nTR=Tout/Tin"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 70]
		    DstBlock		    "SR Look-Up\nTable\nSR=wout/win"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "TR Look-Up\nTable\nTR=Tout/Tin"
		  SrcPort		  1
		  Points		  [110, 0]
		  DstBlock		  "TR,SR"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "SR Look-Up\nTable\nSR=wout/win"
		  SrcPort		  1
		  Points		  [110, 0]
		  DstBlock		  "TR,SR"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From5"
		  SrcPort		  1
		  DstBlock		  "est eng\ntrq"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "~gb_spd_in_r"
		  SrcPort		  1
		  Points		  [205, 0]
		  Branch {
		    Points		    [380, 0; 0, 5]
		    Branch {
		    DstBlock		    "Mux1"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [295, 0]
		    DstBlock		    "gb_spd_in_est\n(rad/s)1"
		    DstPort		    1
		    }
		  }
		  Branch {
		    Points		    [0, -110]
		    DstBlock		    "Mux2"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "~gb_trq_in_r"
		  SrcPort		  1
		  Points		  [70, 0; 0, -10]
		  DstBlock		  "est eng\ntrq"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "est eng\ntrq"
		  SrcPort		  1
		  Points		  [65, 0]
		  Branch {
		    DstBlock		    "Mux2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -35; 190, 0]
		    Branch {
		    Points		    [0, -95]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [200, 0; 0, -10]
		    DstBlock		    "Mux1"
		    DstPort		    1
		    }
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "est. engine trq\nand spd assuming\nlockup"
	      SID		      "1451"
	      Ports		      [4, 2]
	      Position		      [115, 489, 145, 521]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"est. engine trq\nand spd assuming\nlockup"
		Location		[63, 123, 886, 793]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "new gear\nnumber"
		  SID			  "1452"
		  Position		  [30, 28, 60, 42]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  " prev eta_gb"
		  SID			  "1453"
		  Position		  [30, 83, 60, 97]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_trq_out_r"
		  SID			  "1454"
		  Position		  [30, 138, 60, 152]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_in_est"
		  SID			  "1455"
		  Position		  [30, 218, 60, 232]
		  Port			  "4"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "1456"
		  Ports			  []
		  Position		  [625, 180, 681, 220]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [231, 257, 689, 321]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "1457"
		    Name		    "Estimate engine torque and speed associated with the current gear, assuming that\nthe gearbox efficie"
		    "ncy is constant."
		    Position		    [227, 12]
		    VerticalAlignment	    "top"
		    }
		  }
		}
		Block {
		  BlockType		  From
		  Name			  "From5"
		  SID			  "1458"
		  Position		  [220, 73, 330, 97]
		  BackgroundColor	  "gray"
		  ShowName		  off
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "acc_mech_trq_est"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "1459"
		  Position		  [130, 180, 160, 210]
		  X0			  "gb_ratio(1)"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation1"
		  SID			  "1460"
		  Ports			  [1, 1]
		  Position		  [95, 75, 125, 105]
		  InputPortMap		  "u0"
		  UpperLimit		  "1"
		  LowerLimit		  "0.7"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation2"
		  SID			  "1461"
		  Ports			  [1, 1]
		  Position		  [580, 65, 610, 95]
		  InputPortMap		  "u0"
		  UpperLimit		  "inf"
		  LowerLimit		  "0"
		}
		Block {
		  BlockType		  Sum
		  Name			  "est eng\ntrq"
		  SID			  "1462"
		  Ports			  [2, 1]
		  Position		  [385, 57, 405, 93]
		  ForegroundColor	  "magenta"
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "gear ratio1"
		  SID			  "1463"
		  Position		  [95, 23, 125, 47]
		  FontName		  "Arial"
		  InputValues		  "[1:length(gb_ratio)]"
		  Table			  "gb_ratio"
		}
		Block {
		  BlockType		  Product
		  Name			  "~gb_spd_in_r"
		  SID			  "1464"
		  Ports			  [3, 1]
		  Position		  [180, 150, 210, 240]
		  Inputs		  "*/*"
		}
		Block {
		  BlockType		  Product
		  Name			  "~gb_trq_in_r"
		  SID			  "1465"
		  Ports			  [3, 1]
		  Position		  [180, 20, 210, 110]
		  Inputs		  "//*"
		}
		Block {
		  BlockType		  Outport
		  Name			  "est eng trq\n(Nm)"
		  SID			  "1466"
		  Position		  [645, 18, 675, 32]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Outport
		  Name			  "est eng spd\n(rad/s)"
		  SID			  "1467"
		  Position		  [645, 73, 675, 87]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "Saturation1"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "~gb_trq_in_r"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  " prev eta_gb"
		  SrcPort		  1
		  DstBlock		  "Saturation1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gear ratio1"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    DstBlock		    "~gb_trq_in_r"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 130]
		    Branch {
		    DstBlock		    "~gb_spd_in_r"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [-35, 0]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "gb_trq_out_r"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "~gb_trq_in_r"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "new gear\nnumber"
		  SrcPort		  1
		  DstBlock		  "gear ratio1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation2"
		  SrcPort		  1
		  DstBlock		  "est eng spd\n(rad/s)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "~gb_spd_in_r"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "gb_spd_in_est"
		  SrcPort		  1
		  DstBlock		  "~gb_spd_in_r"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "From5"
		  SrcPort		  1
		  DstBlock		  "est eng\ntrq"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "~gb_trq_in_r"
		  SrcPort		  1
		  DstBlock		  "est eng\ntrq"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "est eng\ntrq"
		  SrcPort		  1
		  Points		  [0, -50]
		  DstBlock		  "est eng trq\n(Nm)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "~gb_spd_in_r"
		  SrcPort		  1
		  Points		  [310, 0; 0, -110; 30, 0; 0, -5]
		  DstBlock		  "Saturation2"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio1"
	      SID		      "1468"
	      Position		      [840, 108, 870, 132]
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      Table		      "gb_ratio"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "load=T/\n(maxT\nat spd)"
	      SID		      "1469"
	      Ports		      [1, 1]
	      Position		      [310, 116, 345, 144]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "-1"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "load=T/\n(maxT\nat spd)1"
	      SID		      "1470"
	      Ports		      [1, 1]
	      Position		      [310, 521, 345, 549]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "-1"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "lock-up in\nthis gear"
	      SID		      "1471"
	      Position		      [165, 313, 195, 337]
	      FontName		      "Arial"
	      InputValues	      "[1:length(htc_lockup)]"
	      Table		      "htc_lockup"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev gear\nnumber"
	      SID		      "1472"
	      Position		      [745, 45, 785, 65]
	      BlockMirror	      on
	      FontName		      "Arial"
	      X0		      "gb_num_init"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "shifting1"
	      SID		      "1473"
	      Ports		      [1, 1]
	      Position		      [845, 279, 875, 311]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"shifting1"
		Location		[76, 244, 366, 435]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gear\nnumber"
		  SID			  "1474"
		  Position		  [15, 50, 35, 70]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "1475"
		  Position		  [20, 131, 120, 159]
		  FontName		  "Arial"
		  Value			  "gb_shift_delay-1e-6"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "1476"
		  Ports			  [2, 1]
		  Position		  [185, 53, 215, 77]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "time since last shift"
		  SID			  "1477"
		  Ports			  [1, 1]
		  Position		  [65, 43, 125, 77]
		  ShowName		  off
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('time since\\nlast shift')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "time since last shift"
		    Location		    [47, 595, 337, 734]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "1478"
		    Position		    [10, 60, 30, 80]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "just shifted"
		    SID			    "1479"
		    Ports		    [1, 1]
		    Position		    [60, 57, 110, 83]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('just\\nshifted')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "just shifted"
		    Location		    [48, 850, 371, 995]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "1480"
		    Position		    [55, 55, 75, 75]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "1481"
		    Position		    [120, 55, 155, 75]
		    FontName		    "Arial"
		    X0			    "1"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    SID			    "1482"
		    Ports		    [2, 1]
		    Position		    [190, 58, 220, 82]
		    FontName		    "Arial"
		    Operator		    "~="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "1483"
		    Position		    [250, 60, 270, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 30; 75, 0; 0, -20]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "timer"
		    SID			    "1484"
		    Ports		    [1, 1]
		    Position		    [140, 55, 175, 85]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('timer')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "timer"
		    Location		    [389, 635, 793, 850]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "trigger"
		    SID			    "1485"
		    Position		    [15, 125, 35, 145]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "1486"
		    Position		    [100, 100, 120, 120]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant1"
		    SID			    "1487"
		    Position		    [100, 150, 120, 170]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant2"
		    SID			    "1488"
		    Position		    [150, 5, 170, 25]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "1489"
		    Position		    [265, 59, 295, 91]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "no-lag\nReset Integrator"
		    SID			    "1490"
		    Ports		    [3, 1]
		    Position		    [155, 96, 205, 174]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskType		    "No-lag Reset Integrator"
		    MaskDescription	    "No-lag Reset Integrator"
		    MaskHelp		    "Integrates first input using Euler technique.\\nAt the time step that input 2 <> zero,\\noutput i"
		    "s reset to input 3."
		    MaskPromptString	    "Initial Value"
		    MaskStyleString	    "edit"
		    MaskVariables	    "initval=@1;"
		    MaskTunableValueString  "on"
		    MaskEnableString	    "on"
		    MaskVisibilityString    "on"
		    MaskToolTipString	    "on"
		    MaskDisplay		    "disp('1/s\\nw/ reset\\nno lag')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "15"
		    System {
		    Name		    "no-lag\nReset Integrator"
		    Location		    [258, 616, 780, 880]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "1491"
		    Position		    [60, 100, 80, 120]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    SID			    "1492"
		    Position		    [60, 140, 80, 160]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_3"
		    SID			    "1493"
		    Position		    [45, 185, 65, 205]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "1494"
		    Position		    [125, 205, 145, 225]
		    BlockRotation	    270
		    NamePlacement	    "alternate"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "1495"
		    Position		    [340, 55, 375, 75]
		    BlockMirror		    on
		    FontName		    "Arial"
		    X0			    "initval"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    SID			    "1496"
		    Ports		    [2, 1]
		    Position		    [160, 96, 180, 114]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    SID			    "1497"
		    Ports		    [2, 1]
		    Position		    [230, 90, 250, 110]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "1498"
		    Position		    [290, 139, 320, 171]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "dt"
		    SID			    "1499"
		    Ports		    [0, 1]
		    Position		    [112, 50, 138, 80]
		    BlockRotation	    270
		    BlockMirror		    on
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "dt"
		    Location		    [80, 285, 429, 424]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "1500"
		    Position		    [65, 60, 85, 80]
		    FontName		    "Arial"
		    FontSize		    8
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "1501"
		    Position		    [125, 85, 160, 105]
		    FontName		    "Arial"
		    FontSize		    8
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    SID			    "1502"
		    Ports		    [2, 1]
		    Position		    [205, 65, 225, 85]
		    FontName		    "Arial"
		    FontSize		    8
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "1503"
		    Position		    [255, 65, 275, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [10, 0; 0, -15]
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    }
		    }
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "in_2==0"
		    SID			    "1504"
		    Ports		    [2, 1]
		    Position		    [160, 143, 190, 167]
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "1505"
		    Position		    [455, 145, 475, 165]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    Points		    [0, -40]
		    DstBlock		    "in_2==0"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "in_2==0"
		    SrcPort		    1
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    Points		    [85, 0]
		    Branch {
		    Points		    [0, -90]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    Points		    [10, 0; 0, 45]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    Points		    [-130, 0; 0, 30]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "dt"
		    SrcPort		    1
		    Points		    [0, 15]
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "in_2==0"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_3"
		    SrcPort		    1
		    Points		    [200, 0; 0, -30]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "time"
		    SID			    "1506"
		    Position		    [350, 65, 370, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "no-lag\nReset Integrator"
		    SrcPort		    1
		    Points		    [35, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Constant1"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant2"
		    SrcPort		    1
		    Points		    [35, 0; 0, 50]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "trigger"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, -60]
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    DstBlock		    "time"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "1507"
		    Position		    [225, 60, 245, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "timer"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "just shifted"
		    SrcPort		    1
		    DstBlock		    "timer"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "just shifted"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "1508"
		  Position		  [250, 55, 270, 75]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "time since last shift"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [15, 0; 0, -75]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "gear\nnumber"
		  SrcPort		  1
		  DstBlock		  "time since last shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "upshift\n command"
	      SID		      "1509"
	      Ports		      [3, 1]
	      Position		      [475, 94, 505, 146]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"upshift\n command"
		Location		[431, 171, 906, 466]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "1510"
		  Position		  [45, 103, 75, 117]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "1511"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "1512"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "1513"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "1514"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "1515"
		  Ports			  [1, 1]
		  Position		  [245, 100, 275, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_upshift_spd|gb_upshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [1031, 545, 1271, 627]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "1516"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "1517"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "1518"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "1519"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [50, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear number, out"
	      SID		      "1520"
	      Position		      [800, 815, 820, 835]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear ratio, out"
	      SID		      "1521"
	      Position		      [800, 655, 820, 675]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "shifting, out"
	      SID		      "1522"
	      Position		      [800, 700, 820, 720]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "locked up"
	      SID		      "1523"
	      Position		      [940, 415, 960, 435]
	      FontName		      "Arial"
	      Port		      "4"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "est. engine trq\nand\nspd"
	      SrcPort		      2
	      Points		      [35, 0; 0, 35]
	      Branch {
		Points			[0, 65; 240, 0]
		Branch {
		  Points		  [0, 35]
		  DstBlock		  "downshift \ncommand"
		  DstPort		  3
		}
		Branch {
		  Points		  [0, -65]
		  DstBlock		  "upshift\n command"
		  DstPort		  3
		}
	      }
	      Branch {
		DstBlock		"engine\ntorque\ncapability"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "gb_spd_out_r"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "est. engine trq\nand\nspd"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "Saturation1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, 0]
		Branch {
		  DstBlock		  "gear ratio1"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, -65]
		  Branch {
		    DstBlock		    "prev gear\nnumber"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Goto3"
		    DstPort		    1
		  }
		}
	      }
	      Branch {
		Points			[0, 175]
		DstBlock		"shifting1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "load=T/\n(maxT\nat spd)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "allow downshift?"
	      SrcPort		      1
	      Points		      [55, 0; 0, 160]
	      DstBlock		      "Product3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      Points		      [10, 0; 0, -75]
	      DstBlock		      "delta\ngear\nnumber"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "engine\ntorque\ncapability"
	      SrcPort		      1
	      DstBlock		      "Product2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "est. engine trq\nand\nspd"
	      SrcPort		      1
	      Points		      [90, 0]
	      DstBlock		      "Product2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "load=T/\n(maxT\nat spd)"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "downshift \ncommand"
	      SrcPort		      1
	      DstBlock		      "Gain1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [0, -15]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "lock-up in\nthis gear"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [15, 0; 0, 75]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product4"
	      SrcPort		      1
	      DstBlock		      "load=T/\n(maxT\nat spd)1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "engine\ntorque\ncapability1"
	      SrcPort		      1
	      DstBlock		      "Product4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "est. engine trq\nand spd assuming\nlockup"
	      SrcPort		      1
	      Points		      [90, 0]
	      DstBlock		      "Product4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "eta_gb"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"est. engine trq\nand\nspd"
		DstPort			2
	      }
	      Branch {
		Points			[0, 405]
		DstBlock		"est. engine trq\nand spd assuming\nlockup"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "gb_trq_out_r"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		Points			[0, -40]
		DstBlock		"est. engine trq\nand\nspd"
		DstPort			3
	      }
	      Branch {
		Points			[0, 365]
		DstBlock		"est. engine trq\nand spd assuming\nlockup"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "tires are at\ntraction limit"
	      SrcPort		      1
	      Points		      [290, 0]
	      Branch {
		Points			[0, 285]
		DstBlock		"Switch1"
		DstPort			2
	      }
	      Branch {
		Points			[0, -120]
		DstBlock		"Switch"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "est. engine trq\nand\nspd"
	      SrcPort		      3
	      Points		      [0, 115; -55, 0; 0, 295]
	      DstBlock		      "est. engine trq\nand spd assuming\nlockup"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "est. engine trq\nand spd assuming\nlockup"
	      SrcPort		      2
	      Points		      [35, 0; 0, 25]
	      Branch {
		DstBlock		"engine\ntorque\ncapability1"
		DstPort			1
	      }
	      Branch {
		Points			[0, 55; 265, 0; 0, -55]
		DstBlock		"downshift \ncommand1"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator2"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		Points			[0, -95]
		DstBlock		"Logical\nOperator"
		DstPort			3
	      }
	      Branch {
		DstBlock		"Memory"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		Points			[0, 100]
		DstBlock		"downshift \ncommand"
		DstPort			2
	      }
	      Branch {
		DstBlock		"upshift\n command"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "upshift\n command"
	      SrcPort		      1
	      Points		      [120, 0]
	      Branch {
		Points			[0, 10]
		DstBlock		"delta\ngear\nnumber"
		DstPort			2
	      }
	      Branch {
		DstBlock		"delta\ngear\nnumber"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      DstBlock		      "Product3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      DstBlock		      "locked up"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "downshift \ncommand1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [10, 0; 0, -85]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "load=T/\n(maxT\nat spd)1"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "downshift \ncommand1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gear ratio1"
	      SrcPort		      1
	      DstBlock		      "Goto4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "delta\ngear\nnumber"
	      SrcPort		      1
	      DstBlock		      "current\ngear\nnumber"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "current\ngear\nnumber"
	      SrcPort		      1
	      DstBlock		      "Saturation1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "prev gear\nnumber"
	      SrcPort		      1
	      Points		      [-165, 0]
	      Branch {
		Points			[0, 55]
		DstBlock		"current\ngear\nnumber"
		DstPort			1
	      }
	      Branch {
		Points			[-125, 0]
		Branch {
		  Points		  [0, 25]
		  Branch {
		    Points		    [0, 55]
		    Branch {
		    DstBlock		    "upshift\n command"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 100]
		    Branch {
		    DstBlock		    "downshift \ncommand"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 275]
		    DstBlock		    "downshift \ncommand1"
		    DstPort		    1
		    }
		    }
		  }
		  Branch {
		    DstBlock		    "allow downshift?"
		    DstPort		    1
		  }
		}
		Branch {
		  Points		  [-355, 0; 0, 30]
		  DstBlock		  "est. engine trq\nand\nspd"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Constant15"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From4"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Switch3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Switch3"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From2"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From3"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch3"
	      SrcPort		      1
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant14"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From <logic>2"
	      SrcPort		      1
	      DstBlock		      "Speed Dependent Shifting"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      1
	      DstBlock		      "Goto"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      2
	      DstBlock		      "Goto1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      Points		      [5, 0]
	      Branch {
		Points			[40, 0]
		DstBlock		"shifting, out"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Goto2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Switch2"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"gear number, out"
		DstPort			1
	      }
	      Branch {
		Points			[0, 60]
		DstBlock		"Goto7"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "shifting1"
	      SrcPort		      1
	      DstBlock		      "Goto5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From5"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From6"
	      SrcPort		      1
	      Points		      [0, 35; -50, 0]
	      Branch {
		DstBlock		"lock-up in\nthis gear"
		DstPort			1
	      }
	      Branch {
		Points			[-50, 0]
		DstBlock		"est. engine trq\nand spd assuming\nlockup"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "gear ratio, out"
	      DstPort		      1
	    }
	    Annotation {
	      SID		      "1524"
	      Name		      "default gear number\ncalculation"
	      Position		      [964, 24]
	    }
	    Annotation {
	      SID		      "1525"
	      Name		      "default shifting\ncalculation"
	      Position		      [968, 326]
	    }
	    Annotation {
	      SID		      "1526"
	      Name		      "default gear ratio\ncalculation"
	      Position		      [962, 149]
	    }
	    Annotation {
	      SID		      "1527"
	      Name		      "local GOTO blocks:"
	      Position		      [962, 202]
	    }
	    Annotation {
	      SID		      "1528"
	      Name		      "gear ratio and shifting pre-muxed"
	      Position		      [549, 632]
	    }
	    Annotation {
	      SID		      "1529"
	      Name		      "output changes depending\nupon whether speed\ndependent shifting is used"
	      Position		      [910, 795]
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "sim stop\nsubsystem"
	  SID			  "1530"
	  Ports			  []
	  Position		  [35, 25, 65, 75]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/sim stop\nsubsystem"
	  SourceType		  "SubSystem"
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>5"
	  SrcPort		  1
	  Points		  [0, -10]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "From<wh>4"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <wh>3"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <wh>2"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>4"
	  SrcPort		  1
	  Points		  [65, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "engine\ncontrol"
	  SrcPort		  2
	  DstBlock		  "Goto <fc>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <fc>"
	  SrcPort		  1
	  DstBlock		  "engine\ncontrol"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "engine\ncontrol"
	  SrcPort		  1
	  DstBlock		  "Goto <fc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "engine\ncontrol"
	  SrcPort		  3
	  Points		  [15, 0]
	  DstBlock		  "Goto <fc><mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>6"
	  SrcPort		  1
	  Points		  [30, 0]
	  DstBlock		  "engine\ncontrol"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <fc>1"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "engine\ncontrol"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <fc>2"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "engine\ncontrol"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox control\nfor use w/ AT"
	  SrcPort		  4
	  DstBlock		  "Goto <htc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox control\nfor use w/ AT"
	  SrcPort		  2
	  DstBlock		  "Goto <gb>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox control\nfor use w/ AT"
	  SrcPort		  1
	  DstBlock		  "Goto <htc>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>2"
	  SrcPort		  1
	  DstBlock		  "gearbox control\nfor use w/ AT"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>3"
	  SrcPort		  1
	  DstBlock		  "gearbox control\nfor use w/ AT"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From<gb>"
	  SrcPort		  1
	  DstBlock		  "gearbox control\nfor use w/ AT"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <gb>1"
	  SrcPort		  1
	  DstBlock		  "gearbox control\nfor use w/ AT"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "gearbox control\nfor use w/ AT"
	  SrcPort		  3
	  Points		  [45, 0]
	  DstBlock		  "Goto <gb>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Relational\nOperator"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  3
	  Points		  [0, 10]
	  DstBlock		  "Goto <wh>2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <veh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  1
	  Points		  [0, 5; 5, 0]
	  Branch {
	    Points		    [0, -75]
	    DstBlock		    "braking strategy"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [150, 0]
	    Branch {
	      Points		      [0, -60]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Branch {
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "From <wh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <wh>1"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>5"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  2
	  Points		  [160, 0]
	  Branch {
	    DstBlock		    "Sum"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -35]
	    DstBlock		    "Goto <wh>8"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "From <wh>7"
	  SrcPort		  1
	  DstBlock		  "braking strategy"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>8"
	  SrcPort		  1
	  DstBlock		  "Relational\nOperator"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Ground"
	  SrcPort		  1
	  Points		  [5, 0; 0, -35; 10, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  6
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  5
	  Points		  [15, 0; 0, 20; 15, 0]
	  DstBlock		  "Goto <wh>7"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  4
	  Points		  [5, 0]
	  DstBlock		  "Goto <wh>6"
	  DstPort		  1
	}
	Annotation {
	  SID			  "1531"
	  Name			  "required\nforce (N)"
	  Position		  [232, 108]
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "<vc> conv auto\nSaber custom"
      SID		      "301"
      Ports		      []
      Position		      [627, 38, 689, 91]
      BackgroundColor	      "yellow"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_vc.jpg'))\n"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"<vc> conv auto\nSaber custom"
	Location		[-104, 195, 883, 863]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"100"
	Block {
	  BlockType		  Constant
	  Name			  "Constant"
	  SID			  "1532"
	  Position		  [590, 370, 610, 390]
	  Value			  "3"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>"
	  SID			  "1533"
	  Position		  [500, 490, 595, 510]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_spd_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>1"
	  SID			  "1534"
	  Position		  [500, 455, 595, 475]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "clutch_state"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>2"
	  SID			  "1535"
	  Position		  [500, 420, 595, 440]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>1"
	  SID			  "1536"
	  Position		  [525, 235, 620, 255]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>2"
	  SID			  "1537"
	  Position		  [525, 176, 620, 194]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "eta_gb"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>3"
	  SID			  "1538"
	  Position		  [525, 275, 620, 295]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "slip_limited"
	}
	Block {
	  BlockType		  From
	  Name			  "From <veh>"
	  SID			  "1539"
	  Position		  [50, 152, 125, 168]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_prev"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>"
	  SID			  "1540"
	  Position		  [55, 185, 115, 205]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>1"
	  SID			  "1541"
	  Position		  [40, 116, 125, 134]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>2"
	  SID			  "1542"
	  Position		  [85, 377, 195, 393]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_drivetrain_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>3"
	  SID			  "1543"
	  Position		  [90, 411, 190, 429]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_wheel_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>4"
	  SID			  "1544"
	  Position		  [505, 516, 590, 534]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>5"
	  SID			  "1545"
	  Position		  [70, 466, 190, 484]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_rear_brake"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>6"
	  SID			  "1546"
	  Position		  [90, 335, 150, 355]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>7"
	  SID			  "1547"
	  Position		  [310, 130, 370, 150]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>8"
	  SID			  "1548"
	  Position		  [100, 41, 185, 59]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From<gb>"
	  SID			  "1549"
	  Position		  [525, 210, 620, 230]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From<wh>4"
	  SID			  "1550"
	  Position		  [85, 436, 200, 454]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_front_brake"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>"
	  SID			  "1551"
	  Position		  [705, 448, 775, 472]
	  NamePlacement		  "alternate"
	  GotoTag		  "engine_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>1"
	  SID			  "1552"
	  Position		  [695, 478, 785, 502]
	  GotoTag		  "spd_command"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc><mc>"
	  SID			  "1553"
	  Position		  [715, 521, 765, 539]
	  GotoTag		  "key_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>"
	  SID			  "1554"
	  Position		  [720, 214, 795, 236]
	  GotoTag		  "gear_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>1"
	  SID			  "1555"
	  Position		  [735, 255, 790, 275]
	  GotoTag		  "shifting"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <htc>"
	  SID			  "1556"
	  Position		  [720, 292, 795, 308]
	  GotoTag		  "locked_up"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <htc>1"
	  SID			  "1557"
	  Position		  [720, 184, 795, 206]
	  NamePlacement		  "alternate"
	  GotoTag		  "gear_number"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>"
	  SID			  "1558"
	  Position		  [655, 369, 740, 391]
	  GotoTag		  "clutch_state"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>1"
	  SID			  "1559"
	  Position		  [450, 126, 535, 144]
	  GotoTag		  "slip_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>"
	  SID			  "1560"
	  Position		  [450, 75, 535, 95]
	  NamePlacement		  "alternate"
	  GotoTag		  "F_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>1"
	  SID			  "1561"
	  Position		  [210, 134, 300, 156]
	  GotoTag		  "v_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>2"
	  SID			  "1562"
	  Position		  [250, 166, 340, 184]
	  GotoTag		  "wt_front_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>3"
	  SID			  "1563"
	  Position		  [285, 381, 370, 399]
	  GotoTag		  "F_front_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>4"
	  SID			  "1564"
	  Position		  [285, 444, 370, 466]
	  GotoTag		  "F_rear_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>5"
	  SID			  "1565"
	  Position		  [250, 40, 360, 60]
	  GotoTag		  "F_front_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>6"
	  SID			  "1566"
	  Position		  [215, 201, 305, 219]
	  GotoTag		  "wt_rear_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>7"
	  SID			  "1567"
	  Position		  [210, 231, 300, 249]
	  GotoTag		  "front_traction_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>8"
	  SID			  "1568"
	  Position		  [420, 15, 530, 35]
	  GotoTag		  "F_rear_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Ground
	  Name			  "Ground"
	  SID			  "1569"
	  Position		  [175, 495, 195, 515]
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator"
	  SID			  "1570"
	  Ports			  [2, 1]
	  Position		  [400, 117, 430, 148]
	  Operator		  "~="
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  SID			  "1571"
	  Ports			  [2, 1]
	  Position		  [400, 67, 430, 98]
	  Inputs		  "-+"
	}
	Block {
	  BlockType		  Reference
	  Name			  "braking strategy"
	  SID			  "1572"
	  Ports			  [2, 2]
	  Position		  [205, 37, 235, 88]
	  NamePlacement		  "alternate"
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/braking strategy"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "config traction control"
	  SID			  "1573"
	  Ports			  [3, 5]
	  Position		  [145, 109, 180, 211]
	  BackgroundColor	  "darkGreen"
	  AttributesFormatString  "%<BlockChoice>"
	  ShowPortLabels	  "none"
	  BlockChoice		  "traction control 2 axle"
	  TemplateBlock		  "lib_controls/SubSystem/config traction control"
	  MemberBlocks		  "traction control 2 axle,traction control J2452 2 axle"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "config traction control"
	    Location		    [148, 182, 646, 482]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    SIDHighWatermark	    "6898"
	    Block {
	      BlockType		      Inport
	      Name		      "time-average\nvehicle speed\n req'd (m/s)"
	      SID		      "1573::706"
	      Position		      [20, 40, 40, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SID		      "1573::707"
	      Position		      [20, 80, 40, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "total tractive\nforce req'd\n(N)"
	      SID		      "1573::708"
	      Position		      [20, 120, 40, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "traction control\n2 axle"
	      SID		      "1573::709"
	      Ports		      [3, 5]
	      Position		      [100, 40, 140, 80]
	      BackgroundColor	      "darkGreen"
	      LibraryVersion	      "1.479"
	      SourceBlock	      "lib_controls/SubSystem/traction control 2 axle"
	      SourceType	      "SubSystem"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd force\n(N)"
	      SID		      "1573::710"
	      Position		      [200, 40, 220, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd speed\n(m/s)"
	      SID		      "1573::711"
	      Position		      [200, 80, 220, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nfront axle\n(N)"
	      SID		      "1573::712"
	      Position		      [200, 120, 220, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nrear axle\n(N)"
	      SID		      "1573::713"
	      Position		      [200, 160, 220, 180]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "front/total \ntraction ratio"
	      SID		      "1573::714"
	      Position		      [200, 200, 220, 220]
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "time-average\nvehicle speed\n req'd (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "total tractive\nforce req'd\n(N)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      1
	      DstBlock		      "req'd force\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      2
	      DstBlock		      "req'd speed\n(m/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      3
	      DstBlock		      "weight on\nfront axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      4
	      DstBlock		      "weight on\nrear axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      5
	      DstBlock		      "front/total \ntraction ratio"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "engine\ncontrol"
	  SID			  "1574"
	  Ports			  [4, 3]
	  Position		  [650, 439, 685, 536]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "engine\ncontrol"
	    Location		    [41, 356, 699, 934]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "1575"
	      Position		      [35, 168, 65, 182]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "clutch state"
	      SID		      "1576"
	      Position		      [35, 33, 65, 47]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "fc_spd_out_r"
	      SID		      "1577"
	      Position		      [40, 518, 70, 532]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "v_ave_req"
	      SID		      "1578"
	      Position		      [35, 333, 65, 347]
	      NamePlacement	      "alternate"
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "1579"
	      Ports		      []
	      Position		      [560, 355, 616, 395]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[156, 423, 612, 520]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "1580"
		  Name			  "This engine control block determines whether the engine is on, which it is when\n[(the clutch is slippin"
		  "g or engaged OR idling is allowed) AND the ignition key is on]\nOR\n(the transmission is shifting AND the engine w"
		  "as on during the previous time step).\nThe second part involving shifting is to prevent the engine from shutting d"
		  "own\nfor 1 or 2 seconds during shifts."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "1581"
	      Position		      [105, 70, 125, 90]
	      BlockRotation	      270
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Value		      "1.1"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "1582"
	      Position		      [125, 111, 200, 129]
	      ShowName		      off
	      Value		      "vc_idle_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "1583"
	      Position		      [315, 459, 395, 481]
	      BlockMirror	      on
	      ShowName		      off
	      Value		      "vc_launch_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "1584"
	      Position		      [55, 230, 75, 250]
	      NamePlacement	      "alternate"
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "1585"
	      Position		      [70, 355, 90, 375]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "1586"
	      Position		      [115, 430, 130, 450]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "1587"
	      Position		      [455, 535, 475, 555]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "1588"
	      Ports		      [2, 1]
	      Position		      [340, 91, 370, 124]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator2"
	      SID		      "1589"
	      Ports		      [2, 1]
	      Position		      [250, 96, 280, 129]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator3"
	      SID		      "1590"
	      Ports		      [2, 1]
	      Position		      [405, 101, 435, 134]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator7"
	      SID		      "1591"
	      Ports		      [2, 1]
	      Position		      [300, 165, 330, 200]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator8"
	      SID		      "1592"
	      Ports		      [3, 1]
	      Position		      [210, 324, 240, 376]
	      ShowName		      off
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "1593"
	      Position		      [400, 200, 430, 230]
	      BlockMirror	      on
	      NamePlacement	      "alternate"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "1594"
	      Ports		      [1, 1]
	      Position		      [400, 500, 430, 530]
	      InputPortMap	      "u0"
	      UpperLimit	      "max(fc_map_spd)*fc_spd_scale"
	      LowerLimit	      "vc_idle_spd*vc_idle_bool"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "1595"
	      Position		      [340, 500, 370, 530]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "1596"
	      Position		      [510, 507, 540, 553]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch\ndisengaged"
	      SID		      "1597"
	      Ports		      [2, 1]
	      Position		      [100, 217, 130, 248]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch\nslipping\nor engaged"
	      SID		      "1598"
	      Ports		      [2, 1]
	      Position		      [150, 32, 180, 63]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "key_on"
	      SID		      "1599"
	      Ports		      [0, 1]
	      Position		      [280, 57, 320, 83]
	      NamePlacement	      "alternate"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Repeating table"
	      MaskDescription	      "Repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table. Time values should be monotonically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "vc_key_on(:,1)|vc_key_on(:,2)"
	      System {
		Name			"key_on"
		Location		[5, 40, 315, 196]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "1600"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "1601"
		  Position		  [110, 60, 150, 80]
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "1602"
		  Position		  [210, 58, 250, 82]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "1603"
		  Position		  [285, 60, 305, 80]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  DstBlock		  "Fcn1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "moving next\ntime"
	      SID		      "1604"
	      Ports		      [2, 1]
	      Position		      [155, 412, 185, 443]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "not\nmoving"
	      SID		      "1605"
	      Ports		      [2, 1]
	      Position		      [115, 332, 145, 363]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "repeated cycle:\n speed required at\nend of NEXT step"
	      SID		      "1606"
	      Ports		      [0, 1]
	      Position		      [40, 397, 75, 433]
	      ForegroundColor	      "green"
	      FontName		      "Arial"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Forward looking repeating table"
	      MaskDescription	      "Forward looking repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table with a one time step forward offset. Time values should be monoto"
	      "nically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "cyc_mph(:,1)|cyc_mph(:,2)"
	      System {
		Name			"repeated cycle:\n speed required at\nend of NEXT step"
		Location		[59, 74, 434, 236]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "1607"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "1608"
		  Position		  [110, 25, 150, 45]
		  ForegroundColor	  "green"
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "1609"
		  Position		  [260, 33, 300, 57]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "1610"
		  Position		  [90, 85, 120, 115]
		  ForegroundColor	  "green"
		  X0			  "-0.1"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "1611"
		  Ports			  [2, 1]
		  Position		  [150, 62, 180, 93]
		  ForegroundColor	  "green"
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "1612"
		  Ports			  [2, 1]
		  Position		  [205, 26, 235, 59]
		  ForegroundColor	  "green"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "1613"
		  Position		  [335, 35, 355, 55]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0; 0, -15]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [0, -35]
		    DstBlock		    "Fcn1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "engine on"
	      SID		      "1614"
	      Position		      [560, 113, 590, 127]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "spd command\n (rad/s)"
	      SID		      "1615"
	      Position		      [585, 523, 615, 537]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "key on"
	      SID		      "1616"
	      Position		      [560, 63, 590, 77]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "clutch state"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"clutch\nslipping\nor engaged"
		DstPort			1
	      }
	      Branch {
		Points			[0, 185]
		DstBlock		"clutch\ndisengaged"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [0, -10]
	      DstBlock		      "clutch\nslipping\nor engaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping\nor engaged"
	      SrcPort		      1
	      Points		      [50, 0]
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator3"
	      SrcPort		      1
	      Points		      [40, 0]
	      Branch {
		Points			[0, 95]
		Branch {
		  Points		  [0, 315]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Branch {
		  DstBlock		  "Memory"
		  DstPort		  1
		}
	      }
	      Branch {
		DstBlock		"engine on"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "v_ave_req"
	      SrcPort		      1
	      DstBlock		      "not\nmoving"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "not\nmoving"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\ndisengaged"
	      SrcPort		      1
	      Points		      [60, 0]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "not\nmoving"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "moving next\ntime"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator7"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator7"
	      SrcPort		      1
	      Points		      [50, 0; 0, -60]
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [-110, 0]
	      DstBlock		      "Logical\nOperator7"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "repeated cycle:\n speed required at\nend of NEXT step"
	      SrcPort		      1
	      Points		      [60, 0]
	      DstBlock		      "moving next\ntime"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "moving next\ntime"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0; 0, 35]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "fc_spd_out_r"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator8"
	      SrcPort		      1
	      Points		      [15, 0; 0, 165]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "spd command\n (rad/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "key_on"
	      SrcPort		      1
	      Points		      [0, 0]
	      Branch {
		DstBlock		"Logical\nOperator1"
		DstPort			1
	      }
	      Branch {
		DstBlock		"key on"
		DstPort			1
	      }
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "front and rear\nbrake controller\n(achievable)"
	  SID			  "1617"
	  Ports			  [6, 2]
	  Position		  [230, 356, 265, 484]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/front and rear\nbrake controller\n(achievable)"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "gearbox control\nfor use w/ AT"
	  SID			  "1618"
	  Ports			  [4, 4]
	  Position		  [640, 184, 675, 296]
	  FontName		  "Arial"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "gearbox control\nfor use w/ AT"
	    Location		    [433, 403, 931, 703]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "33"
	    Block {
	      BlockType		      Inport
	      Name		      "eta_gb"
	      SID		      "1619"
	      Position		      [45, 85, 65, 105]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_out_r"
	      SID		      "1620"
	      Position		      [45, 135, 65, 155]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_out_r"
	      SID		      "1621"
	      Position		      [45, 180, 65, 200]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "tires are at\ntraction limit"
	      SID		      "1622"
	      Position		      [45, 230, 65, 250]
	      FontName		      "Arial"
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "1623"
	      Ports		      []
	      Position		      [920, 555, 976, 595]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[430, 234, 888, 441]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "1624"
		  Name			  "Lock-up of the HTC occurs when it is supposed to for the current gear, AND\nthe transmission isn't shift"
		  "ing, AND\nthe lockup wouldn't precipitate an immediate downshift."
		  Position		  [217, 162]
		}
		Annotation {
		  SID			  "1625"
		  Name			  "This gearbox control block computes the current gear number given the gearbox's\nreq'd output torque and"
		  " speed and an estimate its efficiency.  Upshifts occur, given a\ncertain engine speed,  when the estimated engine "
		  "load falls below the upshift curve\nin engine speed/load space, and downshifts likewise occur when estimated engin"
		  "e\nload rises above the downshift curve.  Separate upshift and downshift curves are\ndefined for each gear.  An up"
		  "shift may not be immediately followed by a downshift.\nIf the tires are about to slip, don't upshift unless the en"
		  "gine would be at max. speed.\nEnforce this rule by setting the load to 1 when the tires are about to slip."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "1626"
	      Position		      [385, 65, 405, 85]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "1627"
	      Position		      [305, 375, 325, 395]
	      BlockMirror	      on
	      Value		      "0.5"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant14"
	      SID		      "1628"
	      Position		      [470, 813, 565, 827]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant15"
	      SID		      "1629"
	      Position		      [400, 678, 495, 692]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "1630"
	      Position		      [385, 470, 405, 490]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      SID		      "1631"
	      Ports		      [1, 2]
	      Position		      [740, 666, 745, 704]
	      BackgroundColor	      "black"
	      ShowName		      off
	      Outputs		      "2"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      SID		      "1632"
	      Position		      [570, 785, 695, 805]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <logic>2"
	      SID		      "1633"
	      Position		      [50, 739, 155, 771]
	      ForegroundColor	      "red"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "v_req_limited"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      SID		      "1634"
	      Position		      [570, 845, 695, 865]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From2"
	      SID		      "1635"
	      Position		      [510, 705, 635, 725]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From3"
	      SID		      "1636"
	      Position		      [510, 730, 635, 750]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From4"
	      SID		      "1637"
	      Position		      [510, 640, 635, 660]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From5"
	      SID		      "1638"
	      Position		      [195, 427, 285, 443]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "shifting_out"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From6"
	      SID		      "1639"
	      Position		      [110, 285, 205, 305]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "gear_num_out"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      SID		      "1640"
	      Position		      [535, 207, 560, 233]
	      FontName		      "Arial"
	      Gain		      "-1"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto"
	      SID		      "1641"
	      Position		      [275, 730, 395, 750]
	      NamePlacement	      "alternate"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto1"
	      SID		      "1642"
	      Position		      [275, 754, 395, 776]
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto2"
	      SID		      "1643"
	      Position		      [790, 854, 880, 876]
	      GotoTag		      "gear_num_out"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto3"
	      SID		      "1644"
	      Position		      [780, 744, 870, 766]
	      GotoTag		      "shifting_out"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto4"
	      SID		      "1645"
	      Position		      [880, 235, 1015, 255]
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto5"
	      SID		      "1646"
	      Position		      [905, 65, 1015, 85]
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto6"
	      SID		      "1647"
	      Position		      [900, 140, 1010, 160]
	      NamePlacement	      "alternate"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "1648"
	      Ports		      [4, 1]
	      Position		      [665, 402, 695, 448]
	      Inputs		      "4"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "1649"
	      Ports		      [1, 1]
	      Position		      [315, 419, 345, 451]
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator2"
	      SID		      "1650"
	      Ports		      [1, 1]
	      Position		      [530, 506, 560, 544]
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "1651"
	      Position		      [600, 510, 630, 540]
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "1652"
	      Ports		      [2, 1]
	      Position		      [655, 702, 660, 753]
	      ShowName		      off
	      Inputs		      "2"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      SID		      "1653"
	      Ports		      [2, 1]
	      Position		      [255, 112, 285, 143]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      SID		      "1654"
	      Ports		      [2, 1]
	      Position		      [595, 203, 615, 227]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product4"
	      SID		      "1655"
	      Ports		      [2, 1]
	      Position		      [255, 517, 285, 548]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "1656"
	      Ports		      [2, 1]
	      Position		      [300, 317, 330, 348]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation1"
	      SID		      "1657"
	      Ports		      [1, 1]
	      Position		      [780, 66, 800, 84]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "gb_gears_num"
	      LowerLimit	      "1"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Speed Dependent Shifting"
	      SID		      "1658"
	      Ports		      [1, 2]
	      Position		      [200, 727, 230, 778]
	      SourceBlock	      "lib_controls/SubSystem/Speed Dependent Shifting"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "off"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "1659"
	      Position		      [380, 105, 410, 135]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "1660"
	      Position		      [380, 510, 410, 540]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch2"
	      SID		      "1661"
	      Position		      [715, 805, 745, 835]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch3"
	      SID		      "1662"
	      Position		      [685, 670, 715, 700]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "allow downshift?"
	      SID		      "1663"
	      Ports		      [1, 1]
	      Position		      [475, 32, 505, 68]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"allow downshift?"
		Location		[344, 273, 833, 488]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gearnum"
		  SID			  "1664"
		  Position		  [35, 35, 55, 55]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  SID			  "1665"
		  Ports			  [2, 1]
		  Position		  [380, 43, 410, 67]
		  FontName		  "Arial"
		  Operator		  "NOR"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "1666"
		  Position		  [150, 60, 185, 80]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "1667"
		  Position		  [150, 105, 185, 125]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "1668"
		  Ports			  [2, 1]
		  Position		  [230, 38, 260, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator2"
		  SID			  "1669"
		  Ports			  [2, 1]
		  Position		  [230, 98, 260, 122]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  Outport
		  Name			  "allow shift"
		  SID			  "1670"
		  Position		  [445, 45, 465, 65]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  DstBlock		  "allow shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gearnum"
		  SrcPort		  1
		  Points		  [50, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 25]
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 35]
		    DstBlock		    "Relational\nOperator2"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [15, 0; 0, -15]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 70; -60, 0]
		    DstBlock		    "Memory1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator2"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical\nOperator"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "current\ngear\nnumber"
	      SID		      "1671"
	      Ports		      [2, 1]
	      Position		      [725, 57, 745, 93]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "delta\ngear\nnumber"
	      SID		      "1672"
	      Position		      [655, 114, 685, 146]
	      FontName		      "Arial"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "downshift \ncommand"
	      SID		      "1673"
	      Ports		      [3, 1]
	      Position		      [475, 194, 505, 246]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"downshift \ncommand"
		Location		[441, 362, 916, 657]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "1674"
		  Position		  [45, 98, 75, 112]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "1675"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "1676"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "1677"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "1678"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "1679"
		  Ports			  [1, 1]
		  Position		  [240, 100, 270, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_dnshift_spd|gb_dnshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "1680"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "1681"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "1682"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "1683"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [55, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "downshift \ncommand1"
	      SID		      "1684"
	      Ports		      [3, 1]
	      Position		      [475, 499, 505, 551]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"downshift \ncommand1"
		Location		[431, 372, 906, 667]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "1685"
		  Position		  [45, 98, 75, 112]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "1686"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "1687"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "1688"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "1689"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "1690"
		  Ports			  [1, 1]
		  Position		  [240, 100, 270, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_dnshift_spd|gb_dnshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "1691"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "1692"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "1693"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "1694"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [55, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "engine\ntorque\ncapability"
	      SID		      "1695"
	      Position		      [200, 125, 230, 145]
	      FontName		      "Arial"
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      Table		      "fc_max_trq*fc_trq_scale+eps"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "engine\ntorque\ncapability1"
	      SID		      "1696"
	      Position		      [200, 530, 230, 550]
	      FontName		      "Arial"
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      Table		      "fc_max_trq*fc_trq_scale+eps"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "est. engine trq\nand\nspd"
	      SID		      "1697"
	      Ports		      [4, 3]
	      Position		      [115, 84, 145, 116]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"est. engine trq\nand\nspd"
		Location		[374, 66, 872, 366]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	326
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"43"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear\nnumber"
		  SID			  "1698"
		  Position		  [20, 113, 50, 127]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  " prev eta_gb"
		  SID			  "1699"
		  Position		  [20, 168, 50, 182]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_trq_out_r"
		  SID			  "1700"
		  Position		  [20, 223, 50, 237]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_out_r"
		  SID			  "1701"
		  Position		  [20, 283, 50, 297]
		  Port			  "4"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "1702"
		  Ports			  []
		  Position		  [1095, 305, 1151, 345]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [231, 257, 689, 321]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "1703"
		    Name		    "Estimate engine torque and speed associated with the previous gear, assuming that\nthe gearbox effici"
		    "ency is constant."
		    Position		    [227, 12]
		    VerticalAlignment	    "top"
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "1704"
		  Position		  [760, 220, 780, 240]
		  BlockMirror		  on
		  Value			  "[1 1]"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant5"
		  SID			  "1705"
		  Position		  [620, 70, 640, 90]
		  BlockMirror		  on
		  Value			  "0"
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux"
		  SID			  "1706"
		  Ports			  [1, 2]
		  Position		  [980, 172, 1015, 208]
		  Outputs		  "2"
		}
		Block {
		  BlockType		  From
		  Name			  "From <vc>"
		  SID			  "1707"
		  Position		  [310, 50, 405, 70]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "locked_up"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "K_adv"
		  SID			  "1708"
		  Ports			  [1, 1]
		  Position		  [460, 145, 490, 175]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "K_adv"
		    Location		    [502, 588, 994, 833]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Req'd output\ntrq and spd\n(Nm), (rad/s)"
		    SID			    "1709"
		    Position		    [45, 58, 75, 72]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "K_adv=wout/(Tout)^0.5"
		    SID			    "1710"
		    Position		    [160, 51, 280, 79]
		    FontName		    "Arial"
		    Expr		    "u[2]/u[1]^0.5"
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    "Saturation"
		    SID			    "1711"
		    Ports		    [1, 1]
		    Position		    [305, 50, 335, 80]
		    InputPortMap	    "u0"
		    UpperLimit		    "max(htc_k_adv)"
		    LowerLimit		    "min(htc_k_adv)"
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    "Saturation2"
		    SID			    "1712"
		    Ports		    [1, 1]
		    Position		    [105, 50, 135, 80]
		    ShowName		    off
		    InputPortMap	    "u0"
		    UpperLimit		    "inf"
		    LowerLimit		    "eps"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "K_adv"
		    SID			    "1713"
		    Position		    [385, 58, 415, 72]
		    IconDisplay		    "Port number"
		    }
		    Line {
		    SrcBlock		    "Req'd output\ntrq and spd\n(Nm), (rad/s)"
		    SrcPort		    1
		    DstBlock		    "Saturation2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Saturation2"
		    SrcPort		    1
		    DstBlock		    "K_adv=wout/(Tout)^0.5"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "K_adv=wout/(Tout)^0.5"
		    SrcPort		    1
		    DstBlock		    "Saturation"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Saturation"
		    SrcPort		    1
		    DstBlock		    "K_adv"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  SID			  "1714"
		  Ports			  [2, 1]
		  Position		  [685, 36, 715, 69]
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator1"
		  SID			  "1715"
		  Ports			  [1, 1]
		  Position		  [510, 43, 540, 77]
		  Operator		  "NOT"
		  Inputs		  "1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "1716"
		  Position		  [445, 45, 475, 75]
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux1"
		  SID			  "1717"
		  Ports			  [2, 1]
		  Position		  [805, 97, 840, 133]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux2"
		  SID			  "1718"
		  Ports			  [2, 1]
		  Position		  [430, 142, 440, 178]
		  ShowName		  off
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "1719"
		  Ports			  [2, 1]
		  Position		  [615, 12, 645, 43]
		  Operator		  ">"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "SR Look-Up\nTable\nSR=wout/win"
		  SID			  "1720"
		  Position		  [535, 210, 565, 240]
		  InputValues		  "htc_k_adv"
		  Table			  "htc_sr"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation1"
		  SID			  "1721"
		  Ports			  [1, 1]
		  Position		  [85, 160, 115, 190]
		  InputPortMap		  "u0"
		  UpperLimit		  "1"
		  LowerLimit		  "0.7"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation2"
		  SID			  "1722"
		  Ports			  [1, 1]
		  Position		  [1035, 185, 1065, 215]
		  InputPortMap		  "u0"
		  UpperLimit		  "inf"
		  LowerLimit		  "0"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "1723"
		  Position		  [755, 170, 785, 200]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "TR Look-Up\nTable\nTR=Tout/Tin"
		  SID			  "1724"
		  Position		  [535, 125, 565, 155]
		  InputValues		  "htc_k_adv"
		  Table			  "htc_tr"
		}
		Block {
		  BlockType		  Mux
		  Name			  "TR,SR"
		  SID			  "1725"
		  Ports			  [2, 1]
		  Position		  [695, 157, 730, 193]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "accessories\n(Nm)"
		  SID			  "1726"
		  Ports			  [0, 1]
		  Position		  [235, 186, 260, 214]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "accessories\n(Nm)"
		    Location		    [433, 403, 931, 703]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    From
		    Name		    "From <fc>"
		    SID			    "1727"
		    Position		    [135, 98, 225, 122]
		    CloseFcn		    "tagdialog Close"
		    GotoTag		    "fc_acc_trq_r"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "1728"
		    Position		    [300, 103, 330, 117]
		    IconDisplay		    "Port number"
		    }
		    Line {
		    SrcBlock		    "From <fc>"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Sum
		  Name			  "est eng\ntrq"
		  SID			  "1729"
		  Ports			  [2, 1]
		  Position		  [295, 172, 315, 208]
		  ForegroundColor	  "magenta"
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "gear ratio1"
		  SID			  "1730"
		  Position		  [85, 108, 115, 132]
		  FontName		  "Arial"
		  InputValues		  "[1:length(gb_ratio)]"
		  Table			  "gb_ratio"
		}
		Block {
		  BlockType		  Product
		  Name			  "~eng trq\nand spd"
		  SID			  "1731"
		  Ports			  [2, 1]
		  Position		  [870, 161, 900, 194]
		  Inputs		  "*/"
		}
		Block {
		  BlockType		  Product
		  Name			  "~gb_spd_in_r"
		  SID			  "1732"
		  Ports			  [2, 1]
		  Position		  [170, 265, 200, 300]
		}
		Block {
		  BlockType		  Product
		  Name			  "~gb_trq_in_r"
		  SID			  "1733"
		  Ports			  [3, 1]
		  Position		  [170, 105, 200, 195]
		  Inputs		  "//*"
		}
		Block {
		  BlockType		  Outport
		  Name			  "est eng trq\n(Nm)"
		  SID			  "1734"
		  Position		  [1105, 103, 1135, 117]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Outport
		  Name			  "est eng spd\n(rad/s)"
		  SID			  "1735"
		  Position		  [1100, 193, 1130, 207]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Outport
		  Name			  "gb_spd_in_est\n(rad/s)1"
		  SID			  "1736"
		  Position		  [1100, 238, 1130, 252]
		  ForegroundColor	  "blue"
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "est eng\ntrq"
		  SrcPort		  1
		  Points		  [0, -40; 65, 0]
		  Branch {
		    Points		    [0, -35; 190, 0]
		    Branch {
		    Points		    [200, 0; 0, -10]
		    DstBlock		    "Mux1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -95]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "Mux2"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "~gb_trq_in_r"
		  SrcPort		  1
		  Points		  [70, 0; 0, 30]
		  DstBlock		  "est eng\ntrq"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "accessories\n(Nm)"
		  SrcPort		  1
		  DstBlock		  "est eng\ntrq"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "SR Look-Up\nTable\nSR=wout/win"
		  SrcPort		  1
		  Points		  [110, 0]
		  DstBlock		  "TR,SR"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "TR Look-Up\nTable\nTR=Tout/Tin"
		  SrcPort		  1
		  Points		  [110, 0]
		  DstBlock		  "TR,SR"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "K_adv"
		  SrcPort		  1
		  Points		  [15, 0; 0, -5]
		  Branch {
		    Points		    [0, 70]
		    DstBlock		    "SR Look-Up\nTable\nSR=wout/win"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -15]
		    DstBlock		    "TR Look-Up\nTable\nTR=Tout/Tin"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Mux2"
		  SrcPort		  1
		  DstBlock		  "K_adv"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "~eng trq\nand spd"
		  SrcPort		  1
		  Points		  [60, 0]
		  DstBlock		  "Demux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux1"
		  SrcPort		  1
		  Points		  [5, 0; 0, 55]
		  DstBlock		  "~eng trq\nand spd"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "From <vc>"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  Points		  [20, 0]
		  DstBlock		  "Switch"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Logical\nOperator1"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  1
		  Points		  [40, 0; 0, -70]
		  DstBlock		  "est eng trq\n(Nm)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear\nnumber"
		  SrcPort		  1
		  DstBlock		  "gear ratio1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  Points		  [20, 0]
		  DstBlock		  "Logical\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant5"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Saturation2"
		  SrcPort		  1
		  DstBlock		  "est eng spd\n(rad/s)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  2
		  DstBlock		  "Saturation2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation1"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "~gb_trq_in_r"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  " prev eta_gb"
		  SrcPort		  1
		  DstBlock		  "Saturation1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  DstBlock		  "~eng trq\nand spd"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "TR,SR"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gear ratio1"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    Points		    [0, 155]
		    DstBlock		    "~gb_spd_in_r"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "~gb_trq_in_r"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "gb_spd_out_r"
		  SrcPort		  1
		  DstBlock		  "~gb_spd_in_r"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "gb_trq_out_r"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "~gb_trq_in_r"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "~gb_spd_in_r"
		  SrcPort		  1
		  Points		  [0, -5; 205, 0]
		  Branch {
		    Points		    [0, -110]
		    DstBlock		    "Mux2"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [380, 0; 0, 5]
		    Branch {
		    Points		    [295, 0]
		    DstBlock		    "gb_spd_in_est\n(rad/s)1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Mux1"
		    DstPort		    2
		    }
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "est. engine trq\nand spd assuming\nlockup"
	      SID		      "1737"
	      Ports		      [4, 2]
	      Position		      [115, 489, 145, 521]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"est. engine trq\nand spd assuming\nlockup"
		Location		[541, 693, 1242, 977]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "new gear\nnumber"
		  SID			  "1738"
		  Position		  [30, 28, 60, 42]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  " prev eta_gb"
		  SID			  "1739"
		  Position		  [30, 83, 60, 97]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_trq_out_r"
		  SID			  "1740"
		  Position		  [30, 138, 60, 152]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_in_est"
		  SID			  "1741"
		  Position		  [30, 218, 60, 232]
		  Port			  "4"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "1742"
		  Ports			  []
		  Position		  [625, 180, 681, 220]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [231, 257, 689, 321]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "1743"
		    Name		    "Estimate engine torque and speed associated with the current gear, assuming that\nthe gearbox efficie"
		    "ncy is constant."
		    Position		    [227, 12]
		    VerticalAlignment	    "top"
		    }
		  }
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "1744"
		  Position		  [130, 180, 160, 210]
		  X0			  "gb_ratio(1)"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation1"
		  SID			  "1745"
		  Ports			  [1, 1]
		  Position		  [95, 75, 125, 105]
		  InputPortMap		  "u0"
		  UpperLimit		  "1"
		  LowerLimit		  "0.7"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation2"
		  SID			  "1746"
		  Ports			  [1, 1]
		  Position		  [580, 65, 610, 95]
		  InputPortMap		  "u0"
		  UpperLimit		  "inf"
		  LowerLimit		  "0"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "accessories\n(Nm)"
		  SID			  "1747"
		  Ports			  [0, 1]
		  Position		  [325, 87, 355, 123]
		  ForegroundColor	  "magenta"
		  NamePlacement		  "alternate"
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "accessories\n(Nm)"
		    Location		    [304, 377, 530, 497]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    From
		    Name		    "From <fc>"
		    SID			    "1748"
		    Position		    [30, 29, 120, 61]
		    CloseFcn		    "tagdialog Close"
		    GotoTag		    "fc_acc_trq_r"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "T_acc"
		    SID			    "1749"
		    Position		    [145, 35, 165, 55]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "From <fc>"
		    SrcPort		    1
		    DstBlock		    "T_acc"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Sum
		  Name			  "est eng\ntrq"
		  SID			  "1750"
		  Ports			  [2, 1]
		  Position		  [385, 57, 405, 93]
		  ForegroundColor	  "magenta"
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "gear ratio1"
		  SID			  "1751"
		  Position		  [95, 23, 125, 47]
		  FontName		  "Arial"
		  InputValues		  "[1:length(gb_ratio)]"
		  Table			  "gb_ratio"
		}
		Block {
		  BlockType		  Product
		  Name			  "~gb_spd_in_r"
		  SID			  "1752"
		  Ports			  [3, 1]
		  Position		  [180, 150, 210, 240]
		  Inputs		  "*/*"
		}
		Block {
		  BlockType		  Product
		  Name			  "~gb_trq_in_r"
		  SID			  "1753"
		  Ports			  [3, 1]
		  Position		  [180, 20, 210, 110]
		  Inputs		  "//*"
		}
		Block {
		  BlockType		  Outport
		  Name			  "est eng trq\n(Nm)"
		  SID			  "1754"
		  Position		  [645, 18, 675, 32]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Outport
		  Name			  "est eng spd\n(rad/s)"
		  SID			  "1755"
		  Position		  [645, 73, 675, 87]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "est eng\ntrq"
		  SrcPort		  1
		  Points		  [0, -50]
		  DstBlock		  "est eng trq\n(Nm)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "~gb_trq_in_r"
		  SrcPort		  1
		  DstBlock		  "est eng\ntrq"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "accessories\n(Nm)"
		  SrcPort		  1
		  Points		  [0, -20]
		  DstBlock		  "est eng\ntrq"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "gb_spd_in_est"
		  SrcPort		  1
		  DstBlock		  "~gb_spd_in_r"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "~gb_spd_in_r"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Saturation2"
		  SrcPort		  1
		  DstBlock		  "est eng spd\n(rad/s)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "new gear\nnumber"
		  SrcPort		  1
		  DstBlock		  "gear ratio1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gb_trq_out_r"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "~gb_trq_in_r"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "gear ratio1"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    Points		    [0, 130]
		    Branch {
		    Points		    [-35, 0]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "~gb_spd_in_r"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "~gb_trq_in_r"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  " prev eta_gb"
		  SrcPort		  1
		  DstBlock		  "Saturation1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation1"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "~gb_trq_in_r"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "~gb_spd_in_r"
		  SrcPort		  1
		  Points		  [310, 0; 0, -110; 30, 0; 0, -5]
		  DstBlock		  "Saturation2"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio1"
	      SID		      "1756"
	      Position		      [835, 63, 865, 87]
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      Table		      "gb_ratio"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "load=T/\n(maxT\nat spd)"
	      SID		      "1757"
	      Ports		      [1, 1]
	      Position		      [310, 116, 345, 144]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "-1"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "load=T/\n(maxT\nat spd)1"
	      SID		      "1758"
	      Ports		      [1, 1]
	      Position		      [310, 521, 345, 549]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "-1"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "lock-up in\nthis gear"
	      SID		      "1759"
	      Position		      [245, 313, 275, 337]
	      FontName		      "Arial"
	      InputValues	      "[1:length(htc_lockup)]"
	      Table		      "htc_lockup"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev gear\nnumber"
	      SID		      "1760"
	      Position		      [745, 15, 785, 35]
	      BlockMirror	      on
	      FontName		      "Arial"
	      X0		      "gb_num_init"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "shifting1"
	      SID		      "1761"
	      Ports		      [1, 1]
	      Position		      [835, 134, 865, 166]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"shifting1"
		Location		[76, 244, 366, 435]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gear\nnumber"
		  SID			  "1762"
		  Position		  [15, 50, 35, 70]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "1763"
		  Position		  [20, 131, 120, 159]
		  FontName		  "Arial"
		  Value			  "gb_shift_delay-1e-6"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "1764"
		  Ports			  [2, 1]
		  Position		  [185, 53, 215, 77]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "time since last shift"
		  SID			  "1765"
		  Ports			  [1, 1]
		  Position		  [65, 43, 125, 77]
		  ShowName		  off
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('time since\\nlast shift')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "time since last shift"
		    Location		    [47, 595, 337, 734]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "1766"
		    Position		    [10, 60, 30, 80]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "just shifted"
		    SID			    "1767"
		    Ports		    [1, 1]
		    Position		    [60, 57, 110, 83]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('just\\nshifted')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "just shifted"
		    Location		    [48, 850, 371, 995]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "1768"
		    Position		    [55, 55, 75, 75]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "1769"
		    Position		    [120, 55, 155, 75]
		    FontName		    "Arial"
		    X0			    "1"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    SID			    "1770"
		    Ports		    [2, 1]
		    Position		    [190, 58, 220, 82]
		    FontName		    "Arial"
		    Operator		    "~="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "1771"
		    Position		    [250, 60, 270, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, 30; 75, 0; 0, -20]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "timer"
		    SID			    "1772"
		    Ports		    [1, 1]
		    Position		    [140, 55, 175, 85]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('timer')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "timer"
		    Location		    [389, 635, 793, 850]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "trigger"
		    SID			    "1773"
		    Position		    [15, 125, 35, 145]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "1774"
		    Position		    [100, 100, 120, 120]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant1"
		    SID			    "1775"
		    Position		    [100, 150, 120, 170]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant2"
		    SID			    "1776"
		    Position		    [150, 5, 170, 25]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "1777"
		    Position		    [265, 59, 295, 91]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "no-lag\nReset Integrator"
		    SID			    "1778"
		    Ports		    [3, 1]
		    Position		    [155, 96, 205, 174]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskType		    "No-lag Reset Integrator"
		    MaskDescription	    "No-lag Reset Integrator"
		    MaskHelp		    "Integrates first input using Euler technique.\\nAt the time step that input 2 <> zero,\\noutput i"
		    "s reset to input 3."
		    MaskPromptString	    "Initial Value"
		    MaskStyleString	    "edit"
		    MaskVariables	    "initval=@1;"
		    MaskTunableValueString  "on"
		    MaskEnableString	    "on"
		    MaskVisibilityString    "on"
		    MaskToolTipString	    "on"
		    MaskDisplay		    "disp('1/s\\nw/ reset\\nno lag')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "15"
		    System {
		    Name		    "no-lag\nReset Integrator"
		    Location		    [258, 616, 780, 880]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "1779"
		    Position		    [60, 100, 80, 120]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    SID			    "1780"
		    Position		    [60, 140, 80, 160]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_3"
		    SID			    "1781"
		    Position		    [45, 185, 65, 205]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "1782"
		    Position		    [125, 205, 145, 225]
		    BlockRotation	    270
		    NamePlacement	    "alternate"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "1783"
		    Position		    [340, 55, 375, 75]
		    BlockMirror		    on
		    FontName		    "Arial"
		    X0			    "initval"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    SID			    "1784"
		    Ports		    [2, 1]
		    Position		    [160, 96, 180, 114]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    SID			    "1785"
		    Ports		    [2, 1]
		    Position		    [230, 90, 250, 110]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "1786"
		    Position		    [290, 139, 320, 171]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "dt"
		    SID			    "1787"
		    Ports		    [0, 1]
		    Position		    [112, 50, 138, 80]
		    BlockRotation	    270
		    BlockMirror		    on
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "dt"
		    Location		    [80, 285, 429, 424]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "1788"
		    Position		    [65, 60, 85, 80]
		    FontName		    "Arial"
		    FontSize		    8
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "1789"
		    Position		    [125, 85, 160, 105]
		    FontName		    "Arial"
		    FontSize		    8
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    SID			    "1790"
		    Ports		    [2, 1]
		    Position		    [205, 65, 225, 85]
		    FontName		    "Arial"
		    FontSize		    8
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "1791"
		    Position		    [255, 65, 275, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [10, 0; 0, -15]
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "in_2==0"
		    SID			    "1792"
		    Ports		    [2, 1]
		    Position		    [160, 143, 190, 167]
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "1793"
		    Position		    [455, 145, 475, 165]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_3"
		    SrcPort		    1
		    Points		    [200, 0; 0, -30]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "in_2==0"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "dt"
		    SrcPort		    1
		    Points		    [0, 15]
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    Points		    [-130, 0; 0, 30]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    Points		    [10, 0; 0, 45]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    Points		    [85, 0]
		    Branch {
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -90]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "in_2==0"
		    SrcPort		    1
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    Points		    [0, -40]
		    DstBlock		    "in_2==0"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "time"
		    SID			    "1794"
		    Position		    [350, 65, 370, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    DstBlock		    "time"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "trigger"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, -60]
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Constant2"
		    SrcPort		    1
		    Points		    [35, 0; 0, 50]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant1"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "no-lag\nReset Integrator"
		    SrcPort		    1
		    Points		    [35, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "1795"
		    Position		    [225, 60, 245, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "just shifted"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "just shifted"
		    SrcPort		    1
		    DstBlock		    "timer"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "timer"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "1796"
		  Position		  [250, 55, 270, 75]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gear\nnumber"
		  SrcPort		  1
		  DstBlock		  "time since last shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [15, 0; 0, -75]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "time since last shift"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "upshift\n command"
	      SID		      "1797"
	      Ports		      [3, 1]
	      Position		      [475, 94, 505, 146]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"upshift\n command"
		Location		[431, 171, 906, 466]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "1798"
		  Position		  [45, 103, 75, 117]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "1799"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "1800"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "1801"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "1802"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "1803"
		  Ports			  [1, 1]
		  Position		  [245, 100, 275, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_upshift_spd|gb_upshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [1031, 545, 1271, 627]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "1804"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "1805"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "1806"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "1807"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [50, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear number, out"
	      SID		      "1808"
	      Position		      [810, 810, 830, 830]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear ratio, out"
	      SID		      "1809"
	      Position		      [810, 650, 830, 670]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "shifting, out"
	      SID		      "1810"
	      Position		      [810, 695, 830, 715]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "locked up"
	      SID		      "1811"
	      Position		      [940, 415, 960, 435]
	      FontName		      "Arial"
	      Port		      "4"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "downshift \ncommand1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "load=T/\n(maxT\nat spd)1"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [10, 0; 0, -85]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "downshift \ncommand1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      DstBlock		      "locked up"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      DstBlock		      "Product3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "upshift\n command"
	      SrcPort		      1
	      Points		      [120, 0]
	      Branch {
		DstBlock		"delta\ngear\nnumber"
		DstPort			1
	      }
	      Branch {
		Points			[0, 10]
		DstBlock		"delta\ngear\nnumber"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		DstBlock		"upshift\n command"
		DstPort			2
	      }
	      Branch {
		Points			[0, 100]
		DstBlock		"downshift \ncommand"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator2"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"Memory"
		DstPort			1
	      }
	      Branch {
		Points			[0, -95]
		DstBlock		"Logical\nOperator"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "est. engine trq\nand spd assuming\nlockup"
	      SrcPort		      2
	      Points		      [35, 0; 0, 25]
	      Branch {
		Points			[0, 55; 265, 0; 0, -55]
		DstBlock		"downshift \ncommand1"
		DstPort			3
	      }
	      Branch {
		DstBlock		"engine\ntorque\ncapability1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "est. engine trq\nand\nspd"
	      SrcPort		      3
	      Points		      [0, 115; -55, 0; 0, 295]
	      DstBlock		      "est. engine trq\nand spd assuming\nlockup"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "tires are at\ntraction limit"
	      SrcPort		      1
	      Points		      [290, 0]
	      Branch {
		Points			[0, -120]
		DstBlock		"Switch"
		DstPort			2
	      }
	      Branch {
		Points			[0, 285]
		DstBlock		"Switch1"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "gb_trq_out_r"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		Points			[0, 365]
		DstBlock		"est. engine trq\nand spd assuming\nlockup"
		DstPort			3
	      }
	      Branch {
		Points			[0, -40]
		DstBlock		"est. engine trq\nand\nspd"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "eta_gb"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, 405]
		DstBlock		"est. engine trq\nand spd assuming\nlockup"
		DstPort			2
	      }
	      Branch {
		DstBlock		"est. engine trq\nand\nspd"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "est. engine trq\nand spd assuming\nlockup"
	      SrcPort		      1
	      Points		      [90, 0]
	      DstBlock		      "Product4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "engine\ntorque\ncapability1"
	      SrcPort		      1
	      DstBlock		      "Product4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product4"
	      SrcPort		      1
	      DstBlock		      "load=T/\n(maxT\nat spd)1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [0, -15]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "downshift \ncommand"
	      SrcPort		      1
	      DstBlock		      "Gain1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "load=T/\n(maxT\nat spd)"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "est. engine trq\nand\nspd"
	      SrcPort		      1
	      Points		      [90, 0]
	      DstBlock		      "Product2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "engine\ntorque\ncapability"
	      SrcPort		      1
	      DstBlock		      "Product2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "current\ngear\nnumber"
	      SrcPort		      1
	      DstBlock		      "Saturation1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      Points		      [10, 0; 0, -75]
	      DstBlock		      "delta\ngear\nnumber"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "allow downshift?"
	      SrcPort		      1
	      Points		      [55, 0; 0, 160]
	      DstBlock		      "Product3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "delta\ngear\nnumber"
	      SrcPort		      1
	      Points		      [15, 0; 0, -45]
	      DstBlock		      "current\ngear\nnumber"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "load=T/\n(maxT\nat spd)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation1"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		Points			[0, 0]
		Branch {
		  DstBlock		  "gear ratio1"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, -50]
		  DstBlock		  "prev gear\nnumber"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[0, 75]
		Branch {
		  DstBlock		  "shifting1"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 95]
		  DstBlock		  "Goto4"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "prev gear\nnumber"
	      SrcPort		      1
	      Points		      [-165, 0]
	      Branch {
		Points			[-125, 0]
		Branch {
		  Points		  [-355, 0; 0, 60]
		  DstBlock		  "est. engine trq\nand\nspd"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 25]
		  Branch {
		    DstBlock		    "allow downshift?"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 55]
		    Branch {
		    Points		    [0, 100]
		    Branch {
		    Points		    [0, 305]
		    DstBlock		    "downshift \ncommand1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "downshift \ncommand"
		    DstPort		    1
		    }
		    }
		    Branch {
		    DstBlock		    "upshift\n command"
		    DstPort		    1
		    }
		  }
		}
	      }
	      Branch {
		Points			[0, 40]
		DstBlock		"current\ngear\nnumber"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "gb_spd_out_r"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "est. engine trq\nand\nspd"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "est. engine trq\nand\nspd"
	      SrcPort		      2
	      Points		      [35, 0; 0, 35]
	      Branch {
		DstBlock		"engine\ntorque\ncapability"
		DstPort			1
	      }
	      Branch {
		Points			[0, 65; 240, 0]
		Branch {
		  Points		  [0, -65]
		  DstBlock		  "upshift\n command"
		  DstPort		  3
		}
		Branch {
		  Points		  [0, 35]
		  DstBlock		  "downshift \ncommand"
		  DstPort		  3
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Constant15"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From4"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Switch3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Switch3"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From2"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From3"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch3"
	      SrcPort		      1
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "gear ratio, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant14"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From <logic>2"
	      SrcPort		      1
	      DstBlock		      "Speed Dependent Shifting"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      1
	      DstBlock		      "Goto"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      2
	      DstBlock		      "Goto1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch2"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"gear number, out"
		DstPort			1
	      }
	      Branch {
		Points			[0, 45]
		DstBlock		"Goto2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      Points		      [0, 0]
	      Branch {
		Points			[45, 0]
		DstBlock		"shifting, out"
		DstPort			1
	      }
	      Branch {
		Points			[0, 60]
		DstBlock		"Goto3"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "From5"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      Labels		      [2, 0]
	      SrcBlock		      "From6"
	      SrcPort		      1
	      Points		      [15, 0; 0, 30]
	      Branch {
		DstBlock		"lock-up in\nthis gear"
		DstPort			1
	      }
	      Branch {
		Points			[-125, 0]
		DstBlock		"est. engine trq\nand spd assuming\nlockup"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [15, 0; 0, 75]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "lock-up in\nthis gear"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gear ratio1"
	      SrcPort		      1
	      DstBlock		      "Goto5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "shifting1"
	      SrcPort		      1
	      DstBlock		      "Goto6"
	      DstPort		      1
	    }
	    Annotation {
	      SID		      "1812"
	      Name		      "gear ratio and shifting pre-muxed"
	      Position		      [559, 627]
	    }
	    Annotation {
	      SID		      "1813"
	      Name		      "output changes depending\nupon whether speed\ndependent shifting is used"
	      Position		      [945, 780]
	    }
	    Annotation {
	      SID		      "1814"
	      Name		      "default gear number\ncalculation"
	      Position		      [949, 289]
	    }
	    Annotation {
	      SID		      "1815"
	      Name		      "default shifting\ncalculation"
	      Position		      [958, 181]
	    }
	    Annotation {
	      SID		      "1816"
	      Name		      "default gear ratio\ncalculation"
	      Position		      [967, 44]
	    }
	    Annotation {
	      SID		      "1817"
	      Name		      "local GOTO blocks:"
	      Position		      [967, 17]
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "sim stop\nsubsystem"
	  SID			  "1818"
	  Ports			  []
	  Position		  [35, 20, 65, 70]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/sim stop\nsubsystem"
	  SourceType		  "SubSystem"
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>2"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <wh>3"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From<wh>4"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <wh>5"
	  SrcPort		  1
	  Points		  [0, -5]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>6"
	  SrcPort		  1
	  Points		  [60, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>1"
	  SrcPort		  1
	  DstBlock		  "gearbox control\nfor use w/ AT"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From<gb>"
	  SrcPort		  1
	  DstBlock		  "gearbox control\nfor use w/ AT"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <gb>3"
	  SrcPort		  1
	  DstBlock		  "gearbox control\nfor use w/ AT"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <gb>2"
	  SrcPort		  1
	  DstBlock		  "gearbox control\nfor use w/ AT"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox control\nfor use w/ AT"
	  SrcPort		  4
	  Points		  [25, 0]
	  DstBlock		  "Goto <htc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "engine\ncontrol"
	  SrcPort		  3
	  Points		  [10, 0]
	  DstBlock		  "Goto <fc><mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "engine\ncontrol"
	  SrcPort		  1
	  DstBlock		  "Goto <fc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <fc>"
	  SrcPort		  1
	  DstBlock		  "engine\ncontrol"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "engine\ncontrol"
	  SrcPort		  2
	  DstBlock		  "Goto <fc>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <fc>1"
	  SrcPort		  1
	  Points		  [35, 0]
	  DstBlock		  "engine\ncontrol"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <fc>2"
	  SrcPort		  1
	  Points		  [35, 0]
	  DstBlock		  "engine\ncontrol"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>4"
	  SrcPort		  1
	  DstBlock		  "engine\ncontrol"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "Relational\nOperator"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  2
	  Points		  [130, 0]
	  Branch {
	    DstBlock		    "Sum"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -50]
	    DstBlock		    "Goto <wh>8"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  1
	  Points		  [0, 5; 5, 0]
	  Branch {
	    DstBlock		    "braking strategy"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [190, 0]
	    Branch {
	      Points		      [0, -35]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Branch {
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>5"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <veh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  2
	  Points		  [0, 5]
	  DstBlock		  "Goto <wh>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  3
	  Points		  [0, 15]
	  DstBlock		  "Goto <wh>2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <wh>7"
	  SrcPort		  1
	  DstBlock		  "Relational\nOperator"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <wh>1"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>8"
	  SrcPort		  1
	  DstBlock		  "braking strategy"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox control\nfor use w/ AT"
	  SrcPort		  1
	  DstBlock		  "Goto <htc>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox control\nfor use w/ AT"
	  SrcPort		  2
	  DstBlock		  "Goto <gb>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox control\nfor use w/ AT"
	  SrcPort		  3
	  Points		  [40, 0]
	  DstBlock		  "Goto <gb>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  4
	  Points		  [15, 0]
	  DstBlock		  "Goto <wh>6"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  5
	  Points		  [10, 0]
	  DstBlock		  "Goto <wh>7"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Ground"
	  SrcPort		  1
	  Points		  [5, 0; 0, -35]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  6
	}
	Annotation {
	  SID			  "1819"
	  Name			  "required \nforce (N)"
	  Position		  [229, 122]
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "<vc> conv cvt"
      SID		      "302"
      Ports		      [0, 1]
      Position		      [265, 48, 325, 102]
      BackgroundColor	      "yellow"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_vc.jpg'))\n"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"<vc> conv cvt"
	Location		[10, 112, 950, 1190]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"89"
	Block {
	  BlockType		  Constant
	  Name			  "Constant"
	  SID			  "1820"
	  Position		  [650, 235, 670, 255]
	  Value			  "0"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>"
	  SID			  "1821"
	  Position		  [560, 480, 655, 500]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_spd_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>1"
	  SID			  "1822"
	  Position		  [560, 445, 655, 465]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>2"
	  SID			  "1823"
	  Position		  [555, 410, 650, 430]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "clutch_state"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>3"
	  SID			  "1824"
	  Position		  [570, 285, 665, 305]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>1"
	  SID			  "1825"
	  Position		  [630, 99, 715, 121]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>2"
	  SID			  "1826"
	  Position		  [630, 141, 725, 159]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "eta_gb"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>3"
	  SID			  "1827"
	  Position		  [635, 175, 730, 195]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "slip_limited"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>4"
	  SID			  "1828"
	  Position		  [570, 320, 665, 340]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>5"
	  SID			  "1829"
	  Position		  [570, 360, 665, 380]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <veh>"
	  SID			  "1830"
	  Position		  [80, 192, 155, 208]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_prev"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>"
	  SID			  "1831"
	  Position		  [80, 225, 140, 245]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>1"
	  SID			  "1832"
	  Position		  [80, 156, 165, 174]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>2"
	  SID			  "1833"
	  Position		  [55, 402, 165, 418]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_drivetrain_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>3"
	  SID			  "1834"
	  Position		  [60, 436, 160, 454]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_wheel_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>4"
	  SID			  "1835"
	  Position		  [560, 516, 645, 534]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>5"
	  SID			  "1836"
	  Position		  [35, 496, 155, 514]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_rear_brake"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>6"
	  SID			  "1837"
	  Position		  [60, 365, 120, 385]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>7"
	  SID			  "1838"
	  Position		  [365, 170, 425, 190]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>8"
	  SID			  "1839"
	  Position		  [125, 81, 210, 99]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From<gb>"
	  SID			  "1840"
	  Position		  [630, 71, 720, 89]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From<wh>4"
	  SID			  "1841"
	  Position		  [55, 461, 170, 479]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_front_brake"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>"
	  SID			  "1842"
	  Position		  [775, 423, 845, 447]
	  NamePlacement		  "alternate"
	  GotoTag		  "engine_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>1"
	  SID			  "1843"
	  Position		  [765, 468, 855, 492]
	  NamePlacement		  "alternate"
	  GotoTag		  "spd_command"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc><mc>"
	  SID			  "1844"
	  Position		  [780, 506, 830, 524]
	  GotoTag		  "key_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>"
	  SID			  "1845"
	  Position		  [815, 113, 905, 137]
	  GotoTag		  "gear_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>1"
	  SID			  "1846"
	  Position		  [710, 233, 800, 257]
	  GotoTag		  "shifting"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>"
	  SID			  "1847"
	  Position		  [780, 274, 865, 296]
	  GotoTag		  "clutch_state"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>1"
	  SID			  "1848"
	  Position		  [510, 166, 595, 184]
	  GotoTag		  "slip_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>"
	  SID			  "1849"
	  Position		  [460, 115, 545, 135]
	  GotoTag		  "F_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>1"
	  SID			  "1850"
	  Position		  [260, 174, 350, 196]
	  GotoTag		  "v_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>2"
	  SID			  "1851"
	  Position		  [335, 206, 425, 224]
	  GotoTag		  "wt_front_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>3"
	  SID			  "1852"
	  Position		  [255, 406, 340, 424]
	  GotoTag		  "F_front_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>4"
	  SID			  "1853"
	  Position		  [255, 469, 340, 491]
	  GotoTag		  "F_rear_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>5"
	  SID			  "1854"
	  Position		  [290, 80, 400, 100]
	  GotoTag		  "F_front_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>6"
	  SID			  "1855"
	  Position		  [255, 241, 345, 259]
	  GotoTag		  "wt_rear_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>7"
	  SID			  "1856"
	  Position		  [250, 271, 340, 289]
	  GotoTag		  "front_traction_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>8"
	  SID			  "1857"
	  Position		  [455, 40, 565, 60]
	  GotoTag		  "F_rear_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Ground
	  Name			  "Ground"
	  SID			  "1858"
	  Position		  [70, 535, 90, 555]
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator"
	  SID			  "1859"
	  Ports			  [2, 1]
	  Position		  [455, 157, 485, 188]
	  Operator		  "~="
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  SID			  "1860"
	  Ports			  [2, 1]
	  Position		  [410, 107, 440, 138]
	  Inputs		  "-+"
	}
	Block {
	  BlockType		  Reference
	  Name			  "braking strategy"
	  SID			  "1861"
	  Ports			  [2, 2]
	  Position		  [245, 77, 275, 128]
	  NamePlacement		  "alternate"
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/braking strategy"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "clutch\ncontrol"
	  SID			  "1862"
	  Ports			  [3, 1]
	  Position		  [705, 293, 740, 367]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "clutch\ncontrol"
	    Location		    [159, 109, 938, 559]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "96"
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "1863"
	      Position		      [30, 28, 60, 42]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_in_r"
	      SID		      "1864"
	      Position		      [30, 83, 60, 97]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_in_r"
	      SID		      "1865"
	      Position		      [25, 193, 55, 207]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "1866"
	      Ports		      []
	      Position		      [705, 395, 761, 435]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[275, 723, 733, 885]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "1867"
		  Name			  "This clutch control block determines the clutch state given the req'd clutch output torque \nand speed ("
		  "labelled as gearbox input torque and speed), and the gear number history.\n                          conditions   "
		  "                                                                    clutch state\ngear is being shifted OR (trq <~"
		  " 0 AND (engine is                                     1 == disengaged\nclutched to avoid compression braking OR sp"
		  "d < idle))                                                              \n\n(trq >~ 0) AND (spd < launch speed) AN"
		  "D clutch                                       2 == slipping     \nwas not engaged during previous time step      "
		  "                                                           \n\nneither of above sets of conditions are met        "
		  "                                  3 == engaged"
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "1868"
	      Position		      [85, 108, 120, 132]
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "1869"
	      Position		      [85, 149, 165, 171]
	      Value		      "vc_clutch_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "1870"
	      Position		      [85, 214, 165, 236]
	      Value		      "vc_idle_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "1871"
	      Position		      [85, 280, 120, 300]
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "1872"
	      Position		      [85, 344, 165, 366]
	      Value		      "vc_launch_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "1873"
	      Position		      [510, 380, 545, 400]
	      BlockMirror	      on
	      Value		      "2.5"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      SID		      "1874"
	      Position		      [600, 135, 660, 165]
	      Expr		      "u[1]+2*u[2]*(1-u[1])*(1-u[3])+3*u[3]*(1-u[1])"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "1875"
	      Ports		      [2, 1]
	      Position		      [320, 92, 350, 123]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "1876"
	      Ports		      [2, 1]
	      Position		      [255, 152, 285, 183]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "1877"
	      Position		      [510, 325, 540, 355]
	      BlockMirror	      on
	      X0		      "1+(2*(cyc_mph(1,2)>0))"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "1878"
	      Ports		      [3, 1]
	      Position		      [530, 132, 565, 168]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "1879"
	      Ports		      [2, 1]
	      Position		      [240, 82, 270, 113]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "1880"
	      Ports		      [2, 1]
	      Position		      [200, 202, 230, 233]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "1881"
	      Ports		      [2, 1]
	      Position		      [200, 267, 230, 298]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      SID		      "1882"
	      Ports		      [2, 1]
	      Position		      [200, 332, 230, 363]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\ndisengaged"
	      SID		      "1883"
	      Ports		      [2, 1]
	      Position		      [390, 42, 420, 73]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nengaged"
	      SID		      "1884"
	      Ports		      [2, 1]
	      Position		      [460, 142, 490, 173]
	      Operator		      "NOR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping"
	      SID		      "1885"
	      Ports		      [3, 1]
	      Position		      [320, 279, 350, 311]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch was NOT\nfully engaged\nduring last time step"
	      SID		      "1886"
	      Ports		      [2, 1]
	      Position		      [415, 330, 450, 365]
	      BlockMirror	      on
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "clutch\nstate"
	      SID		      "1887"
	      Position		      [725, 143, 755, 157]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gb_spd_in_r"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		Points			[105, 0; 0, 10]
		DstBlock		"Relational\nOperator1"
		DstPort			1
	      }
	      Branch {
		Points			[0, 140]
		DstBlock		"Relational\nOperator3"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      DstBlock		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "clutch\nengaged"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "clutch\ndisengaged"
	      SrcPort		      1
	      Points		      [10, 0; 0, 40]
	      Branch {
		Points			[0, 50]
		DstBlock		"clutch\nengaged"
		DstPort			1
	      }
	      Branch {
		Points			[80, 0]
		DstBlock		"Mux"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		DstBlock		"clutch\nstate"
		DstPort			1
	      }
	      Branch {
		Points			[15, 0; 0, 190]
		DstBlock		"Memory"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "clutch\nslipping"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping"
	      SrcPort		      1
	      Points		      [80, 0; 0, -95]
	      Branch {
		Points			[0, -35]
		DstBlock		"clutch\nengaged"
		DstPort			2
	      }
	      Branch {
		Points			[80, 0]
		DstBlock		"Mux"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      Points		      [30, 0; 0, -55]
	      DstBlock		      "clutch\nslipping"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      Points		      [-30, 0; 0, -35]
	      DstBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      SrcPort		      1
	      Points		      [-120, 0; 0, -45]
	      DstBlock		      "clutch\nslipping"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [90, 0; 0, -15]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gb_trq_in_r"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	      Branch {
		Points			[0, 185]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      Points		      [15, 0; 0, -45]
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      Points		      [310, 0]
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "config traction control"
	  SID			  "1888"
	  Ports			  [3, 5]
	  Position		  [185, 149, 220, 251]
	  BackgroundColor	  "darkGreen"
	  AttributesFormatString  "%<BlockChoice>"
	  ShowPortLabels	  "none"
	  BlockChoice		  "traction control 2 axle"
	  TemplateBlock		  "lib_controls/SubSystem/config traction control"
	  MemberBlocks		  "traction control 2 axle,traction control J2452 2 axle"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "config traction control"
	    Location		    [148, 182, 646, 482]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    SIDHighWatermark	    "6898"
	    Block {
	      BlockType		      Inport
	      Name		      "time-average\nvehicle speed\n req'd (m/s)"
	      SID		      "1888::706"
	      Position		      [20, 40, 40, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SID		      "1888::707"
	      Position		      [20, 80, 40, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "total tractive\nforce req'd\n(N)"
	      SID		      "1888::708"
	      Position		      [20, 120, 40, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "traction control\n2 axle"
	      SID		      "1888::709"
	      Ports		      [3, 5]
	      Position		      [100, 40, 140, 80]
	      BackgroundColor	      "darkGreen"
	      LibraryVersion	      "1.479"
	      SourceBlock	      "lib_controls/SubSystem/traction control 2 axle"
	      SourceType	      "SubSystem"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd force\n(N)"
	      SID		      "1888::710"
	      Position		      [200, 40, 220, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd speed\n(m/s)"
	      SID		      "1888::711"
	      Position		      [200, 80, 220, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nfront axle\n(N)"
	      SID		      "1888::712"
	      Position		      [200, 120, 220, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nrear axle\n(N)"
	      SID		      "1888::713"
	      Position		      [200, 160, 220, 180]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "front/total \ntraction ratio"
	      SID		      "1888::714"
	      Position		      [200, 200, 220, 220]
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "time-average\nvehicle speed\n req'd (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "total tractive\nforce req'd\n(N)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      1
	      DstBlock		      "req'd force\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      2
	      DstBlock		      "req'd speed\n(m/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      3
	      DstBlock		      "weight on\nfront axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      4
	      DstBlock		      "weight on\nrear axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      5
	      DstBlock		      "front/total \ntraction ratio"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "cvt control"
	  SID			  "1889"
	  Ports			  [4, 1]
	  Position		  [760, 61, 795, 189]
	  FontName		  "Arial"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "cvt control"
	    Location		    [2, 43, 966, 766]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "cvt_trq_out_r"
	      SID		      "1890"
	      Position		      [35, 85, 55, 105]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "cvt_spd_out_r"
	      SID		      "1891"
	      Position		      [35, 145, 55, 165]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "prev.\nPout/Pin"
	      SID		      "1892"
	      Position		      [30, 190, 50, 210]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "tires are at\ntraction limit"
	      SID		      "1893"
	      Position		      [30, 290, 50, 310]
	      FontName		      "Arial"
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "1894"
	      Ports		      []
	      Position		      [625, 310, 681, 350]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[332, 545, 628, 674]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "1895"
		  Name			  "This CVT control block tries to keep the engine\noperating along the curve defined in engine \npower/spe"
		  "ed space defined by cvt_locus_pwr\nand cv_locus_spd.\n\nUsually, this curve will be the locus of best\n efficiency"
		  " points over the range of engine power."
		  Position		  [147, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "1896"
	      Position		      [350, 210, 380, 230]
	      BlockMirror	      on
	      Value		      "eps"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "1897"
	      Position		      [165, 240, 195, 260]
	      BlockMirror	      on
	      Value		      "eps"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      SID		      "1898"
	      Position		      [105, 34, 245, 56]
	      BackgroundColor	      "gray"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "acc_mech_pwr_est"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      SID		      "1899"
	      Ports		      [3, 1]
	      Position		      [225, 89, 255, 121]
	      Inputs		      "**/"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      SID		      "1900"
	      Ports		      [2, 1]
	      Position		      [475, 91, 505, 124]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation1"
	      SID		      "1901"
	      Ports		      [1, 1]
	      Position		      [535, 100, 565, 120]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "max(gb_ratio)"
	      LowerLimit	      "min(gb_ratio)"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation2"
	      SID		      "1902"
	      Ports		      [1, 1]
	      Position		      [360, 90, 390, 110]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "max(cvt_locus_pwr)*fc_trq_scale*fc_spd_scale"
	      LowerLimit	      "min(cvt_locus_pwr)*fc_trq_scale*fc_spd_scale"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      SID		      "1903"
	      Ports		      [2, 1]
	      Position		      [165, 192, 195, 223]
	    }
	    Block {
	      BlockType		      Terminator
	      Name		      "Terminator"
	      SID		      "1904"
	      Position		      [85, 290, 105, 310]
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "desired\nengine\nspeed"
	      SID		      "1905"
	      Position		      [410, 88, 440, 112]
	      InputValues	      "cvt_locus_pwr*fc_trq_scale*fc_spd_scale"
	      Table		      "cvt_locus_spd*fc_spd_scale+eps"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "est.\nengine\npower"
	      SID		      "1906"
	      Ports		      [2, 1]
	      Position		      [305, 82, 335, 113]
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "output\nspeed"
	      SID		      "1907"
	      Ports		      [2, 1]
	      Position		      [350, 147, 380, 178]
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "pulley ratio\n"
	      SID		      "1908"
	      Position		      [610, 100, 630, 120]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "output\nspeed"
	      SrcPort		      1
	      Points		      [60, 0; 0, -50]
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [-10, 0]
	      DstBlock		      "output\nspeed"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "est.\nengine\npower"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "desired\nengine\nspeed"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "est.\nengine\npower"
	      SrcPort		      1
	      DstBlock		      "Saturation2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      DstBlock		      "Saturation1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation2"
	      SrcPort		      1
	      DstBlock		      "desired\nengine\nspeed"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From"
	      SrcPort		      1
	      Points		      [40, 0]
	      DstBlock		      "est.\nengine\npower"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "cvt_spd_out_r"
	      SrcPort		      1
	      Points		      [115, 0]
	      Branch {
		DstBlock		"output\nspeed"
		DstPort			1
	      }
	      Branch {
		Points			[0, -50]
		DstBlock		"Product"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "cvt_trq_out_r"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "prev.\nPout/Pin"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Product"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-10, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "tires are at\ntraction limit"
	      SrcPort		      1
	      DstBlock		      "Terminator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation1"
	      SrcPort		      1
	      DstBlock		      "pulley ratio\n"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "engine\ncontrol"
	  SID			  "1909"
	  Ports			  [4, 3]
	  Position		  [705, 429, 735, 526]
	  ForegroundColor	  "green"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "engine\ncontrol"
	    Location		    [231, 146, 856, 725]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "clutch state"
	      SID		      "1910"
	      Position		      [35, 33, 65, 47]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "1911"
	      Position		      [30, 188, 60, 202]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "fc_spd_out_r"
	      SID		      "1912"
	      Position		      [35, 553, 65, 567]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "v_ave_req"
	      SID		      "1913"
	      Position		      [30, 333, 60, 347]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "1914"
	      Ports		      []
	      Position		      [560, 245, 616, 285]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[156, 423, 612, 520]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "1915"
		  Name			  "This engine control block determines whether the engine is on, which it is when\n[(the clutch is slippin"
		  "g or engaged OR idling is allowed) AND the ignition key is on]\nOR\n(the transmission is shifting AND the engine w"
		  "as on during the previous time step).\nThe second part involving shifting is to prevent the engine from shutting d"
		  "own\nfor 1 or 2 seconds during shifts."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "1916"
	      Position		      [150, 80, 170, 100]
	      BlockRotation	      270
	      NamePlacement	      "alternate"
	      Value		      "1.1"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "1917"
	      Position		      [120, 129, 215, 151]
	      Value		      "vc_idle_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "1918"
	      Position		      [330, 494, 410, 516]
	      BlockMirror	      on
	      Value		      "vc_launch_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "1919"
	      Position		      [115, 285, 135, 305]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "1920"
	      Position		      [115, 400, 135, 420]
	      BlockMirror	      on
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "1921"
	      Position		      [95, 466, 120, 484]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "1922"
	      Position		      [485, 570, 505, 590]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "1923"
	      Ports		      [2, 1]
	      Position		      [335, 111, 365, 144]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator2"
	      SID		      "1924"
	      Ports		      [2, 1]
	      Position		      [265, 116, 295, 149]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator3"
	      SID		      "1925"
	      Ports		      [2, 1]
	      Position		      [435, 121, 465, 154]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator7"
	      SID		      "1926"
	      Ports		      [2, 1]
	      Position		      [295, 185, 325, 220]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator8"
	      SID		      "1927"
	      Ports		      [3, 1]
	      Position		      [205, 332, 235, 368]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "1928"
	      Position		      [405, 220, 435, 250]
	      BlockMirror	      on
	      NamePlacement	      "alternate"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "1929"
	      Ports		      [1, 1]
	      Position		      [430, 535, 460, 565]
	      InputPortMap	      "u0"
	      UpperLimit	      "max(fc_map_spd)*fc_spd_scale"
	      LowerLimit	      "vc_idle_spd*vc_idle_bool"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "1930"
	      Position		      [355, 535, 385, 565]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "1931"
	      Position		      [535, 545, 565, 575]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch\ndisengaged"
	      SID		      "1932"
	      Ports		      [2, 1]
	      Position		      [110, 222, 140, 253]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch\nslipping\nor engaged"
	      SID		      "1933"
	      Ports		      [2, 1]
	      Position		      [195, 32, 225, 63]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "key_on"
	      SID		      "1934"
	      Ports		      [0, 1]
	      Position		      [275, 61, 310, 89]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Repeating table"
	      MaskDescription	      "Repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table. Time values should be monotonically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "vc_key_on(:,1)|vc_key_on(:,2)"
	      System {
		Name			"key_on"
		Location		[5, 40, 315, 196]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "1935"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "1936"
		  Position		  [110, 60, 150, 80]
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "1937"
		  Position		  [210, 58, 250, 82]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "1938"
		  Position		  [285, 60, 305, 80]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  DstBlock		  "Fcn1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "moving next\ntime"
	      SID		      "1939"
	      Ports		      [2, 1]
	      Position		      [145, 452, 175, 483]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "not\nmoving"
	      SID		      "1940"
	      Ports		      [2, 1]
	      Position		      [110, 332, 140, 363]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "repeated cycle:\n speed required at\nend of NEXT step"
	      SID		      "1941"
	      Ports		      [0, 1]
	      Position		      [30, 442, 65, 478]
	      FontName		      "Arial"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Forward looking repeating table"
	      MaskDescription	      "Forward looking repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table with a one time step forward offset. Time values should be monoto"
	      "nically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "cyc_mph(:,1)|cyc_mph(:,2)"
	      System {
		Name			"repeated cycle:\n speed required at\nend of NEXT step"
		Location		[57, 72, 432, 234]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "1942"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "1943"
		  Position		  [110, 25, 150, 45]
		  ForegroundColor	  "green"
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "1944"
		  Position		  [260, 33, 300, 57]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "1945"
		  Position		  [90, 85, 120, 115]
		  ForegroundColor	  "green"
		  X0			  "-0.1"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "1946"
		  Ports			  [2, 1]
		  Position		  [150, 62, 180, 93]
		  ForegroundColor	  "green"
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "1947"
		  Ports			  [2, 1]
		  Position		  [205, 26, 235, 59]
		  ForegroundColor	  "green"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "1948"
		  Position		  [335, 35, 355, 55]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0; 0, -15]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [0, -35]
		    DstBlock		    "Fcn1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "engine on"
	      SID		      "1949"
	      Position		      [565, 133, 595, 147]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "spd command\n (rad/s)"
	      SID		      "1950"
	      Position		      [590, 553, 620, 567]
	      NamePlacement	      "alternate"
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "key on"
	      SID		      "1951"
	      Position		      [555, 68, 585, 82]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping\nor engaged"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [0, -20]
	      DstBlock		      "clutch\nslipping\nor engaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch state"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"clutch\nslipping\nor engaged"
		DstPort			1
	      }
	      Branch {
		Points			[0, 190]
		DstBlock		"clutch\ndisengaged"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator3"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, 95]
		Branch {
		  Points		  [0, 325]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Branch {
		  DstBlock		  "Memory"
		  DstPort		  1
		}
	      }
	      Branch {
		DstBlock		"engine on"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "key_on"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"Logical\nOperator1"
		DstPort			1
	      }
	      Branch {
		DstBlock		"key on"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [-120, 0]
	      DstBlock		      "Logical\nOperator7"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator7"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator7"
	      SrcPort		      1
	      Points		      [65, 0; 0, -60]
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      Points		      [0, -10]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "spd command\n (rad/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      Points		      [-20, 0; 0, -50]
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "v_ave_req"
	      SrcPort		      1
	      DstBlock		      "not\nmoving"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      Points		      [-20, 0; 0, -55]
	      DstBlock		      "not\nmoving"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "repeated cycle:\n speed required at\nend of NEXT step"
	      SrcPort		      1
	      DstBlock		      "moving next\ntime"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      DstBlock		      "moving next\ntime"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\ndisengaged"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "not\nmoving"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "moving next\ntime"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0; 0, 35]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "fc_spd_out_r"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator8"
	      SrcPort		      1
	      Points		      [10, 0; 0, 200]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "front and rear\nbrake controller\n(achievable)"
	  SID			  "1952"
	  Ports			  [6, 2]
	  Position		  [200, 381, 235, 509]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/front and rear\nbrake controller\n(achievable)"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  Reference
	  Name			  "sim stop\nsubsystem"
	  SID			  "1953"
	  Ports			  []
	  Position		  [40, 45, 70, 95]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/sim stop\nsubsystem"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  Outport
	  Name			  "clutch\nstate"
	  SID			  "1954"
	  Position		  [815, 323, 845, 337]
	  IconDisplay		  "Port number"
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  3
	  Points		  [0, 15]
	  DstBlock		  "Goto <wh>2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  2
	  Points		  [0, 5]
	  DstBlock		  "Goto <wh>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <veh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  1
	  Points		  [0, 5; 5, 0]
	  Branch {
	    DstBlock		    "braking strategy"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [165, 0]
	    Branch {
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Branch {
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Relational\nOperator"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>5"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  2
	  Points		  [100, 0]
	  Branch {
	    DstBlock		    "Sum"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -5; 25, 0; 0, -60]
	    DstBlock		    "Goto <wh>8"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "From <wh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <wh>7"
	  SrcPort		  1
	  DstBlock		  "Relational\nOperator"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <wh>1"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>8"
	  SrcPort		  1
	  DstBlock		  "braking strategy"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>5"
	  SrcPort		  1
	  Points		  [0, -10]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "From<wh>4"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <wh>3"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <wh>2"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>6"
	  SrcPort		  1
	  Points		  [60, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "cvt control"
	  SrcPort		  1
	  DstBlock		  "Goto <gb>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>2"
	  SrcPort		  1
	  Points		  [15, 0]
	  DstBlock		  "cvt control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <gb>1"
	  SrcPort		  1
	  DstBlock		  "cvt control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From<gb>"
	  SrcPort		  1
	  DstBlock		  "cvt control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>3"
	  SrcPort		  1
	  Points		  [0, -15]
	  DstBlock		  "cvt control"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <gb>4"
	  SrcPort		  1
	  DstBlock		  "clutch\ncontrol"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <gb>5"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "clutch\ncontrol"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "clutch\ncontrol"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    Points		    [0, -45]
	    DstBlock		    "Goto <sdo>"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "clutch\nstate"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "engine\ncontrol"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "Goto <fc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "engine\ncontrol"
	  SrcPort		  2
	  DstBlock		  "Goto <fc>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <fc>"
	  SrcPort		  1
	  DstBlock		  "engine\ncontrol"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "engine\ncontrol"
	  SrcPort		  3
	  Points		  [25, 0]
	  DstBlock		  "Goto <fc><mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <fc>1"
	  SrcPort		  1
	  Points		  [30, 0]
	  DstBlock		  "engine\ncontrol"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <fc>2"
	  SrcPort		  1
	  Points		  [35, 0]
	  DstBlock		  "engine\ncontrol"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <fc>3"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "clutch\ncontrol"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant"
	  SrcPort		  1
	  DstBlock		  "Goto <gb>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>4"
	  SrcPort		  1
	  Points		  [40, 0]
	  DstBlock		  "engine\ncontrol"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  4
	  Points		  [15, 0]
	  DstBlock		  "Goto <wh>6"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  5
	  Points		  [10, 0]
	  DstBlock		  "Goto <wh>7"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Ground"
	  SrcPort		  1
	  Points		  [85, 0; 0, -50]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  6
	}
	Annotation {
	  SID			  "1955"
	  Name			  "required\nforce (N)"
	  Position		  [274, 164]
	}
	Annotation {
	  SID			  "1956"
	  Name			  "shifting is 0 (see above)"
	  Position		  [485, 449]
	}
	Annotation {
	  SID			  "1957"
	  Name			  "note: shifting is \"0\", see above clutch cntrl"
	  Position		  [460, 292]
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "<vc> conv cvt\nSaber custom"
      SID		      "303"
      Ports		      [0, 1]
      Position		      [750, 33, 810, 87]
      BackgroundColor	      "yellow"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_vc.jpg'))\n"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"<vc> conv cvt\nSaber custom"
	Location		[10, 112, 950, 1190]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"96"
	Block {
	  BlockType		  Constant
	  Name			  "Constant"
	  SID			  "1958"
	  Position		  [630, 265, 650, 285]
	  Value			  "0"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>"
	  SID			  "1959"
	  Position		  [535, 510, 630, 530]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_spd_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>1"
	  SID			  "1960"
	  Position		  [535, 475, 630, 495]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>2"
	  SID			  "1961"
	  Position		  [535, 440, 630, 460]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "clutch_state"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>3"
	  SID			  "1962"
	  Position		  [545, 315, 640, 335]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>1"
	  SID			  "1963"
	  Position		  [550, 54, 635, 76]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>2"
	  SID			  "1964"
	  Position		  [550, 96, 645, 114]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "eta_gb"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>3"
	  SID			  "1965"
	  Position		  [555, 130, 650, 150]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "slip_limited"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>4"
	  SID			  "1966"
	  Position		  [545, 350, 640, 370]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>5"
	  SID			  "1967"
	  Position		  [545, 390, 640, 410]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <veh>"
	  SID			  "1968"
	  Position		  [30, 192, 105, 208]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_prev"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>"
	  SID			  "1969"
	  Position		  [25, 225, 85, 245]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>1"
	  SID			  "1970"
	  Position		  [20, 156, 105, 174]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>2"
	  SID			  "1971"
	  Position		  [75, 422, 185, 438]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_drivetrain_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>3"
	  SID			  "1972"
	  Position		  [80, 456, 180, 474]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_wheel_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>4"
	  SID			  "1973"
	  Position		  [540, 536, 625, 554]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>5"
	  SID			  "1974"
	  Position		  [55, 506, 175, 524]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_rear_brake"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>6"
	  SID			  "1975"
	  Position		  [75, 380, 135, 400]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>7"
	  SID			  "1976"
	  Position		  [315, 170, 375, 190]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>8"
	  SID			  "1977"
	  Position		  [105, 81, 190, 99]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From<gb>"
	  SID			  "1978"
	  Position		  [550, 26, 640, 44]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From<wh>4"
	  SID			  "1979"
	  Position		  [75, 481, 190, 499]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_front_brake"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>"
	  SID			  "1980"
	  Position		  [750, 453, 820, 477]
	  NamePlacement		  "alternate"
	  GotoTag		  "engine_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>1"
	  SID			  "1981"
	  Position		  [740, 498, 830, 522]
	  NamePlacement		  "alternate"
	  GotoTag		  "spd_command"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc><mc>"
	  SID			  "1982"
	  Position		  [755, 536, 805, 554]
	  GotoTag		  "key_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>"
	  SID			  "1983"
	  Position		  [735, 68, 825, 92]
	  GotoTag		  "gear_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>1"
	  SID			  "1984"
	  Position		  [690, 263, 780, 287]
	  GotoTag		  "shifting"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>"
	  SID			  "1985"
	  Position		  [755, 304, 840, 326]
	  GotoTag		  "clutch_state"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>1"
	  SID			  "1986"
	  Position		  [450, 166, 535, 184]
	  GotoTag		  "slip_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>"
	  SID			  "1987"
	  Position		  [450, 115, 535, 135]
	  GotoTag		  "F_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>1"
	  SID			  "1988"
	  Position		  [200, 169, 290, 191]
	  GotoTag		  "v_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>2"
	  SID			  "1989"
	  Position		  [230, 201, 320, 219]
	  GotoTag		  "wt_front_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>3"
	  SID			  "1990"
	  Position		  [275, 426, 360, 444]
	  GotoTag		  "F_front_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>4"
	  SID			  "1991"
	  Position		  [275, 489, 360, 511]
	  GotoTag		  "F_rear_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>5"
	  SID			  "1992"
	  Position		  [270, 80, 380, 100]
	  GotoTag		  "F_front_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>6"
	  SID			  "1993"
	  Position		  [190, 241, 280, 259]
	  GotoTag		  "wt_rear_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>7"
	  SID			  "1994"
	  Position		  [185, 271, 275, 289]
	  GotoTag		  "front_traction_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>8"
	  SID			  "1995"
	  Position		  [400, 50, 510, 70]
	  GotoTag		  "F_rear_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Ground
	  Name			  "Ground"
	  SID			  "1996"
	  Position		  [155, 530, 175, 550]
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator"
	  SID			  "1997"
	  Ports			  [2, 1]
	  Position		  [400, 157, 430, 188]
	  Operator		  "~="
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  SID			  "1998"
	  Ports			  [2, 1]
	  Position		  [400, 107, 430, 138]
	  Inputs		  "-+"
	}
	Block {
	  BlockType		  Reference
	  Name			  "braking strategy"
	  SID			  "1999"
	  Ports			  [2, 2]
	  Position		  [210, 77, 240, 128]
	  NamePlacement		  "alternate"
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/braking strategy"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "clutch\ncontrol"
	  SID			  "2000"
	  Ports			  [3, 1]
	  Position		  [680, 323, 715, 397]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "clutch\ncontrol"
	    Location		    [159, 109, 938, 559]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "2001"
	      Position		      [30, 28, 60, 42]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_in_r"
	      SID		      "2002"
	      Position		      [30, 83, 60, 97]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_in_r"
	      SID		      "2003"
	      Position		      [25, 193, 55, 207]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "2004"
	      Ports		      []
	      Position		      [705, 395, 761, 435]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[275, 723, 733, 885]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "2005"
		  Name			  "This clutch control block determines the clutch state given the req'd clutch output torque \nand speed ("
		  "labelled as gearbox input torque and speed), and the gear number history.\n                          conditions   "
		  "                                                                    clutch state\ngear is being shifted OR (trq <~"
		  " 0 AND (engine is                                     1 == disengaged\nclutched to avoid compression braking OR sp"
		  "d < idle))                                                              \n\n(trq >~ 0) AND (spd < launch speed) AN"
		  "D clutch                                       2 == slipping     \nwas not engaged during previous time step      "
		  "                                                           \n\nneither of above sets of conditions are met        "
		  "                                  3 == engaged"
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "2006"
	      Position		      [85, 108, 120, 132]
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "2007"
	      Position		      [85, 149, 165, 171]
	      Value		      "vc_clutch_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "2008"
	      Position		      [85, 214, 165, 236]
	      Value		      "vc_idle_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "2009"
	      Position		      [85, 280, 120, 300]
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "2010"
	      Position		      [85, 344, 165, 366]
	      Value		      "vc_launch_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "2011"
	      Position		      [510, 380, 545, 400]
	      BlockMirror	      on
	      Value		      "2.5"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      SID		      "2012"
	      Position		      [600, 135, 660, 165]
	      Expr		      "u[1]+2*u[2]*(1-u[1])*(1-u[3])+3*u[3]*(1-u[1])"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "2013"
	      Ports		      [2, 1]
	      Position		      [320, 92, 350, 123]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "2014"
	      Ports		      [2, 1]
	      Position		      [255, 152, 285, 183]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "2015"
	      Position		      [510, 325, 540, 355]
	      BlockMirror	      on
	      X0		      "1+(2*(cyc_mph(1,2)>0))"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "2016"
	      Ports		      [3, 1]
	      Position		      [530, 132, 565, 168]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "2017"
	      Ports		      [2, 1]
	      Position		      [240, 82, 270, 113]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "2018"
	      Ports		      [2, 1]
	      Position		      [200, 202, 230, 233]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "2019"
	      Ports		      [2, 1]
	      Position		      [200, 267, 230, 298]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      SID		      "2020"
	      Ports		      [2, 1]
	      Position		      [200, 332, 230, 363]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\ndisengaged"
	      SID		      "2021"
	      Ports		      [2, 1]
	      Position		      [390, 42, 420, 73]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nengaged"
	      SID		      "2022"
	      Ports		      [2, 1]
	      Position		      [460, 142, 490, 173]
	      Operator		      "NOR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping"
	      SID		      "2023"
	      Ports		      [3, 1]
	      Position		      [320, 279, 350, 311]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch was NOT\nfully engaged\nduring last time step"
	      SID		      "2024"
	      Ports		      [2, 1]
	      Position		      [415, 330, 450, 365]
	      BlockMirror	      on
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "clutch\nstate"
	      SID		      "2025"
	      Position		      [725, 143, 755, 157]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      Points		      [310, 0]
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      Points		      [15, 0; 0, -45]
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gb_trq_in_r"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, 185]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [90, 0; 0, -15]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      SrcPort		      1
	      Points		      [-120, 0; 0, -45]
	      DstBlock		      "clutch\nslipping"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      Points		      [-30, 0; 0, -35]
	      DstBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      Points		      [30, 0; 0, -55]
	      DstBlock		      "clutch\nslipping"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping"
	      SrcPort		      1
	      Points		      [80, 0; 0, -95]
	      Branch {
		Points			[80, 0]
		DstBlock		"Mux"
		DstPort			2
	      }
	      Branch {
		Points			[0, -35]
		DstBlock		"clutch\nengaged"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "clutch\nslipping"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		Points			[15, 0; 0, 190]
		DstBlock		"Memory"
		DstPort			1
	      }
	      Branch {
		DstBlock		"clutch\nstate"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "clutch\ndisengaged"
	      SrcPort		      1
	      Points		      [10, 0; 0, 40]
	      Branch {
		Points			[80, 0]
		DstBlock		"Mux"
		DstPort			1
	      }
	      Branch {
		Points			[0, 50]
		DstBlock		"clutch\nengaged"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "clutch\nengaged"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      DstBlock		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gb_spd_in_r"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		Points			[0, 140]
		DstBlock		"Relational\nOperator3"
		DstPort			1
	      }
	      Branch {
		Points			[105, 0; 0, 10]
		DstBlock		"Relational\nOperator1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "config traction control"
	  SID			  "2026"
	  Ports			  [3, 5]
	  Position		  [120, 149, 155, 251]
	  BackgroundColor	  "darkGreen"
	  AttributesFormatString  "%<BlockChoice>"
	  ShowPortLabels	  "none"
	  BlockChoice		  "traction control 2 axle"
	  TemplateBlock		  "lib_controls/SubSystem/config traction control"
	  MemberBlocks		  "traction control 2 axle,traction control J2452 2 axle"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "config traction control"
	    Location		    [148, 182, 646, 482]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    SIDHighWatermark	    "6898"
	    Block {
	      BlockType		      Inport
	      Name		      "time-average\nvehicle speed\n req'd (m/s)"
	      SID		      "2026::706"
	      Position		      [20, 40, 40, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SID		      "2026::707"
	      Position		      [20, 80, 40, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "total tractive\nforce req'd\n(N)"
	      SID		      "2026::708"
	      Position		      [20, 120, 40, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "traction control\n2 axle"
	      SID		      "2026::709"
	      Ports		      [3, 5]
	      Position		      [100, 40, 140, 80]
	      BackgroundColor	      "darkGreen"
	      LibraryVersion	      "1.479"
	      SourceBlock	      "lib_controls/SubSystem/traction control 2 axle"
	      SourceType	      "SubSystem"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd force\n(N)"
	      SID		      "2026::710"
	      Position		      [200, 40, 220, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd speed\n(m/s)"
	      SID		      "2026::711"
	      Position		      [200, 80, 220, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nfront axle\n(N)"
	      SID		      "2026::712"
	      Position		      [200, 120, 220, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nrear axle\n(N)"
	      SID		      "2026::713"
	      Position		      [200, 160, 220, 180]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "front/total \ntraction ratio"
	      SID		      "2026::714"
	      Position		      [200, 200, 220, 220]
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "time-average\nvehicle speed\n req'd (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "total tractive\nforce req'd\n(N)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      1
	      DstBlock		      "req'd force\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      2
	      DstBlock		      "req'd speed\n(m/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      3
	      DstBlock		      "weight on\nfront axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      4
	      DstBlock		      "weight on\nrear axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      5
	      DstBlock		      "front/total \ntraction ratio"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "cvt control"
	  SID			  "2027"
	  Ports			  [4, 1]
	  Position		  [680, 16, 715, 144]
	  FontName		  "Arial"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "cvt control"
	    Location		    [101, 316, 814, 691]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "cvt_trq_out_r"
	      SID		      "2028"
	      Position		      [35, 85, 55, 105]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "cvt_spd_out_r"
	      SID		      "2029"
	      Position		      [35, 145, 55, 165]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "prev.\nPout/Pin"
	      SID		      "2030"
	      Position		      [30, 190, 50, 210]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "tires are at\ntraction limit"
	      SID		      "2031"
	      Position		      [30, 290, 50, 310]
	      FontName		      "Arial"
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "2032"
	      Ports		      []
	      Position		      [625, 310, 681, 350]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[332, 545, 628, 674]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "2033"
		  Name			  "This CVT control block tries to keep the engine\noperating along the curve defined in engine \npower/spe"
		  "ed space defined by cvt_locus_pwr\nand cv_locus_spd.\n\nUsually, this curve will be the locus of best\n efficiency"
		  " points over the range of engine power."
		  Position		  [147, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "2034"
	      Position		      [350, 210, 380, 230]
	      BlockMirror	      on
	      Value		      "eps"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "2035"
	      Position		      [165, 240, 195, 260]
	      BlockMirror	      on
	      Value		      "eps"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      SID		      "2036"
	      Ports		      [3, 1]
	      Position		      [225, 89, 255, 121]
	      Inputs		      "**/"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      SID		      "2037"
	      Ports		      [2, 1]
	      Position		      [475, 91, 505, 124]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation1"
	      SID		      "2038"
	      Ports		      [1, 1]
	      Position		      [535, 100, 565, 120]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "max(gb_ratio)"
	      LowerLimit	      "min(gb_ratio)"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation2"
	      SID		      "2039"
	      Ports		      [1, 1]
	      Position		      [360, 90, 390, 110]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "max(cvt_locus_pwr)*fc_trq_scale*fc_spd_scale"
	      LowerLimit	      "min(cvt_locus_pwr)*fc_trq_scale*fc_spd_scale"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      SID		      "2040"
	      Ports		      [2, 1]
	      Position		      [165, 192, 195, 223]
	    }
	    Block {
	      BlockType		      Terminator
	      Name		      "Terminator"
	      SID		      "2041"
	      Position		      [85, 290, 105, 310]
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "accessories\n(Nm)"
	      SID		      "2042"
	      Ports		      [0, 1]
	      Position		      [230, 22, 260, 58]
	      ForegroundColor	      "magenta"
	      SourceBlock	      "lib_controls/<vc> conv\nSaber custom/gearbox\n control/accessories\n(Nm)"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "off"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "desired\nengine\nspeed"
	      SID		      "2043"
	      Position		      [410, 88, 440, 112]
	      InputValues	      "cvt_locus_pwr*fc_trq_scale*fc_spd_scale"
	      Table		      "cvt_locus_spd*fc_spd_scale+eps"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "est.\nengine\npower"
	      SID		      "2044"
	      Ports		      [2, 1]
	      Position		      [305, 82, 335, 113]
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "output\nspeed"
	      SID		      "2045"
	      Ports		      [2, 1]
	      Position		      [350, 147, 380, 178]
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "pulley ratio\n"
	      SID		      "2046"
	      Position		      [610, 100, 630, 120]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Saturation1"
	      SrcPort		      1
	      DstBlock		      "pulley ratio\n"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "tires are at\ntraction limit"
	      SrcPort		      1
	      DstBlock		      "Terminator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-10, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Product"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "prev.\nPout/Pin"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "cvt_trq_out_r"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "cvt_spd_out_r"
	      SrcPort		      1
	      Points		      [115, 0]
	      Branch {
		DstBlock		"output\nspeed"
		DstPort			1
	      }
	      Branch {
		Points			[0, -50]
		DstBlock		"Product"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "accessories\n(Nm)"
	      SrcPort		      1
	      Points		      [25, 0]
	      DstBlock		      "est.\nengine\npower"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation2"
	      SrcPort		      1
	      DstBlock		      "desired\nengine\nspeed"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      DstBlock		      "Saturation1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "est.\nengine\npower"
	      SrcPort		      1
	      DstBlock		      "Saturation2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "desired\nengine\nspeed"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "est.\nengine\npower"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [-10, 0]
	      DstBlock		      "output\nspeed"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "output\nspeed"
	      SrcPort		      1
	      Points		      [60, 0; 0, -50]
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "engine\ncontrol"
	  SID			  "2047"
	  Ports			  [4, 3]
	  Position		  [680, 459, 710, 556]
	  ForegroundColor	  "green"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "engine\ncontrol"
	    Location		    [231, 146, 856, 725]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "clutch state"
	      SID		      "2048"
	      Position		      [35, 33, 65, 47]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "2049"
	      Position		      [30, 188, 60, 202]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "fc_spd_out_r"
	      SID		      "2050"
	      Position		      [35, 553, 65, 567]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "v_ave_req"
	      SID		      "2051"
	      Position		      [30, 333, 60, 347]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "2052"
	      Ports		      []
	      Position		      [560, 245, 616, 285]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[156, 423, 612, 520]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "2053"
		  Name			  "This engine control block determines whether the engine is on, which it is when\n[(the clutch is slippin"
		  "g or engaged OR idling is allowed) AND the ignition key is on]\nOR\n(the transmission is shifting AND the engine w"
		  "as on during the previous time step).\nThe second part involving shifting is to prevent the engine from shutting d"
		  "own\nfor 1 or 2 seconds during shifts."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "2054"
	      Position		      [150, 80, 170, 100]
	      BlockRotation	      270
	      NamePlacement	      "alternate"
	      Value		      "1.1"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "2055"
	      Position		      [120, 129, 215, 151]
	      Value		      "vc_idle_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "2056"
	      Position		      [330, 494, 410, 516]
	      BlockMirror	      on
	      Value		      "vc_launch_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "2057"
	      Position		      [115, 285, 135, 305]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "2058"
	      Position		      [115, 400, 135, 420]
	      BlockMirror	      on
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "2059"
	      Position		      [95, 466, 120, 484]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "2060"
	      Position		      [485, 570, 505, 590]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "2061"
	      Ports		      [2, 1]
	      Position		      [335, 111, 365, 144]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator2"
	      SID		      "2062"
	      Ports		      [2, 1]
	      Position		      [265, 116, 295, 149]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator3"
	      SID		      "2063"
	      Ports		      [2, 1]
	      Position		      [435, 121, 465, 154]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator7"
	      SID		      "2064"
	      Ports		      [2, 1]
	      Position		      [295, 185, 325, 220]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator8"
	      SID		      "2065"
	      Ports		      [3, 1]
	      Position		      [205, 332, 235, 368]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "2066"
	      Position		      [405, 220, 435, 250]
	      BlockMirror	      on
	      NamePlacement	      "alternate"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "2067"
	      Ports		      [1, 1]
	      Position		      [430, 535, 460, 565]
	      InputPortMap	      "u0"
	      UpperLimit	      "max(fc_map_spd)*fc_spd_scale"
	      LowerLimit	      "vc_idle_spd*vc_idle_bool"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "2068"
	      Position		      [355, 535, 385, 565]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "2069"
	      Position		      [535, 545, 565, 575]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch\ndisengaged"
	      SID		      "2070"
	      Ports		      [2, 1]
	      Position		      [110, 222, 140, 253]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch\nslipping\nor engaged"
	      SID		      "2071"
	      Ports		      [2, 1]
	      Position		      [195, 32, 225, 63]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "key_on"
	      SID		      "2072"
	      Ports		      [0, 1]
	      Position		      [275, 61, 310, 89]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Repeating table"
	      MaskDescription	      "Repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table. Time values should be monotonically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "vc_key_on(:,1)|vc_key_on(:,2)"
	      System {
		Name			"key_on"
		Location		[5, 40, 315, 196]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "2073"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "2074"
		  Position		  [110, 60, 150, 80]
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "2075"
		  Position		  [210, 58, 250, 82]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "2076"
		  Position		  [285, 60, 305, 80]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  DstBlock		  "Fcn1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "moving next\ntime"
	      SID		      "2077"
	      Ports		      [2, 1]
	      Position		      [145, 452, 175, 483]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "not\nmoving"
	      SID		      "2078"
	      Ports		      [2, 1]
	      Position		      [110, 332, 140, 363]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "repeated cycle:\n speed required at\nend of NEXT step"
	      SID		      "2079"
	      Ports		      [0, 1]
	      Position		      [30, 442, 65, 478]
	      FontName		      "Arial"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Forward looking repeating table"
	      MaskDescription	      "Forward looking repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table with a one time step forward offset. Time values should be monoto"
	      "nically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "cyc_mph(:,1)|cyc_mph(:,2)"
	      System {
		Name			"repeated cycle:\n speed required at\nend of NEXT step"
		Location		[57, 72, 432, 234]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "2080"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "2081"
		  Position		  [110, 25, 150, 45]
		  ForegroundColor	  "green"
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "2082"
		  Position		  [260, 33, 300, 57]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "2083"
		  Position		  [90, 85, 120, 115]
		  ForegroundColor	  "green"
		  X0			  "-0.1"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "2084"
		  Ports			  [2, 1]
		  Position		  [150, 62, 180, 93]
		  ForegroundColor	  "green"
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "2085"
		  Ports			  [2, 1]
		  Position		  [205, 26, 235, 59]
		  ForegroundColor	  "green"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "2086"
		  Position		  [335, 35, 355, 55]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -35]
		    DstBlock		    "Fcn1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0; 0, -15]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "engine on"
	      SID		      "2087"
	      Position		      [565, 133, 595, 147]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "spd command\n (rad/s)"
	      SID		      "2088"
	      Position		      [590, 553, 620, 567]
	      NamePlacement	      "alternate"
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "key on"
	      SID		      "2089"
	      Position		      [555, 68, 585, 82]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator8"
	      SrcPort		      1
	      Points		      [10, 0; 0, 200]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "fc_spd_out_r"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0; 0, 35]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "moving next\ntime"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "not\nmoving"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\ndisengaged"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      DstBlock		      "moving next\ntime"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "repeated cycle:\n speed required at\nend of NEXT step"
	      SrcPort		      1
	      DstBlock		      "moving next\ntime"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      Points		      [-20, 0; 0, -55]
	      DstBlock		      "not\nmoving"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "v_ave_req"
	      SrcPort		      1
	      DstBlock		      "not\nmoving"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      Points		      [-20, 0; 0, -50]
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "spd command\n (rad/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      Points		      [0, -10]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator7"
	      SrcPort		      1
	      Points		      [65, 0; 0, -60]
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator7"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [-120, 0]
	      DstBlock		      "Logical\nOperator7"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "key_on"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"key on"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Logical\nOperator1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator3"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"engine on"
		DstPort			1
	      }
	      Branch {
		Points			[0, 95]
		Branch {
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 325]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "clutch state"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		Points			[0, 190]
		DstBlock		"clutch\ndisengaged"
		DstPort			1
	      }
	      Branch {
		DstBlock		"clutch\nslipping\nor engaged"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [0, -20]
	      DstBlock		      "clutch\nslipping\nor engaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping\nor engaged"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "front and rear\nbrake controller\n(achievable)"
	  SID			  "2090"
	  Ports			  [6, 2]
	  Position		  [220, 401, 255, 529]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/front and rear\nbrake controller\n(achievable)"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  Reference
	  Name			  "sim stop\nsubsystem"
	  SID			  "2091"
	  Ports			  []
	  Position		  [35, 45, 65, 95]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/sim stop\nsubsystem"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  Outport
	  Name			  "clutch\nstate"
	  SID			  "2092"
	  Position		  [790, 353, 820, 367]
	  IconDisplay		  "Port number"
	}
	Line {
	  SrcBlock		  "Relational\nOperator"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  2
	  Points		  [115, 0]
	  Branch {
	    DstBlock		    "Sum"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -10; 25, 0]
	    DstBlock		    "Goto <wh>8"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  1
	  Points		  [0, 5; 10, 0]
	  Branch {
	    Points		    [0, -50]
	    DstBlock		    "braking strategy"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [215, 0]
	    Branch {
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Branch {
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>5"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <veh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  3
	  Points		  [0, 10]
	  DstBlock		  "Goto <wh>2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "engine\ncontrol"
	  SrcPort		  3
	  Points		  [25, 0]
	  DstBlock		  "Goto <fc><mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <fc>"
	  SrcPort		  1
	  DstBlock		  "engine\ncontrol"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "engine\ncontrol"
	  SrcPort		  2
	  DstBlock		  "Goto <fc>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "engine\ncontrol"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "Goto <fc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "clutch\ncontrol"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    Points		    [0, -45]
	    DstBlock		    "Goto <sdo>"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "clutch\nstate"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "From <gb>5"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "clutch\ncontrol"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <gb>4"
	  SrcPort		  1
	  DstBlock		  "clutch\ncontrol"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <wh>4"
	  SrcPort		  1
	  DstBlock		  "engine\ncontrol"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <fc>1"
	  SrcPort		  1
	  Points		  [30, 0]
	  DstBlock		  "engine\ncontrol"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <fc>2"
	  SrcPort		  1
	  Points		  [30, 0]
	  DstBlock		  "engine\ncontrol"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <fc>3"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "clutch\ncontrol"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant"
	  SrcPort		  1
	  DstBlock		  "Goto <gb>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>3"
	  SrcPort		  1
	  Points		  [0, -15]
	  DstBlock		  "cvt control"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From<gb>"
	  SrcPort		  1
	  DstBlock		  "cvt control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>1"
	  SrcPort		  1
	  DstBlock		  "cvt control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <gb>2"
	  SrcPort		  1
	  Points		  [15, 0]
	  DstBlock		  "cvt control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "cvt control"
	  SrcPort		  1
	  DstBlock		  "Goto <gb>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <wh>7"
	  SrcPort		  1
	  DstBlock		  "Relational\nOperator"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <wh>1"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>8"
	  SrcPort		  1
	  DstBlock		  "braking strategy"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>2"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <wh>3"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From<wh>4"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <wh>5"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>6"
	  SrcPort		  1
	  Points		  [65, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  4
	  Points		  [15, 0]
	  DstBlock		  "Goto <wh>6"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  5
	  Points		  [10, 0]
	  DstBlock		  "Goto <wh>7"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Ground"
	  SrcPort		  1
	  Points		  [15, 0; 0, -25]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  6
	}
	Annotation {
	  SID			  "2093"
	  Name			  "required\nforce (N)"
	  Position		  [215, 165]
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "<vc> ev"
      SID		      "304"
      Ports		      []
      Position		      [100, 649, 160, 699]
      BackgroundColor	      "yellow"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_vc.jpg'))\n"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"<vc> ev"
	Location		[685, 451, 1497, 1119]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"96"
	Block {
	  BlockType		  From
	  Name			  "From <ess>"
	  SID			  "2094"
	  Position		  [570, 325, 665, 345]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "bus_voltage"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>1"
	  SID			  "2095"
	  Position		  [565, 140, 655, 160]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>2"
	  SID			  "2096"
	  Position		  [565, 181, 650, 199]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "eta_gb"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>3"
	  SID			  "2097"
	  Position		  [565, 221, 650, 239]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "slip_limited"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>4"
	  SID			  "2098"
	  Position		  [570, 291, 655, 309]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>"
	  SID			  "2099"
	  Position		  [570, 355, 665, 375]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "P_mc_in_1lim"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>1"
	  SID			  "2100"
	  Position		  [570, 391, 665, 409]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_mc_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <veh>"
	  SID			  "2101"
	  Position		  [35, 157, 110, 173]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_prev"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>"
	  SID			  "2102"
	  Position		  [25, 190, 85, 210]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>1"
	  SID			  "2103"
	  Position		  [25, 121, 110, 139]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>2"
	  SID			  "2104"
	  Position		  [190, 322, 300, 338]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_drivetrain_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>3"
	  SID			  "2105"
	  Position		  [195, 356, 295, 374]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_wheel_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>4"
	  SID			  "2106"
	  Position		  [320, 170, 380, 190]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>5"
	  SID			  "2107"
	  Position		  [175, 416, 295, 434]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_rear_brake"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>6"
	  SID			  "2108"
	  Position		  [215, 285, 275, 305]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>7"
	  SID			  "2109"
	  Position		  [80, 46, 165, 64]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From<gb>"
	  SID			  "2110"
	  Position		  [565, 111, 650, 129]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From<wh>4"
	  SID			  "2111"
	  Position		  [190, 381, 305, 399]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_front_brake"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto"
	  SID			  "2112"
	  Position		  [750, 122, 825, 148]
	  NamePlacement		  "alternate"
	  GotoTag		  "gear_number"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>"
	  SID			  "2113"
	  Position		  [760, 160, 825, 180]
	  GotoTag		  "gear_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>1"
	  SID			  "2114"
	  Position		  [765, 195, 825, 215]
	  GotoTag		  "shifting"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <mc>"
	  SID			  "2115"
	  Position		  [745, 345, 835, 365]
	  GotoTag		  "P_mc_in_r"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <mc>\n<pb><sdo>"
	  SID			  "2116"
	  Position		  [690, 446, 740, 464]
	  GotoTag		  "key_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>"
	  SID			  "2117"
	  Position		  [680, 39, 765, 61]
	  GotoTag		  "clutch_state"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>1"
	  SID			  "2118"
	  Position		  [465, 166, 550, 184]
	  GotoTag		  "slip_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>"
	  SID			  "2119"
	  Position		  [460, 80, 545, 100]
	  NamePlacement		  "alternate"
	  GotoTag		  "F_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>1"
	  SID			  "2120"
	  Position		  [205, 139, 295, 161]
	  GotoTag		  "v_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>2"
	  SID			  "2121"
	  Position		  [200, 161, 290, 179]
	  GotoTag		  "wt_front_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>3"
	  SID			  "2122"
	  Position		  [390, 326, 475, 344]
	  GotoTag		  "F_front_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>4"
	  SID			  "2123"
	  Position		  [390, 389, 475, 411]
	  GotoTag		  "F_rear_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>5"
	  SID			  "2124"
	  Position		  [235, 45, 345, 65]
	  GotoTag		  "F_front_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>6"
	  SID			  "2125"
	  Position		  [195, 206, 285, 224]
	  GotoTag		  "wt_rear_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>7"
	  SID			  "2126"
	  Position		  [190, 236, 280, 254]
	  GotoTag		  "front_traction_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>8"
	  SID			  "2127"
	  Position		  [420, 20, 530, 40]
	  GotoTag		  "F_rear_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Ground
	  Name			  "Ground"
	  SID			  "2128"
	  Position		  [245, 475, 265, 495]
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator"
	  SID			  "2129"
	  Ports			  [2, 1]
	  Position		  [410, 157, 440, 188]
	  Operator		  "~="
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  SID			  "2130"
	  Ports			  [2, 1]
	  Position		  [410, 72, 440, 103]
	  Inputs		  "-+"
	}
	Block {
	  BlockType		  Reference
	  Name			  "braking strategy"
	  SID			  "2131"
	  Ports			  [2, 2]
	  Position		  [190, 42, 220, 93]
	  NamePlacement		  "alternate"
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/braking strategy"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "config traction control"
	  SID			  "2132"
	  Ports			  [3, 5]
	  Position		  [130, 109, 165, 211]
	  BackgroundColor	  "darkGreen"
	  AttributesFormatString  "%<BlockChoice>"
	  ShowPortLabels	  "none"
	  BlockChoice		  "traction control 2 axle"
	  TemplateBlock		  "lib_controls/SubSystem/config traction control"
	  MemberBlocks		  "traction control 2 axle,traction control J2452 2 axle"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "config traction control"
	    Location		    [148, 182, 646, 482]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    SIDHighWatermark	    "6898"
	    Block {
	      BlockType		      Inport
	      Name		      "time-average\nvehicle speed\n req'd (m/s)"
	      SID		      "2132::706"
	      Position		      [20, 40, 40, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SID		      "2132::707"
	      Position		      [20, 80, 40, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "total tractive\nforce req'd\n(N)"
	      SID		      "2132::708"
	      Position		      [20, 120, 40, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "traction control\n2 axle"
	      SID		      "2132::709"
	      Ports		      [3, 5]
	      Position		      [100, 40, 140, 80]
	      BackgroundColor	      "darkGreen"
	      LibraryVersion	      "1.479"
	      SourceBlock	      "lib_controls/SubSystem/traction control 2 axle"
	      SourceType	      "SubSystem"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd force\n(N)"
	      SID		      "2132::710"
	      Position		      [200, 40, 220, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd speed\n(m/s)"
	      SID		      "2132::711"
	      Position		      [200, 80, 220, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nfront axle\n(N)"
	      SID		      "2132::712"
	      Position		      [200, 120, 220, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nrear axle\n(N)"
	      SID		      "2132::713"
	      Position		      [200, 160, 220, 180]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "front/total \ntraction ratio"
	      SID		      "2132::714"
	      Position		      [200, 200, 220, 220]
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "time-average\nvehicle speed\n req'd (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "total tractive\nforce req'd\n(N)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      1
	      DstBlock		      "req'd force\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      2
	      DstBlock		      "req'd speed\n(m/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      3
	      DstBlock		      "weight on\nfront axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      4
	      DstBlock		      "weight on\nrear axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      5
	      DstBlock		      "front/total \ntraction ratio"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  Constant
	  Name			  "engaged"
	  SID			  "2133"
	  Position		  [610, 40, 630, 60]
	  Value			  "3"
	}
	Block {
	  BlockType		  Reference
	  Name			  "front and rear\nbrake controller\n(achievable)"
	  SID			  "2134"
	  Ports			  [6, 2]
	  Position		  [335, 301, 370, 429]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/front and rear\nbrake controller\n(achievable)"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "gearbox control\nfor series \nHV and EV"
	  SID			  "2135"
	  Ports			  [4, 3]
	  Position		  [680, 115, 720, 220]
	  FontName		  "Arial"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "gearbox control\nfor series \nHV and EV"
	    Location		    [6, 74, 993, 742]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "77"
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_out_r"
	      SID		      "2136"
	      Position		      [45, 130, 65, 150]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_out_r"
	      SID		      "2137"
	      Position		      [45, 250, 65, 270]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "prev.\nPout/Pin"
	      SID		      "2138"
	      Position		      [45, 20, 65, 40]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "tires are at\ntraction limit"
	      SID		      "2139"
	      Position		      [45, 75, 65, 95]
	      FontName		      "Arial"
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "2140"
	      Ports		      []
	      Position		      [895, 615, 951, 655]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[229, 259, 687, 388]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "2141"
		  Name			  "This gearbox control block computes the current gear number given the gearbox's\nreq'd output torque and"
		  " speed and an estimate its efficiency.  Upshifts occur, given a\ncertain engine speed,  when the estimated engine "
		  "load falls below the upshift curve\nin engine speed/load space, and downshifts likewise occur when estimated engin"
		  "e\nload rises above the downshift curve.  Separate upshift and downshift curves are\ndefined for each gear.  An up"
		  "shift may not be immediately followed by a downshift.\nIf the tires are about to slip, don't upshift unless the en"
		  "gine would be at max. speed.\nEnforce this rule by setting the load to 1 when the tires are about to slip."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "2142"
	      Position		      [330, 95, 350, 115]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant14"
	      SID		      "2143"
	      Position		      [450, 548, 545, 562]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant15"
	      SID		      "2144"
	      Position		      [380, 413, 475, 427]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      SID		      "2145"
	      Ports		      [1, 2]
	      Position		      [720, 401, 725, 439]
	      BackgroundColor	      "black"
	      ShowName		      off
	      Outputs		      "2"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn"
	      SID		      "2146"
	      Position		      [155, 20, 185, 40]
	      FontName		      "Arial"
	      Expr		      "1/u"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn1"
	      SID		      "2147"
	      Position		      [85, 180, 115, 200]
	      BlockRotation	      270
	      FontName		      "Arial"
	      Expr		      "1/u"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      SID		      "2148"
	      Position		      [550, 520, 675, 540]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <logic>2"
	      SID		      "2149"
	      Position		      [30, 474, 135, 506]
	      ForegroundColor	      "red"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "v_req_limited"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      SID		      "2150"
	      Position		      [550, 580, 675, 600]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From2"
	      SID		      "2151"
	      Position		      [490, 440, 615, 460]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From3"
	      SID		      "2152"
	      Position		      [490, 465, 615, 485]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From4"
	      SID		      "2153"
	      Position		      [490, 375, 615, 395]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      SID		      "2154"
	      Position		      [480, 237, 505, 263]
	      FontName		      "Arial"
	      Gain		      "-1"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto1"
	      SID		      "2155"
	      Position		      [255, 465, 375, 485]
	      NamePlacement	      "alternate"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto2"
	      SID		      "2156"
	      Position		      [255, 489, 375, 511]
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto4"
	      SID		      "2157"
	      Position		      [815, 265, 950, 285]
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto5"
	      SID		      "2158"
	      Position		      [840, 95, 950, 115]
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto6"
	      SID		      "2159"
	      Position		      [840, 170, 950, 190]
	      NamePlacement	      "alternate"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "MOTOR\ntorque\ncapability"
	      SID		      "2160"
	      Position		      [190, 210, 220, 230]
	      BlockRotation	      270
	      FontName		      "Arial"
	      InputValues	      "mc_map_spd*mc_spd_scale"
	      Table		      "mc_max_trq*mc_trq_scale+eps"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "2161"
	      Ports		      [2, 1]
	      Position		      [635, 437, 640, 488]
	      ShowName		      off
	      Inputs		      "2"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      SID		      "2162"
	      Ports		      [2, 1]
	      Position		      [225, 142, 255, 173]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      SID		      "2163"
	      Ports		      [2, 1]
	      Position		      [540, 233, 560, 257]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      RateLimiter
	      Name		      "Rate Limiter"
	      SID		      "2164"
	      Position		      [510, 307, 540, 333]
	      BlockMirror	      on
	      RisingSlewLimit	      "1/(gb_shift_delay+eps)"
	      FallingSlewLimit	      "-1/(gb_shift_delay+eps)"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "2165"
	      Ports		      [1, 1]
	      Position		      [90, 20, 120, 40]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "0.2"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation1"
	      SID		      "2166"
	      Ports		      [1, 1]
	      Position		      [725, 96, 745, 114]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "gb_gears_num"
	      LowerLimit	      "1"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Speed Dependent Shifting"
	      SID		      "2167"
	      Ports		      [1, 2]
	      Position		      [180, 462, 210, 513]
	      SourceBlock	      "lib_controls/SubSystem/Speed Dependent Shifting"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "off"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "2168"
	      Position		      [325, 135, 355, 165]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch3"
	      SID		      "2169"
	      Position		      [695, 540, 725, 570]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch4"
	      SID		      "2170"
	      Position		      [665, 405, 695, 435]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "allow downshift?"
	      SID		      "2171"
	      Ports		      [1, 1]
	      Position		      [420, 42, 450, 78]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"allow downshift?"
		Location		[328, 265, 817, 480]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gearnum"
		  SID			  "2172"
		  Position		  [35, 35, 55, 55]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  SID			  "2173"
		  Ports			  [2, 1]
		  Position		  [375, 43, 405, 67]
		  FontName		  "Arial"
		  Operator		  "NOR"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "2174"
		  Position		  [145, 60, 180, 80]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "2175"
		  Position		  [145, 105, 180, 125]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "2176"
		  Ports			  [2, 1]
		  Position		  [225, 38, 255, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator2"
		  SID			  "2177"
		  Ports			  [2, 1]
		  Position		  [225, 98, 255, 122]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  Outport
		  Name			  "allow shift"
		  SID			  "2178"
		  Position		  [445, 45, 465, 65]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  DstBlock		  "allow shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gearnum"
		  SrcPort		  1
		  Points		  [45, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 25]
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 35]
		    DstBlock		    "Relational\nOperator2"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [15, 0; 0, -15]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 30; -60, 0]
		    DstBlock		    "Memory1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator2"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical\nOperator"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "current\ngear\nnumber"
	      SID		      "2179"
	      Ports		      [2, 1]
	      Position		      [670, 87, 690, 123]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "delta\ngear\nnumber"
	      SID		      "2180"
	      Position		      [600, 144, 630, 176]
	      FontName		      "Arial"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "downshift \ncommand"
	      SID		      "2181"
	      Ports		      [3, 1]
	      Position		      [415, 224, 445, 276]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"downshift \ncommand"
		Location		[431, 372, 906, 667]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "2182"
		  Position		  [45, 98, 75, 112]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "2183"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "2184"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "2185"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "2186"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "2187"
		  Ports			  [1, 1]
		  Position		  [240, 100, 270, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_dnshift_spd|gb_dnshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "2188"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "2189"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "2190"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "2191"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [55, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Product
	      Name		      "gb_spd_in_r"
	      SID		      "2192"
	      Ports		      [2, 1]
	      Position		      [150, 253, 170, 277]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio"
	      SID		      "2193"
	      Position		      [400, 308, 430, 332]
	      BlockMirror	      on
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      Table		      "gb_ratio"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio1"
	      SID		      "2194"
	      Position		      [790, 93, 820, 117]
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      Table		      "gb_ratio"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "gearbox speed\nestimator"
	      SID		      "2195"
	      Ports		      [1, 1]
	      Position		      [225, 250, 255, 280]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"gearbox speed\nestimator"
		Location		[230, 189, 818, 698]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_in_r\nif no gear change"
		  SID			  "2196"
		  Position		  [45, 18, 75, 32]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "2197"
		  Ports			  []
		  Position		  [515, 345, 571, 385]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [497, 485, 832, 570]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "2198"
		    Name		    "The requested motor speed is replaced by an estimate of the\nengine's previous speed whenever the veh"
		    "icle missed the trace\n by more than 1 mph on the last time step."
		    Position		    [167, 41]
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "2199"
		  Position		  [165, 240, 185, 260]
		  BlockMirror		  on
		  Value			  "eps"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "2200"
		  Position		  [315, 165, 335, 185]
		  BlockMirror		  on
		  Value			  "0"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "2201"
		  Position		  [230, 360, 250, 380]
		  BlockMirror		  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "2202"
		  Position		  [230, 460, 250, 480]
		  BlockMirror		  on
		  Value			  "0.11"
		}
		Block {
		  BlockType		  From
		  Name			  "From"
		  SID			  "2203"
		  Position		  [195, 40, 285, 70]
		  BlockMirror		  on
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "gb_spd_in_a"
		}
		Block {
		  BlockType		  From
		  Name			  "From <cyc>"
		  SID			  "2204"
		  Position		  [30, 304, 120, 336]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "cyc_mph_r"
		}
		Block {
		  BlockType		  From
		  Name			  "From <veh>"
		  SID			  "2205"
		  Position		  [30, 99, 85, 131]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "mpha"
		}
		Block {
		  BlockType		  From
		  Name			  "From <wh>/\ntire slip model (m/s)"
		  SID			  "2206"
		  Position		  [30, 184, 120, 216]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "veh_spd_a_rec"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  SID			  "2207"
		  Position		  [150, 97, 190, 133]
		  Gain			  "0.447"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical"
		  SID			  "2208"
		  Ports			  [2, 1]
		  Position		  [375, 317, 405, 348]
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "2209"
		  Position		  [395, 110, 425, 140]
		  X0			  "cyc_mph(1,2)*0.447/wh_radius*fd_ratio*gb_ratio(gb_num_init)"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "2210"
		  Position		  [310, 310, 340, 340]
		  X0			  "1"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "2211"
		  Ports			  [3, 1]
		  Position		  [215, 99, 245, 131]
		  Inputs		  "**/"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational"
		  SID			  "2212"
		  Ports			  [2, 1]
		  Position		  [225, 307, 255, 338]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational1"
		  SID			  "2213"
		  Ports			  [2, 1]
		  Position		  [225, 412, 255, 443]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "2214"
		  Ports			  [2, 1]
		  Position		  [160, 192, 190, 223]
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "2215"
		  Ports			  [2, 1]
		  Position		  [160, 297, 190, 328]
		  Inputs		  "-+"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "2216"
		  Position		  [310, 110, 340, 140]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "2217"
		  Position		  [465, 120, 495, 150]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "dt"
		  SID			  "2218"
		  Ports			  [0, 1]
		  Position		  [165, 408, 185, 432]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "dt"
		    Location		    [240, 561, 480, 665]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "2219"
		    Position		    [25, 25, 45, 45]
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "2220"
		    Position		    [75, 53, 105, 77]
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum4"
		    SID			    "2221"
		    Ports		    [2, 1]
		    Position		    [130, 27, 160, 58]
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "2222"
		    Position		    [185, 38, 215, 52]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Sum4"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Sum4"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Sum4"
		    DstPort		    1
		    }
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  SID			  "2223"
		  Position		  [545, 128, 575, 142]
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Product"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  Labels		  [1, 0]
		  SrcBlock		  "From <wh>/\ntire slip model (m/s)"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -25; 155, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <cyc>"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <veh>"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    DstBlock		    "Gain"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 190]
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Relational"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gb_spd_in_r\nif no gear change"
		  SrcPort		  1
		  Points		  [370, 0]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "From"
		  SrcPort		  1
		  Points		  [0, 50]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "dt"
		  SrcPort		  1
		  DstBlock		  "Relational1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Logical"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical"
		  SrcPort		  1
		  Points		  [30, 0; 0, -200]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational1"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational1"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "load=T/\n(maxT\nat spd)"
	      SID		      "2224"
	      Ports		      [1, 1]
	      Position		      [275, 151, 295, 169]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "0"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev gear\nnumber"
	      SID		      "2225"
	      Position		      [690, 20, 730, 40]
	      BlockMirror	      on
	      FontName		      "Arial"
	      X0		      "1"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev gear\nratio"
	      SID		      "2226"
	      Position		      [265, 310, 300, 330]
	      BlockMirror	      on
	      FontName		      "Arial"
	      X0		      "gb_ratio(1)"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "shifting1"
	      SID		      "2227"
	      Ports		      [1, 1]
	      Position		      [790, 164, 820, 196]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"shifting1"
		Location		[164, 210, 454, 401]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gear\nnumber"
		  SID			  "2228"
		  Position		  [15, 50, 35, 70]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "2229"
		  Position		  [20, 131, 120, 159]
		  FontName		  "Arial"
		  Value			  "gb_shift_delay-1e-6"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "2230"
		  Ports			  [2, 1]
		  Position		  [185, 53, 215, 77]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "time since last shift"
		  SID			  "2231"
		  Ports			  [1, 1]
		  Position		  [65, 43, 125, 77]
		  ShowName		  off
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('time since\\nlast shift')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "time since last shift"
		    Location		    [16, 396, 306, 535]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "2232"
		    Position		    [10, 60, 30, 80]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "just shifted"
		    SID			    "2233"
		    Ports		    [1, 1]
		    Position		    [60, 57, 110, 83]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('just\\nshifted')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "just shifted"
		    Location		    [140, 214, 463, 359]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "2234"
		    Position		    [55, 55, 75, 75]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "2235"
		    Position		    [120, 55, 155, 75]
		    FontName		    "Arial"
		    X0			    "1"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    SID			    "2236"
		    Ports		    [2, 1]
		    Position		    [190, 58, 220, 82]
		    FontName		    "Arial"
		    Operator		    "~="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "2237"
		    Position		    [250, 60, 270, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, 30; 75, 0; 0, -20]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "timer"
		    SID			    "2238"
		    Ports		    [1, 1]
		    Position		    [140, 55, 175, 85]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('timer')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "timer"
		    Location		    [455, 179, 859, 394]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "trigger"
		    SID			    "2239"
		    Position		    [15, 125, 35, 145]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "2240"
		    Position		    [100, 100, 120, 120]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant1"
		    SID			    "2241"
		    Position		    [100, 150, 120, 170]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant2"
		    SID			    "2242"
		    Position		    [150, 5, 170, 25]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "2243"
		    Position		    [265, 59, 295, 91]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "no-lag\nReset Integrator"
		    SID			    "2244"
		    Ports		    [3, 1]
		    Position		    [155, 96, 205, 174]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskType		    "No-lag Reset Integrator"
		    MaskDescription	    "No-lag Reset Integrator"
		    MaskHelp		    "Integrates first input using Euler technique.\\nAt the time step that input 2 <> zero,\\noutput i"
		    "s reset to input 3."
		    MaskPromptString	    "Initial Value"
		    MaskStyleString	    "edit"
		    MaskVariables	    "initval=@1;"
		    MaskTunableValueString  "on"
		    MaskEnableString	    "on"
		    MaskVisibilityString    "on"
		    MaskToolTipString	    "on"
		    MaskDisplay		    "disp('1/s\\nw/ reset\\nno lag')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "15"
		    System {
		    Name		    "no-lag\nReset Integrator"
		    Location		    [258, 616, 780, 880]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "2245"
		    Position		    [60, 100, 80, 120]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    SID			    "2246"
		    Position		    [60, 140, 80, 160]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_3"
		    SID			    "2247"
		    Position		    [45, 185, 65, 205]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "2248"
		    Position		    [125, 205, 145, 225]
		    BlockRotation	    270
		    NamePlacement	    "alternate"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "2249"
		    Position		    [340, 55, 375, 75]
		    BlockMirror		    on
		    FontName		    "Arial"
		    X0			    "initval"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    SID			    "2250"
		    Ports		    [2, 1]
		    Position		    [160, 96, 180, 114]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    SID			    "2251"
		    Ports		    [2, 1]
		    Position		    [230, 90, 250, 110]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "2252"
		    Position		    [290, 139, 320, 171]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "dt"
		    SID			    "2253"
		    Ports		    [0, 1]
		    Position		    [112, 50, 138, 80]
		    BlockRotation	    270
		    BlockMirror		    on
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "dt"
		    Location		    [80, 285, 429, 424]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "2254"
		    Position		    [65, 60, 85, 80]
		    FontName		    "Arial"
		    FontSize		    8
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "2255"
		    Position		    [125, 85, 160, 105]
		    FontName		    "Arial"
		    FontSize		    8
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    SID			    "2256"
		    Ports		    [2, 1]
		    Position		    [205, 65, 225, 85]
		    FontName		    "Arial"
		    FontSize		    8
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "2257"
		    Position		    [255, 65, 275, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [10, 0; 0, -15]
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "in_2==0"
		    SID			    "2258"
		    Ports		    [2, 1]
		    Position		    [160, 143, 190, 167]
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "2259"
		    Position		    [455, 145, 475, 165]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_3"
		    SrcPort		    1
		    Points		    [200, 0; 0, -30]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "in_2==0"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "dt"
		    SrcPort		    1
		    Points		    [0, 15]
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    Points		    [-130, 0; 0, 30]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    Points		    [10, 0; 0, 45]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    Points		    [85, 0]
		    Branch {
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -90]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "in_2==0"
		    SrcPort		    1
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    Points		    [0, -40]
		    DstBlock		    "in_2==0"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "time"
		    SID			    "2260"
		    Position		    [350, 65, 370, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    DstBlock		    "time"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "trigger"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, -60]
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Constant2"
		    SrcPort		    1
		    Points		    [35, 0; 0, 50]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant1"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "no-lag\nReset Integrator"
		    SrcPort		    1
		    Points		    [35, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "2261"
		    Position		    [225, 60, 245, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "just shifted"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "just shifted"
		    SrcPort		    1
		    DstBlock		    "timer"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "timer"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "2262"
		  Position		  [250, 55, 270, 75]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gear\nnumber"
		  SrcPort		  1
		  DstBlock		  "time since last shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [15, 0; 0, -75]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "time since last shift"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "upshift\n command"
	      SID		      "2263"
	      Ports		      [3, 1]
	      Position		      [415, 124, 445, 176]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"upshift\n command"
		Location		[324, 355, 799, 650]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "2264"
		  Position		  [45, 103, 75, 117]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "2265"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "2266"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "2267"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "2268"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "2269"
		  Ports			  [1, 1]
		  Position		  [245, 100, 275, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_upshift_spd|gb_upshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "2270"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "2271"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "2272"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "2273"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [50, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Product
	      Name		      "~gb_trq_in_r"
	      SID		      "2274"
	      Ports		      [3, 1]
	      Position		      [150, 132, 170, 168]
	      FontName		      "Arial"
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear number, out"
	      SID		      "2275"
	      Position		      [790, 545, 810, 565]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear ratio, out"
	      SID		      "2276"
	      Position		      [790, 385, 810, 405]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "shifting, out"
	      SID		      "2277"
	      Position		      [790, 430, 810, 450]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "gearbox speed\nestimator"
	      SrcPort		      1
	      Points		      [60, 0]
	      Branch {
		Points			[0, -20]
		DstBlock		"MOTOR\ntorque\ncapability"
		DstPort			1
	      }
	      Branch {
		Points			[55, 0]
		Branch {
		  DstBlock		  "downshift \ncommand"
		  DstPort		  3
		}
		Branch {
		  Points		  [0, -100]
		  DstBlock		  "upshift\n command"
		  DstPort		  3
		}
	      }
	    }
	    Line {
	      SrcBlock		      "gb_spd_in_r"
	      SrcPort		      1
	      DstBlock		      "gearbox speed\nestimator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "current\ngear\nnumber"
	      SrcPort		      1
	      DstBlock		      "Saturation1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Fcn"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "prev.\nPout/Pin"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gb_trq_out_r"
	      SrcPort		      1
	      DstBlock		      "~gb_trq_in_r"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "upshift\n command"
	      SrcPort		      1
	      Points		      [115, 0]
	      Branch {
		DstBlock		"delta\ngear\nnumber"
		DstPort			1
	      }
	      Branch {
		Points			[0, 10]
		DstBlock		"delta\ngear\nnumber"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "gear ratio"
	      SrcPort		      1
	      DstBlock		      "prev gear\nratio"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Rate Limiter"
	      SrcPort		      1
	      DstBlock		      "gear ratio"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gb_spd_out_r"
	      SrcPort		      1
	      DstBlock		      "gb_spd_in_r"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "downshift \ncommand"
	      SrcPort		      1
	      DstBlock		      "Gain1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      DstBlock		      "Product3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      Points		      [10, 0; 0, -75]
	      DstBlock		      "delta\ngear\nnumber"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "allow downshift?"
	      SrcPort		      1
	      Points		      [55, 0; 0, 180]
	      DstBlock		      "Product3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "prev gear\nratio"
	      SrcPort		      1
	      Points		      [-160, 0; 0, -50]
	      Branch {
		DstBlock		"Fcn1"
		DstPort			1
	      }
	      Branch {
		DstBlock		"gb_spd_in_r"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "delta\ngear\nnumber"
	      SrcPort		      1
	      Points		      [15, 0; 0, -45]
	      DstBlock		      "current\ngear\nnumber"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Fcn1"
	      SrcPort		      1
	      Points		      [0, -15]
	      DstBlock		      "~gb_trq_in_r"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "MOTOR\ntorque\ncapability"
	      SrcPort		      1
	      Points		      [0, -40]
	      DstBlock		      "Product2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "load=T/\n(maxT\nat spd)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "~gb_trq_in_r"
	      SrcPort		      1
	      DstBlock		      "Product2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Fcn"
	      SrcPort		      1
	      Points		      [10, 0; 0, 85; -75, 0; 0, 35]
	      DstBlock		      "~gb_trq_in_r"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "load=T/\n(maxT\nat spd)"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "tires are at\ntraction limit"
	      SrcPort		      1
	      Points		      [230, 0; 0, 65]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		DstBlock		"upshift\n command"
		DstPort			2
	      }
	      Branch {
		Points			[0, 100]
		DstBlock		"downshift \ncommand"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Saturation1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, 0]
		Branch {
		  Points		  [0, -75]
		  DstBlock		  "prev gear\nnumber"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "gear ratio1"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[0, 75]
		Branch {
		  DstBlock		  "shifting1"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 95]
		  Branch {
		    Points		    [0, 45]
		    DstBlock		    "Rate Limiter"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Goto4"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Line {
	      SrcBlock		      "prev gear\nnumber"
	      SrcPort		      1
	      Points		      [-160, 0]
	      Branch {
		Points			[-130, 0; 0, 30]
		Branch {
		  DstBlock		  "allow downshift?"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 75]
		  Branch {
		    DstBlock		    "upshift\n command"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 100]
		    DstBlock		    "downshift \ncommand"
		    DstPort		    1
		  }
		}
	      }
	      Branch {
		Points			[0, 65]
		DstBlock		"current\ngear\nnumber"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "gear ratio1"
	      SrcPort		      1
	      DstBlock		      "Goto5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "shifting1"
	      SrcPort		      1
	      DstBlock		      "Goto6"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant14"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant15"
	      SrcPort		      1
	      DstBlock		      "Switch4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From4"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Switch4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Switch4"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From2"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From3"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch4"
	      SrcPort		      1
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <logic>2"
	      SrcPort		      1
	      DstBlock		      "Speed Dependent Shifting"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      1
	      DstBlock		      "Goto1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      2
	      DstBlock		      "Goto2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      Points		      [0, -15]
	      DstBlock		      "gear ratio, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      Points		      [0, 10]
	      DstBlock		      "shifting, out"
	      DstPort		      1
	    }
	    Line {
	      Labels		      [1, 0]
	      SrcBlock		      "Switch3"
	      SrcPort		      1
	      DstBlock		      "gear number, out"
	      DstPort		      1
	    }
	    Annotation {
	      SID		      "2278"
	      Name		      "default gear number\ncalculation"
	      Position		      [889, 314]
	    }
	    Annotation {
	      SID		      "2279"
	      Name		      "default shifting\ncalculation"
	      Position		      [908, 211]
	    }
	    Annotation {
	      SID		      "2280"
	      Name		      "default gear ratio\ncalculation"
	      Position		      [902, 79]
	    }
	    Annotation {
	      SID		      "2281"
	      Name		      "local GOTO blocks:"
	      Position		      [902, 47]
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "key_on"
	  SID			  "2282"
	  Ports			  [0, 1]
	  Position		  [620, 440, 660, 470]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  MaskType		  "Repeating table"
	  MaskDescription	  "Repeating table.\nEnter values of time and output for first cycle."
	  MaskHelp		  "Repeats cycle given in table. Time values should be monotonically increasing."
	  MaskPromptString	  "Time values:|Output values:"
	  MaskStyleString	  "edit,edit"
	  MaskVariables		  "t=@1;y=@2;"
	  MaskTunableValueString  "on,on"
	  MaskCallbackString	  "|"
	  MaskEnableString	  "on,on"
	  MaskVisibilityString	  "on,on"
	  MaskToolTipString	  "on,on"
	  MaskInitialization	  "period = max(t);"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskPortRotate	  "default"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "vc_key_on(:,1)|vc_key_on(:,2)"
	  System {
	    Name		    "key_on"
	    Location		    [5, 42, 298, 124]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Clock
	      Name		      "Clock"
	      SID		      "2283"
	      Position		      [15, 25, 35, 45]
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn1"
	      SID		      "2284"
	      Position		      [80, 25, 120, 45]
	      Expr		      "rem(u[1],period)"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "Look-Up Table"
	      SID		      "2285"
	      Position		      [180, 23, 220, 47]
	      InputValues	      "t"
	      Table		      "y"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "out_1"
	      SID		      "2286"
	      Position		      [255, 25, 275, 45]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Look-Up Table"
	      SrcPort		      1
	      DstBlock		      "out_1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Clock"
	      SrcPort		      1
	      DstBlock		      "Fcn1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Fcn1"
	      SrcPort		      1
	      DstBlock		      "Look-Up Table"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "motor controller\nlogic"
	  SID			  "2287"
	  Ports			  [4, 1]
	  Position		  [690, 302, 720, 403]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "motor controller\nlogic"
	    Location		    [222, 101, 762, 449]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "2288"
	      Position		      [25, 295, 45, 315]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "bus voltage"
	      SID		      "2289"
	      Position		      [30, 30, 50, 50]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd input\npower (W)"
	      SID		      "2290"
	      Position		      [30, 160, 50, 180]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd output\nspd (rad/s)"
	      SID		      "2291"
	      Position		      [25, 235, 45, 255]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs"
	      SID		      "2292"
	      Position		      [170, 123, 200, 147]
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs1"
	      SID		      "2293"
	      Position		      [75, 233, 105, 257]
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "2294"
	      Ports		      []
	      Position		      [445, 275, 501, 315]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[263, 139, 778, 219]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "2295"
		  Name			  "This block models a motor/controller's logic, modulating the power input requirement as follows:\n- enfo"
		  "rcing the maximum current limit of the motor/controller\n- shutting the motor off if the average speed over the ti"
		  "me step ==0\n- shutting the motor off if the transmission is shifting."
		  Position		  [257, 40]
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "2296"
	      Position		      [85, 79, 155, 101]
	      FontName		      "Arial"
	      Value		      "mc_max_crrnt"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "2297"
	      Position		      [130, 253, 170, 267]
	      ShowName		      off
	      FontName		      "Arial"
	      Value		      "0.001"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "2298"
	      Position		      [360, 196, 385, 214]
	      ShowName		      off
	      FontName		      "Arial"
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <sdo>"
	      SID		      "2299"
	      Position		      [430, 24, 520, 46]
	      GotoTag		      "mc_crrnt_limited"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "2300"
	      Ports		      [1, 1]
	      Position		      [309, 210, 341, 245]
	      BlockRotation	      270
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "2301"
	      Position		      [110, 25, 140, 55]
	      X0		      "ess_module_num*mean(ess_voc(:,1))"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      SID		      "2302"
	      Ports		      [2, 1]
	      Position		      [245, 37, 275, 68]
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      SID		      "2303"
	      Ports		      [2, 1]
	      Position		      [190, 34, 210, 61]
	      ShowName		      off
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "2304"
	      Ports		      [2, 1]
	      Position		      [190, 237, 220, 268]
	      ShowName		      off
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "2305"
	      Ports		      [2, 1]
	      Position		      [365, 17, 395, 48]
	      ShowName		      off
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Sign"
	      SID		      "2306"
	      Ports		      [1, 1]
	      Position		      [250, 157, 280, 183]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Sign"
	      MaskDescription	      "y = sign(x)"
	      MaskHelp		      "Sign Function:\\n\\t\\t\\ty = 1 if x > 0\\n\\t\\t\\ty = 0 if x = 0\\n\\t\\t\\ty = -1 if x < 0"
	      MaskDisplay	      "plot(-50,-50,50,50,[-50,50],[0,0],[0,0],[-50,50],[-40,0],[-30,-30],[0,40],[30,30])"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Sign"
		Location		[159, 417, 467, 586]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "2307"
		  Position		  [35, 30, 55, 50]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "2308"
		  Position		  [65, 105, 85, 125]
		  Value			  "0"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "2309"
		  Ports			  [2, 1]
		  Position		  [140, 32, 170, 63]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "2310"
		  Ports			  [2, 1]
		  Position		  [140, 92, 170, 123]
		  Operator		  "<"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "2311"
		  Ports			  [2, 1]
		  Position		  [215, 64, 235, 91]
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "2312"
		  Position		  [265, 70, 285, 90]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  Points		  [10, 0; 0, 20]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  Points		  [10, 0; 0, -25]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    Points		    [0, -60]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    Points		    [0, 60]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "2313"
	      Position		      [405, 156, 435, 214]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "current-limited\npower"
	      SID		      "2314"
	      Ports		      [2, 1]
	      Position		      [330, 51, 350, 69]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "true if motor\nshould be\nshut down"
	      SID		      "2315"
	      Ports		      [2, 1]
	      Position		      [265, 247, 295, 278]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd input\npower (W)1"
	      SID		      "2316"
	      Position		      [470, 175, 490, 195]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Goto <sdo>"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [0, -20]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "req'd input\npower (W)1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "current-limited\npower"
	      SrcPort		      1
	      Points		      [30, 0; 0, 105]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sign"
	      SrcPort		      1
	      Points		      [5, 0; 0, -105]
	      DstBlock		      "current-limited\npower"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      Points		      [10, 0; 0, 0]
	      Branch {
		DstBlock		"current-limited\npower"
		DstPort			1
	      }
	      Branch {
		Points			[0, -15]
		DstBlock		"Relational\nOperator2"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "req'd input\npower (W)"
	      SrcPort		      1
	      Points		      [80, 0]
	      Branch {
		Points			[0, -35]
		DstBlock		"Abs"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Sign"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Abs1"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      Points		      [185, 0; 0, -35]
	      DstBlock		      "true if motor\nshould be\nshut down"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "true if motor\nshould be\nshut down"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "req'd output\nspd (rad/s)"
	      SrcPort		      1
	      DstBlock		      "Abs1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "true if motor\nshould be\nshut down"
	      SrcPort		      1
	      Points		      [25, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "bus voltage"
	      SrcPort		      1
	      DstBlock		      "Memory"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [10, -35]
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Abs"
	      SrcPort		      1
	      Points		      [25, 0]
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      Points		      [10, 0; 0, 0]
	      Branch {
		DstBlock		"MinMax"
		DstPort			1
	      }
	      Branch {
		Points			[0, -25]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "sim stop\nsubsystem"
	  SID			  "2317"
	  Ports			  []
	  Position		  [30, 15, 60, 65]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/sim stop\nsubsystem"
	  SourceType		  "SubSystem"
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  3
	  Points		  [0, 10]
	  DstBlock		  "Goto <wh>2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  2
	  Points		  [0, 10]
	  DstBlock		  "Goto <wh>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <veh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>5"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  1
	  Points		  [0, 10; 5, 0]
	  Branch {
	    DstBlock		    "braking strategy"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [220, 0]
	    Branch {
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Branch {
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  2
	  Points		  [150, 0]
	  Branch {
	    DstBlock		    "Sum"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -50]
	    DstBlock		    "Goto <wh>8"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "From <mc>1"
	  SrcPort		  1
	  Points		  [5, 0]
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <mc>"
	  SrcPort		  1
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <ess>"
	  SrcPort		  1
	  Points		  [5, 0]
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "motor controller\nlogic"
	  SrcPort		  1
	  DstBlock		  "Goto <mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>4"
	  SrcPort		  1
	  Points		  [15, 0]
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "key_on"
	  SrcPort		  1
	  DstBlock		  "Goto <mc>\n<pb><sdo>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From<gb>"
	  SrcPort		  1
	  Points		  [10, 0]
	  DstBlock		  "gearbox control\nfor series \nHV and EV"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>1"
	  SrcPort		  1
	  Points		  [0, 5]
	  DstBlock		  "gearbox control\nfor series \nHV and EV"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <gb>2"
	  SrcPort		  1
	  Points		  [0, -10]
	  DstBlock		  "gearbox control\nfor series \nHV and EV"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <gb>3"
	  SrcPort		  1
	  Points		  [10, 0]
	  DstBlock		  "gearbox control\nfor series \nHV and EV"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "engaged"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Relational\nOperator"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>4"
	  SrcPort		  1
	  DstBlock		  "Relational\nOperator"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <wh>"
	  SrcPort		  1
	  Points		  [25, 0]
	  DstBlock		  "config traction control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>5"
	  SrcPort		  1
	  Points		  [0, -10]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "From<wh>4"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <wh>3"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <wh>2"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>6"
	  SrcPort		  1
	  Points		  [40, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>1"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>7"
	  SrcPort		  1
	  DstBlock		  "braking strategy"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox control\nfor series \nHV and EV"
	  SrcPort		  3
	  DstBlock		  "Goto <gb>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox control\nfor series \nHV and EV"
	  SrcPort		  2
	  DstBlock		  "Goto <gb>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox control\nfor series \nHV and EV"
	  SrcPort		  1
	  DstBlock		  "Goto"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  4
	  Points		  [10, 0]
	  DstBlock		  "Goto <wh>6"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  5
	  Points		  [5, 0]
	  DstBlock		  "Goto <wh>7"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Ground"
	  SrcPort		  1
	  Points		  [40, 0; 0, -70]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  6
	}
	Annotation {
	  SID			  "2318"
	  Name			  "force\nrequired (N)"
	  Position		  [222, 130]
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "<vc> fuel cell"
      SID		      "305"
      Ports		      []
      Position		      [109, 561, 164, 611]
      BackgroundColor	      "yellow"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_vc.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"<vc> fuel cell"
	Location		[780, 350, 1767, 1018]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"97"
	Block {
	  BlockType		  From
	  Name			  "From <cs>"
	  SID			  "2319"
	  Position		  [550, 356, 635, 374]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "engine_on"
	}
	Block {
	  BlockType		  From
	  Name			  "From <ess>"
	  SID			  "2320"
	  Position		  [550, 40, 645, 60]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "bus_voltage"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>1"
	  SID			  "2321"
	  Position		  [550, 220, 630, 240]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>2"
	  SID			  "2322"
	  Position		  [550, 256, 630, 274]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "eta_gb"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>3"
	  SID			  "2323"
	  Position		  [550, 291, 640, 309]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "slip_limited"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>"
	  SID			  "2324"
	  Position		  [550, 65, 645, 85]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "P_mc_in_1lim"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>1"
	  SID			  "2325"
	  Position		  [550, 102, 640, 118]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_mc_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>2"
	  SID			  "2326"
	  Position		  [550, 137, 640, 153]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <veh>"
	  SID			  "2327"
	  Position		  [25, 212, 100, 228]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_prev"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>"
	  SID			  "2328"
	  Position		  [35, 245, 95, 265]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>1"
	  SID			  "2329"
	  Position		  [15, 176, 100, 194]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>2"
	  SID			  "2330"
	  Position		  [225, 342, 335, 358]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_drivetrain_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>3"
	  SID			  "2331"
	  Position		  [230, 376, 330, 394]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_wheel_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>4"
	  SID			  "2332"
	  Position		  [205, 305, 265, 325]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>5"
	  SID			  "2333"
	  Position		  [210, 431, 330, 449]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_rear_brake"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>6"
	  SID			  "2334"
	  Position		  [295, 215, 355, 235]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>7"
	  SID			  "2335"
	  Position		  [75, 101, 160, 119]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From<gb>"
	  SID			  "2336"
	  Position		  [550, 191, 630, 209]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From<wh>4"
	  SID			  "2337"
	  Position		  [225, 401, 340, 419]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_front_brake"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto"
	  SID			  "2338"
	  Position		  [750, 197, 825, 223]
	  NamePlacement		  "alternate"
	  GotoTag		  "gear_number"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>\n<mc><pb>"
	  SID			  "2339"
	  Position		  [730, 431, 780, 449]
	  GotoTag		  "key_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>"
	  SID			  "2340"
	  Position		  [755, 271, 825, 289]
	  GotoTag		  "shifting"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>1"
	  SID			  "2341"
	  Position		  [755, 236, 825, 254]
	  GotoTag		  "gear_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <mc>"
	  SID			  "2342"
	  Position		  [705, 80, 770, 100]
	  GotoTag		  "P_mc_in_r"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>"
	  SID			  "2343"
	  Position		  [735, 354, 805, 376]
	  GotoTag		  "clutch_state"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>1"
	  SID			  "2344"
	  Position		  [450, 211, 535, 229]
	  GotoTag		  "slip_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>"
	  SID			  "2345"
	  Position		  [445, 135, 530, 155]
	  NamePlacement		  "alternate"
	  GotoTag		  "F_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>1"
	  SID			  "2346"
	  Position		  [185, 189, 275, 211]
	  GotoTag		  "v_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>2"
	  SID			  "2347"
	  Position		  [210, 221, 300, 239]
	  GotoTag		  "wt_front_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>3"
	  SID			  "2348"
	  Position		  [425, 346, 510, 364]
	  GotoTag		  "F_front_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>4"
	  SID			  "2349"
	  Position		  [425, 409, 510, 431]
	  GotoTag		  "F_rear_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>5"
	  SID			  "2350"
	  Position		  [225, 100, 335, 120]
	  GotoTag		  "F_front_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>6"
	  SID			  "2351"
	  Position		  [290, 246, 380, 264]
	  GotoTag		  "wt_rear_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>7"
	  SID			  "2352"
	  Position		  [285, 276, 375, 294]
	  GotoTag		  "front_traction_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>8"
	  SID			  "2353"
	  Position		  [395, 70, 505, 90]
	  GotoTag		  "F_rear_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Ground
	  Name			  "Ground"
	  SID			  "2354"
	  Position		  [275, 470, 295, 490]
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator"
	  SID			  "2355"
	  Ports			  [2, 1]
	  Position		  [395, 202, 425, 233]
	  Operator		  "~="
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  SID			  "2356"
	  Ports			  [2, 1]
	  Position		  [395, 127, 425, 158]
	  Inputs		  "-+"
	}
	Block {
	  BlockType		  Reference
	  Name			  "braking strategy"
	  SID			  "2357"
	  Ports			  [2, 2]
	  Position		  [180, 97, 210, 148]
	  NamePlacement		  "alternate"
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/braking strategy"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "config traction control"
	  SID			  "2358"
	  Ports			  [3, 5]
	  Position		  [125, 169, 160, 271]
	  BackgroundColor	  "darkGreen"
	  AttributesFormatString  "%<BlockChoice>"
	  ShowPortLabels	  "none"
	  BlockChoice		  "traction control 2 axle"
	  TemplateBlock		  "lib_controls/SubSystem/config traction control"
	  MemberBlocks		  "traction control 2 axle,traction control J2452 2 axle"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "config traction control"
	    Location		    [148, 182, 646, 482]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    SIDHighWatermark	    "6898"
	    Block {
	      BlockType		      Inport
	      Name		      "time-average\nvehicle speed\n req'd (m/s)"
	      SID		      "2358::706"
	      Position		      [20, 40, 40, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SID		      "2358::707"
	      Position		      [20, 80, 40, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "total tractive\nforce req'd\n(N)"
	      SID		      "2358::708"
	      Position		      [20, 120, 40, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "traction control\n2 axle"
	      SID		      "2358::709"
	      Ports		      [3, 5]
	      Position		      [100, 40, 140, 80]
	      BackgroundColor	      "darkGreen"
	      LibraryVersion	      "1.479"
	      SourceBlock	      "lib_controls/SubSystem/traction control 2 axle"
	      SourceType	      "SubSystem"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd force\n(N)"
	      SID		      "2358::710"
	      Position		      [200, 40, 220, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd speed\n(m/s)"
	      SID		      "2358::711"
	      Position		      [200, 80, 220, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nfront axle\n(N)"
	      SID		      "2358::712"
	      Position		      [200, 120, 220, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nrear axle\n(N)"
	      SID		      "2358::713"
	      Position		      [200, 160, 220, 180]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "front/total \ntraction ratio"
	      SID		      "2358::714"
	      Position		      [200, 200, 220, 220]
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "time-average\nvehicle speed\n req'd (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "total tractive\nforce req'd\n(N)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      1
	      DstBlock		      "req'd force\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      2
	      DstBlock		      "req'd speed\n(m/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      3
	      DstBlock		      "weight on\nfront axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      4
	      DstBlock		      "weight on\nrear axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      5
	      DstBlock		      "front/total \ntraction ratio"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "front and rear\nbrake controller\n(achievable)"
	  SID			  "2359"
	  Ports			  [6, 2]
	  Position		  [370, 321, 405, 449]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/front and rear\nbrake controller\n(achievable)"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "gearbox control\nfor series \nHV and EV"
	  SID			  "2360"
	  Ports			  [4, 3]
	  Position		  [660, 190, 700, 295]
	  FontName		  "Arial"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "gearbox control\nfor series \nHV and EV"
	    Location		    [10, 74, 997, 742]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_out_r"
	      SID		      "2361"
	      Position		      [45, 130, 65, 150]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_out_r"
	      SID		      "2362"
	      Position		      [45, 250, 65, 270]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "prev.\nPout/Pin"
	      SID		      "2363"
	      Position		      [45, 20, 65, 40]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "tires are at\ntraction limit"
	      SID		      "2364"
	      Position		      [45, 75, 65, 95]
	      FontName		      "Arial"
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "2365"
	      Ports		      []
	      Position		      [870, 600, 926, 640]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[229, 259, 687, 388]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "2366"
		  Name			  "This gearbox control block computes the current gear number given the gearbox's\nreq'd output torque and"
		  " speed and an estimate its efficiency.  Upshifts occur, given a\ncertain engine speed,  when the estimated engine "
		  "load falls below the upshift curve\nin engine speed/load space, and downshifts likewise occur when estimated engin"
		  "e\nload rises above the downshift curve.  Separate upshift and downshift curves are\ndefined for each gear.  An up"
		  "shift may not be immediately followed by a downshift.\nIf the tires are about to slip, don't upshift unless the en"
		  "gine would be at max. speed.\nEnforce this rule by setting the load to 1 when the tires are about to slip."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "2367"
	      Position		      [330, 95, 350, 115]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant14"
	      SID		      "2368"
	      Position		      [450, 548, 545, 562]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant15"
	      SID		      "2369"
	      Position		      [380, 413, 475, 427]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      SID		      "2370"
	      Ports		      [1, 2]
	      Position		      [720, 401, 725, 439]
	      BackgroundColor	      "black"
	      ShowName		      off
	      Outputs		      "2"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn"
	      SID		      "2371"
	      Position		      [155, 20, 185, 40]
	      FontName		      "Arial"
	      Expr		      "1/u"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn1"
	      SID		      "2372"
	      Position		      [85, 180, 115, 200]
	      BlockRotation	      270
	      FontName		      "Arial"
	      Expr		      "1/u"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      SID		      "2373"
	      Position		      [550, 520, 675, 540]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <logic>2"
	      SID		      "2374"
	      Position		      [30, 474, 135, 506]
	      ForegroundColor	      "red"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "v_req_limited"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      SID		      "2375"
	      Position		      [550, 580, 675, 600]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From2"
	      SID		      "2376"
	      Position		      [490, 440, 615, 460]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From3"
	      SID		      "2377"
	      Position		      [490, 465, 615, 485]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From4"
	      SID		      "2378"
	      Position		      [490, 375, 615, 395]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      SID		      "2379"
	      Position		      [480, 237, 505, 263]
	      FontName		      "Arial"
	      Gain		      "-1"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto1"
	      SID		      "2380"
	      Position		      [255, 465, 375, 485]
	      NamePlacement	      "alternate"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto2"
	      SID		      "2381"
	      Position		      [255, 489, 375, 511]
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto4"
	      SID		      "2382"
	      Position		      [810, 255, 945, 275]
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto5"
	      SID		      "2383"
	      Position		      [835, 95, 945, 115]
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto6"
	      SID		      "2384"
	      Position		      [840, 170, 950, 190]
	      NamePlacement	      "alternate"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "MOTOR\ntorque\ncapability"
	      SID		      "2385"
	      Position		      [190, 210, 220, 230]
	      BlockRotation	      270
	      FontName		      "Arial"
	      InputValues	      "mc_map_spd*mc_spd_scale"
	      Table		      "mc_max_trq*mc_trq_scale+eps"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "2386"
	      Ports		      [2, 1]
	      Position		      [635, 437, 640, 488]
	      ShowName		      off
	      Inputs		      "2"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      SID		      "2387"
	      Ports		      [2, 1]
	      Position		      [225, 142, 255, 173]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      SID		      "2388"
	      Ports		      [2, 1]
	      Position		      [540, 233, 560, 257]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      RateLimiter
	      Name		      "Rate Limiter"
	      SID		      "2389"
	      Position		      [510, 307, 540, 333]
	      BlockMirror	      on
	      RisingSlewLimit	      "1/(gb_shift_delay+eps)"
	      FallingSlewLimit	      "-1/(gb_shift_delay+eps)"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "2390"
	      Ports		      [1, 1]
	      Position		      [90, 20, 120, 40]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "0.2"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation1"
	      SID		      "2391"
	      Ports		      [1, 1]
	      Position		      [725, 96, 745, 114]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "gb_gears_num"
	      LowerLimit	      "1"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Speed Dependent Shifting"
	      SID		      "2392"
	      Ports		      [1, 2]
	      Position		      [180, 462, 210, 513]
	      SourceBlock	      "lib_controls/SubSystem/Speed Dependent Shifting"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "off"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "2393"
	      Position		      [325, 135, 355, 165]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch3"
	      SID		      "2394"
	      Position		      [695, 540, 725, 570]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch4"
	      SID		      "2395"
	      Position		      [665, 405, 695, 435]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "allow downshift?"
	      SID		      "2396"
	      Ports		      [1, 1]
	      Position		      [420, 42, 450, 78]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"allow downshift?"
		Location		[328, 265, 817, 480]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gearnum"
		  SID			  "2397"
		  Position		  [35, 35, 55, 55]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  SID			  "2398"
		  Ports			  [2, 1]
		  Position		  [375, 43, 405, 67]
		  FontName		  "Arial"
		  Operator		  "NOR"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "2399"
		  Position		  [145, 60, 180, 80]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "2400"
		  Position		  [145, 105, 180, 125]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "2401"
		  Ports			  [2, 1]
		  Position		  [225, 38, 255, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator2"
		  SID			  "2402"
		  Ports			  [2, 1]
		  Position		  [225, 98, 255, 122]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  Outport
		  Name			  "allow shift"
		  SID			  "2403"
		  Position		  [445, 45, 465, 65]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  DstBlock		  "allow shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gearnum"
		  SrcPort		  1
		  Points		  [45, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 25]
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 35]
		    DstBlock		    "Relational\nOperator2"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [15, 0; 0, -15]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 30; -60, 0]
		    DstBlock		    "Memory1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator2"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical\nOperator"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "current\ngear\nnumber"
	      SID		      "2404"
	      Ports		      [2, 1]
	      Position		      [670, 87, 690, 123]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "delta\ngear\nnumber"
	      SID		      "2405"
	      Position		      [600, 144, 630, 176]
	      FontName		      "Arial"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "downshift \ncommand"
	      SID		      "2406"
	      Ports		      [3, 1]
	      Position		      [415, 224, 445, 276]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"downshift \ncommand"
		Location		[431, 372, 906, 667]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "2407"
		  Position		  [45, 98, 75, 112]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "2408"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "2409"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "2410"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "2411"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "2412"
		  Ports			  [1, 1]
		  Position		  [240, 100, 270, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_dnshift_spd|gb_dnshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "2413"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "2414"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "2415"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "2416"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [55, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Product
	      Name		      "gb_spd_in_r"
	      SID		      "2417"
	      Ports		      [2, 1]
	      Position		      [150, 253, 170, 277]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio"
	      SID		      "2418"
	      Position		      [400, 308, 430, 332]
	      BlockMirror	      on
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      Table		      "gb_ratio"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio1"
	      SID		      "2419"
	      Position		      [785, 93, 815, 117]
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      Table		      "gb_ratio"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "gearbox speed\nestimator"
	      SID		      "2420"
	      Ports		      [1, 1]
	      Position		      [225, 250, 255, 280]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"gearbox speed\nestimator"
		Location		[230, 189, 818, 698]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_in_r\nif no gear change"
		  SID			  "2421"
		  Position		  [45, 18, 75, 32]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "2422"
		  Ports			  []
		  Position		  [515, 345, 571, 385]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [497, 485, 832, 570]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "2423"
		    Name		    "The requested motor speed is replaced by an estimate of the\nengine's previous speed whenever the veh"
		    "icle missed the trace\n by more than 1 mph on the last time step."
		    Position		    [167, 41]
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "2424"
		  Position		  [165, 240, 185, 260]
		  BlockMirror		  on
		  Value			  "eps"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "2425"
		  Position		  [315, 165, 335, 185]
		  BlockMirror		  on
		  Value			  "0"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "2426"
		  Position		  [230, 360, 250, 380]
		  BlockMirror		  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "2427"
		  Position		  [230, 460, 250, 480]
		  BlockMirror		  on
		  Value			  "0.11"
		}
		Block {
		  BlockType		  From
		  Name			  "From"
		  SID			  "2428"
		  Position		  [195, 40, 285, 70]
		  BlockMirror		  on
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "gb_spd_in_a"
		}
		Block {
		  BlockType		  From
		  Name			  "From <cyc>"
		  SID			  "2429"
		  Position		  [30, 304, 120, 336]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "cyc_mph_r"
		}
		Block {
		  BlockType		  From
		  Name			  "From <veh>"
		  SID			  "2430"
		  Position		  [30, 99, 85, 131]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "mpha"
		}
		Block {
		  BlockType		  From
		  Name			  "From <wh>/\ntire slip model (m/s)"
		  SID			  "2431"
		  Position		  [30, 184, 120, 216]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "veh_spd_a_rec"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  SID			  "2432"
		  Position		  [150, 97, 190, 133]
		  Gain			  "0.447"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical"
		  SID			  "2433"
		  Ports			  [2, 1]
		  Position		  [375, 317, 405, 348]
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "2434"
		  Position		  [395, 110, 425, 140]
		  X0			  "cyc_mph(1,2)*0.447/wh_radius*fd_ratio*gb_ratio(gb_num_init)"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "2435"
		  Position		  [310, 310, 340, 340]
		  X0			  "1"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "2436"
		  Ports			  [3, 1]
		  Position		  [215, 99, 245, 131]
		  Inputs		  "**/"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational"
		  SID			  "2437"
		  Ports			  [2, 1]
		  Position		  [225, 307, 255, 338]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational1"
		  SID			  "2438"
		  Ports			  [2, 1]
		  Position		  [225, 412, 255, 443]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "2439"
		  Ports			  [2, 1]
		  Position		  [160, 192, 190, 223]
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "2440"
		  Ports			  [2, 1]
		  Position		  [160, 297, 190, 328]
		  Inputs		  "-+"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "2441"
		  Position		  [310, 110, 340, 140]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "2442"
		  Position		  [465, 120, 495, 150]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "dt"
		  SID			  "2443"
		  Ports			  [0, 1]
		  Position		  [165, 408, 185, 432]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "dt"
		    Location		    [240, 561, 480, 665]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "2444"
		    Position		    [25, 25, 45, 45]
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "2445"
		    Position		    [75, 53, 105, 77]
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum4"
		    SID			    "2446"
		    Ports		    [2, 1]
		    Position		    [130, 27, 160, 58]
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "2447"
		    Position		    [185, 38, 215, 52]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Sum4"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Sum4"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Sum4"
		    DstPort		    1
		    }
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  SID			  "2448"
		  Position		  [545, 128, 575, 142]
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Product"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  Labels		  [1, 0]
		  SrcBlock		  "From <wh>/\ntire slip model (m/s)"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -25; 155, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <cyc>"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <veh>"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    DstBlock		    "Gain"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 190]
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Relational"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gb_spd_in_r\nif no gear change"
		  SrcPort		  1
		  Points		  [370, 0]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "From"
		  SrcPort		  1
		  Points		  [0, 50]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "dt"
		  SrcPort		  1
		  DstBlock		  "Relational1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Logical"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical"
		  SrcPort		  1
		  Points		  [30, 0; 0, -200]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational1"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational1"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "load=T/\n(maxT\nat spd)"
	      SID		      "2449"
	      Ports		      [1, 1]
	      Position		      [275, 151, 295, 169]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "0"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev gear\nnumber"
	      SID		      "2450"
	      Position		      [690, 20, 730, 40]
	      BlockMirror	      on
	      FontName		      "Arial"
	      X0		      "1"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev gear\nratio"
	      SID		      "2451"
	      Position		      [265, 310, 300, 330]
	      BlockMirror	      on
	      FontName		      "Arial"
	      X0		      "gb_ratio(1)"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "shifting1"
	      SID		      "2452"
	      Ports		      [1, 1]
	      Position		      [785, 164, 815, 196]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"shifting1"
		Location		[164, 210, 454, 401]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gear\nnumber"
		  SID			  "2453"
		  Position		  [15, 50, 35, 70]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "2454"
		  Position		  [20, 131, 120, 159]
		  FontName		  "Arial"
		  Value			  "gb_shift_delay-1e-6"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "2455"
		  Ports			  [2, 1]
		  Position		  [185, 53, 215, 77]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "time since last shift"
		  SID			  "2456"
		  Ports			  [1, 1]
		  Position		  [65, 43, 125, 77]
		  ShowName		  off
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('time since\\nlast shift')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "time since last shift"
		    Location		    [16, 396, 306, 535]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "2457"
		    Position		    [10, 60, 30, 80]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "just shifted"
		    SID			    "2458"
		    Ports		    [1, 1]
		    Position		    [60, 57, 110, 83]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('just\\nshifted')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "just shifted"
		    Location		    [140, 214, 463, 359]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "2459"
		    Position		    [55, 55, 75, 75]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "2460"
		    Position		    [120, 55, 155, 75]
		    FontName		    "Arial"
		    X0			    "1"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    SID			    "2461"
		    Ports		    [2, 1]
		    Position		    [190, 58, 220, 82]
		    FontName		    "Arial"
		    Operator		    "~="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "2462"
		    Position		    [250, 60, 270, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, 30; 75, 0; 0, -20]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "timer"
		    SID			    "2463"
		    Ports		    [1, 1]
		    Position		    [140, 55, 175, 85]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('timer')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "timer"
		    Location		    [455, 179, 859, 394]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "trigger"
		    SID			    "2464"
		    Position		    [15, 125, 35, 145]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "2465"
		    Position		    [100, 100, 120, 120]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant1"
		    SID			    "2466"
		    Position		    [100, 150, 120, 170]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant2"
		    SID			    "2467"
		    Position		    [150, 5, 170, 25]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "2468"
		    Position		    [265, 59, 295, 91]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "no-lag\nReset Integrator"
		    SID			    "2469"
		    Ports		    [3, 1]
		    Position		    [155, 96, 205, 174]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskType		    "No-lag Reset Integrator"
		    MaskDescription	    "No-lag Reset Integrator"
		    MaskHelp		    "Integrates first input using Euler technique.\\nAt the time step that input 2 <> zero,\\noutput i"
		    "s reset to input 3."
		    MaskPromptString	    "Initial Value"
		    MaskStyleString	    "edit"
		    MaskVariables	    "initval=@1;"
		    MaskTunableValueString  "on"
		    MaskEnableString	    "on"
		    MaskVisibilityString    "on"
		    MaskToolTipString	    "on"
		    MaskDisplay		    "disp('1/s\\nw/ reset\\nno lag')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "15"
		    System {
		    Name		    "no-lag\nReset Integrator"
		    Location		    [258, 616, 780, 880]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "2470"
		    Position		    [60, 100, 80, 120]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    SID			    "2471"
		    Position		    [60, 140, 80, 160]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_3"
		    SID			    "2472"
		    Position		    [45, 185, 65, 205]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "2473"
		    Position		    [125, 205, 145, 225]
		    BlockRotation	    270
		    NamePlacement	    "alternate"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "2474"
		    Position		    [340, 55, 375, 75]
		    BlockMirror		    on
		    FontName		    "Arial"
		    X0			    "initval"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    SID			    "2475"
		    Ports		    [2, 1]
		    Position		    [160, 96, 180, 114]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    SID			    "2476"
		    Ports		    [2, 1]
		    Position		    [230, 90, 250, 110]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "2477"
		    Position		    [290, 139, 320, 171]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "dt"
		    SID			    "2478"
		    Ports		    [0, 1]
		    Position		    [112, 50, 138, 80]
		    BlockRotation	    270
		    BlockMirror		    on
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "dt"
		    Location		    [80, 285, 429, 424]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "2479"
		    Position		    [65, 60, 85, 80]
		    FontName		    "Arial"
		    FontSize		    8
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "2480"
		    Position		    [125, 85, 160, 105]
		    FontName		    "Arial"
		    FontSize		    8
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    SID			    "2481"
		    Ports		    [2, 1]
		    Position		    [205, 65, 225, 85]
		    FontName		    "Arial"
		    FontSize		    8
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "2482"
		    Position		    [255, 65, 275, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [10, 0; 0, -15]
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "in_2==0"
		    SID			    "2483"
		    Ports		    [2, 1]
		    Position		    [160, 143, 190, 167]
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "2484"
		    Position		    [455, 145, 475, 165]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_3"
		    SrcPort		    1
		    Points		    [200, 0; 0, -30]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "in_2==0"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "dt"
		    SrcPort		    1
		    Points		    [0, 15]
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    Points		    [-130, 0; 0, 30]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    Points		    [10, 0; 0, 45]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    Points		    [85, 0]
		    Branch {
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -90]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "in_2==0"
		    SrcPort		    1
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    Points		    [0, -40]
		    DstBlock		    "in_2==0"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "time"
		    SID			    "2485"
		    Position		    [350, 65, 370, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    DstBlock		    "time"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "trigger"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, -60]
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Constant2"
		    SrcPort		    1
		    Points		    [35, 0; 0, 50]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant1"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "no-lag\nReset Integrator"
		    SrcPort		    1
		    Points		    [35, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "2486"
		    Position		    [225, 60, 245, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "just shifted"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "just shifted"
		    SrcPort		    1
		    DstBlock		    "timer"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "timer"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "2487"
		  Position		  [250, 55, 270, 75]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gear\nnumber"
		  SrcPort		  1
		  DstBlock		  "time since last shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [15, 0; 0, -75]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "time since last shift"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "upshift\n command"
	      SID		      "2488"
	      Ports		      [3, 1]
	      Position		      [415, 124, 445, 176]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"upshift\n command"
		Location		[324, 355, 799, 650]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "2489"
		  Position		  [45, 103, 75, 117]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "2490"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "2491"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "2492"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "2493"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "2494"
		  Ports			  [1, 1]
		  Position		  [245, 100, 275, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_upshift_spd|gb_upshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "2495"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "2496"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "2497"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "2498"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [50, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Product
	      Name		      "~gb_trq_in_r"
	      SID		      "2499"
	      Ports		      [3, 1]
	      Position		      [150, 132, 170, 168]
	      FontName		      "Arial"
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear number, out"
	      SID		      "2500"
	      Position		      [790, 545, 810, 565]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear ratio, out"
	      SID		      "2501"
	      Position		      [790, 385, 810, 405]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "shifting, out"
	      SID		      "2502"
	      Position		      [790, 430, 810, 450]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "gearbox speed\nestimator"
	      SrcPort		      1
	      Points		      [60, 0]
	      Branch {
		Points			[0, -20]
		DstBlock		"MOTOR\ntorque\ncapability"
		DstPort			1
	      }
	      Branch {
		Points			[55, 0]
		Branch {
		  DstBlock		  "downshift \ncommand"
		  DstPort		  3
		}
		Branch {
		  Points		  [0, -100]
		  DstBlock		  "upshift\n command"
		  DstPort		  3
		}
	      }
	    }
	    Line {
	      SrcBlock		      "gb_spd_in_r"
	      SrcPort		      1
	      DstBlock		      "gearbox speed\nestimator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "current\ngear\nnumber"
	      SrcPort		      1
	      DstBlock		      "Saturation1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Fcn"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "prev.\nPout/Pin"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gb_trq_out_r"
	      SrcPort		      1
	      DstBlock		      "~gb_trq_in_r"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "upshift\n command"
	      SrcPort		      1
	      Points		      [115, 0]
	      Branch {
		DstBlock		"delta\ngear\nnumber"
		DstPort			1
	      }
	      Branch {
		Points			[0, 10]
		DstBlock		"delta\ngear\nnumber"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "gear ratio"
	      SrcPort		      1
	      DstBlock		      "prev gear\nratio"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Rate Limiter"
	      SrcPort		      1
	      DstBlock		      "gear ratio"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gb_spd_out_r"
	      SrcPort		      1
	      DstBlock		      "gb_spd_in_r"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "downshift \ncommand"
	      SrcPort		      1
	      DstBlock		      "Gain1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      DstBlock		      "Product3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      Points		      [10, 0; 0, -75]
	      DstBlock		      "delta\ngear\nnumber"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "allow downshift?"
	      SrcPort		      1
	      Points		      [55, 0; 0, 180]
	      DstBlock		      "Product3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "prev gear\nratio"
	      SrcPort		      1
	      Points		      [-160, 0; 0, -50]
	      Branch {
		DstBlock		"Fcn1"
		DstPort			1
	      }
	      Branch {
		DstBlock		"gb_spd_in_r"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "delta\ngear\nnumber"
	      SrcPort		      1
	      Points		      [15, 0; 0, -45]
	      DstBlock		      "current\ngear\nnumber"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Fcn1"
	      SrcPort		      1
	      Points		      [0, -15]
	      DstBlock		      "~gb_trq_in_r"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "MOTOR\ntorque\ncapability"
	      SrcPort		      1
	      Points		      [0, -40]
	      DstBlock		      "Product2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "load=T/\n(maxT\nat spd)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "~gb_trq_in_r"
	      SrcPort		      1
	      DstBlock		      "Product2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Fcn"
	      SrcPort		      1
	      Points		      [10, 0; 0, 85; -75, 0; 0, 35]
	      DstBlock		      "~gb_trq_in_r"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "load=T/\n(maxT\nat spd)"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "tires are at\ntraction limit"
	      SrcPort		      1
	      Points		      [230, 0; 0, 65]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		DstBlock		"upshift\n command"
		DstPort			2
	      }
	      Branch {
		Points			[0, 100]
		DstBlock		"downshift \ncommand"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Saturation1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, 0]
		Branch {
		  Points		  [0, -75]
		  DstBlock		  "prev gear\nnumber"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "gear ratio1"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[0, 75]
		Branch {
		  DstBlock		  "shifting1"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 85]
		  Branch {
		    Points		    [0, 55]
		    DstBlock		    "Rate Limiter"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Goto4"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Line {
	      SrcBlock		      "prev gear\nnumber"
	      SrcPort		      1
	      Points		      [-160, 0]
	      Branch {
		Points			[-130, 0; 0, 30]
		Branch {
		  DstBlock		  "allow downshift?"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 75]
		  Branch {
		    DstBlock		    "upshift\n command"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 100]
		    DstBlock		    "downshift \ncommand"
		    DstPort		    1
		  }
		}
	      }
	      Branch {
		Points			[0, 65]
		DstBlock		"current\ngear\nnumber"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "shifting1"
	      SrcPort		      1
	      DstBlock		      "Goto6"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gear ratio1"
	      SrcPort		      1
	      DstBlock		      "Goto5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant14"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant15"
	      SrcPort		      1
	      DstBlock		      "Switch4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From4"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Switch4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Switch4"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From2"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From3"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch4"
	      SrcPort		      1
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <logic>2"
	      SrcPort		      1
	      DstBlock		      "Speed Dependent Shifting"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      1
	      DstBlock		      "Goto1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      2
	      DstBlock		      "Goto2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      Points		      [0, -15]
	      DstBlock		      "gear ratio, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      Points		      [0, 10]
	      DstBlock		      "shifting, out"
	      DstPort		      1
	    }
	    Line {
	      Labels		      [1, 0]
	      SrcBlock		      "Switch3"
	      SrcPort		      1
	      DstBlock		      "gear number, out"
	      DstPort		      1
	    }
	    Annotation {
	      SID		      "2503"
	      Name		      "default gear number\ncalculation"
	      Position		      [884, 304]
	    }
	    Annotation {
	      SID		      "2504"
	      Name		      "default shifting\ncalculation"
	      Position		      [903, 211]
	    }
	    Annotation {
	      SID		      "2505"
	      Name		      "default gear ratio\ncalculation"
	      Position		      [887, 74]
	    }
	    Annotation {
	      SID		      "2506"
	      Name		      "local GOTO blocks:"
	      Position		      [877, 42]
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "key_on"
	  SID			  "2507"
	  Ports			  [0, 1]
	  Position		  [660, 425, 700, 455]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  MaskType		  "Repeating table"
	  MaskDescription	  "Repeating table.\nEnter values of time and output for first cycle."
	  MaskHelp		  "Repeats cycle given in table. Time values should be monotonically increasing."
	  MaskPromptString	  "Time values:|Output values:"
	  MaskStyleString	  "edit,edit"
	  MaskVariables		  "t=@1;y=@2;"
	  MaskTunableValueString  "on,on"
	  MaskCallbackString	  "|"
	  MaskEnableString	  "on,on"
	  MaskVisibilityString	  "on,on"
	  MaskToolTipString	  "on,on"
	  MaskInitialization	  "period = max(t);"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskPortRotate	  "default"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "vc_key_on(:,1)|vc_key_on(:,2)"
	  System {
	    Name		    "key_on"
	    Location		    [5, 42, 298, 124]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Clock
	      Name		      "Clock"
	      SID		      "2508"
	      Position		      [15, 25, 35, 45]
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn1"
	      SID		      "2509"
	      Position		      [80, 25, 120, 45]
	      Expr		      "rem(u[1],period)"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "Look-Up Table"
	      SID		      "2510"
	      Position		      [180, 23, 220, 47]
	      InputValues	      "t"
	      Table		      "y"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "out_1"
	      SID		      "2511"
	      Position		      [255, 25, 275, 45]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Look-Up Table"
	      SrcPort		      1
	      DstBlock		      "out_1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Clock"
	      SrcPort		      1
	      DstBlock		      "Fcn1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Fcn1"
	      SrcPort		      1
	      DstBlock		      "Look-Up Table"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "motor controller\nlogic"
	  SID			  "2512"
	  Ports			  [4, 1]
	  Position		  [660, 37, 690, 138]
	  NamePlacement		  "alternate"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "motor controller\nlogic"
	    Location		    [217, 176, 880, 618]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "bus voltage"
	      SID		      "2513"
	      Position		      [40, 30, 60, 50]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd input\npower (W)"
	      SID		      "2514"
	      Position		      [40, 160, 60, 180]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd output\nspd (rad/s)"
	      SID		      "2515"
	      Position		      [40, 280, 60, 300]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "2516"
	      Position		      [40, 385, 60, 405]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs"
	      SID		      "2517"
	      Position		      [205, 123, 235, 147]
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs1"
	      SID		      "2518"
	      Position		      [105, 278, 135, 302]
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "2519"
	      Ports		      []
	      Position		      [590, 385, 646, 425]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[263, 139, 778, 219]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "2520"
		  Name			  "This block models a motor/controller's logic, modulating the power input requirement as follows:\n- enfo"
		  "rcing the maximum current limit of the motor/controller\n- shutting the motor off if the average speed over the ti"
		  "me step ==0\n- shutting the motor off if the transmission is shifting."
		  Position		  [257, 40]
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "2521"
	      Position		      [95, 79, 165, 101]
	      FontName		      "Arial"
	      Value		      "mc_max_crrnt"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "2522"
	      Position		      [140, 348, 175, 372]
	      FontName		      "Arial"
	      Value		      "0.001"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "2523"
	      Position		      [500, 232, 520, 258]
	      BlockMirror	      on
	      FontName		      "Arial"
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <sdo>"
	      SID		      "2524"
	      Position		      [555, 24, 645, 46]
	      GotoTag		      "mc_crrnt_limited"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "2525"
	      Ports		      [1, 1]
	      Position		      [434, 240, 466, 275]
	      BlockRotation	      270
	      NamePlacement	      "alternate"
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "2526"
	      Position		      [110, 25, 140, 55]
	      X0		      "ess_module_num*mean(ess_voc(1,:))"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      SID		      "2527"
	      Ports		      [2, 1]
	      Position		      [270, 37, 300, 68]
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      SID		      "2528"
	      Ports		      [2, 1]
	      Position		      [210, 36, 230, 54]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "2529"
	      Ports		      [2, 1]
	      Position		      [230, 282, 260, 313]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "2530"
	      Ports		      [2, 1]
	      Position		      [490, 17, 520, 48]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Sign"
	      SID		      "2531"
	      Ports		      [1, 1]
	      Position		      [270, 157, 300, 183]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Sign"
	      MaskDescription	      "y = sign(x)"
	      MaskHelp		      "Sign Function:\\n\\t\\t\\ty = 1 if x > 0\\n\\t\\t\\ty = 0 if x = 0\\n\\t\\t\\ty = -1 if x < 0"
	      MaskDisplay	      "plot(-50,-50,50,50,[-50,50],[0,0],[0,0],[-50,50],[-40,0],[-30,-30],[0,40],[30,30])"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Sign"
		Location		[159, 417, 467, 586]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "2532"
		  Position		  [35, 30, 55, 50]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "2533"
		  Position		  [65, 105, 85, 125]
		  Value			  "0"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "2534"
		  Ports			  [2, 1]
		  Position		  [140, 32, 170, 63]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "2535"
		  Ports			  [2, 1]
		  Position		  [140, 92, 170, 123]
		  Operator		  "<"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "2536"
		  Ports			  [2, 1]
		  Position		  [215, 64, 235, 91]
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "2537"
		  Position		  [265, 70, 285, 90]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  Points		  [10, 0; 0, 20]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  Points		  [10, 0; 0, -25]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    Points		    [0, -60]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    Points		    [0, 60]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "2538"
	      Position		      [495, 180, 525, 210]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "current-limited\npower"
	      SID		      "2539"
	      Ports		      [2, 1]
	      Position		      [365, 51, 385, 69]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "true if motor\nshould be\nshut down"
	      SID		      "2540"
	      Ports		      [2, 1]
	      Position		      [385, 292, 415, 323]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd input\npower (W)1"
	      SID		      "2541"
	      Position		      [590, 185, 610, 205]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Abs1"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "true if motor\nshould be\nshut down"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      Points		      [290, 0; 0, -80]
	      DstBlock		      "true if motor\nshould be\nshut down"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [0, -40]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [20, 0; 0, -40]
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Abs"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sign"
	      SrcPort		      1
	      Points		      [20, 0; 0, -105]
	      DstBlock		      "current-limited\npower"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "req'd input\npower (W)1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "current-limited\npower"
	      SrcPort		      1
	      Points		      [60, 0; 0, 125]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, -20]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"MinMax"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"current-limited\npower"
		DstPort			1
	      }
	      Branch {
		Points			[0, -15]
		DstBlock		"Relational\nOperator2"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Goto <sdo>"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "true if motor\nshould be\nshut down"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [10, 0; 0, -55]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "req'd output\nspd (rad/s)"
	      SrcPort		      1
	      DstBlock		      "Abs1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "bus voltage"
	      SrcPort		      1
	      DstBlock		      "Memory"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "req'd input\npower (W)"
	      SrcPort		      1
	      Points		      [105, 0]
	      Branch {
		Points			[0, -35]
		DstBlock		"Abs"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Sign"
		DstPort			1
	      }
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "series 'clutch'\ncontrol"
	  SID			  "2542"
	  Ports			  [1, 1]
	  Position		  [665, 346, 700, 384]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "series 'clutch'\ncontrol"
	    Location		    [291, 163, 780, 437]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "engine on"
	      SID		      "2543"
	      Position		      [35, 33, 65, 47]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "2544"
	      Ports		      []
	      Position		      [420, 220, 476, 260]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[315, 744, 770, 896]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "2545"
		  Name			  "There is no clutch, per se, in the series hybrid vehicle, that is connected to\nthe engine.  This clutch"
		  " control is provided to tell the fuel converter (a.k.a. engine)\nwhen it can spin up freely.  The fuel converter s"
		  "pins up or down when the 'clutch' is\ndisengaged, and provides torque when the 'clutch' is engaged (signal==3).\n\n"
		  "Here, the fuel converter spins up when the engine has been off within the\npast 0.5 s (or one time step, whichever"
		  " is greater).  At all other times, the fuel\nconverter provides torque to the generator."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Clock
	      Name		      "Clock"
	      SID		      "2546"
	      Position		      [45, 190, 65, 210]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "2547"
	      Position		      [385, 105, 405, 125]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant7"
	      SID		      "2548"
	      Position		      [385, 15, 405, 35]
	      BlockMirror	      on
	      Value		      "3"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory1"
	      SID		      "2549"
	      Position		      [120, 50, 150, 80]
	      X0		      "cyc_mph(1,2)>0"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory2"
	      SID		      "2550"
	      Position		      [115, 220, 145, 250]
	      X0		      "-1"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      SID		      "2551"
	      Ports		      [2, 1]
	      Position		      [180, 192, 210, 223]
	      Inputs		      "+-"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "2552"
	      Position		      [380, 55, 410, 85]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "2553"
	      Position		      [275, 55, 305, 85]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      TransportDelay
	      Name		      "Transport\nDelay"
	      SID		      "2554"
	      Ports		      [1, 1]
	      Position		      [115, 130, 145, 160]
	      DelayTime		      "0.5"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping1"
	      SID		      "2555"
	      Ports		      [2, 1]
	      Position		      [180, 41, 210, 74]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping2"
	      SID		      "2556"
	      Ports		      [2, 1]
	      Position		      [180, 121, 210, 154]
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "clutch\nstate"
	      SID		      "2557"
	      Position		      [445, 63, 475, 77]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "engine on"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		Points			[0, 25]
		Branch {
		  Points		  [0, 45]
		  Branch {
		    Points		    [70, 0]
		    DstBlock		    "clutch\nslipping2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 35]
		    DstBlock		    "Transport\nDelay"
		    DstPort		    1
		  }
		}
		Branch {
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[70, 0]
		DstBlock		"clutch\nslipping1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "Switch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory2"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Clock"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		Points			[0, 35]
		DstBlock		"Memory2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Sum"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping2"
	      SrcPort		      1
	      Points		      [25, 0; 0, -60]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Transport\nDelay"
	      SrcPort		      1
	      DstBlock		      "clutch\nslipping2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping1"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "clutch\nstate"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant7"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory1"
	      SrcPort		      1
	      DstBlock		      "clutch\nslipping1"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "sim stop\nsubsystem"
	  SID			  "2558"
	  Ports			  []
	  Position		  [30, 15, 60, 65]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/sim stop\nsubsystem"
	  SourceType		  "SubSystem"
	}
	Line {
	  SrcBlock		  "From <mc>1"
	  SrcPort		  1
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <mc>"
	  SrcPort		  1
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <ess>"
	  SrcPort		  1
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "motor controller\nlogic"
	  SrcPort		  1
	  DstBlock		  "Goto <mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <mc>2"
	  SrcPort		  1
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <gb>3"
	  SrcPort		  1
	  DstBlock		  "gearbox control\nfor series \nHV and EV"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From<gb>"
	  SrcPort		  1
	  Points		  [0, 5]
	  DstBlock		  "gearbox control\nfor series \nHV and EV"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>1"
	  SrcPort		  1
	  DstBlock		  "gearbox control\nfor series \nHV and EV"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <gb>2"
	  SrcPort		  1
	  Points		  [10, 0]
	  DstBlock		  "gearbox control\nfor series \nHV and EV"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <cs>"
	  SrcPort		  1
	  DstBlock		  "series 'clutch'\ncontrol"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "series 'clutch'\ncontrol"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "key_on"
	  SrcPort		  1
	  DstBlock		  "Goto <fc>\n<mc><pb>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  3
	  Points		  [0, 10]
	  DstBlock		  "Goto <wh>2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <veh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>5"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  1
	  Points		  [0, 5]
	  Branch {
	    DstBlock		    "braking strategy"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [215, 0]
	    Branch {
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Branch {
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  2
	  Points		  [130, 0]
	  Branch {
	    DstBlock		    "Sum"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -55]
	    DstBlock		    "Goto <wh>8"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Relational\nOperator"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <wh>6"
	  SrcPort		  1
	  DstBlock		  "Relational\nOperator"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <wh>1"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>7"
	  SrcPort		  1
	  DstBlock		  "braking strategy"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>5"
	  SrcPort		  1
	  Points		  [0, -5]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "From<wh>4"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <wh>3"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <wh>2"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>4"
	  SrcPort		  1
	  Points		  [85, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox control\nfor series \nHV and EV"
	  SrcPort		  1
	  DstBlock		  "Goto"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox control\nfor series \nHV and EV"
	  SrcPort		  2
	  DstBlock		  "Goto <gb>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox control\nfor series \nHV and EV"
	  SrcPort		  3
	  DstBlock		  "Goto <gb>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  4
	  Points		  [110, 0]
	  DstBlock		  "Goto <wh>6"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  5
	  Points		  [105, 0]
	  DstBlock		  "Goto <wh>7"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Ground"
	  SrcPort		  1
	  Points		  [45, 0; 0, -45]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  6
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "<vc> insight"
      SID		      "306"
      Ports		      [0, 1]
      Position		      [100, 334, 165, 386]
      BackgroundColor	      "yellow"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_vc.jpg'))\n"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"<vc> insight"
	Location		[10, 112, 950, 1190]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"94"
	Block {
	  BlockType		  From
	  Name			  "From <ess>"
	  SID			  "2559"
	  Position		  [360, 45, 455, 65]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "bus_voltage"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>"
	  SID			  "2560"
	  Position		  [355, 407, 450, 423]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_spd_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>1"
	  SID			  "2561"
	  Position		  [75, 151, 165, 169]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>2"
	  SID			  "2562"
	  Position		  [75, 176, 170, 194]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "eta_gb"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>3"
	  SID			  "2563"
	  Position		  [70, 210, 165, 230]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "slip_limited"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>4"
	  SID			  "2564"
	  Position		  [350, 256, 445, 274]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>5"
	  SID			  "2565"
	  Position		  [355, 387, 450, 403]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>"
	  SID			  "2566"
	  Position		  [360, 80, 455, 100]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "P_mc_in_1lim"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>1"
	  SID			  "2567"
	  Position		  [365, 109, 455, 131]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_mc_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>2"
	  SID			  "2568"
	  Position		  [360, 144, 450, 166]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>3"
	  SID			  "2569"
	  Position		  [350, 219, 440, 241]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <veh>"
	  SID			  "2570"
	  Position		  [30, 402, 105, 418]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_prev"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>"
	  SID			  "2571"
	  Position		  [35, 460, 95, 480]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>1"
	  SID			  "2572"
	  Position		  [20, 366, 105, 384]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>2"
	  SID			  "2573"
	  Position		  [15, 537, 125, 553]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_drivetrain_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>3"
	  SID			  "2574"
	  Position		  [20, 571, 120, 589]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_wheel_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>5"
	  SID			  "2575"
	  Position		  [15, 621, 135, 639]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_rear_brake"
	}
	Block {
	  BlockType		  From
	  Name			  "From<gb>"
	  SID			  "2576"
	  Position		  [75, 116, 165, 134]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From<wh>4"
	  SID			  "2577"
	  Position		  [15, 596, 130, 614]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_front_brake"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto"
	  SID			  "2578"
	  Position		  [260, 112, 335, 138]
	  NamePlacement		  "alternate"
	  GotoTag		  "gear_number"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>"
	  SID			  "2579"
	  Position		  [575, 370, 640, 390]
	  NamePlacement		  "alternate"
	  GotoTag		  "engine_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>1"
	  SID			  "2580"
	  Position		  [570, 405, 650, 425]
	  GotoTag		  "spd_command"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc><mc>"
	  SID			  "2581"
	  Position		  [575, 441, 625, 459]
	  GotoTag		  "key_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>"
	  SID			  "2582"
	  Position		  [250, 150, 340, 170]
	  GotoTag		  "gear_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>1"
	  SID			  "2583"
	  Position		  [255, 201, 335, 219]
	  NamePlacement		  "alternate"
	  GotoTag		  "shifting"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <mc>"
	  SID			  "2584"
	  Position		  [545, 95, 635, 115]
	  GotoTag		  "P_mc_in_r"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>"
	  SID			  "2585"
	  Position		  [580, 236, 650, 254]
	  NamePlacement		  "alternate"
	  GotoTag		  "clutch_state"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>1"
	  SID			  "2586"
	  Position		  [250, 481, 335, 499]
	  GotoTag		  "slip_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>"
	  SID			  "2587"
	  Position		  [250, 360, 335, 380]
	  NamePlacement		  "alternate"
	  GotoTag		  "F_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>1"
	  SID			  "2588"
	  Position		  [235, 384, 325, 406]
	  GotoTag		  "v_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>2"
	  SID			  "2589"
	  Position		  [190, 406, 280, 424]
	  GotoTag		  "wt_front_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>3"
	  SID			  "2590"
	  Position		  [215, 541, 300, 559]
	  GotoTag		  "F_front_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>4"
	  SID			  "2591"
	  Position		  [215, 604, 300, 626]
	  GotoTag		  "F_rear_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>5"
	  SID			  "2592"
	  Position		  [230, 290, 340, 310]
	  GotoTag		  "F_front_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>6"
	  SID			  "2593"
	  Position		  [260, 431, 350, 449]
	  GotoTag		  "wt_rear_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>7"
	  SID			  "2594"
	  Position		  [185, 446, 275, 464]
	  GotoTag		  "front_traction_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>8"
	  SID			  "2595"
	  Position		  [330, 320, 440, 340]
	  GotoTag		  "F_rear_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Ground
	  Name			  "Ground"
	  SID			  "2596"
	  Position		  [50, 670, 70, 690]
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator"
	  SID			  "2597"
	  Ports			  [2, 1]
	  Position		  [195, 472, 225, 503]
	  Operator		  "~="
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  SID			  "2598"
	  Ports			  [2, 1]
	  Position		  [200, 352, 230, 383]
	  Inputs		  "-+"
	}
	Block {
	  BlockType		  Reference
	  Name			  "braking strategy"
	  SID			  "2599"
	  Ports			  [2, 2]
	  Position		  [185, 287, 215, 338]
	  NamePlacement		  "alternate"
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/braking strategy"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "config traction control"
	  SID			  "2600"
	  Ports			  [3, 5]
	  Position		  [130, 359, 165, 461]
	  BackgroundColor	  "darkGreen"
	  AttributesFormatString  "%<BlockChoice>"
	  ShowPortLabels	  "none"
	  BlockChoice		  "traction control 2 axle"
	  TemplateBlock		  "lib_controls/SubSystem/config traction control"
	  MemberBlocks		  "traction control 2 axle,traction control J2452 2 axle"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "config traction control"
	    Location		    [148, 182, 646, 482]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    SIDHighWatermark	    "6898"
	    Block {
	      BlockType		      Inport
	      Name		      "time-average\nvehicle speed\n req'd (m/s)"
	      SID		      "2600::706"
	      Position		      [20, 40, 40, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SID		      "2600::707"
	      Position		      [20, 80, 40, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "total tractive\nforce req'd\n(N)"
	      SID		      "2600::708"
	      Position		      [20, 120, 40, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "traction control\n2 axle"
	      SID		      "2600::709"
	      Ports		      [3, 5]
	      Position		      [100, 40, 140, 80]
	      BackgroundColor	      "darkGreen"
	      LibraryVersion	      "1.479"
	      SourceBlock	      "lib_controls/SubSystem/traction control 2 axle"
	      SourceType	      "SubSystem"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd force\n(N)"
	      SID		      "2600::710"
	      Position		      [200, 40, 220, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd speed\n(m/s)"
	      SID		      "2600::711"
	      Position		      [200, 80, 220, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nfront axle\n(N)"
	      SID		      "2600::712"
	      Position		      [200, 120, 220, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nrear axle\n(N)"
	      SID		      "2600::713"
	      Position		      [200, 160, 220, 180]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "front/total \ntraction ratio"
	      SID		      "2600::714"
	      Position		      [200, 200, 220, 220]
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "time-average\nvehicle speed\n req'd (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "total tractive\nforce req'd\n(N)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      1
	      DstBlock		      "req'd force\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      2
	      DstBlock		      "req'd speed\n(m/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      3
	      DstBlock		      "weight on\nfront axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      4
	      DstBlock		      "weight on\nrear axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      5
	      DstBlock		      "front/total \ntraction ratio"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "engine on\n(insight)"
	  SID			  "2601"
	  Ports			  [5, 3]
	  Position		  [495, 359, 530, 471]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "engine on\n(insight)"
	    Location		    [551, 278, 1448, 1055]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "trq_clutch_out"
	      SID		      "2602"
	      Position		      [40, 18, 70, 32]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "spd_clutch_out"
	      SID		      "2603"
	      Position		      [175, 13, 205, 27]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "fc_spd_out_r"
	      SID		      "2604"
	      Position		      [380, 598, 410, 612]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "v_ave_req"
	      SID		      "2605"
	      Position		      [170, 568, 200, 582]
	      NamePlacement	      "alternate"
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "clutch\nstate"
	      SID		      "2606"
	      Position		      [30, 523, 60, 537]
	      NamePlacement	      "alternate"
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      " "
	      SID		      "2607"
	      Position		      [185, 369, 230, 391]
	      Value		      "fc_tstat"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "  "
	      SID		      "2608"
	      Position		      [260, 210, 285, 230]
	      Value		      "-0.1"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "    "
	      SID		      "2609"
	      Position		      [215, 260, 235, 280]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "  2"
	      SID		      "2610"
	      Position		      [335, 60, 355, 80]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)"
	      SID		      "2611"
	      Position		      [215, 306, 275, 324]
	      ShowName		      off
	      Value		      "cs_lo_soc"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)1"
	      SID		      "2612"
	      Position		      [530, 101, 590, 119]
	      ShowName		      off
	      Value		      "fc_on"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES1"
	      SID		      "2613"
	      Ports		      []
	      Position		      [695, 95, 751, 135]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES1"
		Location		[454, 317, 835, 559]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "2614"
		  Name			  "The engine of the Insight will only shutdown under the following conditions:\n1) engine is warm\nand\n2)"
		  " SOC is greater than the low SOC setpoint\nand\n3) vehicle is decelerating or stopped\nand\n4) vehicle speed is le"
		  "ss than cs_electric_decel_spd and engine is \nallowed to shut down during decel (ie.clutch disengaged)\nand\n5) th"
		  "e vehicle is not shifting gears\nand \n6) the key is in on position\nand\n7) engine is not disabled (this is not a"
		  " standard INSIGHT feature)\n\nNOTE: Test for decel set to -0.1 to prevent engine disable at constant speed"
		  Position		  [192, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "2615"
	      Position		      [365, 554, 445, 576]
	      ShowName		      off
	      Value		      "vc_launch_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "2616"
	      Position		      [35, 545, 55, 565]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "2617"
	      Position		      [175, 590, 195, 610]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "2618"
	      Position		      [130, 655, 150, 675]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant7"
	      SID		      "2619"
	      Position		      [655, 595, 675, 615]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Derivative
	      Name		      "Derivative"
	      SID		      "2620"
	      Position		      [195, 190, 225, 220]
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <ess>"
	      SID		      "2621"
	      Position		      [140, 289, 185, 311]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <fc>"
	      SID		      "2622"
	      Position		      [95, 350, 180, 370]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "fc_clt_tmp"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>2"
	      SID		      "2623"
	      Position		      [150, 416, 220, 434]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "shifting"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>4"
	      SID		      "2624"
	      Position		      [25, 125, 110, 145]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "v_req_limited"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      SID		      "2625"
	      Position		      [260, 365, 305, 395]
	      Gain		      "vc_fc_warm_tmp_frac"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator10"
	      SID		      "2626"
	      Ports		      [3, 1]
	      Position		      [305, 556, 335, 614]
	      ShowName		      off
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator11"
	      SID		      "2627"
	      Ports		      [1, 1]
	      Position		      [605, 313, 635, 347]
	      ShowName		      off
	      Operator		      "NOT"
	      Inputs		      "7"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator12"
	      SID		      "2628"
	      Ports		      [1, 1]
	      Position		      [465, 393, 495, 427]
	      ShowName		      off
	      Operator		      "NOT"
	      Inputs		      "7"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator13"
	      SID		      "2629"
	      Ports		      [3, 1]
	      Position		      [670, 269, 695, 341]
	      ShowName		      off
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator14"
	      SID		      "2630"
	      Ports		      [2, 1]
	      Position		      [380, 205, 410, 240]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator15"
	      SID		      "2631"
	      Ports		      [2, 1]
	      Position		      [385, 120, 415, 155]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator16"
	      SID		      "2632"
	      Ports		      [2, 1]
	      Position		      [470, 115, 500, 150]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator17"
	      SID		      "2633"
	      Ports		      [1, 1]
	      Position		      [485, 458, 515, 492]
	      ShowName		      off
	      Operator		      "NOT"
	      Inputs		      "7"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator7"
	      SID		      "2634"
	      Ports		      [2, 1]
	      Position		      [250, 428, 280, 457]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator9"
	      SID		      "2635"
	      Ports		      [6, 1]
	      Position		      [550, 185, 575, 470]
	      ShowName		      off
	      Inputs		      "6"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "2636"
	      Position		      [315, 500, 345, 530]
	      BlockMirror	      on
	      X0		      "cyc_mph(1,2)>0"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "2637"
	      Ports		      [2, 1]
	      Position		      [325, 292, 355, 323]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      SID		      "2638"
	      Ports		      [2, 1]
	      Position		      [330, 352, 360, 383]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Roll Stop"
	      SID		      "2639"
	      Position		      [160, 149, 275, 171]
	      Value		      "cs_electric_decel_spd"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "2640"
	      Ports		      [1, 1]
	      Position		      [555, 570, 585, 600]
	      InputPortMap	      "u0"
	      UpperLimit	      "max(fc_map_spd)*fc_spd_scale"
	      LowerLimit	      "vc_idle_spd*vc_idle_bool"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "2641"
	      Position		      [480, 558, 510, 612]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "2642"
	      Position		      [725, 579, 750, 611]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Terminator
	      Name		      "Terminator"
	      SID		      "2643"
	      Position		      [110, 15, 130, 35]
	    }
	    Block {
	      BlockType		      Terminator
	      Name		      "Terminator1"
	      SID		      "2644"
	      Position		      [275, 15, 295, 35]
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "accel ?"
	      SID		      "2645"
	      Ports		      [2, 1]
	      Position		      [315, 197, 345, 228]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "allow engine to shut off \nat low vehicle speed "
	      SID		      "2646"
	      Position		      [160, 80, 270, 100]
	      Value		      "cs_decel_fc_off"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch\ndisengaged"
	      SID		      "2647"
	      Ports		      [2, 1]
	      Position		      [110, 522, 140, 553]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "idling allowed?\n1=yes, 0=shut down"
	      SID		      "2648"
	      Position		      [350, 465, 460, 485]
	      Value		      "vc_idle_bool"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "key_on"
	      SID		      "2649"
	      Ports		      [0, 1]
	      Position		      [530, 34, 585, 66]
	      NamePlacement	      "alternate"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Repeating table"
	      MaskDescription	      "Repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table. Time values should be monotonically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "vc_key_on(:,1)|vc_key_on(:,2)"
	      Port {
		PortNumber		1
		Name			"ignition key is on"
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
	      }
	      System {
		Name			"key_on"
		Location		[7, 74, 412, 245]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "2650"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "2651"
		  Position		  [110, 60, 150, 80]
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "2652"
		  Position		  [210, 58, 250, 82]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "2653"
		  Position		  [285, 60, 305, 80]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  DstBlock		  "Fcn1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "moving next\ntime"
	      SID		      "2654"
	      Ports		      [2, 1]
	      Position		      [190, 642, 220, 673]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "not\nmoving"
	      SID		      "2655"
	      Ports		      [2, 1]
	      Position		      [245, 567, 275, 598]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "repeated cycle:\n speed required at\nend of NEXT second"
	      SID		      "2656"
	      Ports		      [0, 1]
	      Position		      [50, 602, 85, 638]
	      FontName		      "Arial"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Repeating table"
	      MaskDescription	      "Repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table. Time values should be monotonically increasing."
	      MaskPromptString	      "Time values:|Output values:|Look ahead how far (s):"
	      MaskStyleString	      "edit,edit,edit"
	      MaskVariables	      "t=@1;y=@2;dt=@3;"
	      MaskTunableValueString  "on,on,on"
	      MaskCallbackString      "||"
	      MaskEnableString	      "on,on,on"
	      MaskVisibilityString    "on,on,on"
	      MaskToolTipString	      "on,on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "cyc_mph(:,1)|cyc_mph(:,2)|1"
	      System {
		Name			"repeated cycle:\n speed required at\nend of NEXT second"
		Location		[404, 231, 779, 393]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "2657"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "2658"
		  Position		  [110, 60, 150, 80]
		  Expr			  "rem(u[1],period)+dt"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "2659"
		  Position		  [210, 58, 250, 82]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "2660"
		  Position		  [285, 60, 305, 80]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  DstBlock		  "Fcn1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "spd less than \nsetpoint?"
	      SID		      "2661"
	      Ports		      [2, 1]
	      Position		      [315, 127, 345, 158]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "veh stopped"
	      SID		      "2662"
	      Ports		      [2, 1]
	      Position		      [395, 47, 425, 78]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "veh stopped "
	      SID		      "2663"
	      Ports		      [2, 1]
	      Position		      [265, 247, 295, 278]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "engine on"
	      SID		      "2664"
	      Position		      [740, 318, 770, 332]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "spd command\n (rad/s)"
	      SID		      "2665"
	      Position		      [790, 588, 820, 602]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "key on"
	      SID		      "2666"
	      Position		      [700, 43, 730, 57]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "From <fc>"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <ess>"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "(--)"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <vc>4"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"spd less than \nsetpoint?"
		DstPort			1
	      }
	      Branch {
		Points			[0, -80]
		DstBlock		"veh stopped"
		DstPort			1
	      }
	      Branch {
		Points			[0, 70]
		Branch {
		  DstBlock		  "Derivative"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 50]
		  DstBlock		  "veh stopped "
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      " "
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      Points		      [0, -5]
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Roll Stop"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "spd less than \nsetpoint?"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator9"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator11"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator11"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator13"
	      DstPort		      3
	    }
	    Line {
	      Name		      "ignition key is on"
	      Labels		      [0, 1]
	      SrcBlock		      "key_on"
	      SrcPort		      1
	      Points		      [55, 0]
	      Branch {
		DstBlock		"key on"
		DstPort			1
	      }
	      Branch {
		Points			[0, 230]
		DstBlock		"Logical\nOperator13"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "(--)1"
	      SrcPort		      1
	      Points		      [40, 0; 0, 195]
	      DstBlock		      "Logical\nOperator13"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      Points		      [175, 0]
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      Points		      [160, 0; 0, -20]
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator13"
	      SrcPort		      1
	      Points		      [0, 20; 5, 0]
	      Branch {
		DstBlock		"engine on"
		DstPort			1
	      }
	      Branch {
		Points			[0, 190]
		Branch {
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 80]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator15"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator16"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "allow engine to shut off \nat low vehicle speed "
	      SrcPort		      1
	      Points		      [95, 0]
	      DstBlock		      "Logical\nOperator15"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "veh stopped"
	      SrcPort		      1
	      Points		      [25, 0]
	      DstBlock		      "Logical\nOperator16"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "  2"
	      SrcPort		      1
	      DstBlock		      "veh stopped"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "spd less than \nsetpoint?"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator15"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator16"
	      SrcPort		      1
	      Points		      [0, 20; 30, 0]
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "trq_clutch_out"
	      SrcPort		      1
	      DstBlock		      "Terminator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "spd_clutch_out"
	      SrcPort		      1
	      Points		      [50, 0]
	      DstBlock		      "Terminator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "veh stopped "
	      SrcPort		      1
	      Points		      [65, 0]
	      DstBlock		      "Logical\nOperator14"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "    "
	      SrcPort		      1
	      DstBlock		      "veh stopped "
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "accel ?"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator14"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator14"
	      SrcPort		      1
	      Points		      [110, 0; 0, 35]
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Derivative"
	      SrcPort		      1
	      DstBlock		      "accel ?"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "  "
	      SrcPort		      1
	      DstBlock		      "accel ?"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator12"
	      SrcPort		      1
	      Points		      [35, 0]
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      5
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "spd command\n (rad/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant7"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "v_ave_req"
	      SrcPort		      1
	      DstBlock		      "not\nmoving"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "not\nmoving"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "not\nmoving"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator10"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nstate"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      Points		      [20, 0; 0, -10]
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\ndisengaged"
	      SrcPort		      1
	      Points		      [145, 0]
	      DstBlock		      "Logical\nOperator10"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      DstBlock		      "moving next\ntime"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "moving next\ntime"
	      SrcPort		      1
	      Points		      [65, 0]
	      DstBlock		      "Logical\nOperator10"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "repeated cycle:\n speed required at\nend of NEXT second"
	      SrcPort		      1
	      Points		      [75, 0; 0, 30]
	      DstBlock		      "moving next\ntime"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "fc_spd_out_r"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator10"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <vc>2"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Logical\nOperator7"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator7"
	      SrcPort		      1
	      Points		      [45, 0; 0, -35]
	      DstBlock		      "Logical\nOperator12"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [-75, 0]
	      DstBlock		      "Logical\nOperator7"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "idling allowed?\n1=yes, 0=shut down"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator17"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator17"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      6
	    }
	    Annotation {
	      SID		      "2667"
	      Name		      "engine on if \nengine cold"
	      Position		      [415, 349]
	    }
	    Annotation {
	      SID		      "2668"
	      Name		      "engine on if \nSOC < cs_lo_soc"
	      Position		      [420, 289]
	    }
	    Annotation {
	      SID		      "2669"
	      Name		      "engine remains on \nwhile shifting and \nengine was on"
	      Position		      [405, 439]
	    }
	    Annotation {
	      SID		      "2670"
	      Name		      "engine not disabled?"
	      Position		      [568, 133]
	    }
	    Annotation {
	      SID		      "2671"
	      Name		      "engine on if speed \ngreater than setpoint"
	      Position		      [422, 171]
	    }
	    Annotation {
	      SID		      "2672"
	      Name		      "engine on if\n accelerating or \ncoasting"
	      Position		      [462, 246]
	    }
	    Annotation {
	      SID		      "2673"
	      Name		      "off"
	      Position		      [591, 320]
	    }
	    Annotation {
	      SID		      "2674"
	      Name		      "on"
	      Position		      [650, 323]
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "front and rear\nbrake controller\n(achievable)"
	  SID			  "2675"
	  Ports			  [6, 2]
	  Position		  [155, 516, 190, 644]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/front and rear\nbrake controller\n(achievable)"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "motor controller\nlogic"
	  SID			  "2676"
	  Ports			  [4, 1]
	  Position		  [490, 45, 520, 165]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "motor controller\nlogic"
	    Location		    [91, 74, 773, 525]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "bus voltage"
	      SID		      "2677"
	      Position		      [40, 30, 60, 50]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd input\npower (W)"
	      SID		      "2678"
	      Position		      [40, 160, 60, 180]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd output\nspd (rad/s)"
	      SID		      "2679"
	      Position		      [40, 280, 60, 300]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "2680"
	      Position		      [40, 385, 60, 405]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs"
	      SID		      "2681"
	      Position		      [205, 123, 235, 147]
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs1"
	      SID		      "2682"
	      Position		      [105, 278, 135, 302]
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "2683"
	      Ports		      []
	      Position		      [590, 385, 646, 425]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[263, 139, 778, 219]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "2684"
		  Name			  "This block models a motor/controller's logic, modulating the power input requirement as follows:\n- enfo"
		  "rcing the maximum current limit of the motor/controller\n- shutting the motor off if the average speed over the ti"
		  "me step ==0\n- shutting the motor off if the transmission is shifting."
		  Position		  [257, 40]
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "2685"
	      Position		      [95, 79, 165, 101]
	      FontName		      "Arial"
	      Value		      "mc_max_crrnt"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "2686"
	      Position		      [140, 348, 175, 372]
	      FontName		      "Arial"
	      Value		      "0.001"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "2687"
	      Position		      [500, 232, 520, 258]
	      BlockMirror	      on
	      FontName		      "Arial"
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <sdo>"
	      SID		      "2688"
	      Position		      [555, 24, 645, 46]
	      GotoTag		      "mc_crrnt_limited"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "2689"
	      Ports		      [1, 1]
	      Position		      [434, 240, 466, 275]
	      BlockRotation	      270
	      NamePlacement	      "alternate"
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "2690"
	      Position		      [115, 25, 145, 55]
	      X0		      "ess_module_num*mean(ess_voc(1,:))"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      SID		      "2691"
	      Ports		      [2, 1]
	      Position		      [270, 37, 300, 68]
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      SID		      "2692"
	      Ports		      [2, 1]
	      Position		      [210, 36, 230, 54]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "2693"
	      Ports		      [2, 1]
	      Position		      [230, 282, 260, 313]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "2694"
	      Ports		      [2, 1]
	      Position		      [490, 17, 520, 48]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Sign"
	      SID		      "2695"
	      Ports		      [1, 1]
	      Position		      [270, 157, 300, 183]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Sign"
	      MaskDescription	      "y = sign(x)"
	      MaskHelp		      "Sign Function:\\n\\t\\t\\ty = 1 if x > 0\\n\\t\\t\\ty = 0 if x = 0\\n\\t\\t\\ty = -1 if x < 0"
	      MaskDisplay	      "plot(-50,-50,50,50,[-50,50],[0,0],[0,0],[-50,50],[-40,0],[-30,-30],[0,40],[30,30])"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Sign"
		Location		[159, 417, 467, 586]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "2696"
		  Position		  [35, 30, 55, 50]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "2697"
		  Position		  [65, 105, 85, 125]
		  Value			  "0"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "2698"
		  Ports			  [2, 1]
		  Position		  [140, 32, 170, 63]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "2699"
		  Ports			  [2, 1]
		  Position		  [140, 92, 170, 123]
		  Operator		  "<"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "2700"
		  Ports			  [2, 1]
		  Position		  [215, 64, 235, 91]
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "2701"
		  Position		  [265, 70, 285, 90]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  Points		  [10, 0; 0, 20]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  Points		  [10, 0; 0, -25]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    Points		    [0, -60]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    Points		    [0, 60]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "2702"
	      Position		      [495, 180, 525, 210]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "current-limited\npower"
	      SID		      "2703"
	      Ports		      [2, 1]
	      Position		      [365, 51, 385, 69]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "true if motor\nshould be\nshut down"
	      SID		      "2704"
	      Ports		      [2, 1]
	      Position		      [385, 292, 415, 323]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd input\npower (W)1"
	      SID		      "2705"
	      Position		      [590, 185, 610, 205]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      Points		      [290, 0; 0, -80]
	      DstBlock		      "true if motor\nshould be\nshut down"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [0, -40]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "true if motor\nshould be\nshut down"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "bus voltage"
	      SrcPort		      1
	      DstBlock		      "Memory"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [20, 0; 0, -40]
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "req'd input\npower (W)"
	      SrcPort		      1
	      Points		      [105, 0]
	      Branch {
		Points			[0, -35]
		DstBlock		"Abs"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Sign"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Abs"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sign"
	      SrcPort		      1
	      Points		      [20, 0; 0, -105]
	      DstBlock		      "current-limited\npower"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "req'd input\npower (W)1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "current-limited\npower"
	      SrcPort		      1
	      Points		      [60, 0; 0, 125]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"MinMax"
		DstPort			1
	      }
	      Branch {
		Points			[0, -20]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"current-limited\npower"
		DstPort			1
	      }
	      Branch {
		Points			[0, -15]
		DstBlock		"Relational\nOperator2"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Goto <sdo>"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "true if motor\nshould be\nshut down"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [10, 0; 0, -55]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "req'd output\nspd (rad/s)"
	      SrcPort		      1
	      DstBlock		      "Abs1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Abs1"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "parallel clutch\ncontrol"
	  SID			  "2706"
	  Ports			  [4, 1]
	  Position		  [495, 235, 530, 315]
	  ForegroundColor	  "gray"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "parallel clutch\ncontrol"
	    Location		    [89, 104, 1002, 726]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "2707"
	      Position		      [30, 18, 60, 32]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_in_r"
	      SID		      "2708"
	      Position		      [30, 58, 60, 72]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_in_r"
	      SID		      "2709"
	      Position		      [25, 168, 55, 182]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "engine on"
	      SID		      "2710"
	      Position		      [30, 388, 60, 402]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "2711"
	      Ports		      []
	      Position		      [835, 565, 891, 605]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[317, 742, 775, 942]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "2712"
		  Name			  "This clutch control block determines the clutch state given the req'd clutch output torque \nand speed ("
		  "labelled as gearbox input torque and speed), and the gear number history.\n                          conditions   "
		  "                                                                    clutch state\ngear is being shifted OR (trq <~"
		  " 0 AND (engine is                                     1 == disengaged\nclutched to avoid compression braking OR sp"
		  "d < idle))                                                              \n\n(trq >~ 0) AND (spd < launch speed) AN"
		  "D clutch                                       2 == slipping     \nwas not engaged during previous time step      "
		  "                                                           \n\nneither of above sets of conditions are met        "
		  "                                  3 == engaged\n\nBut the clutch is always disengaged when the engine is off or wa"
		  "s off within the past 0.5 s."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Clock
	      Name		      "Clock"
	      SID		      "2713"
	      Position		      [40, 535, 60, 555]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "2714"
	      Position		      [145, 83, 180, 107]
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "2715"
	      Position		      [145, 124, 225, 146]
	      Value		      "vc_clutch_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "2716"
	      Position		      [145, 189, 225, 211]
	      Value		      "vc_idle_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "2717"
	      Position		      [145, 255, 180, 275]
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "2718"
	      Position		      [145, 319, 225, 341]
	      Value		      "vc_launch_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "2719"
	      Position		      [570, 355, 605, 375]
	      BlockMirror	      on
	      Value		      "2.5"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "2720"
	      Position		      [790, 175, 810, 195]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      SID		      "2721"
	      Position		      [660, 110, 720, 140]
	      Expr		      "u[1]+2*u[2]*(1-u[1])*(1-u[3])+3*u[3]*(1-u[1])"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "2722"
	      Ports		      [2, 1]
	      Position		      [380, 67, 410, 98]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "2723"
	      Ports		      [2, 1]
	      Position		      [315, 127, 345, 158]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Manual Switch"
	      SID		      "2724"
	      Ports		      [2, 1]
	      Position		      [410, 387, 440, 423]
	      ForegroundColor	      "gray"
	      SourceBlock	      "simulink3/Nonlinear/Manual Switch"
	      SourceType	      "Manual Switch"
	      sw		      "1"
	      action		      "0"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "2725"
	      Position		      [570, 300, 600, 330]
	      BlockMirror	      on
	      X0		      "1+(2*(cyc_mph(1,2)>0))"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory1"
	      SID		      "2726"
	      Position		      [170, 415, 200, 445]
	      X0		      "cyc_mph(1,2)>0"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory2"
	      SID		      "2727"
	      Position		      [170, 565, 200, 595]
	      X0		      "-1"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "2728"
	      Ports		      [3, 1]
	      Position		      [590, 107, 625, 143]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "2729"
	      Ports		      [2, 1]
	      Position		      [300, 57, 330, 88]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "2730"
	      Ports		      [2, 1]
	      Position		      [260, 177, 290, 208]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "2731"
	      Ports		      [2, 1]
	      Position		      [260, 242, 290, 273]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      SID		      "2732"
	      Ports		      [2, 1]
	      Position		      [260, 307, 290, 338]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      SID		      "2733"
	      Ports		      [2, 1]
	      Position		      [235, 537, 265, 568]
	      Inputs		      "+-"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "2734"
	      Position		      [790, 120, 820, 150]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "2735"
	      Position		      [330, 400, 360, 430]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      TransportDelay
	      Name		      "Transport\nDelay"
	      SID		      "2736"
	      Ports		      [1, 1]
	      Position		      [170, 475, 200, 505]
	      DelayTime		      "0.2"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\ndisengaged"
	      SID		      "2737"
	      Ports		      [2, 1]
	      Position		      [450, 17, 480, 48]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nengaged"
	      SID		      "2738"
	      Ports		      [2, 1]
	      Position		      [520, 117, 550, 148]
	      Operator		      "NOR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping"
	      SID		      "2739"
	      Ports		      [3, 1]
	      Position		      [380, 254, 410, 286]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping1"
	      SID		      "2740"
	      Ports		      [2, 1]
	      Position		      [235, 386, 265, 419]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping2"
	      SID		      "2741"
	      Ports		      [2, 1]
	      Position		      [235, 466, 265, 499]
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch was NOT\nfully engaged\nduring last time step"
	      SID		      "2742"
	      Ports		      [2, 1]
	      Position		      [475, 305, 510, 340]
	      BlockMirror	      on
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "gearbox speed\nestimator"
	      SID		      "2743"
	      Ports		      [1, 1]
	      Position		      [80, 160, 110, 190]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"gearbox speed\nestimator"
		Location		[224, 217, 812, 726]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_in_r\nif no gear change"
		  SID			  "2744"
		  Position		  [45, 18, 75, 32]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "2745"
		  Ports			  []
		  Position		  [515, 345, 571, 385]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [497, 485, 832, 570]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "2746"
		    Name		    "The requested engine speed is replaced by an estimate of the\nengine's previous speed whenever the ve"
		    "hicle missed the trace\n by more than 1 mph on the last time step."
		    Position		    [167, 41]
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "2747"
		  Position		  [165, 240, 185, 260]
		  BlockMirror		  on
		  Value			  "eps"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "2748"
		  Position		  [315, 165, 335, 185]
		  BlockMirror		  on
		  Value			  "0"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "2749"
		  Position		  [230, 360, 250, 380]
		  BlockMirror		  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "2750"
		  Position		  [230, 460, 250, 480]
		  BlockMirror		  on
		  Value			  "0.11"
		}
		Block {
		  BlockType		  From
		  Name			  "From"
		  SID			  "2751"
		  Position		  [195, 40, 285, 70]
		  BlockMirror		  on
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "gb_spd_in_a"
		}
		Block {
		  BlockType		  From
		  Name			  "From <cyc>"
		  SID			  "2752"
		  Position		  [30, 304, 120, 336]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "cyc_mph_r"
		}
		Block {
		  BlockType		  From
		  Name			  "From <veh>"
		  SID			  "2753"
		  Position		  [30, 99, 85, 131]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "mpha"
		}
		Block {
		  BlockType		  From
		  Name			  "From <wh>/\ntire slip model (m/s)"
		  SID			  "2754"
		  Position		  [30, 184, 120, 216]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "veh_spd_a_rec"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  SID			  "2755"
		  Position		  [150, 97, 190, 133]
		  Gain			  "0.447"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical"
		  SID			  "2756"
		  Ports			  [2, 1]
		  Position		  [375, 317, 405, 348]
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "2757"
		  Position		  [370, 115, 400, 145]
		  X0			  "cyc_mph(1,2)*0.447/wh_radius*fd_ratio*gb_ratio(gb_num_init)"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "2758"
		  Position		  [310, 310, 340, 340]
		  X0			  "1"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "2759"
		  Ports			  [3, 1]
		  Position		  [215, 99, 245, 131]
		  Inputs		  "**/"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational"
		  SID			  "2760"
		  Ports			  [2, 1]
		  Position		  [225, 307, 255, 338]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational1"
		  SID			  "2761"
		  Ports			  [2, 1]
		  Position		  [225, 412, 255, 443]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "2762"
		  Ports			  [2, 1]
		  Position		  [160, 192, 190, 223]
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "2763"
		  Ports			  [2, 1]
		  Position		  [160, 297, 190, 328]
		  Inputs		  "-+"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "2764"
		  Position		  [310, 110, 340, 140]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "2765"
		  Position		  [445, 120, 475, 150]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "dt"
		  SID			  "2766"
		  Ports			  [0, 1]
		  Position		  [165, 408, 185, 432]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "dt"
		    Location		    [240, 561, 480, 665]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "2767"
		    Position		    [25, 25, 45, 45]
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "2768"
		    Position		    [75, 53, 105, 77]
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum4"
		    SID			    "2769"
		    Ports		    [2, 1]
		    Position		    [130, 27, 160, 58]
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "2770"
		    Position		    [185, 38, 215, 52]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Sum4"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Sum4"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Sum4"
		    DstPort		    1
		    }
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  SID			  "2771"
		  Position		  [545, 128, 575, 142]
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Product"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  Labels		  [1, 0]
		  SrcBlock		  "From <wh>/\ntire slip model (m/s)"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -25; 155, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [0, -5]
		  DstBlock		  "Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <cyc>"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <veh>"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    DstBlock		    "Gain"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 190]
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Relational"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gb_spd_in_r\nif no gear change"
		  SrcPort		  1
		  Points		  [350, 0]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "From"
		  SrcPort		  1
		  Points		  [0, 50]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational1"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Logical"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical"
		  SrcPort		  1
		  Points		  [10, 0; 0, -200]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "dt"
		  SrcPort		  1
		  DstBlock		  "Relational1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "clutch\nstate"
	      SID		      "2772"
	      Position		      [855, 128, 885, 142]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, 180]
		DstBlock		"Memory"
		DstPort			1
	      }
	      Branch {
		DstBlock		"clutch\nstate"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Manual Switch"
	      SrcPort		      1
	      Points		      [315, 0; 0, -270]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "Manual Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gearbox speed\nestimator"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, 140]
		DstBlock		"Relational\nOperator3"
		DstPort			1
	      }
	      Branch {
		Points			[105, 0; 0, 10]
		DstBlock		"Relational\nOperator1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "gb_spd_in_r"
	      SrcPort		      1
	      DstBlock		      "gearbox speed\nestimator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "Switch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory2"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Clock"
	      SrcPort		      1
	      Points		      [80, 0]
	      Branch {
		Points			[0, 35]
		DstBlock		"Memory2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Sum"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping2"
	      SrcPort		      1
	      Points		      [25, 0; 0, -60]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Transport\nDelay"
	      SrcPort		      1
	      DstBlock		      "clutch\nslipping2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping1"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "clutch\nslipping1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "engine on"
	      SrcPort		      1
	      Points		      [80, 0]
	      Branch {
		Points			[0, -20; 250, 0]
		DstBlock		"Manual Switch"
		DstPort			1
	      }
	      Branch {
		Points			[0, 35]
		Branch {
		  Points		  [0, 30]
		  Branch {
		    Points		    [75, 0]
		    DstBlock		    "clutch\nslipping2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 30]
		    DstBlock		    "Transport\nDelay"
		    DstPort		    1
		  }
		}
		Branch {
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
	      }
	      Branch {
		DstBlock		"clutch\nslipping1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      DstBlock		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "clutch\nengaged"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "clutch\ndisengaged"
	      SrcPort		      1
	      Points		      [10, 0; 0, 40]
	      Branch {
		Points			[0, 50]
		DstBlock		"clutch\nengaged"
		DstPort			1
	      }
	      Branch {
		Points			[80, 0]
		DstBlock		"Mux"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "clutch\nslipping"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping"
	      SrcPort		      1
	      Points		      [80, 0; 0, -95]
	      Branch {
		Points			[0, -35]
		DstBlock		"clutch\nengaged"
		DstPort			2
	      }
	      Branch {
		Points			[80, 0]
		DstBlock		"Mux"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      Points		      [30, 0; 0, -55]
	      DstBlock		      "clutch\nslipping"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      Points		      [-30, 0; 0, -35]
	      DstBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      SrcPort		      1
	      Points		      [-120, 0; 0, -45]
	      DstBlock		      "clutch\nslipping"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [90, 0; 0, -15]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gb_trq_in_r"
	      SrcPort		      1
	      Points		      [70, 0]
	      Branch {
		Points			[0, 185]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      Points		      [15, 0; 0, -45]
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      Points		      [-15, 0; 0, -40]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "pre-TX parallel\ngearbox control"
	  SID			  "2773"
	  Ports			  [4, 3]
	  Position		  [190, 122, 225, 223]
	  FontName		  "Arial"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "pre-TX parallel\ngearbox control"
	    Location		    [16, 74, 1193, 776]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_out_r"
	      SID		      "2774"
	      Position		      [45, 75, 65, 95]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_out_r"
	      SID		      "2775"
	      Position		      [45, 320, 65, 340]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "prev.\nPout/Pin"
	      SID		      "2776"
	      Position		      [45, 175, 65, 195]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "tires are at\ntraction limit"
	      SID		      "2777"
	      Position		      [45, 20, 65, 40]
	      FontName		      "Arial"
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "2778"
	      Ports		      []
	      Position		      [890, 605, 946, 645]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[229, 259, 687, 388]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "2779"
		  Name			  "This gearbox control block computes the current gear number given the gearbox's\nreq'd output torque and"
		  " speed and an estimate its efficiency.  Upshifts occur, given a\ncertain engine speed,  when the estimated engine "
		  "load falls below the upshift curve\nin engine speed/load space, and downshifts likewise occur when estimated engin"
		  "e\nload rises above the downshift curve.  Separate upshift and downshift curves are\ndefined for each gear.  An up"
		  "shift may not be immediately followed by a downshift.\nIf the tires are about to slip, don't upshift unless the en"
		  "gine would be at max. speed.\nEnforce this rule by setting the load to 1 when the tires are about to slip."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "2780"
	      Position		      [330, 40, 350, 60]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "2781"
	      Position		      [525, 200, 545, 220]
	      BlockMirror	      on
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant14"
	      SID		      "2782"
	      Position		      [445, 608, 540, 622]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant15"
	      SID		      "2783"
	      Position		      [375, 473, 470, 487]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "2784"
	      Position		      [525, 285, 545, 305]
	      BlockMirror	      on
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      SID		      "2785"
	      Ports		      [1, 2]
	      Position		      [715, 461, 720, 499]
	      BackgroundColor	      "black"
	      ShowName		      off
	      Outputs		      "2"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      SID		      "2786"
	      Position		      [545, 580, 670, 600]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <logic>2"
	      SID		      "2787"
	      Position		      [25, 534, 130, 566]
	      ForegroundColor	      "red"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "v_req_limited"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      SID		      "2788"
	      Position		      [545, 640, 670, 660]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From2"
	      SID		      "2789"
	      Position		      [485, 500, 610, 520]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From3"
	      SID		      "2790"
	      Position		      [485, 525, 610, 545]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From4"
	      SID		      "2791"
	      Position		      [485, 435, 610, 455]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      SID		      "2792"
	      Position		      [470, 302, 495, 328]
	      FontName		      "Arial"
	      Gain		      "-1"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto"
	      SID		      "2793"
	      Position		      [250, 525, 370, 545]
	      NamePlacement	      "alternate"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto1"
	      SID		      "2794"
	      Position		      [250, 549, 370, 571]
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto4"
	      SID		      "2795"
	      Position		      [810, 370, 945, 390]
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto5"
	      SID		      "2796"
	      Position		      [820, 185, 930, 205]
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto6"
	      SID		      "2797"
	      Position		      [830, 260, 940, 280]
	      NamePlacement	      "alternate"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "2798"
	      Ports		      [2, 1]
	      Position		      [630, 497, 635, 548]
	      ShowName		      off
	      Inputs		      "2"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      SID		      "2799"
	      Ports		      [2, 1]
	      Position		      [225, 87, 255, 118]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      RateLimiter
	      Name		      "Rate Limiter"
	      SID		      "2800"
	      Position		      [510, 367, 540, 393]
	      BlockMirror	      on
	      RisingSlewLimit	      "1/(gb_shift_delay+eps)"
	      FallingSlewLimit	      "-1/(gb_shift_delay+eps)"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "2801"
	      Ports		      [1, 1]
	      Position		      [80, 175, 110, 195]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "0.2"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation1"
	      SID		      "2802"
	      Ports		      [1, 1]
	      Position		      [710, 186, 730, 204]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "gb_gears_num"
	      LowerLimit	      "1"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Speed Dependent Shifting"
	      SID		      "2803"
	      Ports		      [1, 2]
	      Position		      [175, 522, 205, 573]
	      SourceBlock	      "lib_controls/SubSystem/Speed Dependent Shifting"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "off"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "2804"
	      Position		      [325, 80, 355, 110]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "2805"
	      Position		      [520, 235, 550, 265]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch2"
	      SID		      "2806"
	      Position		      [520, 155, 550, 185]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch3"
	      SID		      "2807"
	      Position		      [690, 600, 720, 630]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch4"
	      SID		      "2808"
	      Position		      [660, 465, 690, 495]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To WS"
	      SID		      "2809"
	      Ports		      [1]
	      Position		      [360, 339, 400, 361]
	      BackgroundColor	      "red"
	      VariableName	      "spd"
	      MaxDataPoints	      "inf"
	      SampleTime	      "-1"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "allow downshift?"
	      SID		      "2810"
	      Ports		      [1, 1]
	      Position		      [420, 232, 450, 268]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"allow downshift?"
		Location		[328, 265, 817, 480]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gearnum"
		  SID			  "2811"
		  Position		  [35, 35, 55, 55]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  SID			  "2812"
		  Ports			  [2, 1]
		  Position		  [375, 43, 405, 67]
		  FontName		  "Arial"
		  Operator		  "NOR"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "2813"
		  Position		  [145, 60, 180, 80]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "2814"
		  Position		  [145, 105, 180, 125]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "2815"
		  Ports			  [2, 1]
		  Position		  [225, 38, 255, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator2"
		  SID			  "2816"
		  Ports			  [2, 1]
		  Position		  [225, 98, 255, 122]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  Outport
		  Name			  "allow shift"
		  SID			  "2817"
		  Position		  [445, 45, 465, 65]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  DstBlock		  "allow shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gearnum"
		  SrcPort		  1
		  Points		  [45, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 25]
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 35]
		    DstBlock		    "Relational\nOperator2"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [15, 0; 0, -15]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 30; -60, 0]
		    DstBlock		    "Memory1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator2"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical\nOperator"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "allow upshift?"
	      SID		      "2818"
	      Ports		      [4, 1]
	      Position		      [420, 152, 450, 188]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"allow upshift?"
		Location		[132, 265, 847, 659]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gearnum"
		  SID			  "2819"
		  Position		  [35, 25, 55, 45]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_trq_out_r"
		  SID			  "2820"
		  Position		  [35, 145, 55, 165]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_out_r"
		  SID			  "2821"
		  Position		  [35, 105, 55, 125]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "prev Pout/Pin"
		  SID			  "2822"
		  Position		  [35, 185, 55, 205]
		  Port			  "4"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES1"
		  SID			  "2823"
		  Ports			  []
		  Position		  [645, 340, 701, 380]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES1"
		    Location		    [229, 259, 576, 405]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "2824"
		    Name		    "This block prevents an upshift if it the engine is not on and\nthe upshift would make the motor power"
		    " low enough that it\ncould not provide the required input power.  However, an upshift\nis allowed if to stay in "
		    "the current gear would put the motor\nbeyond 95% of its maximum speed.\n\nThis block is to be used in pretransmi"
		    "ssion parallel hybrids\n(where the engine and motor torques are combined on the\nengine side of the transmission"
		    ") ONLY."
		    Position		    [172, 12]
		    VerticalAlignment	    "top"
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "2825"
		  Position		  [110, 75, 130, 95]
		  BlockMirror		  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "2826"
		  Position		  [100, 347, 375, 373]
		  Value			  "max(mc_map_spd)*mc_spd_scale/tc_mc_to_fc_ratio*.95"
		}
		Block {
		  BlockType		  From
		  Name			  "From <vc>"
		  SID			  "2827"
		  Position		  [15, 232, 80, 258]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "engine_on"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator1"
		  SID			  "2828"
		  Ports			  [3, 1]
		  Position		  [615, 53, 645, 97]
		  Operator		  "OR"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "2829"
		  Position		  [125, 230, 155, 260]
		  X0			  "1"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "2830"
		  Ports			  [2, 1]
		  Position		  [310, 37, 340, 68]
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "2831"
		  Ports			  [2, 1]
		  Position		  [540, 42, 570, 73]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "2832"
		  Ports			  [2, 1]
		  Position		  [395, 287, 425, 318]
		  Operator		  ">"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation"
		  SID			  "2833"
		  Ports			  [1, 1]
		  Position		  [165, 29, 205, 61]
		  InputPortMap		  "u0"
		  FontName		  "Arial"
		  UpperLimit		  "gb_gears_num"
		  LowerLimit		  "1"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "2834"
		  Ports			  [2, 1]
		  Position		  [105, 27, 135, 58]
		}
		Block {
		  BlockType		  Product
		  Name			  "est. req'd\ninput pwr\n(W)"
		  SID			  "2835"
		  Ports			  [3, 1]
		  Position		  [310, 109, 340, 141]
		  Inputs		  "**/"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "gear ratio"
		  SID			  "2836"
		  Position		  [245, 33, 275, 57]
		  FontName		  "Arial"
		  InputValues		  "[1:length(gb_ratio)]"
		  Table			  "gb_ratio"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "gear ratio1"
		  SID			  "2837"
		  Position		  [250, 258, 280, 282]
		  FontName		  "Arial"
		  InputValues		  "[1:length(gb_ratio)]"
		  Table			  "gb_ratio"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "motor\ntorque\ncapability"
		  SID			  "2838"
		  Position		  [380, 45, 410, 65]
		  FontName		  "Arial"
		  InputValues		  "mc_map_spd*mc_spd_scale"
		  Table			  "mc_max_trq*mc_trq_scale*mc_overtrq_factor+eps"
		}
		Block {
		  BlockType		  Product
		  Name			  "motor (input to gb)\npwr capability"
		  SID			  "2839"
		  Ports			  [2, 1]
		  Position		  [455, 32, 485, 63]
		}
		Block {
		  BlockType		  Product
		  Name			  "req'd input spd\nif no gear change"
		  SID			  "2840"
		  Ports			  [2, 1]
		  Position		  [310, 276, 340, 309]
		}
		Block {
		  BlockType		  Outport
		  Name			  "allow shift"
		  SID			  "2841"
		  Position		  [675, 65, 695, 85]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "req'd input spd\nif no gear change"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  Points		  [170, 0]
		  DstBlock		  "Logical\nOperator1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "gb_spd_out_r"
		  SrcPort		  1
		  Points		  [150, 0]
		  Branch {
		    Points		    [0, 185]
		    DstBlock		    "req'd input spd\nif no gear change"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [85, 0]
		    Branch {
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "est. req'd\ninput pwr\n(W)"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "prev gearnum"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    Points		    [0, 235]
		    DstBlock		    "gear ratio1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "gear ratio1"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "req'd input spd\nif no gear change"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Saturation"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation"
		  SrcPort		  1
		  DstBlock		  "gear ratio"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gear ratio"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "motor\ntorque\ncapability"
		  SrcPort		  1
		  DstBlock		  "motor (input to gb)\npwr capability"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    DstBlock		    "motor\ntorque\ncapability"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -15]
		    DstBlock		    "motor (input to gb)\npwr capability"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "motor (input to gb)\npwr capability"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "est. req'd\ninput pwr\n(W)"
		  SrcPort		  1
		  Points		  [175, 0; 0, -60]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "gb_trq_out_r"
		  SrcPort		  1
		  Points		  [215, 0; 0, -30]
		  DstBlock		  "est. req'd\ninput pwr\n(W)"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "prev Pout/Pin"
		  SrcPort		  1
		  Points		  [225, 0; 0, -60]
		  DstBlock		  "est. req'd\ninput pwr\n(W)"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Logical\nOperator1"
		  SrcPort		  1
		  DstBlock		  "allow shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "From <vc>"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [430, 0; 0, -170]
		  DstBlock		  "Logical\nOperator1"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "current\ngear\nnumber"
	      SID		      "2842"
	      Ports		      [2, 1]
	      Position		      [655, 177, 675, 213]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "delta\ngear\nnumber"
	      SID		      "2843"
	      Position		      [585, 189, 615, 221]
	      FontName		      "Arial"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "downshift \ncommand"
	      SID		      "2844"
	      Ports		      [3, 1]
	      Position		      [420, 289, 450, 341]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"downshift \ncommand"
		Location		[431, 372, 906, 667]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "2845"
		  Position		  [45, 98, 75, 112]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "2846"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "2847"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "2848"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "2849"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "2850"
		  Ports			  [1, 1]
		  Position		  [240, 100, 270, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_dnshift_spd|gb_dnshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "2851"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "2852"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "2853"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "2854"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [55, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "engine\ntorque\ncapability"
	      SID		      "2855"
	      Position		      [185, 205, 215, 225]
	      BlockRotation	      270
	      FontName		      "Arial"
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      Table		      "fc_max_trq*fc_trq_scale+eps"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "gb_spd_in_r"
	      SID		      "2856"
	      Ports		      [2, 1]
	      Position		      [150, 323, 170, 347]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio"
	      SID		      "2857"
	      Position		      [400, 368, 430, 392]
	      BlockMirror	      on
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      Table		      "gb_ratio"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio1"
	      SID		      "2858"
	      Position		      [770, 183, 800, 207]
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      Table		      "gb_ratio"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "gearbox speed\nestimator"
	      SID		      "2859"
	      Ports		      [1, 1]
	      Position		      [275, 320, 305, 350]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"gearbox speed\nestimator"
		Location		[224, 217, 812, 726]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_in_r\nif no gear change"
		  SID			  "2860"
		  Position		  [45, 18, 75, 32]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "2861"
		  Ports			  []
		  Position		  [515, 345, 571, 385]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [497, 485, 832, 570]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "2862"
		    Name		    "The requested engine speed is replaced by an estimate of the\nengine's previous speed whenever the ve"
		    "hicle missed the trace\n by more than 1 mph on the last time step."
		    Position		    [167, 41]
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "2863"
		  Position		  [165, 240, 185, 260]
		  BlockMirror		  on
		  Value			  "eps"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "2864"
		  Position		  [315, 165, 335, 185]
		  BlockMirror		  on
		  Value			  "0"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "2865"
		  Position		  [230, 360, 250, 380]
		  BlockMirror		  on
		  Value			  "2"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "2866"
		  Position		  [230, 460, 250, 480]
		  BlockMirror		  on
		  Value			  "0.11"
		}
		Block {
		  BlockType		  From
		  Name			  "From"
		  SID			  "2867"
		  Position		  [195, 40, 285, 70]
		  BlockMirror		  on
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "gb_spd_in_a"
		}
		Block {
		  BlockType		  From
		  Name			  "From <cyc>"
		  SID			  "2868"
		  Position		  [30, 304, 120, 336]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "cyc_mph_r"
		}
		Block {
		  BlockType		  From
		  Name			  "From <veh>"
		  SID			  "2869"
		  Position		  [30, 99, 85, 131]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "mpha"
		}
		Block {
		  BlockType		  From
		  Name			  "From <wh>/\ntire slip model (m/s)"
		  SID			  "2870"
		  Position		  [30, 184, 120, 216]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "veh_spd_a_rec"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  SID			  "2871"
		  Position		  [150, 97, 190, 133]
		  Gain			  "0.447"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical"
		  SID			  "2872"
		  Ports			  [2, 1]
		  Position		  [375, 317, 405, 348]
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "2873"
		  Position		  [370, 110, 400, 140]
		  X0			  "cyc_mph(1,2)*0.447/wh_radius*fd_ratio*gb_ratio(gb_num_init)"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "2874"
		  Position		  [310, 310, 340, 340]
		  X0			  "1"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "2875"
		  Ports			  [3, 1]
		  Position		  [215, 99, 245, 131]
		  Inputs		  "**/"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational"
		  SID			  "2876"
		  Ports			  [2, 1]
		  Position		  [225, 307, 255, 338]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational1"
		  SID			  "2877"
		  Ports			  [2, 1]
		  Position		  [225, 412, 255, 443]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "2878"
		  Ports			  [2, 1]
		  Position		  [160, 192, 190, 223]
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "2879"
		  Ports			  [2, 1]
		  Position		  [160, 297, 190, 328]
		  Inputs		  "-+"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "2880"
		  Position		  [310, 110, 340, 140]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "2881"
		  Position		  [445, 120, 475, 150]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "dt"
		  SID			  "2882"
		  Ports			  [0, 1]
		  Position		  [165, 408, 185, 432]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "dt"
		    Location		    [240, 561, 480, 665]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "2883"
		    Position		    [25, 25, 45, 45]
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "2884"
		    Position		    [75, 53, 105, 77]
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum4"
		    SID			    "2885"
		    Ports		    [2, 1]
		    Position		    [130, 27, 160, 58]
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "2886"
		    Position		    [185, 38, 215, 52]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Sum4"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Sum4"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Sum4"
		    DstPort		    1
		    }
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  SID			  "2887"
		  Position		  [545, 128, 575, 142]
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Product"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  Labels		  [1, 0]
		  SrcBlock		  "From <wh>/\ntire slip model (m/s)"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -25; 155, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <cyc>"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <veh>"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    DstBlock		    "Gain"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 190]
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Relational"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gb_spd_in_r\nif no gear change"
		  SrcPort		  1
		  Points		  [350, 0]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "From"
		  SrcPort		  1
		  Points		  [0, 50]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational1"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Logical"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical"
		  SrcPort		  1
		  Points		  [10, 0; 0, -200]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "dt"
		  SrcPort		  1
		  DstBlock		  "Relational1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "load=T/\n(maxT\nat spd)"
	      SID		      "2888"
	      Ports		      [1, 1]
	      Position		      [275, 96, 295, 114]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "0"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev gear\nnumber"
	      SID		      "2889"
	      Position		      [670, 35, 710, 55]
	      BlockMirror	      on
	      FontName		      "Arial"
	      X0		      "gb_num_init"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev gear\nratio"
	      SID		      "2890"
	      Position		      [205, 370, 240, 390]
	      BlockMirror	      on
	      FontName		      "Arial"
	      X0		      "gb_ratio(gb_num_init)"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "shifting1"
	      SID		      "2891"
	      Ports		      [1, 1]
	      Position		      [775, 254, 805, 286]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"shifting1"
		Location		[166, 208, 456, 399]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gear\nnumber"
		  SID			  "2892"
		  Position		  [15, 50, 35, 70]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "2893"
		  Position		  [20, 131, 120, 159]
		  FontName		  "Arial"
		  Value			  "gb_shift_delay-1e-6"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "2894"
		  Ports			  [2, 1]
		  Position		  [185, 53, 215, 77]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "time since last shift"
		  SID			  "2895"
		  Ports			  [1, 1]
		  Position		  [65, 43, 125, 77]
		  ShowName		  off
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('time since\\nlast shift')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "time since last shift"
		    Location		    [16, 396, 306, 535]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "2896"
		    Position		    [10, 60, 30, 80]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "just shifted"
		    SID			    "2897"
		    Ports		    [1, 1]
		    Position		    [60, 57, 110, 83]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('just\\nshifted')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "just shifted"
		    Location		    [140, 214, 463, 359]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "2898"
		    Position		    [55, 55, 75, 75]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "2899"
		    Position		    [120, 55, 155, 75]
		    FontName		    "Arial"
		    X0			    "1"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    SID			    "2900"
		    Ports		    [2, 1]
		    Position		    [190, 58, 220, 82]
		    FontName		    "Arial"
		    Operator		    "~="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "2901"
		    Position		    [250, 60, 270, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 30; 75, 0; 0, -20]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "timer"
		    SID			    "2902"
		    Ports		    [1, 1]
		    Position		    [140, 55, 175, 85]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('timer')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "timer"
		    Location		    [455, 179, 859, 394]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "trigger"
		    SID			    "2903"
		    Position		    [15, 125, 35, 145]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "2904"
		    Position		    [100, 100, 120, 120]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant1"
		    SID			    "2905"
		    Position		    [100, 150, 120, 170]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant2"
		    SID			    "2906"
		    Position		    [150, 5, 170, 25]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "2907"
		    Position		    [265, 59, 295, 91]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "no-lag\nReset Integrator"
		    SID			    "2908"
		    Ports		    [3, 1]
		    Position		    [155, 96, 205, 174]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskType		    "No-lag Reset Integrator"
		    MaskDescription	    "No-lag Reset Integrator"
		    MaskHelp		    "Integrates first input using Euler technique.\\nAt the time step that input 2 <> zero,\\noutput i"
		    "s reset to input 3."
		    MaskPromptString	    "Initial Value"
		    MaskStyleString	    "edit"
		    MaskVariables	    "initval=@1;"
		    MaskTunableValueString  "on"
		    MaskEnableString	    "on"
		    MaskVisibilityString    "on"
		    MaskToolTipString	    "on"
		    MaskDisplay		    "disp('1/s\\nw/ reset\\nno lag')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "15"
		    System {
		    Name		    "no-lag\nReset Integrator"
		    Location		    [258, 616, 780, 880]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "2909"
		    Position		    [60, 100, 80, 120]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    SID			    "2910"
		    Position		    [60, 140, 80, 160]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_3"
		    SID			    "2911"
		    Position		    [45, 185, 65, 205]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "2912"
		    Position		    [125, 205, 145, 225]
		    BlockRotation	    270
		    NamePlacement	    "alternate"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "2913"
		    Position		    [340, 55, 375, 75]
		    BlockMirror		    on
		    FontName		    "Arial"
		    X0			    "initval"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    SID			    "2914"
		    Ports		    [2, 1]
		    Position		    [160, 96, 180, 114]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    SID			    "2915"
		    Ports		    [2, 1]
		    Position		    [230, 90, 250, 110]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "2916"
		    Position		    [290, 139, 320, 171]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "dt"
		    SID			    "2917"
		    Ports		    [0, 1]
		    Position		    [112, 50, 138, 80]
		    BlockRotation	    270
		    BlockMirror		    on
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "dt"
		    Location		    [80, 285, 429, 424]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "2918"
		    Position		    [65, 60, 85, 80]
		    FontName		    "Arial"
		    FontSize		    8
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "2919"
		    Position		    [125, 85, 160, 105]
		    FontName		    "Arial"
		    FontSize		    8
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    SID			    "2920"
		    Ports		    [2, 1]
		    Position		    [205, 65, 225, 85]
		    FontName		    "Arial"
		    FontSize		    8
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "2921"
		    Position		    [255, 65, 275, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [10, 0; 0, -15]
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    }
		    }
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "in_2==0"
		    SID			    "2922"
		    Ports		    [2, 1]
		    Position		    [160, 143, 190, 167]
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "2923"
		    Position		    [455, 145, 475, 165]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    Points		    [0, -40]
		    DstBlock		    "in_2==0"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "in_2==0"
		    SrcPort		    1
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    Points		    [85, 0]
		    Branch {
		    Points		    [0, -90]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    Points		    [10, 0; 0, 45]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    Points		    [-130, 0; 0, 30]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "dt"
		    SrcPort		    1
		    Points		    [0, 15]
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "in_2==0"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_3"
		    SrcPort		    1
		    Points		    [200, 0; 0, -30]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "time"
		    SID			    "2924"
		    Position		    [350, 65, 370, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "no-lag\nReset Integrator"
		    SrcPort		    1
		    Points		    [35, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Constant1"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant2"
		    SrcPort		    1
		    Points		    [35, 0; 0, 50]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "trigger"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, -60]
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    DstBlock		    "time"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "2925"
		    Position		    [225, 60, 245, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "timer"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "just shifted"
		    SrcPort		    1
		    DstBlock		    "timer"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "just shifted"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "2926"
		  Position		  [250, 55, 270, 75]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "time since last shift"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [15, 0; 0, -75]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "gear\nnumber"
		  SrcPort		  1
		  DstBlock		  "time since last shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "upshift\n command"
	      SID		      "2927"
	      Ports		      [3, 1]
	      Position		      [420, 64, 450, 116]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"upshift\n command"
		Location		[324, 355, 799, 650]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "2928"
		  Position		  [45, 103, 75, 117]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "2929"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "2930"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "2931"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "2932"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "2933"
		  Ports			  [1, 1]
		  Position		  [245, 100, 275, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_upshift_spd|gb_upshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "2934"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "2935"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "2936"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "2937"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [50, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Product
	      Name		      "~gb_trq_in_r"
	      SID		      "2938"
	      Ports		      [3, 1]
	      Position		      [150, 77, 170, 113]
	      FontName		      "Arial"
	      Inputs		      "*//"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear number, out"
	      SID		      "2939"
	      Position		      [785, 605, 805, 625]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear ratio, out"
	      SID		      "2940"
	      Position		      [785, 445, 805, 465]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "shifting, out"
	      SID		      "2941"
	      Position		      [785, 490, 805, 510]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      Labels		      [1, 0]
	      SrcBlock		      "Switch3"
	      SrcPort		      1
	      DstBlock		      "gear number, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      Points		      [0, 10]
	      DstBlock		      "shifting, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      Points		      [0, -15]
	      DstBlock		      "gear ratio, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      2
	      DstBlock		      "Goto1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      1
	      DstBlock		      "Goto"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <logic>2"
	      SrcPort		      1
	      DstBlock		      "Speed Dependent Shifting"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch4"
	      SrcPort		      1
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From3"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From2"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Switch4"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From4"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Switch4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant15"
	      SrcPort		      1
	      DstBlock		      "Switch4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant14"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gearbox speed\nestimator"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		Points			[0, 15]
		DstBlock		"To WS"
		DstPort			1
	      }
	      Branch {
		Points			[10, 0]
		Branch {
		  Points		  [30, 0]
		  Branch {
		    Points		    [30, 0]
		    DstBlock		    "downshift \ncommand"
		    DstPort		    3
		  }
		  Branch {
		    Points		    [0, -230]
		    DstBlock		    "upshift\n command"
		    DstPort		    3
		  }
		}
		Branch {
		  Points		  [0, -80; -145, 0]
		  DstBlock		  "engine\ntorque\ncapability"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "allow upshift?"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "upshift\n command"
	      SrcPort		      1
	      Points		      [50, 0]
	      DstBlock		      "Switch2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		Points			[0, 220]
		DstBlock		"downshift \ncommand"
		DstPort			2
	      }
	      Branch {
		Points			[20, 0]
		DstBlock		"upshift\n command"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "tires are at\ntraction limit"
	      SrcPort		      1
	      Points		      [230, 0; 0, 65]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "~gb_trq_in_r"
	      SrcPort		      1
	      DstBlock		      "Product2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "load=T/\n(maxT\nat spd)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Rate Limiter"
	      SrcPort		      1
	      DstBlock		      "gear ratio"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gear ratio"
	      SrcPort		      1
	      DstBlock		      "prev gear\nratio"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "prev gear\nratio"
	      SrcPort		      1
	      Points		      [-75, 0; 0, -40]
	      Branch {
		DstBlock		"gb_spd_in_r"
		DstPort			2
	      }
	      Branch {
		Points			[0, -235]
		DstBlock		"~gb_trq_in_r"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "gb_trq_out_r"
	      SrcPort		      1
	      Points		      [60, 0]
	      Branch {
		DstBlock		"~gb_trq_in_r"
		DstPort			1
	      }
	      Branch {
		Points			[0, 80]
		DstBlock		"allow upshift?"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "gb_spd_out_r"
	      SrcPort		      1
	      Points		      [60, 0]
	      Branch {
		DstBlock		"gb_spd_in_r"
		DstPort			1
	      }
	      Branch {
		Points			[0, -155]
		DstBlock		"allow upshift?"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      Points		      [0, -75]
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		Points			[0, -90]
		DstBlock		"~gb_trq_in_r"
		DstPort			2
	      }
	      Branch {
		DstBlock		"allow upshift?"
		DstPort			4
	      }
	    }
	    Line {
	      SrcBlock		      "prev.\nPout/Pin"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch2"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "prev gear\nnumber"
	      SrcPort		      1
	      Points		      [-30, 0]
	      Branch {
		Points			[0, 140]
		DstBlock		"current\ngear\nnumber"
		DstPort			1
	      }
	      Branch {
		Points			[-240, 0; 0, 205]
		Branch {
		  Points		  [0, -170]
		  Branch {
		    Points		    [10, 0]
		    DstBlock		    "upshift\n command"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 75]
		    Branch {
		    Points		    [0, 145]
		    DstBlock		    "downshift \ncommand"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "allow upshift?"
		    DstPort		    1
		    }
		  }
		}
		Branch {
		  DstBlock		  "allow downshift?"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "gear ratio1"
	      SrcPort		      1
	      DstBlock		      "Goto5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, 75]
		Branch {
		  Points		  [0, 110]
		  Branch {
		    DstBlock		    "Goto4"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Rate Limiter"
		    DstPort		    1
		  }
		}
		Branch {
		  DstBlock		  "shifting1"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[0, 0]
		Branch {
		  DstBlock		  "gear ratio1"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, -150]
		  DstBlock		  "prev gear\nnumber"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "current\ngear\nnumber"
	      SrcPort		      1
	      DstBlock		      "Saturation1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "delta\ngear\nnumber"
	      SrcPort		      1
	      DstBlock		      "current\ngear\nnumber"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "shifting1"
	      SrcPort		      1
	      DstBlock		      "Goto6"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch2"
	      SrcPort		      1
	      Points		      [15, 0; 0, 25]
	      Branch {
		DstBlock		"delta\ngear\nnumber"
		DstPort			1
	      }
	      Branch {
		DstBlock		"delta\ngear\nnumber"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "delta\ngear\nnumber"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "engine\ntorque\ncapability"
	      SrcPort		      1
	      Points		      [0, -90]
	      DstBlock		      "Product2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "downshift \ncommand"
	      SrcPort		      1
	      DstBlock		      "Gain1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "allow downshift?"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "load=T/\n(maxT\nat spd)"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "gb_spd_in_r"
	      SrcPort		      1
	      DstBlock		      "gearbox speed\nestimator"
	      DstPort		      1
	    }
	    Annotation {
	      SID		      "2942"
	      Name		      "local GOTO blocks:"
	      Position		      [897, 127]
	    }
	    Annotation {
	      SID		      "2943"
	      Name		      "default gear ratio\ncalculation"
	      Position		      [887, 159]
	    }
	    Annotation {
	      SID		      "2944"
	      Name		      "default shifting\ncalculation"
	      Position		      [888, 301]
	    }
	    Annotation {
	      SID		      "2945"
	      Name		      "default gear number\ncalculation"
	      Position		      [879, 434]
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "sim stop\nsubsystem"
	  SID			  "2946"
	  Ports			  []
	  Position		  [50, 15, 80, 65]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/sim stop\nsubsystem"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  Outport
	  Name			  "clutch\nstate"
	  SID			  "2947"
	  Position		  [610, 266, 640, 284]
	  IconDisplay		  "Port number"
	}
	Line {
	  SrcBlock		  "From <gb>2"
	  SrcPort		  1
	  DstBlock		  "pre-TX parallel\ngearbox control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <gb>1"
	  SrcPort		  1
	  DstBlock		  "pre-TX parallel\ngearbox control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From<gb>"
	  SrcPort		  1
	  Points		  [5, 0]
	  DstBlock		  "pre-TX parallel\ngearbox control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>3"
	  SrcPort		  1
	  Points		  [0, -10]
	  DstBlock		  "pre-TX parallel\ngearbox control"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "motor controller\nlogic"
	  SrcPort		  1
	  DstBlock		  "Goto <mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <mc>1"
	  SrcPort		  1
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <mc>"
	  SrcPort		  1
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <ess>"
	  SrcPort		  1
	  Points		  [0, 5]
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>5"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "From<wh>4"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <wh>3"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <wh>2"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>1"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    Points		    [0, -30]
	    Branch {
	      DstBlock		      "braking strategy"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [225, 0; 0, 90]
	      DstBlock		      "engine on\n(insight)"
	      DstPort		      4
	    }
	  }
	  Branch {
	    DstBlock		    "config traction control"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  3
	  Points		  [0, 5]
	  DstBlock		  "Goto <wh>2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <veh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>5"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    Points		    [0, 25]
	    Branch {
	      Points		      [0, 35]
	      DstBlock		      "front and rear\nbrake controller\n(achievable)"
	      DstPort		      1
	    }
	    Branch {
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	  }
	  Branch {
	    DstBlock		    "config traction control"
	    DstPort		    3
	  }
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  1
	  Points		  [0, 5]
	  Branch {
	    DstBlock		    "braking strategy"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [5, 0]
	    Branch {
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Branch {
	      Points		      [0, 105]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  2
	  Points		  [0, 5]
	  Branch {
	    Points		    [0, 20; -35, 0]
	    DstBlock		    "Sum"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Goto <wh>8"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Relational\nOperator"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  2
	  Points		  [0, 5]
	  DstBlock		  "Goto <wh>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <mc>2"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "parallel clutch\ncontrol"
	  SrcPort		  1
	  Points		  [20, 0]
	  Branch {
	    Points		    [0, -30]
	    DstBlock		    "Goto <sdo>"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 0]
	    Branch {
	      DstBlock		      "clutch\nstate"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [0, 230; -75, 0]
	      DstBlock		      "engine on\n(insight)"
	      DstPort		      5
	    }
	  }
	}
	Line {
	  SrcBlock		  "engine on\n(insight)"
	  SrcPort		  1
	  Points		  [0, 0]
	  Branch {
	    DstBlock		    "Goto <fc>"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -35; -55, 0]
	    DstBlock		    "parallel clutch\ncontrol"
	    DstPort		    4
	  }
	}
	Line {
	  SrcBlock		  "From <gb>5"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    Points		    [0, -110]
	    DstBlock		    "parallel clutch\ncontrol"
	    DstPort		    3
	  }
	  Branch {
	    DstBlock		    "engine on\n(insight)"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "engine on\n(insight)"
	  SrcPort		  2
	  DstBlock		  "Goto <fc>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <fc>"
	  SrcPort		  1
	  DstBlock		  "engine on\n(insight)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "engine on\n(insight)"
	  SrcPort		  3
	  DstBlock		  "Goto <fc><mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>4"
	  SrcPort		  1
	  Points		  [20, 0]
	  Branch {
	    DstBlock		    "parallel clutch\ncontrol"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [0, 110]
	    DstBlock		    "engine on\n(insight)"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "From <mc>3"
	  SrcPort		  1
	  Points		  [35, 0]
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "pre-TX parallel\ngearbox control"
	  SrcPort		  3
	  DstBlock		  "Goto <gb>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "pre-TX parallel\ngearbox control"
	  SrcPort		  2
	  Points		  [5, 0]
	  DstBlock		  "Goto <gb>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "pre-TX parallel\ngearbox control"
	  SrcPort		  1
	  Points		  [15, 0]
	  DstBlock		  "Goto"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  4
	  Points		  [75, 0]
	  DstBlock		  "Goto <wh>6"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  5
	  DstBlock		  "Goto <wh>7"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Ground"
	  SrcPort		  1
	  Points		  [30, 0; 0, -50]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  6
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "<vc> par"
      SID		      "307"
      Ports		      [0, 1]
      Position		      [100, 144, 165, 196]
      BackgroundColor	      "yellow"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_vc.jpg'))\n"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"<vc> par"
	Location		[190, 107, 1002, 777]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"94"
	Block {
	  BlockType		  From
	  Name			  "From <ess>"
	  SID			  "2948"
	  Position		  [540, 30, 635, 50]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "bus_voltage"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>"
	  SID			  "2949"
	  Position		  [540, 472, 635, 488]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_spd_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>1"
	  SID			  "2950"
	  Position		  [185, 61, 275, 79]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>2"
	  SID			  "2951"
	  Position		  [185, 86, 280, 104]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "eta_gb"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>3"
	  SID			  "2952"
	  Position		  [180, 120, 275, 140]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "slip_limited"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>4"
	  SID			  "2953"
	  Position		  [570, 251, 665, 269]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>5"
	  SID			  "2954"
	  Position		  [540, 452, 635, 468]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>6"
	  SID			  "2955"
	  Position		  [570, 282, 665, 298]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>7"
	  SID			  "2956"
	  Position		  [540, 416, 635, 434]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>8"
	  SID			  "2957"
	  Position		  [570, 317, 665, 333]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "engine_on"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>"
	  SID			  "2958"
	  Position		  [540, 65, 635, 85]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "P_mc_in_1lim"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>1"
	  SID			  "2959"
	  Position		  [545, 94, 635, 116]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_mc_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>2"
	  SID			  "2960"
	  Position		  [545, 129, 635, 151]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>3"
	  SID			  "2961"
	  Position		  [570, 224, 660, 246]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <veh>"
	  SID			  "2962"
	  Position		  [30, 317, 105, 333]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_prev"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>"
	  SID			  "2963"
	  Position		  [30, 350, 90, 370]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>1"
	  SID			  "2964"
	  Position		  [30, 281, 115, 299]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>2"
	  SID			  "2965"
	  Position		  [50, 477, 160, 493]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_drivetrain_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>3"
	  SID			  "2966"
	  Position		  [55, 511, 155, 529]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_wheel_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>4"
	  SID			  "2967"
	  Position		  [540, 501, 625, 519]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>5"
	  SID			  "2968"
	  Position		  [35, 566, 155, 584]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_rear_brake"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>6"
	  SID			  "2969"
	  Position		  [540, 536, 625, 554]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "clutch_state"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>7"
	  SID			  "2970"
	  Position		  [55, 445, 115, 465]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>8"
	  SID			  "2971"
	  Position		  [300, 315, 360, 335]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>9"
	  SID			  "2972"
	  Position		  [40, 206, 125, 224]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From<gb>"
	  SID			  "2973"
	  Position		  [185, 26, 275, 44]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From<wh>4"
	  SID			  "2974"
	  Position		  [50, 536, 165, 554]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_front_brake"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto"
	  SID			  "2975"
	  Position		  [370, 47, 445, 73]
	  NamePlacement		  "alternate"
	  GotoTag		  "gear_number"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>"
	  SID			  "2976"
	  Position		  [760, 435, 825, 455]
	  NamePlacement		  "alternate"
	  GotoTag		  "engine_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>1"
	  SID			  "2977"
	  Position		  [755, 470, 835, 490]
	  GotoTag		  "spd_command"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc><mc>"
	  SID			  "2978"
	  Position		  [760, 506, 810, 524]
	  GotoTag		  "key_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>"
	  SID			  "2979"
	  Position		  [355, 85, 445, 105]
	  GotoTag		  "gear_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>1"
	  SID			  "2980"
	  Position		  [365, 121, 445, 139]
	  GotoTag		  "shifting"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <mc>"
	  SID			  "2981"
	  Position		  [725, 80, 815, 100]
	  GotoTag		  "P_mc_in_r"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>"
	  SID			  "2982"
	  Position		  [780, 236, 850, 254]
	  NamePlacement		  "alternate"
	  GotoTag		  "clutch_state"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>1"
	  SID			  "2983"
	  Position		  [460, 311, 545, 329]
	  GotoTag		  "slip_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>"
	  SID			  "2984"
	  Position		  [455, 240, 540, 260]
	  NamePlacement		  "alternate"
	  GotoTag		  "F_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>1"
	  SID			  "2985"
	  Position		  [190, 304, 280, 326]
	  GotoTag		  "v_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>2"
	  SID			  "2986"
	  Position		  [265, 331, 355, 349]
	  GotoTag		  "wt_front_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>3"
	  SID			  "2987"
	  Position		  [250, 481, 335, 499]
	  GotoTag		  "F_front_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>4"
	  SID			  "2988"
	  Position		  [250, 544, 335, 566]
	  GotoTag		  "F_rear_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>5"
	  SID			  "2989"
	  Position		  [235, 205, 345, 225]
	  GotoTag		  "F_front_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>6"
	  SID			  "2990"
	  Position		  [200, 366, 290, 384]
	  GotoTag		  "wt_rear_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>7"
	  SID			  "2991"
	  Position		  [195, 396, 285, 414]
	  GotoTag		  "front_traction_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>8"
	  SID			  "2992"
	  Position		  [400, 185, 510, 205]
	  GotoTag		  "F_rear_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Ground
	  Name			  "Ground"
	  SID			  "2993"
	  Position		  [115, 595, 135, 615]
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator"
	  SID			  "2994"
	  Ports			  [2, 1]
	  Position		  [405, 302, 435, 333]
	  Operator		  "~="
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  SID			  "2995"
	  Ports			  [2, 1]
	  Position		  [405, 232, 435, 263]
	  Inputs		  "-+"
	}
	Block {
	  BlockType		  Reference
	  Name			  "braking strategy"
	  SID			  "2996"
	  Ports			  [2, 2]
	  Position		  [190, 202, 220, 253]
	  NamePlacement		  "alternate"
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/braking strategy"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "config traction control"
	  SID			  "2997"
	  Ports			  [3, 5]
	  Position		  [130, 279, 165, 381]
	  BackgroundColor	  "darkGreen"
	  AttributesFormatString  "%<BlockChoice>"
	  ShowPortLabels	  "none"
	  BlockChoice		  "traction control 2 axle"
	  TemplateBlock		  "lib_controls/SubSystem/config traction control"
	  MemberBlocks		  "traction control 2 axle,traction control J2452 2 axle"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "config traction control"
	    Location		    [148, 182, 646, 482]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    SIDHighWatermark	    "6898"
	    Block {
	      BlockType		      Inport
	      Name		      "time-average\nvehicle speed\n req'd (m/s)"
	      SID		      "2997::706"
	      Position		      [20, 40, 40, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SID		      "2997::707"
	      Position		      [20, 80, 40, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "total tractive\nforce req'd\n(N)"
	      SID		      "2997::708"
	      Position		      [20, 120, 40, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "traction control\n2 axle"
	      SID		      "2997::709"
	      Ports		      [3, 5]
	      Position		      [100, 40, 140, 80]
	      BackgroundColor	      "darkGreen"
	      LibraryVersion	      "1.479"
	      SourceBlock	      "lib_controls/SubSystem/traction control 2 axle"
	      SourceType	      "SubSystem"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd force\n(N)"
	      SID		      "2997::710"
	      Position		      [200, 40, 220, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd speed\n(m/s)"
	      SID		      "2997::711"
	      Position		      [200, 80, 220, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nfront axle\n(N)"
	      SID		      "2997::712"
	      Position		      [200, 120, 220, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nrear axle\n(N)"
	      SID		      "2997::713"
	      Position		      [200, 160, 220, 180]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "front/total \ntraction ratio"
	      SID		      "2997::714"
	      Position		      [200, 200, 220, 220]
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "time-average\nvehicle speed\n req'd (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "total tractive\nforce req'd\n(N)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      1
	      DstBlock		      "req'd force\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      2
	      DstBlock		      "req'd speed\n(m/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      3
	      DstBlock		      "weight on\nfront axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      4
	      DstBlock		      "weight on\nrear axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      5
	      DstBlock		      "front/total \ntraction ratio"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "engine on\n(parallel hybrid)"
	  SID			  "2998"
	  Ports			  [5, 3]
	  Position		  [680, 424, 715, 536]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "engine on\n(parallel hybrid)"
	    Location		    [10, 112, 950, 1190]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "80"
	    Block {
	      BlockType		      Inport
	      Name		      "trq req'd\nout of clutch\n(N*m)"
	      SID		      "2999"
	      Position		      [35, 13, 65, 27]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "spd req'd\nout of clutch\n(N*m)1"
	      SID		      "3000"
	      Position		      [25, 103, 55, 117]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "fc_spd_out_r"
	      SID		      "3001"
	      Position		      [415, 553, 445, 567]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "v_ave_req"
	      SID		      "3002"
	      Position		      [160, 523, 190, 537]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "clutch\nstate"
	      SID		      "3003"
	      Position		      [100, 468, 130, 482]
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)"
	      SID		      "3004"
	      Position		      [165, 271, 225, 289]
	      ShowName		      off
	      Value		      "cs_lo_soc"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)1"
	      SID		      "3005"
	      Position		      [115, 376, 190, 394]
	      Value		      "cs_off_trq_frac"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)2"
	      SID		      "3006"
	      Position		      [745, 105, 785, 125]
	      Value		      "fc_on"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)3"
	      SID		      "3007"
	      Position		      [520, 322, 570, 338]
	      Value		      "fc_tstat"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES1"
	      SID		      "3008"
	      Ports		      []
	      Position		      [830, 60, 886, 100]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES1"
		Location		[296, 542, 726, 743]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "3009"
		  Name			  "This engine state computer keeps the engine on if:\n[\n1) key is on, AND\n2) (trq is too high AND speed "
		  "is too high for idle) OR engine is allowed to idle, AND\n3) vehicle speed >= cs_electric_launch_spd [ in m/s ], AN"
		  "D\n4) req'd trq > (cs_off_trq_frac * max_trq_at_spd) OR SOC<cs_lo_soc\n]\nOR\n[ engine was previously on AND the t"
		  "ransmission is shifting ]\n\nThe last condition is added to prevent the engine from unrealistically\nshutting down"
		  " for a second or two during a shift."
		  Position		  [212, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "3010"
	      Position		      [110, 27, 145, 43]
	      ShowName		      off
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "3011"
	      Position		      [325, 77, 395, 93]
	      ShowName		      off
	      Value		      "vc_idle_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant10"
	      SID		      "3012"
	      Position		      [170, 232, 300, 248]
	      ShowName		      off
	      Value		      "cs_charge_deplete_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant11"
	      SID		      "3013"
	      Position		      [95, 66, 210, 84]
	      ShowName		      off
	      Value		      "cs_electric_decel_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "3014"
	      Position		      [140, 117, 210, 133]
	      ShowName		      off
	      Value		      "vc_idle_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "3015"
	      Position		      [400, 509, 480, 531]
	      ShowName		      off
	      Value		      "vc_launch_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "3016"
	      Position		      [155, 480, 175, 500]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "3017"
	      Position		      [215, 535, 235, 555]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "3018"
	      Position		      [155, 585, 175, 605]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant7"
	      SID		      "3019"
	      Position		      [740, 550, 760, 570]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant8"
	      SID		      "3020"
	      Position		      [240, 389, 270, 411]
	      Value		      "eps"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant9"
	      SID		      "3021"
	      Position		      [635, 370, 655, 390]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <ess>"
	      SID		      "3022"
	      Position		      [105, 254, 150, 276]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>1"
	      SID		      "3023"
	      Position		      [105, 148, 190, 172]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "v_req_limited"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>2"
	      SID		      "3024"
	      Position		      [585, 243, 655, 257]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "shifting"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>3"
	      SID		      "3025"
	      Position		      [440, 470, 525, 490]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_max_pwr"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>4"
	      SID		      "3026"
	      Position		      [515, 286, 585, 304]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "fc_clt_tmp"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      SID		      "3027"
	      Position		      [585, 318, 615, 342]
	      Gain		      "vc_fc_warm_tmp_frac"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      SID		      "3028"
	      Position		      [390, 390, 420, 420]
	      Gain		      "tc_mc_to_fc_ratio"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator10"
	      SID		      "3029"
	      Ports		      [3, 1]
	      Position		      [340, 511, 370, 569]
	      ShowName		      off
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator11"
	      SID		      "3030"
	      Ports		      [1, 1]
	      Position		      [350, 235, 380, 255]
	      ShowName		      off
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator12"
	      SID		      "3031"
	      Ports		      [3, 1]
	      Position		      [810, 154, 840, 186]
	      ShowName		      off
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator13"
	      SID		      "3032"
	      Ports		      [2, 1]
	      Position		      [685, 298, 715, 327]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator2"
	      SID		      "3033"
	      Ports		      [2, 1]
	      Position		      [425, 41, 445, 74]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator3"
	      SID		      "3034"
	      Ports		      [2, 1]
	      Position		      [365, 31, 395, 64]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator4"
	      SID		      "3035"
	      Ports		      [2, 1]
	      Position		      [285, 21, 305, 54]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator5"
	      SID		      "3036"
	      Ports		      [3, 1]
	      Position		      [585, 125, 615, 235]
	      ShowName		      off
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator6"
	      SID		      "3037"
	      Ports		      [3, 1]
	      Position		      [385, 322, 405, 358]
	      ShowName		      off
	      Operator		      "OR"
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator7"
	      SID		      "3038"
	      Ports		      [2, 1]
	      Position		      [680, 243, 710, 272]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator8"
	      SID		      "3039"
	      Ports		      [5, 1]
	      Position		      [755, 161, 785, 219]
	      ShowName		      off
	      Operator		      "OR"
	      Inputs		      "5"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator9"
	      SID		      "3040"
	      Ports		      [2, 1]
	      Position		      [520, 160, 545, 195]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "Look-Up Table"
	      SID		      "3041"
	      Position		      [205, 175, 235, 205]
	      InputValues	      "[cs_lo_soc cs_hi_soc cs_hi_soc+eps]"
	      Table		      "[cs_electric_launch_spd_lo cs_electric_launch_spd_hi cs_electric_launch_spd_hi]"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Manual \nSwitch"
	      SID		      "3042"
	      Ports		      [2, 1]
	      Position		      [695, 397, 725, 433]
	      LibraryVersion	      "1.260"
	      SourceBlock	      "simulink/Signal\nRouting/Manual Switch"
	      SourceType	      "Manual Switch"
	      sw		      "1"
	      action		      "0"
	      varsize		      off
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "3043"
	      Position		      [685, 340, 715, 370]
	      BlockMirror	      on
	      X0		      "cyc_mph(1,2)>0"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      SID		      "3044"
	      Ports		      [2, 1]
	      Position		      [235, 347, 265, 378]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      SID		      "3045"
	      Ports		      [2, 1]
	      Position		      [465, 427, 495, 458]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      SID		      "3046"
	      Ports		      [2, 1]
	      Position		      [510, 397, 540, 428]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "3047"
	      Ports		      [2, 1]
	      Position		      [275, 153, 300, 182]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "3048"
	      Ports		      [2, 1]
	      Position		      [290, 324, 315, 351]
	      ShowName		      off
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "3049"
	      Ports		      [2, 1]
	      Position		      [255, 257, 285, 288]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      SID		      "3050"
	      Ports		      [2, 1]
	      Position		      [290, 379, 315, 406]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator4"
	      SID		      "3051"
	      Ports		      [2, 1]
	      Position		      [635, 459, 660, 486]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator5"
	      SID		      "3052"
	      Ports		      [2, 1]
	      Position		      [635, 289, 660, 316]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator6"
	      SID		      "3053"
	      Ports		      [2, 1]
	      Position		      [635, 409, 660, 436]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "3054"
	      Ports		      [1, 1]
	      Position		      [595, 525, 625, 555]
	      InputPortMap	      "u0"
	      UpperLimit	      "max(fc_map_spd)*fc_spd_scale"
	      LowerLimit	      "vc_idle_spd*vc_idle_bool"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Subsystem"
	      SID		      "3055"
	      Ports		      [1, 1]
	      Position		      [555, 427, 600, 463]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Running Average"
	      MaskDescription	      "Running Average"
	      MaskHelp		      "Output is the average of the last (Averaging Time) seconds of input."
	      MaskPromptString	      "Averaging Time Steps (#)"
	      MaskStyleString	      "edit"
	      MaskVariables	      "n=@1;"
	      MaskTunableValueString  "on"
	      MaskEnableString	      "on"
	      MaskVisibilityString    "on"
	      MaskToolTipString	      "on"
	      MaskDisplay	      "disp('Running\\nAverage')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "3"
	      System {
		Name			"Subsystem"
		Location		[137, 366, 771, 685]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "3056"
		  Position		  [50, 110, 70, 130]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "3057"
		  Position		  [75, 210, 95, 230]
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "3058"
		  Position		  [75, 274, 115, 296]
		  FontName		  "Arial"
		  Value			  "n"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "3059"
		  Position		  [380, 224, 420, 246]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  From
		  Name			  "From <vc>2"
		  SID			  "3060"
		  Position		  [120, 88, 190, 102]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "shifting"
		}
		Block {
		  BlockType		  Integrator
		  Name			  "Integrator"
		  SID			  "3061"
		  Ports			  [1, 1]
		  Position		  [295, 100, 315, 120]
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "3062"
		  Position		  [135, 235, 165, 265]
		  X0			  "-0.1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "3063"
		  Position		  [170, 30, 200, 60]
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "3064"
		  Ports			  [2, 1]
		  Position		  [505, 109, 525, 136]
		  Inputs		  "*/"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  SID			  "3065"
		  Ports			  [2, 1]
		  Position		  [210, 271, 230, 289]
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "3066"
		  Ports			  [2, 1]
		  Position		  [250, 187, 280, 218]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "3067"
		  Ports			  [2, 1]
		  Position		  [440, 105, 460, 125]
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "3068"
		  Ports			  [2, 1]
		  Position		  [170, 210, 190, 230]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|+-"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "3069"
		  Position		  [305, 190, 335, 220]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "3070"
		  Position		  [450, 190, 480, 220]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch2"
		  SID			  "3071"
		  Position		  [235, 95, 265, 125]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch3"
		  SID			  "3072"
		  Position		  [115, 30, 145, 60]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  VariableTransportDelay
		  Name			  "Variable\nTransport Delay"
		  SID			  "3073"
		  Ports			  [2, 1]
		  Position		  [375, 137, 405, 168]
		  MaximumDelay		  "n"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "3074"
		  Position		  [550, 115, 570, 135]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "From <vc>2"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    Points		    [0, -15; -120, 0; 0, -35]
		    DstBlock		    "Switch3"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 15]
		    DstBlock		    "Switch2"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    Points		    [0, -30; -120, 0]
		    DstBlock		    "Switch3"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Switch2"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  Points		  [25, 0]
		  Branch {
		    DstBlock		    "Switch3"
		    DstPort		    3
		  }
		  Branch {
		    DstBlock		    "Switch2"
		    DstPort		    3
		  }
		}
		Line {
		  SrcBlock		  "Switch3"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch2"
		  SrcPort		  1
		  DstBlock		  "Integrator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  Points		  [0, -75]
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [0, -20]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [80, 0]
		    Branch {
		    Points		    [0, -10]
		    DstBlock		    "Switch1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Switch1"
		    DstPort		    2
		    }
		  }
		  Branch {
		    Points		    [0, -45]
		    DstBlock		    "Variable\nTransport Delay"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    Points		    [55, 0]
		    DstBlock		    "Switch"
		    DstPort		    3
		  }
		  Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    Points		    [0, -25]
		    Branch {
		    Points		    [0, -15; 175, 0]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		  }
		  Branch {
		    Points		    [0, 30]
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Integrator"
		  SrcPort		  1
		  Points		  [25, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 35]
		    DstBlock		    "Variable\nTransport Delay"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Variable\nTransport Delay"
		  SrcPort		  1
		  Points		  [15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "3075"
	      Position		      [515, 513, 545, 567]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "3076"
	      Position		      [810, 534, 835, 566]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch3"
	      SID		      "3077"
	      Position		      [400, 239, 430, 281]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch4"
	      SID		      "3078"
	      Position		      [445, 294, 475, 336]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "T>~0"
	      SID		      "3079"
	      Ports		      [2, 1]
	      Position		      [170, 12, 200, 43]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To Workspace"
	      SID		      "3080"
	      Ports		      [1]
	      Position		      [325, 181, 480, 199]
	      VariableName	      "cs_electric_launch_spd_probe"
	      MaxDataPoints	      "inf"
	      SampleTime	      "-1"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch\ndisengaged"
	      SID		      "3081"
	      Ports		      [2, 1]
	      Position		      [210, 467, 240, 498]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "key_on"
	      SID		      "3082"
	      Ports		      [0, 1]
	      Position		      [575, 29, 630, 61]
	      NamePlacement	      "alternate"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Repeating table"
	      MaskDescription	      "Repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table. Time values should be monotonically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "vc_key_on(:,1)|vc_key_on(:,2)"
	      Port {
		PortNumber		1
		Name			"ignition key is on"
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
	      }
	      System {
		Name			"key_on"
		Location		[5, 42, 410, 213]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "3083"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "3084"
		  Position		  [110, 60, 150, 80]
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "3085"
		  Position		  [210, 58, 250, 82]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "3086"
		  Position		  [285, 60, 305, 80]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  DstBlock		  "Fcn1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max_torque\n lookup"
	      SID		      "3087"
	      Position		      [115, 343, 145, 367]
	      NamePlacement	      "alternate"
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      Table		      "fc_max_trq*fc_trq_scale"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max_torque\n lookup1"
	      SID		      "3088"
	      Position		      [455, 393, 485, 417]
	      NamePlacement	      "alternate"
	      InputValues	      "mc_map_spd*mc_spd_scale"
	      Table		      "mc_max_trq*mc_trq_scale*mc_overtrq_factor"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "moving next\ntime"
	      SID		      "3089"
	      Ports		      [2, 1]
	      Position		      [210, 572, 240, 603]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "not\nmoving"
	      SID		      "3090"
	      Ports		      [2, 1]
	      Position		      [275, 522, 305, 553]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "repeated cycle:\n speed required at\nend of NEXT step"
	      SID		      "3091"
	      Ports		      [0, 1]
	      Position		      [70, 542, 105, 578]
	      FontName		      "Arial"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Forward looking repeating table"
	      MaskDescription	      "Forward looking repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table with a one time step forward offset. Time values should be monoto"
	      "nically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "cyc_mph(:,1)|cyc_mph(:,2)"
	      System {
		Name			"repeated cycle:\n speed required at\nend of NEXT step"
		Location		[57, 72, 432, 234]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "3092"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "3093"
		  Position		  [110, 25, 150, 45]
		  ForegroundColor	  "green"
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "3094"
		  Position		  [260, 33, 300, 57]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "3095"
		  Position		  [90, 85, 120, 115]
		  ForegroundColor	  "green"
		  X0			  "-0.1"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "3096"
		  Ports			  [2, 1]
		  Position		  [150, 62, 180, 93]
		  ForegroundColor	  "green"
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "3097"
		  Ports			  [2, 1]
		  Position		  [205, 26, 235, 59]
		  ForegroundColor	  "green"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "3098"
		  Position		  [335, 35, 355, 55]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -35]
		    DstBlock		    "Fcn1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0; 0, -15]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "spd>set point"
	      SID		      "3099"
	      Ports		      [2, 1]
	      Position		      [235, 52, 265, 83]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "w>idle"
	      SID		      "3100"
	      Ports		      [2, 1]
	      Position		      [275, 102, 305, 133]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "engine on"
	      SID		      "3101"
	      Position		      [875, 163, 905, 177]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "spd command\n (rad/s)"
	      SID		      "3102"
	      Position		      [865, 543, 895, 557]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "key on"
	      SID		      "3103"
	      Position		      [765, 38, 795, 52]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator12"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		Points			[0, 185]
		Branch {
		  Points		  [0, 165; -55, 0]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Branch {
		  DstBlock		  "Memory"
		  DstPort		  1
		}
	      }
	      Branch {
		DstBlock		"engine on"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "(--)2"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator12"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "max_torque\n lookup"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "(--)1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, -15]
		DstBlock		"Product"
		DstPort			2
	      }
	      Branch {
		DstBlock		"Relational\nOperator3"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant8"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator6"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Switch4"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch3"
	      SrcPort		      1
	      Points		      [70, 0]
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      DstBlock		      "T>~0"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <vc>2"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator7"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator7"
	      SrcPort		      1
	      Points		      [10, 0; 0, -80]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "trq req'd\nout of clutch\n(N*m)"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"T>~0"
		DstPort			1
	      }
	      Branch {
		Points			[0, 310]
		Branch {
		  Points		  [0, 120]
		  DstBlock		  "Product2"
		  DstPort		  2
		}
		Branch {
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator3"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator5"
	      SrcPort		      1
	      Points		      [0, -10]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator6"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [-15, 0; 0, -35]
	      Branch {
		DstBlock		"Logical\nOperator7"
		DstPort			2
	      }
	      Branch {
		DstBlock		"Logical\nOperator13"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator5"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator13"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <vc>4"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator13"
	      SrcPort		      1
	      Points		      [10, 0; 0, -125]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "(--)3"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator8"
	      SrcPort		      1
	      Points		      [0, -10]
	      DstBlock		      "Logical\nOperator12"
	      DstPort		      3
	    }
	    Line {
	      Name		      "ignition key is on"
	      Labels		      [0, 0]
	      SrcBlock		      "key_on"
	      SrcPort		      1
	      Points		      [85, 0]
	      Branch {
		DstBlock		"key on"
		DstPort			1
	      }
	      Branch {
		Points			[0, 105; 70, 0; 0, 20]
		DstBlock		"Logical\nOperator12"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator2"
	      SrcPort		      1
	      Points		      [105, 0; 0, 85]
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator9"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch4"
	      SrcPort		      1
	      Points		      [30, 0; 0, -100]
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Look-Up Table"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			2
	      }
	      Branch {
		DstBlock		"To Workspace"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant10"
	      SrcPort		      1
	      Points		      [0, 20; 25, 0]
	      Branch {
		Points			[0, 40]
		Branch {
		  DstBlock		  "Switch4"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 15]
		  DstBlock		  "Switch4"
		  DstPort		  2
		}
	      }
	      Branch {
		DstBlock		"Switch3"
		DstPort			2
	      }
	      Branch {
		Points			[0, -15]
		DstBlock		"Logical\nOperator11"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		DstBlock		"Switch3"
		DstPort			3
	      }
	      Branch {
		Points			[0, 55]
		DstBlock		"Logical\nOperator6"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator11"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <ess>"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	      Branch {
		Points			[0, -75]
		DstBlock		"Look-Up Table"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "(--)"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator4"
	      SrcPort		      1
	      Points		      [70, 0; 0, -275]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator10"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "fc_spd_out_r"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "spd command\n (rad/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant7"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "repeated cycle:\n speed required at\nend of NEXT step"
	      SrcPort		      1
	      Points		      [75, 0; 0, 20]
	      DstBlock		      "moving next\ntime"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      DstBlock		      "moving next\ntime"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\ndisengaged"
	      SrcPort		      1
	      Points		      [80, 0]
	      DstBlock		      "Logical\nOperator10"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "moving next\ntime"
	      SrcPort		      1
	      Points		      [80, 0]
	      DstBlock		      "Logical\nOperator10"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "not\nmoving"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator10"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "v_ave_req"
	      SrcPort		      1
	      DstBlock		      "not\nmoving"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      DstBlock		      "not\nmoving"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nstate"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "Subsystem"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      Points		      [50, 0]
	      DstBlock		      "Logical\nOperator6"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "max_torque\n lookup1"
	      SrcPort		      1
	      DstBlock		      "Product3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"max_torque\n lookup1"
		DstPort			1
	      }
	      Branch {
		Points			[0, 15]
		DstBlock		"Product3"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator6"
	      SrcPort		      1
	      DstBlock		      "Manual \nSwitch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Manual \nSwitch"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      5
	    }
	    Line {
	      SrcBlock		      "Constant9"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Manual \nSwitch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "w>idle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "w>idle"
	      SrcPort		      1
	      Points		      [0, -65]
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "spd req'd\nout of clutch\n(N*m)1"
	      SrcPort		      1
	      Points		      [35, 0]
	      Branch {
		Points			[0, 245]
		Branch {
		  DstBlock		  "max_torque\n lookup"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 80; 230, 0]
		  Branch {
		    DstBlock		    "Product2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -30]
		    DstBlock		    "Gain1"
		    DstPort		    1
		  }
		}
	      }
	      Branch {
		DstBlock		"w>idle"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant11"
	      SrcPort		      1
	      DstBlock		      "spd>set point"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "spd>set point"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator4"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "T>~0"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <vc>1"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	      Branch {
		DstBlock		"spd>set point"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "From <vc>3"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      Points		      [70, 0; 0, 15]
	      DstBlock		      "Relational\nOperator6"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Subsystem"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"Relational\nOperator4"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Relational\nOperator6"
		DstPort			1
	      }
	    }
	    Annotation {
	      SID		      "3104"
	      Name		      "engine not suppressed if \ness insufficient "
	      Position		      [740, 494]
	    }
	    Annotation {
	      SID		      "3105"
	      Name		      "engine not \nsuppressed for\nelectric launch"
	      Position		      [423, 147]
	    }
	    Annotation {
	      SID		      "3106"
	      Name		      "engine not shut off\n rather than idle"
	      Position		      [496, 72]
	    }
	    Annotation {
	      SID		      "3107"
	      Name		      "engine on if engine on \npreviously and engine \nnot warm"
	      Position		      [578, 374]
	    }
	    Annotation {
	      SID		      "3108"
	      Name		      "engine not shut \ndown during shifts"
	      Position		      [666, 217]
	    }
	    Annotation {
	      SID		      "3109"
	      Name		      "engine not suppressed\nif mc insufficient "
	      Position		      [800, 394]
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "front and rear\nbrake controller\n(achievable)"
	  SID			  "3110"
	  Ports			  [6, 2]
	  Position		  [195, 456, 230, 584]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/front and rear\nbrake controller\n(achievable)"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "motor controller\nlogic"
	  SID			  "3111"
	  Ports			  [4, 1]
	  Position		  [670, 30, 700, 150]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "motor controller\nlogic"
	    Location		    [87, 76, 769, 527]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "bus voltage"
	      SID		      "3112"
	      Position		      [40, 30, 60, 50]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd input\npower (W)"
	      SID		      "3113"
	      Position		      [40, 160, 60, 180]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd output\nspd (rad/s)"
	      SID		      "3114"
	      Position		      [40, 280, 60, 300]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "3115"
	      Position		      [40, 385, 60, 405]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs"
	      SID		      "3116"
	      Position		      [205, 123, 235, 147]
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs1"
	      SID		      "3117"
	      Position		      [105, 278, 135, 302]
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "3118"
	      Ports		      []
	      Position		      [590, 385, 646, 425]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[263, 139, 778, 219]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "3119"
		  Name			  "This block models a motor/controller's logic, modulating the power input requirement as follows:\n- enfo"
		  "rcing the maximum current limit of the motor/controller\n- shutting the motor off if the average speed over the ti"
		  "me step ==0\n- shutting the motor off if the transmission is shifting."
		  Position		  [257, 40]
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "3120"
	      Position		      [95, 79, 165, 101]
	      FontName		      "Arial"
	      Value		      "mc_max_crrnt"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "3121"
	      Position		      [140, 348, 175, 372]
	      FontName		      "Arial"
	      Value		      "0.001"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "3122"
	      Position		      [500, 232, 520, 258]
	      BlockMirror	      on
	      FontName		      "Arial"
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <sdo>"
	      SID		      "3123"
	      Position		      [555, 24, 645, 46]
	      GotoTag		      "mc_crrnt_limited"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "3124"
	      Ports		      [1, 1]
	      Position		      [434, 240, 466, 275]
	      BlockRotation	      270
	      NamePlacement	      "alternate"
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "3125"
	      Position		      [115, 25, 145, 55]
	      X0		      "ess_module_num*mean(ess_voc(1,:))"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      SID		      "3126"
	      Ports		      [2, 1]
	      Position		      [270, 37, 300, 68]
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      SID		      "3127"
	      Ports		      [2, 1]
	      Position		      [210, 36, 230, 54]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "3128"
	      Ports		      [2, 1]
	      Position		      [230, 282, 260, 313]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "3129"
	      Ports		      [2, 1]
	      Position		      [490, 17, 520, 48]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Sign"
	      SID		      "3130"
	      Ports		      [1, 1]
	      Position		      [270, 157, 300, 183]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Sign"
	      MaskDescription	      "y = sign(x)"
	      MaskHelp		      "Sign Function:\\n\\t\\t\\ty = 1 if x > 0\\n\\t\\t\\ty = 0 if x = 0\\n\\t\\t\\ty = -1 if x < 0"
	      MaskDisplay	      "plot(-50,-50,50,50,[-50,50],[0,0],[0,0],[-50,50],[-40,0],[-30,-30],[0,40],[30,30])"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Sign"
		Location		[159, 417, 467, 586]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "3131"
		  Position		  [35, 30, 55, 50]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "3132"
		  Position		  [65, 105, 85, 125]
		  Value			  "0"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "3133"
		  Ports			  [2, 1]
		  Position		  [140, 32, 170, 63]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "3134"
		  Ports			  [2, 1]
		  Position		  [140, 92, 170, 123]
		  Operator		  "<"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "3135"
		  Ports			  [2, 1]
		  Position		  [215, 64, 235, 91]
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "3136"
		  Position		  [265, 70, 285, 90]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 60]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, -60]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  Points		  [10, 0; 0, -25]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  Points		  [10, 0; 0, 20]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "3137"
	      Position		      [495, 180, 525, 210]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "current-limited\npower"
	      SID		      "3138"
	      Ports		      [2, 1]
	      Position		      [365, 51, 385, 69]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "true if motor\nshould be\nshut down"
	      SID		      "3139"
	      Ports		      [2, 1]
	      Position		      [385, 292, 415, 323]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd input\npower (W)1"
	      SID		      "3140"
	      Position		      [590, 185, 610, 205]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Abs1"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "req'd output\nspd (rad/s)"
	      SrcPort		      1
	      DstBlock		      "Abs1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [10, 0; 0, -55]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "true if motor\nshould be\nshut down"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Goto <sdo>"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		Points			[0, -15]
		DstBlock		"Relational\nOperator2"
		DstPort			2
	      }
	      Branch {
		DstBlock		"current-limited\npower"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, -20]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"MinMax"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "current-limited\npower"
	      SrcPort		      1
	      Points		      [60, 0; 0, 125]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "req'd input\npower (W)1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Sign"
	      SrcPort		      1
	      Points		      [20, 0; 0, -105]
	      DstBlock		      "current-limited\npower"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Abs"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "req'd input\npower (W)"
	      SrcPort		      1
	      Points		      [105, 0]
	      Branch {
		DstBlock		"Sign"
		DstPort			1
	      }
	      Branch {
		Points			[0, -35]
		DstBlock		"Abs"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [20, 0; 0, -40]
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "bus voltage"
	      SrcPort		      1
	      DstBlock		      "Memory"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "true if motor\nshould be\nshut down"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [0, -40]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      Points		      [290, 0; 0, -80]
	      DstBlock		      "true if motor\nshould be\nshut down"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "parallel clutch\ncontrol"
	  SID			  "3141"
	  Ports			  [4, 1]
	  Position		  [715, 240, 750, 320]
	  ForegroundColor	  "gray"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "parallel clutch\ncontrol"
	    Location		    [87, 106, 1000, 728]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "82"
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "3142"
	      Position		      [30, 18, 60, 32]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_in_r"
	      SID		      "3143"
	      Position		      [30, 58, 60, 72]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_in_r"
	      SID		      "3144"
	      Position		      [25, 168, 55, 182]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "engine on"
	      SID		      "3145"
	      Position		      [30, 388, 60, 402]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "3146"
	      Ports		      []
	      Position		      [835, 565, 891, 605]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[315, 744, 773, 944]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "3147"
		  Name			  "This clutch control block determines the clutch state given the req'd clutch output torque \nand speed ("
		  "labelled as gearbox input torque and speed), and the gear number history.\n                          conditions   "
		  "                                                                    clutch state\ngear is being shifted OR (trq <~"
		  " 0 AND (engine is                                     1 == disengaged\nclutched to avoid compression braking OR sp"
		  "d < idle))                                                              \n\n(trq >~ 0) AND (spd < launch speed) AN"
		  "D clutch                                       2 == slipping     \nwas not engaged during previous time step      "
		  "                                                           \n\nneither of above sets of conditions are met        "
		  "                                  3 == engaged\n\nBut the clutch is always disengaged when the engine is off or wa"
		  "s off within the past 0.5 s."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Clock
	      Name		      "Clock"
	      SID		      "3148"
	      Position		      [40, 535, 60, 555]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "3149"
	      Position		      [145, 83, 180, 107]
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "3150"
	      Position		      [145, 124, 225, 146]
	      Value		      "vc_clutch_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "3151"
	      Position		      [145, 189, 225, 211]
	      Value		      "vc_idle_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "3152"
	      Position		      [145, 255, 180, 275]
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "3153"
	      Position		      [145, 319, 225, 341]
	      Value		      "vc_launch_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "3154"
	      Position		      [570, 355, 605, 375]
	      BlockMirror	      on
	      Value		      "2.5"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "3155"
	      Position		      [790, 175, 810, 195]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      SID		      "3156"
	      Position		      [660, 110, 720, 140]
	      Expr		      "u[1]+2*u[2]*(1-u[1])*(1-u[3])+3*u[3]*(1-u[1])"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "3157"
	      Ports		      [2, 1]
	      Position		      [380, 67, 410, 98]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "3158"
	      Ports		      [2, 1]
	      Position		      [315, 127, 345, 158]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Manual Switch"
	      SID		      "3159"
	      Ports		      [2, 1]
	      Position		      [410, 387, 440, 423]
	      ForegroundColor	      "gray"
	      SourceBlock	      "simulink3/Nonlinear/Manual Switch"
	      SourceType	      "Manual Switch"
	      sw		      "1"
	      action		      "0"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "3160"
	      Position		      [570, 300, 600, 330]
	      BlockMirror	      on
	      X0		      "1+(2*(cyc_mph(1,2)>0))"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory1"
	      SID		      "3161"
	      Position		      [170, 415, 200, 445]
	      X0		      "cyc_mph(1,2)>0"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory2"
	      SID		      "3162"
	      Position		      [170, 565, 200, 595]
	      X0		      "-1"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "3163"
	      Ports		      [3, 1]
	      Position		      [590, 107, 625, 143]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "3164"
	      Ports		      [2, 1]
	      Position		      [300, 57, 330, 88]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "3165"
	      Ports		      [2, 1]
	      Position		      [260, 177, 290, 208]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "3166"
	      Ports		      [2, 1]
	      Position		      [260, 242, 290, 273]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      SID		      "3167"
	      Ports		      [2, 1]
	      Position		      [260, 307, 290, 338]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      SID		      "3168"
	      Ports		      [2, 1]
	      Position		      [235, 537, 265, 568]
	      Inputs		      "+-"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "3169"
	      Position		      [790, 120, 820, 150]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "3170"
	      Position		      [330, 400, 360, 430]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      TransportDelay
	      Name		      "Transport\nDelay"
	      SID		      "3171"
	      Ports		      [1, 1]
	      Position		      [170, 475, 200, 505]
	      DelayTime		      "0.2"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\ndisengaged"
	      SID		      "3172"
	      Ports		      [2, 1]
	      Position		      [450, 17, 480, 48]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nengaged"
	      SID		      "3173"
	      Ports		      [2, 1]
	      Position		      [520, 117, 550, 148]
	      Operator		      "NOR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping"
	      SID		      "3174"
	      Ports		      [3, 1]
	      Position		      [380, 254, 410, 286]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping1"
	      SID		      "3175"
	      Ports		      [2, 1]
	      Position		      [235, 386, 265, 419]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping2"
	      SID		      "3176"
	      Ports		      [2, 1]
	      Position		      [235, 466, 265, 499]
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch was NOT\nfully engaged\nduring last time step"
	      SID		      "3177"
	      Ports		      [2, 1]
	      Position		      [475, 305, 510, 340]
	      BlockMirror	      on
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "gearbox speed\nestimator"
	      SID		      "3178"
	      Ports		      [1, 1]
	      Position		      [80, 160, 110, 190]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"gearbox speed\nestimator"
		Location		[224, 217, 812, 726]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_in_r\nif no gear change"
		  SID			  "3179"
		  Position		  [45, 18, 75, 32]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "3180"
		  Ports			  []
		  Position		  [515, 345, 571, 385]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [497, 485, 832, 570]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "3181"
		    Name		    "The requested engine speed is replaced by an estimate of the\nengine's previous speed whenever the ve"
		    "hicle missed the trace\n by more than 1 mph on the last time step."
		    Position		    [167, 41]
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "3182"
		  Position		  [165, 240, 185, 260]
		  BlockMirror		  on
		  Value			  "eps"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "3183"
		  Position		  [315, 165, 335, 185]
		  BlockMirror		  on
		  Value			  "0"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "3184"
		  Position		  [230, 360, 250, 380]
		  BlockMirror		  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "3185"
		  Position		  [230, 460, 250, 480]
		  BlockMirror		  on
		  Value			  "0.11"
		}
		Block {
		  BlockType		  From
		  Name			  "From"
		  SID			  "3186"
		  Position		  [195, 40, 285, 70]
		  BlockMirror		  on
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "gb_spd_in_a"
		}
		Block {
		  BlockType		  From
		  Name			  "From <cyc>"
		  SID			  "3187"
		  Position		  [30, 304, 120, 336]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "cyc_mph_r"
		}
		Block {
		  BlockType		  From
		  Name			  "From <veh>"
		  SID			  "3188"
		  Position		  [30, 99, 85, 131]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "mpha"
		}
		Block {
		  BlockType		  From
		  Name			  "From <wh>/\ntire slip model (m/s)"
		  SID			  "3189"
		  Position		  [30, 184, 120, 216]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "veh_spd_a_rec"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  SID			  "3190"
		  Position		  [150, 97, 190, 133]
		  Gain			  "0.447"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical"
		  SID			  "3191"
		  Ports			  [2, 1]
		  Position		  [375, 317, 405, 348]
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "3192"
		  Position		  [370, 115, 400, 145]
		  X0			  "cyc_mph(1,2)*0.447/wh_radius*fd_ratio*gb_ratio(gb_num_init)"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "3193"
		  Position		  [310, 310, 340, 340]
		  X0			  "1"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "3194"
		  Ports			  [3, 1]
		  Position		  [215, 99, 245, 131]
		  Inputs		  "**/"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational"
		  SID			  "3195"
		  Ports			  [2, 1]
		  Position		  [225, 307, 255, 338]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational1"
		  SID			  "3196"
		  Ports			  [2, 1]
		  Position		  [225, 412, 255, 443]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "3197"
		  Ports			  [2, 1]
		  Position		  [160, 192, 190, 223]
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "3198"
		  Ports			  [2, 1]
		  Position		  [160, 297, 190, 328]
		  Inputs		  "-+"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "3199"
		  Position		  [310, 110, 340, 140]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "3200"
		  Position		  [445, 120, 475, 150]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "dt"
		  SID			  "3201"
		  Ports			  [0, 1]
		  Position		  [165, 408, 185, 432]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "dt"
		    Location		    [240, 561, 480, 665]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "3202"
		    Position		    [25, 25, 45, 45]
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "3203"
		    Position		    [75, 53, 105, 77]
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum4"
		    SID			    "3204"
		    Ports		    [2, 1]
		    Position		    [130, 27, 160, 58]
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "3205"
		    Position		    [185, 38, 215, 52]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "Sum4"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Sum4"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum4"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  SID			  "3206"
		  Position		  [545, 128, 575, 142]
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "dt"
		  SrcPort		  1
		  DstBlock		  "Relational1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical"
		  SrcPort		  1
		  Points		  [10, 0; 0, -200]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Logical"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational1"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From"
		  SrcPort		  1
		  Points		  [0, 50]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gb_spd_in_r\nif no gear change"
		  SrcPort		  1
		  Points		  [350, 0]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Relational"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <veh>"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    Points		    [0, 190]
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Gain"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "From <cyc>"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [0, -5]
		  DstBlock		  "Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  Labels		  [1, 0]
		  SrcBlock		  "From <wh>/\ntire slip model (m/s)"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    Points		    [0, -25; 155, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Product"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "clutch\nstate"
	      SID		      "3207"
	      Position		      [855, 128, 885, 142]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      Points		      [-15, 0; 0, -40]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      Points		      [15, 0; 0, -45]
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gb_trq_in_r"
	      SrcPort		      1
	      Points		      [70, 0]
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	      Branch {
		Points			[0, 185]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [90, 0; 0, -15]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      SrcPort		      1
	      Points		      [-120, 0; 0, -45]
	      DstBlock		      "clutch\nslipping"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      Points		      [-30, 0; 0, -35]
	      DstBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      Points		      [30, 0; 0, -55]
	      DstBlock		      "clutch\nslipping"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping"
	      SrcPort		      1
	      Points		      [80, 0; 0, -95]
	      Branch {
		Points			[80, 0]
		DstBlock		"Mux"
		DstPort			2
	      }
	      Branch {
		Points			[0, -35]
		DstBlock		"clutch\nengaged"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "clutch\nslipping"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\ndisengaged"
	      SrcPort		      1
	      Points		      [10, 0; 0, 40]
	      Branch {
		Points			[80, 0]
		DstBlock		"Mux"
		DstPort			1
	      }
	      Branch {
		Points			[0, 50]
		DstBlock		"clutch\nengaged"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "clutch\nengaged"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      DstBlock		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "engine on"
	      SrcPort		      1
	      Points		      [80, 0]
	      Branch {
		DstBlock		"clutch\nslipping1"
		DstPort			1
	      }
	      Branch {
		Points			[0, 35]
		Branch {
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 30]
		  Branch {
		    Points		    [0, 30]
		    DstBlock		    "Transport\nDelay"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [75, 0]
		    DstBlock		    "clutch\nslipping2"
		    DstPort		    1
		  }
		}
	      }
	      Branch {
		Points			[0, -20; 250, 0]
		DstBlock		"Manual Switch"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Memory1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "clutch\nslipping1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping1"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Transport\nDelay"
	      SrcPort		      1
	      DstBlock		      "clutch\nslipping2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping2"
	      SrcPort		      1
	      Points		      [25, 0; 0, -60]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Clock"
	      SrcPort		      1
	      Points		      [80, 0]
	      Branch {
		DstBlock		"Sum"
		DstPort			1
	      }
	      Branch {
		Points			[0, 35]
		DstBlock		"Memory2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Memory2"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "Switch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gb_spd_in_r"
	      SrcPort		      1
	      DstBlock		      "gearbox speed\nestimator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gearbox speed\nestimator"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[105, 0; 0, 10]
		DstBlock		"Relational\nOperator1"
		DstPort			1
	      }
	      Branch {
		Points			[0, 140]
		DstBlock		"Relational\nOperator3"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "Manual Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Manual Switch"
	      SrcPort		      1
	      Points		      [315, 0; 0, -270]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"clutch\nstate"
		DstPort			1
	      }
	      Branch {
		Points			[0, 180]
		DstBlock		"Memory"
		DstPort			1
	      }
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "pre-TX parallel\ngearbox control"
	  SID			  "3208"
	  Ports			  [4, 3]
	  Position		  [300, 42, 335, 143]
	  FontName		  "Arial"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "pre-TX parallel\ngearbox control"
	    Location		    [12, 74, 1189, 776]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "77"
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_out_r"
	      SID		      "3209"
	      Position		      [45, 75, 65, 95]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_out_r"
	      SID		      "3210"
	      Position		      [45, 320, 65, 340]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "prev.\nPout/Pin"
	      SID		      "3211"
	      Position		      [45, 175, 65, 195]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "tires are at\ntraction limit"
	      SID		      "3212"
	      Position		      [45, 20, 65, 40]
	      FontName		      "Arial"
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "3213"
	      Ports		      []
	      Position		      [890, 605, 946, 645]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[229, 259, 687, 388]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "3214"
		  Name			  "This gearbox control block computes the current gear number given the gearbox's\nreq'd output torque and"
		  " speed and an estimate its efficiency.  Upshifts occur, given a\ncertain engine speed,  when the estimated engine "
		  "load falls below the upshift curve\nin engine speed/load space, and downshifts likewise occur when estimated engin"
		  "e\nload rises above the downshift curve.  Separate upshift and downshift curves are\ndefined for each gear.  An up"
		  "shift may not be immediately followed by a downshift.\nIf the tires are about to slip, don't upshift unless the en"
		  "gine would be at max. speed.\nEnforce this rule by setting the load to 1 when the tires are about to slip."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "3215"
	      Position		      [330, 40, 350, 60]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "3216"
	      Position		      [525, 200, 545, 220]
	      BlockMirror	      on
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant14"
	      SID		      "3217"
	      Position		      [445, 608, 540, 622]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant15"
	      SID		      "3218"
	      Position		      [375, 473, 470, 487]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "3219"
	      Position		      [525, 285, 545, 305]
	      BlockMirror	      on
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      SID		      "3220"
	      Ports		      [1, 2]
	      Position		      [715, 461, 720, 499]
	      BackgroundColor	      "black"
	      ShowName		      off
	      Outputs		      "2"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      SID		      "3221"
	      Position		      [545, 580, 670, 600]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <logic>2"
	      SID		      "3222"
	      Position		      [25, 534, 130, 566]
	      ForegroundColor	      "red"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "v_req_limited"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      SID		      "3223"
	      Position		      [545, 640, 670, 660]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From2"
	      SID		      "3224"
	      Position		      [485, 500, 610, 520]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From3"
	      SID		      "3225"
	      Position		      [485, 525, 610, 545]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From4"
	      SID		      "3226"
	      Position		      [485, 435, 610, 455]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      SID		      "3227"
	      Position		      [470, 302, 495, 328]
	      FontName		      "Arial"
	      Gain		      "-1"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto"
	      SID		      "3228"
	      Position		      [250, 525, 370, 545]
	      NamePlacement	      "alternate"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto1"
	      SID		      "3229"
	      Position		      [250, 549, 370, 571]
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto4"
	      SID		      "3230"
	      Position		      [810, 370, 945, 390]
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto5"
	      SID		      "3231"
	      Position		      [820, 185, 930, 205]
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto6"
	      SID		      "3232"
	      Position		      [830, 260, 940, 280]
	      NamePlacement	      "alternate"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "3233"
	      Ports		      [2, 1]
	      Position		      [630, 497, 635, 548]
	      ShowName		      off
	      Inputs		      "2"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      SID		      "3234"
	      Ports		      [2, 1]
	      Position		      [225, 87, 255, 118]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      RateLimiter
	      Name		      "Rate Limiter"
	      SID		      "3235"
	      Position		      [510, 367, 540, 393]
	      BlockMirror	      on
	      RisingSlewLimit	      "1/(gb_shift_delay+eps)"
	      FallingSlewLimit	      "-1/(gb_shift_delay+eps)"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "3236"
	      Ports		      [1, 1]
	      Position		      [80, 175, 110, 195]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "0.2"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation1"
	      SID		      "3237"
	      Ports		      [1, 1]
	      Position		      [710, 186, 730, 204]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "gb_gears_num"
	      LowerLimit	      "1"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Speed Dependent Shifting"
	      SID		      "3238"
	      Ports		      [1, 2]
	      Position		      [175, 522, 205, 573]
	      SourceBlock	      "lib_controls/SubSystem/Speed Dependent Shifting"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "off"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "3239"
	      Position		      [325, 80, 355, 110]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "3240"
	      Position		      [520, 235, 550, 265]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch2"
	      SID		      "3241"
	      Position		      [520, 155, 550, 185]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch3"
	      SID		      "3242"
	      Position		      [690, 600, 720, 630]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch4"
	      SID		      "3243"
	      Position		      [660, 465, 690, 495]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To WS"
	      SID		      "3244"
	      Ports		      [1]
	      Position		      [360, 339, 400, 361]
	      BackgroundColor	      "red"
	      VariableName	      "spd"
	      MaxDataPoints	      "inf"
	      SampleTime	      "-1"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "allow downshift?"
	      SID		      "3245"
	      Ports		      [1, 1]
	      Position		      [420, 232, 450, 268]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"allow downshift?"
		Location		[328, 265, 817, 480]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gearnum"
		  SID			  "3246"
		  Position		  [35, 35, 55, 55]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  SID			  "3247"
		  Ports			  [2, 1]
		  Position		  [375, 43, 405, 67]
		  FontName		  "Arial"
		  Operator		  "NOR"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "3248"
		  Position		  [145, 60, 180, 80]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "3249"
		  Position		  [145, 105, 180, 125]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "3250"
		  Ports			  [2, 1]
		  Position		  [225, 38, 255, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator2"
		  SID			  "3251"
		  Ports			  [2, 1]
		  Position		  [225, 98, 255, 122]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  Outport
		  Name			  "allow shift"
		  SID			  "3252"
		  Position		  [445, 45, 465, 65]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator2"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [0, 30; -60, 0]
		    DstBlock		    "Memory1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [15, 0; 0, -15]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gearnum"
		  SrcPort		  1
		  Points		  [45, 0]
		  Branch {
		    Points		    [0, 25]
		    Branch {
		    Points		    [0, 35]
		    DstBlock		    "Relational\nOperator2"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  DstBlock		  "allow shift"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "allow upshift?"
	      SID		      "3253"
	      Ports		      [4, 1]
	      Position		      [420, 152, 450, 188]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"allow upshift?"
		Location		[132, 265, 847, 659]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gearnum"
		  SID			  "3254"
		  Position		  [35, 25, 55, 45]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_trq_out_r"
		  SID			  "3255"
		  Position		  [35, 145, 55, 165]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_out_r"
		  SID			  "3256"
		  Position		  [35, 105, 55, 125]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "prev Pout/Pin"
		  SID			  "3257"
		  Position		  [35, 185, 55, 205]
		  Port			  "4"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES1"
		  SID			  "3258"
		  Ports			  []
		  Position		  [645, 340, 701, 380]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES1"
		    Location		    [229, 259, 576, 405]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "3259"
		    Name		    "This block prevents an upshift if it the engine is not on and\nthe upshift would make the motor power"
		    " low enough that it\ncould not provide the required input power.  However, an upshift\nis allowed if to stay in "
		    "the current gear would put the motor\nbeyond 95% of its maximum speed.\n\nThis block is to be used in pretransmi"
		    "ssion parallel hybrids\n(where the engine and motor torques are combined on the\nengine side of the transmission"
		    ") ONLY."
		    Position		    [172, 12]
		    VerticalAlignment	    "top"
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "3260"
		  Position		  [110, 75, 130, 95]
		  BlockMirror		  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "3261"
		  Position		  [100, 347, 375, 373]
		  Value			  "max(mc_map_spd)*mc_spd_scale/tc_mc_to_fc_ratio*.95"
		}
		Block {
		  BlockType		  From
		  Name			  "From <vc>"
		  SID			  "3262"
		  Position		  [15, 232, 80, 258]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "engine_on"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator1"
		  SID			  "3263"
		  Ports			  [3, 1]
		  Position		  [615, 53, 645, 97]
		  Operator		  "OR"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "3264"
		  Position		  [125, 230, 155, 260]
		  X0			  "1"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "3265"
		  Ports			  [2, 1]
		  Position		  [310, 37, 340, 68]
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "3266"
		  Ports			  [2, 1]
		  Position		  [540, 42, 570, 73]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "3267"
		  Ports			  [2, 1]
		  Position		  [395, 287, 425, 318]
		  Operator		  ">"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation"
		  SID			  "3268"
		  Ports			  [1, 1]
		  Position		  [165, 29, 205, 61]
		  InputPortMap		  "u0"
		  FontName		  "Arial"
		  UpperLimit		  "gb_gears_num"
		  LowerLimit		  "1"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "3269"
		  Ports			  [2, 1]
		  Position		  [105, 27, 135, 58]
		}
		Block {
		  BlockType		  Product
		  Name			  "est. req'd\ninput pwr\n(W)"
		  SID			  "3270"
		  Ports			  [3, 1]
		  Position		  [310, 109, 340, 141]
		  Inputs		  "**/"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "gear ratio"
		  SID			  "3271"
		  Position		  [245, 33, 275, 57]
		  FontName		  "Arial"
		  InputValues		  "[1:length(gb_ratio)]"
		  Table			  "gb_ratio"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "gear ratio1"
		  SID			  "3272"
		  Position		  [250, 258, 280, 282]
		  FontName		  "Arial"
		  InputValues		  "[1:length(gb_ratio)]"
		  Table			  "gb_ratio"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "motor\ntorque\ncapability"
		  SID			  "3273"
		  Position		  [380, 45, 410, 65]
		  FontName		  "Arial"
		  InputValues		  "mc_map_spd*mc_spd_scale"
		  Table			  "mc_max_trq*mc_trq_scale*mc_overtrq_factor+eps"
		}
		Block {
		  BlockType		  Product
		  Name			  "motor (input to gb)\npwr capability"
		  SID			  "3274"
		  Ports			  [2, 1]
		  Position		  [455, 32, 485, 63]
		}
		Block {
		  BlockType		  Product
		  Name			  "req'd input spd\nif no gear change"
		  SID			  "3275"
		  Ports			  [2, 1]
		  Position		  [310, 276, 340, 309]
		}
		Block {
		  BlockType		  Outport
		  Name			  "allow shift"
		  SID			  "3276"
		  Position		  [675, 65, 695, 85]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [430, 0; 0, -170]
		  DstBlock		  "Logical\nOperator1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <vc>"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical\nOperator1"
		  SrcPort		  1
		  DstBlock		  "allow shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev Pout/Pin"
		  SrcPort		  1
		  Points		  [225, 0; 0, -60]
		  DstBlock		  "est. req'd\ninput pwr\n(W)"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "gb_trq_out_r"
		  SrcPort		  1
		  Points		  [215, 0; 0, -30]
		  DstBlock		  "est. req'd\ninput pwr\n(W)"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "est. req'd\ninput pwr\n(W)"
		  SrcPort		  1
		  Points		  [175, 0; 0, -60]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "motor (input to gb)\npwr capability"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    Points		    [0, -15]
		    DstBlock		    "motor (input to gb)\npwr capability"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "motor\ntorque\ncapability"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "motor\ntorque\ncapability"
		  SrcPort		  1
		  DstBlock		  "motor (input to gb)\npwr capability"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "gear ratio"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation"
		  SrcPort		  1
		  DstBlock		  "gear ratio"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Saturation"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "gear ratio1"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "req'd input spd\nif no gear change"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gearnum"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 235]
		    DstBlock		    "gear ratio1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "gb_spd_out_r"
		  SrcPort		  1
		  Points		  [150, 0]
		  Branch {
		    Points		    [85, 0]
		    Branch {
		    DstBlock		    "est. req'd\ninput pwr\n(W)"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		  }
		  Branch {
		    Points		    [0, 185]
		    DstBlock		    "req'd input spd\nif no gear change"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  Points		  [170, 0]
		  DstBlock		  "Logical\nOperator1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "req'd input spd\nif no gear change"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "current\ngear\nnumber"
	      SID		      "3277"
	      Ports		      [2, 1]
	      Position		      [655, 177, 675, 213]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "delta\ngear\nnumber"
	      SID		      "3278"
	      Position		      [585, 189, 615, 221]
	      FontName		      "Arial"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "downshift \ncommand"
	      SID		      "3279"
	      Ports		      [3, 1]
	      Position		      [420, 289, 450, 341]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"downshift \ncommand"
		Location		[431, 372, 906, 667]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "3280"
		  Position		  [45, 98, 75, 112]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "3281"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "3282"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "3283"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "3284"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "3285"
		  Ports			  [1, 1]
		  Position		  [240, 100, 270, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_dnshift_spd|gb_dnshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "3286"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "3287"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "3288"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "3289"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [55, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "engine\ntorque\ncapability"
	      SID		      "3290"
	      Position		      [185, 205, 215, 225]
	      BlockRotation	      270
	      FontName		      "Arial"
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      Table		      "fc_max_trq*fc_trq_scale+eps"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "gb_spd_in_r"
	      SID		      "3291"
	      Ports		      [2, 1]
	      Position		      [150, 323, 170, 347]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio"
	      SID		      "3292"
	      Position		      [400, 368, 430, 392]
	      BlockMirror	      on
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      Table		      "gb_ratio"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio1"
	      SID		      "3293"
	      Position		      [770, 183, 800, 207]
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      Table		      "gb_ratio"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "gearbox speed\nestimator"
	      SID		      "3294"
	      Ports		      [1, 1]
	      Position		      [275, 320, 305, 350]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"gearbox speed\nestimator"
		Location		[224, 217, 812, 726]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_in_r\nif no gear change"
		  SID			  "3295"
		  Position		  [45, 18, 75, 32]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "3296"
		  Ports			  []
		  Position		  [515, 345, 571, 385]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [497, 485, 832, 570]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "3297"
		    Name		    "The requested engine speed is replaced by an estimate of the\nengine's previous speed whenever the ve"
		    "hicle missed the trace\n by more than 1 mph on the last time step."
		    Position		    [167, 41]
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "3298"
		  Position		  [165, 240, 185, 260]
		  BlockMirror		  on
		  Value			  "eps"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "3299"
		  Position		  [315, 165, 335, 185]
		  BlockMirror		  on
		  Value			  "0"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "3300"
		  Position		  [230, 360, 250, 380]
		  BlockMirror		  on
		  Value			  "2"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "3301"
		  Position		  [230, 460, 250, 480]
		  BlockMirror		  on
		  Value			  "0.11"
		}
		Block {
		  BlockType		  From
		  Name			  "From"
		  SID			  "3302"
		  Position		  [195, 40, 285, 70]
		  BlockMirror		  on
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "gb_spd_in_a"
		}
		Block {
		  BlockType		  From
		  Name			  "From <cyc>"
		  SID			  "3303"
		  Position		  [30, 304, 120, 336]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "cyc_mph_r"
		}
		Block {
		  BlockType		  From
		  Name			  "From <veh>"
		  SID			  "3304"
		  Position		  [30, 99, 85, 131]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "mpha"
		}
		Block {
		  BlockType		  From
		  Name			  "From <wh>/\ntire slip model (m/s)"
		  SID			  "3305"
		  Position		  [30, 184, 120, 216]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "veh_spd_a_rec"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  SID			  "3306"
		  Position		  [150, 97, 190, 133]
		  Gain			  "0.447"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical"
		  SID			  "3307"
		  Ports			  [2, 1]
		  Position		  [375, 317, 405, 348]
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "3308"
		  Position		  [370, 110, 400, 140]
		  X0			  "cyc_mph(1,2)*0.447/wh_radius*fd_ratio*gb_ratio(gb_num_init)"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "3309"
		  Position		  [310, 310, 340, 340]
		  X0			  "1"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "3310"
		  Ports			  [3, 1]
		  Position		  [215, 99, 245, 131]
		  Inputs		  "**/"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational"
		  SID			  "3311"
		  Ports			  [2, 1]
		  Position		  [225, 307, 255, 338]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational1"
		  SID			  "3312"
		  Ports			  [2, 1]
		  Position		  [225, 412, 255, 443]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "3313"
		  Ports			  [2, 1]
		  Position		  [160, 192, 190, 223]
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "3314"
		  Ports			  [2, 1]
		  Position		  [160, 297, 190, 328]
		  Inputs		  "-+"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "3315"
		  Position		  [310, 110, 340, 140]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "3316"
		  Position		  [445, 120, 475, 150]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "dt"
		  SID			  "3317"
		  Ports			  [0, 1]
		  Position		  [165, 408, 185, 432]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "dt"
		    Location		    [240, 561, 480, 665]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "3318"
		    Position		    [25, 25, 45, 45]
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "3319"
		    Position		    [75, 53, 105, 77]
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum4"
		    SID			    "3320"
		    Ports		    [2, 1]
		    Position		    [130, 27, 160, 58]
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "3321"
		    Position		    [185, 38, 215, 52]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "Sum4"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Sum4"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum4"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  SID			  "3322"
		  Position		  [545, 128, 575, 142]
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "dt"
		  SrcPort		  1
		  DstBlock		  "Relational1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical"
		  SrcPort		  1
		  Points		  [10, 0; 0, -200]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Logical"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational1"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From"
		  SrcPort		  1
		  Points		  [0, 50]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gb_spd_in_r\nif no gear change"
		  SrcPort		  1
		  Points		  [350, 0]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Relational"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <veh>"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    Points		    [0, 190]
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Gain"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "From <cyc>"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  Labels		  [1, 0]
		  SrcBlock		  "From <wh>/\ntire slip model (m/s)"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    Points		    [0, -25; 155, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Product"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "load=T/\n(maxT\nat spd)"
	      SID		      "3323"
	      Ports		      [1, 1]
	      Position		      [275, 96, 295, 114]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "0"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev gear\nnumber"
	      SID		      "3324"
	      Position		      [670, 35, 710, 55]
	      BlockMirror	      on
	      FontName		      "Arial"
	      X0		      "gb_num_init"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev gear\nratio"
	      SID		      "3325"
	      Position		      [205, 370, 240, 390]
	      BlockMirror	      on
	      FontName		      "Arial"
	      X0		      "gb_ratio(gb_num_init)"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "shifting1"
	      SID		      "3326"
	      Ports		      [1, 1]
	      Position		      [775, 254, 805, 286]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"shifting1"
		Location		[166, 208, 456, 399]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gear\nnumber"
		  SID			  "3327"
		  Position		  [15, 50, 35, 70]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "3328"
		  Position		  [20, 131, 120, 159]
		  FontName		  "Arial"
		  Value			  "gb_shift_delay-1e-6"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "3329"
		  Ports			  [2, 1]
		  Position		  [185, 53, 215, 77]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "time since last shift"
		  SID			  "3330"
		  Ports			  [1, 1]
		  Position		  [65, 43, 125, 77]
		  ShowName		  off
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('time since\\nlast shift')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "time since last shift"
		    Location		    [16, 396, 306, 535]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "3331"
		    Position		    [10, 60, 30, 80]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "just shifted"
		    SID			    "3332"
		    Ports		    [1, 1]
		    Position		    [60, 57, 110, 83]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('just\\nshifted')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "just shifted"
		    Location		    [140, 214, 463, 359]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "3333"
		    Position		    [55, 55, 75, 75]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "3334"
		    Position		    [120, 55, 155, 75]
		    FontName		    "Arial"
		    X0			    "1"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    SID			    "3335"
		    Ports		    [2, 1]
		    Position		    [190, 58, 220, 82]
		    FontName		    "Arial"
		    Operator		    "~="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "3336"
		    Position		    [250, 60, 270, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, 30; 75, 0; 0, -20]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "timer"
		    SID			    "3337"
		    Ports		    [1, 1]
		    Position		    [140, 55, 175, 85]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('timer')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "timer"
		    Location		    [455, 179, 859, 394]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "trigger"
		    SID			    "3338"
		    Position		    [15, 125, 35, 145]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "3339"
		    Position		    [100, 100, 120, 120]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant1"
		    SID			    "3340"
		    Position		    [100, 150, 120, 170]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant2"
		    SID			    "3341"
		    Position		    [150, 5, 170, 25]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "3342"
		    Position		    [265, 59, 295, 91]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "no-lag\nReset Integrator"
		    SID			    "3343"
		    Ports		    [3, 1]
		    Position		    [155, 96, 205, 174]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskType		    "No-lag Reset Integrator"
		    MaskDescription	    "No-lag Reset Integrator"
		    MaskHelp		    "Integrates first input using Euler technique.\\nAt the time step that input 2 <> zero,\\noutput i"
		    "s reset to input 3."
		    MaskPromptString	    "Initial Value"
		    MaskStyleString	    "edit"
		    MaskVariables	    "initval=@1;"
		    MaskTunableValueString  "on"
		    MaskEnableString	    "on"
		    MaskVisibilityString    "on"
		    MaskToolTipString	    "on"
		    MaskDisplay		    "disp('1/s\\nw/ reset\\nno lag')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "15"
		    System {
		    Name		    "no-lag\nReset Integrator"
		    Location		    [258, 616, 780, 880]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "3344"
		    Position		    [60, 100, 80, 120]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    SID			    "3345"
		    Position		    [60, 140, 80, 160]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_3"
		    SID			    "3346"
		    Position		    [45, 185, 65, 205]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "3347"
		    Position		    [125, 205, 145, 225]
		    BlockRotation	    270
		    NamePlacement	    "alternate"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "3348"
		    Position		    [340, 55, 375, 75]
		    BlockMirror		    on
		    FontName		    "Arial"
		    X0			    "initval"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    SID			    "3349"
		    Ports		    [2, 1]
		    Position		    [160, 96, 180, 114]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    SID			    "3350"
		    Ports		    [2, 1]
		    Position		    [230, 90, 250, 110]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "3351"
		    Position		    [290, 139, 320, 171]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "dt"
		    SID			    "3352"
		    Ports		    [0, 1]
		    Position		    [112, 50, 138, 80]
		    BlockRotation	    270
		    BlockMirror		    on
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "dt"
		    Location		    [80, 285, 429, 424]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "3353"
		    Position		    [65, 60, 85, 80]
		    FontName		    "Arial"
		    FontSize		    8
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "3354"
		    Position		    [125, 85, 160, 105]
		    FontName		    "Arial"
		    FontSize		    8
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    SID			    "3355"
		    Ports		    [2, 1]
		    Position		    [205, 65, 225, 85]
		    FontName		    "Arial"
		    FontSize		    8
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "3356"
		    Position		    [255, 65, 275, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [10, 0; 0, -15]
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "in_2==0"
		    SID			    "3357"
		    Ports		    [2, 1]
		    Position		    [160, 143, 190, 167]
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "3358"
		    Position		    [455, 145, 475, 165]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_3"
		    SrcPort		    1
		    Points		    [200, 0; 0, -30]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "in_2==0"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "dt"
		    SrcPort		    1
		    Points		    [0, 15]
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    Points		    [-130, 0; 0, 30]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    Points		    [10, 0; 0, 45]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    Points		    [85, 0]
		    Branch {
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -90]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "in_2==0"
		    SrcPort		    1
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    Points		    [0, -40]
		    DstBlock		    "in_2==0"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "time"
		    SID			    "3359"
		    Position		    [350, 65, 370, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    DstBlock		    "time"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "trigger"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, -60]
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Constant2"
		    SrcPort		    1
		    Points		    [35, 0; 0, 50]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant1"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "no-lag\nReset Integrator"
		    SrcPort		    1
		    Points		    [35, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "3360"
		    Position		    [225, 60, 245, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "just shifted"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "just shifted"
		    SrcPort		    1
		    DstBlock		    "timer"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "timer"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "3361"
		  Position		  [250, 55, 270, 75]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gear\nnumber"
		  SrcPort		  1
		  DstBlock		  "time since last shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [15, 0; 0, -75]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "time since last shift"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "upshift\n command"
	      SID		      "3362"
	      Ports		      [3, 1]
	      Position		      [420, 64, 450, 116]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"upshift\n command"
		Location		[324, 355, 799, 650]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "3363"
		  Position		  [45, 103, 75, 117]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "3364"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "3365"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "3366"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "3367"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "3368"
		  Ports			  [1, 1]
		  Position		  [245, 100, 275, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_upshift_spd|gb_upshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "3369"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "3370"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "3371"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "3372"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [50, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Product
	      Name		      "~gb_trq_in_r"
	      SID		      "3373"
	      Ports		      [3, 1]
	      Position		      [150, 77, 170, 113]
	      FontName		      "Arial"
	      Inputs		      "*//"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear number, out"
	      SID		      "3374"
	      Position		      [785, 605, 805, 625]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear ratio, out"
	      SID		      "3375"
	      Position		      [785, 445, 805, 465]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "shifting, out"
	      SID		      "3376"
	      Position		      [785, 490, 805, 510]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "gb_spd_in_r"
	      SrcPort		      1
	      DstBlock		      "gearbox speed\nestimator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "load=T/\n(maxT\nat spd)"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "allow downshift?"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "downshift \ncommand"
	      SrcPort		      1
	      DstBlock		      "Gain1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "engine\ntorque\ncapability"
	      SrcPort		      1
	      Points		      [0, -90]
	      DstBlock		      "Product2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "delta\ngear\nnumber"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch2"
	      SrcPort		      1
	      Points		      [15, 0; 0, 25]
	      Branch {
		DstBlock		"delta\ngear\nnumber"
		DstPort			2
	      }
	      Branch {
		DstBlock		"delta\ngear\nnumber"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "shifting1"
	      SrcPort		      1
	      DstBlock		      "Goto6"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "delta\ngear\nnumber"
	      SrcPort		      1
	      DstBlock		      "current\ngear\nnumber"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "current\ngear\nnumber"
	      SrcPort		      1
	      DstBlock		      "Saturation1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, 0]
		Branch {
		  Points		  [0, -150]
		  DstBlock		  "prev gear\nnumber"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "gear ratio1"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[0, 75]
		Branch {
		  DstBlock		  "shifting1"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 110]
		  Branch {
		    DstBlock		    "Rate Limiter"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Goto4"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Line {
	      SrcBlock		      "gear ratio1"
	      SrcPort		      1
	      DstBlock		      "Goto5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "prev gear\nnumber"
	      SrcPort		      1
	      Points		      [-30, 0]
	      Branch {
		Points			[-240, 0; 0, 205]
		Branch {
		  DstBlock		  "allow downshift?"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, -170]
		  Branch {
		    Points		    [0, 75]
		    Branch {
		    DstBlock		    "allow upshift?"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 145]
		    DstBlock		    "downshift \ncommand"
		    DstPort		    1
		    }
		  }
		  Branch {
		    Points		    [10, 0]
		    DstBlock		    "upshift\n command"
		    DstPort		    1
		  }
		}
	      }
	      Branch {
		Points			[0, 140]
		DstBlock		"current\ngear\nnumber"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch2"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "prev.\nPout/Pin"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"allow upshift?"
		DstPort			4
	      }
	      Branch {
		Points			[0, -90]
		DstBlock		"~gb_trq_in_r"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      Points		      [0, -75]
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gb_spd_out_r"
	      SrcPort		      1
	      Points		      [60, 0]
	      Branch {
		Points			[0, -155]
		DstBlock		"allow upshift?"
		DstPort			3
	      }
	      Branch {
		DstBlock		"gb_spd_in_r"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "gb_trq_out_r"
	      SrcPort		      1
	      Points		      [60, 0]
	      Branch {
		Points			[0, 80]
		DstBlock		"allow upshift?"
		DstPort			2
	      }
	      Branch {
		DstBlock		"~gb_trq_in_r"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "prev gear\nratio"
	      SrcPort		      1
	      Points		      [-75, 0; 0, -40]
	      Branch {
		Points			[0, -235]
		DstBlock		"~gb_trq_in_r"
		DstPort			3
	      }
	      Branch {
		DstBlock		"gb_spd_in_r"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "gear ratio"
	      SrcPort		      1
	      DstBlock		      "prev gear\nratio"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Rate Limiter"
	      SrcPort		      1
	      DstBlock		      "gear ratio"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "load=T/\n(maxT\nat spd)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "~gb_trq_in_r"
	      SrcPort		      1
	      DstBlock		      "Product2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "tires are at\ntraction limit"
	      SrcPort		      1
	      Points		      [230, 0; 0, 65]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		Points			[20, 0]
		DstBlock		"upshift\n command"
		DstPort			2
	      }
	      Branch {
		Points			[0, 220]
		DstBlock		"downshift \ncommand"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "upshift\n command"
	      SrcPort		      1
	      Points		      [50, 0]
	      DstBlock		      "Switch2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "allow upshift?"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gearbox speed\nestimator"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		Points			[10, 0]
		Branch {
		  Points		  [0, -80; -145, 0]
		  DstBlock		  "engine\ntorque\ncapability"
		  DstPort		  1
		}
		Branch {
		  Points		  [30, 0]
		  Branch {
		    Points		    [0, -230]
		    DstBlock		    "upshift\n command"
		    DstPort		    3
		  }
		  Branch {
		    Points		    [30, 0]
		    DstBlock		    "downshift \ncommand"
		    DstPort		    3
		  }
		}
	      }
	      Branch {
		Points			[0, 15]
		DstBlock		"To WS"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant14"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant15"
	      SrcPort		      1
	      DstBlock		      "Switch4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From4"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Switch4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Switch4"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From2"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From3"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch4"
	      SrcPort		      1
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <logic>2"
	      SrcPort		      1
	      DstBlock		      "Speed Dependent Shifting"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      1
	      DstBlock		      "Goto"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      2
	      DstBlock		      "Goto1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      Points		      [0, -15]
	      DstBlock		      "gear ratio, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      Points		      [0, 10]
	      DstBlock		      "shifting, out"
	      DstPort		      1
	    }
	    Line {
	      Labels		      [1, 0]
	      SrcBlock		      "Switch3"
	      SrcPort		      1
	      DstBlock		      "gear number, out"
	      DstPort		      1
	    }
	    Annotation {
	      SID		      "3377"
	      Name		      "default gear number\ncalculation"
	      Position		      [879, 434]
	    }
	    Annotation {
	      SID		      "3378"
	      Name		      "default shifting\ncalculation"
	      Position		      [888, 301]
	    }
	    Annotation {
	      SID		      "3379"
	      Name		      "default gear ratio\ncalculation"
	      Position		      [887, 159]
	    }
	    Annotation {
	      SID		      "3380"
	      Name		      "local GOTO blocks:"
	      Position		      [897, 127]
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "sim stop\nsubsystem"
	  SID			  "3381"
	  Ports			  []
	  Position		  [50, 25, 80, 75]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/sim stop\nsubsystem"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  Outport
	  Name			  "clutch\nstate"
	  SID			  "3382"
	  Position		  [815, 273, 845, 287]
	  IconDisplay		  "Port number"
	}
	Line {
	  SrcBlock		  "From <ess>"
	  SrcPort		  1
	  Points		  [0, 5]
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <mc>"
	  SrcPort		  1
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <mc>1"
	  SrcPort		  1
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "motor controller\nlogic"
	  SrcPort		  1
	  DstBlock		  "Goto <mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <mc>2"
	  SrcPort		  1
	  Points		  [0, -5]
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <gb>3"
	  SrcPort		  1
	  DstBlock		  "pre-TX parallel\ngearbox control"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From<gb>"
	  SrcPort		  1
	  Points		  [5, 0]
	  DstBlock		  "pre-TX parallel\ngearbox control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>1"
	  SrcPort		  1
	  Points		  [5, 0]
	  DstBlock		  "pre-TX parallel\ngearbox control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <gb>2"
	  SrcPort		  1
	  DstBlock		  "pre-TX parallel\ngearbox control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "engine on\n(parallel hybrid)"
	  SrcPort		  3
	  DstBlock		  "Goto <fc><mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <fc>"
	  SrcPort		  1
	  DstBlock		  "engine on\n(parallel hybrid)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "engine on\n(parallel hybrid)"
	  SrcPort		  2
	  DstBlock		  "Goto <fc>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>4"
	  SrcPort		  1
	  Points		  [35, 0]
	  DstBlock		  "engine on\n(parallel hybrid)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <gb>5"
	  SrcPort		  1
	  DstBlock		  "engine on\n(parallel hybrid)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <gb>7"
	  SrcPort		  1
	  Points		  [25, 0]
	  DstBlock		  "engine on\n(parallel hybrid)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "engine on\n(parallel hybrid)"
	  SrcPort		  1
	  DstBlock		  "Goto <fc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>6"
	  SrcPort		  1
	  Points		  [35, 0]
	  DstBlock		  "engine on\n(parallel hybrid)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  2
	  Points		  [135, 0]
	  Branch {
	    DstBlock		    "Sum"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -45]
	    DstBlock		    "Goto <wh>8"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    DstBlock		    "braking strategy"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [190, 0]
	    Branch {
	      Points		      [0, -35]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Branch {
	      Points		      [0, 20]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>5"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <veh>"
	  SrcPort		  1
	  Points		  [5, 0]
	  DstBlock		  "config traction control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  2
	  Points		  [0, 5]
	  DstBlock		  "Goto <wh>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  3
	  Points		  [0, 10]
	  DstBlock		  "Goto <wh>2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "config traction control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <mc>3"
	  SrcPort		  1
	  Points		  [35, 0]
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>6"
	  SrcPort		  1
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <gb>4"
	  SrcPort		  1
	  Points		  [30, 0]
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <gb>8"
	  SrcPort		  1
	  Points		  [30, 0]
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "parallel clutch\ncontrol"
	  SrcPort		  1
	  Points		  [10, 0]
	  Branch {
	    DstBlock		    "Goto <sdo>"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "clutch\nstate"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Relational\nOperator"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>8"
	  SrcPort		  1
	  DstBlock		  "Relational\nOperator"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <wh>1"
	  SrcPort		  1
	  Points		  [-5, 0]
	  DstBlock		  "config traction control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>9"
	  SrcPort		  1
	  DstBlock		  "braking strategy"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>2"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <wh>3"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From<wh>4"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <wh>5"
	  SrcPort		  1
	  Points		  [0, -5]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>7"
	  SrcPort		  1
	  Points		  [60, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "pre-TX parallel\ngearbox control"
	  SrcPort		  1
	  DstBlock		  "Goto"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "pre-TX parallel\ngearbox control"
	  SrcPort		  2
	  DstBlock		  "Goto <gb>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "pre-TX parallel\ngearbox control"
	  SrcPort		  3
	  DstBlock		  "Goto <gb>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  4
	  Points		  [15, 0]
	  DstBlock		  "Goto <wh>6"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  5
	  Points		  [10, 0]
	  DstBlock		  "Goto <wh>7"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Ground"
	  SrcPort		  1
	  Points		  [30, 0; 0, -35]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  6
	}
	Annotation {
	  SID			  "3383"
	  Name			  "force\nrequired (N)"
	  Position		  [207, 289]
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "<vc> par Adaptive"
      SID		      "308"
      Ports		      [0, 1]
      Position		      [470, 319, 535, 371]
      BackgroundColor	      "blue"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_vc.jpg'))\n"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"<vc> par Adaptive"
	Location		[10, 112, 950, 1190]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"100"
	Block {
	  BlockType		  From
	  Name			  "From <ess>"
	  SID			  "3384"
	  Position		  [525, 45, 620, 65]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "bus_voltage"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>"
	  SID			  "3385"
	  Position		  [540, 472, 635, 488]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_trq_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>1"
	  SID			  "3386"
	  Position		  [160, 81, 250, 99]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>2"
	  SID			  "3387"
	  Position		  [160, 106, 255, 124]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "eta_gb"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>3"
	  SID			  "3388"
	  Position		  [155, 140, 250, 160]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "slip_limited"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>4"
	  SID			  "3389"
	  Position		  [525, 276, 620, 294]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>5"
	  SID			  "3390"
	  Position		  [530, 342, 625, 358]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>6"
	  SID			  "3391"
	  Position		  [530, 382, 625, 398]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "engine_on"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>7"
	  SID			  "3392"
	  Position		  [525, 242, 620, 258]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>8"
	  SID			  "3393"
	  Position		  [525, 147, 620, 163]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>"
	  SID			  "3394"
	  Position		  [525, 80, 620, 100]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "P_mc_in_1lim"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>1"
	  SID			  "3395"
	  Position		  [525, 109, 615, 131]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_mc_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <veh>"
	  SID			  "3396"
	  Position		  [30, 332, 105, 348]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_prev"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>"
	  SID			  "3397"
	  Position		  [25, 365, 85, 385]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>1"
	  SID			  "3398"
	  Position		  [20, 296, 105, 314]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>2"
	  SID			  "3399"
	  Position		  [130, 472, 240, 488]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_drivetrain_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>3"
	  SID			  "3400"
	  Position		  [135, 506, 235, 524]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_wheel_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>4"
	  SID			  "3401"
	  Position		  [285, 330, 345, 350]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>5"
	  SID			  "3402"
	  Position		  [120, 561, 240, 579]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_rear_brake"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>6"
	  SID			  "3403"
	  Position		  [140, 435, 200, 455]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>7"
	  SID			  "3404"
	  Position		  [25, 221, 110, 239]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From<gb>"
	  SID			  "3405"
	  Position		  [160, 46, 250, 64]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From<wh>4"
	  SID			  "3406"
	  Position		  [130, 531, 245, 549]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_front_brake"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>"
	  SID			  "3407"
	  Position		  [725, 470, 790, 490]
	  GotoTag		  "engine_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>"
	  SID			  "3408"
	  Position		  [330, 100, 420, 120]
	  GotoTag		  "gear_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>1"
	  SID			  "3409"
	  Position		  [335, 136, 415, 154]
	  GotoTag		  "shifting"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>2"
	  SID			  "3410"
	  Position		  [330, 65, 420, 85]
	  GotoTag		  "gear_number"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <mc>"
	  SID			  "3411"
	  Position		  [710, 95, 800, 115]
	  GotoTag		  "P_mc_in_r"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>"
	  SID			  "3412"
	  Position		  [730, 251, 800, 269]
	  NamePlacement		  "alternate"
	  GotoTag		  "clutch_state"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>1"
	  SID			  "3413"
	  Position		  [435, 326, 520, 344]
	  GotoTag		  "slip_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>"
	  SID			  "3414"
	  Position		  [430, 255, 515, 275]
	  NamePlacement		  "alternate"
	  GotoTag		  "F_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>1"
	  SID			  "3415"
	  Position		  [190, 314, 280, 336]
	  GotoTag		  "v_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>2"
	  SID			  "3416"
	  Position		  [205, 341, 295, 359]
	  GotoTag		  "wt_front_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>3"
	  SID			  "3417"
	  Position		  [330, 476, 415, 494]
	  GotoTag		  "F_front_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>4"
	  SID			  "3418"
	  Position		  [330, 539, 415, 561]
	  GotoTag		  "F_rear_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>5"
	  SID			  "3419"
	  Position		  [230, 220, 340, 240]
	  GotoTag		  "F_front_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>6"
	  SID			  "3420"
	  Position		  [195, 381, 285, 399]
	  GotoTag		  "wt_rear_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>7"
	  SID			  "3421"
	  Position		  [190, 411, 280, 429]
	  GotoTag		  "front_traction_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>8"
	  SID			  "3422"
	  Position		  [405, 200, 515, 220]
	  GotoTag		  "F_rear_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Ground
	  Name			  "Ground"
	  SID			  "3423"
	  Position		  [220, 610, 240, 630]
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator"
	  SID			  "3424"
	  Ports			  [2, 1]
	  Position		  [380, 317, 410, 348]
	  Operator		  "~="
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  SID			  "3425"
	  Ports			  [2, 1]
	  Position		  [380, 247, 410, 278]
	  Inputs		  "-+"
	}
	Block {
	  BlockType		  Reference
	  Name			  "braking strategy"
	  SID			  "3426"
	  Ports			  [2, 2]
	  Position		  [185, 217, 215, 268]
	  NamePlacement		  "alternate"
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/braking strategy"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "config traction control"
	  SID			  "3427"
	  Ports			  [3, 5]
	  Position		  [125, 284, 160, 386]
	  BackgroundColor	  "darkGreen"
	  AttributesFormatString  "%<BlockChoice>"
	  ShowPortLabels	  "none"
	  BlockChoice		  "traction control 2 axle"
	  TemplateBlock		  "lib_controls/SubSystem/config traction control"
	  MemberBlocks		  "traction control 2 axle,traction control J2452 2 axle"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "config traction control"
	    Location		    [148, 182, 646, 482]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    SIDHighWatermark	    "6898"
	    Block {
	      BlockType		      Inport
	      Name		      "time-average\nvehicle speed\n req'd (m/s)"
	      SID		      "3427::706"
	      Position		      [20, 40, 40, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SID		      "3427::707"
	      Position		      [20, 80, 40, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "total tractive\nforce req'd\n(N)"
	      SID		      "3427::708"
	      Position		      [20, 120, 40, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "traction control\n2 axle"
	      SID		      "3427::709"
	      Ports		      [3, 5]
	      Position		      [100, 40, 140, 80]
	      BackgroundColor	      "darkGreen"
	      LibraryVersion	      "1.479"
	      SourceBlock	      "lib_controls/SubSystem/traction control 2 axle"
	      SourceType	      "SubSystem"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd force\n(N)"
	      SID		      "3427::710"
	      Position		      [200, 40, 220, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd speed\n(m/s)"
	      SID		      "3427::711"
	      Position		      [200, 80, 220, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nfront axle\n(N)"
	      SID		      "3427::712"
	      Position		      [200, 120, 220, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nrear axle\n(N)"
	      SID		      "3427::713"
	      Position		      [200, 160, 220, 180]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "front/total \ntraction ratio"
	      SID		      "3427::714"
	      Position		      [200, 200, 220, 220]
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "time-average\nvehicle speed\n req'd (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "total tractive\nforce req'd\n(N)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      1
	      DstBlock		      "req'd force\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      2
	      DstBlock		      "req'd speed\n(m/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      3
	      DstBlock		      "weight on\nfront axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      4
	      DstBlock		      "weight on\nrear axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      5
	      DstBlock		      "front/total \ntraction ratio"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "engine on\n(Adaptive)"
	  SID			  "3428"
	  Ports			  [1, 1]
	  Position		  [655, 458, 690, 502]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "engine on\n(Adaptive)"
	    Location		    [66, 260, 985, 674]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "trq req'd\nof engine"
	      SID		      "3429"
	      Position		      [45, 268, 75, 282]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      ")"
	      SID		      "3430"
	      Position		      [300, 300, 320, 320]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES1"
	      SID		      "3431"
	      Ports		      []
	      Position		      [840, 350, 896, 390]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES1"
		Location		[301, 688, 731, 889]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "3432"
		  Name			  "This engine state computer keeps the engine on if:\n[\n1) (trq is too high AND speed is too high for idl"
		  "e) OR engine is allowed to idle, AND\n2) key is on, AND\n3) vehicle speed >= cs_electric_launch_spd [ in m/s ], AN"
		  "D\n4) req'd trq > (cs_off_trq_frac * max_trq_at_spd) OR SOC<cs_lo_soc\n]\nOR\n[ engine was previously on AND the t"
		  "ransmission is shifting ]\n\nThe last condition is added to prevent the engine from unrealistically\nshutting down"
		  " for a second or two during a shift."
		  Position		  [212, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "3433"
	      Position		      [205, 38, 275, 62]
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "3434"
	      Position		      [185, 144, 280, 166]
	      Value		      "vc_idle_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "3435"
	      Position		      [205, 103, 275, 127]
	      Value		      "vc_idle_spd"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>2"
	      SID		      "3436"
	      Position		      [585, 88, 670, 112]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "shifting"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <fc><mc>"
	      SID		      "3437"
	      Position		      [700, 371, 750, 389]
	      GotoTag		      "key_on"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator2"
	      SID		      "3438"
	      Ports		      [2, 1]
	      Position		      [420, 131, 450, 164]
	      Operator		      "OR"
	      Port {
		PortNumber		1
		Name			"engine not shut off rather than idle"
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
	      }
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator3"
	      SID		      "3439"
	      Ports		      [2, 1]
	      Position		      [365, 36, 395, 69]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator5"
	      SID		      "3440"
	      Ports		      [3, 1]
	      Position		      [670, 162, 700, 298]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator7"
	      SID		      "3441"
	      Ports		      [2, 1]
	      Position		      [705, 75, 735, 110]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator8"
	      SID		      "3442"
	      Ports		      [2, 1]
	      Position		      [755, 205, 785, 240]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "3443"
	      Position		      [780, 40, 810, 70]
	      BlockMirror	      on
	      NamePlacement	      "alternate"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory1"
	      SID		      "3444"
	      Position		      [170, 260, 200, 290]
	      ShowName		      off
	      X0		      "1"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "3445"
	      Ports		      [2, 1]
	      Position		      [350, 267, 380, 298]
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "T>~0"
	      SID		      "3446"
	      Ports		      [2, 1]
	      Position		      [305, 17, 335, 48]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "key_on"
	      SID		      "3447"
	      Ports		      [0, 1]
	      Position		      [185, 194, 240, 226]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Repeating table"
	      MaskDescription	      "Repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table. Time values should be monotonically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(@1); t = @1; y = @2;"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "vc_key_on(:,1)|vc_key_on(:,2)"
	      Port {
		PortNumber		1
		Name			"ignition key is on"
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
	      }
	      System {
		Name			"key_on"
		Location		[5, 40, 315, 196]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "3448"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "3449"
		  Position		  [110, 60, 150, 80]
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "3450"
		  Position		  [210, 58, 250, 82]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "3451"
		  Position		  [285, 60, 305, 80]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  DstBlock		  "Fcn1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "key_on1"
	      SID		      "3452"
	      Ports		      [0, 1]
	      Position		      [515, 369, 570, 401]
	      NamePlacement	      "alternate"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Repeating table"
	      MaskDescription	      "Repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table. Time values should be monotonically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "vc_key_on(:,1)|vc_key_on(:,2)"
	      Port {
		PortNumber		1
		Name			"ignition key is on"
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
	      }
	      System {
		Name			"key_on1"
		Location		[5, 42, 410, 213]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "3453"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "3454"
		  Position		  [110, 60, 150, 80]
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "3455"
		  Position		  [210, 58, 250, 82]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "3456"
		  Position		  [285, 60, 305, 80]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  DstBlock		  "Fcn1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "spd req'd\nout of clutch\n(N*m)"
	      SID		      "3457"
	      Position		      [40, 82, 105, 98]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "w_cl_out"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "speed\ncommand"
	      SID		      "3458"
	      Ports		      [1]
	      Position		      [860, 261, 890, 299]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"speed\ncommand"
		Location		[260, 214, 966, 433]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "engine\non"
		  SID			  "3459"
		  Position		  [25, 158, 55, 172]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "3460"
		  Ports			  []
		  Position		  [630, 165, 686, 205]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [156, 423, 612, 520]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "3461"
		    Name		    "This engine control block determines whether the engine is on, which it is when\n[(the clutch is slip"
		    "ping or engaged OR idling is allowed) AND the ignition key is on]\nOR\n(the transmission is shifting AND the eng"
		    "ine was on during the previous time step).\nThe second part involving shifting is to prevent the engine from shu"
		    "tting down\nfor 1 or 2 seconds during shifts."
		    Position		    [227, 12]
		    VerticalAlignment	    "top"
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "3462"
		  Position		  [275, 49, 355, 71]
		  BlockMirror		  on
		  Value			  "vc_launch_spd"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant7"
		  SID			  "3463"
		  Position		  [500, 135, 520, 155]
		  BlockMirror		  on
		  ShowName		  off
		  Value			  "0"
		}
		Block {
		  BlockType		  From
		  Name			  "From <fc>"
		  SID			  "3464"
		  Position		  [35, 107, 130, 123]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "fc_spd_out_r"
		}
		Block {
		  BlockType		  From
		  Name			  "From <vc>"
		  SID			  "3465"
		  Position		  [40, 31, 130, 49]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "clutch_state"
		}
		Block {
		  BlockType		  From
		  Name			  "From <wh>"
		  SID			  "3466"
		  Position		  [40, 70, 130, 90]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "v_ave_req"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto <fc>1"
		  SID			  "3467"
		  Position		  [610, 94, 690, 116]
		  GotoTag		  "spd_command"
		  TagVisibility		  "global"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation"
		  SID			  "3468"
		  Ports			  [1, 1]
		  Position		  [395, 90, 425, 120]
		  InputPortMap		  "u0"
		  UpperLimit		  "inf"
		  LowerLimit		  "vc_idle_spd"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "3469"
		  Position		  [300, 90, 330, 120]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "3470"
		  Position		  [495, 90, 525, 120]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "setpoint"
		  SID			  "3471"
		  Ports			  [2, 1]
		  Position		  [190, 56, 220, 94]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "setpoint"
		    Location		    [331, 296, 799, 644]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "clutch\nstate"
		    SID			    "3472"
		    Position		    [15, 13, 45, 27]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "v_ave_req"
		    SID			    "3473"
		    Position		    [20, 123, 50, 137]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant4"
		    SID			    "3474"
		    Position		    [215, 75, 235, 95]
		    BlockMirror		    on
		    ShowName		    off
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant5"
		    SID			    "3475"
		    Position		    [215, 190, 235, 210]
		    BlockMirror		    on
		    ShowName		    off
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant6"
		    SID			    "3476"
		    Position		    [215, 310, 235, 330]
		    BlockMirror		    on
		    ShowName		    off
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "Logical\nOperator10"
		    SID			    "3477"
		    Ports		    [3, 1]
		    Position		    [305, 122, 335, 158]
		    ShowName		    off
		    Inputs		    "3"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "clutch\ndisengaged"
		    SID			    "3478"
		    Ports		    [2, 1]
		    Position		    [210, 12, 240, 43]
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "moving next\ntime"
		    SID			    "3479"
		    Ports		    [2, 1]
		    Position		    [210, 242, 240, 273]
		    Operator		    ">"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "not\nmoving"
		    SID			    "3480"
		    Ports		    [2, 1]
		    Position		    [210, 122, 240, 153]
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "repeated cycle:\n speed required at\nend of NEXT second"
		    SID			    "3481"
		    Ports		    [0, 1]
		    Position		    [130, 232, 165, 268]
		    FontName		    "Arial"
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskType		    "Repeating table"
		    MaskDescription	    "Repeating table.\nEnter values of time and output for first cycle."
		    MaskHelp		    "Repeats cycle given in table. Time values should be monotonically increasing."
		    MaskPromptString	    "Time values:|Output values:|Look ahead how far (s):"
		    MaskStyleString	    "edit,edit,edit"
		    MaskVariables	    "t=@1;y=@2;dt=@3;"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskInitialization	    "period = max(t);"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "cyc_mph(:,1)|cyc_mph(:,2)|1"
		    System {
		    Name		    "repeated cycle:\n speed required at\nend of NEXT second"
		    Location		    [402, 233, 777, 395]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "3482"
		    Position		    [45, 60, 65, 80]
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Fcn1"
		    SID			    "3483"
		    Position		    [110, 60, 150, 80]
		    Expr		    "rem(u[1],period)+dt"
		    }
		    Block {
		    BlockType		    Lookup
		    Name		    "Look-Up Table"
		    SID			    "3484"
		    Position		    [210, 58, 250, 82]
		    InputValues		    "t"
		    Table		    "y"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "3485"
		    Position		    [285, 60, 305, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Fcn1"
		    SrcPort		    1
		    DstBlock		    "Look-Up Table"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    DstBlock		    "Fcn1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Look-Up Table"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "output"
		    SID			    "3486"
		    Position		    [360, 133, 390, 147]
		    IconDisplay		    "Port number"
		    }
		    Line {
		    SrcBlock		    "Logical\nOperator10"
		    SrcPort		    1
		    DstBlock		    "output"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "v_ave_req"
		    SrcPort		    1
		    DstBlock		    "not\nmoving"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "clutch\nstate"
		    SrcPort		    1
		    DstBlock		    "clutch\ndisengaged"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant4"
		    SrcPort		    1
		    Points		    [-20, 0; 0, -50]
		    DstBlock		    "clutch\ndisengaged"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant5"
		    SrcPort		    1
		    Points		    [-20, 0; 0, -55]
		    DstBlock		    "not\nmoving"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "repeated cycle:\n speed required at\nend of NEXT second"
		    SrcPort		    1
		    DstBlock		    "moving next\ntime"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant6"
		    SrcPort		    1
		    Points		    [-20, 0; 0, -55]
		    DstBlock		    "moving next\ntime"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "clutch\ndisengaged"
		    SrcPort		    1
		    DstBlock		    "Logical\nOperator10"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "not\nmoving"
		    SrcPort		    1
		    DstBlock		    "Logical\nOperator10"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "moving next\ntime"
		    SrcPort		    1
		    DstBlock		    "Logical\nOperator10"
		    DstPort		    3
		    }
		  }
		}
		Line {
		  SrcBlock		  "engine\non"
		  SrcPort		  1
		  Points		  [400, 0; 0, -60]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <fc>"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "From <vc>"
		  SrcPort		  1
		  Points		  [40, 0]
		  DstBlock		  "setpoint"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "From <wh>"
		  SrcPort		  1
		  Points		  [40, 0]
		  DstBlock		  "setpoint"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "setpoint"
		  SrcPort		  1
		  Points		  [20, 0; 0, 30]
		  DstBlock		  "Switch"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  DstBlock		  "Saturation"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  Points		  [-15, 0; 0, 35]
		  DstBlock		  "Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation"
		  SrcPort		  1
		  Points		  [20, 0; 0, -10]
		  DstBlock		  "Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  DstBlock		  "Goto <fc>1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant7"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "trq req'd\nout of clutch\n(N*m)"
	      SID		      "3487"
	      Position		      [35, 16, 115, 34]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "T_cl_out"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "w>idle"
	      SID		      "3488"
	      Ports		      [2, 1]
	      Position		      [305, 82, 335, 113]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "engine on"
	      SID		      "3489"
	      Position		      [860, 218, 890, 232]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      Name		      "ignition key is on"
	      Labels		      [0, 0]
	      SrcBlock		      "key_on1"
	      SrcPort		      1
	      Points		      [110, 0]
	      DstBlock		      "Goto <fc><mc>"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory1"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "trq req'd\nof engine"
	      SrcPort		      1
	      DstBlock		      "Memory1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [270, 0]
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "trq req'd\nout of clutch\n(N*m)"
	      SrcPort		      1
	      DstBlock		      "T>~0"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      ")"
	      SrcPort		      1
	      Points		      [5, 0; 0, -20]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "spd req'd\nout of clutch\n(N*m)"
	      SrcPort		      1
	      DstBlock		      "w>idle"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "T>~0"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "T>~0"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator7"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator5"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <vc>2"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator7"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [-90, 0; 0, 30]
	      DstBlock		      "Logical\nOperator7"
	      DstPort		      1
	    }
	    Line {
	      Name		      "ignition key is on"
	      Labels		      [0, 0]
	      SrcBlock		      "key_on"
	      SrcPort		      1
	      Points		      [410, 0]
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      2
	    }
	    Line {
	      Name		      "engine not shut off rather than idle"
	      Labels		      [3, 0]
	      SrcBlock		      "Logical\nOperator2"
	      SrcPort		      1
	      Points		      [25, 0; 0, 35]
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator3"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "w>idle"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "w>idle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator8"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		Points			[0, 55]
		DstBlock		"speed\ncommand"
		DstPort			1
	      }
	      Branch {
		Points			[15, 0]
		Branch {
		  Points		  [0, -170]
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "engine on"
		  DstPort		  1
		}
	      }
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "front and rear\nbrake controller\n(achievable)"
	  SID			  "3490"
	  Ports			  [6, 2]
	  Position		  [275, 451, 310, 579]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/front and rear\nbrake controller\n(achievable)"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "motor controller\nlogic"
	  SID			  "3491"
	  Ports			  [4, 1]
	  Position		  [655, 45, 685, 165]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "motor controller\nlogic"
	    Location		    [89, 74, 771, 525]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "bus voltage"
	      SID		      "3492"
	      Position		      [40, 30, 60, 50]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd input\npower (W)"
	      SID		      "3493"
	      Position		      [40, 160, 60, 180]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd output\nspd (rad/s)"
	      SID		      "3494"
	      Position		      [40, 280, 60, 300]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "3495"
	      Position		      [40, 385, 60, 405]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs"
	      SID		      "3496"
	      Position		      [205, 123, 235, 147]
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs1"
	      SID		      "3497"
	      Position		      [105, 278, 135, 302]
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "3498"
	      Ports		      []
	      Position		      [590, 385, 646, 425]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[263, 139, 778, 219]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "3499"
		  Name			  "This block models a motor/controller's logic, modulating the power input requirement as follows:\n- enfo"
		  "rcing the maximum current limit of the motor/controller\n- shutting the motor off if the average speed over the ti"
		  "me step ==0\n- shutting the motor off if the transmission is shifting."
		  Position		  [257, 40]
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "3500"
	      Position		      [95, 79, 165, 101]
	      FontName		      "Arial"
	      Value		      "mc_max_crrnt"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "3501"
	      Position		      [140, 348, 175, 372]
	      FontName		      "Arial"
	      Value		      "0.001"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "3502"
	      Position		      [500, 232, 520, 258]
	      BlockMirror	      on
	      FontName		      "Arial"
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <sdo>"
	      SID		      "3503"
	      Position		      [555, 24, 645, 46]
	      GotoTag		      "mc_crrnt_limited"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "3504"
	      Ports		      [1, 1]
	      Position		      [434, 240, 466, 275]
	      BlockRotation	      270
	      NamePlacement	      "alternate"
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "3505"
	      Position		      [115, 25, 145, 55]
	      X0		      "ess_module_num*mean(ess_voc(1,:))"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      SID		      "3506"
	      Ports		      [2, 1]
	      Position		      [270, 37, 300, 68]
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      SID		      "3507"
	      Ports		      [2, 1]
	      Position		      [210, 36, 230, 54]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "3508"
	      Ports		      [2, 1]
	      Position		      [230, 282, 260, 313]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "3509"
	      Ports		      [2, 1]
	      Position		      [490, 17, 520, 48]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Sign"
	      SID		      "3510"
	      Ports		      [1, 1]
	      Position		      [270, 157, 300, 183]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Sign"
	      MaskDescription	      "y = sign(x)"
	      MaskHelp		      "Sign Function:\\n\\t\\t\\ty = 1 if x > 0\\n\\t\\t\\ty = 0 if x = 0\\n\\t\\t\\ty = -1 if x < 0"
	      MaskDisplay	      "plot(-50,-50,50,50,[-50,50],[0,0],[0,0],[-50,50],[-40,0],[-30,-30],[0,40],[30,30])"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Sign"
		Location		[159, 417, 467, 586]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "3511"
		  Position		  [35, 30, 55, 50]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "3512"
		  Position		  [65, 105, 85, 125]
		  Value			  "0"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "3513"
		  Ports			  [2, 1]
		  Position		  [140, 32, 170, 63]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "3514"
		  Ports			  [2, 1]
		  Position		  [140, 92, 170, 123]
		  Operator		  "<"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "3515"
		  Ports			  [2, 1]
		  Position		  [215, 64, 235, 91]
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "3516"
		  Position		  [265, 70, 285, 90]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 60]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, -60]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  Points		  [10, 0; 0, -25]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  Points		  [10, 0; 0, 20]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "3517"
	      Position		      [495, 180, 525, 210]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "current-limited\npower"
	      SID		      "3518"
	      Ports		      [2, 1]
	      Position		      [365, 51, 385, 69]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "true if motor\nshould be\nshut down"
	      SID		      "3519"
	      Ports		      [2, 1]
	      Position		      [385, 292, 415, 323]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd input\npower (W)1"
	      SID		      "3520"
	      Position		      [590, 185, 610, 205]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Abs1"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "req'd output\nspd (rad/s)"
	      SrcPort		      1
	      DstBlock		      "Abs1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [10, 0; 0, -55]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "true if motor\nshould be\nshut down"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Goto <sdo>"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		Points			[0, -15]
		DstBlock		"Relational\nOperator2"
		DstPort			2
	      }
	      Branch {
		DstBlock		"current-limited\npower"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, -20]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"MinMax"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "current-limited\npower"
	      SrcPort		      1
	      Points		      [60, 0; 0, 125]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "req'd input\npower (W)1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Sign"
	      SrcPort		      1
	      Points		      [20, 0; 0, -105]
	      DstBlock		      "current-limited\npower"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Abs"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "req'd input\npower (W)"
	      SrcPort		      1
	      Points		      [105, 0]
	      Branch {
		DstBlock		"Sign"
		DstPort			1
	      }
	      Branch {
		Points			[0, -35]
		DstBlock		"Abs"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [20, 0; 0, -40]
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "bus voltage"
	      SrcPort		      1
	      DstBlock		      "Memory"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "true if motor\nshould be\nshut down"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [0, -40]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      Points		      [290, 0; 0, -80]
	      DstBlock		      "true if motor\nshould be\nshut down"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "parallel clutch\ncontrol"
	  SID			  "3521"
	  Ports			  [4, 1]
	  Position		  [655, 255, 690, 335]
	  ForegroundColor	  "gray"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "parallel clutch\ncontrol"
	    Location		    [82, 224, 995, 846]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "3522"
	      Position		      [30, 18, 60, 32]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_in_r"
	      SID		      "3523"
	      Position		      [30, 58, 60, 72]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_in_r"
	      SID		      "3524"
	      Position		      [25, 168, 55, 182]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "engine on"
	      SID		      "3525"
	      Position		      [30, 388, 60, 402]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "3526"
	      Ports		      []
	      Position		      [835, 565, 891, 605]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[315, 744, 773, 944]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "3527"
		  Name			  "This clutch control block determines the clutch state given the req'd clutch output torque \nand speed ("
		  "labelled as gearbox input torque and speed), and the gear number history.\n                          conditions   "
		  "                                                                    clutch state\ngear is being shifted OR (trq <~"
		  " 0 AND (engine is                                     1 == disengaged\nclutched to avoid compression braking OR sp"
		  "d < idle))                                                              \n\n(trq >~ 0) AND (spd < launch speed) AN"
		  "D clutch                                       2 == slipping     \nwas not engaged during previous time step      "
		  "                                                           \n\nneither of above sets of conditions are met        "
		  "                                  3 == engaged\n\nBut the clutch is always disengaged when the engine is off or wa"
		  "s off within the past 0.5 s."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Clock
	      Name		      "Clock"
	      SID		      "3528"
	      Position		      [40, 535, 60, 555]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "3529"
	      Position		      [145, 83, 180, 107]
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "3530"
	      Position		      [145, 124, 225, 146]
	      Value		      "vc_clutch_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "3531"
	      Position		      [145, 189, 225, 211]
	      Value		      "vc_idle_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "3532"
	      Position		      [145, 255, 180, 275]
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "3533"
	      Position		      [145, 319, 225, 341]
	      Value		      "vc_launch_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "3534"
	      Position		      [570, 355, 605, 375]
	      BlockMirror	      on
	      Value		      "2.5"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "3535"
	      Position		      [790, 175, 810, 195]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      SID		      "3536"
	      Position		      [660, 110, 720, 140]
	      Expr		      "u[1]+2*u[2]*(1-u[1])*(1-u[3])+3*u[3]*(1-u[1])"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "3537"
	      Ports		      [2, 1]
	      Position		      [380, 67, 410, 98]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "3538"
	      Ports		      [2, 1]
	      Position		      [315, 127, 345, 158]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Manual Switch"
	      SID		      "3539"
	      Ports		      [2, 1]
	      Position		      [410, 387, 440, 423]
	      ForegroundColor	      "gray"
	      SourceBlock	      "simulink3/Nonlinear/Manual Switch"
	      SourceType	      "Manual Switch"
	      sw		      "1"
	      action		      "0"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "3540"
	      Position		      [570, 300, 600, 330]
	      BlockMirror	      on
	      X0		      "1+(2*(cyc_mph(1,2)>0))"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory1"
	      SID		      "3541"
	      Position		      [170, 415, 200, 445]
	      X0		      "cyc_mph(1,2)>0"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory2"
	      SID		      "3542"
	      Position		      [170, 565, 200, 595]
	      X0		      "-1"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "3543"
	      Ports		      [3, 1]
	      Position		      [590, 107, 625, 143]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "3544"
	      Ports		      [2, 1]
	      Position		      [300, 57, 330, 88]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "3545"
	      Ports		      [2, 1]
	      Position		      [260, 177, 290, 208]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "3546"
	      Ports		      [2, 1]
	      Position		      [260, 242, 290, 273]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      SID		      "3547"
	      Ports		      [2, 1]
	      Position		      [260, 307, 290, 338]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      SID		      "3548"
	      Ports		      [2, 1]
	      Position		      [235, 537, 265, 568]
	      Inputs		      "+-"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "3549"
	      Position		      [790, 120, 820, 150]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "3550"
	      Position		      [330, 400, 360, 430]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      TransportDelay
	      Name		      "Transport\nDelay"
	      SID		      "3551"
	      Ports		      [1, 1]
	      Position		      [170, 475, 200, 505]
	      DelayTime		      "0.2"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\ndisengaged"
	      SID		      "3552"
	      Ports		      [2, 1]
	      Position		      [450, 17, 480, 48]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nengaged"
	      SID		      "3553"
	      Ports		      [2, 1]
	      Position		      [520, 117, 550, 148]
	      Operator		      "NOR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping"
	      SID		      "3554"
	      Ports		      [3, 1]
	      Position		      [380, 254, 410, 286]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping1"
	      SID		      "3555"
	      Ports		      [2, 1]
	      Position		      [235, 386, 265, 419]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping2"
	      SID		      "3556"
	      Ports		      [2, 1]
	      Position		      [235, 466, 265, 499]
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch was NOT\nfully engaged\nduring last time step"
	      SID		      "3557"
	      Ports		      [2, 1]
	      Position		      [475, 305, 510, 340]
	      BlockMirror	      on
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "gearbox speed\nestimator"
	      SID		      "3558"
	      Ports		      [1, 1]
	      Position		      [80, 160, 110, 190]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"gearbox speed\nestimator"
		Location		[224, 217, 812, 726]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_in_r\nif no gear change"
		  SID			  "3559"
		  Position		  [45, 18, 75, 32]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "3560"
		  Ports			  []
		  Position		  [515, 345, 571, 385]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [497, 485, 832, 570]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "3561"
		    Name		    "The requested engine speed is replaced by an estimate of the\nengine's previous speed whenever the ve"
		    "hicle missed the trace\n by more than 1 mph on the last time step."
		    Position		    [167, 41]
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "3562"
		  Position		  [165, 240, 185, 260]
		  BlockMirror		  on
		  Value			  "eps"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "3563"
		  Position		  [315, 165, 335, 185]
		  BlockMirror		  on
		  Value			  "0"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "3564"
		  Position		  [230, 360, 250, 380]
		  BlockMirror		  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "3565"
		  Position		  [230, 460, 250, 480]
		  BlockMirror		  on
		  Value			  "0.11"
		}
		Block {
		  BlockType		  From
		  Name			  "From"
		  SID			  "3566"
		  Position		  [195, 40, 285, 70]
		  BlockMirror		  on
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "gb_spd_in_a"
		}
		Block {
		  BlockType		  From
		  Name			  "From <cyc>"
		  SID			  "3567"
		  Position		  [30, 304, 120, 336]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "cyc_mph_r"
		}
		Block {
		  BlockType		  From
		  Name			  "From <veh>"
		  SID			  "3568"
		  Position		  [30, 99, 85, 131]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "mpha"
		}
		Block {
		  BlockType		  From
		  Name			  "From <wh>/\ntire slip model (m/s)"
		  SID			  "3569"
		  Position		  [30, 184, 120, 216]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "veh_spd_a_rec"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  SID			  "3570"
		  Position		  [150, 97, 190, 133]
		  Gain			  "0.447"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical"
		  SID			  "3571"
		  Ports			  [2, 1]
		  Position		  [375, 317, 405, 348]
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "3572"
		  Position		  [370, 115, 400, 145]
		  X0			  "cyc_mph(1,2)*0.447/wh_radius*fd_ratio*gb_ratio(gb_num_init)"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "3573"
		  Position		  [310, 310, 340, 340]
		  X0			  "1"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "3574"
		  Ports			  [3, 1]
		  Position		  [215, 99, 245, 131]
		  Inputs		  "**/"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational"
		  SID			  "3575"
		  Ports			  [2, 1]
		  Position		  [225, 307, 255, 338]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational1"
		  SID			  "3576"
		  Ports			  [2, 1]
		  Position		  [225, 412, 255, 443]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "3577"
		  Ports			  [2, 1]
		  Position		  [160, 192, 190, 223]
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "3578"
		  Ports			  [2, 1]
		  Position		  [160, 297, 190, 328]
		  Inputs		  "-+"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "3579"
		  Position		  [310, 110, 340, 140]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "3580"
		  Position		  [445, 120, 475, 150]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "dt"
		  SID			  "3581"
		  Ports			  [0, 1]
		  Position		  [165, 408, 185, 432]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "dt"
		    Location		    [240, 561, 480, 665]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "3582"
		    Position		    [25, 25, 45, 45]
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "3583"
		    Position		    [75, 53, 105, 77]
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum4"
		    SID			    "3584"
		    Ports		    [2, 1]
		    Position		    [130, 27, 160, 58]
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "3585"
		    Position		    [185, 38, 215, 52]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "Sum4"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Sum4"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum4"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  SID			  "3586"
		  Position		  [545, 128, 575, 142]
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "dt"
		  SrcPort		  1
		  DstBlock		  "Relational1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical"
		  SrcPort		  1
		  Points		  [10, 0; 0, -200]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Logical"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational1"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From"
		  SrcPort		  1
		  Points		  [0, 50]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gb_spd_in_r\nif no gear change"
		  SrcPort		  1
		  Points		  [350, 0]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Relational"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <veh>"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    Points		    [0, 190]
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Gain"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "From <cyc>"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [0, -5]
		  DstBlock		  "Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  Labels		  [1, 0]
		  SrcBlock		  "From <wh>/\ntire slip model (m/s)"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    Points		    [0, -25; 155, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Product"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "clutch\nstate"
	      SID		      "3587"
	      Position		      [855, 128, 885, 142]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      Points		      [-15, 0; 0, -40]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      Points		      [15, 0; 0, -45]
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gb_trq_in_r"
	      SrcPort		      1
	      Points		      [70, 0]
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	      Branch {
		Points			[0, 185]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [90, 0; 0, -15]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      SrcPort		      1
	      Points		      [-120, 0; 0, -45]
	      DstBlock		      "clutch\nslipping"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      Points		      [-30, 0; 0, -35]
	      DstBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      Points		      [30, 0; 0, -55]
	      DstBlock		      "clutch\nslipping"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping"
	      SrcPort		      1
	      Points		      [80, 0; 0, -95]
	      Branch {
		Points			[80, 0]
		DstBlock		"Mux"
		DstPort			2
	      }
	      Branch {
		Points			[0, -35]
		DstBlock		"clutch\nengaged"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "clutch\nslipping"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\ndisengaged"
	      SrcPort		      1
	      Points		      [10, 0; 0, 40]
	      Branch {
		Points			[80, 0]
		DstBlock		"Mux"
		DstPort			1
	      }
	      Branch {
		Points			[0, 50]
		DstBlock		"clutch\nengaged"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "clutch\nengaged"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      DstBlock		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "engine on"
	      SrcPort		      1
	      Points		      [80, 0]
	      Branch {
		DstBlock		"clutch\nslipping1"
		DstPort			1
	      }
	      Branch {
		Points			[0, 35]
		Branch {
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 30]
		  Branch {
		    Points		    [0, 30]
		    DstBlock		    "Transport\nDelay"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [75, 0]
		    DstBlock		    "clutch\nslipping2"
		    DstPort		    1
		  }
		}
	      }
	      Branch {
		Points			[0, -20; 250, 0]
		DstBlock		"Manual Switch"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Memory1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "clutch\nslipping1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping1"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Transport\nDelay"
	      SrcPort		      1
	      DstBlock		      "clutch\nslipping2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping2"
	      SrcPort		      1
	      Points		      [25, 0; 0, -60]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Clock"
	      SrcPort		      1
	      Points		      [80, 0]
	      Branch {
		DstBlock		"Sum"
		DstPort			1
	      }
	      Branch {
		Points			[0, 35]
		DstBlock		"Memory2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Memory2"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "Switch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gb_spd_in_r"
	      SrcPort		      1
	      DstBlock		      "gearbox speed\nestimator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gearbox speed\nestimator"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[105, 0; 0, 10]
		DstBlock		"Relational\nOperator1"
		DstPort			1
	      }
	      Branch {
		Points			[0, 140]
		DstBlock		"Relational\nOperator3"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "Manual Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Manual Switch"
	      SrcPort		      1
	      Points		      [315, 0; 0, -270]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"clutch\nstate"
		DstPort			1
	      }
	      Branch {
		Points			[0, 180]
		DstBlock		"Memory"
		DstPort			1
	      }
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "pre-TX parallel\ngearbox control"
	  SID			  "3588"
	  Ports			  [4, 3]
	  Position		  [275, 58, 310, 157]
	  FontName		  "Arial"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "pre-TX parallel\ngearbox control"
	    Location		    [8, 74, 995, 742]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_out_r"
	      SID		      "3589"
	      Position		      [45, 75, 65, 95]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_out_r"
	      SID		      "3590"
	      Position		      [45, 320, 65, 340]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "prev.\nPout/Pin"
	      SID		      "3591"
	      Position		      [45, 175, 65, 195]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "tires are at\ntraction limit"
	      SID		      "3592"
	      Position		      [45, 20, 65, 40]
	      FontName		      "Arial"
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "3593"
	      Ports		      []
	      Position		      [875, 615, 931, 655]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[229, 259, 687, 388]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "3594"
		  Name			  "This gearbox control block computes the current gear number given the gearbox's\nreq'd output torque and"
		  " speed and an estimate its efficiency.  Upshifts occur, given a\ncertain engine speed,  when the estimated engine "
		  "load falls below the upshift curve\nin engine speed/load space, and downshifts likewise occur when estimated engin"
		  "e\nload rises above the downshift curve.  Separate upshift and downshift curves are\ndefined for each gear.  An up"
		  "shift may not be immediately followed by a downshift.\nIf the tires are about to slip, don't upshift unless the en"
		  "gine would be at max. speed.\nEnforce this rule by setting the load to 1 when the tires are about to slip."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "3595"
	      Position		      [330, 40, 350, 60]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "3596"
	      Position		      [525, 200, 545, 220]
	      BlockMirror	      on
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant14"
	      SID		      "3597"
	      Position		      [435, 588, 530, 602]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant15"
	      SID		      "3598"
	      Position		      [365, 453, 460, 467]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "3599"
	      Position		      [525, 285, 545, 305]
	      BlockMirror	      on
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      SID		      "3600"
	      Ports		      [1, 2]
	      Position		      [705, 441, 710, 479]
	      BackgroundColor	      "black"
	      ShowName		      off
	      Outputs		      "2"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      SID		      "3601"
	      Position		      [535, 560, 660, 580]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <logic>2"
	      SID		      "3602"
	      Position		      [15, 514, 120, 546]
	      ForegroundColor	      "red"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "v_req_limited"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      SID		      "3603"
	      Position		      [535, 620, 660, 640]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From2"
	      SID		      "3604"
	      Position		      [475, 480, 600, 500]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From3"
	      SID		      "3605"
	      Position		      [475, 505, 600, 525]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From4"
	      SID		      "3606"
	      Position		      [475, 415, 600, 435]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      SID		      "3607"
	      Position		      [470, 302, 495, 328]
	      FontName		      "Arial"
	      Gain		      "-1"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto"
	      SID		      "3608"
	      Position		      [240, 505, 360, 525]
	      NamePlacement	      "alternate"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto1"
	      SID		      "3609"
	      Position		      [240, 529, 360, 551]
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto4"
	      SID		      "3610"
	      Position		      [805, 370, 940, 390]
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto5"
	      SID		      "3611"
	      Position		      [825, 185, 935, 205]
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto6"
	      SID		      "3612"
	      Position		      [830, 260, 940, 280]
	      NamePlacement	      "alternate"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "3613"
	      Ports		      [2, 1]
	      Position		      [620, 477, 625, 528]
	      ShowName		      off
	      Inputs		      "2"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      SID		      "3614"
	      Ports		      [2, 1]
	      Position		      [225, 87, 255, 118]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      RateLimiter
	      Name		      "Rate Limiter"
	      SID		      "3615"
	      Position		      [510, 367, 540, 393]
	      BlockMirror	      on
	      RisingSlewLimit	      "1/(gb_shift_delay+eps)"
	      FallingSlewLimit	      "-1/(gb_shift_delay+eps)"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "3616"
	      Ports		      [1, 1]
	      Position		      [80, 175, 110, 195]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "0.2"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation1"
	      SID		      "3617"
	      Ports		      [1, 1]
	      Position		      [710, 186, 730, 204]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "gb_gears_num"
	      LowerLimit	      "1"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Speed Dependent Shifting"
	      SID		      "3618"
	      Ports		      [1, 2]
	      Position		      [165, 502, 195, 553]
	      SourceBlock	      "lib_controls/SubSystem/Speed Dependent Shifting"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "off"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "3619"
	      Position		      [325, 80, 355, 110]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "3620"
	      Position		      [520, 235, 550, 265]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch2"
	      SID		      "3621"
	      Position		      [520, 155, 550, 185]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch3"
	      SID		      "3622"
	      Position		      [680, 580, 710, 610]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch4"
	      SID		      "3623"
	      Position		      [650, 445, 680, 475]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To WS"
	      SID		      "3624"
	      Ports		      [1]
	      Position		      [360, 339, 400, 361]
	      BackgroundColor	      "red"
	      VariableName	      "spd"
	      MaxDataPoints	      "inf"
	      SampleTime	      "-1"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "allow downshift?"
	      SID		      "3625"
	      Ports		      [1, 1]
	      Position		      [420, 232, 450, 268]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"allow downshift?"
		Location		[328, 265, 817, 480]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gearnum"
		  SID			  "3626"
		  Position		  [35, 35, 55, 55]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  SID			  "3627"
		  Ports			  [2, 1]
		  Position		  [375, 43, 405, 67]
		  FontName		  "Arial"
		  Operator		  "NOR"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "3628"
		  Position		  [145, 60, 180, 80]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "3629"
		  Position		  [145, 105, 180, 125]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "3630"
		  Ports			  [2, 1]
		  Position		  [225, 38, 255, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator2"
		  SID			  "3631"
		  Ports			  [2, 1]
		  Position		  [225, 98, 255, 122]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  Outport
		  Name			  "allow shift"
		  SID			  "3632"
		  Position		  [445, 45, 465, 65]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator2"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [0, 30; -60, 0]
		    DstBlock		    "Memory1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [15, 0; 0, -15]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gearnum"
		  SrcPort		  1
		  Points		  [45, 0]
		  Branch {
		    Points		    [0, 25]
		    Branch {
		    Points		    [0, 35]
		    DstBlock		    "Relational\nOperator2"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  DstBlock		  "allow shift"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "allow upshift?"
	      SID		      "3633"
	      Ports		      [4, 1]
	      Position		      [420, 152, 450, 188]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"allow upshift?"
		Location		[132, 265, 847, 659]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gearnum"
		  SID			  "3634"
		  Position		  [35, 25, 55, 45]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_trq_out_r"
		  SID			  "3635"
		  Position		  [35, 145, 55, 165]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_out_r"
		  SID			  "3636"
		  Position		  [35, 105, 55, 125]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "prev Pout/Pin"
		  SID			  "3637"
		  Position		  [35, 185, 55, 205]
		  Port			  "4"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES1"
		  SID			  "3638"
		  Ports			  []
		  Position		  [645, 340, 701, 380]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES1"
		    Location		    [229, 259, 576, 405]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "3639"
		    Name		    "This block prevents an upshift if it the engine is not on and\nthe upshift would make the motor power"
		    " low enough that it\ncould not provide the required input power.  However, an upshift\nis allowed if to stay in "
		    "the current gear would put the motor\nbeyond 95% of its maximum speed.\n\nThis block is to be used in pretransmi"
		    "ssion parallel hybrids\n(where the engine and motor torques are combined on the\nengine side of the transmission"
		    ") ONLY."
		    Position		    [172, 12]
		    VerticalAlignment	    "top"
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "3640"
		  Position		  [110, 75, 130, 95]
		  BlockMirror		  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "3641"
		  Position		  [100, 347, 375, 373]
		  Value			  "max(mc_map_spd)*mc_spd_scale/tc_mc_to_fc_ratio*.95"
		}
		Block {
		  BlockType		  From
		  Name			  "From <vc>"
		  SID			  "3642"
		  Position		  [15, 232, 80, 258]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "engine_on"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator1"
		  SID			  "3643"
		  Ports			  [3, 1]
		  Position		  [615, 53, 645, 97]
		  Operator		  "OR"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "3644"
		  Position		  [125, 230, 155, 260]
		  X0			  "1"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "3645"
		  Ports			  [2, 1]
		  Position		  [310, 37, 340, 68]
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "3646"
		  Ports			  [2, 1]
		  Position		  [540, 42, 570, 73]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "3647"
		  Ports			  [2, 1]
		  Position		  [395, 287, 425, 318]
		  Operator		  ">"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation"
		  SID			  "3648"
		  Ports			  [1, 1]
		  Position		  [165, 29, 205, 61]
		  InputPortMap		  "u0"
		  FontName		  "Arial"
		  UpperLimit		  "gb_gears_num"
		  LowerLimit		  "1"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "3649"
		  Ports			  [2, 1]
		  Position		  [105, 27, 135, 58]
		}
		Block {
		  BlockType		  Product
		  Name			  "est. req'd\ninput pwr\n(W)"
		  SID			  "3650"
		  Ports			  [3, 1]
		  Position		  [310, 109, 340, 141]
		  Inputs		  "**/"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "gear ratio"
		  SID			  "3651"
		  Position		  [245, 33, 275, 57]
		  FontName		  "Arial"
		  InputValues		  "[1:length(gb_ratio)]"
		  Table			  "gb_ratio"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "gear ratio1"
		  SID			  "3652"
		  Position		  [250, 258, 280, 282]
		  FontName		  "Arial"
		  InputValues		  "[1:length(gb_ratio)]"
		  Table			  "gb_ratio"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "motor\ntorque\ncapability"
		  SID			  "3653"
		  Position		  [380, 45, 410, 65]
		  FontName		  "Arial"
		  InputValues		  "mc_map_spd*mc_spd_scale"
		  Table			  "mc_max_trq*mc_trq_scale*mc_overtrq_factor+eps"
		}
		Block {
		  BlockType		  Product
		  Name			  "motor (input to gb)\npwr capability"
		  SID			  "3654"
		  Ports			  [2, 1]
		  Position		  [455, 32, 485, 63]
		}
		Block {
		  BlockType		  Product
		  Name			  "req'd input spd\nif no gear change"
		  SID			  "3655"
		  Ports			  [2, 1]
		  Position		  [310, 276, 340, 309]
		}
		Block {
		  BlockType		  Outport
		  Name			  "allow shift"
		  SID			  "3656"
		  Position		  [675, 65, 695, 85]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [430, 0; 0, -170]
		  DstBlock		  "Logical\nOperator1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <vc>"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical\nOperator1"
		  SrcPort		  1
		  DstBlock		  "allow shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev Pout/Pin"
		  SrcPort		  1
		  Points		  [225, 0; 0, -60]
		  DstBlock		  "est. req'd\ninput pwr\n(W)"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "gb_trq_out_r"
		  SrcPort		  1
		  Points		  [215, 0; 0, -30]
		  DstBlock		  "est. req'd\ninput pwr\n(W)"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "est. req'd\ninput pwr\n(W)"
		  SrcPort		  1
		  Points		  [175, 0; 0, -60]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "motor (input to gb)\npwr capability"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    Points		    [0, -15]
		    DstBlock		    "motor (input to gb)\npwr capability"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "motor\ntorque\ncapability"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "motor\ntorque\ncapability"
		  SrcPort		  1
		  DstBlock		  "motor (input to gb)\npwr capability"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "gear ratio"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation"
		  SrcPort		  1
		  DstBlock		  "gear ratio"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Saturation"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "gear ratio1"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "req'd input spd\nif no gear change"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gearnum"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 235]
		    DstBlock		    "gear ratio1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "gb_spd_out_r"
		  SrcPort		  1
		  Points		  [150, 0]
		  Branch {
		    Points		    [85, 0]
		    Branch {
		    DstBlock		    "est. req'd\ninput pwr\n(W)"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		  }
		  Branch {
		    Points		    [0, 185]
		    DstBlock		    "req'd input spd\nif no gear change"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  Points		  [170, 0]
		  DstBlock		  "Logical\nOperator1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "req'd input spd\nif no gear change"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "current\ngear\nnumber"
	      SID		      "3657"
	      Ports		      [2, 1]
	      Position		      [655, 177, 675, 213]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "delta\ngear\nnumber"
	      SID		      "3658"
	      Position		      [585, 189, 615, 221]
	      FontName		      "Arial"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "downshift \ncommand"
	      SID		      "3659"
	      Ports		      [3, 1]
	      Position		      [420, 289, 450, 341]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"downshift \ncommand"
		Location		[431, 372, 906, 667]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "3660"
		  Position		  [45, 98, 75, 112]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "3661"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "3662"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "3663"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "3664"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "3665"
		  Ports			  [1, 1]
		  Position		  [240, 100, 270, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_dnshift_spd|gb_dnshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "3666"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "3667"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "3668"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "3669"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [55, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "engine\ntorque\ncapability"
	      SID		      "3670"
	      Position		      [185, 205, 215, 225]
	      BlockRotation	      270
	      FontName		      "Arial"
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      Table		      "fc_max_trq*fc_trq_scale+eps"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "gb_spd_in_r"
	      SID		      "3671"
	      Ports		      [2, 1]
	      Position		      [150, 323, 170, 347]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio"
	      SID		      "3672"
	      Position		      [400, 368, 430, 392]
	      BlockMirror	      on
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      Table		      "gb_ratio"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio1"
	      SID		      "3673"
	      Position		      [775, 183, 805, 207]
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      Table		      "gb_ratio"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "gearbox speed\nestimator"
	      SID		      "3674"
	      Ports		      [1, 1]
	      Position		      [275, 320, 305, 350]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"gearbox speed\nestimator"
		Location		[224, 217, 812, 726]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_in_r\nif no gear change"
		  SID			  "3675"
		  Position		  [45, 18, 75, 32]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "3676"
		  Ports			  []
		  Position		  [515, 345, 571, 385]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [497, 485, 832, 570]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "3677"
		    Name		    "The requested engine speed is replaced by an estimate of the\nengine's previous speed whenever the ve"
		    "hicle missed the trace\n by more than 1 mph on the last time step."
		    Position		    [167, 41]
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "3678"
		  Position		  [165, 240, 185, 260]
		  BlockMirror		  on
		  Value			  "eps"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "3679"
		  Position		  [315, 165, 335, 185]
		  BlockMirror		  on
		  Value			  "0"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "3680"
		  Position		  [230, 360, 250, 380]
		  BlockMirror		  on
		  Value			  "2"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "3681"
		  Position		  [230, 460, 250, 480]
		  BlockMirror		  on
		  Value			  "0.11"
		}
		Block {
		  BlockType		  From
		  Name			  "From"
		  SID			  "3682"
		  Position		  [195, 40, 285, 70]
		  BlockMirror		  on
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "gb_spd_in_a"
		}
		Block {
		  BlockType		  From
		  Name			  "From <cyc>"
		  SID			  "3683"
		  Position		  [30, 304, 120, 336]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "cyc_mph_r"
		}
		Block {
		  BlockType		  From
		  Name			  "From <veh>"
		  SID			  "3684"
		  Position		  [30, 99, 85, 131]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "mpha"
		}
		Block {
		  BlockType		  From
		  Name			  "From <wh>/\ntire slip model (m/s)"
		  SID			  "3685"
		  Position		  [30, 184, 120, 216]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "veh_spd_a_rec"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  SID			  "3686"
		  Position		  [150, 97, 190, 133]
		  Gain			  "0.447"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical"
		  SID			  "3687"
		  Ports			  [2, 1]
		  Position		  [375, 317, 405, 348]
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "3688"
		  Position		  [370, 110, 400, 140]
		  X0			  "cyc_mph(1,2)*0.447/wh_radius*fd_ratio*gb_ratio(gb_num_init)"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "3689"
		  Position		  [310, 310, 340, 340]
		  X0			  "1"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "3690"
		  Ports			  [3, 1]
		  Position		  [215, 99, 245, 131]
		  Inputs		  "**/"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational"
		  SID			  "3691"
		  Ports			  [2, 1]
		  Position		  [225, 307, 255, 338]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational1"
		  SID			  "3692"
		  Ports			  [2, 1]
		  Position		  [225, 412, 255, 443]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "3693"
		  Ports			  [2, 1]
		  Position		  [160, 192, 190, 223]
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "3694"
		  Ports			  [2, 1]
		  Position		  [160, 297, 190, 328]
		  Inputs		  "-+"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "3695"
		  Position		  [310, 110, 340, 140]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "3696"
		  Position		  [445, 120, 475, 150]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "dt"
		  SID			  "3697"
		  Ports			  [0, 1]
		  Position		  [165, 408, 185, 432]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "dt"
		    Location		    [240, 561, 480, 665]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "3698"
		    Position		    [25, 25, 45, 45]
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "3699"
		    Position		    [75, 53, 105, 77]
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum4"
		    SID			    "3700"
		    Ports		    [2, 1]
		    Position		    [130, 27, 160, 58]
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "3701"
		    Position		    [185, 38, 215, 52]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "Sum4"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Sum4"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum4"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  SID			  "3702"
		  Position		  [545, 128, 575, 142]
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "dt"
		  SrcPort		  1
		  DstBlock		  "Relational1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical"
		  SrcPort		  1
		  Points		  [10, 0; 0, -200]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Logical"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational1"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From"
		  SrcPort		  1
		  Points		  [0, 50]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gb_spd_in_r\nif no gear change"
		  SrcPort		  1
		  Points		  [350, 0]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Relational"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <veh>"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    Points		    [0, 190]
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Gain"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "From <cyc>"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  Labels		  [1, 0]
		  SrcBlock		  "From <wh>/\ntire slip model (m/s)"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    Points		    [0, -25; 155, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Product"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "load=T/\n(maxT\nat spd)"
	      SID		      "3703"
	      Ports		      [1, 1]
	      Position		      [275, 96, 295, 114]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "0"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev gear\nnumber"
	      SID		      "3704"
	      Position		      [670, 35, 710, 55]
	      BlockMirror	      on
	      FontName		      "Arial"
	      X0		      "gb_num_init"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev gear\nratio"
	      SID		      "3705"
	      Position		      [205, 370, 240, 390]
	      BlockMirror	      on
	      FontName		      "Arial"
	      X0		      "gb_ratio(gb_num_init)"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "shifting1"
	      SID		      "3706"
	      Ports		      [1, 1]
	      Position		      [775, 254, 805, 286]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"shifting1"
		Location		[166, 208, 456, 399]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gear\nnumber"
		  SID			  "3707"
		  Position		  [15, 50, 35, 70]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "3708"
		  Position		  [20, 131, 120, 159]
		  FontName		  "Arial"
		  Value			  "gb_shift_delay-1e-6"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "3709"
		  Ports			  [2, 1]
		  Position		  [185, 53, 215, 77]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "time since last shift"
		  SID			  "3710"
		  Ports			  [1, 1]
		  Position		  [65, 43, 125, 77]
		  ShowName		  off
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('time since\\nlast shift')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "time since last shift"
		    Location		    [16, 396, 306, 535]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "3711"
		    Position		    [10, 60, 30, 80]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "just shifted"
		    SID			    "3712"
		    Ports		    [1, 1]
		    Position		    [60, 57, 110, 83]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('just\\nshifted')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "just shifted"
		    Location		    [140, 214, 463, 359]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "3713"
		    Position		    [55, 55, 75, 75]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "3714"
		    Position		    [120, 55, 155, 75]
		    FontName		    "Arial"
		    X0			    "1"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    SID			    "3715"
		    Ports		    [2, 1]
		    Position		    [190, 58, 220, 82]
		    FontName		    "Arial"
		    Operator		    "~="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "3716"
		    Position		    [250, 60, 270, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, 30; 75, 0; 0, -20]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "timer"
		    SID			    "3717"
		    Ports		    [1, 1]
		    Position		    [140, 55, 175, 85]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('timer')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "timer"
		    Location		    [455, 179, 859, 394]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "trigger"
		    SID			    "3718"
		    Position		    [15, 125, 35, 145]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "3719"
		    Position		    [100, 100, 120, 120]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant1"
		    SID			    "3720"
		    Position		    [100, 150, 120, 170]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant2"
		    SID			    "3721"
		    Position		    [150, 5, 170, 25]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "3722"
		    Position		    [265, 59, 295, 91]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "no-lag\nReset Integrator"
		    SID			    "3723"
		    Ports		    [3, 1]
		    Position		    [155, 96, 205, 174]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskType		    "No-lag Reset Integrator"
		    MaskDescription	    "No-lag Reset Integrator"
		    MaskHelp		    "Integrates first input using Euler technique.\\nAt the time step that input 2 <> zero,\\noutput i"
		    "s reset to input 3."
		    MaskPromptString	    "Initial Value"
		    MaskStyleString	    "edit"
		    MaskVariables	    "initval=@1;"
		    MaskTunableValueString  "on"
		    MaskEnableString	    "on"
		    MaskVisibilityString    "on"
		    MaskToolTipString	    "on"
		    MaskDisplay		    "disp('1/s\\nw/ reset\\nno lag')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "15"
		    System {
		    Name		    "no-lag\nReset Integrator"
		    Location		    [258, 616, 780, 880]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "3724"
		    Position		    [60, 100, 80, 120]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    SID			    "3725"
		    Position		    [60, 140, 80, 160]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_3"
		    SID			    "3726"
		    Position		    [45, 185, 65, 205]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "3727"
		    Position		    [125, 205, 145, 225]
		    BlockRotation	    270
		    NamePlacement	    "alternate"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "3728"
		    Position		    [340, 55, 375, 75]
		    BlockMirror		    on
		    FontName		    "Arial"
		    X0			    "initval"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    SID			    "3729"
		    Ports		    [2, 1]
		    Position		    [160, 96, 180, 114]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    SID			    "3730"
		    Ports		    [2, 1]
		    Position		    [230, 90, 250, 110]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "3731"
		    Position		    [290, 139, 320, 171]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "dt"
		    SID			    "3732"
		    Ports		    [0, 1]
		    Position		    [112, 50, 138, 80]
		    BlockRotation	    270
		    BlockMirror		    on
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "dt"
		    Location		    [80, 285, 429, 424]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "3733"
		    Position		    [65, 60, 85, 80]
		    FontName		    "Arial"
		    FontSize		    8
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "3734"
		    Position		    [125, 85, 160, 105]
		    FontName		    "Arial"
		    FontSize		    8
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    SID			    "3735"
		    Ports		    [2, 1]
		    Position		    [205, 65, 225, 85]
		    FontName		    "Arial"
		    FontSize		    8
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "3736"
		    Position		    [255, 65, 275, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [10, 0; 0, -15]
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "in_2==0"
		    SID			    "3737"
		    Ports		    [2, 1]
		    Position		    [160, 143, 190, 167]
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "3738"
		    Position		    [455, 145, 475, 165]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_3"
		    SrcPort		    1
		    Points		    [200, 0; 0, -30]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "in_2==0"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "dt"
		    SrcPort		    1
		    Points		    [0, 15]
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    Points		    [-130, 0; 0, 30]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    Points		    [10, 0; 0, 45]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    Points		    [85, 0]
		    Branch {
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -90]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "in_2==0"
		    SrcPort		    1
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    Points		    [0, -40]
		    DstBlock		    "in_2==0"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "time"
		    SID			    "3739"
		    Position		    [350, 65, 370, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    DstBlock		    "time"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "trigger"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, -60]
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Constant2"
		    SrcPort		    1
		    Points		    [35, 0; 0, 50]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant1"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "no-lag\nReset Integrator"
		    SrcPort		    1
		    Points		    [35, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "3740"
		    Position		    [225, 60, 245, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "just shifted"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "just shifted"
		    SrcPort		    1
		    DstBlock		    "timer"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "timer"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "3741"
		  Position		  [250, 55, 270, 75]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gear\nnumber"
		  SrcPort		  1
		  DstBlock		  "time since last shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [15, 0; 0, -75]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "time since last shift"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "upshift\n command"
	      SID		      "3742"
	      Ports		      [3, 1]
	      Position		      [420, 64, 450, 116]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"upshift\n command"
		Location		[324, 355, 799, 650]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "3743"
		  Position		  [45, 103, 75, 117]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "3744"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "3745"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "3746"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "3747"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "3748"
		  Ports			  [1, 1]
		  Position		  [245, 100, 275, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_upshift_spd|gb_upshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "3749"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "3750"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "3751"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "3752"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [50, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Product
	      Name		      "~gb_trq_in_r"
	      SID		      "3753"
	      Ports		      [3, 1]
	      Position		      [150, 77, 170, 113]
	      FontName		      "Arial"
	      Inputs		      "*//"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear number, out"
	      SID		      "3754"
	      Position		      [775, 585, 795, 605]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear ratio, out"
	      SID		      "3755"
	      Position		      [775, 425, 795, 445]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "shifting, out"
	      SID		      "3756"
	      Position		      [775, 470, 795, 490]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "gb_spd_in_r"
	      SrcPort		      1
	      DstBlock		      "gearbox speed\nestimator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "load=T/\n(maxT\nat spd)"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "allow downshift?"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "downshift \ncommand"
	      SrcPort		      1
	      DstBlock		      "Gain1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "engine\ntorque\ncapability"
	      SrcPort		      1
	      Points		      [0, -90]
	      DstBlock		      "Product2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "delta\ngear\nnumber"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch2"
	      SrcPort		      1
	      Points		      [15, 0; 0, 25]
	      Branch {
		DstBlock		"delta\ngear\nnumber"
		DstPort			2
	      }
	      Branch {
		DstBlock		"delta\ngear\nnumber"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "delta\ngear\nnumber"
	      SrcPort		      1
	      DstBlock		      "current\ngear\nnumber"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "current\ngear\nnumber"
	      SrcPort		      1
	      DstBlock		      "Saturation1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, 0]
		Branch {
		  Points		  [0, -150]
		  DstBlock		  "prev gear\nnumber"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "gear ratio1"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[0, 75]
		Branch {
		  DstBlock		  "shifting1"
		  DstPort		  1
		}
		Branch {
		  Labels		  [1, 0]
		  Points		  [0, 110]
		  Branch {
		    DstBlock		    "Rate Limiter"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Goto4"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Line {
	      SrcBlock		      "prev gear\nnumber"
	      SrcPort		      1
	      Points		      [-30, 0]
	      Branch {
		Points			[-240, 0; 0, 205]
		Branch {
		  DstBlock		  "allow downshift?"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, -170]
		  Branch {
		    Points		    [0, 75]
		    Branch {
		    DstBlock		    "allow upshift?"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 145]
		    DstBlock		    "downshift \ncommand"
		    DstPort		    1
		    }
		  }
		  Branch {
		    Points		    [10, 0]
		    DstBlock		    "upshift\n command"
		    DstPort		    1
		  }
		}
	      }
	      Branch {
		Points			[0, 140]
		DstBlock		"current\ngear\nnumber"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch2"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "prev.\nPout/Pin"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"allow upshift?"
		DstPort			4
	      }
	      Branch {
		Points			[0, -90]
		DstBlock		"~gb_trq_in_r"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      Points		      [0, -75]
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gb_spd_out_r"
	      SrcPort		      1
	      Points		      [60, 0]
	      Branch {
		Points			[0, -155]
		DstBlock		"allow upshift?"
		DstPort			3
	      }
	      Branch {
		DstBlock		"gb_spd_in_r"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "gb_trq_out_r"
	      SrcPort		      1
	      Points		      [60, 0]
	      Branch {
		Points			[0, 80]
		DstBlock		"allow upshift?"
		DstPort			2
	      }
	      Branch {
		DstBlock		"~gb_trq_in_r"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "prev gear\nratio"
	      SrcPort		      1
	      Points		      [-75, 0; 0, -40]
	      Branch {
		Points			[0, -235]
		DstBlock		"~gb_trq_in_r"
		DstPort			3
	      }
	      Branch {
		DstBlock		"gb_spd_in_r"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "gear ratio"
	      SrcPort		      1
	      DstBlock		      "prev gear\nratio"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Rate Limiter"
	      SrcPort		      1
	      DstBlock		      "gear ratio"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "load=T/\n(maxT\nat spd)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "~gb_trq_in_r"
	      SrcPort		      1
	      DstBlock		      "Product2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "tires are at\ntraction limit"
	      SrcPort		      1
	      Points		      [230, 0; 0, 65]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		Points			[20, 0]
		DstBlock		"upshift\n command"
		DstPort			2
	      }
	      Branch {
		Points			[0, 220]
		DstBlock		"downshift \ncommand"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "upshift\n command"
	      SrcPort		      1
	      Points		      [50, 0]
	      DstBlock		      "Switch2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "allow upshift?"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gearbox speed\nestimator"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		Points			[10, 0]
		Branch {
		  Points		  [0, -80; -145, 0]
		  DstBlock		  "engine\ntorque\ncapability"
		  DstPort		  1
		}
		Branch {
		  Points		  [30, 0]
		  Branch {
		    Points		    [0, -230]
		    DstBlock		    "upshift\n command"
		    DstPort		    3
		  }
		  Branch {
		    Points		    [30, 0]
		    DstBlock		    "downshift \ncommand"
		    DstPort		    3
		  }
		}
	      }
	      Branch {
		Points			[0, 15]
		DstBlock		"To WS"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant15"
	      SrcPort		      1
	      DstBlock		      "Switch4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From4"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Switch4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Switch4"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From2"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From3"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch4"
	      SrcPort		      1
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "gear ratio, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant14"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From <logic>2"
	      SrcPort		      1
	      DstBlock		      "Speed Dependent Shifting"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      1
	      DstBlock		      "Goto"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      2
	      DstBlock		      "Goto1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      Points		      [45, 0]
	      DstBlock		      "shifting, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch3"
	      SrcPort		      1
	      DstBlock		      "gear number, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "shifting1"
	      SrcPort		      1
	      DstBlock		      "Goto6"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gear ratio1"
	      SrcPort		      1
	      DstBlock		      "Goto5"
	      DstPort		      1
	    }
	    Annotation {
	      SID		      "3757"
	      Name		      "default gear number\ncalculation"
	      Position		      [879, 414]
	    }
	    Annotation {
	      SID		      "3758"
	      Name		      "default shifting\ncalculation"
	      Position		      [888, 301]
	    }
	    Annotation {
	      SID		      "3759"
	      Name		      "default gear ratio\ncalculation"
	      Position		      [877, 154]
	    }
	    Annotation {
	      SID		      "3760"
	      Name		      "local GOTO blocks:"
	      Position		      [857, 102]
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "sim stop\nsubsystem"
	  SID			  "3761"
	  Ports			  []
	  Position		  [50, 30, 80, 80]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/sim stop\nsubsystem"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  Outport
	  Name			  "clutch\nstate"
	  SID			  "3762"
	  Position		  [765, 288, 795, 302]
	  IconDisplay		  "Port number"
	}
	Line {
	  SrcBlock		  "From <fc>"
	  SrcPort		  1
	  DstBlock		  "engine on\n(Adaptive)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "engine on\n(Adaptive)"
	  SrcPort		  1
	  DstBlock		  "Goto <fc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "motor controller\nlogic"
	  SrcPort		  1
	  DstBlock		  "Goto <mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <mc>1"
	  SrcPort		  1
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <mc>"
	  SrcPort		  1
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <ess>"
	  SrcPort		  1
	  Points		  [0, 5]
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>8"
	  SrcPort		  1
	  Points		  [15, 0]
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <gb>2"
	  SrcPort		  1
	  DstBlock		  "pre-TX parallel\ngearbox control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <gb>1"
	  SrcPort		  1
	  Points		  [5, 0]
	  DstBlock		  "pre-TX parallel\ngearbox control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From<gb>"
	  SrcPort		  1
	  Points		  [5, 0]
	  DstBlock		  "pre-TX parallel\ngearbox control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>3"
	  SrcPort		  1
	  Points		  [0, -5]
	  DstBlock		  "pre-TX parallel\ngearbox control"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  3
	  Points		  [0, 15]
	  DstBlock		  "Goto <wh>2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  2
	  Points		  [0, 10]
	  DstBlock		  "Goto <wh>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <veh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>5"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  1
	  Points		  [0, 10; 5, 0]
	  Branch {
	    DstBlock		    "braking strategy"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [195, 0]
	    Branch {
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Branch {
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  2
	  Points		  [130, 0]
	  Branch {
	    DstBlock		    "Sum"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -45]
	    DstBlock		    "Goto <wh>8"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "parallel clutch\ncontrol"
	  SrcPort		  1
	  Points		  [20, 0]
	  Branch {
	    DstBlock		    "Goto <sdo>"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "clutch\nstate"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "From <gb>5"
	  SrcPort		  1
	  Points		  [0, -45]
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <gb>4"
	  SrcPort		  1
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <gb>6"
	  SrcPort		  1
	  Points		  [10, 0]
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <gb>7"
	  SrcPort		  1
	  Points		  [15, 0]
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Relational\nOperator"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>4"
	  SrcPort		  1
	  DstBlock		  "Relational\nOperator"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <wh>"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "config traction control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <wh>1"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>7"
	  SrcPort		  1
	  DstBlock		  "braking strategy"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>5"
	  SrcPort		  1
	  Points		  [0, -5]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "From<wh>4"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <wh>3"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <wh>2"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>6"
	  SrcPort		  1
	  Points		  [55, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "pre-TX parallel\ngearbox control"
	  SrcPort		  1
	  DstBlock		  "Goto <gb>2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "pre-TX parallel\ngearbox control"
	  SrcPort		  2
	  DstBlock		  "Goto <gb>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "pre-TX parallel\ngearbox control"
	  SrcPort		  3
	  DstBlock		  "Goto <gb>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  4
	  Points		  [15, 0]
	  DstBlock		  "Goto <wh>6"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  5
	  Points		  [10, 0]
	  DstBlock		  "Goto <wh>7"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Ground"
	  SrcPort		  1
	  Points		  [5, 0; 0, -55]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  6
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "<vc> par auto"
      SID		      "309"
      Ports		      [0, 1]
      Position		      [265, 144, 330, 196]
      BackgroundColor	      "yellow"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_vc.jpg'))\n"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"<vc> par auto"
	Location		[10, 112, 950, 1190]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"93"
	Block {
	  BlockType		  From
	  Name			  "From <ess>"
	  SID			  "3763"
	  Position		  [580, 70, 675, 90]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "bus_voltage"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>"
	  SID			  "3764"
	  Position		  [570, 537, 665, 553]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_spd_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>1"
	  SID			  "3765"
	  Position		  [165, 136, 255, 154]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>2"
	  SID			  "3766"
	  Position		  [155, 46, 250, 64]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "eta_gb"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>3"
	  SID			  "3767"
	  Position		  [160, 165, 255, 185]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "slip_limited"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>4"
	  SID			  "3768"
	  Position		  [575, 301, 670, 319]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>5"
	  SID			  "3769"
	  Position		  [570, 507, 665, 523]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>6"
	  SID			  "3770"
	  Position		  [575, 337, 670, 353]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>7"
	  SID			  "3771"
	  Position		  [570, 471, 665, 489]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>"
	  SID			  "3772"
	  Position		  [580, 105, 675, 125]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "P_mc_in_1lim"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>1"
	  SID			  "3773"
	  Position		  [585, 134, 675, 156]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_mc_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>2"
	  SID			  "3774"
	  Position		  [575, 273, 665, 287]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>3"
	  SID			  "3775"
	  Position		  [585, 173, 675, 187]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <veh>"
	  SID			  "3776"
	  Position		  [30, 357, 105, 373]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_prev"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>"
	  SID			  "3777"
	  Position		  [25, 390, 85, 410]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>1"
	  SID			  "3778"
	  Position		  [20, 321, 105, 339]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>2"
	  SID			  "3779"
	  Position		  [170, 502, 280, 518]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_drivetrain_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>3"
	  SID			  "3780"
	  Position		  [175, 536, 275, 554]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_wheel_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>4"
	  SID			  "3781"
	  Position		  [570, 571, 655, 589]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>5"
	  SID			  "3782"
	  Position		  [150, 586, 270, 604]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_rear_brake"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>6"
	  SID			  "3783"
	  Position		  [570, 606, 655, 624]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "clutch_state"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>7"
	  SID			  "3784"
	  Position		  [185, 470, 245, 490]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>8"
	  SID			  "3785"
	  Position		  [290, 335, 350, 355]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>9"
	  SID			  "3786"
	  Position		  [20, 246, 105, 264]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From par cntrl"
	  SID			  "3787"
	  Position		  [575, 376, 670, 394]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "engine_on"
	}
	Block {
	  BlockType		  From
	  Name			  "From<gb>"
	  SID			  "3788"
	  Position		  [165, 96, 255, 114]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From<wh>4"
	  SID			  "3789"
	  Position		  [170, 561, 285, 579]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_front_brake"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>"
	  SID			  "3790"
	  Position		  [790, 500, 855, 520]
	  NamePlacement		  "alternate"
	  GotoTag		  "engine_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>1"
	  SID			  "3791"
	  Position		  [785, 535, 865, 555]
	  GotoTag		  "spd_command"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc><mc>"
	  SID			  "3792"
	  Position		  [790, 571, 840, 589]
	  GotoTag		  "key_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>"
	  SID			  "3793"
	  Position		  [380, 75, 470, 95]
	  NamePlacement		  "alternate"
	  GotoTag		  "gear_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>1"
	  SID			  "3794"
	  Position		  [380, 116, 460, 134]
	  NamePlacement		  "alternate"
	  GotoTag		  "shifting"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <htc>"
	  SID			  "3795"
	  Position		  [385, 162, 460, 178]
	  GotoTag		  "locked_up"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <htc>1"
	  SID			  "3796"
	  Position		  [385, 29, 460, 51]
	  NamePlacement		  "alternate"
	  GotoTag		  "gear_number"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <mc>"
	  SID			  "3797"
	  Position		  [765, 120, 855, 140]
	  GotoTag		  "P_mc_in_r"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>"
	  SID			  "3798"
	  Position		  [785, 276, 855, 294]
	  NamePlacement		  "alternate"
	  GotoTag		  "clutch_state"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>1"
	  SID			  "3799"
	  Position		  [440, 331, 525, 349]
	  GotoTag		  "slip_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>"
	  SID			  "3800"
	  Position		  [435, 280, 520, 300]
	  NamePlacement		  "alternate"
	  GotoTag		  "F_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>1"
	  SID			  "3801"
	  Position		  [185, 334, 275, 356]
	  GotoTag		  "v_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>2"
	  SID			  "3802"
	  Position		  [200, 366, 290, 384]
	  GotoTag		  "wt_front_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>3"
	  SID			  "3803"
	  Position		  [370, 506, 455, 524]
	  GotoTag		  "F_front_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>4"
	  SID			  "3804"
	  Position		  [370, 569, 455, 591]
	  GotoTag		  "F_rear_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>5"
	  SID			  "3805"
	  Position		  [230, 245, 340, 265]
	  GotoTag		  "F_front_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>6"
	  SID			  "3806"
	  Position		  [195, 406, 285, 424]
	  GotoTag		  "wt_rear_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>7"
	  SID			  "3807"
	  Position		  [190, 436, 280, 454]
	  GotoTag		  "front_traction_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>8"
	  SID			  "3808"
	  Position		  [405, 215, 515, 235]
	  GotoTag		  "F_rear_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Ground
	  Name			  "Ground"
	  SID			  "3809"
	  Position		  [240, 615, 260, 635]
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator"
	  SID			  "3810"
	  Ports			  [2, 1]
	  Position		  [390, 322, 420, 353]
	  Operator		  "~="
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  SID			  "3811"
	  Ports			  [2, 1]
	  Position		  [385, 272, 415, 303]
	  Inputs		  "-+"
	}
	Block {
	  BlockType		  Reference
	  Name			  "braking strategy"
	  SID			  "3812"
	  Ports			  [2, 2]
	  Position		  [185, 242, 215, 293]
	  NamePlacement		  "alternate"
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/braking strategy"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "config traction control"
	  SID			  "3813"
	  Ports			  [3, 5]
	  Position		  [125, 309, 160, 411]
	  BackgroundColor	  "darkGreen"
	  AttributesFormatString  "%<BlockChoice>"
	  ShowPortLabels	  "none"
	  BlockChoice		  "traction control 2 axle"
	  TemplateBlock		  "lib_controls/SubSystem/config traction control"
	  MemberBlocks		  "traction control 2 axle,traction control J2452 2 axle"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "config traction control"
	    Location		    [148, 182, 646, 482]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    SIDHighWatermark	    "6898"
	    Block {
	      BlockType		      Inport
	      Name		      "time-average\nvehicle speed\n req'd (m/s)"
	      SID		      "3813::706"
	      Position		      [20, 40, 40, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SID		      "3813::707"
	      Position		      [20, 80, 40, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "total tractive\nforce req'd\n(N)"
	      SID		      "3813::708"
	      Position		      [20, 120, 40, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "traction control\n2 axle"
	      SID		      "3813::709"
	      Ports		      [3, 5]
	      Position		      [100, 40, 140, 80]
	      BackgroundColor	      "darkGreen"
	      LibraryVersion	      "1.479"
	      SourceBlock	      "lib_controls/SubSystem/traction control 2 axle"
	      SourceType	      "SubSystem"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd force\n(N)"
	      SID		      "3813::710"
	      Position		      [200, 40, 220, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd speed\n(m/s)"
	      SID		      "3813::711"
	      Position		      [200, 80, 220, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nfront axle\n(N)"
	      SID		      "3813::712"
	      Position		      [200, 120, 220, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nrear axle\n(N)"
	      SID		      "3813::713"
	      Position		      [200, 160, 220, 180]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "front/total \ntraction ratio"
	      SID		      "3813::714"
	      Position		      [200, 200, 220, 220]
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "time-average\nvehicle speed\n req'd (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "total tractive\nforce req'd\n(N)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      1
	      DstBlock		      "req'd force\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      2
	      DstBlock		      "req'd speed\n(m/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      3
	      DstBlock		      "weight on\nfront axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      4
	      DstBlock		      "weight on\nrear axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      5
	      DstBlock		      "front/total \ntraction ratio"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "engine on\n(parallel hybrid)"
	  SID			  "3814"
	  Ports			  [5, 3]
	  Position		  [710, 489, 745, 601]
	  ForegroundColor	  "green"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "engine on\n(parallel hybrid)"
	    Location		    [10, 112, 950, 1190]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "trq req'd\nout of clutch\n(N*m)"
	      SID		      "3815"
	      Position		      [35, 13, 65, 27]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "spd req'd\nout of clutch\n(N*m)1"
	      SID		      "3816"
	      Position		      [30, 78, 60, 92]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "fc_spd_out_r"
	      SID		      "3817"
	      Position		      [415, 553, 445, 567]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "v_ave_req"
	      SID		      "3818"
	      Position		      [160, 523, 190, 537]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "clutch\nstate"
	      SID		      "3819"
	      Position		      [100, 468, 130, 482]
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)"
	      SID		      "3820"
	      Position		      [165, 271, 225, 289]
	      ShowName		      off
	      Value		      "cs_lo_soc"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)1"
	      SID		      "3821"
	      Position		      [115, 376, 190, 394]
	      Value		      "cs_off_trq_frac"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)2"
	      SID		      "3822"
	      Position		      [745, 105, 785, 125]
	      ForegroundColor	      "green"
	      Value		      "fc_on"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)3"
	      SID		      "3823"
	      Position		      [520, 322, 570, 338]
	      Value		      "fc_tstat"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES1"
	      SID		      "3824"
	      Ports		      []
	      Position		      [830, 60, 886, 100]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES1"
		Location		[296, 542, 726, 743]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "3825"
		  Name			  "This engine state computer keeps the engine on if:\n[\n1) key is on, AND\n2) (trq is too high AND speed "
		  "is too high for idle) OR engine is allowed to idle, AND\n3) vehicle speed >= cs_electric_launch_spd [ in m/s ], AN"
		  "D\n4) req'd trq > (cs_off_trq_frac * max_trq_at_spd) OR SOC<cs_lo_soc\n]\nOR\n[ engine was previously on AND the t"
		  "ransmission is shifting ]\n\nThe last condition is added to prevent the engine from unrealistically\nshutting down"
		  " for a second or two during a shift."
		  Position		  [212, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "3826"
	      Position		      [110, 27, 145, 43]
	      ShowName		      off
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "3827"
	      Position		      [325, 82, 395, 98]
	      ShowName		      off
	      Value		      "vc_idle_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant10"
	      SID		      "3828"
	      Position		      [170, 232, 300, 248]
	      ShowName		      off
	      Value		      "cs_charge_deplete_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant11"
	      SID		      "3829"
	      Position		      [95, 61, 210, 79]
	      ShowName		      off
	      Value		      "cs_electric_decel_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "3830"
	      Position		      [105, 117, 175, 133]
	      ShowName		      off
	      Value		      "vc_idle_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "3831"
	      Position		      [400, 509, 480, 531]
	      ShowName		      off
	      Value		      "vc_launch_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "3832"
	      Position		      [155, 480, 175, 500]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "3833"
	      Position		      [215, 535, 235, 555]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "3834"
	      Position		      [155, 585, 175, 605]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant7"
	      SID		      "3835"
	      Position		      [740, 550, 760, 570]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant8"
	      SID		      "3836"
	      Position		      [240, 389, 270, 411]
	      Value		      "eps"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant9"
	      SID		      "3837"
	      Position		      [625, 370, 645, 390]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <ess>"
	      SID		      "3838"
	      Position		      [105, 254, 150, 276]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>1"
	      SID		      "3839"
	      Position		      [105, 148, 190, 172]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "v_req_limited"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>2"
	      SID		      "3840"
	      Position		      [585, 243, 655, 257]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "shifting"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>3"
	      SID		      "3841"
	      Position		      [335, 475, 420, 495]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_max_pwr"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>4"
	      SID		      "3842"
	      Position		      [515, 286, 585, 304]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "fc_clt_tmp"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      SID		      "3843"
	      Position		      [585, 318, 615, 342]
	      Gain		      "vc_fc_warm_tmp_frac"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      SID		      "3844"
	      Position		      [380, 390, 410, 420]
	      Gain		      "tc_mc_to_fc_ratio"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator10"
	      SID		      "3845"
	      Ports		      [3, 1]
	      Position		      [340, 511, 370, 569]
	      ShowName		      off
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator11"
	      SID		      "3846"
	      Ports		      [1, 1]
	      Position		      [350, 235, 380, 255]
	      ShowName		      off
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator12"
	      SID		      "3847"
	      Ports		      [3, 1]
	      Position		      [810, 154, 840, 186]
	      ForegroundColor	      "green"
	      ShowName		      off
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator13"
	      SID		      "3848"
	      Ports		      [2, 1]
	      Position		      [685, 298, 715, 327]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator2"
	      SID		      "3849"
	      Ports		      [2, 1]
	      Position		      [425, 31, 445, 64]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator3"
	      SID		      "3850"
	      Ports		      [2, 1]
	      Position		      [330, 21, 360, 54]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator4"
	      SID		      "3851"
	      Ports		      [2, 1]
	      Position		      [285, 16, 305, 49]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator5"
	      SID		      "3852"
	      Ports		      [3, 1]
	      Position		      [585, 125, 615, 235]
	      ShowName		      off
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator6"
	      SID		      "3853"
	      Ports		      [3, 1]
	      Position		      [385, 322, 405, 358]
	      ShowName		      off
	      Operator		      "OR"
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator7"
	      SID		      "3854"
	      Ports		      [2, 1]
	      Position		      [680, 243, 710, 272]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator8"
	      SID		      "3855"
	      Ports		      [5, 1]
	      Position		      [755, 160, 785, 220]
	      ShowName		      off
	      Operator		      "OR"
	      Inputs		      "5"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator9"
	      SID		      "3856"
	      Ports		      [2, 1]
	      Position		      [520, 160, 545, 195]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "Look-Up Table"
	      SID		      "3857"
	      Position		      [205, 175, 235, 205]
	      InputValues	      "[cs_lo_soc cs_hi_soc cs_hi_soc+eps]"
	      Table		      "[cs_electric_launch_spd_lo cs_electric_launch_spd_hi cs_electric_launch_spd_hi]"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Manual \nSwitch"
	      SID		      "3858"
	      Ports		      [2, 1]
	      Position		      [685, 397, 715, 433]
	      LibraryVersion	      "1.260"
	      SourceBlock	      "simulink/Signal\nRouting/Manual Switch"
	      SourceType	      "Manual Switch"
	      sw		      "1"
	      action		      "0"
	      varsize		      off
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "3859"
	      Position		      [685, 340, 715, 370]
	      BlockMirror	      on
	      X0		      "cyc_mph(1,2)>0"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      SID		      "3860"
	      Ports		      [2, 1]
	      Position		      [235, 347, 265, 378]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      SID		      "3861"
	      Ports		      [2, 1]
	      Position		      [345, 432, 375, 463]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      SID		      "3862"
	      Ports		      [2, 1]
	      Position		      [500, 397, 530, 428]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "3863"
	      Ports		      [2, 1]
	      Position		      [275, 153, 300, 182]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "3864"
	      Ports		      [2, 1]
	      Position		      [290, 324, 315, 351]
	      ShowName		      off
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "3865"
	      Ports		      [2, 1]
	      Position		      [255, 257, 285, 288]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      SID		      "3866"
	      Ports		      [2, 1]
	      Position		      [290, 379, 315, 406]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator4"
	      SID		      "3867"
	      Ports		      [2, 1]
	      Position		      [530, 444, 555, 471]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator5"
	      SID		      "3868"
	      Ports		      [2, 1]
	      Position		      [635, 289, 660, 316]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator6"
	      SID		      "3869"
	      Ports		      [2, 1]
	      Position		      [625, 409, 650, 436]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "3870"
	      Ports		      [1, 1]
	      Position		      [595, 525, 625, 555]
	      InputPortMap	      "u0"
	      UpperLimit	      "max(fc_map_spd)*fc_spd_scale"
	      LowerLimit	      "vc_idle_spd*vc_idle_bool"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Subsystem"
	      SID		      "3871"
	      Ports		      [1, 1]
	      Position		      [435, 432, 480, 468]
	      ForegroundColor	      "green"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Running Average"
	      MaskDescription	      "Running Average"
	      MaskHelp		      "Output is the average of the last (Averaging Time) seconds of input."
	      MaskPromptString	      "Averaging Time Steps (#)"
	      MaskStyleString	      "edit"
	      MaskVariables	      "n=@1;"
	      MaskTunableValueString  "on"
	      MaskEnableString	      "on"
	      MaskVisibilityString    "on"
	      MaskToolTipString	      "on"
	      MaskDisplay	      "disp('Running\\nAverage')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "3"
	      System {
		Name			"Subsystem"
		Location		[137, 366, 771, 685]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "3872"
		  Position		  [50, 110, 70, 130]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "3873"
		  Position		  [75, 210, 95, 230]
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "3874"
		  Position		  [75, 274, 115, 296]
		  FontName		  "Arial"
		  Value			  "n"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "3875"
		  Position		  [380, 224, 420, 246]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  From
		  Name			  "From <vc>2"
		  SID			  "3876"
		  Position		  [120, 88, 190, 102]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "shifting"
		}
		Block {
		  BlockType		  Integrator
		  Name			  "Integrator"
		  SID			  "3877"
		  Ports			  [1, 1]
		  Position		  [295, 100, 315, 120]
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "3878"
		  Position		  [135, 235, 165, 265]
		  X0			  "-0.1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "3879"
		  Position		  [170, 30, 200, 60]
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "3880"
		  Ports			  [2, 1]
		  Position		  [505, 109, 525, 136]
		  Inputs		  "*/"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  SID			  "3881"
		  Ports			  [2, 1]
		  Position		  [210, 271, 230, 289]
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "3882"
		  Ports			  [2, 1]
		  Position		  [250, 187, 280, 218]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "3883"
		  Ports			  [2, 1]
		  Position		  [440, 105, 460, 125]
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "3884"
		  Ports			  [2, 1]
		  Position		  [170, 210, 190, 230]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|+-"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "3885"
		  Position		  [305, 190, 335, 220]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "3886"
		  Position		  [450, 190, 480, 220]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch2"
		  SID			  "3887"
		  Position		  [235, 95, 265, 125]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch3"
		  SID			  "3888"
		  Position		  [115, 30, 145, 60]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  VariableTransportDelay
		  Name			  "Variable\nTransport Delay"
		  SID			  "3889"
		  Ports			  [2, 1]
		  Position		  [375, 137, 405, 168]
		  MaximumDelay		  "n"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "3890"
		  Position		  [550, 115, 570, 135]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "From <vc>2"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    Points		    [0, -15; -120, 0; 0, -35]
		    DstBlock		    "Switch3"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 15]
		    DstBlock		    "Switch2"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    Points		    [0, -30; -120, 0]
		    DstBlock		    "Switch3"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Switch2"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  Points		  [25, 0]
		  Branch {
		    DstBlock		    "Switch3"
		    DstPort		    3
		  }
		  Branch {
		    DstBlock		    "Switch2"
		    DstPort		    3
		  }
		}
		Line {
		  SrcBlock		  "Switch3"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch2"
		  SrcPort		  1
		  DstBlock		  "Integrator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  Points		  [0, -75]
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [0, -20]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [80, 0]
		    Branch {
		    Points		    [0, -10]
		    DstBlock		    "Switch1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Switch1"
		    DstPort		    2
		    }
		  }
		  Branch {
		    Points		    [0, -45]
		    DstBlock		    "Variable\nTransport Delay"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    Points		    [55, 0]
		    DstBlock		    "Switch"
		    DstPort		    3
		  }
		  Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    Points		    [0, -25]
		    Branch {
		    Points		    [0, -15; 175, 0]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		  }
		  Branch {
		    Points		    [0, 30]
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Integrator"
		  SrcPort		  1
		  Points		  [25, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 35]
		    DstBlock		    "Variable\nTransport Delay"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Variable\nTransport Delay"
		  SrcPort		  1
		  Points		  [15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "3891"
	      Position		      [515, 513, 545, 567]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "3892"
	      Position		      [810, 534, 835, 566]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch3"
	      SID		      "3893"
	      Position		      [400, 239, 430, 281]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch4"
	      SID		      "3894"
	      Position		      [445, 294, 475, 336]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "T>~0"
	      SID		      "3895"
	      Ports		      [2, 1]
	      Position		      [170, 12, 200, 43]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To Workspace"
	      SID		      "3896"
	      Ports		      [1]
	      Position		      [325, 181, 480, 199]
	      VariableName	      "cs_electric_launch_spd_probe"
	      MaxDataPoints	      "inf"
	      SampleTime	      "-1"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch\ndisengaged"
	      SID		      "3897"
	      Ports		      [2, 1]
	      Position		      [210, 467, 240, 498]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "key_on"
	      SID		      "3898"
	      Ports		      [0, 1]
	      Position		      [575, 29, 630, 61]
	      NamePlacement	      "alternate"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Repeating table"
	      MaskDescription	      "Repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table. Time values should be monotonically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "vc_key_on(:,1)|vc_key_on(:,2)"
	      Port {
		PortNumber		1
		Name			"ignition key is on"
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
	      }
	      System {
		Name			"key_on"
		Location		[5, 42, 410, 213]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "3899"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "3900"
		  Position		  [110, 60, 150, 80]
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "3901"
		  Position		  [210, 58, 250, 82]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "3902"
		  Position		  [285, 60, 305, 80]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  DstBlock		  "Fcn1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max_torque\n lookup"
	      SID		      "3903"
	      Position		      [115, 343, 145, 367]
	      NamePlacement	      "alternate"
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      Table		      "fc_max_trq*fc_trq_scale"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max_torque\n lookup1"
	      SID		      "3904"
	      Position		      [445, 393, 475, 417]
	      NamePlacement	      "alternate"
	      InputValues	      "mc_map_spd*mc_spd_scale"
	      Table		      "mc_max_trq*mc_trq_scale*mc_overtrq_factor"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "moving next\ntime"
	      SID		      "3905"
	      Ports		      [2, 1]
	      Position		      [210, 572, 240, 603]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "not\nmoving"
	      SID		      "3906"
	      Ports		      [2, 1]
	      Position		      [275, 522, 305, 553]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "repeated cycle:\n speed required at\nend of NEXT step"
	      SID		      "3907"
	      Ports		      [0, 1]
	      Position		      [70, 542, 105, 578]
	      ForegroundColor	      "green"
	      FontName		      "Arial"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Forward looking repeating table"
	      MaskDescription	      "Forward looking repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table with a one time step forward offset. Time values should be monoto"
	      "nically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "cyc_mph(:,1)|cyc_mph(:,2)"
	      System {
		Name			"repeated cycle:\n speed required at\nend of NEXT step"
		Location		[57, 72, 432, 234]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "3908"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "3909"
		  Position		  [110, 25, 150, 45]
		  ForegroundColor	  "green"
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "3910"
		  Position		  [260, 33, 300, 57]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "3911"
		  Position		  [90, 85, 120, 115]
		  ForegroundColor	  "green"
		  X0			  "-0.1"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "3912"
		  Ports			  [2, 1]
		  Position		  [150, 62, 180, 93]
		  ForegroundColor	  "green"
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "3913"
		  Ports			  [2, 1]
		  Position		  [205, 26, 235, 59]
		  ForegroundColor	  "green"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "3914"
		  Position		  [335, 35, 355, 55]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -35]
		    DstBlock		    "Fcn1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0; 0, -15]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "spd>set point"
	      SID		      "3915"
	      Ports		      [2, 1]
	      Position		      [235, 47, 265, 78]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "w>idle"
	      SID		      "3916"
	      Ports		      [2, 1]
	      Position		      [275, 102, 305, 133]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "engine on"
	      SID		      "3917"
	      Position		      [875, 163, 905, 177]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "spd command\n (rad/s)"
	      SID		      "3918"
	      Position		      [865, 543, 895, 557]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "key on"
	      SID		      "3919"
	      Position		      [765, 38, 795, 52]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator12"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		Points			[0, 185]
		Branch {
		  Points		  [0, 165; -55, 0]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Branch {
		  DstBlock		  "Memory"
		  DstPort		  1
		}
	      }
	      Branch {
		DstBlock		"engine on"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "(--)2"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator12"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "max_torque\n lookup"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "(--)1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, -15]
		DstBlock		"Product"
		DstPort			2
	      }
	      Branch {
		DstBlock		"Relational\nOperator3"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant8"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      Points		      [50, 0]
	      DstBlock		      "Logical\nOperator6"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator6"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Switch4"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch3"
	      SrcPort		      1
	      Points		      [70, 0]
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "w>idle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      DstBlock		      "T>~0"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <vc>2"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator7"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator7"
	      SrcPort		      1
	      Points		      [5, 0; 0, -80]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "trq req'd\nout of clutch\n(N*m)"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"T>~0"
		DstPort			1
	      }
	      Branch {
		Points			[0, 310]
		Branch {
		  Points		  [0, 125]
		  DstBlock		  "Product2"
		  DstPort		  2
		}
		Branch {
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator3"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "w>idle"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "spd req'd\nout of clutch\n(N*m)1"
	      SrcPort		      1
	      Points		      [0, 25; 30, 0]
	      Branch {
		Points			[0, 245]
		Branch {
		  DstBlock		  "max_torque\n lookup"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 85; 230, 0]
		  Branch {
		    DstBlock		    "Product2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -35]
		    DstBlock		    "Gain1"
		    DstPort		    1
		  }
		}
	      }
	      Branch {
		DstBlock		"w>idle"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator5"
	      SrcPort		      1
	      Points		      [0, -10]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator6"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [-15, 0; 0, -35]
	      Branch {
		DstBlock		"Logical\nOperator7"
		DstPort			2
	      }
	      Branch {
		DstBlock		"Logical\nOperator13"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator5"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator13"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <vc>4"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator13"
	      SrcPort		      1
	      Points		      [10, 0; 0, -125]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "(--)3"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator8"
	      SrcPort		      1
	      Points		      [0, -10]
	      DstBlock		      "Logical\nOperator12"
	      DstPort		      3
	    }
	    Line {
	      Name		      "ignition key is on"
	      Labels		      [0, 0]
	      SrcBlock		      "key_on"
	      SrcPort		      1
	      Points		      [85, 0]
	      Branch {
		DstBlock		"key on"
		DstPort			1
	      }
	      Branch {
		Points			[0, 105; 70, 0; 0, 20]
		DstBlock		"Logical\nOperator12"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator2"
	      SrcPort		      1
	      Points		      [105, 0; 0, 95]
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator9"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch4"
	      SrcPort		      1
	      Points		      [30, 0; 0, -100]
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Look-Up Table"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			2
	      }
	      Branch {
		DstBlock		"To Workspace"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant10"
	      SrcPort		      1
	      Points		      [0, 20; 25, 0]
	      Branch {
		Points			[0, 40]
		Branch {
		  DstBlock		  "Switch4"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 15]
		  DstBlock		  "Switch4"
		  DstPort		  2
		}
	      }
	      Branch {
		DstBlock		"Switch3"
		DstPort			2
	      }
	      Branch {
		Points			[0, -15]
		DstBlock		"Logical\nOperator11"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		DstBlock		"Switch3"
		DstPort			3
	      }
	      Branch {
		Points			[0, 55]
		DstBlock		"Logical\nOperator6"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator11"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <ess>"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	      Branch {
		Points			[0, -75]
		DstBlock		"Look-Up Table"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "(--)"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator10"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "fc_spd_out_r"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "spd command\n (rad/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant7"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "repeated cycle:\n speed required at\nend of NEXT step"
	      SrcPort		      1
	      Points		      [75, 0; 0, 20]
	      DstBlock		      "moving next\ntime"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      DstBlock		      "moving next\ntime"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "moving next\ntime"
	      SrcPort		      1
	      Points		      [80, 0]
	      DstBlock		      "Logical\nOperator10"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "not\nmoving"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator10"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "v_ave_req"
	      SrcPort		      1
	      DstBlock		      "not\nmoving"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      DstBlock		      "not\nmoving"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nstate"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <vc>3"
	      SrcPort		      1
	      Points		      [90, 0]
	      DstBlock		      "Relational\nOperator4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "Subsystem"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator4"
	      SrcPort		      1
	      Points		      [175, 0; 0, -260]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "clutch\ndisengaged"
	      SrcPort		      1
	      Points		      [80, 0]
	      DstBlock		      "Logical\nOperator10"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant11"
	      SrcPort		      1
	      DstBlock		      "spd>set point"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "spd>set point"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "T>~0"
	      SrcPort		      1
	      Points		      [65, 0]
	      DstBlock		      "Logical\nOperator4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator4"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <vc>1"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	      Branch {
		DstBlock		"spd>set point"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "max_torque\n lookup1"
	      SrcPort		      1
	      DstBlock		      "Product3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"max_torque\n lookup1"
		DstPort			1
	      }
	      Branch {
		Points			[0, 15]
		DstBlock		"Product3"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant9"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Manual \nSwitch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      Points		      [70, 0; 0, 15]
	      DstBlock		      "Relational\nOperator6"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Manual \nSwitch"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      5
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator6"
	      SrcPort		      1
	      DstBlock		      "Manual \nSwitch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Subsystem"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		DstBlock		"Relational\nOperator4"
		DstPort			1
	      }
	      Branch {
		Points			[0, -15; 100, 0]
		DstBlock		"Relational\nOperator6"
		DstPort			1
	      }
	    }
	    Annotation {
	      SID		      "3920"
	      Name		      "engine not suppressed if \ness insufficient "
	      Position		      [785, 464]
	    }
	    Annotation {
	      SID		      "3921"
	      Name		      "engine not \nsuppressed for\nelectric launch"
	      Position		      [423, 147]
	    }
	    Annotation {
	      SID		      "3922"
	      Name		      "engine not shut off\n rather than idle"
	      Position		      [496, 72]
	    }
	    Annotation {
	      SID		      "3923"
	      Name		      "engine on if engine on \npreviously and engine \nnot warm"
	      Position		      [563, 379]
	    }
	    Annotation {
	      SID		      "3924"
	      Name		      "engine not shut \ndown during shifts"
	      Position		      [666, 217]
	    }
	    Annotation {
	      SID		      "3925"
	      Name		      "engine not suppressed\nif mc insufficient "
	      Position		      [800, 404]
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "front and rear\nbrake controller\n(achievable)"
	  SID			  "3926"
	  Ports			  [6, 2]
	  Position		  [310, 481, 345, 609]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/front and rear\nbrake controller\n(achievable)"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "gearbox control\nfor use w/ AT"
	  SID			  "3927"
	  Ports			  [4, 4]
	  Position		  [310, 54, 345, 166]
	  ForegroundColor	  "magenta"
	  FontName		  "Arial"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "gearbox control\nfor use w/ AT"
	    Location		    [6, 74, 977, 726]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "eta_gb"
	      SID		      "3928"
	      Position		      [45, 85, 65, 105]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_out_r"
	      SID		      "3929"
	      Position		      [45, 135, 65, 155]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_out_r"
	      SID		      "3930"
	      Position		      [45, 180, 65, 200]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "tires are at\ntraction limit"
	      SID		      "3931"
	      Position		      [45, 230, 65, 250]
	      FontName		      "Arial"
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "3932"
	      Ports		      []
	      Position		      [910, 790, 966, 830]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[430, 234, 888, 441]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "3933"
		  Name			  "Lock-up of the HTC occurs when it is supposed to for the current gear, AND\nthe transmission isn't shift"
		  "ing, AND\nthe lockup wouldn't precipitate an immediate downshift."
		  Position		  [217, 162]
		}
		Annotation {
		  SID			  "3934"
		  Name			  "This gearbox control block computes the current gear number given the gearbox's\nreq'd output torque and"
		  " speed and an estimate its efficiency.  Upshifts occur, given a\ncertain engine speed,  when the estimated engine "
		  "load falls below the upshift curve\nin engine speed/load space, and downshifts likewise occur when estimated engin"
		  "e\nload rises above the downshift curve.  Separate upshift and downshift curves are\ndefined for each gear.  An up"
		  "shift may not be immediately followed by a downshift.\nIf the tires are about to slip, don't upshift unless the en"
		  "gine would be at max. speed.\nEnforce this rule by setting the load to 1 when the tires are about to slip."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "3935"
	      Position		      [385, 65, 405, 85]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "3936"
	      Position		      [320, 375, 340, 395]
	      BlockMirror	      on
	      Value		      "0.5"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant14"
	      SID		      "3937"
	      Position		      [435, 783, 530, 797]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant15"
	      SID		      "3938"
	      Position		      [365, 648, 460, 662]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "3939"
	      Position		      [385, 470, 405, 490]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      SID		      "3940"
	      Ports		      [1, 2]
	      Position		      [705, 636, 710, 674]
	      BackgroundColor	      "black"
	      ShowName		      off
	      Outputs		      "2"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      SID		      "3941"
	      Position		      [535, 755, 660, 775]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <logic>2"
	      SID		      "3942"
	      Position		      [15, 709, 120, 741]
	      ForegroundColor	      "red"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "v_req_limited"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      SID		      "3943"
	      Position		      [535, 815, 660, 835]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From2"
	      SID		      "3944"
	      Position		      [475, 675, 600, 695]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From3"
	      SID		      "3945"
	      Position		      [475, 700, 600, 720]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From4"
	      SID		      "3946"
	      Position		      [475, 610, 600, 630]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From5"
	      SID		      "3947"
	      Position		      [105, 250, 195, 270]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "gear_num_out"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From6"
	      SID		      "3948"
	      Position		      [185, 425, 275, 445]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "shifting_out"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      SID		      "3949"
	      Position		      [535, 207, 560, 233]
	      FontName		      "Arial"
	      Gain		      "-1"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto"
	      SID		      "3950"
	      Position		      [240, 700, 360, 720]
	      NamePlacement	      "alternate"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto1"
	      SID		      "3951"
	      Position		      [240, 724, 360, 746]
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto2"
	      SID		      "3952"
	      Position		      [735, 700, 855, 720]
	      GotoTag		      "shifting_out"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto3"
	      SID		      "3953"
	      Position		      [840, 195, 945, 215]
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto4"
	      SID		      "3954"
	      Position		      [935, 65, 1045, 85]
	      NamePlacement	      "alternate"
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto5"
	      SID		      "3955"
	      Position		      [935, 140, 1045, 160]
	      NamePlacement	      "alternate"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto7"
	      SID		      "3956"
	      Position		      [790, 840, 910, 860]
	      GotoTag		      "gear_num_out"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "3957"
	      Ports		      [4, 1]
	      Position		      [665, 402, 695, 448]
	      Inputs		      "4"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "3958"
	      Ports		      [1, 1]
	      Position		      [320, 419, 350, 451]
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator2"
	      SID		      "3959"
	      Ports		      [1, 1]
	      Position		      [530, 506, 560, 544]
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "3960"
	      Position		      [600, 510, 630, 540]
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "3961"
	      Ports		      [2, 1]
	      Position		      [620, 672, 625, 723]
	      ShowName		      off
	      Inputs		      "2"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      SID		      "3962"
	      Ports		      [2, 1]
	      Position		      [255, 112, 285, 143]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      SID		      "3963"
	      Ports		      [2, 1]
	      Position		      [595, 203, 615, 227]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product4"
	      SID		      "3964"
	      Ports		      [2, 1]
	      Position		      [255, 517, 285, 548]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "3965"
	      Ports		      [2, 1]
	      Position		      [315, 317, 345, 348]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation1"
	      SID		      "3966"
	      Ports		      [1, 1]
	      Position		      [780, 66, 800, 84]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "gb_gears_num"
	      LowerLimit	      "1"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Speed Dependent Shifting"
	      SID		      "3967"
	      Ports		      [1, 2]
	      Position		      [165, 697, 195, 748]
	      SourceBlock	      "lib_controls/SubSystem/Speed Dependent Shifting"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "off"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "3968"
	      Position		      [380, 105, 410, 135]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "3969"
	      Position		      [380, 510, 410, 540]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch2"
	      SID		      "3970"
	      Position		      [680, 775, 710, 805]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch3"
	      SID		      "3971"
	      Position		      [650, 640, 680, 670]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "allow downshift?"
	      SID		      "3972"
	      Ports		      [1, 1]
	      Position		      [475, 32, 505, 68]
	      ForegroundColor	      "blue"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"allow downshift?"
		Location		[342, 275, 831, 490]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gearnum"
		  SID			  "3973"
		  Position		  [35, 35, 55, 55]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  SID			  "3974"
		  Ports			  [2, 1]
		  Position		  [380, 43, 410, 67]
		  FontName		  "Arial"
		  Operator		  "NOR"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "3975"
		  Position		  [150, 60, 185, 80]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "3976"
		  Position		  [150, 105, 185, 125]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "3977"
		  Ports			  [2, 1]
		  Position		  [230, 38, 260, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator2"
		  SID			  "3978"
		  Ports			  [2, 1]
		  Position		  [230, 98, 260, 122]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  Outport
		  Name			  "allow shift"
		  SID			  "3979"
		  Position		  [445, 45, 465, 65]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  DstBlock		  "allow shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gearnum"
		  SrcPort		  1
		  Points		  [50, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 25]
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 35]
		    DstBlock		    "Relational\nOperator2"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [15, 0; 0, -15]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 70; -60, 0]
		    DstBlock		    "Memory1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator2"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical\nOperator"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "current\ngear\nnumber"
	      SID		      "3980"
	      Ports		      [2, 1]
	      Position		      [725, 57, 745, 93]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "delta\ngear\nnumber"
	      SID		      "3981"
	      Position		      [655, 114, 685, 146]
	      FontName		      "Arial"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "downshift \ncommand"
	      SID		      "3982"
	      Ports		      [3, 1]
	      Position		      [475, 194, 505, 246]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"downshift \ncommand"
		Location		[441, 362, 916, 657]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "3983"
		  Position		  [45, 98, 75, 112]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "3984"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "3985"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "3986"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "3987"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "3988"
		  Ports			  [1, 1]
		  Position		  [240, 100, 270, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_dnshift_spd|gb_dnshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "3989"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "3990"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "3991"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "3992"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [55, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "downshift \ncommand1"
	      SID		      "3993"
	      Ports		      [3, 1]
	      Position		      [475, 499, 505, 551]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"downshift \ncommand1"
		Location		[431, 372, 906, 667]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "3994"
		  Position		  [45, 98, 75, 112]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "3995"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "3996"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "3997"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "3998"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "3999"
		  Ports			  [1, 1]
		  Position		  [240, 100, 270, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_dnshift_spd|gb_dnshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "4000"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "4001"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "4002"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "4003"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [55, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "engine\ntorque\ncapability"
	      SID		      "4004"
	      Position		      [200, 125, 230, 145]
	      FontName		      "Arial"
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      Table		      "fc_max_trq*fc_trq_scale+eps"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "engine\ntorque\ncapability1"
	      SID		      "4005"
	      Position		      [200, 530, 230, 550]
	      FontName		      "Arial"
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      Table		      "fc_max_trq*fc_trq_scale+eps"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "est. engine trq\nand\nspd"
	      SID		      "4006"
	      Ports		      [4, 3]
	      Position		      [115, 84, 145, 116]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"est. engine trq\nand\nspd"
		Location		[46, 549, 1231, 942]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear\nnumber"
		  SID			  "4007"
		  Position		  [20, 113, 50, 127]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  " prev eta_gb"
		  SID			  "4008"
		  Position		  [20, 168, 50, 182]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_trq_out_r"
		  SID			  "4009"
		  Position		  [20, 223, 50, 237]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_out_r"
		  SID			  "4010"
		  Position		  [20, 283, 50, 297]
		  Port			  "4"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "4011"
		  Ports			  []
		  Position		  [1095, 305, 1151, 345]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [231, 257, 689, 321]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "4012"
		    Name		    "Estimate engine torque and speed associated with the previous gear, assuming that\nthe gearbox effici"
		    "ency is constant."
		    Position		    [227, 12]
		    VerticalAlignment	    "top"
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "4013"
		  Position		  [760, 220, 780, 240]
		  BlockMirror		  on
		  Value			  "[1 1]"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant5"
		  SID			  "4014"
		  Position		  [620, 70, 640, 90]
		  BlockMirror		  on
		  Value			  "0"
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux"
		  SID			  "4015"
		  Ports			  [1, 2]
		  Position		  [980, 172, 1015, 208]
		  Outputs		  "2"
		}
		Block {
		  BlockType		  From
		  Name			  "From <vc>"
		  SID			  "4016"
		  Position		  [310, 50, 405, 70]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "locked_up"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "K_adv"
		  SID			  "4017"
		  Ports			  [1, 1]
		  Position		  [340, 145, 370, 175]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "K_adv"
		    Location		    [502, 588, 994, 833]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Req'd output\ntrq and spd\n(Nm), (rad/s)"
		    SID			    "4018"
		    Position		    [45, 58, 75, 72]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "K_adv=wout/(Tout)^0.5"
		    SID			    "4019"
		    Position		    [160, 51, 280, 79]
		    FontName		    "Arial"
		    Expr		    "u[2]/u[1]^0.5"
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    "Saturation"
		    SID			    "4020"
		    Ports		    [1, 1]
		    Position		    [305, 50, 335, 80]
		    InputPortMap	    "u0"
		    UpperLimit		    "max(htc_k_adv)"
		    LowerLimit		    "min(htc_k_adv)"
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    "Saturation2"
		    SID			    "4021"
		    Ports		    [1, 1]
		    Position		    [105, 50, 135, 80]
		    ShowName		    off
		    InputPortMap	    "u0"
		    UpperLimit		    "inf"
		    LowerLimit		    "eps"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "K_adv"
		    SID			    "4022"
		    Position		    [385, 58, 415, 72]
		    IconDisplay		    "Port number"
		    }
		    Line {
		    SrcBlock		    "Req'd output\ntrq and spd\n(Nm), (rad/s)"
		    SrcPort		    1
		    DstBlock		    "Saturation2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Saturation2"
		    SrcPort		    1
		    DstBlock		    "K_adv=wout/(Tout)^0.5"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "K_adv=wout/(Tout)^0.5"
		    SrcPort		    1
		    DstBlock		    "Saturation"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Saturation"
		    SrcPort		    1
		    DstBlock		    "K_adv"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  SID			  "4023"
		  Ports			  [2, 1]
		  Position		  [685, 36, 715, 69]
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator1"
		  SID			  "4024"
		  Ports			  [1, 1]
		  Position		  [510, 43, 540, 77]
		  Operator		  "NOT"
		  Inputs		  "1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "4025"
		  Position		  [445, 45, 475, 75]
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux1"
		  SID			  "4026"
		  Ports			  [2, 1]
		  Position		  [805, 97, 840, 133]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux2"
		  SID			  "4027"
		  Ports			  [2, 1]
		  Position		  [310, 142, 320, 178]
		  ShowName		  off
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "4028"
		  Ports			  [2, 1]
		  Position		  [615, 12, 645, 43]
		  Operator		  ">"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "SR Look-Up\nTable\nSR=wout/win"
		  SID			  "4029"
		  Position		  [415, 210, 445, 240]
		  InputValues		  "htc_k_adv"
		  Table			  "htc_sr"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation1"
		  SID			  "4030"
		  Ports			  [1, 1]
		  Position		  [85, 160, 115, 190]
		  InputPortMap		  "u0"
		  UpperLimit		  "1"
		  LowerLimit		  "0.7"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation2"
		  SID			  "4031"
		  Ports			  [1, 1]
		  Position		  [1035, 185, 1065, 215]
		  InputPortMap		  "u0"
		  UpperLimit		  "inf"
		  LowerLimit		  "0"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "4032"
		  Position		  [755, 170, 785, 200]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "TR Look-Up\nTable\nTR=Tout/Tin"
		  SID			  "4033"
		  Position		  [415, 125, 445, 155]
		  InputValues		  "htc_k_adv"
		  Table			  "htc_tr"
		}
		Block {
		  BlockType		  Mux
		  Name			  "TR,SR"
		  SID			  "4034"
		  Ports			  [2, 1]
		  Position		  [695, 157, 730, 193]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "gear ratio1"
		  SID			  "4035"
		  Position		  [85, 108, 115, 132]
		  FontName		  "Arial"
		  InputValues		  "[1:length(gb_ratio)]"
		  Table			  "gb_ratio"
		}
		Block {
		  BlockType		  Product
		  Name			  "~eng trq\nand spd"
		  SID			  "4036"
		  Ports			  [2, 1]
		  Position		  [870, 161, 900, 194]
		  Inputs		  "*/"
		}
		Block {
		  BlockType		  Product
		  Name			  "~gb_spd_in_r"
		  SID			  "4037"
		  Ports			  [2, 1]
		  Position		  [170, 265, 200, 300]
		}
		Block {
		  BlockType		  Product
		  Name			  "~gb_trq_in_r"
		  SID			  "4038"
		  Ports			  [3, 1]
		  Position		  [170, 105, 200, 195]
		  Inputs		  "//*"
		}
		Block {
		  BlockType		  Outport
		  Name			  "est eng trq\n(Nm)"
		  SID			  "4039"
		  Position		  [1105, 103, 1135, 117]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Outport
		  Name			  "est eng spd\n(rad/s)"
		  SID			  "4040"
		  Position		  [1100, 193, 1130, 207]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Outport
		  Name			  "gb_spd_in_est\n(rad/s)1"
		  SID			  "4041"
		  Position		  [1100, 238, 1130, 252]
		  ForegroundColor	  "blue"
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "~gb_spd_in_r"
		  SrcPort		  1
		  Points		  [90, 0]
		  Branch {
		    DstBlock		    "Mux2"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [495, 0]
		    Branch {
		    Points		    [295, 0]
		    DstBlock		    "gb_spd_in_est\n(rad/s)1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Mux1"
		    DstPort		    2
		    }
		  }
		}
		Line {
		  SrcBlock		  "~gb_trq_in_r"
		  SrcPort		  1
		  Points		  [85, 0]
		  Branch {
		    Points		    [0, -45; 290, 0]
		    Branch {
		    Points		    [0, -85]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Mux1"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "Mux2"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "SR Look-Up\nTable\nSR=wout/win"
		  SrcPort		  1
		  Points		  [230, 0]
		  DstBlock		  "TR,SR"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "TR Look-Up\nTable\nTR=Tout/Tin"
		  SrcPort		  1
		  Points		  [230, 0]
		  DstBlock		  "TR,SR"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "K_adv"
		  SrcPort		  1
		  Points		  [15, 0; 0, -5]
		  Branch {
		    Points		    [0, 70]
		    DstBlock		    "SR Look-Up\nTable\nSR=wout/win"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -15]
		    DstBlock		    "TR Look-Up\nTable\nTR=Tout/Tin"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Mux2"
		  SrcPort		  1
		  DstBlock		  "K_adv"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "~eng trq\nand spd"
		  SrcPort		  1
		  Points		  [60, 0]
		  DstBlock		  "Demux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux1"
		  SrcPort		  1
		  Points		  [5, 0; 0, 55]
		  DstBlock		  "~eng trq\nand spd"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "From <vc>"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  Points		  [20, 0]
		  DstBlock		  "Switch"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Logical\nOperator1"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  1
		  Points		  [40, 0; 0, -70]
		  DstBlock		  "est eng trq\n(Nm)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear\nnumber"
		  SrcPort		  1
		  DstBlock		  "gear ratio1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  Points		  [20, 0]
		  DstBlock		  "Logical\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant5"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Saturation2"
		  SrcPort		  1
		  DstBlock		  "est eng spd\n(rad/s)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  2
		  DstBlock		  "Saturation2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation1"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "~gb_trq_in_r"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  " prev eta_gb"
		  SrcPort		  1
		  DstBlock		  "Saturation1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  DstBlock		  "~eng trq\nand spd"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "TR,SR"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gear ratio1"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    Points		    [0, 155]
		    DstBlock		    "~gb_spd_in_r"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "~gb_trq_in_r"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "gb_spd_out_r"
		  SrcPort		  1
		  DstBlock		  "~gb_spd_in_r"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "gb_trq_out_r"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "~gb_trq_in_r"
		  DstPort		  3
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "est. engine trq\nand spd assuming\nlockup"
	      SID		      "4042"
	      Ports		      [4, 2]
	      Position		      [115, 489, 145, 521]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"est. engine trq\nand spd assuming\nlockup"
		Location		[73, 443, 774, 727]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "new gear\nnumber"
		  SID			  "4043"
		  Position		  [30, 28, 60, 42]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  " prev eta_gb"
		  SID			  "4044"
		  Position		  [30, 83, 60, 97]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_trq_out_r"
		  SID			  "4045"
		  Position		  [30, 138, 60, 152]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_in_est"
		  SID			  "4046"
		  Position		  [30, 218, 60, 232]
		  Port			  "4"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "4047"
		  Ports			  []
		  Position		  [625, 180, 681, 220]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [231, 257, 689, 321]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "4048"
		    Name		    "Estimate engine torque and speed associated with the current gear, assuming that\nthe gearbox efficie"
		    "ncy is constant."
		    Position		    [227, 12]
		    VerticalAlignment	    "top"
		    }
		  }
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "4049"
		  Position		  [130, 180, 160, 210]
		  X0			  "gb_ratio(1)"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation1"
		  SID			  "4050"
		  Ports			  [1, 1]
		  Position		  [95, 75, 125, 105]
		  InputPortMap		  "u0"
		  UpperLimit		  "1"
		  LowerLimit		  "0.7"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation2"
		  SID			  "4051"
		  Ports			  [1, 1]
		  Position		  [580, 65, 610, 95]
		  InputPortMap		  "u0"
		  UpperLimit		  "inf"
		  LowerLimit		  "0"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "gear ratio1"
		  SID			  "4052"
		  Position		  [95, 23, 125, 47]
		  FontName		  "Arial"
		  InputValues		  "[1:length(gb_ratio)]"
		  Table			  "gb_ratio"
		}
		Block {
		  BlockType		  Product
		  Name			  "~gb_spd_in_r"
		  SID			  "4053"
		  Ports			  [3, 1]
		  Position		  [180, 150, 210, 240]
		  Inputs		  "*/*"
		}
		Block {
		  BlockType		  Product
		  Name			  "~gb_trq_in_r"
		  SID			  "4054"
		  Ports			  [3, 1]
		  Position		  [180, 20, 210, 110]
		  Inputs		  "//*"
		}
		Block {
		  BlockType		  Outport
		  Name			  "est eng trq\n(Nm)"
		  SID			  "4055"
		  Position		  [645, 18, 675, 32]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Outport
		  Name			  "est eng spd\n(rad/s)"
		  SID			  "4056"
		  Position		  [645, 73, 675, 87]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "~gb_spd_in_r"
		  SrcPort		  1
		  Points		  [90, 0; 0, -110; 250, 0; 0, -5]
		  DstBlock		  "Saturation2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "~gb_trq_in_r"
		  SrcPort		  1
		  Points		  [340, 0; 0, -5; 20, 0; 0, -35]
		  DstBlock		  "est eng trq\n(Nm)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gb_spd_in_est"
		  SrcPort		  1
		  DstBlock		  "~gb_spd_in_r"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "~gb_spd_in_r"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Saturation2"
		  SrcPort		  1
		  DstBlock		  "est eng spd\n(rad/s)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "new gear\nnumber"
		  SrcPort		  1
		  DstBlock		  "gear ratio1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gb_trq_out_r"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "~gb_trq_in_r"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "gear ratio1"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    Points		    [0, 130]
		    Branch {
		    Points		    [-35, 0]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "~gb_spd_in_r"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "~gb_trq_in_r"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  " prev eta_gb"
		  SrcPort		  1
		  DstBlock		  "Saturation1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation1"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "~gb_trq_in_r"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio1"
	      SID		      "4057"
	      Position		      [870, 63, 900, 87]
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      Table		      "gb_ratio"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "load=T/\n(maxT\nat spd)"
	      SID		      "4058"
	      Ports		      [1, 1]
	      Position		      [310, 116, 345, 144]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "-1"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "load=T/\n(maxT\nat spd)1"
	      SID		      "4059"
	      Ports		      [1, 1]
	      Position		      [310, 521, 345, 549]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "-1"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "lock-up in\nthis gear"
	      SID		      "4060"
	      Position		      [260, 313, 290, 337]
	      FontName		      "Arial"
	      InputValues	      "[1:length(htc_lockup)]"
	      Table		      "htc_lockup"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev gear\nnumber"
	      SID		      "4061"
	      Position		      [745, 15, 785, 35]
	      BlockMirror	      on
	      ForegroundColor	      "magenta"
	      FontName		      "Arial"
	      X0		      "gb_num_init"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "shifting1"
	      SID		      "4062"
	      Ports		      [1, 1]
	      Position		      [845, 134, 875, 166]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"shifting1"
		Location		[76, 244, 366, 435]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gear\nnumber"
		  SID			  "4063"
		  Position		  [15, 50, 35, 70]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "4064"
		  Position		  [20, 131, 120, 159]
		  FontName		  "Arial"
		  Value			  "gb_shift_delay-1e-6"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "4065"
		  Ports			  [2, 1]
		  Position		  [185, 53, 215, 77]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "time since last shift"
		  SID			  "4066"
		  Ports			  [1, 1]
		  Position		  [65, 43, 125, 77]
		  ShowName		  off
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('time since\\nlast shift')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "time since last shift"
		    Location		    [47, 595, 337, 734]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "4067"
		    Position		    [10, 60, 30, 80]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "just shifted"
		    SID			    "4068"
		    Ports		    [1, 1]
		    Position		    [60, 57, 110, 83]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('just\\nshifted')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "just shifted"
		    Location		    [48, 850, 371, 995]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "4069"
		    Position		    [55, 55, 75, 75]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "4070"
		    Position		    [120, 55, 155, 75]
		    FontName		    "Arial"
		    X0			    "1"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    SID			    "4071"
		    Ports		    [2, 1]
		    Position		    [190, 58, 220, 82]
		    FontName		    "Arial"
		    Operator		    "~="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "4072"
		    Position		    [250, 60, 270, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, 30; 75, 0; 0, -20]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "timer"
		    SID			    "4073"
		    Ports		    [1, 1]
		    Position		    [140, 55, 175, 85]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('timer')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "timer"
		    Location		    [389, 635, 793, 850]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "trigger"
		    SID			    "4074"
		    Position		    [15, 125, 35, 145]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "4075"
		    Position		    [100, 100, 120, 120]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant1"
		    SID			    "4076"
		    Position		    [100, 150, 120, 170]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant2"
		    SID			    "4077"
		    Position		    [150, 5, 170, 25]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "4078"
		    Position		    [265, 59, 295, 91]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "no-lag\nReset Integrator"
		    SID			    "4079"
		    Ports		    [3, 1]
		    Position		    [155, 96, 205, 174]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskType		    "No-lag Reset Integrator"
		    MaskDescription	    "No-lag Reset Integrator"
		    MaskHelp		    "Integrates first input using Euler technique.\\nAt the time step that input 2 <> zero,\\noutput i"
		    "s reset to input 3."
		    MaskPromptString	    "Initial Value"
		    MaskStyleString	    "edit"
		    MaskVariables	    "initval=@1;"
		    MaskTunableValueString  "on"
		    MaskEnableString	    "on"
		    MaskVisibilityString    "on"
		    MaskToolTipString	    "on"
		    MaskDisplay		    "disp('1/s\\nw/ reset\\nno lag')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "15"
		    System {
		    Name		    "no-lag\nReset Integrator"
		    Location		    [258, 616, 780, 880]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "4080"
		    Position		    [60, 100, 80, 120]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    SID			    "4081"
		    Position		    [60, 140, 80, 160]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_3"
		    SID			    "4082"
		    Position		    [45, 185, 65, 205]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "4083"
		    Position		    [125, 205, 145, 225]
		    BlockRotation	    270
		    NamePlacement	    "alternate"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "4084"
		    Position		    [340, 55, 375, 75]
		    BlockMirror		    on
		    FontName		    "Arial"
		    X0			    "initval"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    SID			    "4085"
		    Ports		    [2, 1]
		    Position		    [160, 96, 180, 114]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    SID			    "4086"
		    Ports		    [2, 1]
		    Position		    [230, 90, 250, 110]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "4087"
		    Position		    [290, 139, 320, 171]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "dt"
		    SID			    "4088"
		    Ports		    [0, 1]
		    Position		    [112, 50, 138, 80]
		    BlockRotation	    270
		    BlockMirror		    on
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "dt"
		    Location		    [80, 285, 429, 424]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "4089"
		    Position		    [65, 60, 85, 80]
		    FontName		    "Arial"
		    FontSize		    8
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "4090"
		    Position		    [125, 85, 160, 105]
		    FontName		    "Arial"
		    FontSize		    8
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    SID			    "4091"
		    Ports		    [2, 1]
		    Position		    [205, 65, 225, 85]
		    FontName		    "Arial"
		    FontSize		    8
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "4092"
		    Position		    [255, 65, 275, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [10, 0; 0, -15]
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "in_2==0"
		    SID			    "4093"
		    Ports		    [2, 1]
		    Position		    [160, 143, 190, 167]
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "4094"
		    Position		    [455, 145, 475, 165]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_3"
		    SrcPort		    1
		    Points		    [200, 0; 0, -30]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "in_2==0"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "dt"
		    SrcPort		    1
		    Points		    [0, 15]
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    Points		    [-130, 0; 0, 30]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    Points		    [10, 0; 0, 45]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    Points		    [85, 0]
		    Branch {
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -90]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "in_2==0"
		    SrcPort		    1
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    Points		    [0, -40]
		    DstBlock		    "in_2==0"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "time"
		    SID			    "4095"
		    Position		    [350, 65, 370, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    DstBlock		    "time"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "trigger"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, -60]
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Constant2"
		    SrcPort		    1
		    Points		    [35, 0; 0, 50]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant1"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "no-lag\nReset Integrator"
		    SrcPort		    1
		    Points		    [35, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "4096"
		    Position		    [225, 60, 245, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "just shifted"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "just shifted"
		    SrcPort		    1
		    DstBlock		    "timer"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "timer"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "4097"
		  Position		  [250, 55, 270, 75]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gear\nnumber"
		  SrcPort		  1
		  DstBlock		  "time since last shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [15, 0; 0, -75]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "time since last shift"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "upshift\n command"
	      SID		      "4098"
	      Ports		      [3, 1]
	      Position		      [475, 94, 505, 146]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"upshift\n command"
		Location		[433, 169, 908, 464]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "4099"
		  Position		  [45, 103, 75, 117]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "4100"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "4101"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "4102"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "4103"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "4104"
		  Ports			  [1, 1]
		  Position		  [245, 100, 275, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_upshift_spd|gb_upshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [1031, 545, 1271, 627]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "4105"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "4106"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "4107"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "4108"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [50, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear number, out"
	      SID		      "4109"
	      Position		      [775, 780, 795, 800]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear ratio, out"
	      SID		      "4110"
	      Position		      [775, 620, 795, 640]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "shifting, out"
	      SID		      "4111"
	      Position		      [775, 665, 795, 685]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "locked up"
	      SID		      "4112"
	      Position		      [940, 415, 960, 435]
	      FontName		      "Arial"
	      Port		      "4"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "est. engine trq\nand\nspd"
	      SrcPort		      2
	      Points		      [35, 0; 0, 35]
	      Branch {
		Points			[0, 65; 240, 0]
		Branch {
		  Points		  [0, 35]
		  DstBlock		  "downshift \ncommand"
		  DstPort		  3
		}
		Branch {
		  Points		  [0, -65]
		  DstBlock		  "upshift\n command"
		  DstPort		  3
		}
	      }
	      Branch {
		DstBlock		"engine\ntorque\ncapability"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "gb_spd_out_r"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "est. engine trq\nand\nspd"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "gear ratio1"
	      SrcPort		      1
	      DstBlock		      "Goto4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "prev gear\nnumber"
	      SrcPort		      1
	      Points		      [-165, 0]
	      Branch {
		Points			[0, 40]
		DstBlock		"current\ngear\nnumber"
		DstPort			1
	      }
	      Branch {
		Points			[-125, 0]
		Branch {
		  Points		  [0, 25]
		  Branch {
		    Points		    [0, 55]
		    Branch {
		    DstBlock		    "upshift\n command"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 100]
		    Branch {
		    DstBlock		    "downshift \ncommand"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 305]
		    DstBlock		    "downshift \ncommand1"
		    DstPort		    1
		    }
		    }
		  }
		  Branch {
		    DstBlock		    "allow downshift?"
		    DstPort		    1
		  }
		}
		Branch {
		  Points		  [-355, 0; 0, 60]
		  DstBlock		  "est. engine trq\nand\nspd"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Saturation1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[20, 0]
		Branch {
		  DstBlock		  "gear ratio1"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, -50]
		  DstBlock		  "prev gear\nnumber"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[0, 75]
		Branch {
		  DstBlock		  "shifting1"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 55]
		  DstBlock		  "Goto3"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "load=T/\n(maxT\nat spd)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "delta\ngear\nnumber"
	      SrcPort		      1
	      Points		      [15, 0; 0, -45]
	      DstBlock		      "current\ngear\nnumber"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "allow downshift?"
	      SrcPort		      1
	      Points		      [55, 0; 0, 160]
	      DstBlock		      "Product3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      Points		      [10, 0; 0, -75]
	      DstBlock		      "delta\ngear\nnumber"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "current\ngear\nnumber"
	      SrcPort		      1
	      DstBlock		      "Saturation1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "engine\ntorque\ncapability"
	      SrcPort		      1
	      DstBlock		      "Product2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "est. engine trq\nand\nspd"
	      SrcPort		      1
	      Points		      [90, 0]
	      DstBlock		      "Product2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "load=T/\n(maxT\nat spd)"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "downshift \ncommand"
	      SrcPort		      1
	      DstBlock		      "Gain1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [0, -15]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [0, 75]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product4"
	      SrcPort		      1
	      DstBlock		      "load=T/\n(maxT\nat spd)1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "engine\ntorque\ncapability1"
	      SrcPort		      1
	      DstBlock		      "Product4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "est. engine trq\nand spd assuming\nlockup"
	      SrcPort		      1
	      Points		      [90, 0]
	      DstBlock		      "Product4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "eta_gb"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"est. engine trq\nand\nspd"
		DstPort			2
	      }
	      Branch {
		Points			[0, 405]
		DstBlock		"est. engine trq\nand spd assuming\nlockup"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "gb_trq_out_r"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		Points			[0, -40]
		DstBlock		"est. engine trq\nand\nspd"
		DstPort			3
	      }
	      Branch {
		Points			[0, 365]
		DstBlock		"est. engine trq\nand spd assuming\nlockup"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "tires are at\ntraction limit"
	      SrcPort		      1
	      Points		      [290, 0]
	      Branch {
		Points			[0, 285]
		DstBlock		"Switch1"
		DstPort			2
	      }
	      Branch {
		Points			[0, -120]
		DstBlock		"Switch"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "est. engine trq\nand\nspd"
	      SrcPort		      3
	      Points		      [0, 115; -55, 0; 0, 295]
	      DstBlock		      "est. engine trq\nand spd assuming\nlockup"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "est. engine trq\nand spd assuming\nlockup"
	      SrcPort		      2
	      Points		      [35, 0; 0, 25]
	      Branch {
		DstBlock		"engine\ntorque\ncapability1"
		DstPort			1
	      }
	      Branch {
		Points			[0, 55; 265, 0; 0, -55]
		DstBlock		"downshift \ncommand1"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator2"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		Points			[0, -95]
		DstBlock		"Logical\nOperator"
		DstPort			3
	      }
	      Branch {
		DstBlock		"Memory"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		Points			[0, 100]
		DstBlock		"downshift \ncommand"
		DstPort			2
	      }
	      Branch {
		DstBlock		"upshift\n command"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "upshift\n command"
	      SrcPort		      1
	      Points		      [120, 0]
	      Branch {
		Points			[0, 10]
		DstBlock		"delta\ngear\nnumber"
		DstPort			2
	      }
	      Branch {
		DstBlock		"delta\ngear\nnumber"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      DstBlock		      "Product3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      DstBlock		      "locked up"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "downshift \ncommand1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [10, 0; 0, -85]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "load=T/\n(maxT\nat spd)1"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "downshift \ncommand1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "shifting1"
	      SrcPort		      1
	      DstBlock		      "Goto5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "lock-up in\nthis gear"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From6"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant15"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From4"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Switch3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Switch3"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From2"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From3"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch3"
	      SrcPort		      1
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant14"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From <logic>2"
	      SrcPort		      1
	      DstBlock		      "Speed Dependent Shifting"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      1
	      DstBlock		      "Goto"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      2
	      DstBlock		      "Goto1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      Points		      [5, 0; 0, 0]
	      Branch {
		Points			[40, 0]
		DstBlock		"shifting, out"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Goto2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Switch2"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"gear number, out"
		DstPort			1
	      }
	      Branch {
		Points			[0, 60]
		DstBlock		"Goto7"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "gear ratio, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From5"
	      SrcPort		      1
	      Points		      [0, 65]
	      Branch {
		DstBlock		"lock-up in\nthis gear"
		DstPort			1
	      }
	      Branch {
		Points			[-100, 0]
		DstBlock		"est. engine trq\nand spd assuming\nlockup"
		DstPort			1
	      }
	    }
	    Annotation {
	      SID		      "4113"
	      Name		      "default gear ratio\ncalculation"
	      Position		      [997, 104]
	    }
	    Annotation {
	      SID		      "4114"
	      Name		      "output changes depending\nupon whether speed\ndependent shifting is used"
	      Position		      [885, 760]
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "motor controller\nlogic"
	  SID			  "4115"
	  Ports			  [4, 1]
	  Position		  [710, 70, 740, 190]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "motor controller\nlogic"
	    Location		    [91, 74, 773, 525]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "bus voltage"
	      SID		      "4116"
	      Position		      [40, 30, 60, 50]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd input\npower (W)"
	      SID		      "4117"
	      Position		      [40, 160, 60, 180]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd output\nspd (rad/s)"
	      SID		      "4118"
	      Position		      [40, 280, 60, 300]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "4119"
	      Position		      [40, 385, 60, 405]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs"
	      SID		      "4120"
	      Position		      [205, 123, 235, 147]
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs1"
	      SID		      "4121"
	      Position		      [105, 278, 135, 302]
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "4122"
	      Ports		      []
	      Position		      [590, 385, 646, 425]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[263, 139, 778, 219]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "4123"
		  Name			  "This block models a motor/controller's logic, modulating the power input requirement as follows:\n- enfo"
		  "rcing the maximum current limit of the motor/controller\n- shutting the motor off if the average speed over the ti"
		  "me step ==0\n- shutting the motor off if the transmission is shifting."
		  Position		  [257, 40]
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "4124"
	      Position		      [95, 79, 165, 101]
	      FontName		      "Arial"
	      Value		      "mc_max_crrnt"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "4125"
	      Position		      [140, 348, 175, 372]
	      FontName		      "Arial"
	      Value		      "0.001"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "4126"
	      Position		      [500, 232, 520, 258]
	      BlockMirror	      on
	      FontName		      "Arial"
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <sdo>"
	      SID		      "4127"
	      Position		      [555, 24, 645, 46]
	      GotoTag		      "mc_crrnt_limited"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "4128"
	      Ports		      [1, 1]
	      Position		      [434, 240, 466, 275]
	      BlockRotation	      270
	      NamePlacement	      "alternate"
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "4129"
	      Position		      [115, 25, 145, 55]
	      X0		      "ess_module_num*mean(ess_voc(1,:))"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      SID		      "4130"
	      Ports		      [2, 1]
	      Position		      [270, 37, 300, 68]
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      SID		      "4131"
	      Ports		      [2, 1]
	      Position		      [210, 36, 230, 54]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "4132"
	      Ports		      [2, 1]
	      Position		      [230, 282, 260, 313]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "4133"
	      Ports		      [2, 1]
	      Position		      [490, 17, 520, 48]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Sign"
	      SID		      "4134"
	      Ports		      [1, 1]
	      Position		      [270, 157, 300, 183]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Sign"
	      MaskDescription	      "y = sign(x)"
	      MaskHelp		      "Sign Function:\\n\\t\\t\\ty = 1 if x > 0\\n\\t\\t\\ty = 0 if x = 0\\n\\t\\t\\ty = -1 if x < 0"
	      MaskDisplay	      "plot(-50,-50,50,50,[-50,50],[0,0],[0,0],[-50,50],[-40,0],[-30,-30],[0,40],[30,30])"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Sign"
		Location		[159, 417, 467, 586]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "4135"
		  Position		  [35, 30, 55, 50]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "4136"
		  Position		  [65, 105, 85, 125]
		  Value			  "0"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "4137"
		  Ports			  [2, 1]
		  Position		  [140, 32, 170, 63]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "4138"
		  Ports			  [2, 1]
		  Position		  [140, 92, 170, 123]
		  Operator		  "<"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "4139"
		  Ports			  [2, 1]
		  Position		  [215, 64, 235, 91]
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "4140"
		  Position		  [265, 70, 285, 90]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 60]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, -60]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  Points		  [10, 0; 0, -25]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  Points		  [10, 0; 0, 20]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "4141"
	      Position		      [495, 180, 525, 210]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "current-limited\npower"
	      SID		      "4142"
	      Ports		      [2, 1]
	      Position		      [365, 51, 385, 69]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "true if motor\nshould be\nshut down"
	      SID		      "4143"
	      Ports		      [2, 1]
	      Position		      [385, 292, 415, 323]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd input\npower (W)1"
	      SID		      "4144"
	      Position		      [590, 185, 610, 205]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Abs1"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "req'd output\nspd (rad/s)"
	      SrcPort		      1
	      DstBlock		      "Abs1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [10, 0; 0, -55]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "true if motor\nshould be\nshut down"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Goto <sdo>"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		Points			[0, -15]
		DstBlock		"Relational\nOperator2"
		DstPort			2
	      }
	      Branch {
		DstBlock		"current-limited\npower"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, -20]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"MinMax"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "current-limited\npower"
	      SrcPort		      1
	      Points		      [60, 0; 0, 125]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "req'd input\npower (W)1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Sign"
	      SrcPort		      1
	      Points		      [20, 0; 0, -105]
	      DstBlock		      "current-limited\npower"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Abs"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "req'd input\npower (W)"
	      SrcPort		      1
	      Points		      [105, 0]
	      Branch {
		DstBlock		"Sign"
		DstPort			1
	      }
	      Branch {
		Points			[0, -35]
		DstBlock		"Abs"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [20, 0; 0, -40]
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "bus voltage"
	      SrcPort		      1
	      DstBlock		      "Memory"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "true if motor\nshould be\nshut down"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [0, -40]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      Points		      [290, 0; 0, -80]
	      DstBlock		      "true if motor\nshould be\nshut down"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "parallel clutch\ncontrol"
	  SID			  "4145"
	  Ports			  [4, 1]
	  Position		  [710, 280, 745, 360]
	  ForegroundColor	  "gray"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "parallel clutch\ncontrol"
	    Location		    [15, 107, 928, 729]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "4146"
	      Position		      [30, 18, 60, 32]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_in_r"
	      SID		      "4147"
	      Position		      [30, 58, 60, 72]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_in_r"
	      SID		      "4148"
	      Position		      [25, 168, 55, 182]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "engine on"
	      SID		      "4149"
	      Position		      [30, 388, 60, 402]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "4150"
	      Ports		      []
	      Position		      [835, 565, 891, 605]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[315, 744, 773, 944]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "4151"
		  Name			  "This clutch control block determines the clutch state given the req'd clutch output torque \nand speed ("
		  "labelled as gearbox input torque and speed), and the gear number history.\n                          conditions   "
		  "                                                                    clutch state\ngear is being shifted OR (trq <~"
		  " 0 AND (engine is                                     1 == disengaged\nclutched to avoid compression braking OR sp"
		  "d < idle))                                                              \n\n(trq >~ 0) AND (spd < launch speed) AN"
		  "D clutch                                       2 == slipping     \nwas not engaged during previous time step      "
		  "                                                           \n\nneither of above sets of conditions are met        "
		  "                                  3 == engaged\n\nBut the clutch is always disengaged when the engine is off or wa"
		  "s off within the past 0.5 s."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Clock
	      Name		      "Clock"
	      SID		      "4152"
	      Position		      [40, 535, 60, 555]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "4153"
	      Position		      [145, 83, 180, 107]
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "4154"
	      Position		      [145, 124, 225, 146]
	      Value		      "vc_clutch_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "4155"
	      Position		      [145, 189, 225, 211]
	      Value		      "vc_idle_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "4156"
	      Position		      [145, 255, 180, 275]
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "4157"
	      Position		      [145, 319, 225, 341]
	      Value		      "vc_launch_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "4158"
	      Position		      [570, 355, 605, 375]
	      BlockMirror	      on
	      Value		      "2.5"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "4159"
	      Position		      [790, 175, 810, 195]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      SID		      "4160"
	      Position		      [660, 110, 720, 140]
	      Expr		      "u[1]+2*u[2]*(1-u[1])*(1-u[3])+3*u[3]*(1-u[1])"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "4161"
	      Ports		      [2, 1]
	      Position		      [380, 67, 410, 98]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "4162"
	      Ports		      [2, 1]
	      Position		      [315, 127, 345, 158]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Manual Switch"
	      SID		      "4163"
	      Ports		      [2, 1]
	      Position		      [410, 387, 440, 423]
	      ForegroundColor	      "gray"
	      SourceBlock	      "simulink3/Nonlinear/Manual Switch"
	      SourceType	      "Manual Switch"
	      sw		      "1"
	      action		      "0"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "4164"
	      Position		      [570, 300, 600, 330]
	      BlockMirror	      on
	      X0		      "1+(2*(cyc_mph(1,2)>0))"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory1"
	      SID		      "4165"
	      Position		      [170, 415, 200, 445]
	      X0		      "cyc_mph(1,2)>0"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory2"
	      SID		      "4166"
	      Position		      [170, 565, 200, 595]
	      X0		      "-1"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "4167"
	      Ports		      [3, 1]
	      Position		      [590, 107, 625, 143]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "4168"
	      Ports		      [2, 1]
	      Position		      [300, 57, 330, 88]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "4169"
	      Ports		      [2, 1]
	      Position		      [260, 177, 290, 208]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "4170"
	      Ports		      [2, 1]
	      Position		      [260, 242, 290, 273]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      SID		      "4171"
	      Ports		      [2, 1]
	      Position		      [260, 307, 290, 338]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      SID		      "4172"
	      Ports		      [2, 1]
	      Position		      [235, 537, 265, 568]
	      Inputs		      "+-"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "4173"
	      Position		      [790, 120, 820, 150]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "4174"
	      Position		      [330, 400, 360, 430]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      TransportDelay
	      Name		      "Transport\nDelay"
	      SID		      "4175"
	      Ports		      [1, 1]
	      Position		      [170, 475, 200, 505]
	      DelayTime		      "0.2"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\ndisengaged"
	      SID		      "4176"
	      Ports		      [2, 1]
	      Position		      [450, 17, 480, 48]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nengaged"
	      SID		      "4177"
	      Ports		      [2, 1]
	      Position		      [520, 117, 550, 148]
	      Operator		      "NOR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping"
	      SID		      "4178"
	      Ports		      [3, 1]
	      Position		      [380, 254, 410, 286]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping1"
	      SID		      "4179"
	      Ports		      [2, 1]
	      Position		      [235, 386, 265, 419]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping2"
	      SID		      "4180"
	      Ports		      [2, 1]
	      Position		      [235, 466, 265, 499]
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch was NOT\nfully engaged\nduring last time step"
	      SID		      "4181"
	      Ports		      [2, 1]
	      Position		      [475, 305, 510, 340]
	      BlockMirror	      on
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "gearbox speed\nestimator"
	      SID		      "4182"
	      Ports		      [1, 1]
	      Position		      [80, 160, 110, 190]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"gearbox speed\nestimator"
		Location		[224, 217, 812, 726]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_in_r\nif no gear change"
		  SID			  "4183"
		  Position		  [45, 18, 75, 32]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "4184"
		  Ports			  []
		  Position		  [515, 345, 571, 385]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [497, 485, 832, 570]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "4185"
		    Name		    "The requested engine speed is replaced by an estimate of the\nengine's previous speed whenever the ve"
		    "hicle missed the trace\n by more than 1 mph on the last time step."
		    Position		    [167, 41]
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "4186"
		  Position		  [165, 240, 185, 260]
		  BlockMirror		  on
		  Value			  "eps"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "4187"
		  Position		  [315, 165, 335, 185]
		  BlockMirror		  on
		  Value			  "0"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "4188"
		  Position		  [230, 360, 250, 380]
		  BlockMirror		  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "4189"
		  Position		  [230, 460, 250, 480]
		  BlockMirror		  on
		  Value			  "0.11"
		}
		Block {
		  BlockType		  From
		  Name			  "From"
		  SID			  "4190"
		  Position		  [195, 40, 285, 70]
		  BlockMirror		  on
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "gb_spd_in_a"
		}
		Block {
		  BlockType		  From
		  Name			  "From <cyc>"
		  SID			  "4191"
		  Position		  [30, 304, 120, 336]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "cyc_mph_r"
		}
		Block {
		  BlockType		  From
		  Name			  "From <veh>"
		  SID			  "4192"
		  Position		  [30, 99, 85, 131]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "mpha"
		}
		Block {
		  BlockType		  From
		  Name			  "From <wh>/\ntire slip model (m/s)"
		  SID			  "4193"
		  Position		  [30, 184, 120, 216]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "veh_spd_a_rec"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  SID			  "4194"
		  Position		  [150, 97, 190, 133]
		  Gain			  "0.447"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical"
		  SID			  "4195"
		  Ports			  [2, 1]
		  Position		  [375, 317, 405, 348]
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "4196"
		  Position		  [370, 115, 400, 145]
		  X0			  "cyc_mph(1,2)*0.447/wh_radius*fd_ratio*gb_ratio(gb_num_init)"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "4197"
		  Position		  [310, 310, 340, 340]
		  X0			  "1"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "4198"
		  Ports			  [3, 1]
		  Position		  [215, 99, 245, 131]
		  Inputs		  "**/"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational"
		  SID			  "4199"
		  Ports			  [2, 1]
		  Position		  [225, 307, 255, 338]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational1"
		  SID			  "4200"
		  Ports			  [2, 1]
		  Position		  [225, 412, 255, 443]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "4201"
		  Ports			  [2, 1]
		  Position		  [160, 192, 190, 223]
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "4202"
		  Ports			  [2, 1]
		  Position		  [160, 297, 190, 328]
		  Inputs		  "-+"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "4203"
		  Position		  [310, 110, 340, 140]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "4204"
		  Position		  [445, 120, 475, 150]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "dt"
		  SID			  "4205"
		  Ports			  [0, 1]
		  Position		  [165, 408, 185, 432]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "dt"
		    Location		    [240, 561, 480, 665]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "4206"
		    Position		    [25, 25, 45, 45]
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "4207"
		    Position		    [75, 53, 105, 77]
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum4"
		    SID			    "4208"
		    Ports		    [2, 1]
		    Position		    [130, 27, 160, 58]
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "4209"
		    Position		    [185, 38, 215, 52]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "Sum4"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Sum4"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum4"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  SID			  "4210"
		  Position		  [545, 128, 575, 142]
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "dt"
		  SrcPort		  1
		  DstBlock		  "Relational1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical"
		  SrcPort		  1
		  Points		  [10, 0; 0, -200]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Logical"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational1"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From"
		  SrcPort		  1
		  Points		  [0, 50]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gb_spd_in_r\nif no gear change"
		  SrcPort		  1
		  Points		  [350, 0]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Relational"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <veh>"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    Points		    [0, 190]
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Gain"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "From <cyc>"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [0, -5]
		  DstBlock		  "Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  Labels		  [1, 0]
		  SrcBlock		  "From <wh>/\ntire slip model (m/s)"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    Points		    [0, -25; 155, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Product"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "clutch\nstate"
	      SID		      "4211"
	      Position		      [855, 128, 885, 142]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      Points		      [-15, 0; 0, -40]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      Points		      [15, 0; 0, -45]
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gb_trq_in_r"
	      SrcPort		      1
	      Points		      [70, 0]
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	      Branch {
		Points			[0, 185]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [90, 0; 0, -15]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      SrcPort		      1
	      Points		      [-120, 0; 0, -45]
	      DstBlock		      "clutch\nslipping"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      Points		      [-30, 0; 0, -35]
	      DstBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      Points		      [30, 0; 0, -55]
	      DstBlock		      "clutch\nslipping"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping"
	      SrcPort		      1
	      Points		      [80, 0; 0, -95]
	      Branch {
		Points			[80, 0]
		DstBlock		"Mux"
		DstPort			2
	      }
	      Branch {
		Points			[0, -35]
		DstBlock		"clutch\nengaged"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "clutch\nslipping"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\ndisengaged"
	      SrcPort		      1
	      Points		      [10, 0; 0, 40]
	      Branch {
		Points			[80, 0]
		DstBlock		"Mux"
		DstPort			1
	      }
	      Branch {
		Points			[0, 50]
		DstBlock		"clutch\nengaged"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "clutch\nengaged"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      DstBlock		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "engine on"
	      SrcPort		      1
	      Points		      [80, 0]
	      Branch {
		DstBlock		"clutch\nslipping1"
		DstPort			1
	      }
	      Branch {
		Points			[0, 35]
		Branch {
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 30]
		  Branch {
		    Points		    [0, 30]
		    DstBlock		    "Transport\nDelay"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [75, 0]
		    DstBlock		    "clutch\nslipping2"
		    DstPort		    1
		  }
		}
	      }
	      Branch {
		Points			[0, -20; 250, 0]
		DstBlock		"Manual Switch"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Memory1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "clutch\nslipping1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping1"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Transport\nDelay"
	      SrcPort		      1
	      DstBlock		      "clutch\nslipping2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping2"
	      SrcPort		      1
	      Points		      [25, 0; 0, -60]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Clock"
	      SrcPort		      1
	      Points		      [80, 0]
	      Branch {
		DstBlock		"Sum"
		DstPort			1
	      }
	      Branch {
		Points			[0, 35]
		DstBlock		"Memory2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Memory2"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "Switch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gb_spd_in_r"
	      SrcPort		      1
	      DstBlock		      "gearbox speed\nestimator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gearbox speed\nestimator"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[105, 0; 0, 10]
		DstBlock		"Relational\nOperator1"
		DstPort			1
	      }
	      Branch {
		Points			[0, 140]
		DstBlock		"Relational\nOperator3"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "Manual Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Manual Switch"
	      SrcPort		      1
	      Points		      [315, 0; 0, -270]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"clutch\nstate"
		DstPort			1
	      }
	      Branch {
		Points			[0, 180]
		DstBlock		"Memory"
		DstPort			1
	      }
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "sim stop\nsubsystem"
	  SID			  "4212"
	  Ports			  []
	  Position		  [50, 15, 80, 65]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/sim stop\nsubsystem"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  Outport
	  Name			  "clutch\nstate"
	  SID			  "4213"
	  Position		  [820, 313, 850, 327]
	  IconDisplay		  "Port number"
	}
	Line {
	  SrcBlock		  "motor controller\nlogic"
	  SrcPort		  1
	  DstBlock		  "Goto <mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <mc>1"
	  SrcPort		  1
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <mc>"
	  SrcPort		  1
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <ess>"
	  SrcPort		  1
	  Points		  [0, 5]
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <mc>3"
	  SrcPort		  1
	  Points		  [15, 0]
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <gb>2"
	  SrcPort		  1
	  Points		  [40, 0]
	  DstBlock		  "gearbox control\nfor use w/ AT"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From<gb>"
	  SrcPort		  1
	  Points		  [35, 0]
	  DstBlock		  "gearbox control\nfor use w/ AT"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <gb>1"
	  SrcPort		  1
	  Points		  [35, 0]
	  DstBlock		  "gearbox control\nfor use w/ AT"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <gb>3"
	  SrcPort		  1
	  Points		  [35, 0]
	  DstBlock		  "gearbox control\nfor use w/ AT"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "gearbox control\nfor use w/ AT"
	  SrcPort		  4
	  Points		  [20, 0]
	  DstBlock		  "Goto <htc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  3
	  Points		  [0, 15]
	  DstBlock		  "Goto <wh>2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  2
	  Points		  [0, 5]
	  DstBlock		  "Goto <wh>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <veh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>5"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  1
	  Points		  [0, 10; 5, 0]
	  Branch {
	    DstBlock		    "braking strategy"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [200, 0]
	    Branch {
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Branch {
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "From <wh>"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "config traction control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <wh>1"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>9"
	  SrcPort		  1
	  DstBlock		  "braking strategy"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>5"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "From<wh>4"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <wh>3"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <wh>2"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>7"
	  SrcPort		  1
	  Points		  [45, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  2
	  Points		  [135, 0]
	  Branch {
	    DstBlock		    "Sum"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -55]
	    DstBlock		    "Goto <wh>8"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Relational\nOperator"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>8"
	  SrcPort		  1
	  DstBlock		  "Relational\nOperator"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "engine on\n(parallel hybrid)"
	  SrcPort		  2
	  DstBlock		  "Goto <fc>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <fc>"
	  SrcPort		  1
	  DstBlock		  "engine on\n(parallel hybrid)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "engine on\n(parallel hybrid)"
	  SrcPort		  3
	  DstBlock		  "Goto <fc><mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>5"
	  SrcPort		  1
	  Points		  [0, 10]
	  DstBlock		  "engine on\n(parallel hybrid)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <gb>7"
	  SrcPort		  1
	  Points		  [25, 0]
	  DstBlock		  "engine on\n(parallel hybrid)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "engine on\n(parallel hybrid)"
	  SrcPort		  1
	  DstBlock		  "Goto <fc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>4"
	  SrcPort		  1
	  Points		  [35, 0]
	  DstBlock		  "engine on\n(parallel hybrid)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <wh>6"
	  SrcPort		  1
	  Points		  [35, 0]
	  DstBlock		  "engine on\n(parallel hybrid)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "parallel clutch\ncontrol"
	  SrcPort		  1
	  Points		  [20, 0]
	  Branch {
	    DstBlock		    "Goto <sdo>"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "clutch\nstate"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "From <mc>2"
	  SrcPort		  1
	  Points		  [0, 10]
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>6"
	  SrcPort		  1
	  Points		  [0, -15]
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <gb>4"
	  SrcPort		  1
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From par cntrl"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "gearbox control\nfor use w/ AT"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "Goto <htc>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox control\nfor use w/ AT"
	  SrcPort		  2
	  Points		  [15, 0]
	  DstBlock		  "Goto <gb>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox control\nfor use w/ AT"
	  SrcPort		  3
	  DstBlock		  "Goto <gb>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  4
	  Points		  [15, 0]
	  DstBlock		  "Goto <wh>6"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  5
	  Points		  [10, 0]
	  DstBlock		  "Goto <wh>7"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Ground"
	  SrcPort		  1
	  Points		  [20, 0; 0, -30]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  6
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "<vc> par auto s/a"
      SID		      "310"
      Ports		      []
      Position		      [180, 144, 245, 196]
      BackgroundColor	      "yellow"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_vc.jpg'))\n"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"<vc> par auto s/a"
	Location		[10, 112, 950, 1190]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"92"
	Block {
	  BlockType		  Constant
	  Name			  "Constant"
	  SID			  "4214"
	  Position		  [605, 185, 635, 215]
	  Value			  "3"
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux"
	  SID			  "4215"
	  Ports			  [1, 2]
	  Position		  [690, 261, 695, 299]
	  BackgroundColor	  "black"
	  ShowName		  off
	  Outputs		  "2"
	}
	Block {
	  BlockType		  From
	  Name			  "From <ess>"
	  SID			  "4216"
	  Position		  [585, 25, 680, 45]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "bus_voltage"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>"
	  SID			  "4217"
	  Position		  [570, 307, 665, 323]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_spd_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>1"
	  SID			  "4218"
	  Position		  [185, 101, 275, 119]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>2"
	  SID			  "4219"
	  Position		  [185, 16, 280, 34]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "eta_gb"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>3"
	  SID			  "4220"
	  Position		  [185, 125, 280, 145]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "slip_limited"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>6"
	  SID			  "4221"
	  Position		  [570, 269, 670, 291]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "tc_trq_spd_in_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>"
	  SID			  "4222"
	  Position		  [585, 60, 680, 80]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "P_mc_in_1lim"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>1"
	  SID			  "4223"
	  Position		  [590, 89, 680, 111]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_mc_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>2"
	  SID			  "4224"
	  Position		  [590, 124, 680, 146]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <veh>"
	  SID			  "4225"
	  Position		  [30, 347, 105, 363]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_prev"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>"
	  SID			  "4226"
	  Position		  [25, 380, 85, 400]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>1"
	  SID			  "4227"
	  Position		  [20, 311, 105, 329]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>2"
	  SID			  "4228"
	  Position		  [205, 492, 315, 508]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_drivetrain_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>3"
	  SID			  "4229"
	  Position		  [210, 526, 310, 544]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_wheel_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>4"
	  SID			  "4230"
	  Position		  [575, 341, 660, 359]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>5"
	  SID			  "4231"
	  Position		  [180, 581, 300, 599]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_rear_brake"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>6"
	  SID			  "4232"
	  Position		  [570, 376, 655, 394]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "clutch_state"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>7"
	  SID			  "4233"
	  Position		  [225, 455, 285, 475]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>8"
	  SID			  "4234"
	  Position		  [75, 236, 160, 254]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>9"
	  SID			  "4235"
	  Position		  [295, 345, 355, 365]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From<gb>"
	  SID			  "4236"
	  Position		  [190, 66, 280, 84]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From<wh>4"
	  SID			  "4237"
	  Position		  [205, 551, 320, 569]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_front_brake"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>"
	  SID			  "4238"
	  Position		  [790, 265, 855, 285]
	  NamePlacement		  "alternate"
	  GotoTag		  "engine_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>1"
	  SID			  "4239"
	  Position		  [790, 300, 870, 320]
	  GotoTag		  "spd_command"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc><mc>"
	  SID			  "4240"
	  Position		  [800, 336, 850, 354]
	  GotoTag		  "key_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>"
	  SID			  "4241"
	  Position		  [405, 65, 495, 85]
	  NamePlacement		  "alternate"
	  GotoTag		  "gear_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>1"
	  SID			  "4242"
	  Position		  [415, 96, 495, 114]
	  GotoTag		  "shifting"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <htc>"
	  SID			  "4243"
	  Position		  [415, 132, 490, 148]
	  GotoTag		  "locked_up"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <htc>1"
	  SID			  "4244"
	  Position		  [415, 19, 490, 41]
	  NamePlacement		  "alternate"
	  GotoTag		  "gear_number"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <mc>"
	  SID			  "4245"
	  Position		  [770, 75, 860, 95]
	  GotoTag		  "P_mc_in_r"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>"
	  SID			  "4246"
	  Position		  [765, 191, 835, 209]
	  NamePlacement		  "alternate"
	  GotoTag		  "clutch_state"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>1"
	  SID			  "4247"
	  Position		  [435, 341, 520, 359]
	  GotoTag		  "slip_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>"
	  SID			  "4248"
	  Position		  [430, 270, 515, 290]
	  NamePlacement		  "alternate"
	  GotoTag		  "F_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>1"
	  SID			  "4249"
	  Position		  [180, 329, 270, 351]
	  GotoTag		  "v_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>2"
	  SID			  "4250"
	  Position		  [230, 361, 320, 379]
	  GotoTag		  "wt_front_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>3"
	  SID			  "4251"
	  Position		  [405, 496, 490, 514]
	  GotoTag		  "F_front_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>4"
	  SID			  "4252"
	  Position		  [405, 559, 490, 581]
	  GotoTag		  "F_rear_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>5"
	  SID			  "4253"
	  Position		  [230, 235, 340, 255]
	  GotoTag		  "F_front_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>6"
	  SID			  "4254"
	  Position		  [190, 396, 280, 414]
	  GotoTag		  "wt_rear_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>7"
	  SID			  "4255"
	  Position		  [185, 426, 275, 444]
	  GotoTag		  "front_traction_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>8"
	  SID			  "4256"
	  Position		  [400, 205, 510, 225]
	  GotoTag		  "F_rear_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Ground
	  Name			  "Ground"
	  SID			  "4257"
	  Position		  [275, 610, 295, 630]
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator"
	  SID			  "4258"
	  Ports			  [2, 1]
	  Position		  [380, 332, 410, 363]
	  Operator		  "~="
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  SID			  "4259"
	  Ports			  [2, 1]
	  Position		  [380, 262, 410, 293]
	  Inputs		  "-+"
	}
	Block {
	  BlockType		  Reference
	  Name			  "braking strategy"
	  SID			  "4260"
	  Ports			  [2, 2]
	  Position		  [185, 232, 215, 283]
	  NamePlacement		  "alternate"
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/braking strategy"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "config traction control"
	  SID			  "4261"
	  Ports			  [3, 5]
	  Position		  [125, 304, 160, 406]
	  BackgroundColor	  "darkGreen"
	  AttributesFormatString  "%<BlockChoice>"
	  ShowPortLabels	  "none"
	  BlockChoice		  "traction control 2 axle"
	  TemplateBlock		  "lib_controls/SubSystem/config traction control"
	  MemberBlocks		  "traction control 2 axle,traction control J2452 2 axle"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "config traction control"
	    Location		    [148, 182, 646, 482]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    SIDHighWatermark	    "6898"
	    Block {
	      BlockType		      Inport
	      Name		      "time-average\nvehicle speed\n req'd (m/s)"
	      SID		      "4261::706"
	      Position		      [20, 40, 40, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SID		      "4261::707"
	      Position		      [20, 80, 40, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "total tractive\nforce req'd\n(N)"
	      SID		      "4261::708"
	      Position		      [20, 120, 40, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "traction control\n2 axle"
	      SID		      "4261::709"
	      Ports		      [3, 5]
	      Position		      [100, 40, 140, 80]
	      BackgroundColor	      "darkGreen"
	      LibraryVersion	      "1.479"
	      SourceBlock	      "lib_controls/SubSystem/traction control 2 axle"
	      SourceType	      "SubSystem"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd force\n(N)"
	      SID		      "4261::710"
	      Position		      [200, 40, 220, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd speed\n(m/s)"
	      SID		      "4261::711"
	      Position		      [200, 80, 220, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nfront axle\n(N)"
	      SID		      "4261::712"
	      Position		      [200, 120, 220, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nrear axle\n(N)"
	      SID		      "4261::713"
	      Position		      [200, 160, 220, 180]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "front/total \ntraction ratio"
	      SID		      "4261::714"
	      Position		      [200, 200, 220, 220]
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "time-average\nvehicle speed\n req'd (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "total tractive\nforce req'd\n(N)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      1
	      DstBlock		      "req'd force\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      2
	      DstBlock		      "req'd speed\n(m/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      3
	      DstBlock		      "weight on\nfront axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      4
	      DstBlock		      "weight on\nrear axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      5
	      DstBlock		      "front/total \ntraction ratio"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "engine on\n(parallel hybrid)"
	  SID			  "4262"
	  Ports			  [5, 3]
	  Position		  [715, 254, 750, 366]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "engine on\n(parallel hybrid)"
	    Location		    [10, 112, 950, 1190]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "trq req'd\nout of clutch\n(N*m)"
	      SID		      "4263"
	      Position		      [35, 13, 65, 27]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "spd req'd\nout of clutch\n(N*m)1"
	      SID		      "4264"
	      Position		      [30, 78, 60, 92]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "fc_spd_out_r"
	      SID		      "4265"
	      Position		      [415, 553, 445, 567]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "v_ave_req"
	      SID		      "4266"
	      Position		      [160, 523, 190, 537]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "clutch\nstate"
	      SID		      "4267"
	      Position		      [100, 468, 130, 482]
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)"
	      SID		      "4268"
	      Position		      [165, 271, 225, 289]
	      ShowName		      off
	      Value		      "cs_lo_soc"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)1"
	      SID		      "4269"
	      Position		      [115, 376, 190, 394]
	      Value		      "cs_off_trq_frac"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)2"
	      SID		      "4270"
	      Position		      [745, 105, 785, 125]
	      Value		      "fc_on"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)3"
	      SID		      "4271"
	      Position		      [520, 322, 570, 338]
	      Value		      "fc_tstat"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES1"
	      SID		      "4272"
	      Ports		      []
	      Position		      [830, 60, 886, 100]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES1"
		Location		[296, 542, 726, 743]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "4273"
		  Name			  "This engine state computer keeps the engine on if:\n[\n1) key is on, AND\n2) (trq is too high AND speed "
		  "is too high for idle) OR engine is allowed to idle, AND\n3) vehicle speed >= cs_electric_launch_spd [ in m/s ], AN"
		  "D\n4) req'd trq > (cs_off_trq_frac * max_trq_at_spd) OR SOC<cs_lo_soc\n]\nOR\n[ engine was previously on AND the t"
		  "ransmission is shifting ]\n\nThe last condition is added to prevent the engine from unrealistically\nshutting down"
		  " for a second or two during a shift."
		  Position		  [212, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "4274"
	      Position		      [110, 27, 145, 43]
	      ShowName		      off
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "4275"
	      Position		      [325, 82, 395, 98]
	      ShowName		      off
	      Value		      "vc_idle_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant10"
	      SID		      "4276"
	      Position		      [170, 232, 300, 248]
	      ShowName		      off
	      Value		      "cs_charge_deplete_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant11"
	      SID		      "4277"
	      Position		      [95, 61, 210, 79]
	      ShowName		      off
	      Value		      "cs_electric_decel_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "4278"
	      Position		      [105, 117, 175, 133]
	      ShowName		      off
	      Value		      "vc_idle_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "4279"
	      Position		      [400, 509, 480, 531]
	      ShowName		      off
	      Value		      "vc_launch_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "4280"
	      Position		      [155, 480, 175, 500]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "4281"
	      Position		      [215, 535, 235, 555]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "4282"
	      Position		      [155, 585, 175, 605]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant7"
	      SID		      "4283"
	      Position		      [740, 550, 760, 570]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant8"
	      SID		      "4284"
	      Position		      [240, 389, 270, 411]
	      Value		      "eps"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant9"
	      SID		      "4285"
	      Position		      [625, 370, 645, 390]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <ess>"
	      SID		      "4286"
	      Position		      [105, 254, 150, 276]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>1"
	      SID		      "4287"
	      Position		      [105, 148, 190, 172]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "v_req_limited"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>2"
	      SID		      "4288"
	      Position		      [585, 243, 655, 257]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "shifting"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>3"
	      SID		      "4289"
	      Position		      [335, 475, 420, 495]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_max_pwr"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>4"
	      SID		      "4290"
	      Position		      [515, 286, 585, 304]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "fc_clt_tmp"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      SID		      "4291"
	      Position		      [585, 318, 615, 342]
	      Gain		      "vc_fc_warm_tmp_frac"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      SID		      "4292"
	      Position		      [380, 390, 410, 420]
	      Gain		      "tc_mc_to_fc_ratio"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator10"
	      SID		      "4293"
	      Ports		      [3, 1]
	      Position		      [340, 511, 370, 569]
	      ShowName		      off
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator11"
	      SID		      "4294"
	      Ports		      [1, 1]
	      Position		      [350, 235, 380, 255]
	      ShowName		      off
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator12"
	      SID		      "4295"
	      Ports		      [3, 1]
	      Position		      [810, 154, 840, 186]
	      ShowName		      off
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator13"
	      SID		      "4296"
	      Ports		      [2, 1]
	      Position		      [685, 298, 715, 327]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator2"
	      SID		      "4297"
	      Ports		      [2, 1]
	      Position		      [425, 31, 445, 64]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator3"
	      SID		      "4298"
	      Ports		      [2, 1]
	      Position		      [330, 21, 360, 54]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator4"
	      SID		      "4299"
	      Ports		      [2, 1]
	      Position		      [285, 16, 305, 49]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator5"
	      SID		      "4300"
	      Ports		      [3, 1]
	      Position		      [585, 125, 615, 235]
	      ShowName		      off
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator6"
	      SID		      "4301"
	      Ports		      [3, 1]
	      Position		      [385, 322, 405, 358]
	      ShowName		      off
	      Operator		      "OR"
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator7"
	      SID		      "4302"
	      Ports		      [2, 1]
	      Position		      [680, 243, 710, 272]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator8"
	      SID		      "4303"
	      Ports		      [5, 1]
	      Position		      [755, 160, 785, 220]
	      ShowName		      off
	      Operator		      "OR"
	      Inputs		      "5"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator9"
	      SID		      "4304"
	      Ports		      [2, 1]
	      Position		      [520, 160, 545, 195]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "Look-Up Table"
	      SID		      "4305"
	      Position		      [205, 175, 235, 205]
	      InputValues	      "[cs_lo_soc cs_hi_soc cs_hi_soc+eps]"
	      Table		      "[cs_electric_launch_spd_lo cs_electric_launch_spd_hi cs_electric_launch_spd_hi]"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Manual \nSwitch"
	      SID		      "4306"
	      Ports		      [2, 1]
	      Position		      [685, 397, 715, 433]
	      LibraryVersion	      "1.260"
	      SourceBlock	      "simulink/Signal\nRouting/Manual Switch"
	      SourceType	      "Manual Switch"
	      sw		      "1"
	      action		      "0"
	      varsize		      off
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "4307"
	      Position		      [685, 340, 715, 370]
	      BlockMirror	      on
	      X0		      "cyc_mph(1,2)>0"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      SID		      "4308"
	      Ports		      [2, 1]
	      Position		      [235, 347, 265, 378]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      SID		      "4309"
	      Ports		      [2, 1]
	      Position		      [345, 432, 375, 463]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      SID		      "4310"
	      Ports		      [2, 1]
	      Position		      [500, 397, 530, 428]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "4311"
	      Ports		      [2, 1]
	      Position		      [275, 153, 300, 182]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "4312"
	      Ports		      [2, 1]
	      Position		      [290, 324, 315, 351]
	      ShowName		      off
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "4313"
	      Ports		      [2, 1]
	      Position		      [255, 257, 285, 288]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      SID		      "4314"
	      Ports		      [2, 1]
	      Position		      [290, 379, 315, 406]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator4"
	      SID		      "4315"
	      Ports		      [2, 1]
	      Position		      [530, 444, 555, 471]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator5"
	      SID		      "4316"
	      Ports		      [2, 1]
	      Position		      [635, 289, 660, 316]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator6"
	      SID		      "4317"
	      Ports		      [2, 1]
	      Position		      [625, 409, 650, 436]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "4318"
	      Ports		      [1, 1]
	      Position		      [595, 525, 625, 555]
	      InputPortMap	      "u0"
	      UpperLimit	      "max(fc_map_spd)*fc_spd_scale"
	      LowerLimit	      "vc_idle_spd*vc_idle_bool"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Subsystem"
	      SID		      "4319"
	      Ports		      [1, 1]
	      Position		      [435, 432, 480, 468]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Running Average"
	      MaskDescription	      "Running Average"
	      MaskHelp		      "Output is the average of the last (Averaging Time) seconds of input."
	      MaskPromptString	      "Averaging Time Steps (#)"
	      MaskStyleString	      "edit"
	      MaskVariables	      "n=@1;"
	      MaskTunableValueString  "on"
	      MaskEnableString	      "on"
	      MaskVisibilityString    "on"
	      MaskToolTipString	      "on"
	      MaskDisplay	      "disp('Running\\nAverage')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "3"
	      System {
		Name			"Subsystem"
		Location		[137, 366, 771, 685]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "4320"
		  Position		  [50, 110, 70, 130]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "4321"
		  Position		  [75, 210, 95, 230]
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "4322"
		  Position		  [75, 274, 115, 296]
		  FontName		  "Arial"
		  Value			  "n"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "4323"
		  Position		  [380, 224, 420, 246]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  From
		  Name			  "From <vc>2"
		  SID			  "4324"
		  Position		  [120, 88, 190, 102]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "shifting"
		}
		Block {
		  BlockType		  Integrator
		  Name			  "Integrator"
		  SID			  "4325"
		  Ports			  [1, 1]
		  Position		  [295, 100, 315, 120]
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "4326"
		  Position		  [135, 235, 165, 265]
		  X0			  "-0.1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "4327"
		  Position		  [170, 30, 200, 60]
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "4328"
		  Ports			  [2, 1]
		  Position		  [505, 109, 525, 136]
		  Inputs		  "*/"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  SID			  "4329"
		  Ports			  [2, 1]
		  Position		  [210, 271, 230, 289]
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "4330"
		  Ports			  [2, 1]
		  Position		  [250, 187, 280, 218]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "4331"
		  Ports			  [2, 1]
		  Position		  [440, 105, 460, 125]
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "4332"
		  Ports			  [2, 1]
		  Position		  [170, 210, 190, 230]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|+-"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "4333"
		  Position		  [305, 190, 335, 220]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "4334"
		  Position		  [450, 190, 480, 220]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch2"
		  SID			  "4335"
		  Position		  [235, 95, 265, 125]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch3"
		  SID			  "4336"
		  Position		  [115, 30, 145, 60]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  VariableTransportDelay
		  Name			  "Variable\nTransport Delay"
		  SID			  "4337"
		  Ports			  [2, 1]
		  Position		  [375, 137, 405, 168]
		  MaximumDelay		  "n"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "4338"
		  Position		  [550, 115, 570, 135]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "From <vc>2"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    Points		    [0, -15; -120, 0; 0, -35]
		    DstBlock		    "Switch3"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 15]
		    DstBlock		    "Switch2"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    Points		    [0, -30; -120, 0]
		    DstBlock		    "Switch3"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Switch2"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  Points		  [25, 0]
		  Branch {
		    DstBlock		    "Switch3"
		    DstPort		    3
		  }
		  Branch {
		    DstBlock		    "Switch2"
		    DstPort		    3
		  }
		}
		Line {
		  SrcBlock		  "Switch3"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch2"
		  SrcPort		  1
		  DstBlock		  "Integrator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  Points		  [0, -75]
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [0, -20]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [80, 0]
		    Branch {
		    Points		    [0, -10]
		    DstBlock		    "Switch1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Switch1"
		    DstPort		    2
		    }
		  }
		  Branch {
		    Points		    [0, -45]
		    DstBlock		    "Variable\nTransport Delay"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    Points		    [55, 0]
		    DstBlock		    "Switch"
		    DstPort		    3
		  }
		  Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    Points		    [0, -25]
		    Branch {
		    Points		    [0, -15; 175, 0]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		  }
		  Branch {
		    Points		    [0, 30]
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Integrator"
		  SrcPort		  1
		  Points		  [25, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 35]
		    DstBlock		    "Variable\nTransport Delay"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Variable\nTransport Delay"
		  SrcPort		  1
		  Points		  [15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "4339"
	      Position		      [515, 513, 545, 567]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "4340"
	      Position		      [810, 534, 835, 566]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch3"
	      SID		      "4341"
	      Position		      [400, 239, 430, 281]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch4"
	      SID		      "4342"
	      Position		      [445, 294, 475, 336]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "T>~0"
	      SID		      "4343"
	      Ports		      [2, 1]
	      Position		      [170, 12, 200, 43]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To Workspace"
	      SID		      "4344"
	      Ports		      [1]
	      Position		      [325, 181, 480, 199]
	      VariableName	      "cs_electric_launch_spd_probe"
	      MaxDataPoints	      "inf"
	      SampleTime	      "-1"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch\ndisengaged"
	      SID		      "4345"
	      Ports		      [2, 1]
	      Position		      [210, 467, 240, 498]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "key_on"
	      SID		      "4346"
	      Ports		      [0, 1]
	      Position		      [575, 29, 630, 61]
	      NamePlacement	      "alternate"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Repeating table"
	      MaskDescription	      "Repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table. Time values should be monotonically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "vc_key_on(:,1)|vc_key_on(:,2)"
	      Port {
		PortNumber		1
		Name			"ignition key is on"
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
	      }
	      System {
		Name			"key_on"
		Location		[5, 42, 410, 213]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "4347"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "4348"
		  Position		  [110, 60, 150, 80]
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "4349"
		  Position		  [210, 58, 250, 82]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "4350"
		  Position		  [285, 60, 305, 80]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  DstBlock		  "Fcn1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max_torque\n lookup"
	      SID		      "4351"
	      Position		      [115, 343, 145, 367]
	      NamePlacement	      "alternate"
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      Table		      "fc_max_trq*fc_trq_scale"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max_torque\n lookup1"
	      SID		      "4352"
	      Position		      [445, 393, 475, 417]
	      NamePlacement	      "alternate"
	      InputValues	      "mc_map_spd*mc_spd_scale"
	      Table		      "mc_max_trq*mc_trq_scale*mc_overtrq_factor"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "moving next\ntime"
	      SID		      "4353"
	      Ports		      [2, 1]
	      Position		      [210, 572, 240, 603]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "not\nmoving"
	      SID		      "4354"
	      Ports		      [2, 1]
	      Position		      [275, 522, 305, 553]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "repeated cycle:\n speed required at\nend of NEXT step"
	      SID		      "4355"
	      Ports		      [0, 1]
	      Position		      [70, 542, 105, 578]
	      FontName		      "Arial"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Forward looking repeating table"
	      MaskDescription	      "Forward looking repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table with a one time step forward offset. Time values should be monoto"
	      "nically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "cyc_mph(:,1)|cyc_mph(:,2)"
	      System {
		Name			"repeated cycle:\n speed required at\nend of NEXT step"
		Location		[57, 72, 432, 234]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "4356"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "4357"
		  Position		  [110, 25, 150, 45]
		  ForegroundColor	  "green"
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "4358"
		  Position		  [260, 33, 300, 57]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "4359"
		  Position		  [90, 85, 120, 115]
		  ForegroundColor	  "green"
		  X0			  "-0.1"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "4360"
		  Ports			  [2, 1]
		  Position		  [150, 62, 180, 93]
		  ForegroundColor	  "green"
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "4361"
		  Ports			  [2, 1]
		  Position		  [205, 26, 235, 59]
		  ForegroundColor	  "green"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "4362"
		  Position		  [335, 35, 355, 55]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -35]
		    DstBlock		    "Fcn1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0; 0, -15]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "spd>set point"
	      SID		      "4363"
	      Ports		      [2, 1]
	      Position		      [235, 47, 265, 78]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "w>idle"
	      SID		      "4364"
	      Ports		      [2, 1]
	      Position		      [275, 102, 305, 133]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "engine on"
	      SID		      "4365"
	      Position		      [875, 163, 905, 177]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "spd command\n (rad/s)"
	      SID		      "4366"
	      Position		      [865, 543, 895, 557]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "key on"
	      SID		      "4367"
	      Position		      [765, 38, 795, 52]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator12"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		Points			[0, 185]
		Branch {
		  Points		  [0, 165; -55, 0]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Branch {
		  DstBlock		  "Memory"
		  DstPort		  1
		}
	      }
	      Branch {
		DstBlock		"engine on"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "(--)2"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator12"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "max_torque\n lookup"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "(--)1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, -15]
		DstBlock		"Product"
		DstPort			2
	      }
	      Branch {
		DstBlock		"Relational\nOperator3"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant8"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      Points		      [50, 0]
	      DstBlock		      "Logical\nOperator6"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator6"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Switch4"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch3"
	      SrcPort		      1
	      Points		      [70, 0]
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "w>idle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      DstBlock		      "T>~0"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <vc>2"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator7"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator7"
	      SrcPort		      1
	      Points		      [5, 0; 0, -80]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "trq req'd\nout of clutch\n(N*m)"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"T>~0"
		DstPort			1
	      }
	      Branch {
		Points			[0, 310]
		Branch {
		  Points		  [0, 125]
		  DstBlock		  "Product2"
		  DstPort		  2
		}
		Branch {
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator3"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "w>idle"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "spd req'd\nout of clutch\n(N*m)1"
	      SrcPort		      1
	      Points		      [0, 25; 30, 0]
	      Branch {
		Points			[0, 245]
		Branch {
		  DstBlock		  "max_torque\n lookup"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 85; 230, 0]
		  Branch {
		    DstBlock		    "Product2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -35]
		    DstBlock		    "Gain1"
		    DstPort		    1
		  }
		}
	      }
	      Branch {
		DstBlock		"w>idle"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator5"
	      SrcPort		      1
	      Points		      [0, -10]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator6"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [-15, 0; 0, -35]
	      Branch {
		DstBlock		"Logical\nOperator7"
		DstPort			2
	      }
	      Branch {
		DstBlock		"Logical\nOperator13"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator5"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator13"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <vc>4"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator13"
	      SrcPort		      1
	      Points		      [10, 0; 0, -125]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "(--)3"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator8"
	      SrcPort		      1
	      Points		      [0, -10]
	      DstBlock		      "Logical\nOperator12"
	      DstPort		      3
	    }
	    Line {
	      Name		      "ignition key is on"
	      Labels		      [0, 0]
	      SrcBlock		      "key_on"
	      SrcPort		      1
	      Points		      [85, 0]
	      Branch {
		DstBlock		"key on"
		DstPort			1
	      }
	      Branch {
		Points			[0, 105; 70, 0; 0, 20]
		DstBlock		"Logical\nOperator12"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator2"
	      SrcPort		      1
	      Points		      [105, 0; 0, 95]
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator9"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch4"
	      SrcPort		      1
	      Points		      [30, 0; 0, -100]
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Look-Up Table"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			2
	      }
	      Branch {
		DstBlock		"To Workspace"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant10"
	      SrcPort		      1
	      Points		      [0, 20; 25, 0]
	      Branch {
		Points			[0, 40]
		Branch {
		  DstBlock		  "Switch4"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 15]
		  DstBlock		  "Switch4"
		  DstPort		  2
		}
	      }
	      Branch {
		DstBlock		"Switch3"
		DstPort			2
	      }
	      Branch {
		Points			[0, -15]
		DstBlock		"Logical\nOperator11"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		DstBlock		"Switch3"
		DstPort			3
	      }
	      Branch {
		Points			[0, 55]
		DstBlock		"Logical\nOperator6"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator11"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <ess>"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	      Branch {
		Points			[0, -75]
		DstBlock		"Look-Up Table"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "(--)"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator10"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "fc_spd_out_r"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "spd command\n (rad/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant7"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "repeated cycle:\n speed required at\nend of NEXT step"
	      SrcPort		      1
	      Points		      [75, 0; 0, 20]
	      DstBlock		      "moving next\ntime"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      DstBlock		      "moving next\ntime"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "moving next\ntime"
	      SrcPort		      1
	      Points		      [80, 0]
	      DstBlock		      "Logical\nOperator10"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "not\nmoving"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator10"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "v_ave_req"
	      SrcPort		      1
	      DstBlock		      "not\nmoving"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      DstBlock		      "not\nmoving"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nstate"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <vc>3"
	      SrcPort		      1
	      Points		      [90, 0]
	      DstBlock		      "Relational\nOperator4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "Subsystem"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator4"
	      SrcPort		      1
	      Points		      [175, 0; 0, -260]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "clutch\ndisengaged"
	      SrcPort		      1
	      Points		      [80, 0]
	      DstBlock		      "Logical\nOperator10"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant11"
	      SrcPort		      1
	      DstBlock		      "spd>set point"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "spd>set point"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "T>~0"
	      SrcPort		      1
	      Points		      [65, 0]
	      DstBlock		      "Logical\nOperator4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator4"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <vc>1"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	      Branch {
		DstBlock		"spd>set point"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "max_torque\n lookup1"
	      SrcPort		      1
	      DstBlock		      "Product3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"max_torque\n lookup1"
		DstPort			1
	      }
	      Branch {
		Points			[0, 15]
		DstBlock		"Product3"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant9"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Manual \nSwitch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      Points		      [70, 0; 0, 15]
	      DstBlock		      "Relational\nOperator6"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Manual \nSwitch"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      5
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator6"
	      SrcPort		      1
	      DstBlock		      "Manual \nSwitch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Subsystem"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		DstBlock		"Relational\nOperator4"
		DstPort			1
	      }
	      Branch {
		Points			[0, -15; 100, 0]
		DstBlock		"Relational\nOperator6"
		DstPort			1
	      }
	    }
	    Annotation {
	      SID		      "4368"
	      Name		      "engine not suppressed if \ness insufficient "
	      Position		      [785, 464]
	    }
	    Annotation {
	      SID		      "4369"
	      Name		      "engine not \nsuppressed for\nelectric launch"
	      Position		      [423, 147]
	    }
	    Annotation {
	      SID		      "4370"
	      Name		      "engine not shut off\n rather than idle"
	      Position		      [496, 72]
	    }
	    Annotation {
	      SID		      "4371"
	      Name		      "engine on if engine on \npreviously and engine \nnot warm"
	      Position		      [563, 379]
	    }
	    Annotation {
	      SID		      "4372"
	      Name		      "engine not shut \ndown during shifts"
	      Position		      [666, 217]
	    }
	    Annotation {
	      SID		      "4373"
	      Name		      "engine not suppressed\nif mc insufficient "
	      Position		      [800, 404]
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "front and rear\nbrake controller\n(achievable)"
	  SID			  "4374"
	  Ports			  [6, 2]
	  Position		  [350, 476, 385, 604]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/front and rear\nbrake controller\n(achievable)"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "gearbox control\nfor use w/ AT \nin parallel sa"
	  SID			  "4375"
	  Ports			  [4, 4]
	  Position		  [340, 34, 375, 146]
	  FontName		  "Arial"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "gearbox control\nfor use w/ AT \nin parallel sa"
	    Location		    [12, 74, 983, 726]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "eta_gb"
	      SID		      "4376"
	      Position		      [45, 85, 65, 105]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_out_r"
	      SID		      "4377"
	      Position		      [45, 135, 65, 155]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_out_r"
	      SID		      "4378"
	      Position		      [45, 180, 65, 200]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "tires are at\ntraction limit"
	      SID		      "4379"
	      Position		      [45, 230, 65, 250]
	      FontName		      "Arial"
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "4380"
	      Ports		      []
	      Position		      [905, 865, 961, 905]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[430, 234, 888, 441]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "4381"
		  Name			  "Lock-up of the HTC occurs when it is supposed to for the current gear, AND\nthe transmission isn't shift"
		  "ing, AND\nthe lockup wouldn't precipitate an immediate downshift."
		  Position		  [217, 162]
		}
		Annotation {
		  SID			  "4382"
		  Name			  "This gearbox control block computes the current gear number given the gearbox's\nreq'd output torque and"
		  " speed and an estimate its efficiency.  Upshifts occur, given a\ncertain engine speed,  when the estimated engine "
		  "load falls below the upshift curve\nin engine speed/load space, and downshifts likewise occur when estimated engin"
		  "e\nload rises above the downshift curve.  Separate upshift and downshift curves are\ndefined for each gear.  An up"
		  "shift may not be immediately followed by a downshift.\nIf the tires are about to slip, don't upshift unless the en"
		  "gine would be at max. speed.\nEnforce this rule by setting the load to 1 when the tires are about to slip."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "4383"
	      Position		      [385, 65, 405, 85]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "4384"
	      Position		      [305, 375, 325, 395]
	      BlockMirror	      on
	      Value		      "0.5"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant14"
	      SID		      "4385"
	      Position		      [470, 863, 565, 877]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant15"
	      SID		      "4386"
	      Position		      [400, 728, 495, 742]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "4387"
	      Position		      [385, 470, 405, 490]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      SID		      "4388"
	      Ports		      [1, 2]
	      Position		      [740, 716, 745, 754]
	      BackgroundColor	      "black"
	      ShowName		      off
	      Outputs		      "2"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      SID		      "4389"
	      Position		      [570, 835, 695, 855]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <logic>2"
	      SID		      "4390"
	      Position		      [50, 789, 155, 821]
	      ForegroundColor	      "red"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "v_req_limited"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      SID		      "4391"
	      Position		      [570, 895, 695, 915]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From2"
	      SID		      "4392"
	      Position		      [510, 755, 635, 775]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From3"
	      SID		      "4393"
	      Position		      [510, 780, 635, 800]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From4"
	      SID		      "4394"
	      Position		      [510, 690, 635, 710]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From5"
	      SID		      "4395"
	      Position		      [105, 260, 195, 280]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "gear_num_out"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From6"
	      SID		      "4396"
	      Position		      [190, 420, 280, 440]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "shifting_out"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      SID		      "4397"
	      Position		      [535, 207, 560, 233]
	      FontName		      "Arial"
	      Gain		      "-1"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain2"
	      SID		      "4398"
	      Position		      [180, 185, 195, 215]
	      FontName		      "Arial"
	      Gain		      "tc_mc_to_fc_ratio"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain3"
	      SID		      "4399"
	      Position		      [265, 185, 280, 215]
	      FontName		      "Arial"
	      Gain		      "tc_mc_to_fc_ratio"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain4"
	      SID		      "4400"
	      Position		      [215, 625, 230, 655]
	      FontName		      "Arial"
	      Gain		      "tc_mc_to_fc_ratio"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain5"
	      SID		      "4401"
	      Position		      [300, 625, 315, 655]
	      FontName		      "Arial"
	      Gain		      "tc_mc_to_fc_ratio"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto"
	      SID		      "4402"
	      Position		      [275, 780, 395, 800]
	      NamePlacement	      "alternate"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto1"
	      SID		      "4403"
	      Position		      [275, 804, 395, 826]
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto2"
	      SID		      "4404"
	      Position		      [770, 780, 890, 800]
	      GotoTag		      "shifting_out"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto3"
	      SID		      "4405"
	      Position		      [840, 195, 945, 215]
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto4"
	      SID		      "4406"
	      Position		      [890, 65, 1000, 85]
	      NamePlacement	      "alternate"
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto5"
	      SID		      "4407"
	      Position		      [890, 140, 1000, 160]
	      NamePlacement	      "alternate"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto7"
	      SID		      "4408"
	      Position		      [825, 920, 945, 940]
	      GotoTag		      "gear_num_out"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "4409"
	      Ports		      [4, 1]
	      Position		      [665, 402, 695, 448]
	      Inputs		      "4"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "4410"
	      Ports		      [1, 1]
	      Position		      [315, 414, 345, 446]
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator2"
	      SID		      "4411"
	      Ports		      [1, 1]
	      Position		      [530, 506, 560, 544]
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "4412"
	      Position		      [600, 510, 630, 540]
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "4413"
	      Ports		      [2, 1]
	      Position		      [655, 752, 660, 803]
	      ShowName		      off
	      Inputs		      "2"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      SID		      "4414"
	      Ports		      [2, 1]
	      Position		      [240, 82, 270, 113]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      SID		      "4415"
	      Ports		      [2, 1]
	      Position		      [595, 203, 615, 227]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product4"
	      SID		      "4416"
	      Ports		      [2, 1]
	      Position		      [260, 517, 290, 548]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "4417"
	      Ports		      [2, 1]
	      Position		      [300, 317, 330, 348]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation1"
	      SID		      "4418"
	      Ports		      [1, 1]
	      Position		      [780, 66, 800, 84]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "gb_gears_num"
	      LowerLimit	      "1"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Speed Dependent Shifting"
	      SID		      "4419"
	      Ports		      [1, 2]
	      Position		      [200, 777, 230, 828]
	      SourceBlock	      "lib_controls/SubSystem/Speed Dependent Shifting"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "off"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "4420"
	      Position		      [380, 105, 410, 135]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "4421"
	      Position		      [380, 510, 410, 540]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch2"
	      SID		      "4422"
	      Position		      [715, 855, 745, 885]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch3"
	      SID		      "4423"
	      Position		      [685, 720, 715, 750]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "allow downshift?"
	      SID		      "4424"
	      Ports		      [1, 1]
	      Position		      [475, 32, 505, 68]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"allow downshift?"
		Location		[346, 271, 835, 486]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gearnum"
		  SID			  "4425"
		  Position		  [35, 35, 55, 55]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  SID			  "4426"
		  Ports			  [2, 1]
		  Position		  [380, 43, 410, 67]
		  FontName		  "Arial"
		  Operator		  "NOR"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "4427"
		  Position		  [150, 60, 185, 80]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "4428"
		  Position		  [150, 105, 185, 125]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "4429"
		  Ports			  [2, 1]
		  Position		  [230, 38, 260, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator2"
		  SID			  "4430"
		  Ports			  [2, 1]
		  Position		  [230, 98, 260, 122]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  Outport
		  Name			  "allow shift"
		  SID			  "4431"
		  Position		  [445, 45, 465, 65]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  DstBlock		  "allow shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gearnum"
		  SrcPort		  1
		  Points		  [50, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 25]
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 35]
		    DstBlock		    "Relational\nOperator2"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [15, 0; 0, -15]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 70; -60, 0]
		    DstBlock		    "Memory1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator2"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical\nOperator"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "current\ngear\nnumber"
	      SID		      "4432"
	      Ports		      [2, 1]
	      Position		      [725, 57, 745, 93]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "delta\ngear\nnumber"
	      SID		      "4433"
	      Position		      [655, 114, 685, 146]
	      FontName		      "Arial"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "downshift \ncommand"
	      SID		      "4434"
	      Ports		      [3, 1]
	      Position		      [475, 194, 505, 246]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"downshift \ncommand"
		Location		[441, 362, 916, 657]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "4435"
		  Position		  [45, 98, 75, 112]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "4436"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "4437"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "4438"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "4439"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "4440"
		  Ports			  [1, 1]
		  Position		  [240, 100, 270, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_dnshift_spd|gb_dnshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "4441"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "4442"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "4443"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "4444"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [55, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "downshift \ncommand1"
	      SID		      "4445"
	      Ports		      [3, 1]
	      Position		      [475, 499, 505, 551]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"downshift \ncommand1"
		Location		[431, 372, 906, 667]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "4446"
		  Position		  [45, 98, 75, 112]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "4447"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "4448"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "4449"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "4450"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "4451"
		  Ports			  [1, 1]
		  Position		  [240, 100, 270, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_dnshift_spd|gb_dnshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "4452"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "4453"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "4454"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "4455"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [55, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "engine\ntorque\ncapability"
	      SID		      "4456"
	      Position		      [180, 125, 210, 145]
	      FontName		      "Arial"
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      Table		      "fc_max_trq*fc_trq_scale+eps"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "engine\ntorque\ncapability1"
	      SID		      "4457"
	      Position		      [200, 530, 230, 550]
	      FontName		      "Arial"
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      Table		      "fc_max_trq*fc_trq_scale+eps"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "est. engine trq\nand\nspd"
	      SID		      "4458"
	      Ports		      [4, 3]
	      Position		      [115, 84, 145, 116]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"est. engine trq\nand\nspd"
		Location		[-51, 261, 973, 654]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear\nnumber"
		  SID			  "4459"
		  Position		  [20, 113, 50, 127]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  " prev eta_gb"
		  SID			  "4460"
		  Position		  [20, 168, 50, 182]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_trq_out_r"
		  SID			  "4461"
		  Position		  [20, 223, 50, 237]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_out_r"
		  SID			  "4462"
		  Position		  [20, 283, 50, 297]
		  Port			  "4"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "4463"
		  Ports			  []
		  Position		  [1095, 305, 1151, 345]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [231, 257, 689, 321]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "4464"
		    Name		    "Estimate engine torque and speed associated with the previous gear, assuming that\nthe gearbox effici"
		    "ency is constant."
		    Position		    [227, 12]
		    VerticalAlignment	    "top"
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "4465"
		  Position		  [760, 220, 780, 240]
		  BlockMirror		  on
		  Value			  "[1 1]"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant5"
		  SID			  "4466"
		  Position		  [620, 70, 640, 90]
		  BlockMirror		  on
		  Value			  "0"
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux"
		  SID			  "4467"
		  Ports			  [1, 2]
		  Position		  [980, 172, 1015, 208]
		  Outputs		  "2"
		}
		Block {
		  BlockType		  From
		  Name			  "From <vc>"
		  SID			  "4468"
		  Position		  [310, 50, 405, 70]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "locked_up"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "K_adv"
		  SID			  "4469"
		  Ports			  [1, 1]
		  Position		  [340, 145, 370, 175]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "K_adv"
		    Location		    [502, 588, 994, 833]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Req'd output\ntrq and spd\n(Nm), (rad/s)"
		    SID			    "4470"
		    Position		    [45, 58, 75, 72]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "K_adv=wout/(Tout)^0.5"
		    SID			    "4471"
		    Position		    [160, 51, 280, 79]
		    FontName		    "Arial"
		    Expr		    "u[2]/u[1]^0.5"
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    "Saturation"
		    SID			    "4472"
		    Ports		    [1, 1]
		    Position		    [305, 50, 335, 80]
		    InputPortMap	    "u0"
		    UpperLimit		    "max(htc_k_adv)"
		    LowerLimit		    "min(htc_k_adv)"
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    "Saturation2"
		    SID			    "4473"
		    Ports		    [1, 1]
		    Position		    [105, 50, 135, 80]
		    ShowName		    off
		    InputPortMap	    "u0"
		    UpperLimit		    "inf"
		    LowerLimit		    "eps"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "K_adv"
		    SID			    "4474"
		    Position		    [385, 58, 415, 72]
		    IconDisplay		    "Port number"
		    }
		    Line {
		    SrcBlock		    "Req'd output\ntrq and spd\n(Nm), (rad/s)"
		    SrcPort		    1
		    DstBlock		    "Saturation2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Saturation2"
		    SrcPort		    1
		    DstBlock		    "K_adv=wout/(Tout)^0.5"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "K_adv=wout/(Tout)^0.5"
		    SrcPort		    1
		    DstBlock		    "Saturation"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Saturation"
		    SrcPort		    1
		    DstBlock		    "K_adv"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  SID			  "4475"
		  Ports			  [2, 1]
		  Position		  [685, 36, 715, 69]
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator1"
		  SID			  "4476"
		  Ports			  [1, 1]
		  Position		  [510, 43, 540, 77]
		  Operator		  "NOT"
		  Inputs		  "1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "4477"
		  Position		  [445, 45, 475, 75]
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux1"
		  SID			  "4478"
		  Ports			  [2, 1]
		  Position		  [805, 97, 840, 133]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux2"
		  SID			  "4479"
		  Ports			  [2, 1]
		  Position		  [310, 142, 320, 178]
		  ShowName		  off
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "4480"
		  Ports			  [2, 1]
		  Position		  [615, 12, 645, 43]
		  Operator		  ">"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "SR Look-Up\nTable\nSR=wout/win"
		  SID			  "4481"
		  Position		  [415, 210, 445, 240]
		  InputValues		  "htc_k_adv"
		  Table			  "htc_sr"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation1"
		  SID			  "4482"
		  Ports			  [1, 1]
		  Position		  [85, 160, 115, 190]
		  InputPortMap		  "u0"
		  UpperLimit		  "1"
		  LowerLimit		  "0.7"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation2"
		  SID			  "4483"
		  Ports			  [1, 1]
		  Position		  [1035, 185, 1065, 215]
		  InputPortMap		  "u0"
		  UpperLimit		  "inf"
		  LowerLimit		  "0"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "4484"
		  Position		  [755, 170, 785, 200]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "TR Look-Up\nTable\nTR=Tout/Tin"
		  SID			  "4485"
		  Position		  [415, 125, 445, 155]
		  InputValues		  "htc_k_adv"
		  Table			  "htc_tr"
		}
		Block {
		  BlockType		  Mux
		  Name			  "TR,SR"
		  SID			  "4486"
		  Ports			  [2, 1]
		  Position		  [695, 157, 730, 193]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "gear ratio1"
		  SID			  "4487"
		  Position		  [85, 108, 115, 132]
		  FontName		  "Arial"
		  InputValues		  "[1:length(gb_ratio)]"
		  Table			  "gb_ratio"
		}
		Block {
		  BlockType		  Product
		  Name			  "~eng trq\nand spd"
		  SID			  "4488"
		  Ports			  [2, 1]
		  Position		  [870, 161, 900, 194]
		  Inputs		  "*/"
		}
		Block {
		  BlockType		  Product
		  Name			  "~gb_spd_in_r"
		  SID			  "4489"
		  Ports			  [2, 1]
		  Position		  [170, 265, 200, 300]
		}
		Block {
		  BlockType		  Product
		  Name			  "~gb_trq_in_r"
		  SID			  "4490"
		  Ports			  [3, 1]
		  Position		  [170, 105, 200, 195]
		  Inputs		  "//*"
		}
		Block {
		  BlockType		  Outport
		  Name			  "est eng trq\n(Nm)"
		  SID			  "4491"
		  Position		  [1105, 103, 1135, 117]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Outport
		  Name			  "est eng spd\n(rad/s)"
		  SID			  "4492"
		  Position		  [1100, 193, 1130, 207]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Outport
		  Name			  "gb_spd_in_est\n(rad/s)1"
		  SID			  "4493"
		  Position		  [1100, 238, 1130, 252]
		  ForegroundColor	  "blue"
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "~gb_spd_in_r"
		  SrcPort		  1
		  Points		  [90, 0]
		  Branch {
		    DstBlock		    "Mux2"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [495, 0]
		    Branch {
		    Points		    [295, 0]
		    DstBlock		    "gb_spd_in_est\n(rad/s)1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Mux1"
		    DstPort		    2
		    }
		  }
		}
		Line {
		  SrcBlock		  "~gb_trq_in_r"
		  SrcPort		  1
		  Points		  [85, 0]
		  Branch {
		    Points		    [0, -45; 290, 0]
		    Branch {
		    Points		    [0, -85]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Mux1"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "Mux2"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "SR Look-Up\nTable\nSR=wout/win"
		  SrcPort		  1
		  Points		  [230, 0]
		  DstBlock		  "TR,SR"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "TR Look-Up\nTable\nTR=Tout/Tin"
		  SrcPort		  1
		  Points		  [230, 0]
		  DstBlock		  "TR,SR"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "K_adv"
		  SrcPort		  1
		  Points		  [15, 0; 0, -5]
		  Branch {
		    Points		    [0, 70]
		    DstBlock		    "SR Look-Up\nTable\nSR=wout/win"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -15]
		    DstBlock		    "TR Look-Up\nTable\nTR=Tout/Tin"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Mux2"
		  SrcPort		  1
		  DstBlock		  "K_adv"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "~eng trq\nand spd"
		  SrcPort		  1
		  Points		  [60, 0]
		  DstBlock		  "Demux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux1"
		  SrcPort		  1
		  Points		  [5, 0; 0, 55]
		  DstBlock		  "~eng trq\nand spd"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "From <vc>"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  Points		  [20, 0]
		  DstBlock		  "Switch"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Logical\nOperator1"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  1
		  Points		  [40, 0; 0, -70]
		  DstBlock		  "est eng trq\n(Nm)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear\nnumber"
		  SrcPort		  1
		  DstBlock		  "gear ratio1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  Points		  [20, 0]
		  DstBlock		  "Logical\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant5"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Saturation2"
		  SrcPort		  1
		  DstBlock		  "est eng spd\n(rad/s)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  2
		  DstBlock		  "Saturation2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation1"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "~gb_trq_in_r"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  " prev eta_gb"
		  SrcPort		  1
		  DstBlock		  "Saturation1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  DstBlock		  "~eng trq\nand spd"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "TR,SR"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gear ratio1"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    Points		    [0, 155]
		    DstBlock		    "~gb_spd_in_r"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "~gb_trq_in_r"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "gb_spd_out_r"
		  SrcPort		  1
		  DstBlock		  "~gb_spd_in_r"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "gb_trq_out_r"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "~gb_trq_in_r"
		  DstPort		  3
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "est. engine trq\nand spd assuming\nlockup"
	      SID		      "4494"
	      Ports		      [4, 2]
	      Position		      [115, 489, 145, 521]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"est. engine trq\nand spd assuming\nlockup"
		Location		[77, 439, 778, 723]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "new gear\nnumber"
		  SID			  "4495"
		  Position		  [30, 28, 60, 42]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  " prev eta_gb"
		  SID			  "4496"
		  Position		  [30, 83, 60, 97]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_trq_out_r"
		  SID			  "4497"
		  Position		  [30, 138, 60, 152]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_in_est"
		  SID			  "4498"
		  Position		  [30, 218, 60, 232]
		  Port			  "4"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "4499"
		  Ports			  []
		  Position		  [625, 180, 681, 220]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [231, 257, 689, 321]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "4500"
		    Name		    "Estimate engine torque and speed associated with the current gear, assuming that\nthe gearbox efficie"
		    "ncy is constant."
		    Position		    [227, 12]
		    VerticalAlignment	    "top"
		    }
		  }
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "4501"
		  Position		  [130, 180, 160, 210]
		  X0			  "gb_ratio(1)"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation1"
		  SID			  "4502"
		  Ports			  [1, 1]
		  Position		  [95, 75, 125, 105]
		  InputPortMap		  "u0"
		  UpperLimit		  "1"
		  LowerLimit		  "0.7"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation2"
		  SID			  "4503"
		  Ports			  [1, 1]
		  Position		  [580, 65, 610, 95]
		  InputPortMap		  "u0"
		  UpperLimit		  "inf"
		  LowerLimit		  "0"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "gear ratio1"
		  SID			  "4504"
		  Position		  [95, 23, 125, 47]
		  FontName		  "Arial"
		  InputValues		  "[1:length(gb_ratio)]"
		  Table			  "gb_ratio"
		}
		Block {
		  BlockType		  Product
		  Name			  "~gb_spd_in_r"
		  SID			  "4505"
		  Ports			  [3, 1]
		  Position		  [180, 150, 210, 240]
		  Inputs		  "*/*"
		}
		Block {
		  BlockType		  Product
		  Name			  "~gb_trq_in_r"
		  SID			  "4506"
		  Ports			  [3, 1]
		  Position		  [180, 20, 210, 110]
		  Inputs		  "//*"
		}
		Block {
		  BlockType		  Outport
		  Name			  "est eng trq\n(Nm)"
		  SID			  "4507"
		  Position		  [645, 18, 675, 32]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Outport
		  Name			  "est eng spd\n(rad/s)"
		  SID			  "4508"
		  Position		  [645, 73, 675, 87]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "~gb_spd_in_r"
		  SrcPort		  1
		  Points		  [90, 0; 0, -110; 250, 0; 0, -5]
		  DstBlock		  "Saturation2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "~gb_trq_in_r"
		  SrcPort		  1
		  Points		  [340, 0; 0, -5; 20, 0; 0, -35]
		  DstBlock		  "est eng trq\n(Nm)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gb_spd_in_est"
		  SrcPort		  1
		  DstBlock		  "~gb_spd_in_r"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "~gb_spd_in_r"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Saturation2"
		  SrcPort		  1
		  DstBlock		  "est eng spd\n(rad/s)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "new gear\nnumber"
		  SrcPort		  1
		  DstBlock		  "gear ratio1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gb_trq_out_r"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "~gb_trq_in_r"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "gear ratio1"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    Points		    [0, 130]
		    Branch {
		    Points		    [-35, 0]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "~gb_spd_in_r"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "~gb_trq_in_r"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  " prev eta_gb"
		  SrcPort		  1
		  DstBlock		  "Saturation1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation1"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "~gb_trq_in_r"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio1"
	      SID		      "4509"
	      Position		      [840, 63, 870, 87]
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      Table		      "gb_ratio"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "load=T/\n(maxT\nat spd)"
	      SID		      "4510"
	      Ports		      [1, 1]
	      Position		      [310, 116, 345, 144]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "-1"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "load=T/\n(maxT\nat spd)1"
	      SID		      "4511"
	      Ports		      [1, 1]
	      Position		      [310, 521, 345, 549]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "-1"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "lock-up in\nthis gear"
	      SID		      "4512"
	      Position		      [245, 313, 275, 337]
	      FontName		      "Arial"
	      InputValues	      "[1:length(htc_lockup)]"
	      Table		      "htc_lockup"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "motor\ntorque\ncapability"
	      SID		      "4513"
	      Position		      [215, 190, 245, 210]
	      FontName		      "Arial"
	      InputValues	      "mc_map_spd*mc_spd_scale"
	      Table		      "mc_max_trq*mc_trq_scale*mc_overtrq_factor+eps"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "motor\ntorque\ncapability1"
	      SID		      "4514"
	      Position		      [250, 630, 280, 650]
	      FontName		      "Arial"
	      InputValues	      "mc_map_spd*mc_spd_scale"
	      Table		      "mc_max_trq*mc_trq_scale*mc_overtrq_factor+eps"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev gear\nnumber"
	      SID		      "4515"
	      Position		      [745, 15, 785, 35]
	      BlockMirror	      on
	      FontName		      "Arial"
	      X0		      "gb_num_init"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "shifting1"
	      SID		      "4516"
	      Ports		      [1, 1]
	      Position		      [835, 134, 865, 166]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"shifting1"
		Location		[76, 244, 366, 435]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gear\nnumber"
		  SID			  "4517"
		  Position		  [15, 50, 35, 70]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "4518"
		  Position		  [20, 131, 120, 159]
		  FontName		  "Arial"
		  Value			  "gb_shift_delay-1e-6"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "4519"
		  Ports			  [2, 1]
		  Position		  [185, 53, 215, 77]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "time since last shift"
		  SID			  "4520"
		  Ports			  [1, 1]
		  Position		  [65, 43, 125, 77]
		  ShowName		  off
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('time since\\nlast shift')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "time since last shift"
		    Location		    [47, 595, 337, 734]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "4521"
		    Position		    [10, 60, 30, 80]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "just shifted"
		    SID			    "4522"
		    Ports		    [1, 1]
		    Position		    [60, 57, 110, 83]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('just\\nshifted')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "just shifted"
		    Location		    [48, 850, 371, 995]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "4523"
		    Position		    [55, 55, 75, 75]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "4524"
		    Position		    [120, 55, 155, 75]
		    FontName		    "Arial"
		    X0			    "1"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    SID			    "4525"
		    Ports		    [2, 1]
		    Position		    [190, 58, 220, 82]
		    FontName		    "Arial"
		    Operator		    "~="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "4526"
		    Position		    [250, 60, 270, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, 30; 75, 0; 0, -20]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "timer"
		    SID			    "4527"
		    Ports		    [1, 1]
		    Position		    [140, 55, 175, 85]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('timer')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "timer"
		    Location		    [389, 635, 793, 850]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "trigger"
		    SID			    "4528"
		    Position		    [15, 125, 35, 145]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "4529"
		    Position		    [100, 100, 120, 120]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant1"
		    SID			    "4530"
		    Position		    [100, 150, 120, 170]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant2"
		    SID			    "4531"
		    Position		    [150, 5, 170, 25]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "4532"
		    Position		    [265, 59, 295, 91]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "no-lag\nReset Integrator"
		    SID			    "4533"
		    Ports		    [3, 1]
		    Position		    [155, 96, 205, 174]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskType		    "No-lag Reset Integrator"
		    MaskDescription	    "No-lag Reset Integrator"
		    MaskHelp		    "Integrates first input using Euler technique.\\nAt the time step that input 2 <> zero,\\noutput i"
		    "s reset to input 3."
		    MaskPromptString	    "Initial Value"
		    MaskStyleString	    "edit"
		    MaskVariables	    "initval=@1;"
		    MaskTunableValueString  "on"
		    MaskEnableString	    "on"
		    MaskVisibilityString    "on"
		    MaskToolTipString	    "on"
		    MaskDisplay		    "disp('1/s\\nw/ reset\\nno lag')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "15"
		    System {
		    Name		    "no-lag\nReset Integrator"
		    Location		    [258, 616, 780, 880]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "4534"
		    Position		    [60, 100, 80, 120]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    SID			    "4535"
		    Position		    [60, 140, 80, 160]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_3"
		    SID			    "4536"
		    Position		    [45, 185, 65, 205]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "4537"
		    Position		    [125, 205, 145, 225]
		    BlockRotation	    270
		    NamePlacement	    "alternate"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "4538"
		    Position		    [340, 55, 375, 75]
		    BlockMirror		    on
		    FontName		    "Arial"
		    X0			    "initval"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    SID			    "4539"
		    Ports		    [2, 1]
		    Position		    [160, 96, 180, 114]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    SID			    "4540"
		    Ports		    [2, 1]
		    Position		    [230, 90, 250, 110]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "4541"
		    Position		    [290, 139, 320, 171]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "dt"
		    SID			    "4542"
		    Ports		    [0, 1]
		    Position		    [112, 50, 138, 80]
		    BlockRotation	    270
		    BlockMirror		    on
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "dt"
		    Location		    [80, 285, 429, 424]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "4543"
		    Position		    [65, 60, 85, 80]
		    FontName		    "Arial"
		    FontSize		    8
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "4544"
		    Position		    [125, 85, 160, 105]
		    FontName		    "Arial"
		    FontSize		    8
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    SID			    "4545"
		    Ports		    [2, 1]
		    Position		    [205, 65, 225, 85]
		    FontName		    "Arial"
		    FontSize		    8
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "4546"
		    Position		    [255, 65, 275, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [10, 0; 0, -15]
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "in_2==0"
		    SID			    "4547"
		    Ports		    [2, 1]
		    Position		    [160, 143, 190, 167]
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "4548"
		    Position		    [455, 145, 475, 165]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_3"
		    SrcPort		    1
		    Points		    [200, 0; 0, -30]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "in_2==0"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "dt"
		    SrcPort		    1
		    Points		    [0, 15]
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    Points		    [-130, 0; 0, 30]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    Points		    [10, 0; 0, 45]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    Points		    [85, 0]
		    Branch {
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -90]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "in_2==0"
		    SrcPort		    1
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    Points		    [0, -40]
		    DstBlock		    "in_2==0"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "time"
		    SID			    "4549"
		    Position		    [350, 65, 370, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    DstBlock		    "time"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "trigger"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, -60]
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Constant2"
		    SrcPort		    1
		    Points		    [35, 0; 0, 50]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant1"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "no-lag\nReset Integrator"
		    SrcPort		    1
		    Points		    [35, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "4550"
		    Position		    [225, 60, 245, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "just shifted"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "just shifted"
		    SrcPort		    1
		    DstBlock		    "timer"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "timer"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "4551"
		  Position		  [250, 55, 270, 75]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gear\nnumber"
		  SrcPort		  1
		  DstBlock		  "time since last shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [15, 0; 0, -75]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "time since last shift"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "torque\nsummation"
	      SID		      "4552"
	      Ports		      [2, 1]
	      Position		      [240, 132, 260, 168]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "torque\nsummation1"
	      SID		      "4553"
	      Ports		      [2, 1]
	      Position		      [265, 567, 285, 603]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "upshift\n command"
	      SID		      "4554"
	      Ports		      [3, 1]
	      Position		      [475, 94, 505, 146]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"upshift\n command"
		Location		[433, 169, 908, 464]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "4555"
		  Position		  [45, 103, 75, 117]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "4556"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "4557"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "4558"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "4559"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "4560"
		  Ports			  [1, 1]
		  Position		  [245, 100, 275, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_upshift_spd|gb_upshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [1031, 545, 1271, 627]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "4561"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "4562"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "4563"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "4564"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [50, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear number, out"
	      SID		      "4565"
	      Position		      [810, 860, 830, 880]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear ratio, out"
	      SID		      "4566"
	      Position		      [810, 700, 830, 720]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "shifting, out"
	      SID		      "4567"
	      Position		      [810, 745, 830, 765]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "locked up"
	      SID		      "4568"
	      Position		      [730, 415, 750, 435]
	      FontName		      "Arial"
	      Port		      "4"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "downshift \ncommand1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "load=T/\n(maxT\nat spd)1"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [10, 0; 0, -85]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "downshift \ncommand1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      DstBlock		      "locked up"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      DstBlock		      "Product3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "upshift\n command"
	      SrcPort		      1
	      Points		      [120, 0]
	      Branch {
		DstBlock		"delta\ngear\nnumber"
		DstPort			1
	      }
	      Branch {
		Points			[0, 10]
		DstBlock		"delta\ngear\nnumber"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		DstBlock		"upshift\n command"
		DstPort			2
	      }
	      Branch {
		Points			[0, 100]
		DstBlock		"downshift \ncommand"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator2"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"Memory"
		DstPort			1
	      }
	      Branch {
		Points			[0, -95]
		DstBlock		"Logical\nOperator"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "est. engine trq\nand spd assuming\nlockup"
	      SrcPort		      2
	      Points		      [35, 0; 0, 25]
	      Branch {
		DstBlock		"engine\ntorque\ncapability1"
		DstPort			1
	      }
	      Branch {
		Points			[0, 75]
		Branch {
		  Points		  [0, 50; 265, 0; 0, -125]
		  DstBlock		  "downshift \ncommand1"
		  DstPort		  3
		}
		Branch {
		  Points		  [15, 0]
		  DstBlock		  "Gain4"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "est. engine trq\nand\nspd"
	      SrcPort		      3
	      Points		      [0, 115; -55, 0; 0, 295]
	      DstBlock		      "est. engine trq\nand spd assuming\nlockup"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "tires are at\ntraction limit"
	      SrcPort		      1
	      Points		      [290, 0]
	      Branch {
		Points			[0, -120]
		DstBlock		"Switch"
		DstPort			2
	      }
	      Branch {
		Points			[0, 285]
		DstBlock		"Switch1"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "gb_trq_out_r"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		Points			[0, 365]
		DstBlock		"est. engine trq\nand spd assuming\nlockup"
		DstPort			3
	      }
	      Branch {
		Points			[0, -40]
		DstBlock		"est. engine trq\nand\nspd"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "eta_gb"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, 405]
		DstBlock		"est. engine trq\nand spd assuming\nlockup"
		DstPort			2
	      }
	      Branch {
		DstBlock		"est. engine trq\nand\nspd"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "est. engine trq\nand spd assuming\nlockup"
	      SrcPort		      1
	      Points		      [95, 0]
	      DstBlock		      "Product4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product4"
	      SrcPort		      1
	      DstBlock		      "load=T/\n(maxT\nat spd)1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [0, -10]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "downshift \ncommand"
	      SrcPort		      1
	      DstBlock		      "Gain1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "load=T/\n(maxT\nat spd)"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "est. engine trq\nand\nspd"
	      SrcPort		      1
	      DstBlock		      "Product2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "current\ngear\nnumber"
	      SrcPort		      1
	      DstBlock		      "Saturation1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      Points		      [10, 0; 0, -75]
	      DstBlock		      "delta\ngear\nnumber"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "allow downshift?"
	      SrcPort		      1
	      Points		      [55, 0; 0, 160]
	      DstBlock		      "Product3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "delta\ngear\nnumber"
	      SrcPort		      1
	      Points		      [15, 0; 0, -45]
	      DstBlock		      "current\ngear\nnumber"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      Points		      [10, 0; 0, 30]
	      DstBlock		      "load=T/\n(maxT\nat spd)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, 0]
		Branch {
		  DstBlock		  "gear ratio1"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, -50]
		  DstBlock		  "prev gear\nnumber"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[0, 75]
		Branch {
		  DstBlock		  "shifting1"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 55]
		  DstBlock		  "Goto3"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "prev gear\nnumber"
	      SrcPort		      1
	      Points		      [-165, 0]
	      Branch {
		Points			[-125, 0]
		Branch {
		  Points		  [-355, 0; 0, 60]
		  DstBlock		  "est. engine trq\nand\nspd"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 25]
		  Branch {
		    DstBlock		    "allow downshift?"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 55]
		    Branch {
		    Points		    [0, 100]
		    Branch {
		    Points		    [0, 305]
		    DstBlock		    "downshift \ncommand1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "downshift \ncommand"
		    DstPort		    1
		    }
		    }
		    Branch {
		    DstBlock		    "upshift\n command"
		    DstPort		    1
		    }
		  }
		}
	      }
	      Branch {
		Points			[0, 40]
		DstBlock		"current\ngear\nnumber"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "gb_spd_out_r"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "est. engine trq\nand\nspd"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "est. engine trq\nand\nspd"
	      SrcPort		      2
	      Points		      [15, 0; 0, 35]
	      Branch {
		DstBlock		"engine\ntorque\ncapability"
		DstPort			1
	      }
	      Branch {
		Points			[0, 65]
		Branch {
		  Points		  [0, 35; 260, 0; 0, -35]
		  Branch {
		    Points		    [0, -65]
		    DstBlock		    "upshift\n command"
		    DstPort		    3
		  }
		  Branch {
		    Points		    [0, 35]
		    DstBlock		    "downshift \ncommand"
		    DstPort		    3
		  }
		}
		Branch {
		  DstBlock		  "Gain2"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "engine\ntorque\ncapability"
	      SrcPort		      1
	      Points		      [0, 5]
	      DstBlock		      "torque\nsummation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "torque\nsummation"
	      SrcPort		      1
	      Points		      [0, -25; -40, 0]
	      DstBlock		      "Product2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "engine\ntorque\ncapability1"
	      SrcPort		      1
	      Points		      [5, 0; 0, 35]
	      DstBlock		      "torque\nsummation1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "torque\nsummation1"
	      SrcPort		      1
	      Points		      [0, -20; -45, 0]
	      DstBlock		      "Product4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Gain2"
	      SrcPort		      1
	      DstBlock		      "motor\ntorque\ncapability"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "motor\ntorque\ncapability"
	      SrcPort		      1
	      DstBlock		      "Gain3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain3"
	      SrcPort		      1
	      Points		      [0, -20; -60, 0]
	      DstBlock		      "torque\nsummation"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Gain4"
	      SrcPort		      1
	      DstBlock		      "motor\ntorque\ncapability1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "motor\ntorque\ncapability1"
	      SrcPort		      1
	      DstBlock		      "Gain5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain5"
	      SrcPort		      1
	      Points		      [0, -25; -75, 0; 0, -20]
	      DstBlock		      "torque\nsummation1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant15"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From4"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Switch3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Switch3"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From2"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From3"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch3"
	      SrcPort		      1
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant14"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From <logic>2"
	      SrcPort		      1
	      DstBlock		      "Speed Dependent Shifting"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      1
	      DstBlock		      "Goto"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      2
	      DstBlock		      "Goto1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      Points		      [5, 0; 0, 0]
	      Branch {
		Points			[40, 0]
		DstBlock		"shifting, out"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Goto2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Switch2"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"gear number, out"
		DstPort			1
	      }
	      Branch {
		Points			[0, 60]
		DstBlock		"Goto7"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "gear ratio, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gear ratio1"
	      SrcPort		      1
	      DstBlock		      "Goto4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "shifting1"
	      SrcPort		      1
	      DstBlock		      "Goto5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [15, 0; 0, 75]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "lock-up in\nthis gear"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From6"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From5"
	      SrcPort		      1
	      Points		      [0, 55]
	      Branch {
		DstBlock		"lock-up in\nthis gear"
		DstPort			1
	      }
	      Branch {
		Points			[-100, 0]
		DstBlock		"est. engine trq\nand spd assuming\nlockup"
		DstPort			1
	      }
	    }
	    Annotation {
	      SID		      "4569"
	      Name		      "gear ratio and shifting pre-muxed"
	      Position		      [559, 677]
	    }
	    Annotation {
	      SID		      "4570"
	      Name		      "output changes depending\nupon whether speed\ndependent shifting is used"
	      Position		      [920, 840]
	    }
	    Annotation {
	      SID		      "4571"
	      Name		      "default gear number\ncalculation"
	      Position		      [884, 269]
	    }
	    Annotation {
	      SID		      "4572"
	      Name		      "default gear ratio\ncalculation"
	      Position		      [947, 104]
	    }
	    Annotation {
	      SID		      "4573"
	      Name		      "local GOTO blocks:"
	      Position		      [947, 12]
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "motor controller\nlogic"
	  SID			  "4574"
	  Ports			  [4, 1]
	  Position		  [715, 25, 745, 145]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "motor controller\nlogic"
	    Location		    [91, 74, 773, 525]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "bus voltage"
	      SID		      "4575"
	      Position		      [40, 30, 60, 50]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd input\npower (W)"
	      SID		      "4576"
	      Position		      [40, 160, 60, 180]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd output\nspd (rad/s)"
	      SID		      "4577"
	      Position		      [40, 280, 60, 300]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "4578"
	      Position		      [40, 385, 60, 405]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs"
	      SID		      "4579"
	      Position		      [205, 123, 235, 147]
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs1"
	      SID		      "4580"
	      Position		      [105, 278, 135, 302]
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "4581"
	      Ports		      []
	      Position		      [590, 385, 646, 425]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[263, 139, 778, 219]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "4582"
		  Name			  "This block models a motor/controller's logic, modulating the power input requirement as follows:\n- enfo"
		  "rcing the maximum current limit of the motor/controller\n- shutting the motor off if the average speed over the ti"
		  "me step ==0\n- shutting the motor off if the transmission is shifting."
		  Position		  [257, 40]
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "4583"
	      Position		      [95, 79, 165, 101]
	      FontName		      "Arial"
	      Value		      "mc_max_crrnt"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "4584"
	      Position		      [140, 348, 175, 372]
	      FontName		      "Arial"
	      Value		      "0.001"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "4585"
	      Position		      [500, 232, 520, 258]
	      BlockMirror	      on
	      FontName		      "Arial"
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <sdo>"
	      SID		      "4586"
	      Position		      [555, 24, 645, 46]
	      GotoTag		      "mc_crrnt_limited"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "4587"
	      Ports		      [1, 1]
	      Position		      [434, 240, 466, 275]
	      BlockRotation	      270
	      NamePlacement	      "alternate"
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "4588"
	      Position		      [115, 25, 145, 55]
	      X0		      "ess_module_num*mean(ess_voc(1,:))"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      SID		      "4589"
	      Ports		      [2, 1]
	      Position		      [270, 37, 300, 68]
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      SID		      "4590"
	      Ports		      [2, 1]
	      Position		      [210, 36, 230, 54]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "4591"
	      Ports		      [2, 1]
	      Position		      [230, 282, 260, 313]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "4592"
	      Ports		      [2, 1]
	      Position		      [490, 17, 520, 48]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Sign"
	      SID		      "4593"
	      Ports		      [1, 1]
	      Position		      [270, 157, 300, 183]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Sign"
	      MaskDescription	      "y = sign(x)"
	      MaskHelp		      "Sign Function:\\n\\t\\t\\ty = 1 if x > 0\\n\\t\\t\\ty = 0 if x = 0\\n\\t\\t\\ty = -1 if x < 0"
	      MaskDisplay	      "plot(-50,-50,50,50,[-50,50],[0,0],[0,0],[-50,50],[-40,0],[-30,-30],[0,40],[30,30])"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Sign"
		Location		[159, 417, 467, 586]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "4594"
		  Position		  [35, 30, 55, 50]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "4595"
		  Position		  [65, 105, 85, 125]
		  Value			  "0"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "4596"
		  Ports			  [2, 1]
		  Position		  [140, 32, 170, 63]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "4597"
		  Ports			  [2, 1]
		  Position		  [140, 92, 170, 123]
		  Operator		  "<"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "4598"
		  Ports			  [2, 1]
		  Position		  [215, 64, 235, 91]
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "4599"
		  Position		  [265, 70, 285, 90]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 60]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, -60]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  Points		  [10, 0; 0, -25]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  Points		  [10, 0; 0, 20]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "4600"
	      Position		      [495, 180, 525, 210]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "current-limited\npower"
	      SID		      "4601"
	      Ports		      [2, 1]
	      Position		      [365, 51, 385, 69]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "true if motor\nshould be\nshut down"
	      SID		      "4602"
	      Ports		      [2, 1]
	      Position		      [385, 292, 415, 323]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd input\npower (W)1"
	      SID		      "4603"
	      Position		      [590, 185, 610, 205]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Abs1"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "req'd output\nspd (rad/s)"
	      SrcPort		      1
	      DstBlock		      "Abs1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [10, 0; 0, -55]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "true if motor\nshould be\nshut down"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Goto <sdo>"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		Points			[0, -15]
		DstBlock		"Relational\nOperator2"
		DstPort			2
	      }
	      Branch {
		DstBlock		"current-limited\npower"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, -20]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"MinMax"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "current-limited\npower"
	      SrcPort		      1
	      Points		      [60, 0; 0, 125]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "req'd input\npower (W)1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Sign"
	      SrcPort		      1
	      Points		      [20, 0; 0, -105]
	      DstBlock		      "current-limited\npower"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Abs"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "req'd input\npower (W)"
	      SrcPort		      1
	      Points		      [105, 0]
	      Branch {
		DstBlock		"Sign"
		DstPort			1
	      }
	      Branch {
		Points			[0, -35]
		DstBlock		"Abs"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [20, 0; 0, -40]
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "bus voltage"
	      SrcPort		      1
	      DstBlock		      "Memory"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "true if motor\nshould be\nshut down"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [0, -40]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      Points		      [290, 0; 0, -80]
	      DstBlock		      "true if motor\nshould be\nshut down"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "sim stop\nsubsystem"
	  SID			  "4604"
	  Ports			  []
	  Position		  [30, 15, 60, 65]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/sim stop\nsubsystem"
	  SourceType		  "SubSystem"
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  1
	  Points		  [0, 5; 5, 0]
	  Branch {
	    DstBlock		    "braking strategy"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [195, 0]
	    Branch {
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Branch {
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>5"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <veh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  3
	  Points		  [0, 15]
	  DstBlock		  "Goto <wh>2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  1
	  DstBlock		  "engine on\n(parallel hybrid)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <ess>"
	  SrcPort		  1
	  Points		  [0, 5]
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <mc>"
	  SrcPort		  1
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <mc>1"
	  SrcPort		  1
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "motor controller\nlogic"
	  SrcPort		  1
	  DstBlock		  "Goto <mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <mc>2"
	  SrcPort		  1
	  Points		  [0, -5]
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "Constant"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "engine on\n(parallel hybrid)"
	  SrcPort		  3
	  DstBlock		  "Goto <fc><mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <fc>"
	  SrcPort		  1
	  Points		  [0, -5]
	  DstBlock		  "engine on\n(parallel hybrid)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "engine on\n(parallel hybrid)"
	  SrcPort		  2
	  DstBlock		  "Goto <fc>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "engine on\n(parallel hybrid)"
	  SrcPort		  1
	  DstBlock		  "Goto <fc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  2
	  DstBlock		  "engine on\n(parallel hybrid)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <wh>4"
	  SrcPort		  1
	  Points		  [0, -20]
	  DstBlock		  "engine on\n(parallel hybrid)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <gb>6"
	  SrcPort		  1
	  DstBlock		  "Demux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>6"
	  SrcPort		  1
	  Points		  [0, -20; 25, 0; 0, -15]
	  DstBlock		  "engine on\n(parallel hybrid)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "From <gb>3"
	  SrcPort		  1
	  DstBlock		  "gearbox control\nfor use w/ AT \nin parallel sa"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <gb>1"
	  SrcPort		  1
	  Points		  [45, 0]
	  DstBlock		  "gearbox control\nfor use w/ AT \nin parallel sa"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From<gb>"
	  SrcPort		  1
	  DstBlock		  "gearbox control\nfor use w/ AT \nin parallel sa"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <gb>2"
	  SrcPort		  1
	  Points		  [40, 0]
	  DstBlock		  "gearbox control\nfor use w/ AT \nin parallel sa"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>1"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>8"
	  SrcPort		  1
	  DstBlock		  "braking strategy"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  2
	  Points		  [130, 0]
	  Branch {
	    DstBlock		    "Sum"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -55]
	    DstBlock		    "Goto <wh>8"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Relational\nOperator"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>9"
	  SrcPort		  1
	  DstBlock		  "Relational\nOperator"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>2"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <wh>3"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From<wh>4"
	  SrcPort		  1
	  Points		  [10, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <wh>5"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>7"
	  SrcPort		  1
	  Points		  [45, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox control\nfor use w/ AT \nin parallel sa"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "Goto <htc>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox control\nfor use w/ AT \nin parallel sa"
	  SrcPort		  2
	  DstBlock		  "Goto <gb>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox control\nfor use w/ AT \nin parallel sa"
	  SrcPort		  3
	  DstBlock		  "Goto <gb>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox control\nfor use w/ AT \nin parallel sa"
	  SrcPort		  4
	  Points		  [20, 0]
	  DstBlock		  "Goto <htc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  4
	  Points		  [10, 0]
	  DstBlock		  "Goto <wh>6"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  5
	  Points		  [5, 0]
	  DstBlock		  "Goto <wh>7"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Ground"
	  SrcPort		  1
	  Points		  [25, 0; 0, -30]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  6
	}
	Annotation {
	  SID			  "4605"
	  Name			  "force\nrequired (N)"
	  Position		  [217, 318]
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "<vc> par balanced"
      SID		      "311"
      Ports		      [0, 1]
      Position		      [475, 223, 540, 277]
      BackgroundColor	      "yellow"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_vc.jpg'))\n"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"<vc> par balanced"
	Location		[10, 112, 950, 1190]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"96"
	Block {
	  BlockType		  From
	  Name			  "From <ess>"
	  SID			  "4606"
	  Position		  [545, 35, 640, 55]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "bus_voltage"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>"
	  SID			  "4607"
	  Position		  [540, 497, 635, 513]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_spd_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>1"
	  SID			  "4608"
	  Position		  [545, 557, 640, 573]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "clutch_state"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>1"
	  SID			  "4609"
	  Position		  [170, 71, 260, 89]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>2"
	  SID			  "4610"
	  Position		  [170, 96, 265, 114]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "eta_gb"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>3"
	  SID			  "4611"
	  Position		  [165, 130, 260, 150]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "slip_limited"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>4"
	  SID			  "4612"
	  Position		  [525, 261, 620, 279]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>5"
	  SID			  "4613"
	  Position		  [540, 472, 635, 488]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>6"
	  SID			  "4614"
	  Position		  [525, 297, 620, 313]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>7"
	  SID			  "4615"
	  Position		  [540, 426, 635, 444]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>8"
	  SID			  "4616"
	  Position		  [530, 332, 625, 348]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "engine_on"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>"
	  SID			  "4617"
	  Position		  [545, 70, 640, 90]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "P_mc_in_1lim"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>1"
	  SID			  "4618"
	  Position		  [545, 99, 635, 121]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_mc_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>2"
	  SID			  "4619"
	  Position		  [530, 237, 605, 253]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>3"
	  SID			  "4620"
	  Position		  [545, 137, 620, 153]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <veh>"
	  SID			  "4621"
	  Position		  [30, 307, 105, 323]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_prev"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>"
	  SID			  "4622"
	  Position		  [25, 340, 85, 360]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>1"
	  SID			  "4623"
	  Position		  [20, 271, 105, 289]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>2"
	  SID			  "4624"
	  Position		  [120, 487, 230, 503]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_drivetrain_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>3"
	  SID			  "4625"
	  Position		  [125, 521, 225, 539]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_wheel_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>4"
	  SID			  "4626"
	  Position		  [70, 201, 155, 219]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>5"
	  SID			  "4627"
	  Position		  [105, 576, 225, 594]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_rear_brake"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>6"
	  SID			  "4628"
	  Position		  [545, 536, 630, 554]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>7"
	  SID			  "4629"
	  Position		  [125, 450, 185, 470]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>8"
	  SID			  "4630"
	  Position		  [295, 300, 355, 320]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From<gb>"
	  SID			  "4631"
	  Position		  [170, 36, 260, 54]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From<wh>4"
	  SID			  "4632"
	  Position		  [120, 546, 235, 564]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_front_brake"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto"
	  SID			  "4633"
	  Position		  [345, 52, 420, 78]
	  GotoTag		  "gear_number"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>"
	  SID			  "4634"
	  Position		  [760, 460, 825, 480]
	  NamePlacement		  "alternate"
	  GotoTag		  "engine_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>1"
	  SID			  "4635"
	  Position		  [755, 495, 835, 515]
	  GotoTag		  "spd_command"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc><mc>"
	  SID			  "4636"
	  Position		  [760, 531, 810, 549]
	  GotoTag		  "key_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>"
	  SID			  "4637"
	  Position		  [335, 90, 425, 110]
	  GotoTag		  "gear_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>1"
	  SID			  "4638"
	  Position		  [345, 126, 425, 144]
	  GotoTag		  "shifting"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <mc>"
	  SID			  "4639"
	  Position		  [725, 85, 815, 105]
	  GotoTag		  "P_mc_in_r"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>"
	  SID			  "4640"
	  Position		  [745, 236, 815, 254]
	  NamePlacement		  "alternate"
	  GotoTag		  "clutch_state"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>1"
	  SID			  "4641"
	  Position		  [425, 296, 510, 314]
	  GotoTag		  "slip_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>"
	  SID			  "4642"
	  Position		  [425, 235, 510, 255]
	  NamePlacement		  "alternate"
	  GotoTag		  "F_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>1"
	  SID			  "4643"
	  Position		  [190, 289, 280, 311]
	  GotoTag		  "v_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>2"
	  SID			  "4644"
	  Position		  [210, 321, 300, 339]
	  GotoTag		  "wt_front_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>3"
	  SID			  "4645"
	  Position		  [320, 491, 405, 509]
	  GotoTag		  "F_front_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>4"
	  SID			  "4646"
	  Position		  [320, 554, 405, 576]
	  GotoTag		  "F_rear_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>5"
	  SID			  "4647"
	  Position		  [230, 195, 340, 215]
	  GotoTag		  "F_front_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>6"
	  SID			  "4648"
	  Position		  [185, 356, 275, 374]
	  GotoTag		  "wt_rear_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>7"
	  SID			  "4649"
	  Position		  [180, 386, 270, 404]
	  GotoTag		  "front_traction_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>8"
	  SID			  "4650"
	  Position		  [405, 180, 515, 200]
	  GotoTag		  "F_rear_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Ground
	  Name			  "Ground"
	  SID			  "4651"
	  Position		  [200, 620, 220, 640]
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator"
	  SID			  "4652"
	  Ports			  [2, 1]
	  Position		  [375, 287, 405, 318]
	  Operator		  "~="
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  SID			  "4653"
	  Ports			  [2, 1]
	  Position		  [375, 227, 405, 258]
	  Inputs		  "-+"
	}
	Block {
	  BlockType		  Reference
	  Name			  "braking strategy"
	  SID			  "4654"
	  Ports			  [2, 2]
	  Position		  [185, 197, 215, 248]
	  NamePlacement		  "alternate"
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/braking strategy"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "config traction control"
	  SID			  "4655"
	  Ports			  [3, 5]
	  Position		  [125, 264, 160, 366]
	  BackgroundColor	  "darkGreen"
	  AttributesFormatString  "%<BlockChoice>"
	  ShowPortLabels	  "none"
	  BlockChoice		  "traction control 2 axle"
	  TemplateBlock		  "lib_controls/SubSystem/config traction control"
	  MemberBlocks		  "traction control 2 axle,traction control J2452 2 axle"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "config traction control"
	    Location		    [148, 182, 646, 482]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    SIDHighWatermark	    "6898"
	    Block {
	      BlockType		      Inport
	      Name		      "time-average\nvehicle speed\n req'd (m/s)"
	      SID		      "4655::706"
	      Position		      [20, 40, 40, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SID		      "4655::707"
	      Position		      [20, 80, 40, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "total tractive\nforce req'd\n(N)"
	      SID		      "4655::708"
	      Position		      [20, 120, 40, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "traction control\n2 axle"
	      SID		      "4655::709"
	      Ports		      [3, 5]
	      Position		      [100, 40, 140, 80]
	      BackgroundColor	      "darkGreen"
	      LibraryVersion	      "1.479"
	      SourceBlock	      "lib_controls/SubSystem/traction control 2 axle"
	      SourceType	      "SubSystem"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd force\n(N)"
	      SID		      "4655::710"
	      Position		      [200, 40, 220, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd speed\n(m/s)"
	      SID		      "4655::711"
	      Position		      [200, 80, 220, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nfront axle\n(N)"
	      SID		      "4655::712"
	      Position		      [200, 120, 220, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nrear axle\n(N)"
	      SID		      "4655::713"
	      Position		      [200, 160, 220, 180]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "front/total \ntraction ratio"
	      SID		      "4655::714"
	      Position		      [200, 200, 220, 220]
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "time-average\nvehicle speed\n req'd (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "total tractive\nforce req'd\n(N)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      1
	      DstBlock		      "req'd force\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      2
	      DstBlock		      "req'd speed\n(m/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      3
	      DstBlock		      "weight on\nfront axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      4
	      DstBlock		      "weight on\nrear axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      5
	      DstBlock		      "front/total \ntraction ratio"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "engine on\n(balanced parallel hybrid)"
	  SID			  "4656"
	  Ports			  [5, 3]
	  Position		  [675, 449, 710, 561]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "engine on\n(balanced parallel hybrid)"
	    Location		    [10, 112, 950, 1173]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "trq req'd\nout of clutch\n(N*m)"
	      SID		      "4657"
	      Position		      [35, 13, 65, 27]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "spd req'd\nout of clutch\n(N*m)1"
	      SID		      "4658"
	      Position		      [30, 103, 60, 117]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "fc_spd_out_r"
	      SID		      "4659"
	      Position		      [475, 588, 505, 602]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "v_ave_req"
	      SID		      "4660"
	      Position		      [210, 558, 240, 572]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "clutch\nstate"
	      SID		      "4661"
	      Position		      [165, 503, 195, 517]
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)"
	      SID		      "4662"
	      Position		      [165, 256, 225, 274]
	      ShowName		      off
	      Value		      "cs_lo_soc"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)1"
	      SID		      "4663"
	      Position		      [115, 391, 190, 409]
	      Value		      "cs_lo_trq_frac"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)2"
	      SID		      "4664"
	      Position		      [835, 15, 875, 35]
	      Value		      "fc_on"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)3"
	      SID		      "4665"
	      Position		      [635, 247, 685, 263]
	      Value		      "fc_tstat"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)4"
	      SID		      "4666"
	      Position		      [165, 295, 295, 315]
	      ShowName		      off
	      Value		      "0.5*(cs_lo_soc+cs_hi_soc)"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)5"
	      SID		      "4667"
	      Position		      [415, 286, 475, 304]
	      ShowName		      off
	      Value		      "cs_hi_soc"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES1"
	      SID		      "4668"
	      Ports		      []
	      Position		      [970, 60, 1026, 100]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES1"
		Location		[293, 235, 742, 405]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "4669"
		  Name			  "Engine is on if,\n1) engine was on previously and engine is not warm\n2) engine was on and is shifting\n"
		  "3) battery power is insufficient\n4) (speed is less than electric launch speed OR soc is less than \nlo soc unless"
		  " charge depleting) AND\nsoc is less than hi soc AND\ntrq frac is greater than lo trq frac OR soc is less than mean"
		  " of hi and \nlo soc unless charge depleting AND\n(trq is too high AND speed is too high for idle) OR engine is all"
		  "owed to idle\n"
		  Position		  [212, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "4670"
	      Position		      [110, 27, 145, 43]
	      ShowName		      off
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "4671"
	      Position		      [350, 82, 420, 98]
	      ShowName		      off
	      Value		      "vc_idle_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant10"
	      SID		      "4672"
	      Position		      [170, 222, 300, 238]
	      ShowName		      off
	      Value		      "cs_charge_deplete_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant11"
	      SID		      "4673"
	      Position		      [105, 66, 220, 84]
	      ShowName		      off
	      Value		      "cs_electric_decel_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "4674"
	      Position		      [140, 117, 210, 133]
	      ShowName		      off
	      Value		      "vc_idle_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "4675"
	      Position		      [460, 544, 540, 566]
	      ShowName		      off
	      Value		      "vc_launch_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "4676"
	      Position		      [220, 515, 240, 535]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "4677"
	      Position		      [265, 570, 285, 590]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "4678"
	      Position		      [145, 610, 165, 630]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant7"
	      SID		      "4679"
	      Position		      [705, 585, 725, 605]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant8"
	      SID		      "4680"
	      Position		      [205, 409, 235, 431]
	      Value		      "eps"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant9"
	      SID		      "4681"
	      Position		      [755, 375, 775, 395]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <ess>"
	      SID		      "4682"
	      Position		      [105, 239, 150, 261]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>1"
	      SID		      "4683"
	      Position		      [105, 143, 190, 167]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "v_req_limited"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>2"
	      SID		      "4684"
	      Position		      [725, 178, 795, 192]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "shifting"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>3"
	      SID		      "4685"
	      Position		      [440, 490, 525, 510]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_max_pwr"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>4"
	      SID		      "4686"
	      Position		      [630, 211, 700, 229]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "fc_clt_tmp"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      SID		      "4687"
	      Position		      [700, 243, 730, 267]
	      Gain		      "vc_fc_warm_tmp_frac"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      SID		      "4688"
	      Position		      [510, 395, 540, 425]
	      Gain		      "tc_mc_to_fc_ratio"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator10"
	      SID		      "4689"
	      Ports		      [3, 1]
	      Position		      [400, 546, 430, 604]
	      ShowName		      off
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator11"
	      SID		      "4690"
	      Ports		      [1, 1]
	      Position		      [345, 220, 375, 240]
	      ShowName		      off
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator12"
	      SID		      "4691"
	      Ports		      [3, 1]
	      Position		      [950, 164, 980, 196]
	      ShowName		      off
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator13"
	      SID		      "4692"
	      Ports		      [2, 1]
	      Position		      [810, 223, 840, 252]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator2"
	      SID		      "4693"
	      Ports		      [2, 1]
	      Position		      [445, 31, 465, 64]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator3"
	      SID		      "4694"
	      Ports		      [2, 1]
	      Position		      [380, 21, 410, 54]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator4"
	      SID		      "4695"
	      Ports		      [2, 1]
	      Position		      [295, 21, 315, 54]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator5"
	      SID		      "4696"
	      Ports		      [4, 1]
	      Position		      [590, 103, 620, 242]
	      ShowName		      off
	      Inputs		      "4"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator6"
	      SID		      "4697"
	      Ports		      [3, 1]
	      Position		      [375, 382, 395, 418]
	      ShowName		      off
	      Operator		      "OR"
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator7"
	      SID		      "4698"
	      Ports		      [2, 1]
	      Position		      [820, 178, 850, 207]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator8"
	      SID		      "4699"
	      Ports		      [5, 1]
	      Position		      [885, 169, 915, 231]
	      ShowName		      off
	      Operator		      "OR"
	      Inputs		      "5"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator9"
	      SID		      "4700"
	      Ports		      [2, 1]
	      Position		      [500, 155, 525, 190]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "Look-Up Table"
	      SID		      "4701"
	      Position		      [205, 170, 235, 200]
	      InputValues	      "[cs_lo_soc cs_hi_soc cs_hi_soc+eps]"
	      Table		      "[cs_electric_launch_spd_lo cs_electric_launch_spd_hi cs_electric_launch_spd_hi]"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Manual \nSwitch"
	      SID		      "4702"
	      Ports		      [2, 1]
	      Position		      [815, 402, 845, 438]
	      LibraryVersion	      "1.260"
	      SourceBlock	      "simulink/Signal\nRouting/Manual Switch"
	      SourceType	      "Manual Switch"
	      sw		      "1"
	      action		      "0"
	      varsize		      off
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "4703"
	      Position		      [815, 265, 845, 295]
	      BlockMirror	      on
	      X0		      "cyc_mph(1,2)>0"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      SID		      "4704"
	      Ports		      [2, 1]
	      Position		      [215, 357, 245, 388]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      SID		      "4705"
	      Ports		      [2, 1]
	      Position		      [445, 442, 475, 473]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      SID		      "4706"
	      Ports		      [2, 1]
	      Position		      [630, 402, 660, 433]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "4707"
	      Ports		      [2, 1]
	      Position		      [275, 148, 300, 177]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "4708"
	      Ports		      [2, 1]
	      Position		      [265, 324, 290, 351]
	      ShowName		      off
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "4709"
	      Ports		      [2, 1]
	      Position		      [255, 242, 285, 273]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      SID		      "4710"
	      Ports		      [2, 1]
	      Position		      [260, 394, 285, 421]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator4"
	      SID		      "4711"
	      Ports		      [2, 1]
	      Position		      [630, 454, 655, 481]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator5"
	      SID		      "4712"
	      Ports		      [2, 1]
	      Position		      [750, 214, 775, 241]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator6"
	      SID		      "4713"
	      Ports		      [2, 1]
	      Position		      [315, 282, 345, 313]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator7"
	      SID		      "4714"
	      Ports		      [2, 1]
	      Position		      [525, 272, 555, 303]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator8"
	      SID		      "4715"
	      Ports		      [2, 1]
	      Position		      [755, 414, 780, 441]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "4716"
	      Ports		      [1, 1]
	      Position		      [655, 560, 685, 590]
	      InputPortMap	      "u0"
	      UpperLimit	      "max(fc_map_spd)*fc_spd_scale"
	      LowerLimit	      "vc_idle_spd*vc_idle_bool"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Subsystem"
	      SID		      "4717"
	      Ports		      [1, 1]
	      Position		      [540, 442, 585, 478]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Running Average"
	      MaskDescription	      "Running Average"
	      MaskHelp		      "Output is the average of the last (Averaging Time) seconds of input."
	      MaskPromptString	      "Averaging Time Steps (#)"
	      MaskStyleString	      "edit"
	      MaskVariables	      "n=@1;"
	      MaskTunableValueString  "on"
	      MaskEnableString	      "on"
	      MaskVisibilityString    "on"
	      MaskToolTipString	      "on"
	      MaskDisplay	      "disp('Running\\nAverage')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "3"
	      System {
		Name			"Subsystem"
		Location		[137, 366, 771, 685]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "4718"
		  Position		  [50, 110, 70, 130]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "4719"
		  Position		  [75, 210, 95, 230]
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "4720"
		  Position		  [75, 274, 115, 296]
		  FontName		  "Arial"
		  Value			  "n"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "4721"
		  Position		  [380, 224, 420, 246]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  From
		  Name			  "From <vc>2"
		  SID			  "4722"
		  Position		  [120, 88, 190, 102]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "shifting"
		}
		Block {
		  BlockType		  Integrator
		  Name			  "Integrator"
		  SID			  "4723"
		  Ports			  [1, 1]
		  Position		  [295, 100, 315, 120]
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "4724"
		  Position		  [135, 235, 165, 265]
		  X0			  "-0.1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "4725"
		  Position		  [170, 30, 200, 60]
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "4726"
		  Ports			  [2, 1]
		  Position		  [505, 109, 525, 136]
		  Inputs		  "*/"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  SID			  "4727"
		  Ports			  [2, 1]
		  Position		  [210, 271, 230, 289]
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "4728"
		  Ports			  [2, 1]
		  Position		  [250, 187, 280, 218]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "4729"
		  Ports			  [2, 1]
		  Position		  [440, 105, 460, 125]
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "4730"
		  Ports			  [2, 1]
		  Position		  [170, 210, 190, 230]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|+-"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "4731"
		  Position		  [305, 190, 335, 220]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "4732"
		  Position		  [450, 190, 480, 220]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch2"
		  SID			  "4733"
		  Position		  [235, 95, 265, 125]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch3"
		  SID			  "4734"
		  Position		  [115, 30, 145, 60]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  VariableTransportDelay
		  Name			  "Variable\nTransport Delay"
		  SID			  "4735"
		  Ports			  [2, 1]
		  Position		  [375, 137, 405, 168]
		  MaximumDelay		  "n"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "4736"
		  Position		  [550, 115, 570, 135]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Variable\nTransport Delay"
		  SrcPort		  1
		  Points		  [15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Integrator"
		  SrcPort		  1
		  Points		  [25, 0]
		  Branch {
		    Points		    [0, 35]
		    DstBlock		    "Variable\nTransport Delay"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 30]
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -25]
		    Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -15; 175, 0]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [55, 0]
		    DstBlock		    "Switch"
		    DstPort		    3
		  }
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [0, -45]
		    DstBlock		    "Variable\nTransport Delay"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [80, 0]
		    Branch {
		    DstBlock		    "Switch1"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, -10]
		    DstBlock		    "Switch1"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [0, -20]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  Points		  [0, -75]
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Switch2"
		  SrcPort		  1
		  DstBlock		  "Integrator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch3"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  Points		  [25, 0]
		  Branch {
		    DstBlock		    "Switch2"
		    DstPort		    3
		  }
		  Branch {
		    DstBlock		    "Switch3"
		    DstPort		    3
		  }
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    DstBlock		    "Switch2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -30; -120, 0]
		    DstBlock		    "Switch3"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "From <vc>2"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    Points		    [0, 15]
		    DstBlock		    "Switch2"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, -15; -120, 0; 0, -35]
		    DstBlock		    "Switch3"
		    DstPort		    2
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "4737"
	      Position		      [575, 548, 605, 602]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "4738"
	      Position		      [775, 569, 800, 601]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch3"
	      SID		      "4739"
	      Position		      [400, 224, 430, 266]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch4"
	      SID		      "4740"
	      Position		      [425, 339, 455, 381]
	      Threshold		      "eps"
	      Port {
		PortNumber		1
		Name			"engine not suppressed\n for low torque"
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "T>~0"
	      SID		      "4741"
	      Ports		      [2, 1]
	      Position		      [170, 12, 200, 43]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To Workspace"
	      SID		      "4742"
	      Ports		      [1]
	      Position		      [325, 176, 480, 194]
	      VariableName	      "cs_electric_launch_spd_probe"
	      MaxDataPoints	      "inf"
	      SampleTime	      "-1"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch\ndisengaged"
	      SID		      "4743"
	      Ports		      [2, 1]
	      Position		      [280, 502, 310, 533]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "key_on"
	      SID		      "4744"
	      Ports		      [0, 1]
	      Position		      [745, 44, 800, 76]
	      NamePlacement	      "alternate"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Repeating table"
	      MaskDescription	      "Repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table. Time values should be monotonically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "vc_key_on(:,1)|vc_key_on(:,2)"
	      Port {
		PortNumber		1
		Name			"ignition key is on"
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
	      }
	      System {
		Name			"key_on"
		Location		[5, 42, 410, 213]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "4745"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "4746"
		  Position		  [110, 60, 150, 80]
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "4747"
		  Position		  [210, 58, 250, 82]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "4748"
		  Position		  [285, 60, 305, 80]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  DstBlock		  "Fcn1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max_torque\n lookup1"
	      SID		      "4749"
	      Position		      [575, 398, 605, 422]
	      NamePlacement	      "alternate"
	      InputValues	      "mc_map_spd*mc_spd_scale"
	      Table		      "mc_max_trq*mc_trq_scale*mc_overtrq_factor"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max_torque lookup"
	      SID		      "4750"
	      Position		      [165, 353, 195, 377]
	      NamePlacement	      "alternate"
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      Table		      "fc_max_trq*fc_trq_scale"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "moving next\ntime"
	      SID		      "4751"
	      Ports		      [2, 1]
	      Position		      [205, 597, 235, 628]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "not\nmoving"
	      SID		      "4752"
	      Ports		      [2, 1]
	      Position		      [340, 557, 370, 588]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "repeated cycle:\n speed required at\nend of NEXT step"
	      SID		      "4753"
	      Ports		      [0, 1]
	      Position		      [75, 542, 110, 578]
	      FontName		      "Arial"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Forward looking repeating table"
	      MaskDescription	      "Forward looking repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table with a one time step forward offset. Time values should be monoto"
	      "nically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "cyc_mph(:,1)|cyc_mph(:,2)"
	      System {
		Name			"repeated cycle:\n speed required at\nend of NEXT step"
		Location		[57, 72, 432, 234]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "4754"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "4755"
		  Position		  [110, 25, 150, 45]
		  ForegroundColor	  "green"
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "4756"
		  Position		  [260, 33, 300, 57]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "4757"
		  Position		  [90, 85, 120, 115]
		  ForegroundColor	  "green"
		  X0			  "-0.1"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "4758"
		  Ports			  [2, 1]
		  Position		  [150, 62, 180, 93]
		  ForegroundColor	  "green"
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "4759"
		  Ports			  [2, 1]
		  Position		  [205, 26, 235, 59]
		  ForegroundColor	  "green"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "4760"
		  Position		  [335, 35, 355, 55]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -35]
		    DstBlock		    "Fcn1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0; 0, -15]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "spd>set point"
	      SID		      "4761"
	      Ports		      [2, 1]
	      Position		      [245, 52, 275, 83]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "w>idle"
	      SID		      "4762"
	      Ports		      [2, 1]
	      Position		      [295, 102, 325, 133]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "engine on"
	      SID		      "4763"
	      Position		      [1010, 173, 1040, 187]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "spd command\n (rad/s)"
	      SID		      "4764"
	      Position		      [830, 578, 860, 592]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "key on"
	      SID		      "4765"
	      Position		      [890, 53, 920, 67]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator6"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Logical\nOperator6"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "(--)4"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator6"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [0, 60]
	      DstBlock		      "Logical\nOperator6"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "spd req'd\nout of clutch\n(N*m)1"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		DstBlock		"w>idle"
		DstPort			1
	      }
	      Branch {
		Points			[0, 255]
		Branch {
		  DstBlock		  "max_torque lookup"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 85; 315, 0]
		  Branch {
		    DstBlock		    "Product2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -40]
		    DstBlock		    "Gain1"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Line {
	      SrcBlock		      "w>idle"
	      SrcPort		      1
	      Points		      [10, 0; 0, -75]
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator3"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "trq req'd\nout of clutch\n(N*m)"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, 310]
		Branch {
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 135]
		  DstBlock		  "Product2"
		  DstPort		  2
		}
	      }
	      Branch {
		DstBlock		"T>~0"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      DstBlock		      "T>~0"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "w>idle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch3"
	      SrcPort		      1
	      Points		      [50, 0]
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator6"
	      SrcPort		      1
	      Points		      [5, 0; 0, -25]
	      DstBlock		      "Switch4"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator6"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant8"
	      SrcPort		      1
	      Points		      [0, -5]
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "(--)1"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"Relational\nOperator3"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Product"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "max_torque lookup"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "(--)"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Look-Up Table"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			2
	      }
	      Branch {
		DstBlock		"To Workspace"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "From <ess>"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	      Branch {
		Points			[0, -65]
		DstBlock		"Look-Up Table"
		DstPort			1
	      }
	      Branch {
		Points			[0, 40; 120, 0]
		Branch {
		  DstBlock		  "Relational\nOperator6"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, -10]
		  DstBlock		  "Relational\nOperator7"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator11"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant10"
	      SrcPort		      1
	      Points		      [0, 15; 20, 0]
	      Branch {
		DstBlock		"Switch3"
		DstPort			2
	      }
	      Branch {
		Points			[0, -15]
		DstBlock		"Logical\nOperator11"
		DstPort			1
	      }
	      Branch {
		Points			[0, 25; 55, 0; 0, 75]
		Branch {
		  DstBlock		  "Switch4"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 15]
		  DstBlock		  "Switch4"
		  DstPort		  2
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator2"
	      SrcPort		      1
	      Points		      [105, 0]
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator9"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator7"
	      SrcPort		      1
	      Points		      [5, 0; 0, -100]
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      3
	    }
	    Line {
	      Name		      "engine not suppressed\n for low torque"
	      Labels		      [0, 0]
	      SrcBlock		      "Switch4"
	      SrcPort		      1
	      Points		      [115, 0]
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "(--)5"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator7"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "Subsystem"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <vc>3"
	      SrcPort		      1
	      Points		      [85, 0]
	      DstBlock		      "Relational\nOperator4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "moving next\ntime"
	      SrcPort		      1
	      Points		      [145, 0]
	      DstBlock		      "Logical\nOperator10"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "not\nmoving"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator10"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\ndisengaged"
	      SrcPort		      1
	      Points		      [70, 0]
	      DstBlock		      "Logical\nOperator10"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      DstBlock		      "moving next\ntime"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "repeated cycle:\n speed required at\nend of NEXT step"
	      SrcPort		      1
	      Points		      [75, 0]
	      DstBlock		      "moving next\ntime"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      DstBlock		      "not\nmoving"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "v_ave_req"
	      SrcPort		      1
	      DstBlock		      "not\nmoving"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant7"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "spd command\n (rad/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "clutch\nstate"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "fc_spd_out_r"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator10"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "spd>set point"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator4"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "T>~0"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant11"
	      SrcPort		      1
	      DstBlock		      "spd>set point"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <vc>1"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	      Branch {
		Points			[0, -95]
		DstBlock		"spd>set point"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator5"
	      SrcPort		      1
	      Points		      [245, 0]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator7"
	      SrcPort		      1
	      Points		      [0, -5]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <vc>2"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator7"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "(--)2"
	      SrcPort		      1
	      Points		      [55, 0]
	      DstBlock		      "Logical\nOperator12"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator12"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"engine on"
		DstPort			1
	      }
	      Branch {
		Points			[5, 0; 0, 100]
		Branch {
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 275; -235, 0]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator8"
	      SrcPort		      1
	      Points		      [0, -10]
	      DstBlock		      "Logical\nOperator12"
	      DstPort		      3
	    }
	    Line {
	      Name		      "ignition key is on"
	      Labels		      [0, 0]
	      SrcBlock		      "key_on"
	      SrcPort		      1
	      Points		      [50, 0]
	      Branch {
		DstBlock		"key on"
		DstPort			1
	      }
	      Branch {
		Points			[0, 30; 70, 0; 0, 90]
		DstBlock		"Logical\nOperator12"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator4"
	      SrcPort		      1
	      Points		      [205, 0; 0, -260]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator5"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator13"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <vc>4"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "(--)3"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [-15, 0; 0, -35]
	      Branch {
		Points			[0, -45]
		DstBlock		"Logical\nOperator7"
		DstPort			2
	      }
	      Branch {
		DstBlock		"Logical\nOperator13"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator13"
	      SrcPort		      1
	      Points		      [15, 0; 0, -40]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "max_torque\n lookup1"
	      SrcPort		      1
	      DstBlock		      "Product3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"max_torque\n lookup1"
		DstPort			1
	      }
	      Branch {
		Points			[0, 15]
		DstBlock		"Product3"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant9"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Manual \nSwitch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      Points		      [70, 0; 0, 15]
	      DstBlock		      "Relational\nOperator8"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator8"
	      SrcPort		      1
	      DstBlock		      "Manual \nSwitch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Manual \nSwitch"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      5
	    }
	    Line {
	      SrcBlock		      "Subsystem"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"Relational\nOperator4"
		DstPort			1
	      }
	      Branch {
		Points			[0, -15; 140, 0]
		DstBlock		"Relational\nOperator8"
		DstPort			1
	      }
	    }
	    Annotation {
	      SID		      "4766"
	      Name		      "engine not shut off\n rather than idle"
	      Position		      [521, 72]
	    }
	    Annotation {
	      SID		      "4767"
	      Name		      "engine not suppressed if \ness insufficient \nunless disabled"
	      Position		      [730, 489]
	    }
	    Annotation {
	      SID		      "4768"
	      Name		      "engine not \nsuppressed for\nelectric launch"
	      Position		      [393, 142]
	    }
	    Annotation {
	      SID		      "4769"
	      Name		      "engine not suppressed\nif mc insufficient "
	      Position		      [930, 409]
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "front and rear\nbrake controller\n(achievable)"
	  SID			  "4770"
	  Ports			  [6, 2]
	  Position		  [265, 466, 300, 594]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/front and rear\nbrake controller\n(achievable)"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "motor controller\nlogic"
	  SID			  "4771"
	  Ports			  [4, 1]
	  Position		  [670, 35, 700, 155]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "motor controller\nlogic"
	    Location		    [77, 42, 759, 493]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "bus voltage"
	      SID		      "4772"
	      Position		      [40, 30, 60, 50]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd input\npower (W)"
	      SID		      "4773"
	      Position		      [40, 160, 60, 180]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd output\nspd (rad/s)"
	      SID		      "4774"
	      Position		      [40, 280, 60, 300]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "4775"
	      Position		      [40, 385, 60, 405]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs"
	      SID		      "4776"
	      Position		      [205, 123, 235, 147]
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs1"
	      SID		      "4777"
	      Position		      [105, 278, 135, 302]
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "4778"
	      Ports		      []
	      Position		      [590, 385, 646, 425]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[263, 139, 778, 219]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "4779"
		  Name			  "This block models a motor/controller's logic, modulating the power input requirement as follows:\n- enfo"
		  "rcing the maximum current limit of the motor/controller\n- shutting the motor off if the average speed over the ti"
		  "me step ==0\n- shutting the motor off if the transmission is shifting."
		  Position		  [257, 40]
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "4780"
	      Position		      [95, 79, 165, 101]
	      FontName		      "Arial"
	      Value		      "mc_max_crrnt"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "4781"
	      Position		      [140, 348, 175, 372]
	      FontName		      "Arial"
	      Value		      "0.001"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "4782"
	      Position		      [500, 232, 520, 258]
	      BlockMirror	      on
	      FontName		      "Arial"
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <sdo>"
	      SID		      "4783"
	      Position		      [555, 24, 645, 46]
	      GotoTag		      "mc_crrnt_limited"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "4784"
	      Ports		      [1, 1]
	      Position		      [434, 240, 466, 275]
	      BlockRotation	      270
	      NamePlacement	      "alternate"
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "4785"
	      Position		      [115, 25, 145, 55]
	      X0		      "ess_module_num*mean(ess_voc(1,:))"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      SID		      "4786"
	      Ports		      [2, 1]
	      Position		      [270, 37, 300, 68]
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      SID		      "4787"
	      Ports		      [2, 1]
	      Position		      [210, 36, 230, 54]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "4788"
	      Ports		      [2, 1]
	      Position		      [230, 282, 260, 313]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "4789"
	      Ports		      [2, 1]
	      Position		      [490, 17, 520, 48]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Sign"
	      SID		      "4790"
	      Ports		      [1, 1]
	      Position		      [270, 157, 300, 183]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Sign"
	      MaskDescription	      "y = sign(x)"
	      MaskHelp		      "Sign Function:\\n\\t\\t\\ty = 1 if x > 0\\n\\t\\t\\ty = 0 if x = 0\\n\\t\\t\\ty = -1 if x < 0"
	      MaskDisplay	      "plot(-50,-50,50,50,[-50,50],[0,0],[0,0],[-50,50],[-40,0],[-30,-30],[0,40],[30,30])"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Sign"
		Location		[159, 417, 467, 586]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "4791"
		  Position		  [35, 30, 55, 50]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "4792"
		  Position		  [65, 105, 85, 125]
		  Value			  "0"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "4793"
		  Ports			  [2, 1]
		  Position		  [140, 32, 170, 63]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "4794"
		  Ports			  [2, 1]
		  Position		  [140, 92, 170, 123]
		  Operator		  "<"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "4795"
		  Ports			  [2, 1]
		  Position		  [215, 64, 235, 91]
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "4796"
		  Position		  [265, 70, 285, 90]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 60]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, -60]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  Points		  [10, 0; 0, -25]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  Points		  [10, 0; 0, 20]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "4797"
	      Position		      [495, 180, 525, 210]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "current-limited\npower"
	      SID		      "4798"
	      Ports		      [2, 1]
	      Position		      [365, 51, 385, 69]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "true if motor\nshould be\nshut down"
	      SID		      "4799"
	      Ports		      [2, 1]
	      Position		      [385, 292, 415, 323]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd input\npower (W)1"
	      SID		      "4800"
	      Position		      [590, 185, 610, 205]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Abs1"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "req'd output\nspd (rad/s)"
	      SrcPort		      1
	      DstBlock		      "Abs1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [10, 0; 0, -55]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "true if motor\nshould be\nshut down"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Goto <sdo>"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		Points			[0, -15]
		DstBlock		"Relational\nOperator2"
		DstPort			2
	      }
	      Branch {
		DstBlock		"current-limited\npower"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, -20]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"MinMax"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "current-limited\npower"
	      SrcPort		      1
	      Points		      [60, 0; 0, 125]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "req'd input\npower (W)1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Sign"
	      SrcPort		      1
	      Points		      [20, 0; 0, -105]
	      DstBlock		      "current-limited\npower"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Abs"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "req'd input\npower (W)"
	      SrcPort		      1
	      Points		      [105, 0]
	      Branch {
		DstBlock		"Sign"
		DstPort			1
	      }
	      Branch {
		Points			[0, -35]
		DstBlock		"Abs"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [20, 0; 0, -40]
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "bus voltage"
	      SrcPort		      1
	      DstBlock		      "Memory"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "true if motor\nshould be\nshut down"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [0, -40]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      Points		      [290, 0; 0, -80]
	      DstBlock		      "true if motor\nshould be\nshut down"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "parallel clutch\ncontrol"
	  SID			  "4801"
	  Ports			  [4, 1]
	  Position		  [670, 240, 705, 320]
	  ForegroundColor	  "gray"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "parallel clutch\ncontrol"
	    Location		    [83, 74, 996, 696]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "4802"
	      Position		      [30, 18, 60, 32]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_in_r"
	      SID		      "4803"
	      Position		      [30, 58, 60, 72]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_in_r"
	      SID		      "4804"
	      Position		      [25, 168, 55, 182]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "engine on"
	      SID		      "4805"
	      Position		      [30, 388, 60, 402]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "4806"
	      Ports		      []
	      Position		      [835, 565, 891, 605]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[315, 744, 773, 944]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "4807"
		  Name			  "This clutch control block determines the clutch state given the req'd clutch output torque \nand speed ("
		  "labelled as gearbox input torque and speed), and the gear number history.\n                          conditions   "
		  "                                                                    clutch state\ngear is being shifted OR (trq <~"
		  " 0 AND (engine is                                     1 == disengaged\nclutched to avoid compression braking OR sp"
		  "d < idle))                                                              \n\n(trq >~ 0) AND (spd < launch speed) AN"
		  "D clutch                                       2 == slipping     \nwas not engaged during previous time step      "
		  "                                                           \n\nneither of above sets of conditions are met        "
		  "                                  3 == engaged\n\nBut the clutch is always disengaged when the engine is off or wa"
		  "s off within the past 0.5 s."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Clock
	      Name		      "Clock"
	      SID		      "4808"
	      Position		      [40, 535, 60, 555]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "4809"
	      Position		      [145, 83, 180, 107]
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "4810"
	      Position		      [145, 124, 225, 146]
	      Value		      "vc_clutch_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "4811"
	      Position		      [145, 189, 225, 211]
	      Value		      "vc_idle_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "4812"
	      Position		      [145, 255, 180, 275]
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "4813"
	      Position		      [145, 319, 225, 341]
	      Value		      "vc_launch_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "4814"
	      Position		      [570, 355, 605, 375]
	      BlockMirror	      on
	      Value		      "2.5"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "4815"
	      Position		      [790, 175, 810, 195]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      SID		      "4816"
	      Position		      [660, 110, 720, 140]
	      Expr		      "u[1]+2*u[2]*(1-u[1])*(1-u[3])+3*u[3]*(1-u[1])"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "4817"
	      Ports		      [2, 1]
	      Position		      [380, 67, 410, 98]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "4818"
	      Ports		      [2, 1]
	      Position		      [315, 127, 345, 158]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Manual Switch"
	      SID		      "4819"
	      Ports		      [2, 1]
	      Position		      [410, 387, 440, 423]
	      ForegroundColor	      "gray"
	      SourceBlock	      "simulink3/Nonlinear/Manual Switch"
	      SourceType	      "Manual Switch"
	      sw		      "1"
	      action		      "0"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "4820"
	      Position		      [570, 300, 600, 330]
	      BlockMirror	      on
	      X0		      "1+(2*(cyc_mph(1,2)>0))"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory1"
	      SID		      "4821"
	      Position		      [170, 415, 200, 445]
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory2"
	      SID		      "4822"
	      Position		      [170, 565, 200, 595]
	      X0		      "-1"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "4823"
	      Ports		      [3, 1]
	      Position		      [590, 107, 625, 143]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "4824"
	      Ports		      [2, 1]
	      Position		      [300, 57, 330, 88]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "4825"
	      Ports		      [2, 1]
	      Position		      [260, 177, 290, 208]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "4826"
	      Ports		      [2, 1]
	      Position		      [260, 242, 290, 273]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      SID		      "4827"
	      Ports		      [2, 1]
	      Position		      [260, 307, 290, 338]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      SID		      "4828"
	      Ports		      [2, 1]
	      Position		      [235, 537, 265, 568]
	      Inputs		      "+-"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "4829"
	      Position		      [790, 120, 820, 150]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "4830"
	      Position		      [330, 400, 360, 430]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      TransportDelay
	      Name		      "Transport\nDelay"
	      SID		      "4831"
	      Ports		      [1, 1]
	      Position		      [170, 475, 200, 505]
	      DelayTime		      "0.2"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\ndisengaged"
	      SID		      "4832"
	      Ports		      [2, 1]
	      Position		      [450, 17, 480, 48]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nengaged"
	      SID		      "4833"
	      Ports		      [2, 1]
	      Position		      [520, 117, 550, 148]
	      Operator		      "NOR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping"
	      SID		      "4834"
	      Ports		      [3, 1]
	      Position		      [380, 254, 410, 286]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping1"
	      SID		      "4835"
	      Ports		      [2, 1]
	      Position		      [235, 386, 265, 419]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping2"
	      SID		      "4836"
	      Ports		      [2, 1]
	      Position		      [235, 466, 265, 499]
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch was NOT\nfully engaged\nduring last time step"
	      SID		      "4837"
	      Ports		      [2, 1]
	      Position		      [475, 305, 510, 340]
	      BlockMirror	      on
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "gearbox speed\nestimator"
	      SID		      "4838"
	      Ports		      [1, 1]
	      Position		      [80, 160, 110, 190]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"gearbox speed\nestimator"
		Location		[222, 219, 810, 728]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_in_r\nif no gear change"
		  SID			  "4839"
		  Position		  [45, 18, 75, 32]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "4840"
		  Ports			  []
		  Position		  [515, 345, 571, 385]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [497, 485, 832, 570]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "4841"
		    Name		    "The requested engine speed is replaced by an estimate of the\nengine's previous speed whenever the ve"
		    "hicle missed the trace\n by more than 1 mph on the last time step."
		    Position		    [167, 41]
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "4842"
		  Position		  [165, 240, 185, 260]
		  BlockMirror		  on
		  Value			  "eps"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "4843"
		  Position		  [315, 165, 335, 185]
		  BlockMirror		  on
		  Value			  "0"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "4844"
		  Position		  [230, 360, 250, 380]
		  BlockMirror		  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "4845"
		  Position		  [230, 460, 250, 480]
		  BlockMirror		  on
		  Value			  "0.11"
		}
		Block {
		  BlockType		  From
		  Name			  "From"
		  SID			  "4846"
		  Position		  [195, 40, 285, 70]
		  BlockMirror		  on
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "gb_spd_in_a"
		}
		Block {
		  BlockType		  From
		  Name			  "From <cyc>"
		  SID			  "4847"
		  Position		  [30, 304, 120, 336]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "cyc_mph_r"
		}
		Block {
		  BlockType		  From
		  Name			  "From <veh>"
		  SID			  "4848"
		  Position		  [30, 99, 85, 131]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "mpha"
		}
		Block {
		  BlockType		  From
		  Name			  "From <wh>/\ntire slip model (m/s)"
		  SID			  "4849"
		  Position		  [30, 184, 120, 216]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "veh_spd_a_rec"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  SID			  "4850"
		  Position		  [150, 97, 190, 133]
		  Gain			  "0.447"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical"
		  SID			  "4851"
		  Ports			  [2, 1]
		  Position		  [375, 317, 405, 348]
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "4852"
		  Position		  [370, 105, 400, 135]
		  X0			  "cyc_mph(1,2)*0.447/wh_radius*fd_ratio*gb_ratio(gb_num_init)"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "4853"
		  Position		  [310, 310, 340, 340]
		  X0			  "1"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "4854"
		  Ports			  [3, 1]
		  Position		  [215, 99, 245, 131]
		  Inputs		  "**/"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational"
		  SID			  "4855"
		  Ports			  [2, 1]
		  Position		  [225, 307, 255, 338]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational1"
		  SID			  "4856"
		  Ports			  [2, 1]
		  Position		  [225, 412, 255, 443]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "4857"
		  Ports			  [2, 1]
		  Position		  [160, 192, 190, 223]
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "4858"
		  Ports			  [2, 1]
		  Position		  [160, 297, 190, 328]
		  Inputs		  "-+"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "4859"
		  Position		  [310, 110, 340, 140]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "4860"
		  Position		  [445, 120, 475, 150]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "dt"
		  SID			  "4861"
		  Ports			  [0, 1]
		  Position		  [165, 408, 185, 432]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "dt"
		    Location		    [240, 561, 480, 665]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "4862"
		    Position		    [25, 25, 45, 45]
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "4863"
		    Position		    [75, 53, 105, 77]
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum4"
		    SID			    "4864"
		    Ports		    [2, 1]
		    Position		    [130, 27, 160, 58]
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "4865"
		    Position		    [185, 38, 215, 52]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "Sum4"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Sum4"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum4"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  SID			  "4866"
		  Position		  [545, 128, 575, 142]
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "dt"
		  SrcPort		  1
		  DstBlock		  "Relational1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical"
		  SrcPort		  1
		  Points		  [10, 0; 0, -200]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Logical"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational1"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From"
		  SrcPort		  1
		  Points		  [0, 50]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gb_spd_in_r\nif no gear change"
		  SrcPort		  1
		  Points		  [350, 0]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Relational"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <veh>"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    Points		    [0, 190]
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Gain"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "From <cyc>"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [0, 5]
		  DstBlock		  "Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  Labels		  [1, 0]
		  SrcBlock		  "From <wh>/\ntire slip model (m/s)"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    Points		    [0, -25; 155, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Product"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "clutch\nstate"
	      SID		      "4867"
	      Position		      [855, 128, 885, 142]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      Points		      [-15, 0; 0, -40]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      Points		      [15, 0; 0, -45]
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gb_trq_in_r"
	      SrcPort		      1
	      Points		      [70, 0]
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	      Branch {
		Points			[0, 185]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [90, 0; 0, -15]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      SrcPort		      1
	      Points		      [-120, 0; 0, -45]
	      DstBlock		      "clutch\nslipping"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      Points		      [-30, 0; 0, -35]
	      DstBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      Points		      [30, 0; 0, -55]
	      DstBlock		      "clutch\nslipping"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping"
	      SrcPort		      1
	      Points		      [80, 0; 0, -95]
	      Branch {
		Points			[80, 0]
		DstBlock		"Mux"
		DstPort			2
	      }
	      Branch {
		Points			[0, -35]
		DstBlock		"clutch\nengaged"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "clutch\nslipping"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\ndisengaged"
	      SrcPort		      1
	      Points		      [10, 0; 0, 40]
	      Branch {
		Points			[80, 0]
		DstBlock		"Mux"
		DstPort			1
	      }
	      Branch {
		Points			[0, 50]
		DstBlock		"clutch\nengaged"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "clutch\nengaged"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      DstBlock		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "engine on"
	      SrcPort		      1
	      Points		      [80, 0]
	      Branch {
		DstBlock		"clutch\nslipping1"
		DstPort			1
	      }
	      Branch {
		Points			[0, 35]
		Branch {
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 30]
		  Branch {
		    Points		    [0, 30]
		    DstBlock		    "Transport\nDelay"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [75, 0]
		    DstBlock		    "clutch\nslipping2"
		    DstPort		    1
		  }
		}
	      }
	      Branch {
		Points			[0, -20; 250, 0]
		DstBlock		"Manual Switch"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Memory1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "clutch\nslipping1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping1"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Transport\nDelay"
	      SrcPort		      1
	      DstBlock		      "clutch\nslipping2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping2"
	      SrcPort		      1
	      Points		      [25, 0; 0, -60]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Clock"
	      SrcPort		      1
	      Points		      [80, 0]
	      Branch {
		DstBlock		"Sum"
		DstPort			1
	      }
	      Branch {
		Points			[0, 35]
		DstBlock		"Memory2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Memory2"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "Switch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gb_spd_in_r"
	      SrcPort		      1
	      DstBlock		      "gearbox speed\nestimator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gearbox speed\nestimator"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[105, 0; 0, 10]
		DstBlock		"Relational\nOperator1"
		DstPort			1
	      }
	      Branch {
		Points			[0, 140]
		DstBlock		"Relational\nOperator3"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "Manual Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Manual Switch"
	      SrcPort		      1
	      Points		      [315, 0; 0, -270]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"clutch\nstate"
		DstPort			1
	      }
	      Branch {
		Points			[0, 180]
		DstBlock		"Memory"
		DstPort			1
	      }
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "pre-TX parallel\ngearbox control"
	  SID			  "4868"
	  Ports			  [4, 3]
	  Position		  [285, 48, 320, 147]
	  FontName		  "Arial"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "pre-TX parallel\ngearbox control"
	    Location		    [12, 74, 999, 742]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_out_r"
	      SID		      "4869"
	      Position		      [45, 75, 65, 95]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_out_r"
	      SID		      "4870"
	      Position		      [45, 320, 65, 340]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "prev.\nPout/Pin"
	      SID		      "4871"
	      Position		      [45, 175, 65, 195]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "tires are at\ntraction limit"
	      SID		      "4872"
	      Position		      [45, 20, 65, 40]
	      FontName		      "Arial"
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "4873"
	      Ports		      []
	      Position		      [875, 605, 931, 645]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[229, 259, 687, 388]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "4874"
		  Name			  "This gearbox control block computes the current gear number given the gearbox's\nreq'd output torque and"
		  " speed and an estimate its efficiency.  Upshifts occur, given a\ncertain engine speed,  when the estimated engine "
		  "load falls below the upshift curve\nin engine speed/load space, and downshifts likewise occur when estimated engin"
		  "e\nload rises above the downshift curve.  Separate upshift and downshift curves are\ndefined for each gear.  An up"
		  "shift may not be immediately followed by a downshift.\nIf the tires are about to slip, don't upshift unless the en"
		  "gine would be at max. speed.\nEnforce this rule by setting the load to 1 when the tires are about to slip."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "4875"
	      Position		      [330, 40, 350, 60]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "4876"
	      Position		      [525, 200, 545, 220]
	      BlockMirror	      on
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant14"
	      SID		      "4877"
	      Position		      [455, 593, 550, 607]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant15"
	      SID		      "4878"
	      Position		      [385, 458, 480, 472]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "4879"
	      Position		      [525, 285, 545, 305]
	      BlockMirror	      on
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      SID		      "4880"
	      Ports		      [1, 2]
	      Position		      [725, 446, 730, 484]
	      BackgroundColor	      "black"
	      ShowName		      off
	      Outputs		      "2"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      SID		      "4881"
	      Position		      [555, 565, 680, 585]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <logic>2"
	      SID		      "4882"
	      Position		      [35, 519, 140, 551]
	      ForegroundColor	      "red"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "v_req_limited"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      SID		      "4883"
	      Position		      [555, 625, 680, 645]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From2"
	      SID		      "4884"
	      Position		      [495, 485, 620, 505]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From3"
	      SID		      "4885"
	      Position		      [495, 510, 620, 530]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From4"
	      SID		      "4886"
	      Position		      [495, 420, 620, 440]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      SID		      "4887"
	      Position		      [470, 302, 495, 328]
	      FontName		      "Arial"
	      Gain		      "-1"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto"
	      SID		      "4888"
	      Position		      [260, 510, 380, 530]
	      NamePlacement	      "alternate"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto1"
	      SID		      "4889"
	      Position		      [260, 534, 380, 556]
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto4"
	      SID		      "4890"
	      Position		      [805, 325, 940, 345]
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto5"
	      SID		      "4891"
	      Position		      [835, 185, 945, 205]
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto6"
	      SID		      "4892"
	      Position		      [830, 260, 940, 280]
	      NamePlacement	      "alternate"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "4893"
	      Ports		      [2, 1]
	      Position		      [640, 482, 645, 533]
	      ShowName		      off
	      Inputs		      "2"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      SID		      "4894"
	      Ports		      [2, 1]
	      Position		      [225, 87, 255, 118]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      RateLimiter
	      Name		      "Rate Limiter"
	      SID		      "4895"
	      Position		      [510, 367, 540, 393]
	      BlockMirror	      on
	      RisingSlewLimit	      "1/(gb_shift_delay+eps)"
	      FallingSlewLimit	      "-1/(gb_shift_delay+eps)"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "4896"
	      Ports		      [1, 1]
	      Position		      [80, 175, 110, 195]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "0.2"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation1"
	      SID		      "4897"
	      Ports		      [1, 1]
	      Position		      [710, 186, 730, 204]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "gb_gears_num"
	      LowerLimit	      "1"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Speed Dependent Shifting"
	      SID		      "4898"
	      Ports		      [1, 2]
	      Position		      [185, 507, 215, 558]
	      SourceBlock	      "lib_controls/SubSystem/Speed Dependent Shifting"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "off"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "4899"
	      Position		      [325, 80, 355, 110]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "4900"
	      Position		      [520, 235, 550, 265]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch2"
	      SID		      "4901"
	      Position		      [520, 155, 550, 185]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch3"
	      SID		      "4902"
	      Position		      [700, 585, 730, 615]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch4"
	      SID		      "4903"
	      Position		      [670, 450, 700, 480]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To WS"
	      SID		      "4904"
	      Ports		      [1]
	      Position		      [360, 339, 400, 361]
	      BackgroundColor	      "red"
	      VariableName	      "spd"
	      MaxDataPoints	      "inf"
	      SampleTime	      "-1"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "allow downshift?"
	      SID		      "4905"
	      Ports		      [1, 1]
	      Position		      [420, 232, 450, 268]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"allow downshift?"
		Location		[328, 265, 817, 480]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gearnum"
		  SID			  "4906"
		  Position		  [35, 35, 55, 55]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  SID			  "4907"
		  Ports			  [2, 1]
		  Position		  [375, 43, 405, 67]
		  FontName		  "Arial"
		  Operator		  "NOR"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "4908"
		  Position		  [145, 60, 180, 80]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "4909"
		  Position		  [145, 105, 180, 125]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "4910"
		  Ports			  [2, 1]
		  Position		  [225, 38, 255, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator2"
		  SID			  "4911"
		  Ports			  [2, 1]
		  Position		  [225, 98, 255, 122]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  Outport
		  Name			  "allow shift"
		  SID			  "4912"
		  Position		  [445, 45, 465, 65]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator2"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [0, 30; -60, 0]
		    DstBlock		    "Memory1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [15, 0; 0, -15]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gearnum"
		  SrcPort		  1
		  Points		  [45, 0]
		  Branch {
		    Points		    [0, 25]
		    Branch {
		    Points		    [0, 35]
		    DstBlock		    "Relational\nOperator2"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  DstBlock		  "allow shift"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "allow upshift?"
	      SID		      "4913"
	      Ports		      [4, 1]
	      Position		      [420, 152, 450, 188]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"allow upshift?"
		Location		[132, 265, 847, 659]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gearnum"
		  SID			  "4914"
		  Position		  [35, 25, 55, 45]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_trq_out_r"
		  SID			  "4915"
		  Position		  [35, 145, 55, 165]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_out_r"
		  SID			  "4916"
		  Position		  [35, 105, 55, 125]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "prev Pout/Pin"
		  SID			  "4917"
		  Position		  [35, 185, 55, 205]
		  Port			  "4"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES1"
		  SID			  "4918"
		  Ports			  []
		  Position		  [645, 340, 701, 380]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES1"
		    Location		    [229, 259, 576, 405]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "4919"
		    Name		    "This block prevents an upshift if it the engine is not on and\nthe upshift would make the motor power"
		    " low enough that it\ncould not provide the required input power.  However, an upshift\nis allowed if to stay in "
		    "the current gear would put the motor\nbeyond 95% of its maximum speed.\n\nThis block is to be used in pretransmi"
		    "ssion parallel hybrids\n(where the engine and motor torques are combined on the\nengine side of the transmission"
		    ") ONLY."
		    Position		    [172, 12]
		    VerticalAlignment	    "top"
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "4920"
		  Position		  [110, 75, 130, 95]
		  BlockMirror		  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "4921"
		  Position		  [100, 347, 375, 373]
		  Value			  "max(mc_map_spd)*mc_spd_scale/tc_mc_to_fc_ratio*.95"
		}
		Block {
		  BlockType		  From
		  Name			  "From <vc>"
		  SID			  "4922"
		  Position		  [15, 232, 80, 258]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "engine_on"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator1"
		  SID			  "4923"
		  Ports			  [3, 1]
		  Position		  [615, 53, 645, 97]
		  Operator		  "OR"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "4924"
		  Position		  [125, 230, 155, 260]
		  X0			  "1"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "4925"
		  Ports			  [2, 1]
		  Position		  [310, 37, 340, 68]
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "4926"
		  Ports			  [2, 1]
		  Position		  [540, 42, 570, 73]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "4927"
		  Ports			  [2, 1]
		  Position		  [395, 287, 425, 318]
		  Operator		  ">"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation"
		  SID			  "4928"
		  Ports			  [1, 1]
		  Position		  [165, 29, 205, 61]
		  InputPortMap		  "u0"
		  FontName		  "Arial"
		  UpperLimit		  "gb_gears_num"
		  LowerLimit		  "1"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "4929"
		  Ports			  [2, 1]
		  Position		  [105, 27, 135, 58]
		}
		Block {
		  BlockType		  Product
		  Name			  "est. req'd\ninput pwr\n(W)"
		  SID			  "4930"
		  Ports			  [3, 1]
		  Position		  [310, 109, 340, 141]
		  Inputs		  "**/"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "gear ratio"
		  SID			  "4931"
		  Position		  [245, 33, 275, 57]
		  FontName		  "Arial"
		  InputValues		  "[1:length(gb_ratio)]"
		  Table			  "gb_ratio"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "gear ratio1"
		  SID			  "4932"
		  Position		  [250, 258, 280, 282]
		  FontName		  "Arial"
		  InputValues		  "[1:length(gb_ratio)]"
		  Table			  "gb_ratio"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "motor\ntorque\ncapability"
		  SID			  "4933"
		  Position		  [380, 45, 410, 65]
		  FontName		  "Arial"
		  InputValues		  "mc_map_spd*mc_spd_scale"
		  Table			  "mc_max_trq*mc_trq_scale*mc_overtrq_factor+eps"
		}
		Block {
		  BlockType		  Product
		  Name			  "motor (input to gb)\npwr capability"
		  SID			  "4934"
		  Ports			  [2, 1]
		  Position		  [455, 32, 485, 63]
		}
		Block {
		  BlockType		  Product
		  Name			  "req'd input spd\nif no gear change"
		  SID			  "4935"
		  Ports			  [2, 1]
		  Position		  [310, 276, 340, 309]
		}
		Block {
		  BlockType		  Outport
		  Name			  "allow shift"
		  SID			  "4936"
		  Position		  [675, 65, 695, 85]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [430, 0; 0, -170]
		  DstBlock		  "Logical\nOperator1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <vc>"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical\nOperator1"
		  SrcPort		  1
		  DstBlock		  "allow shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev Pout/Pin"
		  SrcPort		  1
		  Points		  [225, 0; 0, -60]
		  DstBlock		  "est. req'd\ninput pwr\n(W)"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "gb_trq_out_r"
		  SrcPort		  1
		  Points		  [215, 0; 0, -30]
		  DstBlock		  "est. req'd\ninput pwr\n(W)"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "est. req'd\ninput pwr\n(W)"
		  SrcPort		  1
		  Points		  [175, 0; 0, -60]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "motor (input to gb)\npwr capability"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    Points		    [0, -15]
		    DstBlock		    "motor (input to gb)\npwr capability"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "motor\ntorque\ncapability"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "motor\ntorque\ncapability"
		  SrcPort		  1
		  DstBlock		  "motor (input to gb)\npwr capability"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "gear ratio"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation"
		  SrcPort		  1
		  DstBlock		  "gear ratio"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Saturation"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "gear ratio1"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "req'd input spd\nif no gear change"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gearnum"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 235]
		    DstBlock		    "gear ratio1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "gb_spd_out_r"
		  SrcPort		  1
		  Points		  [150, 0]
		  Branch {
		    Points		    [85, 0]
		    Branch {
		    DstBlock		    "est. req'd\ninput pwr\n(W)"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		  }
		  Branch {
		    Points		    [0, 185]
		    DstBlock		    "req'd input spd\nif no gear change"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  Points		  [170, 0]
		  DstBlock		  "Logical\nOperator1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "req'd input spd\nif no gear change"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "current\ngear\nnumber"
	      SID		      "4937"
	      Ports		      [2, 1]
	      Position		      [655, 177, 675, 213]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "delta\ngear\nnumber"
	      SID		      "4938"
	      Position		      [585, 189, 615, 221]
	      FontName		      "Arial"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "downshift \ncommand"
	      SID		      "4939"
	      Ports		      [3, 1]
	      Position		      [420, 289, 450, 341]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"downshift \ncommand"
		Location		[431, 372, 906, 667]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "4940"
		  Position		  [45, 98, 75, 112]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "4941"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "4942"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "4943"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "4944"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "4945"
		  Ports			  [1, 1]
		  Position		  [240, 100, 270, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_dnshift_spd|gb_dnshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "4946"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "4947"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "4948"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "4949"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [55, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "engine\ntorque\ncapability"
	      SID		      "4950"
	      Position		      [185, 205, 215, 225]
	      BlockRotation	      270
	      FontName		      "Arial"
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      Table		      "fc_max_trq*fc_trq_scale+eps"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "gb_spd_in_r"
	      SID		      "4951"
	      Ports		      [2, 1]
	      Position		      [150, 323, 170, 347]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio"
	      SID		      "4952"
	      Position		      [400, 368, 430, 392]
	      BlockMirror	      on
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      Table		      "gb_ratio"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio1"
	      SID		      "4953"
	      Position		      [775, 183, 805, 207]
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      Table		      "gb_ratio"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "gearbox speed\nestimator"
	      SID		      "4954"
	      Ports		      [1, 1]
	      Position		      [275, 320, 305, 350]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"gearbox speed\nestimator"
		Location		[222, 219, 810, 728]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_in_r\nif no gear change"
		  SID			  "4955"
		  Position		  [45, 18, 75, 32]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "4956"
		  Ports			  []
		  Position		  [515, 345, 571, 385]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [497, 485, 832, 570]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "4957"
		    Name		    "The requested engine speed is replaced by an estimate of the\nengine's previous speed whenever the ve"
		    "hicle missed the trace\n by more than 1 mph on the last time step."
		    Position		    [167, 41]
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "4958"
		  Position		  [165, 240, 185, 260]
		  BlockMirror		  on
		  Value			  "eps"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "4959"
		  Position		  [315, 165, 335, 185]
		  BlockMirror		  on
		  Value			  "0"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "4960"
		  Position		  [230, 360, 250, 380]
		  BlockMirror		  on
		  Value			  "2"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "4961"
		  Position		  [230, 460, 250, 480]
		  BlockMirror		  on
		  Value			  "0.11"
		}
		Block {
		  BlockType		  From
		  Name			  "From"
		  SID			  "4962"
		  Position		  [195, 40, 285, 70]
		  BlockMirror		  on
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "gb_spd_in_a"
		}
		Block {
		  BlockType		  From
		  Name			  "From <cyc>"
		  SID			  "4963"
		  Position		  [30, 304, 120, 336]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "cyc_mph_r"
		}
		Block {
		  BlockType		  From
		  Name			  "From <veh>"
		  SID			  "4964"
		  Position		  [30, 99, 85, 131]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "mpha"
		}
		Block {
		  BlockType		  From
		  Name			  "From <wh>/\ntire slip model (m/s)"
		  SID			  "4965"
		  Position		  [30, 184, 120, 216]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "veh_spd_a_rec"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  SID			  "4966"
		  Position		  [150, 97, 190, 133]
		  Gain			  "0.447"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical"
		  SID			  "4967"
		  Ports			  [2, 1]
		  Position		  [375, 317, 405, 348]
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "4968"
		  Position		  [370, 110, 400, 140]
		  X0			  "cyc_mph(1,2)*0.447/wh_radius*fd_ratio*gb_ratio(gb_num_init)"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "4969"
		  Position		  [310, 310, 340, 340]
		  X0			  "1"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "4970"
		  Ports			  [3, 1]
		  Position		  [215, 99, 245, 131]
		  Inputs		  "**/"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational"
		  SID			  "4971"
		  Ports			  [2, 1]
		  Position		  [225, 307, 255, 338]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational1"
		  SID			  "4972"
		  Ports			  [2, 1]
		  Position		  [225, 412, 255, 443]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "4973"
		  Ports			  [2, 1]
		  Position		  [160, 192, 190, 223]
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "4974"
		  Ports			  [2, 1]
		  Position		  [160, 297, 190, 328]
		  Inputs		  "-+"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "4975"
		  Position		  [310, 110, 340, 140]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "4976"
		  Position		  [445, 120, 475, 150]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "dt"
		  SID			  "4977"
		  Ports			  [0, 1]
		  Position		  [165, 408, 185, 432]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "dt"
		    Location		    [240, 561, 480, 665]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "4978"
		    Position		    [25, 25, 45, 45]
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "4979"
		    Position		    [75, 53, 105, 77]
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum4"
		    SID			    "4980"
		    Ports		    [2, 1]
		    Position		    [130, 27, 160, 58]
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "4981"
		    Position		    [185, 38, 215, 52]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "Sum4"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Sum4"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum4"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  SID			  "4982"
		  Position		  [545, 128, 575, 142]
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "dt"
		  SrcPort		  1
		  DstBlock		  "Relational1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical"
		  SrcPort		  1
		  Points		  [10, 0; 0, -200]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Logical"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational1"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From"
		  SrcPort		  1
		  Points		  [0, 50]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gb_spd_in_r\nif no gear change"
		  SrcPort		  1
		  Points		  [350, 0]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Relational"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <veh>"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    Points		    [0, 190]
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Gain"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "From <cyc>"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  Labels		  [1, 0]
		  SrcBlock		  "From <wh>/\ntire slip model (m/s)"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    Points		    [0, -25; 155, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Product"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "load=T/\n(maxT\nat spd)"
	      SID		      "4983"
	      Ports		      [1, 1]
	      Position		      [275, 96, 295, 114]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "0"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev gear\nnumber"
	      SID		      "4984"
	      Position		      [670, 35, 710, 55]
	      BlockMirror	      on
	      FontName		      "Arial"
	      X0		      "gb_num_init"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev gear\nratio"
	      SID		      "4985"
	      Position		      [205, 370, 240, 390]
	      BlockMirror	      on
	      FontName		      "Arial"
	      X0		      "gb_ratio(gb_num_init)"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "shifting1"
	      SID		      "4986"
	      Ports		      [1, 1]
	      Position		      [775, 254, 805, 286]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"shifting1"
		Location		[164, 210, 454, 401]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gear\nnumber"
		  SID			  "4987"
		  Position		  [15, 50, 35, 70]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "4988"
		  Position		  [20, 131, 120, 159]
		  FontName		  "Arial"
		  Value			  "gb_shift_delay-1e-6"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "4989"
		  Ports			  [2, 1]
		  Position		  [185, 53, 215, 77]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "time since last shift"
		  SID			  "4990"
		  Ports			  [1, 1]
		  Position		  [65, 43, 125, 77]
		  ShowName		  off
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('time since\\nlast shift')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "time since last shift"
		    Location		    [16, 396, 306, 535]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "4991"
		    Position		    [10, 60, 30, 80]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "just shifted"
		    SID			    "4992"
		    Ports		    [1, 1]
		    Position		    [60, 57, 110, 83]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('just\\nshifted')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "just shifted"
		    Location		    [140, 214, 463, 359]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "4993"
		    Position		    [55, 55, 75, 75]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "4994"
		    Position		    [120, 55, 155, 75]
		    FontName		    "Arial"
		    X0			    "1"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    SID			    "4995"
		    Ports		    [2, 1]
		    Position		    [190, 58, 220, 82]
		    FontName		    "Arial"
		    Operator		    "~="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "4996"
		    Position		    [250, 60, 270, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, 30; 75, 0; 0, -20]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "timer"
		    SID			    "4997"
		    Ports		    [1, 1]
		    Position		    [140, 55, 175, 85]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('timer')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "timer"
		    Location		    [455, 179, 859, 394]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "trigger"
		    SID			    "4998"
		    Position		    [15, 125, 35, 145]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "4999"
		    Position		    [100, 100, 120, 120]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant1"
		    SID			    "5000"
		    Position		    [100, 150, 120, 170]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant2"
		    SID			    "5001"
		    Position		    [150, 5, 170, 25]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "5002"
		    Position		    [265, 59, 295, 91]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "no-lag\nReset Integrator"
		    SID			    "5003"
		    Ports		    [3, 1]
		    Position		    [155, 96, 205, 174]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskType		    "No-lag Reset Integrator"
		    MaskDescription	    "No-lag Reset Integrator"
		    MaskHelp		    "Integrates first input using Euler technique.\\nAt the time step that input 2 <> zero,\\noutput i"
		    "s reset to input 3."
		    MaskPromptString	    "Initial Value"
		    MaskStyleString	    "edit"
		    MaskVariables	    "initval=@1;"
		    MaskTunableValueString  "on"
		    MaskEnableString	    "on"
		    MaskVisibilityString    "on"
		    MaskToolTipString	    "on"
		    MaskDisplay		    "disp('1/s\\nw/ reset\\nno lag')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "15"
		    System {
		    Name		    "no-lag\nReset Integrator"
		    Location		    [258, 616, 780, 880]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "5004"
		    Position		    [60, 100, 80, 120]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    SID			    "5005"
		    Position		    [60, 140, 80, 160]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_3"
		    SID			    "5006"
		    Position		    [45, 185, 65, 205]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "5007"
		    Position		    [125, 205, 145, 225]
		    BlockRotation	    270
		    NamePlacement	    "alternate"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "5008"
		    Position		    [340, 55, 375, 75]
		    BlockMirror		    on
		    FontName		    "Arial"
		    X0			    "initval"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    SID			    "5009"
		    Ports		    [2, 1]
		    Position		    [160, 96, 180, 114]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    SID			    "5010"
		    Ports		    [2, 1]
		    Position		    [230, 90, 250, 110]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "5011"
		    Position		    [290, 139, 320, 171]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "dt"
		    SID			    "5012"
		    Ports		    [0, 1]
		    Position		    [112, 50, 138, 80]
		    BlockRotation	    270
		    BlockMirror		    on
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "dt"
		    Location		    [80, 285, 429, 424]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "5013"
		    Position		    [65, 60, 85, 80]
		    FontName		    "Arial"
		    FontSize		    8
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "5014"
		    Position		    [125, 85, 160, 105]
		    FontName		    "Arial"
		    FontSize		    8
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    SID			    "5015"
		    Ports		    [2, 1]
		    Position		    [205, 65, 225, 85]
		    FontName		    "Arial"
		    FontSize		    8
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "5016"
		    Position		    [255, 65, 275, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [10, 0; 0, -15]
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "in_2==0"
		    SID			    "5017"
		    Ports		    [2, 1]
		    Position		    [160, 143, 190, 167]
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "5018"
		    Position		    [455, 145, 475, 165]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_3"
		    SrcPort		    1
		    Points		    [200, 0; 0, -30]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "in_2==0"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "dt"
		    SrcPort		    1
		    Points		    [0, 15]
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    Points		    [-130, 0; 0, 30]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    Points		    [10, 0; 0, 45]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    Points		    [85, 0]
		    Branch {
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -90]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "in_2==0"
		    SrcPort		    1
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    Points		    [0, -40]
		    DstBlock		    "in_2==0"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "time"
		    SID			    "5019"
		    Position		    [350, 65, 370, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    DstBlock		    "time"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "trigger"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, -60]
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Constant2"
		    SrcPort		    1
		    Points		    [35, 0; 0, 50]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant1"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "no-lag\nReset Integrator"
		    SrcPort		    1
		    Points		    [35, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "5020"
		    Position		    [225, 60, 245, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "just shifted"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "just shifted"
		    SrcPort		    1
		    DstBlock		    "timer"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "timer"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "5021"
		  Position		  [250, 55, 270, 75]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gear\nnumber"
		  SrcPort		  1
		  DstBlock		  "time since last shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [15, 0; 0, -75]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "time since last shift"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "upshift\n command"
	      SID		      "5022"
	      Ports		      [3, 1]
	      Position		      [420, 64, 450, 116]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"upshift\n command"
		Location		[324, 355, 799, 650]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "5023"
		  Position		  [45, 103, 75, 117]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "5024"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "5025"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "5026"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "5027"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "5028"
		  Ports			  [1, 1]
		  Position		  [245, 100, 275, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_upshift_spd|gb_upshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "5029"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "5030"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "5031"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "5032"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [50, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Product
	      Name		      "~gb_trq_in_r"
	      SID		      "5033"
	      Ports		      [3, 1]
	      Position		      [150, 77, 170, 113]
	      FontName		      "Arial"
	      Inputs		      "*//"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear number, out"
	      SID		      "5034"
	      Position		      [795, 590, 815, 610]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear ratio, out"
	      SID		      "5035"
	      Position		      [795, 430, 815, 450]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "shifting, out"
	      SID		      "5036"
	      Position		      [795, 475, 815, 495]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "gb_spd_in_r"
	      SrcPort		      1
	      DstBlock		      "gearbox speed\nestimator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "load=T/\n(maxT\nat spd)"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "allow downshift?"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "downshift \ncommand"
	      SrcPort		      1
	      DstBlock		      "Gain1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "engine\ntorque\ncapability"
	      SrcPort		      1
	      Points		      [0, -90]
	      DstBlock		      "Product2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "delta\ngear\nnumber"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch2"
	      SrcPort		      1
	      Points		      [15, 0; 0, 25]
	      Branch {
		DstBlock		"delta\ngear\nnumber"
		DstPort			2
	      }
	      Branch {
		DstBlock		"delta\ngear\nnumber"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "delta\ngear\nnumber"
	      SrcPort		      1
	      DstBlock		      "current\ngear\nnumber"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "current\ngear\nnumber"
	      SrcPort		      1
	      DstBlock		      "Saturation1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Labels			[1, 0]
		Points			[0, 0]
		Branch {
		  Points		  [0, -150]
		  DstBlock		  "prev gear\nnumber"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "gear ratio1"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[0, 75]
		Branch {
		  DstBlock		  "shifting1"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 65]
		  Branch {
		    Points		    [0, 45]
		    DstBlock		    "Rate Limiter"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Goto4"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Line {
	      SrcBlock		      "prev gear\nnumber"
	      SrcPort		      1
	      Points		      [-30, 0]
	      Branch {
		Points			[-240, 0; 0, 205]
		Branch {
		  DstBlock		  "allow downshift?"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, -170]
		  Branch {
		    Points		    [0, 75]
		    Branch {
		    DstBlock		    "allow upshift?"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 145]
		    DstBlock		    "downshift \ncommand"
		    DstPort		    1
		    }
		  }
		  Branch {
		    Points		    [10, 0]
		    DstBlock		    "upshift\n command"
		    DstPort		    1
		  }
		}
	      }
	      Branch {
		Points			[0, 140]
		DstBlock		"current\ngear\nnumber"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch2"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "prev.\nPout/Pin"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"allow upshift?"
		DstPort			4
	      }
	      Branch {
		Points			[0, -90]
		DstBlock		"~gb_trq_in_r"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      Points		      [0, -75]
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gb_spd_out_r"
	      SrcPort		      1
	      Points		      [60, 0]
	      Branch {
		Points			[0, -155]
		DstBlock		"allow upshift?"
		DstPort			3
	      }
	      Branch {
		DstBlock		"gb_spd_in_r"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "gb_trq_out_r"
	      SrcPort		      1
	      Points		      [60, 0]
	      Branch {
		Points			[0, 80]
		DstBlock		"allow upshift?"
		DstPort			2
	      }
	      Branch {
		DstBlock		"~gb_trq_in_r"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "prev gear\nratio"
	      SrcPort		      1
	      Points		      [-75, 0; 0, -40]
	      Branch {
		Points			[0, -235]
		DstBlock		"~gb_trq_in_r"
		DstPort			3
	      }
	      Branch {
		DstBlock		"gb_spd_in_r"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "gear ratio"
	      SrcPort		      1
	      DstBlock		      "prev gear\nratio"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Rate Limiter"
	      SrcPort		      1
	      DstBlock		      "gear ratio"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "load=T/\n(maxT\nat spd)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "~gb_trq_in_r"
	      SrcPort		      1
	      DstBlock		      "Product2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "tires are at\ntraction limit"
	      SrcPort		      1
	      Points		      [230, 0; 0, 65]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		Points			[20, 0]
		DstBlock		"upshift\n command"
		DstPort			2
	      }
	      Branch {
		Points			[0, 220]
		DstBlock		"downshift \ncommand"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "upshift\n command"
	      SrcPort		      1
	      Points		      [50, 0]
	      DstBlock		      "Switch2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "allow upshift?"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gearbox speed\nestimator"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		Points			[10, 0]
		Branch {
		  Points		  [0, -80; -145, 0]
		  DstBlock		  "engine\ntorque\ncapability"
		  DstPort		  1
		}
		Branch {
		  Points		  [30, 0]
		  Branch {
		    Points		    [0, -230]
		    DstBlock		    "upshift\n command"
		    DstPort		    3
		  }
		  Branch {
		    Points		    [30, 0]
		    DstBlock		    "downshift \ncommand"
		    DstPort		    3
		  }
		}
	      }
	      Branch {
		Points			[0, 15]
		DstBlock		"To WS"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant15"
	      SrcPort		      1
	      DstBlock		      "Switch4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From4"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Switch4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Switch4"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From2"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From3"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch4"
	      SrcPort		      1
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "gear ratio, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant14"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From <logic>2"
	      SrcPort		      1
	      DstBlock		      "Speed Dependent Shifting"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      1
	      DstBlock		      "Goto"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      2
	      DstBlock		      "Goto1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      Points		      [45, 0]
	      DstBlock		      "shifting, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch3"
	      SrcPort		      1
	      DstBlock		      "gear number, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "shifting1"
	      SrcPort		      1
	      DstBlock		      "Goto6"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gear ratio1"
	      SrcPort		      1
	      DstBlock		      "Goto5"
	      DstPort		      1
	    }
	    Annotation {
	      SID		      "5037"
	      Name		      "default gear number\ncalculation"
	      Position		      [889, 374]
	    }
	    Annotation {
	      SID		      "5038"
	      Name		      "default shifting\ncalculation"
	      Position		      [888, 301]
	    }
	    Annotation {
	      SID		      "5039"
	      Name		      "default gear ratio\ncalculation"
	      Position		      [887, 164]
	    }
	    Annotation {
	      SID		      "5040"
	      Name		      "local GOTO blocks:"
	      Position		      [887, 127]
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "sim stop\nsubsystem"
	  SID			  "5041"
	  Ports			  []
	  Position		  [40, 20, 70, 70]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/sim stop\nsubsystem"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  Outport
	  Name			  "clutch\nstate"
	  SID			  "5042"
	  Position		  [780, 273, 810, 287]
	  IconDisplay		  "Port number"
	}
	Line {
	  SrcBlock		  "From <ess>"
	  SrcPort		  1
	  Points		  [0, 5]
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <mc>"
	  SrcPort		  1
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <mc>1"
	  SrcPort		  1
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "motor controller\nlogic"
	  SrcPort		  1
	  DstBlock		  "Goto <mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <mc>3"
	  SrcPort		  1
	  Points		  [30, 0]
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "engine on\n(balanced parallel hybrid)"
	  SrcPort		  3
	  DstBlock		  "Goto <fc><mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <fc>"
	  SrcPort		  1
	  DstBlock		  "engine on\n(balanced parallel hybrid)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "engine on\n(balanced parallel hybrid)"
	  SrcPort		  2
	  DstBlock		  "Goto <fc>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <fc>1"
	  SrcPort		  1
	  Points		  [0, -20]
	  DstBlock		  "engine on\n(balanced parallel hybrid)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "From <wh>6"
	  SrcPort		  1
	  Points		  [0, -20]
	  DstBlock		  "engine on\n(balanced parallel hybrid)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <gb>5"
	  SrcPort		  1
	  Points		  [0, 5]
	  DstBlock		  "engine on\n(balanced parallel hybrid)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <gb>7"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "engine on\n(balanced parallel hybrid)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "engine on\n(balanced parallel hybrid)"
	  SrcPort		  1
	  DstBlock		  "Goto <fc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "parallel clutch\ncontrol"
	  SrcPort		  1
	  Points		  [20, 0]
	  Branch {
	    DstBlock		    "Goto <sdo>"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "clutch\nstate"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "From <mc>2"
	  SrcPort		  1
	  Points		  [45, 0]
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>6"
	  SrcPort		  1
	  Points		  [30, 0]
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <gb>4"
	  SrcPort		  1
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <gb>8"
	  SrcPort		  1
	  Points		  [25, 0]
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <gb>3"
	  SrcPort		  1
	  Points		  [0, -5]
	  DstBlock		  "pre-TX parallel\ngearbox control"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From<gb>"
	  SrcPort		  1
	  Points		  [5, 0]
	  DstBlock		  "pre-TX parallel\ngearbox control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>1"
	  SrcPort		  1
	  Points		  [5, 0]
	  DstBlock		  "pre-TX parallel\ngearbox control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <gb>2"
	  SrcPort		  1
	  DstBlock		  "pre-TX parallel\ngearbox control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  2
	  Points		  [130, 0]
	  Branch {
	    DstBlock		    "Sum"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -45]
	    DstBlock		    "Goto <wh>8"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  1
	  Points		  [0, 5; 5, 0]
	  Branch {
	    DstBlock		    "braking strategy"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [190, 0]
	    Branch {
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Branch {
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  1
	  Points		  [0, -5]
	  DstBlock		  "Goto <wh>5"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <veh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  2
	  Points		  [0, 5]
	  DstBlock		  "Goto <wh>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  3
	  Points		  [0, 15]
	  DstBlock		  "Goto <wh>2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>4"
	  SrcPort		  1
	  DstBlock		  "braking strategy"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>1"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>2"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <wh>3"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From<wh>4"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <wh>5"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>7"
	  SrcPort		  1
	  Points		  [60, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Relational\nOperator"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <wh>8"
	  SrcPort		  1
	  DstBlock		  "Relational\nOperator"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "pre-TX parallel\ngearbox control"
	  SrcPort		  1
	  DstBlock		  "Goto"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "pre-TX parallel\ngearbox control"
	  SrcPort		  2
	  DstBlock		  "Goto <gb>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "pre-TX parallel\ngearbox control"
	  SrcPort		  3
	  DstBlock		  "Goto <gb>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  4
	  Points		  [5, 0]
	  DstBlock		  "Goto <wh>6"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  5
	  DstBlock		  "Goto <wh>7"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Ground"
	  SrcPort		  1
	  Points		  [15, 0; 0, -50]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  6
	}
	Annotation {
	  SID			  "5043"
	  Name			  "force\nrequired (N)"
	  Position		  [213, 279]
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "<vc> par cvt"
      SID		      "312"
      Ports		      [0, 1]
      Position		      [105, 239, 170, 291]
      BackgroundColor	      "yellow"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_vc.jpg'))\n"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"<vc> par cvt"
	Location		[1, 228, 813, 898]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"93"
	Block {
	  BlockType		  Constant
	  Name			  "Constant2"
	  SID			  "5044"
	  Position		  [640, 40, 665, 60]
	  Value			  "0"
	}
	Block {
	  BlockType		  From
	  Name			  "From <ess>"
	  SID			  "5045"
	  Position		  [570, 95, 665, 115]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "bus_voltage"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>"
	  SID			  "5046"
	  Position		  [565, 502, 660, 518]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_spd_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>1"
	  SID			  "5047"
	  Position		  [570, 572, 665, 588]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "clutch_state"
	}
	Block {
	  BlockType		  From
	  Name			  "From <fc>2"
	  SID			  "5048"
	  Position		  [570, 372, 665, 388]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "engine_on"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>1"
	  SID			  "5049"
	  Position		  [210, 66, 300, 84]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>2"
	  SID			  "5050"
	  Position		  [205, 101, 300, 119]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "eta_gb"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>3"
	  SID			  "5051"
	  Position		  [205, 135, 300, 155]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "slip_limited"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>4"
	  SID			  "5052"
	  Position		  [570, 306, 665, 324]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>5"
	  SID			  "5053"
	  Position		  [565, 482, 660, 498]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>6"
	  SID			  "5054"
	  Position		  [570, 271, 665, 289]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>7"
	  SID			  "5055"
	  Position		  [580, 196, 675, 214]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>8"
	  SID			  "5056"
	  Position		  [565, 446, 660, 464]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>9"
	  SID			  "5057"
	  Position		  [570, 352, 665, 368]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>"
	  SID			  "5058"
	  Position		  [570, 130, 665, 150]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "P_mc_in_1lim"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>1"
	  SID			  "5059"
	  Position		  [575, 159, 665, 181]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_mc_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <veh>"
	  SID			  "5060"
	  Position		  [40, 327, 115, 343]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_prev"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>"
	  SID			  "5061"
	  Position		  [40, 360, 100, 380]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>1"
	  SID			  "5062"
	  Position		  [40, 291, 125, 309]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>2"
	  SID			  "5063"
	  Position		  [180, 472, 290, 488]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_drivetrain_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>3"
	  SID			  "5064"
	  Position		  [185, 506, 285, 524]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_wheel_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>4"
	  SID			  "5065"
	  Position		  [570, 546, 655, 564]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>5"
	  SID			  "5066"
	  Position		  [165, 561, 285, 579]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_rear_brake"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>6"
	  SID			  "5067"
	  Position		  [180, 435, 240, 455]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>7"
	  SID			  "5068"
	  Position		  [300, 305, 360, 325]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>8"
	  SID			  "5069"
	  Position		  [50, 216, 135, 234]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From<gb>"
	  SID			  "5070"
	  Position		  [210, 31, 300, 49]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From<wh>4"
	  SID			  "5071"
	  Position		  [180, 531, 295, 549]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_front_brake"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>"
	  SID			  "5072"
	  Position		  [785, 465, 850, 485]
	  NamePlacement		  "alternate"
	  GotoTag		  "engine_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>1"
	  SID			  "5073"
	  Position		  [780, 500, 860, 520]
	  GotoTag		  "spd_command"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc><mc>"
	  SID			  "5074"
	  Position		  [795, 536, 845, 554]
	  GotoTag		  "key_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>"
	  SID			  "5075"
	  Position		  [405, 85, 495, 105]
	  GotoTag		  "gear_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>1"
	  SID			  "5076"
	  Position		  [700, 41, 780, 59]
	  NamePlacement		  "alternate"
	  GotoTag		  "shifting"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <mc>"
	  SID			  "5077"
	  Position		  [755, 145, 845, 165]
	  GotoTag		  "P_mc_in_r"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>"
	  SID			  "5078"
	  Position		  [775, 291, 845, 309]
	  NamePlacement		  "alternate"
	  GotoTag		  "clutch_state"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>1"
	  SID			  "5079"
	  Position		  [445, 301, 530, 319]
	  GotoTag		  "slip_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>"
	  SID			  "5080"
	  Position		  [440, 250, 525, 270]
	  NamePlacement		  "alternate"
	  GotoTag		  "F_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>1"
	  SID			  "5081"
	  Position		  [195, 309, 285, 331]
	  GotoTag		  "v_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>2"
	  SID			  "5082"
	  Position		  [265, 336, 355, 354]
	  GotoTag		  "wt_front_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>3"
	  SID			  "5083"
	  Position		  [380, 476, 465, 494]
	  GotoTag		  "F_front_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>4"
	  SID			  "5084"
	  Position		  [380, 539, 465, 561]
	  GotoTag		  "F_rear_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>5"
	  SID			  "5085"
	  Position		  [240, 215, 350, 235]
	  GotoTag		  "F_front_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>6"
	  SID			  "5086"
	  Position		  [205, 376, 295, 394]
	  GotoTag		  "wt_rear_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>7"
	  SID			  "5087"
	  Position		  [200, 406, 290, 424]
	  GotoTag		  "front_traction_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>8"
	  SID			  "5088"
	  Position		  [405, 185, 515, 205]
	  GotoTag		  "F_rear_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Ground
	  Name			  "Ground"
	  SID			  "5089"
	  Position		  [275, 600, 295, 620]
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator"
	  SID			  "5090"
	  Ports			  [2, 1]
	  Position		  [390, 292, 420, 323]
	  Operator		  "~="
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  SID			  "5091"
	  Ports			  [2, 1]
	  Position		  [390, 242, 420, 273]
	  Inputs		  "-+"
	}
	Block {
	  BlockType		  Reference
	  Name			  "braking strategy"
	  SID			  "5092"
	  Ports			  [2, 2]
	  Position		  [195, 212, 225, 263]
	  NamePlacement		  "alternate"
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/braking strategy"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "config traction control"
	  SID			  "5093"
	  Ports			  [3, 5]
	  Position		  [140, 279, 175, 381]
	  BackgroundColor	  "darkGreen"
	  AttributesFormatString  "%<BlockChoice>"
	  ShowPortLabels	  "none"
	  BlockChoice		  "traction control 2 axle"
	  TemplateBlock		  "lib_controls/SubSystem/config traction control"
	  MemberBlocks		  "traction control 2 axle,traction control J2452 2 axle"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "config traction control"
	    Location		    [148, 182, 646, 482]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    SIDHighWatermark	    "6898"
	    Block {
	      BlockType		      Inport
	      Name		      "time-average\nvehicle speed\n req'd (m/s)"
	      SID		      "5093::706"
	      Position		      [20, 40, 40, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SID		      "5093::707"
	      Position		      [20, 80, 40, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "total tractive\nforce req'd\n(N)"
	      SID		      "5093::708"
	      Position		      [20, 120, 40, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "traction control\n2 axle"
	      SID		      "5093::709"
	      Ports		      [3, 5]
	      Position		      [100, 40, 140, 80]
	      BackgroundColor	      "darkGreen"
	      LibraryVersion	      "1.479"
	      SourceBlock	      "lib_controls/SubSystem/traction control 2 axle"
	      SourceType	      "SubSystem"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd force\n(N)"
	      SID		      "5093::710"
	      Position		      [200, 40, 220, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd speed\n(m/s)"
	      SID		      "5093::711"
	      Position		      [200, 80, 220, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nfront axle\n(N)"
	      SID		      "5093::712"
	      Position		      [200, 120, 220, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nrear axle\n(N)"
	      SID		      "5093::713"
	      Position		      [200, 160, 220, 180]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "front/total \ntraction ratio"
	      SID		      "5093::714"
	      Position		      [200, 200, 220, 220]
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "time-average\nvehicle speed\n req'd (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "total tractive\nforce req'd\n(N)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      1
	      DstBlock		      "req'd force\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      2
	      DstBlock		      "req'd speed\n(m/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      3
	      DstBlock		      "weight on\nfront axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      4
	      DstBlock		      "weight on\nrear axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      5
	      DstBlock		      "front/total \ntraction ratio"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "cvt control"
	  SID			  "5094"
	  Ports			  [4, 1]
	  Position		  [325, 26, 360, 159]
	  BackgroundColor	  "red"
	  FontName		  "Arial"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "cvt control"
	    Location		    [2, 74, 927, 502]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "81"
	    Block {
	      BlockType		      Inport
	      Name		      "cvt_trq_out_r"
	      SID		      "5095"
	      Position		      [35, 85, 55, 105]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "cvt_spd_out_r"
	      SID		      "5096"
	      Position		      [25, 180, 45, 200]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "prev.\nPout/Pin"
	      SID		      "5097"
	      Position		      [90, 105, 110, 125]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "tires are at\ntraction limit"
	      SID		      "5098"
	      Position		      [50, 270, 70, 290]
	      FontName		      "Arial"
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "5099"
	      Ports		      []
	      Position		      [815, 205, 871, 245]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[336, 545, 670, 719]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "5100"
		  Name			  "This CVT control block determines the \noperating mode of the vehicle\nand the best gear ratio for that "
		  "operating mode.  \nFor more info on the operating mode selection see \nblock notes in mode selector.\n\nThe gear r"
		  "atio is based on the pwr required and an \nIdeal Operating Line for each mode.  This IOL typically\nputs the compo"
		  "nent in its most efficient operating point\n for the given power request.\n"
		  Position		  [147, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "5101"
	      Position		      [105, 215, 135, 235]
	      Value		      "eps"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "5102"
	      Position		      [140, 155, 170, 175]
	      BlockMirror	      on
	      Value		      "eps"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "5103"
	      Position		      [420, 255, 450, 275]
	      Value		      "3"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>3"
	      SID		      "5104"
	      Position		      [245, 65, 330, 85]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <vc>,<cs>"
	      SID		      "5105"
	      Position		      [570, 41, 650, 59]
	      GotoTag		      "mode"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Mode Selector"
	      SID		      "5106"
	      Ports		      [3, 1]
	      Position		      [380, 77, 445, 133]
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"Mode Selector"
		Location		[111, 173, 808, 503]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "SOC"
		  SID			  "5107"
		  Position		  [35, 23, 65, 37]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "trq req"
		  SID			  "5108"
		  Position		  [55, 78, 85, 92]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "pwr req"
		  SID			  "5109"
		  Position		  [60, 178, 90, 192]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Fcn
		  Name			  "1=> motor regen\n2=> motor only\n3=> engine only\n4=> engine and motor"
		  SID			  "5110"
		  Position		  [365, 115, 425, 145]
		  Expr			  "u[2]*1+u[1]*u[4]*!u[2]*2+((!u[1]*!u[2]+!u[3]*!u[4])>0)*3+u[1]*u[3]*4"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "5111"
		  Ports			  []
		  Position		  [570, 35, 626, 75]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [271, 245, 588, 489]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "5112"
		    Name		    "This block determines the operating mode of the parallel\nhybrid vehicle equipped with a CVT:\nMode 1"
		    ": motor only regen \nif trq request is negative\nMode 2: motor only driving \nif soc is greater than lo soc \nan"
		    "d \npwr req is less than min engine pwr frac\nMode3: engine primary with motor assist \nif pwr request between m"
		    "in and max pwr fractions \nor \nif soc less than low soc\nMode4: engine and motor combined system\nif pwr req gr"
		    "eater than max engine pwr frac"
		    Position		    [147, 12]
		    VerticalAlignment	    "top"
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "5113"
		  Position		  [105, 90, 135, 110]
		  Value			  "-1e-3"
		}
		Block {
		  BlockType		  From
		  Name			  "From <vc>3"
		  SID			  "5114"
		  Position		  [340, 209, 440, 231]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "engine_on_cmd"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator8"
		  SID			  "5115"
		  Ports			  [2, 1]
		  Position		  [510, 211, 540, 244]
		  ShowName		  off
		  Operator		  "OR"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "5116"
		  Position		  [510, 255, 535, 285]
		  BlockMirror		  on
		  X0			  "cyc_mph(1,2)>0"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "5117"
		  Position		  [455, 204, 480, 236]
		  X0			  "cyc_mph(1,2)>0"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "5118"
		  Ports			  [4, 1]
		  Position		  [340, 75, 345, 180]
		  ShowName		  off
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "5119"
		  Ports			  [2, 1]
		  Position		  [115, 161, 145, 194]
		  Inputs		  "/*"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator5"
		  SID			  "5120"
		  Ports			  [2, 1]
		  Position		  [160, 77, 190, 108]
		  ShowName		  off
		  Operator		  "<"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator6"
		  SID			  "5121"
		  Ports			  [2, 1]
		  Position		  [280, 177, 310, 208]
		  ShowName		  off
		  Operator		  "<"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator7"
		  SID			  "5122"
		  Ports			  [2, 1]
		  Position		  [290, 122, 320, 153]
		  ShowName		  off
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator9"
		  SID			  "5123"
		  Ports			  [2, 1]
		  Position		  [210, 22, 240, 53]
		  ShowName		  off
		  Operator		  ">"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation1"
		  SID			  "5124"
		  Ports			  [1, 1]
		  Position		  [470, 90, 495, 110]
		  InputPortMap		  "u0"
		  FontName		  "Arial"
		  UpperLimit		  "4"
		  LowerLimit		  "1"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation2"
		  SID			  "5125"
		  Ports			  [1, 1]
		  Position		  [470, 145, 495, 165]
		  InputPortMap		  "u0"
		  FontName		  "Arial"
		  UpperLimit		  "2"
		  LowerLimit		  "1"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch4"
		  SID			  "5126"
		  Position		  [580, 109, 610, 151]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Constant
		  Name			  "cs_fc_max_pwr"
		  SID			  "5127"
		  Position		  [165, 140, 265, 160]
		  Value			  "cs_fc_max_pwr_frac"
		}
		Block {
		  BlockType		  Constant
		  Name			  "cs_fc_min_pwr"
		  SID			  "5128"
		  Position		  [160, 195, 260, 215]
		  Value			  "cs_fc_min_pwr_frac"
		}
		Block {
		  BlockType		  Constant
		  Name			  "cs_lo_soc"
		  SID			  "5129"
		  Position		  [90, 36, 165, 54]
		  Value			  "cs_lo_soc"
		}
		Block {
		  BlockType		  Constant
		  Name			  "fc_max_pwr"
		  SID			  "5130"
		  Position		  [55, 244, 330, 266]
		  BlockMirror		  on
		  Value			  "max(fc_map_spd*fc_spd_scale.*fc_max_trq*fc_trq_scale)"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Mode"
		  SID			  "5131"
		  Position		  [620, 153, 650, 167]
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "Saturation1"
		  SrcPort		  1
		  Points		  [65, 0]
		  DstBlock		  "Switch4"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "1=> motor regen\n2=> motor only\n3=> engine only\n4=> engine and motor"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    Points		    [0, 25]
		    DstBlock		    "Saturation2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -30]
		    DstBlock		    "Saturation1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Switch4"
		  SrcPort		  1
		  Points		  [0, 30]
		  DstBlock		  "Mode"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation2"
		  SrcPort		  1
		  Points		  [65, 0]
		  DstBlock		  "Switch4"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [0, -50]
		    DstBlock		    "Relational\nOperator7"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [110, 0]
		    DstBlock		    "Relational\nOperator6"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "1=> motor regen\n2=> motor only\n3=> engine only\n4=> engine and motor"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator6"
		  SrcPort		  1
		  Points		  [5, 0; 0, -30]
		  DstBlock		  "Mux"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Relational\nOperator7"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Relational\nOperator9"
		  SrcPort		  1
		  Points		  [80, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "cs_fc_max_pwr"
		  SrcPort		  1
		  Points		  [0, -5]
		  DstBlock		  "Relational\nOperator7"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "cs_fc_min_pwr"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator6"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "fc_max_pwr"
		  SrcPort		  1
		  Points		  [0, -85]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "pwr req"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Logical\nOperator8"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    Points		    [0, -100]
		    DstBlock		    "Switch4"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 40]
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator8"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "From <vc>3"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [-10, 0]
		  DstBlock		  "Logical\nOperator8"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator5"
		  SrcPort		  1
		  Points		  [90, 0; 0, 20]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator5"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "trq req"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator5"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "SOC"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator9"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "cs_lo_soc"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator9"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      SID		      "5132"
	      Ports		      [2, 1]
	      Position		      [195, 86, 225, 119]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      SID		      "5133"
	      Ports		      [2, 1]
	      Position		      [770, 111, 800, 144]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      SID		      "5134"
	      Ports		      [2, 1]
	      Position		      [255, 166, 285, 199]
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "5135"
	      Ports		      [2, 1]
	      Position		      [530, 242, 560, 273]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation1"
	      SID		      "5136"
	      Ports		      [1, 1]
	      Position		      [820, 120, 850, 140]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "max(gb_ratio)"
	      LowerLimit	      "min(gb_ratio)"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Speed Interp"
	      SID		      "5137"
	      Ports		      [2, 1]
	      Position		      [685, 91, 735, 144]
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"Speed Interp"
		Location		[503, 202, 845, 504]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Mode"
		  SID			  "5138"
		  Position		  [170, 15, 200, 30]
		  BlockRotation		  270
		  BlockMirror		  on
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "pwr req"
		  SID			  "5139"
		  Position		  [80, 13, 110, 27]
		  BlockMirror		  on
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  MultiPortSwitch
		  Name			  "Multiport\nSwitch"
		  SID			  "5140"
		  Ports			  [5, 1]
		  Position		  [215, 33, 230, 217]
		  Inputs		  "4"
		  zeroidx		  off
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation3"
		  SID			  "5141"
		  Ports			  [1, 1]
		  Position		  [55, 50, 85, 70]
		  InputPortMap		  "u0"
		  FontName		  "Arial"
		  UpperLimit		  "max(ptc_fc_mc_iol_pwr_vec)"
		  LowerLimit		  "min(ptc_fc_mc_iol_pwr_vec)"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation6"
		  SID			  "5142"
		  Ports			  [1, 1]
		  Position		  [55, 160, 85, 180]
		  InputPortMap		  "u0"
		  FontName		  "Arial"
		  UpperLimit		  "max(ptc_mc_iol_pwr_vec)"
		  LowerLimit		  "min(ptc_mc_iol_pwr_vec)"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation7"
		  SID			  "5143"
		  Ports			  [1, 1]
		  Position		  [55, 105, 85, 125]
		  InputPortMap		  "u0"
		  FontName		  "Arial"
		  UpperLimit		  "max(ptc_fc_iol_pwr_vec)"
		  LowerLimit		  "min(ptc_fc_iol_pwr_vec)"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation8"
		  SID			  "5144"
		  Ports			  [1, 1]
		  Position		  [55, 215, 85, 235]
		  InputPortMap		  "u0"
		  FontName		  "Arial"
		  UpperLimit		  "max(ptc_mc_gen_iol_pwr_vec)"
		  LowerLimit		  "min(ptc_mc_gen_iol_pwr_vec)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "desired engine spd\nengine and motor"
		  SID			  "5145"
		  Position		  [130, 48, 160, 72]
		  InputValues		  "ptc_fc_mc_iol_pwr_vec"
		  Table			  "ptc_fc_mc_iol_spd_vec"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "desired engine spd\nengine only"
		  SID			  "5146"
		  Position		  [130, 103, 160, 127]
		  InputValues		  "ptc_fc_iol_pwr_vec"
		  Table			  "ptc_fc_iol_spd_vec"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "desired motor spd\nmotor only"
		  SID			  "5147"
		  Position		  [130, 158, 160, 182]
		  InputValues		  "ptc_mc_iol_pwr_vec"
		  Table			  "ptc_mc_iol_spd_vec"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "desired motor spd\nmotor only regen"
		  SID			  "5148"
		  Position		  [130, 213, 160, 237]
		  InputValues		  "fliplr(ptc_mc_gen_iol_pwr_vec)"
		  Table			  "fliplr(ptc_mc_gen_iol_spd_vec)"
		}
		Block {
		  BlockType		  Outport
		  Name			  "input spd"
		  SID			  "5149"
		  Position		  [255, 118, 285, 132]
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "desired engine spd\nengine and motor"
		  SrcPort		  1
		  Points		  [10, 0; 0, 135]
		  DstBlock		  "Multiport\nSwitch"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "desired engine spd\nengine only"
		  SrcPort		  1
		  Points		  [20, 0; 0, 45]
		  DstBlock		  "Multiport\nSwitch"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "desired motor spd\nmotor only"
		  SrcPort		  1
		  Points		  [30, 0; 0, -45]
		  DstBlock		  "Multiport\nSwitch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "desired motor spd\nmotor only regen"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Multiport\nSwitch"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "pwr req"
		  SrcPort		  1
		  Points		  [-35, 0; 0, 40]
		  Branch {
		    Points		    [0, 55]
		    Branch {
		    Points		    [0, 55]
		    Branch {
		    DstBlock		    "Saturation8"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Saturation6"
		    DstPort		    1
		    }
		    }
		    Branch {
		    DstBlock		    "Saturation7"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "Saturation3"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Mode"
		  SrcPort		  1
		  Points		  [0, 20]
		  DstBlock		  "Multiport\nSwitch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Multiport\nSwitch"
		  SrcPort		  1
		  DstBlock		  "input spd"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation3"
		  SrcPort		  1
		  DstBlock		  "desired engine spd\nengine and motor"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation7"
		  SrcPort		  1
		  DstBlock		  "desired engine spd\nengine only"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation8"
		  SrcPort		  1
		  DstBlock		  "desired motor spd\nmotor only regen"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation6"
		  SrcPort		  1
		  DstBlock		  "desired motor spd\nmotor only"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      SID		      "5150"
	      Ports		      [2, 1]
	      Position		      [140, 107, 170, 138]
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum1"
	      SID		      "5151"
	      Ports		      [2, 1]
	      Position		      [550, 122, 580, 153]
	    }
	    Block {
	      BlockType		      Terminator
	      Name		      "Terminator"
	      SID		      "5152"
	      Position		      [105, 270, 125, 290]
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To Workspace1"
	      SID		      "5153"
	      Ports		      [1]
	      Position		      [685, 165, 745, 195]
	      VariableName	      "cvt_pwr_r"
	      MaxDataPoints	      "inf"
	      SampleTime	      "-1"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To Workspace57"
	      SID		      "5154"
	      Ports		      [1]
	      Position		      [485, 60, 555, 80]
	      VariableName	      "cs_mode"
	      MaxDataPoints	      "inf"
	      SampleTime	      "-1"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "chg pwr req'd\n(W)"
	      SID		      "5155"
	      Ports		      [0, 1]
	      Position		      [485, 115, 515, 145]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"chg pwr req'd\n(W)"
		Location		[312, 140, 791, 383]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "5156"
		  Position		  [50, 48, 195, 72]
		  Value			  "cs_charge_pwr*fc_trq_scale"
		}
		Block {
		  BlockType		  From
		  Name			  "From <ess>1"
		  SID			  "5157"
		  Position		  [65, 94, 110, 116]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "SOC"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Goal"
		  SID			  "5158"
		  Position		  [20, 134, 155, 156]
		  Value			  "(cs_lo_soc+cs_hi_soc)/2"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "5159"
		  Ports			  [2, 1]
		  Position		  [280, 52, 310, 83]
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  SID			  "5160"
		  Ports			  [2, 1]
		  Position		  [230, 142, 260, 173]
		  Inputs		  "*/"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Range"
		  SID			  "5161"
		  Position		  [20, 174, 155, 196]
		  Value			  "(cs_hi_soc-cs_lo_soc)/2"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation"
		  SID			  "5162"
		  Ports			  [1, 1]
		  Position		  [330, 55, 360, 85]
		  InputPortMap		  "u0"
		  UpperLimit		  "inf"
		  LowerLimit		  "-inf"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "5163"
		  Ports			  [2, 1]
		  Position		  [180, 97, 210, 128]
		  Inputs		  "-+"
		}
		Block {
		  BlockType		  Outport
		  Name			  "add'l pwr req'd\n(W)"
		  SID			  "5164"
		  Position		  [395, 63, 425, 77]
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "Saturation"
		  SrcPort		  1
		  DstBlock		  "add'l pwr req'd\n(W)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Saturation"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Range"
		  SrcPort		  1
		  Points		  [55, 0]
		  DstBlock		  "Product1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Goal"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <ess>1"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "mod pwr req"
	      SID		      "5165"
	      Ports		      [1, 1]
	      Position		      [320, 125, 350, 175]
	      BackgroundColor	      "red"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"mod pwr req"
		Location		[202, 74, 955, 744]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "In1"
		  SID			  "5166"
		  Position		  [210, 43, 240, 57]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  From
		  Name			  "From"
		  SID			  "5167"
		  Position		  [100, 70, 225, 100]
		  ShowName		  off
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "acc_mech_pwr_est"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "5168"
		  Ports			  [2, 1]
		  Position		  [265, 31, 280, 104]
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  SID			  "5169"
		  Position		  [305, 63, 335, 77]
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "In1"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "From"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "mode 3 ?"
	      SID		      "5170"
	      Position		      [625, 134, 655, 176]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "mode 3 or 4?"
	      SID		      "5171"
	      Position		      [480, 179, 510, 221]
	      Threshold		      "2.5"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "output\nspeed"
	      SID		      "5172"
	      Ports		      [2, 1]
	      Position		      [170, 202, 200, 233]
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "pulley ratio\n"
	      SID		      "5173"
	      Position		      [885, 120, 905, 140]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "From <vc>3"
	      SrcPort		      1
	      Points		      [0, 10]
	      DstBlock		      "Mode Selector"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, 30]
		DstBlock		"mode 3 or 4?"
		DstPort			3
	      }
	      Branch {
		Points			[0, -35]
		DstBlock		"mod pwr req"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "cvt_spd_out_r"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		DstBlock		"Product2"
		DstPort			2
	      }
	      Branch {
		Points			[0, 20]
		DstBlock		"output\nspeed"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		Points			[0, 70]
		DstBlock		"Product2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Mode Selector"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-10, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "prev.\nPout/Pin"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "cvt_trq_out_r"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "mode 3 ?"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"To Workspace1"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Speed Interp"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [35, 0; 0, -105]
	      DstBlock		      "mode 3 ?"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum1"
	      SrcPort		      1
	      DstBlock		      "mode 3 ?"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "mode 3 or 4?"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"Sum1"
		DstPort			2
	      }
	      Branch {
		Points			[50, 0; 0, -30]
		DstBlock		"mode 3 ?"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "chg pwr req'd\n(W)"
	      SrcPort		      1
	      DstBlock		      "Sum1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "mod pwr req"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"Mode Selector"
		DstPort			3
	      }
	      Branch {
		Points			[0, 35]
		DstBlock		"mode 3 or 4?"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Mode Selector"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"Speed Interp"
		DstPort			1
	      }
	      Branch {
		Points			[0, -35]
		Branch {
		  DstBlock		  "To Workspace57"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, -20]
		  DstBlock		  "Goto <vc>,<cs>"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[0, 95]
		Branch {
		  DstBlock		  "mode 3 or 4?"
		  DstPort		  2
		}
		Branch {
		  Points		  [0, 50]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "output\nspeed"
	      SrcPort		      1
	      Points		      [0, 90; 550, 0]
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Speed Interp"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation1"
	      SrcPort		      1
	      DstBlock		      "pulley ratio\n"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      DstBlock		      "Saturation1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "output\nspeed"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "tires are at\ntraction limit"
	      SrcPort		      1
	      DstBlock		      "Terminator"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "engine on\n(parallel CVT hybrid)"
	  SID			  "5174"
	  Ports			  [5, 3]
	  Position		  [705, 454, 740, 566]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "engine on\n(parallel CVT hybrid)"
	    Location		    [10, 112, 950, 1173]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "trq req'd\nout of clutch\n(N*m)"
	      SID		      "5175"
	      Position		      [25, 13, 55, 27]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "spd req'd\nout of clutch\n(N*m)1"
	      SID		      "5176"
	      Position		      [20, 113, 50, 127]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "fc_spd_out_r"
	      SID		      "5177"
	      Position		      [435, 573, 465, 587]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "v_ave_req"
	      SID		      "5178"
	      Position		      [170, 543, 200, 557]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "clutch\nstate"
	      SID		      "5179"
	      Position		      [115, 488, 145, 502]
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)"
	      SID		      "5180"
	      Position		      [155, 271, 215, 289]
	      ShowName		      off
	      Value		      "cs_lo_soc"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)1"
	      SID		      "5181"
	      Position		      [105, 376, 180, 394]
	      Value		      "cs_off_trq_frac"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)2"
	      SID		      "5182"
	      Position		      [790, 20, 830, 40]
	      Value		      "fc_on"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)4"
	      SID		      "5183"
	      Position		      [510, 322, 560, 338]
	      Value		      "fc_tstat"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "5184"
	      Position		      [100, 27, 135, 43]
	      ShowName		      off
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "5185"
	      Position		      [340, 87, 410, 103]
	      ShowName		      off
	      Value		      "vc_idle_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant10"
	      SID		      "5186"
	      Position		      [160, 232, 290, 248]
	      ShowName		      off
	      Value		      "cs_charge_deplete_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant11"
	      SID		      "5187"
	      Position		      [775, 75, 795, 95]
	      Value		      "2"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant12"
	      SID		      "5188"
	      Position		      [80, 66, 195, 84]
	      ShowName		      off
	      Value		      "cs_electric_decel_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "5189"
	      Position		      [110, 127, 180, 143]
	      ShowName		      off
	      Value		      "vc_idle_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "5190"
	      Position		      [420, 529, 500, 551]
	      ShowName		      off
	      Value		      "vc_launch_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "5191"
	      Position		      [170, 500, 190, 520]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "5192"
	      Position		      [220, 555, 240, 575]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "5193"
	      Position		      [115, 600, 135, 620]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant7"
	      SID		      "5194"
	      Position		      [670, 570, 690, 590]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant8"
	      SID		      "5195"
	      Position		      [230, 389, 260, 411]
	      Value		      "eps"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant9"
	      SID		      "5196"
	      Position		      [680, 390, 700, 410]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <ess>"
	      SID		      "5197"
	      Position		      [95, 254, 140, 276]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>1"
	      SID		      "5198"
	      Position		      [95, 148, 180, 172]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "v_req_limited"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>2"
	      SID		      "5199"
	      Position		      [575, 243, 645, 257]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "shifting"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>3"
	      SID		      "5200"
	      Position		      [385, 485, 470, 505]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_max_pwr"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>4"
	      SID		      "5201"
	      Position		      [690, 60, 760, 80]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "mode"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>5"
	      SID		      "5202"
	      Position		      [505, 286, 575, 304]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "fc_clt_tmp"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      SID		      "5203"
	      Position		      [575, 318, 605, 342]
	      Gain		      "vc_fc_warm_tmp_frac"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      SID		      "5204"
	      Position		      [400, 390, 430, 420]
	      Gain		      "tc_mc_to_fc_ratio"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <fc>1"
	      SID		      "5205"
	      Position		      [930, 220, 1015, 240]
	      GotoTag		      "engine_on_cmd"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator10"
	      SID		      "5206"
	      Ports		      [3, 1]
	      Position		      [350, 531, 380, 589]
	      ShowName		      off
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator11"
	      SID		      "5207"
	      Ports		      [1, 1]
	      Position		      [340, 235, 370, 255]
	      ShowName		      off
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator12"
	      SID		      "5208"
	      Ports		      [4, 1]
	      Position		      [890, 127, 915, 203]
	      ShowName		      off
	      Inputs		      "4"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator14"
	      SID		      "5209"
	      Ports		      [2, 1]
	      Position		      [675, 298, 705, 327]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator15"
	      SID		      "5210"
	      Ports		      [2, 1]
	      Position		      [510, 160, 535, 195]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator2"
	      SID		      "5211"
	      Ports		      [2, 1]
	      Position		      [430, 31, 450, 64]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator3"
	      SID		      "5212"
	      Ports		      [2, 1]
	      Position		      [370, 31, 400, 64]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator4"
	      SID		      "5213"
	      Ports		      [2, 1]
	      Position		      [290, 21, 310, 54]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator5"
	      SID		      "5214"
	      Ports		      [3, 1]
	      Position		      [575, 125, 605, 235]
	      ShowName		      off
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator6"
	      SID		      "5215"
	      Ports		      [3, 1]
	      Position		      [375, 322, 395, 358]
	      ShowName		      off
	      Operator		      "OR"
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator7"
	      SID		      "5216"
	      Ports		      [2, 1]
	      Position		      [670, 243, 700, 272]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator9"
	      SID		      "5217"
	      Ports		      [5, 1]
	      Position		      [815, 178, 845, 242]
	      ShowName		      off
	      Operator		      "OR"
	      Inputs		      "5"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "Look-Up Table"
	      SID		      "5218"
	      Position		      [195, 175, 225, 205]
	      InputValues	      "[cs_lo_soc cs_hi_soc cs_hi_soc+eps]"
	      Table		      "[cs_electric_launch_spd_lo cs_electric_launch_spd_hi cs_electric_launch_spd_hi]"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Manual \nSwitch"
	      SID		      "5219"
	      Ports		      [2, 1]
	      Position		      [740, 407, 770, 443]
	      LibraryVersion	      "1.260"
	      SourceBlock	      "simulink/Signal\nRouting/Manual Switch"
	      SourceType	      "Manual Switch"
	      sw		      "1"
	      action		      "0"
	      varsize		      off
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "5220"
	      Position		      [675, 340, 705, 370]
	      BlockMirror	      on
	      X0		      "cyc_mph(1,2)>0"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      SID		      "5221"
	      Ports		      [2, 1]
	      Position		      [225, 347, 255, 378]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      SID		      "5222"
	      Ports		      [2, 1]
	      Position		      [395, 442, 425, 473]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      SID		      "5223"
	      Ports		      [2, 1]
	      Position		      [520, 397, 550, 428]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "5224"
	      Ports		      [2, 1]
	      Position		      [265, 153, 290, 182]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "5225"
	      Ports		      [2, 1]
	      Position		      [280, 324, 305, 351]
	      ShowName		      off
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "5226"
	      Ports		      [2, 1]
	      Position		      [245, 257, 275, 288]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      SID		      "5227"
	      Ports		      [2, 1]
	      Position		      [280, 379, 305, 406]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator4"
	      SID		      "5228"
	      Ports		      [2, 1]
	      Position		      [705, 459, 730, 486]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator5"
	      SID		      "5229"
	      Ports		      [2, 1]
	      Position		      [625, 289, 650, 316]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator6"
	      SID		      "5230"
	      Ports		      [2, 1]
	      Position		      [825, 64, 850, 91]
	      ShowName		      off
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator7"
	      SID		      "5231"
	      Ports		      [2, 1]
	      Position		      [630, 409, 655, 436]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "5232"
	      Ports		      [1, 1]
	      Position		      [615, 545, 645, 575]
	      InputPortMap	      "u0"
	      UpperLimit	      "max(fc_map_spd)*fc_spd_scale"
	      LowerLimit	      "vc_idle_spd*vc_idle_bool"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Subsystem"
	      SID		      "5233"
	      Ports		      [1, 1]
	      Position		      [485, 442, 530, 478]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Running Average"
	      MaskDescription	      "Running Average"
	      MaskHelp		      "Output is the average of the last (Averaging Time) seconds of input."
	      MaskPromptString	      "Averaging Time Steps (#)"
	      MaskStyleString	      "edit"
	      MaskVariables	      "n=@1;"
	      MaskTunableValueString  "on"
	      MaskEnableString	      "on"
	      MaskVisibilityString    "on"
	      MaskToolTipString	      "on"
	      MaskDisplay	      "disp('Running\\nAverage')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "3"
	      System {
		Name			"Subsystem"
		Location		[137, 366, 771, 685]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "5234"
		  Position		  [50, 110, 70, 130]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "5235"
		  Position		  [75, 210, 95, 230]
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "5236"
		  Position		  [75, 274, 115, 296]
		  FontName		  "Arial"
		  Value			  "n"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "5237"
		  Position		  [380, 224, 420, 246]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  From
		  Name			  "From <vc>2"
		  SID			  "5238"
		  Position		  [120, 88, 190, 102]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "shifting"
		}
		Block {
		  BlockType		  Integrator
		  Name			  "Integrator"
		  SID			  "5239"
		  Ports			  [1, 1]
		  Position		  [295, 100, 315, 120]
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "5240"
		  Position		  [135, 235, 165, 265]
		  X0			  "-0.1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "5241"
		  Position		  [170, 30, 200, 60]
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "5242"
		  Ports			  [2, 1]
		  Position		  [505, 109, 525, 136]
		  Inputs		  "*/"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  SID			  "5243"
		  Ports			  [2, 1]
		  Position		  [210, 271, 230, 289]
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "5244"
		  Ports			  [2, 1]
		  Position		  [250, 187, 280, 218]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "5245"
		  Ports			  [2, 1]
		  Position		  [440, 105, 460, 125]
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "5246"
		  Ports			  [2, 1]
		  Position		  [170, 210, 190, 230]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|+-"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "5247"
		  Position		  [305, 190, 335, 220]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "5248"
		  Position		  [450, 190, 480, 220]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch2"
		  SID			  "5249"
		  Position		  [235, 95, 265, 125]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch3"
		  SID			  "5250"
		  Position		  [115, 30, 145, 60]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  VariableTransportDelay
		  Name			  "Variable\nTransport Delay"
		  SID			  "5251"
		  Ports			  [2, 1]
		  Position		  [375, 137, 405, 168]
		  MaximumDelay		  "n"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "5252"
		  Position		  [550, 115, 570, 135]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Variable\nTransport Delay"
		  SrcPort		  1
		  Points		  [15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Integrator"
		  SrcPort		  1
		  Points		  [25, 0]
		  Branch {
		    Points		    [0, 35]
		    DstBlock		    "Variable\nTransport Delay"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 30]
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -25]
		    Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -15; 175, 0]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [55, 0]
		    DstBlock		    "Switch"
		    DstPort		    3
		  }
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [0, -45]
		    DstBlock		    "Variable\nTransport Delay"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [80, 0]
		    Branch {
		    DstBlock		    "Switch1"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, -10]
		    DstBlock		    "Switch1"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [0, -20]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  Points		  [0, -75]
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Switch2"
		  SrcPort		  1
		  DstBlock		  "Integrator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch3"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  Points		  [25, 0]
		  Branch {
		    DstBlock		    "Switch2"
		    DstPort		    3
		  }
		  Branch {
		    DstBlock		    "Switch3"
		    DstPort		    3
		  }
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    DstBlock		    "Switch2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -30; -120, 0]
		    DstBlock		    "Switch3"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "From <vc>2"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    Points		    [0, 15]
		    DstBlock		    "Switch2"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, -15; -120, 0; 0, -35]
		    DstBlock		    "Switch3"
		    DstPort		    2
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "5253"
	      Position		      [535, 533, 565, 587]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "5254"
	      Position		      [740, 554, 765, 586]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch3"
	      SID		      "5255"
	      Position		      [390, 239, 420, 281]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch4"
	      SID		      "5256"
	      Position		      [435, 294, 465, 336]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "T>~0"
	      SID		      "5257"
	      Ports		      [2, 1]
	      Position		      [160, 12, 190, 43]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To Workspace"
	      SID		      "5258"
	      Ports		      [1]
	      Position		      [315, 181, 470, 199]
	      VariableName	      "cs_electric_launch_spd_probe"
	      MaxDataPoints	      "inf"
	      SampleTime	      "-1"
	      SaveFormat	      "Structure"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch\ndisengaged"
	      SID		      "5259"
	      Ports		      [2, 1]
	      Position		      [220, 487, 250, 518]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "key_on"
	      SID		      "5260"
	      Ports		      [0, 1]
	      Position		      [655, 114, 710, 146]
	      NamePlacement	      "alternate"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Repeating table"
	      MaskDescription	      "Repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table. Time values should be monotonically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "vc_key_on(:,1)|vc_key_on(:,2)"
	      Port {
		PortNumber		1
		Name			"ignition key is on"
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
	      }
	      System {
		Name			"key_on"
		Location		[5, 42, 410, 213]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "5261"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "5262"
		  Position		  [110, 60, 150, 80]
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "5263"
		  Position		  [210, 58, 250, 82]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "5264"
		  Position		  [285, 60, 305, 80]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  DstBlock		  "Fcn1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max_torque\n lookup"
	      SID		      "5265"
	      Position		      [105, 343, 135, 367]
	      NamePlacement	      "alternate"
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      Table		      "fc_max_trq*fc_trq_scale"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max_torque\n lookup1"
	      SID		      "5266"
	      Position		      [465, 393, 495, 417]
	      NamePlacement	      "alternate"
	      InputValues	      "mc_map_spd*mc_spd_scale"
	      Table		      "mc_max_trq*mc_trq_scale*mc_overtrq_factor"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "moving next\ntime"
	      SID		      "5267"
	      Ports		      [2, 1]
	      Position		      [165, 587, 195, 618]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "not\nmoving"
	      SID		      "5268"
	      Ports		      [2, 1]
	      Position		      [280, 542, 310, 573]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "repeated cycle:\n speed required at\nend of NEXT step"
	      SID		      "5269"
	      Ports		      [0, 1]
	      Position		      [45, 532, 80, 568]
	      FontName		      "Arial"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Forward looking repeating table"
	      MaskDescription	      "Forward looking repeating table.\nEnter values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table with a one time step forward offset. Time values should be monoto"
	      "nically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "cyc_mph(:,1)|cyc_mph(:,2)"
	      System {
		Name			"repeated cycle:\n speed required at\nend of NEXT step"
		Location		[57, 72, 432, 234]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "5270"
		  Position		  [45, 60, 65, 80]
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  SID			  "5271"
		  Position		  [110, 25, 150, 45]
		  ForegroundColor	  "green"
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  SID			  "5272"
		  Position		  [260, 33, 300, 57]
		  InputValues		  "t"
		  Table			  "y"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "5273"
		  Position		  [90, 85, 120, 115]
		  ForegroundColor	  "green"
		  X0			  "-0.1"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "5274"
		  Ports			  [2, 1]
		  Position		  [150, 62, 180, 93]
		  ForegroundColor	  "green"
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "5275"
		  Ports			  [2, 1]
		  Position		  [205, 26, 235, 59]
		  ForegroundColor	  "green"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "5276"
		  Position		  [335, 35, 355, 55]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0; 0, -15]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [0, -35]
		    DstBlock		    "Fcn1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "spd>set point"
	      SID		      "5277"
	      Ports		      [2, 1]
	      Position		      [235, 52, 265, 83]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "w>idle"
	      SID		      "5278"
	      Ports		      [2, 1]
	      Position		      [295, 102, 325, 133]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "engine on"
	      SID		      "5279"
	      Position		      [950, 158, 980, 172]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "spd command\n (rad/s)"
	      SID		      "5280"
	      Position		      [795, 563, 825, 577]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "key on"
	      SID		      "5281"
	      Position		      [815, 123, 845, 137]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator12"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"engine on"
		DstPort			1
	      }
	      Branch {
		Points			[0, 190]
		Branch {
		  Points		  [0, 175; -200, 0]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Branch {
		  DstBlock		  "Memory"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "(--)2"
	      SrcPort		      1
	      Points		      [40, 0]
	      DstBlock		      "Logical\nOperator12"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant11"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator6"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator6"
	      SrcPort		      1
	      Points		      [5, 0; 0, 75]
	      DstBlock		      "Logical\nOperator12"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "max_torque\n lookup"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "(--)1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, -15]
		DstBlock		"Product"
		DstPort			2
	      }
	      Branch {
		DstBlock		"Relational\nOperator3"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant8"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      Points		      [50, 0]
	      DstBlock		      "Logical\nOperator6"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator6"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Switch4"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch3"
	      SrcPort		      1
	      Points		      [70, 0]
	      DstBlock		      "Logical\nOperator15"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [95, 0]
	      DstBlock		      "w>idle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      DstBlock		      "T>~0"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <vc>2"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator7"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator7"
	      SrcPort		      1
	      Points		      [70, 0; 0, -60]
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "trq req'd\nout of clutch\n(N*m)"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"T>~0"
		DstPort			1
	      }
	      Branch {
		Points			[0, 310]
		Branch {
		  Points		  [0, 135]
		  DstBlock		  "Product2"
		  DstPort		  2
		}
		Branch {
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator3"
	      SrcPort		      1
	      Points		      [0, -10]
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "w>idle"
	      SrcPort		      1
	      Points		      [5, 0; 0, -65]
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "spd req'd\nout of clutch\n(N*m)1"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		Points			[0, 235]
		Branch {
		  DstBlock		  "max_torque\n lookup"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 95; 270, 0]
		  Branch {
		    DstBlock		    "Product2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -45]
		    DstBlock		    "Gain1"
		    DstPort		    1
		  }
		}
	      }
	      Branch {
		Points			[195, 0]
		DstBlock		"w>idle"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator5"
	      SrcPort		      1
	      Points		      [190, 0]
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator6"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [-15, 0; 0, -35]
	      Branch {
		DstBlock		"Logical\nOperator7"
		DstPort			2
	      }
	      Branch {
		DstBlock		"Logical\nOperator14"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator5"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator14"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <vc>5"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator14"
	      SrcPort		      1
	      Points		      [75, 0; 0, -105]
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "(--)4"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator2"
	      SrcPort		      1
	      Points		      [105, 0]
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator15"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch4"
	      SrcPort		      1
	      Points		      [30, 0; 0, -100]
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator15"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Look-Up Table"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			2
	      }
	      Branch {
		DstBlock		"To Workspace"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant10"
	      SrcPort		      1
	      Points		      [0, 20; 25, 0]
	      Branch {
		Points			[0, 40]
		Branch {
		  DstBlock		  "Switch4"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 15]
		  DstBlock		  "Switch4"
		  DstPort		  2
		}
	      }
	      Branch {
		DstBlock		"Switch3"
		DstPort			2
	      }
	      Branch {
		Points			[0, -15]
		DstBlock		"Logical\nOperator11"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		DstBlock		"Switch3"
		DstPort			3
	      }
	      Branch {
		Points			[0, 55]
		DstBlock		"Logical\nOperator6"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator11"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <ess>"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	      Branch {
		Points			[0, -75]
		DstBlock		"Look-Up Table"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "(--)"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      Name		      "ignition key is on"
	      Labels		      [0, 0]
	      SrcBlock		      "key_on"
	      SrcPort		      1
	      Points		      [85, 0]
	      Branch {
		DstBlock		"key on"
		DstPort			1
	      }
	      Branch {
		Points			[0, 45]
		DstBlock		"Logical\nOperator12"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "From <vc>4"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator6"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator9"
	      SrcPort		      1
	      Points		      [0, -15; 20, 0]
	      Branch {
		DstBlock		"Logical\nOperator12"
		DstPort			4
	      }
	      Branch {
		Points			[0, 35]
		DstBlock		"Goto <fc>1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "clutch\nstate"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "spd command\n (rad/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant7"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "v_ave_req"
	      SrcPort		      1
	      DstBlock		      "not\nmoving"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      DstBlock		      "not\nmoving"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "repeated cycle:\n speed required at\nend of NEXT step"
	      SrcPort		      1
	      Points		      [55, 0; 0, 45]
	      DstBlock		      "moving next\ntime"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      DstBlock		      "moving next\ntime"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\ndisengaged"
	      SrcPort		      1
	      Points		      [80, 0]
	      DstBlock		      "Logical\nOperator10"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "not\nmoving"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator10"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "moving next\ntime"
	      SrcPort		      1
	      Points		      [135, 0]
	      DstBlock		      "Logical\nOperator10"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator10"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "fc_spd_out_r"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <vc>3"
	      SrcPort		      1
	      Points		      [215, 0]
	      DstBlock		      "Relational\nOperator4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "Subsystem"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator4"
	      SrcPort		      1
	      Points		      [60, 0; 0, -255]
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "Constant9"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Manual \nSwitch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      Points		      [15, 0; 0, 15]
	      DstBlock		      "Relational\nOperator7"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "max_torque\n lookup1"
	      SrcPort		      1
	      DstBlock		      "Product3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"max_torque\n lookup1"
		DstPort			1
	      }
	      Branch {
		Points			[0, 15]
		DstBlock		"Product3"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Subsystem"
	      SrcPort		      1
	      Points		      [75, 0]
	      Branch {
		Points			[80, 0]
		DstBlock		"Relational\nOperator4"
		DstPort			1
	      }
	      Branch {
		Points			[0, -45]
		DstBlock		"Relational\nOperator7"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator7"
	      SrcPort		      1
	      Points		      [0, 10]
	      DstBlock		      "Manual \nSwitch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Manual \nSwitch"
	      SrcPort		      1
	      Points		      [25, 0]
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      5
	    }
	    Line {
	      SrcBlock		      "Constant12"
	      SrcPort		      1
	      DstBlock		      "spd>set point"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "spd>set point"
	      SrcPort		      1
	      Points		      [0, -25]
	      DstBlock		      "Logical\nOperator4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "T>~0"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator4"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <vc>1"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	      Branch {
		Points			[0, -100]
		DstBlock		"spd>set point"
		DstPort			1
	      }
	    }
	    Annotation {
	      SID		      "5282"
	      Name		      "engine not suppressed if \ness insufficient "
	      Position		      [820, 499]
	    }
	    Annotation {
	      SID		      "5283"
	      Name		      "engine not \nsuppressed for\nelectric launch"
	      Position		      [413, 147]
	    }
	    Annotation {
	      SID		      "5284"
	      Name		      "engine not shut off\n rather than idle"
	      Position		      [501, 72]
	    }
	    Annotation {
	      SID		      "5285"
	      Name		      "engine on if engine on \npreviously and engine \nnot warm"
	      Position		      [603, 374]
	    }
	    Annotation {
	      SID		      "5286"
	      Name		      "engine not shut \ndown during shifts"
	      Position		      [656, 217]
	    }
	    Annotation {
	      SID		      "5287"
	      Name		      "engine not suppressed\nif mc insufficient "
	      Position		      [860, 409]
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "front and rear\nbrake controller\n(achievable)"
	  SID			  "5288"
	  Ports			  [6, 2]
	  Position		  [325, 451, 360, 579]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/front and rear\nbrake controller\n(achievable)"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "motor controller\nlogic"
	  SID			  "5289"
	  Ports			  [4, 1]
	  Position		  [700, 95, 730, 215]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "motor controller\nlogic"
	    Location		    [81, 74, 763, 525]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "bus voltage"
	      SID		      "5290"
	      Position		      [40, 30, 60, 50]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd input\npower (W)"
	      SID		      "5291"
	      Position		      [40, 160, 60, 180]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd output\nspd (rad/s)"
	      SID		      "5292"
	      Position		      [40, 280, 60, 300]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "5293"
	      Position		      [40, 385, 60, 405]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs"
	      SID		      "5294"
	      Position		      [205, 123, 235, 147]
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs1"
	      SID		      "5295"
	      Position		      [105, 278, 135, 302]
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "5296"
	      Ports		      []
	      Position		      [590, 385, 646, 425]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[263, 139, 778, 219]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "5297"
		  Name			  "This block models a motor/controller's logic, modulating the power input requirement as follows:\n- enfo"
		  "rcing the maximum current limit of the motor/controller\n- shutting the motor off if the average speed over the ti"
		  "me step ==0\n- shutting the motor off if the transmission is shifting."
		  Position		  [257, 40]
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "5298"
	      Position		      [95, 79, 165, 101]
	      FontName		      "Arial"
	      Value		      "mc_max_crrnt"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "5299"
	      Position		      [140, 348, 175, 372]
	      FontName		      "Arial"
	      Value		      "0.001"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "5300"
	      Position		      [500, 232, 520, 258]
	      BlockMirror	      on
	      FontName		      "Arial"
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <sdo>"
	      SID		      "5301"
	      Position		      [555, 24, 645, 46]
	      GotoTag		      "mc_crrnt_limited"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "5302"
	      Ports		      [1, 1]
	      Position		      [434, 240, 466, 275]
	      BlockRotation	      270
	      NamePlacement	      "alternate"
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "5303"
	      Position		      [115, 25, 145, 55]
	      X0		      "ess_module_num*mean(ess_voc(1,:))"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      SID		      "5304"
	      Ports		      [2, 1]
	      Position		      [270, 37, 300, 68]
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      SID		      "5305"
	      Ports		      [2, 1]
	      Position		      [210, 36, 230, 54]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "5306"
	      Ports		      [2, 1]
	      Position		      [230, 282, 260, 313]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "5307"
	      Ports		      [2, 1]
	      Position		      [490, 17, 520, 48]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Sign"
	      SID		      "5308"
	      Ports		      [1, 1]
	      Position		      [270, 157, 300, 183]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Sign"
	      MaskDescription	      "y = sign(x)"
	      MaskHelp		      "Sign Function:\\n\\t\\t\\ty = 1 if x > 0\\n\\t\\t\\ty = 0 if x = 0\\n\\t\\t\\ty = -1 if x < 0"
	      MaskDisplay	      "plot(-50,-50,50,50,[-50,50],[0,0],[0,0],[-50,50],[-40,0],[-30,-30],[0,40],[30,30])"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Sign"
		Location		[159, 417, 467, 586]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "5309"
		  Position		  [35, 30, 55, 50]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "5310"
		  Position		  [65, 105, 85, 125]
		  Value			  "0"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "5311"
		  Ports			  [2, 1]
		  Position		  [140, 32, 170, 63]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "5312"
		  Ports			  [2, 1]
		  Position		  [140, 92, 170, 123]
		  Operator		  "<"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "5313"
		  Ports			  [2, 1]
		  Position		  [215, 64, 235, 91]
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "5314"
		  Position		  [265, 70, 285, 90]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  Points		  [10, 0; 0, 20]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  Points		  [10, 0; 0, -25]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    Points		    [0, -60]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    Points		    [0, 60]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "5315"
	      Position		      [495, 180, 525, 210]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "current-limited\npower"
	      SID		      "5316"
	      Ports		      [2, 1]
	      Position		      [365, 51, 385, 69]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "true if motor\nshould be\nshut down"
	      SID		      "5317"
	      Ports		      [2, 1]
	      Position		      [385, 292, 415, 323]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd input\npower (W)1"
	      SID		      "5318"
	      Position		      [590, 185, 610, 205]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      Points		      [290, 0; 0, -80]
	      DstBlock		      "true if motor\nshould be\nshut down"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [0, -40]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "true if motor\nshould be\nshut down"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "bus voltage"
	      SrcPort		      1
	      DstBlock		      "Memory"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [20, 0; 0, -40]
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "req'd input\npower (W)"
	      SrcPort		      1
	      Points		      [105, 0]
	      Branch {
		Points			[0, -35]
		DstBlock		"Abs"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Sign"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Abs"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sign"
	      SrcPort		      1
	      Points		      [20, 0; 0, -105]
	      DstBlock		      "current-limited\npower"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "req'd input\npower (W)1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "current-limited\npower"
	      SrcPort		      1
	      Points		      [60, 0; 0, 125]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"MinMax"
		DstPort			1
	      }
	      Branch {
		Points			[0, -20]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"current-limited\npower"
		DstPort			1
	      }
	      Branch {
		Points			[0, -15]
		DstBlock		"Relational\nOperator2"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Goto <sdo>"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "true if motor\nshould be\nshut down"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [10, 0; 0, -55]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "req'd output\nspd (rad/s)"
	      SrcPort		      1
	      DstBlock		      "Abs1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Abs1"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "parallel clutch\ncontrol"
	  SID			  "5319"
	  Ports			  [4, 1]
	  Position		  [700, 295, 735, 375]
	  ForegroundColor	  "gray"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "parallel clutch\ncontrol"
	    Location		    [95, 74, 1008, 696]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "5320"
	      Position		      [30, 18, 60, 32]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_in_r"
	      SID		      "5321"
	      Position		      [30, 58, 60, 72]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_in_r"
	      SID		      "5322"
	      Position		      [25, 168, 55, 182]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "engine on"
	      SID		      "5323"
	      Position		      [30, 388, 60, 402]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "5324"
	      Ports		      []
	      Position		      [835, 565, 891, 605]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[315, 744, 773, 944]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "5325"
		  Name			  "This clutch control block determines the clutch state given the req'd clutch output torque \nand speed ("
		  "labelled as gearbox input torque and speed), and the gear number history.\n                          conditions   "
		  "                                                                    clutch state\ngear is being shifted OR (trq <~"
		  " 0 AND (engine is                                     1 == disengaged\nclutched to avoid compression braking OR sp"
		  "d < idle))                                                              \n\n(trq >~ 0) AND (spd < launch speed) AN"
		  "D clutch                                       2 == slipping     \nwas not engaged during previous time step      "
		  "                                                           \n\nneither of above sets of conditions are met        "
		  "                                  3 == engaged\n\nBut the clutch is always disengaged when the engine is off or wa"
		  "s off within the past 0.5 s."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Clock
	      Name		      "Clock"
	      SID		      "5326"
	      Position		      [40, 535, 60, 555]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "5327"
	      Position		      [145, 83, 180, 107]
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "5328"
	      Position		      [145, 124, 225, 146]
	      Value		      "vc_clutch_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "5329"
	      Position		      [145, 189, 225, 211]
	      Value		      "vc_idle_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "5330"
	      Position		      [145, 255, 180, 275]
	      Value		      "1e-3"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "5331"
	      Position		      [145, 319, 225, 341]
	      Value		      "vc_launch_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "5332"
	      Position		      [570, 355, 605, 375]
	      BlockMirror	      on
	      Value		      "2.5"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "5333"
	      Position		      [790, 175, 810, 195]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      SID		      "5334"
	      Position		      [660, 110, 720, 140]
	      Expr		      "u[1]+2*u[2]*(1-u[1])*(1-u[3])+3*u[3]*(1-u[1])"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "5335"
	      Ports		      [2, 1]
	      Position		      [380, 67, 410, 98]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "5336"
	      Ports		      [2, 1]
	      Position		      [315, 127, 345, 158]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Manual Switch"
	      SID		      "5337"
	      Ports		      [2, 1]
	      Position		      [410, 387, 440, 423]
	      ForegroundColor	      "gray"
	      SourceBlock	      "simulink3/Nonlinear/Manual Switch"
	      SourceType	      "Manual Switch"
	      sw		      "1"
	      action		      "0"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "5338"
	      Position		      [570, 300, 600, 330]
	      BlockMirror	      on
	      X0		      "1+(2*(cyc_mph(1,2)>0))"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory1"
	      SID		      "5339"
	      Position		      [170, 415, 200, 445]
	      X0		      "cyc_mph(1,2)>0"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory2"
	      SID		      "5340"
	      Position		      [170, 565, 200, 595]
	      X0		      "-1"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "5341"
	      Ports		      [3, 1]
	      Position		      [590, 107, 625, 143]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "5342"
	      Ports		      [2, 1]
	      Position		      [300, 57, 330, 88]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "5343"
	      Ports		      [2, 1]
	      Position		      [260, 177, 290, 208]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "5344"
	      Ports		      [2, 1]
	      Position		      [260, 242, 290, 273]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      SID		      "5345"
	      Ports		      [2, 1]
	      Position		      [260, 307, 290, 338]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      SID		      "5346"
	      Ports		      [2, 1]
	      Position		      [235, 537, 265, 568]
	      Inputs		      "+-"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "5347"
	      Position		      [790, 120, 820, 150]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "5348"
	      Position		      [330, 400, 360, 430]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      TransportDelay
	      Name		      "Transport\nDelay"
	      SID		      "5349"
	      Ports		      [1, 1]
	      Position		      [170, 475, 200, 505]
	      DelayTime		      "0.2"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\ndisengaged"
	      SID		      "5350"
	      Ports		      [2, 1]
	      Position		      [450, 17, 480, 48]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nengaged"
	      SID		      "5351"
	      Ports		      [2, 1]
	      Position		      [520, 117, 550, 148]
	      Operator		      "NOR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping"
	      SID		      "5352"
	      Ports		      [3, 1]
	      Position		      [380, 254, 410, 286]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping1"
	      SID		      "5353"
	      Ports		      [2, 1]
	      Position		      [235, 386, 265, 419]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping2"
	      SID		      "5354"
	      Ports		      [2, 1]
	      Position		      [235, 466, 265, 499]
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch was NOT\nfully engaged\nduring last time step"
	      SID		      "5355"
	      Ports		      [2, 1]
	      Position		      [475, 305, 510, 340]
	      BlockMirror	      on
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "gearbox speed\nestimator"
	      SID		      "5356"
	      Ports		      [1, 1]
	      Position		      [80, 160, 110, 190]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"gearbox speed\nestimator"
		Location		[228, 213, 816, 722]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_in_r\nif no gear change"
		  SID			  "5357"
		  Position		  [45, 18, 75, 32]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "5358"
		  Ports			  []
		  Position		  [515, 345, 571, 385]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [497, 485, 832, 570]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "5359"
		    Name		    "The requested engine speed is replaced by an estimate of the\nengine's previous speed whenever the ve"
		    "hicle missed the trace\n by more than 1 mph on the last time step."
		    Position		    [167, 41]
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "5360"
		  Position		  [165, 240, 185, 260]
		  BlockMirror		  on
		  Value			  "eps"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "5361"
		  Position		  [315, 165, 335, 185]
		  BlockMirror		  on
		  Value			  "0"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "5362"
		  Position		  [230, 360, 250, 380]
		  BlockMirror		  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "5363"
		  Position		  [230, 460, 250, 480]
		  BlockMirror		  on
		  Value			  "0.11"
		}
		Block {
		  BlockType		  From
		  Name			  "From"
		  SID			  "5364"
		  Position		  [195, 40, 285, 70]
		  BlockMirror		  on
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "gb_spd_in_a"
		}
		Block {
		  BlockType		  From
		  Name			  "From <cyc>"
		  SID			  "5365"
		  Position		  [30, 304, 120, 336]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "cyc_mph_r"
		}
		Block {
		  BlockType		  From
		  Name			  "From <veh>"
		  SID			  "5366"
		  Position		  [30, 99, 85, 131]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "mpha"
		}
		Block {
		  BlockType		  From
		  Name			  "From <wh>/\ntire slip model (m/s)"
		  SID			  "5367"
		  Position		  [30, 184, 120, 216]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "veh_spd_a_rec"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  SID			  "5368"
		  Position		  [150, 97, 190, 133]
		  Gain			  "0.447"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical"
		  SID			  "5369"
		  Ports			  [2, 1]
		  Position		  [375, 317, 405, 348]
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "5370"
		  Position		  [370, 115, 400, 145]
		  X0			  "cyc_mph(1,2)*0.447/wh_radius*fd_ratio*gb_ratio(gb_num_init)"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "5371"
		  Position		  [310, 310, 340, 340]
		  X0			  "1"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "5372"
		  Ports			  [3, 1]
		  Position		  [215, 99, 245, 131]
		  Inputs		  "**/"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational"
		  SID			  "5373"
		  Ports			  [2, 1]
		  Position		  [225, 307, 255, 338]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational1"
		  SID			  "5374"
		  Ports			  [2, 1]
		  Position		  [225, 412, 255, 443]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "5375"
		  Ports			  [2, 1]
		  Position		  [160, 192, 190, 223]
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "5376"
		  Ports			  [2, 1]
		  Position		  [160, 297, 190, 328]
		  Inputs		  "-+"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "5377"
		  Position		  [310, 110, 340, 140]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "5378"
		  Position		  [445, 120, 475, 150]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "dt"
		  SID			  "5379"
		  Ports			  [0, 1]
		  Position		  [165, 408, 185, 432]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "dt"
		    Location		    [240, 561, 480, 665]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "5380"
		    Position		    [25, 25, 45, 45]
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "5381"
		    Position		    [75, 53, 105, 77]
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum4"
		    SID			    "5382"
		    Ports		    [2, 1]
		    Position		    [130, 27, 160, 58]
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "5383"
		    Position		    [185, 38, 215, 52]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Sum4"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Sum4"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Sum4"
		    DstPort		    1
		    }
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  SID			  "5384"
		  Position		  [545, 128, 575, 142]
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Product"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  Labels		  [1, 0]
		  SrcBlock		  "From <wh>/\ntire slip model (m/s)"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -25; 155, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [0, -5]
		  DstBlock		  "Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <cyc>"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <veh>"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    DstBlock		    "Gain"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 190]
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Relational"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gb_spd_in_r\nif no gear change"
		  SrcPort		  1
		  Points		  [350, 0]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "From"
		  SrcPort		  1
		  Points		  [0, 50]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational1"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Logical"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical"
		  SrcPort		  1
		  Points		  [10, 0; 0, -200]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "dt"
		  SrcPort		  1
		  DstBlock		  "Relational1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "clutch\nstate"
	      SID		      "5385"
	      Position		      [855, 128, 885, 142]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      Points		      [40, 0; 0, -55]
	      DstBlock		      "clutch\nslipping"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gearbox speed\nestimator"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, 140]
		DstBlock		"Relational\nOperator3"
		DstPort			1
	      }
	      Branch {
		Points			[105, 0; 0, 10]
		DstBlock		"Relational\nOperator1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "gb_spd_in_r"
	      SrcPort		      1
	      DstBlock		      "gearbox speed\nestimator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "Switch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory2"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Clock"
	      SrcPort		      1
	      Points		      [80, 0]
	      Branch {
		Points			[0, 35]
		DstBlock		"Memory2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Sum"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping2"
	      SrcPort		      1
	      Points		      [25, 0; 0, -60]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Transport\nDelay"
	      SrcPort		      1
	      DstBlock		      "clutch\nslipping2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping1"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "clutch\nslipping1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "engine on"
	      SrcPort		      1
	      Points		      [80, 0]
	      Branch {
		Points			[0, 35]
		Branch {
		  Points		  [0, 30]
		  Branch {
		    Points		    [75, 0]
		    DstBlock		    "clutch\nslipping2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 30]
		    DstBlock		    "Transport\nDelay"
		    DstPort		    1
		  }
		}
		Branch {
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
	      }
	      Branch {
		DstBlock		"clutch\nslipping1"
		DstPort			1
	      }
	      Branch {
		Points			[0, -20; 250, 0]
		DstBlock		"Manual Switch"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      DstBlock		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "clutch\nengaged"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "clutch\ndisengaged"
	      SrcPort		      1
	      Points		      [10, 0; 0, 40]
	      Branch {
		Points			[0, 50]
		DstBlock		"clutch\nengaged"
		DstPort			1
	      }
	      Branch {
		Points			[80, 0]
		DstBlock		"Mux"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "clutch\nslipping"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping"
	      SrcPort		      1
	      Points		      [80, 0; 0, -95]
	      Branch {
		Points			[0, -35]
		DstBlock		"clutch\nengaged"
		DstPort			2
	      }
	      Branch {
		Points			[80, 0]
		DstBlock		"Mux"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      Points		      [-30, 0; 0, -35]
	      DstBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch was NOT\nfully engaged\nduring last time step"
	      SrcPort		      1
	      Points		      [-120, 0; 0, -45]
	      DstBlock		      "clutch\nslipping"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [90, 0; 0, -15]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gb_trq_in_r"
	      SrcPort		      1
	      Points		      [70, 0]
	      Branch {
		Points			[0, 185]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      Points		      [15, 0; 0, -45]
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      Points		      [-15, 0; 0, -40]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "Manual Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Manual Switch"
	      SrcPort		      1
	      Points		      [315, 0; 0, -270]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Fcn:\n1 if clutch disengaged\n2 if clutch slipping\n3 if clutch engaged"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"clutch\nstate"
		DstPort			1
	      }
	      Branch {
		Points			[0, 180]
		DstBlock		"Memory"
		DstPort			1
	      }
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "sim stop\nsubsystem"
	  SID			  "5386"
	  Ports			  []
	  Position		  [45, 20, 75, 70]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/sim stop\nsubsystem"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  Outport
	  Name			  "clutch\nstate"
	  SID			  "5387"
	  Position		  [810, 328, 840, 342]
	  IconDisplay		  "Port number"
	}
	Line {
	  SrcBlock		  "engine on\n(parallel CVT hybrid)"
	  SrcPort		  2
	  DstBlock		  "Goto <fc>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <fc>"
	  SrcPort		  1
	  DstBlock		  "engine on\n(parallel CVT hybrid)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "engine on\n(parallel CVT hybrid)"
	  SrcPort		  3
	  DstBlock		  "Goto <fc><mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <fc>1"
	  SrcPort		  1
	  Points		  [0, -30]
	  DstBlock		  "engine on\n(parallel CVT hybrid)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "engine on\n(parallel CVT hybrid)"
	  SrcPort		  1
	  DstBlock		  "Goto <fc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>8"
	  SrcPort		  1
	  Points		  [0, 15]
	  DstBlock		  "engine on\n(parallel CVT hybrid)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>5"
	  SrcPort		  1
	  DstBlock		  "engine on\n(parallel CVT hybrid)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <wh>4"
	  SrcPort		  1
	  Points		  [0, -25]
	  DstBlock		  "engine on\n(parallel CVT hybrid)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "parallel clutch\ncontrol"
	  SrcPort		  1
	  Points		  [20, 0]
	  Branch {
	    DstBlock		    "Goto <sdo>"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "clutch\nstate"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "From <gb>6"
	  SrcPort		  1
	  Points		  [15, 0]
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <fc>2"
	  SrcPort		  1
	  Points		  [15, 0]
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <gb>4"
	  SrcPort		  1
	  Points		  [0, 10]
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <gb>9"
	  SrcPort		  1
	  Points		  [15, 0]
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "motor controller\nlogic"
	  SrcPort		  1
	  DstBlock		  "Goto <mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <mc>1"
	  SrcPort		  1
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <mc>"
	  SrcPort		  1
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <ess>"
	  SrcPort		  1
	  Points		  [0, 5]
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>7"
	  SrcPort		  1
	  Points		  [5, 0]
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "Constant2"
	  SrcPort		  1
	  DstBlock		  "Goto <gb>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From<gb>"
	  SrcPort		  1
	  DstBlock		  "cvt control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>2"
	  SrcPort		  1
	  DstBlock		  "cvt control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <gb>1"
	  SrcPort		  1
	  DstBlock		  "cvt control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <gb>3"
	  SrcPort		  1
	  DstBlock		  "cvt control"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "cvt control"
	  SrcPort		  1
	  DstBlock		  "Goto <gb>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  3
	  Points		  [0, 15]
	  DstBlock		  "Goto <wh>2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <veh>"
	  SrcPort		  1
	  Points		  [5, 0]
	  DstBlock		  "config traction control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>5"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  1
	  Points		  [0, 10]
	  Branch {
	    DstBlock		    "braking strategy"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [195, 0]
	    Branch {
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Branch {
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "From <wh>"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "config traction control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  2
	  Points		  [130, 0]
	  Branch {
	    DstBlock		    "Sum"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -55]
	    DstBlock		    "Goto <wh>8"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Relational\nOperator"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>7"
	  SrcPort		  1
	  DstBlock		  "Relational\nOperator"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <wh>1"
	  SrcPort		  1
	  Points		  [-5, 0]
	  DstBlock		  "config traction control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>8"
	  SrcPort		  1
	  DstBlock		  "braking strategy"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>5"
	  SrcPort		  1
	  Points		  [0, -5]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "From<wh>4"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <wh>3"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <wh>2"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>6"
	  SrcPort		  1
	  Points		  [65, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  4
	  Points		  [10, 0]
	  DstBlock		  "Goto <wh>6"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  5
	  Points		  [5, 0]
	  DstBlock		  "Goto <wh>7"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Ground"
	  SrcPort		  1
	  Points		  [0, -45]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  6
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "<vc> prius"
      SID		      "313"
      Ports		      []
      Position		      [110, 728, 167, 772]
      BackgroundColor	      "yellow"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_vc.jpg'))\n"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"<vc> prius"
	Location		[10, 112, 950, 1190]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"100"
	Block {
	  BlockType		  SubSystem
	  Name			  "Coordinated\n Controller"
	  SID			  "5388"
	  Ports			  [2, 2]
	  Position		  [630, 19, 670, 106]
	  FontName		  "Arial"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "Coordinated\n Controller"
	    Location		    [165, 237, 663, 530]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "(Trq and speed req'd\n from ring gear)\nNm, rad/s"
	      SID		      "5389"
	      Position		      [40, 30, 60, 50]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "soc"
	      SID		      "5390"
	      Position		      [25, 215, 45, 235]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "5391"
	      Ports		      []
	      Position		      [360, 240, 416, 280]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[229, 259, 687, 388]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "5392"
		  Name			  "Hybrid Main Control"
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      SID		      "5393"
	      Ports		      [1, 2]
	      Position		      [105, 22, 125, 58]
	      ShowName		      off
	      Outputs		      "2"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      SID		      "5394"
	      Ports		      [2, 1]
	      Position		      [195, 72, 225, 103]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To Workspace2"
	      SID		      "5395"
	      Ports		      [1]
	      Position		      [315, 23, 400, 37]
	      ShowName		      off
	      VariableName	      "pgr_pwr_out_r"
	      MaxDataPoints	      "inf"
	      SampleTime	      "-1"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "battery charge demand"
	      SID		      "5396"
	      Ports		      [1, 1]
	      Position		      [90, 210, 150, 240]
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"battery charge demand"
		Location		[139, 177, 804, 484]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "SOC"
		  SID			  "5397"
		  Position		  [80, 113, 110, 127]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  From
		  Name			  "From<ess>"
		  SID			  "5398"
		  Position		  [145, 188, 220, 212]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "bus_voltage"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "5399"
		  Position		  [270, 185, 300, 215]
		  X0			  "300"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product2"
		  SID			  "5400"
		  Ports			  [2, 1]
		  Position		  [360, 107, 390, 138]
		  ShowName		  off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "5401"
		  Ports			  [2, 1]
		  Position		  [150, 97, 180, 128]
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  ToWorkspace
		  Name			  "To Workspace2"
		  SID			  "5402"
		  Ports			  [1]
		  Position		  [550, 138, 635, 152]
		  ShowName		  off
		  VariableName		  "vc_p_ch_r"
		  MaxDataPoints		  "inf"
		  SampleTime		  "-1"
		}
		Block {
		  BlockType		  Gain
		  Name			  "curve fit"
		  SID			  "5403"
		  Position		  [200, 100, 235, 130]
		  Gain			  "88"
		  Port {
		    PortNumber		    1
		    Name		    "I"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		  }
		}
		Block {
		  BlockType		  Gain
		  Name			  "gen/mot.\neff."
		  SID			  "5404"
		  Position		  [455, 109, 490, 141]
		  Gain			  "1/0.85"
		}
		Block {
		  BlockType		  Constant
		  Name			  "target soc"
		  SID			  "5405"
		  Position		  [15, 12, 85, 38]
		  Value			  "cs_target_soc"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Pch"
		  SID			  "5406"
		  Position		  [585, 198, 615, 212]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "curve fit"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "target soc"
		  SrcPort		  1
		  Points		  [0, 80]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "SOC"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  Name			  "I"
		  SrcBlock		  "curve fit"
		  SrcPort		  1
		  DstBlock		  "Product2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gen/mot.\neff."
		  SrcPort		  1
		  Points		  [10, 0; 0, 80; 60, 0]
		  Branch {
		    Points		    [0, -30; -30, 0]
		    DstBlock		    "To Workspace2"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Pch"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Product2"
		  SrcPort		  1
		  DstBlock		  "gen/mot.\neff."
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "From<ess>"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [25, 0; 0, -70]
		  DstBlock		  "Product2"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "max engine\nefficiency point"
	      SID		      "5407"
	      Ports		      [3, 2]
	      Position		      [295, 71, 350, 169]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"max engine\nefficiency point"
		Location		[63, 115, 889, 575]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "pwr requested"
		  SID			  "5408"
		  Position		  [35, 90, 55, 110]
		  FontName		  "Arial"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "req ring\n speed(rad/s)"
		  SID			  "5409"
		  Position		  [65, 270, 85, 290]
		  FontName		  "Arial"
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "Pch"
		  SID			  "5410"
		  Position		  [25, 205, 45, 225]
		  FontName		  "Arial"
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "5411"
		  Position		  [765, 195, 785, 215]
		  ShowName		  off
		  Value			  "0"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "5412"
		  Position		  [770, 255, 790, 275]
		  ShowName		  off
		  Value			  "0"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto <fc>"
		  SID			  "5413"
		  Position		  [350, 60, 415, 80]
		  NamePlacement		  "alternate"
		  GotoTag		  "engine_on"
		  TagVisibility		  "global"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Max fc spd (rad/s)"
		  SID			  "5414"
		  Ports			  [1, 1]
		  Position		  [140, 254, 170, 306]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "Max fc spd (rad/s)"
		    Location		    [511, 357, 849, 467]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "mc spd"
		    SID			    "5415"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    "<fc max rpm"
		    SID			    "5416"
		    Ports		    [1, 1]
		    Position		    [185, 31, 215, 49]
		    InputPortMap	    "u0"
		    UpperLimit		    "4000*2*pi/60"
		    LowerLimit		    "0"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "f(gc max spd,veh spd)"
		    SID			    "5417"
		    Position		    [95, 25, 155, 55]
		    Expr		    "tx_pg_r/(tx_pg_r + tx_pg_s)*u + tx_pg_s/(tx_pg_r + tx_pg_s)*cs_max_gc_spd"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Max fc spd\nrad/s"
		    SID			    "5418"
		    Position		    [250, 33, 280, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "<fc max rpm"
		    SrcPort		    1
		    DstBlock		    "Max fc spd\nrad/s"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "mc spd"
		    SrcPort		    1
		    DstBlock		    "f(gc max spd,veh spd)"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "f(gc max spd,veh spd)"
		    SrcPort		    1
		    DstBlock		    "<fc max rpm"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Min fc spd(rad/s)"
		  SID			  "5419"
		  Ports			  [1, 1]
		  Position		  [140, 330, 170, 380]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "Min fc spd(rad/s)"
		    Location		    [319, 369, 760, 548]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "mc spd"
		    SID			    "5420"
		    Position		    [15, 88, 45, 102]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant2"
		    SID			    "5421"
		    Position		    [75, 39, 155, 61]
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    "vc_idle_spd"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant3"
		    SID			    "5422"
		    Position		    [195, 139, 230, 161]
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    MinMax
		    Name		    "MinMax1"
		    SID			    "5423"
		    Ports		    [2, 1]
		    Position		    [200, 72, 230, 103]
		    ShowName		    off
		    Function		    "max"
		    Inputs		    "2"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch2"
		    SID			    "5424"
		    Position		    [290, 95, 320, 125]
		    ShowName		    off
		    }
		    Block {
		    BlockType		    ToWorkspace
		    Name		    "To Workspace3"
		    SID			    "5425"
		    Ports		    [1]
		    Position		    [345, 34, 415, 46]
		    NamePlacement	    "alternate"
		    ShowName		    off
		    VariableName	    "fc_min_spd"
		    MaxDataPoints	    "inf"
		    SampleTime		    "-1"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "f(gc max spd,veh spd)"
		    SID			    "5426"
		    Position		    [80, 80, 140, 110]
		    Expr		    "tx_pg_r/(tx_pg_r + tx_pg_s)*u + tx_pg_s/(tx_pg_r + tx_pg_s)*cs_min_gc_spd"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "min fc spd\nrad/s"
		    SID			    "5427"
		    Position		    [355, 98, 385, 112]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Switch2"
		    SrcPort		    1
		    Points		    [0, -5; 10, 0]
		    Branch {
		    Points		    [-5, 0]
		    DstBlock		    "To Workspace3"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "min fc spd\nrad/s"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Constant3"
		    SrcPort		    1
		    Points		    [40, 0]
		    DstBlock		    "Switch2"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "MinMax1"
		    SrcPort		    1
		    Points		    [40, 0]
		    DstBlock		    "Switch2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant2"
		    SrcPort		    1
		    Points		    [25, 0]
		    DstBlock		    "MinMax1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "f(gc max spd,veh spd)"
		    SrcPort		    1
		    Points		    [30, 0]
		    Branch {
		    Points		    [0, 15]
		    DstBlock		    "Switch2"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "MinMax1"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "mc spd"
		    SrcPort		    1
		    DstBlock		    "f(gc max spd,veh spd)"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  MinMax
		  Name			  "MinMax1"
		  SID			  "5428"
		  Ports			  [2, 1]
		  Position		  [440, 217, 470, 248]
		  ShowName		  off
		  Function		  "max"
		  Inputs		  "2"
		}
		Block {
		  BlockType		  MinMax
		  Name			  "MinMax2"
		  SID			  "5429"
		  Ports			  [2, 1]
		  Position		  [570, 157, 600, 188]
		  ShowName		  off
		  Inputs		  "2"
		}
		Block {
		  BlockType		  MinMax
		  Name			  "MinMax3"
		  SID			  "5430"
		  Ports			  [2, 1]
		  Position		  [385, 207, 415, 238]
		  ShowName		  off
		  Inputs		  "2"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "5431"
		  Ports			  [2, 1]
		  Position		  [490, 147, 520, 178]
		  ShowName		  off
		  Inputs		  "*/"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  SID			  "5432"
		  Ports			  [2, 1]
		  Position		  [885, 336, 915, 369]
		  ShowName		  off
		  Inputs		  "**"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "5433"
		  Ports			  [2, 1]
		  Position		  [255, 176, 285, 209]
		  ShowName		  off
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "5434"
		  Position		  [815, 170, 845, 200]
		  ShowName		  off
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch2"
		  SID			  "5435"
		  Position		  [815, 225, 845, 255]
		  ShowName		  off
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Terminator
		  Name			  "Terminator"
		  SID			  "5436"
		  Position		  [295, 65, 315, 85]
		}
		Block {
		  BlockType		  ToWorkspace
		  Name			  "To Workspace2"
		  SID			  "5437"
		  Ports			  [1]
		  Position		  [320, 155, 410, 165]
		  NamePlacement		  "alternate"
		  ShowName		  off
		  VariableName		  "fc_pwr_out_r"
		  MaxDataPoints		  "inf"
		  SampleTime		  "-1"
		}
		Block {
		  BlockType		  ToWorkspace
		  Name			  "To Workspace3"
		  SID			  "5438"
		  Ports			  [1]
		  Position		  [860, 395, 950, 405]
		  NamePlacement		  "alternate"
		  ShowName		  off
		  VariableName		  "fc_pwr_out_r2"
		  MaxDataPoints		  "inf"
		  SampleTime		  "-1"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "at least\n idle speed"
		  SID			  "5439"
		  Ports			  [2, 2]
		  Position		  [695, 167, 725, 218]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "at least\n idle speed"
		    Location		    [448, 427, 886, 618]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "trq"
		    SID			    "5440"
		    Position		    [25, 23, 55, 37]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "spd"
		    SID			    "5441"
		    Position		    [20, 98, 50, 112]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant2"
		    SID			    "5442"
		    Position		    [30, 139, 110, 161]
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    "vc_idle_spd"
		    }
		    Block {
		    BlockType		    MinMax
		    Name		    "MinMax4"
		    SID			    "5443"
		    Ports		    [2, 1]
		    Position		    [145, 97, 175, 128]
		    ShowName		    off
		    Function		    "max"
		    Inputs		    "2"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    SID			    "5444"
		    Ports		    [2, 1]
		    Position		    [115, 42, 145, 73]
		    ShowName		    off
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product1"
		    SID			    "5445"
		    Ports		    [2, 1]
		    Position		    [200, 52, 230, 83]
		    ShowName		    off
		    Inputs		    "*/"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    SID			    "5446"
		    Ports		    [2, 1]
		    Position		    [200, 127, 230, 158]
		    Operator		    "~="
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "5447"
		    Position		    [275, 25, 305, 55]
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "trq1"
		    SID			    "5448"
		    Position		    [340, 33, 370, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "spd1"
		    SID			    "5449"
		    Position		    [340, 108, 370, 122]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Product1"
		    SrcPort		    1
		    Points		    [0, -20]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "Product1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "trq"
		    SrcPort		    1
		    Points		    [25, 0]
		    Branch {
		    Points		    [0, 20]
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "spd"
		    SrcPort		    1
		    Points		    [45, 0]
		    Branch {
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "MinMax4"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    DstBlock		    "trq1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    Points		    [0, -50; 25, 0]
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant2"
		    SrcPort		    1
		    Points		    [15, 0; 0, -5]
		    Branch {
		    Points		    [0, 5]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "MinMax4"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "MinMax4"
		    SrcPort		    1
		    Points		    [5, 0]
		    Branch {
		    Points		    [0, 0]
		    Branch {
		    DstBlock		    "Product1"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "spd1"
		    DstPort		    1
		    }
		    }
		    Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "cranking?"
		  SID			  "5450"
		  Ports			  [1, 1]
		  Position		  [180, 17, 210, 73]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "cranking?"
		    Location		    [174, 245, 787, 647]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "need engine on?"
		    SID			    "5451"
		    Position		    [40, 113, 70, 127]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "constant"
		    SID			    "5452"
		    Position		    [80, 246, 165, 274]
		    ShowName		    off
		    Value		    "cs_eng_min_spd"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "constant1"
		    SID			    "5453"
		    Position		    [60, 196, 145, 224]
		    ShowName		    off
		    Value		    "cs_eng_min_spd"
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "logical\n operator"
		    SID			    "5454"
		    Ports		    [2, 1]
		    Position		    [260, 139, 290, 186]
		    ShowName		    off
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "pwr"
		    SID			    "5455"
		    Ports		    [2, 1]
		    Position		    [200, 207, 230, 238]
		    Operator		    "<"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "cranking?"
		    SID			    "5456"
		    Position		    [455, 118, 485, 132]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "constant1"
		    SrcPort		    1
		    Points		    [35, 0]
		    DstBlock		    "pwr"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "constant"
		    SrcPort		    1
		    Points		    [0, -30]
		    DstBlock		    "pwr"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "pwr"
		    SrcPort		    1
		    Points		    [10, 0]
		    DstBlock		    "logical\n operator"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "need engine on?"
		    SrcPort		    1
		    Points		    [30, 0; 0, 30]
		    DstBlock		    "logical\n operator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "logical\n operator"
		    SrcPort		    1
		    Points		    [115, 0; 0, -40]
		    DstBlock		    "cranking?"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "fuel on?"
		  SID			  "5457"
		  Ports			  [2, 1]
		  Position		  [245, 45, 275, 100]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "fuel on?"
		    Location		    [164, 253, 777, 655]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "cranking?"
		    SID			    "5458"
		    Position		    [40, 78, 70, 92]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "need engine on?1"
		    SID			    "5459"
		    Position		    [50, 223, 80, 237]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "logical\n operator"
		    SID			    "5460"
		    Ports		    [2, 1]
		    Position		    [225, 164, 255, 211]
		    ShowName		    off
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "logical\noperator1"
		    SID			    "5461"
		    Ports		    [1, 1]
		    Position		    [170, 158, 200, 192]
		    ShowName		    off
		    Operator		    "NOT"
		    Inputs		    "1"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "fuel on? "
		    SID			    "5462"
		    Position		    [480, 138, 510, 152]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "logical\n operator"
		    SrcPort		    1
		    Points		    [205, 0]
		    DstBlock		    "fuel on? "
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "cranking?"
		    SrcPort		    1
		    Points		    [0, 30; 80, 0]
		    DstBlock		    "logical\noperator1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "need engine on?1"
		    SrcPort		    1
		    Points		    [125, 0]
		    DstBlock		    "logical\n operator"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "logical\noperator1"
		    SrcPort		    1
		    DstBlock		    "logical\n operator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "max engine\nif pwr\nreq>limit"
		  SID			  "5463"
		  Ports			  [4, 2]
		  Position		  [635, 166, 665, 219]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "max engine\nif pwr\nreq>limit"
		    Location		    [227, 421, 657, 706]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "pwr req"
		    SID			    "5464"
		    Position		    [90, 100, 120, 120]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "trq req"
		    SID			    "5465"
		    Position		    [20, 88, 50, 102]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "spd req"
		    SID			    "5466"
		    Position		    [20, 173, 50, 187]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "max fc spd"
		    SID			    "5467"
		    Position		    [20, 133, 50, 147]
		    Port		    "4"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch3"
		    SID			    "5468"
		    Position		    [200, 70, 230, 100]
		    ShowName		    off
		    Threshold		    "25000"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch4"
		    SID			    "5469"
		    Position		    [205, 140, 235, 170]
		    ShowName		    off
		    Threshold		    "25000"
		    }
		    Block {
		    BlockType		    Lookup
		    Name		    "max_torque"
		    SID			    "5470"
		    Position		    [90, 23, 120, 47]
		    InputValues		    "fc_map_spd*fc_spd_scale"
		    Table		    "fc_max_trq*fc_trq_scale"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "trq"
		    SID			    "5471"
		    Position		    [255, 78, 285, 92]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "spd"
		    SID			    "5472"
		    Position		    [255, 148, 285, 162]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "pwr req"
		    SrcPort		    1
		    Points		    [60, 0]
		    Branch {
		    Points		    [0, 45]
		    DstBlock		    "Switch4"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Switch3"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Switch4"
		    SrcPort		    1
		    DstBlock		    "spd"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Switch3"
		    SrcPort		    1
		    DstBlock		    "trq"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "trq req"
		    SrcPort		    1
		    DstBlock		    "Switch3"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "max_torque"
		    SrcPort		    1
		    Points		    [0, 40]
		    DstBlock		    "Switch3"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "max fc spd"
		    SrcPort		    1
		    Points		    [20, 0]
		    Branch {
		    DstBlock		    "max_torque"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [115, 0]
		    DstBlock		    "Switch4"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "spd req"
		    SrcPort		    1
		    Points		    [135, 0]
		    DstBlock		    "Switch4"
		    DstPort		    3
		    }
		  }
		}
		Block {
		  BlockType		  Lookup
		  Name			  "max_torque lookup"
		  SID			  "5473"
		  Position		  [520, 183, 550, 207]
		  InputValues		  "fc_map_spd*fc_spd_scale"
		  Table			  "fc_max_trq*fc_trq_scale"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "need engine on?"
		  SID			  "5474"
		  Ports			  [1, 1]
		  Position		  [110, 73, 140, 127]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "need engine on?"
		    Location		    [313, 238, 926, 640]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "pwr requested"
		    SID			    "5475"
		    Position		    [35, 33, 65, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "0=Engine on\n1=ZEV mode"
		    SID			    "5476"
		    Ports		    [4, 1]
		    Position		    [355, 92, 385, 138]
		    Inputs		    "4"
		    }
		    Block {
		    BlockType		    From
		    Name		    "From <ess>"
		    SID			    "5477"
		    Position		    [40, 178, 85, 202]
		    NamePlacement	    "alternate"
		    ShowName		    off
		    CloseFcn		    "tagdialog Close"
		    GotoTag		    "SOC"
		    }
		    Block {
		    BlockType		    From
		    Name		    "From <ess>1"
		    SID			    "5478"
		    Position		    [20, 249, 95, 281]
		    NamePlacement	    "alternate"
		    ShowName		    off
		    CloseFcn		    "tagdialog Close"
		    GotoTag		    "fc_clt_tmp"
		    }
		    Block {
		    BlockType		    From
		    Name		    "From <veh>"
		    SID			    "5479"
		    Position		    [30, 99, 95, 121]
		    CloseFcn		    "tagdialog Close"
		    GotoTag		    "v_prev"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "SOC high enough?"
		    SID			    "5480"
		    Ports		    [1, 1]
		    Position		    [155, 165, 185, 215]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "SOC high enough?"
		    Location		    [334, 398, 549, 502]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "5481"
		    Position		    [50, 28, 80, 42]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "(--)"
		    SID			    "5482"
		    Position		    [5, 66, 85, 84]
		    ShowName		    off
		    Value		    "cs_eng_on_soc"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "SOC"
		    SID			    "5483"
		    Ports		    [2, 1]
		    Position		    [105, 27, 135, 58]
		    Operator		    ">"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "5484"
		    Position		    [160, 38, 190, 52]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "SOC"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "SOC"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "(--)"
		    SrcPort		    1
		    DstBlock		    "SOC"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "coolant temp high enough?"
		    SID			    "5485"
		    Ports		    [1, 1]
		    Position		    [190, 240, 220, 290]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "coolant temp high enough?"
		    Location		    [198, 312, 553, 428]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "5486"
		    Position		    [45, 13, 75, 27]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "coolant temp limit (deg C)"
		    SID			    "5487"
		    Position		    [35, 70, 115, 90]
		    Value		    "cs_clt_tmp"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "speed"
		    SID			    "5488"
		    Ports		    [2, 1]
		    Position		    [230, 12, 260, 43]
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "5489"
		    Position		    [310, 23, 340, 37]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "speed"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "speed"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "coolant temp limit (deg C)"
		    SrcPort		    1
		    Points		    [60, 0; 0, -45]
		    DstBlock		    "speed"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "has engine been\noff long enough?"
		    SID			    "5490"
		    Ports		    [1, 1]
		    Position		    [395, 190, 425, 240]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "has engine been\noff long enough?"
		    Location		    [443, 409, 816, 608]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "5491"
		    Position		    [15, 93, 45, 107]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant3"
		    SID			    "5492"
		    Position		    [155, 107, 175, 123]
		    NamePlacement	    "alternate"
		    ShowName		    off
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant4"
		    SID			    "5493"
		    Position		    [155, 52, 175, 68]
		    ShowName		    off
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant5"
		    SID			    "5494"
		    Position		    [160, 136, 245, 154]
		    ShowName		    off
		    Value		    "cs_min_off_time"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "5495"
		    Position		    [65, 85, 95, 115]
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator3"
		    SID			    "5496"
		    Ports		    [2, 1]
		    Position		    [270, 92, 300, 123]
		    ShowName		    off
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "just shut \ndown"
		    SID			    "5497"
		    Ports		    [1, 1]
		    Position		    [115, 83, 145, 117]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "just shut \ndown"
		    Location		    [71, 150, 410, 293]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "state"
		    SID			    "5498"
		    Position		    [15, 20, 35, 40]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "Logical\nOperator"
		    SID			    "5499"
		    Ports		    [2, 1]
		    Position		    [220, 23, 250, 47]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "Logical\nOperator1"
		    SID			    "5500"
		    Ports		    [1, 1]
		    Position		    [135, 18, 165, 42]
		    FontName		    "Arial"
		    Operator		    "NOT"
		    Inputs		    "1"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "5501"
		    Position		    [135, 85, 170, 105]
		    FontName		    "Arial"
		    X0			    "1"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "trigger"
		    SID			    "5502"
		    Position		    [295, 25, 315, 45]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Logical\nOperator"
		    SrcPort		    1
		    DstBlock		    "trigger"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [30, 0]
		    DstBlock		    "Logical\nOperator"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "state"
		    SrcPort		    1
		    Points		    [50, 0]
		    Branch {
		    Points		    [0, 65]
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Logical\nOperator1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Logical\nOperator1"
		    SrcPort		    1
		    DstBlock		    "Logical\nOperator"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "no-lag\nReset Integrator"
		    SID			    "5503"
		    Ports		    [3, 1]
		    Position		    [195, 79, 235, 121]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskType		    "No-lag Reset Integrator"
		    MaskDescription	    "No-lag Reset Integrator"
		    MaskHelp		    "Integrates first input using Euler technique.\\nAt the time step that input 2 <> zero,\\noutput i"
		    "s reset to input 3."
		    MaskPromptString	    "Initial Value"
		    MaskStyleString	    "edit"
		    MaskVariables	    "initval=@1;"
		    MaskTunableValueString  "on"
		    MaskEnableString	    "on"
		    MaskVisibilityString    "on"
		    MaskToolTipString	    "on"
		    MaskDisplay		    "disp('1/s\\nw/ reset\\nno lag')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "0"
		    System {
		    Name		    "no-lag\nReset Integrator"
		    Location		    [265, 331, 787, 595]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "5504"
		    Position		    [60, 100, 80, 120]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    SID			    "5505"
		    Position		    [60, 140, 80, 160]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_3"
		    SID			    "5506"
		    Position		    [45, 185, 65, 205]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "5507"
		    Position		    [105, 155, 125, 175]
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "5508"
		    Position		    [340, 55, 375, 75]
		    BlockMirror		    on
		    FontName		    "Arial"
		    X0			    "initval"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    SID			    "5509"
		    Ports		    [2, 1]
		    Position		    [160, 96, 180, 114]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    SID			    "5510"
		    Ports		    [2, 1]
		    Position		    [230, 90, 250, 110]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "5511"
		    Position		    [290, 139, 320, 171]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "dt"
		    SID			    "5512"
		    Ports		    [0, 1]
		    Position		    [112, 50, 138, 80]
		    BlockRotation	    270
		    BlockMirror		    on
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "dt"
		    Location		    [80, 285, 429, 424]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "5513"
		    Position		    [65, 60, 85, 80]
		    FontName		    "Arial"
		    FontSize		    8
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "5514"
		    Position		    [125, 85, 160, 105]
		    FontName		    "Arial"
		    FontSize		    8
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    SID			    "5515"
		    Ports		    [2, 1]
		    Position		    [205, 65, 225, 85]
		    FontName		    "Arial"
		    FontSize		    8
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "5516"
		    Position		    [255, 65, 275, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [10, 0; 0, -15]
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    }
		    }
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "in_2==0"
		    SID			    "5517"
		    Ports		    [2, 1]
		    Position		    [160, 143, 190, 167]
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "5518"
		    Position		    [455, 145, 475, 165]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    Points		    [15, 0]
		    DstBlock		    "in_2==0"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "in_2==0"
		    SrcPort		    1
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    Points		    [85, 0]
		    Branch {
		    Points		    [0, -90]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    Points		    [10, 0; 0, 45]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    Points		    [-130, 0; 0, 30]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "dt"
		    SrcPort		    1
		    Points		    [0, 15]
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "in_2==0"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_3"
		    SrcPort		    1
		    Points		    [195, 0; 0, -30]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "5519"
		    Position		    [325, 103, 355, 117]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator3"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant5"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Relational\nOperator3"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant3"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "no-lag\nReset Integrator"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator3"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "just shut \ndown"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant4"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    DstBlock		    "just shut \ndown"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "key_on"
		    SID			    "5520"
		    Ports		    [0, 1]
		    Position		    [385, 29, 440, 61]
		    NamePlacement	    "alternate"
		    SourceBlock		    "lib_controls/<vc> par/engine on\n(parallel hybrid)/key_on"
		    SourceType		    "Repeating table"
		    MaskParam1		    "vc_key_on(:,1)"
		    MaskParam2		    "vc_key_on(:,2)"
		    Port {
		    PortNumber		    1
		    Name		    "ignition key is on"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    }
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "logical\n operator"
		    SID			    "5521"
		    Ports		    [3, 1]
		    Position		    [465, 91, 495, 139]
		    ShowName		    off
		    Inputs		    "3"
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "logical\noperator1"
		    SID			    "5522"
		    Ports		    [1, 1]
		    Position		    [410, 98, 440, 132]
		    ShowName		    off
		    Operator		    "NOT"
		    Inputs		    "1"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "pwr low enough?"
		    SID			    "5523"
		    Ports		    [1, 1]
		    Position		    [155, 15, 185, 65]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "pwr low enough?"
		    Location		    [419, 336, 689, 435]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "5524"
		    Position		    [50, 28, 80, 42]
		    ShowName		    off
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "constant"
		    SID			    "5525"
		    Position		    [25, 61, 95, 89]
		    ShowName		    off
		    Value		    "cs_min_pwr"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "pwr"
		    SID			    "5526"
		    Ports		    [2, 1]
		    Position		    [160, 27, 190, 58]
		    Operator		    "<"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "5527"
		    Position		    [215, 48, 245, 62]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "pwr"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "constant"
		    SrcPort		    1
		    Points		    [0, -25]
		    DstBlock		    "pwr"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "pwr"
		    SrcPort		    1
		    Points		    [0, 10]
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "spd low enough?"
		    SID			    "5528"
		    Ports		    [1, 1]
		    Position		    [155, 85, 185, 135]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "spd low enough?"
		    Location		    [194, 308, 549, 424]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "5529"
		    Position		    [45, 13, 75, 27]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "<__m/s"
		    SID			    "5530"
		    Position		    [25, 69, 200, 91]
		    Value		    "cs_electric_launch_spd"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "speed"
		    SID			    "5531"
		    Ports		    [2, 1]
		    Position		    [230, 12, 260, 43]
		    Operator		    "<"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "5532"
		    Position		    [310, 23, 340, 37]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "speed"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "speed"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "<__m/s"
		    SrcPort		    1
		    Points		    [0, -45]
		    DstBlock		    "speed"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "fc on=1"
		    SID			    "5533"
		    Position		    [540, 108, 570, 122]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "logical\n operator"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    Points		    [0, 195; -170, 0; 0, -95]
		    DstBlock		    "has engine been\noff long enough?"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "fc on=1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "From <ess>1"
		    SrcPort		    1
		    DstBlock		    "coolant temp high enough?"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "coolant temp high enough?"
		    SrcPort		    1
		    Points		    [60, 0; 0, -135]
		    DstBlock		    "0=Engine on\n1=ZEV mode"
		    DstPort		    4
		    }
		    Line {
		    SrcBlock		    "0=Engine on\n1=ZEV mode"
		    SrcPort		    1
		    DstBlock		    "logical\noperator1"
		    DstPort		    1
		    }
		    Line {
		    Labels		    [2, 0]
		    SrcBlock		    "SOC high enough?"
		    SrcPort		    1
		    Points		    [80, 0; 0, -70]
		    DstBlock		    "0=Engine on\n1=ZEV mode"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "From <ess>"
		    SrcPort		    1
		    DstBlock		    "SOC high enough?"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "From <veh>"
		    SrcPort		    1
		    DstBlock		    "spd low enough?"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "pwr requested"
		    SrcPort		    1
		    DstBlock		    "pwr low enough?"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "spd low enough?"
		    SrcPort		    1
		    DstBlock		    "0=Engine on\n1=ZEV mode"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "pwr low enough?"
		    SrcPort		    1
		    Points		    [80, 0; 0, 60]
		    DstBlock		    "0=Engine on\n1=ZEV mode"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "has engine been\noff long enough?"
		    SrcPort		    1
		    Points		    [20, 0]
		    DstBlock		    "logical\n operator"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "logical\noperator1"
		    SrcPort		    1
		    DstBlock		    "logical\n operator"
		    DstPort		    2
		    }
		    Line {
		    Name		    "ignition key is on"
		    Labels		    [0, 0]
		    SrcBlock		    "key_on"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "logical\n operator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "spd opt"
		  SID			  "5534"
		  Ports			  [1, 1]
		  Position		  [315, 190, 345, 240]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "spd opt"
		    Location		    [121, 234, 554, 443]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "pwr req"
		    SID			    "5535"
		    Position		    [15, 45, 45, 65]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    From
		    Name		    "From <ess>"
		    SID			    "5536"
		    Position		    [75, 137, 145, 163]
		    NamePlacement	    "alternate"
		    ShowName		    off
		    CloseFcn		    "tagdialog Close"
		    GotoTag		    "fc_spd_prev"
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <vc>"
		    SID			    "5537"
		    Position		    [280, 137, 410, 163]
		    NamePlacement	    "alternate"
		    GotoTag		    "inertia_effect_fc_guess"
		    TagVisibility	    "global"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product2"
		    SID			    "5538"
		    Ports		    [2, 1]
		    Position		    [165, 27, 195, 58]
		    ShowName		    off
		    Inputs		    "**"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    SID			    "5539"
		    Ports		    [2, 1]
		    Position		    [235, 27, 265, 58]
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "effect of inertia\n guess (Nm)"
		    SID			    "5540"
		    Ports		    [2, 1]
		    Position		    [175, 106, 205, 144]
		    FontName		    "Arial"
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "effect of inertia\n guess (Nm)"
		    Location		    [245, 92, 674, 342]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "req'd spd\n(rad/s)"
		    SID			    "5541"
		    Position		    [60, 80, 80, 100]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "prev spd"
		    SID			    "5542"
		    Position		    [60, 130, 80, 150]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "5543"
		    Position		    [40, 175, 60, 195]
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "5544"
		    Position		    [120, 19, 180, 41]
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    "fc_inertia"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "5545"
		    Position		    [95, 210, 130, 230]
		    FontName		    "Arial"
		    X0			    "-0.1"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product1"
		    SID			    "5546"
		    Ports		    [3, 1]
		    Position		    [285, 77, 315, 113]
		    Inputs		    "**/"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    SID			    "5547"
		    Ports		    [2, 1]
		    Position		    [115, 85, 135, 105]
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    SID			    "5548"
		    Ports		    [2, 1]
		    Position		    [160, 180, 180, 200]
		    FontName		    "Arial"
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "(Nm)"
		    SID			    "5549"
		    Position		    [385, 85, 405, 105]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    DstBlock		    "Product1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    Points		    [40, 0; 0, -85]
		    DstBlock		    "Product1"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "req'd spd\n(rad/s)"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "prev spd"
		    SrcPort		    1
		    Points		    [5, 0; 0, -40]
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Product1"
		    SrcPort		    1
		    DstBlock		    "(Nm)"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    Points		    [5, 0; 0, -25]
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    Points		    [0, 35]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    Points		    [40, 0; 0, 55]
		    DstBlock		    "Product1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Lookup
		    Name		    "fc spd opt"
		    SID			    "5550"
		    Position		    [65, 43, 95, 67]
		    InputValues		    "cs_fc_pwr_opt"
		    Table		    "cs_fc_spd_opt"
		    }
		    Block {
		    BlockType		    Lookup
		    Name		    "fc spd opt1"
		    SID			    "5551"
		    Position		    [300, 33, 330, 57]
		    InputValues		    "cs_fc_pwr_opt"
		    Table		    "cs_fc_spd_opt"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "spd opt"
		    SID			    "5552"
		    Position		    [350, 38, 380, 52]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "effect of inertia\n guess (Nm)"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "Goto <vc>"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -45; -75, 0]
		    DstBlock		    "Product2"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "pwr req"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    Points		    [0, -40; 170, 0]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "fc spd opt"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Product2"
		    SrcPort		    1
		    Points		    [20, 0]
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    DstBlock		    "fc spd opt1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "fc spd opt1"
		    SrcPort		    1
		    DstBlock		    "spd opt"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "From <ess>"
		    SrcPort		    1
		    Points		    [0, -15]
		    DstBlock		    "effect of inertia\n guess (Nm)"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "fc spd opt"
		    SrcPort		    1
		    Points		    [5, 0]
		    Branch {
		    Points		    [0, -20]
		    DstBlock		    "Product2"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 60]
		    DstBlock		    "effect of inertia\n guess (Nm)"
		    DstPort		    1
		    }
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "fc_trq_request"
		  SID			  "5553"
		  Position		  [905, 175, 925, 195]
		  FontName		  "Arial"
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Block {
		  BlockType		  Outport
		  Name			  "fc_spd_request1"
		  SID			  "5554"
		  Position		  [900, 230, 920, 250]
		  FontName		  "Arial"
		  Port			  "2"
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "fuel on?"
		  SrcPort		  1
		  DstBlock		  "Terminator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "need engine on?"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [0, 20; 150, 0; 0, -10; 35, 0]
		    Branch {
		    DstBlock		    "Goto <fc>"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [435, 0; 0, 75; 20, 0]
		    Branch {
		    Points		    [0, 55]
		    DstBlock		    "Switch2"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Switch1"
		    DstPort		    2
		    }
		    }
		  }
		  Branch {
		    Points		    [15, 0]
		    Branch {
		    Points		    [65, 0]
		    DstBlock		    "fuel on?"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "cranking?"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "cranking?"
		  SrcPort		  1
		  Points		  [15, 0]
		  DstBlock		  "fuel on?"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "pwr requested"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    Points		    [0, 55]
		    Branch {
		    Points		    [185, 0; 0, -20; 345, 0; 0, 35]
		    DstBlock		    "max engine\nif pwr\nreq>limit"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 30]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "need engine on?"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Max fc spd (rad/s)"
		  SrcPort		  1
		  Points		  [195, 0; 0, -15]
		  Branch {
		    Points		    [250, 0]
		    DstBlock		    "max engine\nif pwr\nreq>limit"
		    DstPort		    4
		  }
		  Branch {
		    DstBlock		    "MinMax3"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "max engine\nif pwr\nreq>limit"
		  SrcPort		  2
		  DstBlock		  "at least\n idle speed"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "max engine\nif pwr\nreq>limit"
		  SrcPort		  1
		  DstBlock		  "at least\n idle speed"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "at least\n idle speed"
		  SrcPort		  1
		  Points		  [0, -5]
		  DstBlock		  "Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "at least\n idle speed"
		  SrcPort		  2
		  Points		  [0, 25]
		  DstBlock		  "Switch2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Switch2"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Switch2"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    DstBlock		    "Product1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 0]
		    DstBlock		    "fc_spd_request1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    Points		    [0, 175]
		    DstBlock		    "Product1"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "fc_trq_request"
		    DstPort		    1
		  }
		}
		Line {
		  Labels		  [2, 0]
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  Points		  [5, 0; 0, 30; -80, 0]
		  DstBlock		  "To Workspace3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "MinMax2"
		  SrcPort		  1
		  DstBlock		  "max engine\nif pwr\nreq>limit"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    Points		    [0, -20]
		    Branch {
		    Points		    [135, 0; 0, -20]
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "To Workspace2"
		    DstPort		    1
		    }
		  }
		  Branch {
		    Points		    [10, 0]
		    DstBlock		    "spd opt"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "spd opt"
		  SrcPort		  1
		  DstBlock		  "MinMax3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Min fc spd(rad/s)"
		  SrcPort		  1
		  Points		  [250, 0]
		  DstBlock		  "MinMax1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "MinMax3"
		  SrcPort		  1
		  DstBlock		  "MinMax1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "max_torque lookup"
		  SrcPort		  1
		  DstBlock		  "MinMax2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "MinMax2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "MinMax1"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    Points		    [30, 0]
		    Branch {
		    Points		    [95, 0; 0, -35]
		    DstBlock		    "max engine\nif pwr\nreq>limit"
		    DstPort		    3
		    }
		    Branch {
		    DstBlock		    "max_torque lookup"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "Product"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Pch"
		  SrcPort		  1
		  Points		  [190, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "req ring\n speed(rad/s)"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    Points		    [0, 75]
		    DstBlock		    "Min fc spd(rad/s)"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Max fc spd (rad/s)"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "fc trq request"
	      SID		      "5555"
	      Position		      [420, 85, 440, 105]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "fc spd request"
	      SID		      "5556"
	      Position		      [420, 135, 440, 155]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		Points			[0, -60]
		DstBlock		"To Workspace2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"max engine\nefficiency point"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "max engine\nefficiency point"
	      SrcPort		      2
	      DstBlock		      "fc spd request"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "max engine\nefficiency point"
	      SrcPort		      1
	      DstBlock		      "fc trq request"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "battery charge demand"
	      SrcPort		      1
	      Points		      [120, 0; 0, -75]
	      DstBlock		      "max engine\nefficiency point"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "soc"
	      SrcPort		      1
	      DstBlock		      "battery charge demand"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      Points		      [40, 0; 0, 50]
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      Points		      [0, 70; 40, 0]
	      Branch {
		DstBlock		"max engine\nefficiency point"
		DstPort			2
	      }
	      Branch {
		Points			[0, -25]
		DstBlock		"Product1"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "(Trq and speed req'd\n from ring gear)\nNm, rad/s"
	      SrcPort		      1
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  From
	  Name			  "From <ess>"
	  SID			  "5557"
	  Position		  [525, 235, 620, 255]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "bus_voltage"
	}
	Block {
	  BlockType		  From
	  Name			  "From <ess>1"
	  SID			  "5558"
	  Position		  [525, 400, 620, 420]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "bus_voltage"
	}
	Block {
	  BlockType		  From
	  Name			  "From <ess>2"
	  SID			  "5559"
	  Position		  [495, 74, 540, 96]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "SOC"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gc>"
	  SID			  "5560"
	  Position		  [530, 479, 620, 501]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_gc_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gc>1"
	  SID			  "5561"
	  Position		  [530, 440, 625, 460]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "P_gc_in_1lim"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>"
	  SID			  "5562"
	  Position		  [530, 275, 625, 295]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "P_mc_in_1lim"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>1"
	  SID			  "5563"
	  Position		  [530, 314, 620, 336]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_mc_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <pgs>"
	  SID			  "5564"
	  Position		  [480, 29, 605, 51]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "pgs_trq_spd_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <veh>"
	  SID			  "5565"
	  Position		  [25, 237, 100, 253]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_prev"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>"
	  SID			  "5566"
	  Position		  [20, 270, 80, 290]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>1"
	  SID			  "5567"
	  Position		  [15, 201, 100, 219]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>2"
	  SID			  "5568"
	  Position		  [165, 382, 275, 398]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_drivetrain_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>3"
	  SID			  "5569"
	  Position		  [170, 416, 270, 434]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_wheel_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>4"
	  SID			  "5570"
	  Position		  [180, 350, 240, 370]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>5"
	  SID			  "5571"
	  Position		  [145, 471, 265, 489]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_rear_brake"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>6"
	  SID			  "5572"
	  Position		  [280, 230, 340, 250]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>7"
	  SID			  "5573"
	  Position		  [15, 126, 100, 144]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From<wh>4"
	  SID			  "5574"
	  Position		  [165, 441, 280, 459]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_front_brake"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc><mc>"
	  SID			  "5575"
	  Position		  [685, 161, 735, 179]
	  GotoTag		  "key_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gc>"
	  SID			  "5576"
	  Position		  [690, 440, 780, 460]
	  GotoTag		  "P_gc_in_r"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <mc>"
	  SID			  "5577"
	  Position		  [690, 275, 780, 295]
	  GotoTag		  "P_mc_in_r"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <pgs>2"
	  SID			  "5578"
	  Position		  [700, 28, 805, 52]
	  NamePlacement		  "alternate"
	  GotoTag		  "fc_trq_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <pgs>3"
	  SID			  "5579"
	  Position		  [700, 73, 805, 97]
	  NamePlacement		  "alternate"
	  GotoTag		  "fc_spd_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>1"
	  SID			  "5580"
	  Position		  [420, 226, 505, 244]
	  GotoTag		  "slip_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>"
	  SID			  "5581"
	  Position		  [420, 160, 505, 180]
	  NamePlacement		  "alternate"
	  GotoTag		  "F_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>1"
	  SID			  "5582"
	  Position		  [180, 219, 270, 241]
	  GotoTag		  "v_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>2"
	  SID			  "5583"
	  Position		  [230, 251, 320, 269]
	  GotoTag		  "wt_front_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>3"
	  SID			  "5584"
	  Position		  [365, 386, 450, 404]
	  GotoTag		  "F_front_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>4"
	  SID			  "5585"
	  Position		  [365, 449, 450, 471]
	  GotoTag		  "F_rear_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>5"
	  SID			  "5586"
	  Position		  [225, 125, 335, 145]
	  GotoTag		  "F_front_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>6"
	  SID			  "5587"
	  Position		  [190, 286, 280, 304]
	  GotoTag		  "wt_rear_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>7"
	  SID			  "5588"
	  Position		  [185, 316, 275, 334]
	  GotoTag		  "front_traction_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>8"
	  SID			  "5589"
	  Position		  [370, 100, 480, 120]
	  GotoTag		  "F_rear_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Ground
	  Name			  "Ground"
	  SID			  "5590"
	  Position		  [250, 525, 270, 545]
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator"
	  SID			  "5591"
	  Ports			  [2, 1]
	  Position		  [370, 217, 400, 248]
	  Operator		  "~="
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  SID			  "5592"
	  Ports			  [2, 1]
	  Position		  [370, 152, 400, 183]
	  Inputs		  "-+"
	}
	Block {
	  BlockType		  Reference
	  Name			  "braking strategy"
	  SID			  "5593"
	  Ports			  [2, 2]
	  Position		  [180, 122, 210, 173]
	  NamePlacement		  "alternate"
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/braking strategy"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "config traction control"
	  SID			  "5594"
	  Ports			  [3, 5]
	  Position		  [120, 194, 155, 296]
	  BackgroundColor	  "darkGreen"
	  AttributesFormatString  "%<BlockChoice>"
	  ShowPortLabels	  "none"
	  BlockChoice		  "traction control 2 axle"
	  TemplateBlock		  "lib_controls/SubSystem/config traction control"
	  MemberBlocks		  "traction control 2 axle,traction control J2452 2 axle"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "config traction control"
	    Location		    [148, 182, 646, 482]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    SIDHighWatermark	    "6898"
	    Block {
	      BlockType		      Inport
	      Name		      "time-average\nvehicle speed\n req'd (m/s)"
	      SID		      "5594::706"
	      Position		      [20, 40, 40, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SID		      "5594::707"
	      Position		      [20, 80, 40, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "total tractive\nforce req'd\n(N)"
	      SID		      "5594::708"
	      Position		      [20, 120, 40, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "traction control\n2 axle"
	      SID		      "5594::709"
	      Ports		      [3, 5]
	      Position		      [100, 40, 140, 80]
	      BackgroundColor	      "darkGreen"
	      LibraryVersion	      "1.479"
	      SourceBlock	      "lib_controls/SubSystem/traction control 2 axle"
	      SourceType	      "SubSystem"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd force\n(N)"
	      SID		      "5594::710"
	      Position		      [200, 40, 220, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd speed\n(m/s)"
	      SID		      "5594::711"
	      Position		      [200, 80, 220, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nfront axle\n(N)"
	      SID		      "5594::712"
	      Position		      [200, 120, 220, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nrear axle\n(N)"
	      SID		      "5594::713"
	      Position		      [200, 160, 220, 180]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "front/total \ntraction ratio"
	      SID		      "5594::714"
	      Position		      [200, 200, 220, 220]
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "time-average\nvehicle speed\n req'd (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "total tractive\nforce req'd\n(N)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      1
	      DstBlock		      "req'd force\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      2
	      DstBlock		      "req'd speed\n(m/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      3
	      DstBlock		      "weight on\nfront axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      4
	      DstBlock		      "weight on\nrear axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      5
	      DstBlock		      "front/total \ntraction ratio"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "front and rear\nbrake controller\n(achievable)"
	  SID			  "5595"
	  Ports			  [6, 2]
	  Position		  [310, 361, 345, 489]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/front and rear\nbrake controller\n(achievable)"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "key_on"
	  SID			  "5596"
	  Ports			  [0, 1]
	  Position		  [570, 154, 625, 186]
	  NamePlacement		  "alternate"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  MaskType		  "Repeating table"
	  MaskDescription	  "Repeating table.\nEnter values of time and output for first cycle."
	  MaskHelp		  "Repeats cycle given in table. Time values should be monotonically increasing."
	  MaskPromptString	  "Time values:|Output values:"
	  MaskStyleString	  "edit,edit"
	  MaskVariables		  "t=@1;y=@2;"
	  MaskTunableValueString  "on,on"
	  MaskCallbackString	  "|"
	  MaskEnableString	  "on,on"
	  MaskVisibilityString	  "on,on"
	  MaskToolTipString	  "on,on"
	  MaskInitialization	  "period = max(t);"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskPortRotate	  "default"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "vc_key_on(:,1)|vc_key_on(:,2)"
	  System {
	    Name		    "key_on"
	    Location		    [5, 42, 410, 213]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Clock
	      Name		      "Clock"
	      SID		      "5597"
	      Position		      [45, 60, 65, 80]
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn1"
	      SID		      "5598"
	      Position		      [110, 60, 150, 80]
	      Expr		      "rem(u[1],period)"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "Look-Up Table"
	      SID		      "5599"
	      Position		      [210, 58, 250, 82]
	      InputValues	      "t"
	      Table		      "y"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "out_1"
	      SID		      "5600"
	      Position		      [285, 60, 305, 80]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Look-Up Table"
	      SrcPort		      1
	      DstBlock		      "out_1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Clock"
	      SrcPort		      1
	      DstBlock		      "Fcn1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Fcn1"
	      SrcPort		      1
	      DstBlock		      "Look-Up Table"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "prius generator\n controller logic"
	  SID			  "5601"
	  Ports			  [3, 1]
	  Position		  [635, 390, 665, 510]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "prius generator\n controller logic"
	    Location		    [67, 100, 765, 565]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "bus voltage"
	      SID		      "5602"
	      Position		      [40, 30, 60, 50]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd input\npower (W)"
	      SID		      "5603"
	      Position		      [40, 160, 60, 180]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd output\nspd (rad/s)"
	      SID		      "5604"
	      Position		      [40, 290, 60, 310]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs"
	      SID		      "5605"
	      Position		      [205, 123, 235, 147]
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs1"
	      SID		      "5606"
	      Position		      [110, 288, 140, 312]
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "5607"
	      Ports		      []
	      Position		      [590, 385, 646, 425]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[263, 139, 778, 219]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "5608"
		  Name			  "This block models a motor/controller's logic, modulating the power input requirement as follows:\n- enfo"
		  "rcing the maximum current limit of the motor/controller\n- shutting the motor off if the average speed over the ti"
		  "me step ==0\n"
		  Position		  [257, 40]
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "5609"
	      Position		      [95, 79, 165, 101]
	      FontName		      "Arial"
	      Value		      "gc_max_crrnt"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "5610"
	      Position		      [140, 348, 175, 372]
	      FontName		      "Arial"
	      Value		      "0.001"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "5611"
	      Position		      [500, 232, 520, 258]
	      BlockMirror	      on
	      FontName		      "Arial"
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <sdo>"
	      SID		      "5612"
	      Position		      [555, 24, 645, 46]
	      GotoTag		      "gc_crrnt_limited"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "5613"
	      Ports		      [1, 1]
	      Position		      [434, 240, 466, 275]
	      BlockRotation	      270
	      NamePlacement	      "alternate"
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "5614"
	      Position		      [115, 25, 145, 55]
	      X0		      "ess_module_num*mean(ess_voc(1,:))"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      SID		      "5615"
	      Ports		      [2, 1]
	      Position		      [270, 37, 300, 68]
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      SID		      "5616"
	      Ports		      [2, 1]
	      Position		      [210, 36, 230, 54]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "5617"
	      Ports		      [2, 1]
	      Position		      [490, 17, 520, 48]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Sign"
	      SID		      "5618"
	      Ports		      [1, 1]
	      Position		      [270, 157, 300, 183]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Sign"
	      MaskDescription	      "y = sign(x)"
	      MaskHelp		      "Sign Function:\\n\\t\\t\\ty = 1 if x > 0\\n\\t\\t\\ty = 0 if x = 0\\n\\t\\t\\ty = -1 if x < 0"
	      MaskDisplay	      "plot(-50,-50,50,50,[-50,50],[0,0],[0,0],[-50,50],[-40,0],[-30,-30],[0,40],[30,30])"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Sign"
		Location		[159, 417, 467, 586]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "5619"
		  Position		  [35, 30, 55, 50]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "5620"
		  Position		  [65, 105, 85, 125]
		  Value			  "0"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "5621"
		  Ports			  [2, 1]
		  Position		  [140, 32, 170, 63]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "5622"
		  Ports			  [2, 1]
		  Position		  [140, 92, 170, 123]
		  Operator		  "<"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "5623"
		  Ports			  [2, 1]
		  Position		  [215, 64, 235, 91]
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "5624"
		  Position		  [265, 70, 285, 90]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 60]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, -60]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  Points		  [10, 0; 0, -25]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  Points		  [10, 0; 0, 20]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "5625"
	      Position		      [495, 180, 525, 210]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "current-limited\npower"
	      SID		      "5626"
	      Ports		      [2, 1]
	      Position		      [365, 51, 385, 69]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "true if motor\nshould be\nshut down"
	      SID		      "5627"
	      Ports		      [2, 1]
	      Position		      [230, 292, 260, 323]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd input\npower (W)1"
	      SID		      "5628"
	      Position		      [590, 185, 610, 205]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Abs1"
	      SrcPort		      1
	      DstBlock		      "true if motor\nshould be\nshut down"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "req'd output\nspd (rad/s)"
	      SrcPort		      1
	      DstBlock		      "Abs1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "true if motor\nshould be\nshut down"
	      SrcPort		      1
	      Points		      [185, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [10, 0; 0, -45]
	      DstBlock		      "true if motor\nshould be\nshut down"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Goto <sdo>"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		Points			[0, -15]
		DstBlock		"Relational\nOperator2"
		DstPort			2
	      }
	      Branch {
		DstBlock		"current-limited\npower"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, -20]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"MinMax"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "current-limited\npower"
	      SrcPort		      1
	      Points		      [60, 0; 0, 125]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "req'd input\npower (W)1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Sign"
	      SrcPort		      1
	      Points		      [20, 0; 0, -105]
	      DstBlock		      "current-limited\npower"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Abs"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "req'd input\npower (W)"
	      SrcPort		      1
	      Points		      [105, 0]
	      Branch {
		DstBlock		"Sign"
		DstPort			1
	      }
	      Branch {
		Points			[0, -35]
		DstBlock		"Abs"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [20, 0; 0, -40]
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "bus voltage"
	      SrcPort		      1
	      DstBlock		      "Memory"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [0, -40]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "prius motor\n controller logic"
	  SID			  "5629"
	  Ports			  [3, 1]
	  Position		  [635, 225, 665, 345]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "prius motor\n controller logic"
	    Location		    [67, 100, 765, 565]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "bus voltage"
	      SID		      "5630"
	      Position		      [40, 30, 60, 50]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd input\npower (W)"
	      SID		      "5631"
	      Position		      [40, 160, 60, 180]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd output\nspd (rad/s)"
	      SID		      "5632"
	      Position		      [40, 290, 60, 310]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs"
	      SID		      "5633"
	      Position		      [205, 123, 235, 147]
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs1"
	      SID		      "5634"
	      Position		      [110, 288, 140, 312]
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "5635"
	      Ports		      []
	      Position		      [590, 385, 646, 425]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[263, 139, 778, 219]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "5636"
		  Name			  "This block models a motor/controller's logic, modulating the power input requirement as follows:\n- enfo"
		  "rcing the maximum current limit of the motor/controller\n- shutting the motor off if the average speed over the ti"
		  "me step ==0\n- shutting the motor off if the transmission is shifting."
		  Position		  [257, 40]
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "5637"
	      Position		      [95, 79, 165, 101]
	      FontName		      "Arial"
	      Value		      "mc_max_crrnt"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "5638"
	      Position		      [140, 348, 175, 372]
	      FontName		      "Arial"
	      Value		      "0.001"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "5639"
	      Position		      [500, 232, 520, 258]
	      BlockMirror	      on
	      FontName		      "Arial"
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <sdo>"
	      SID		      "5640"
	      Position		      [555, 24, 645, 46]
	      GotoTag		      "mc_crrnt_limited"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "5641"
	      Ports		      [1, 1]
	      Position		      [434, 240, 466, 275]
	      BlockRotation	      270
	      NamePlacement	      "alternate"
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "5642"
	      Position		      [115, 25, 145, 55]
	      X0		      "ess_module_num*mean(ess_voc(1,:))"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      SID		      "5643"
	      Ports		      [2, 1]
	      Position		      [270, 37, 300, 68]
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      SID		      "5644"
	      Ports		      [2, 1]
	      Position		      [210, 36, 230, 54]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "5645"
	      Ports		      [2, 1]
	      Position		      [490, 17, 520, 48]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Sign"
	      SID		      "5646"
	      Ports		      [1, 1]
	      Position		      [270, 157, 300, 183]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Sign"
	      MaskDescription	      "y = sign(x)"
	      MaskHelp		      "Sign Function:\\n\\t\\t\\ty = 1 if x > 0\\n\\t\\t\\ty = 0 if x = 0\\n\\t\\t\\ty = -1 if x < 0"
	      MaskDisplay	      "plot(-50,-50,50,50,[-50,50],[0,0],[0,0],[-50,50],[-40,0],[-30,-30],[0,40],[30,30])"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Sign"
		Location		[159, 417, 467, 586]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "5647"
		  Position		  [35, 30, 55, 50]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "5648"
		  Position		  [65, 105, 85, 125]
		  Value			  "0"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "5649"
		  Ports			  [2, 1]
		  Position		  [140, 32, 170, 63]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "5650"
		  Ports			  [2, 1]
		  Position		  [140, 92, 170, 123]
		  Operator		  "<"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "5651"
		  Ports			  [2, 1]
		  Position		  [215, 64, 235, 91]
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "5652"
		  Position		  [265, 70, 285, 90]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 60]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, -60]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  Points		  [10, 0; 0, -25]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  Points		  [10, 0; 0, 20]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "5653"
	      Position		      [495, 180, 525, 210]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "current-limited\npower"
	      SID		      "5654"
	      Ports		      [2, 1]
	      Position		      [365, 51, 385, 69]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "true if motor\nshould be\nshut down"
	      SID		      "5655"
	      Ports		      [2, 1]
	      Position		      [230, 292, 260, 323]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd input\npower (W)1"
	      SID		      "5656"
	      Position		      [590, 185, 610, 205]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Abs1"
	      SrcPort		      1
	      DstBlock		      "true if motor\nshould be\nshut down"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "req'd output\nspd (rad/s)"
	      SrcPort		      1
	      DstBlock		      "Abs1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "true if motor\nshould be\nshut down"
	      SrcPort		      1
	      Points		      [185, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [10, 0; 0, -45]
	      DstBlock		      "true if motor\nshould be\nshut down"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Goto <sdo>"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		Points			[0, -15]
		DstBlock		"Relational\nOperator2"
		DstPort			2
	      }
	      Branch {
		DstBlock		"current-limited\npower"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, -20]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"MinMax"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "current-limited\npower"
	      SrcPort		      1
	      Points		      [60, 0; 0, 125]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "req'd input\npower (W)1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Sign"
	      SrcPort		      1
	      Points		      [20, 0; 0, -105]
	      DstBlock		      "current-limited\npower"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Abs"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "req'd input\npower (W)"
	      SrcPort		      1
	      Points		      [105, 0]
	      Branch {
		DstBlock		"Sign"
		DstPort			1
	      }
	      Branch {
		Points			[0, -35]
		DstBlock		"Abs"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [20, 0; 0, -40]
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "bus voltage"
	      SrcPort		      1
	      DstBlock		      "Memory"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [0, -40]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "sim stop\nsubsystem"
	  SID			  "5657"
	  Ports			  []
	  Position		  [25, 15, 55, 65]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/sim stop\nsubsystem"
	  SourceType		  "SubSystem"
	}
	Line {
	  SrcBlock		  "prius motor\n controller logic"
	  SrcPort		  1
	  DstBlock		  "Goto <mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <mc>1"
	  SrcPort		  1
	  DstBlock		  "prius motor\n controller logic"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <mc>"
	  SrcPort		  1
	  DstBlock		  "prius motor\n controller logic"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <ess>"
	  SrcPort		  1
	  DstBlock		  "prius motor\n controller logic"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "prius generator\n controller logic"
	  SrcPort		  1
	  DstBlock		  "Goto <gc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gc>"
	  SrcPort		  1
	  DstBlock		  "prius generator\n controller logic"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <gc>1"
	  SrcPort		  1
	  DstBlock		  "prius generator\n controller logic"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <ess>1"
	  SrcPort		  1
	  DstBlock		  "prius generator\n controller logic"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <pgs>"
	  SrcPort		  1
	  DstBlock		  "Coordinated\n Controller"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Coordinated\n Controller"
	  SrcPort		  2
	  DstBlock		  "Goto <pgs>3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <ess>2"
	  SrcPort		  1
	  DstBlock		  "Coordinated\n Controller"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Coordinated\n Controller"
	  SrcPort		  1
	  DstBlock		  "Goto <pgs>2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "key_on"
	  SrcPort		  1
	  DstBlock		  "Goto <fc><mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  3
	  Points		  [0, 15]
	  DstBlock		  "Goto <wh>2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  2
	  Points		  [0, 5]
	  DstBlock		  "Goto <wh>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <veh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>5"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  1
	  Points		  [0, 5; 5, 0]
	  Branch {
	    DstBlock		    "braking strategy"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [190, 0]
	    Branch {
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Branch {
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  2
	  Points		  [130, 0]
	  Branch {
	    DstBlock		    "Sum"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -50]
	    DstBlock		    "Goto <wh>8"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Relational\nOperator"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <wh>1"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>7"
	  SrcPort		  1
	  DstBlock		  "braking strategy"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>6"
	  SrcPort		  1
	  DstBlock		  "Relational\nOperator"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>5"
	  SrcPort		  1
	  Points		  [0, -5]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "From<wh>4"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <wh>3"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <wh>2"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>4"
	  SrcPort		  1
	  Points		  [50, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  4
	  Points		  [15, 0]
	  DstBlock		  "Goto <wh>6"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  5
	  Points		  [10, 0]
	  DstBlock		  "Goto <wh>7"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Ground"
	  SrcPort		  1
	  Points		  [10, 0; 0, -60]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  6
	}
	Annotation {
	  SID			  "5658"
	  Name			  "force required (N)"
	  Position		  [213, 201]
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "<vc> series"
      SID		      "314"
      Ports		      []
      Position		      [105, 450, 166, 498]
      BackgroundColor	      "yellow"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_vc.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"<vc> series"
	Location		[10, 112, 950, 1190]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"100"
	Block {
	  BlockType		  From
	  Name			  "From <cs>"
	  SID			  "5659"
	  Position		  [530, 396, 615, 414]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "engine_on"
	}
	Block {
	  BlockType		  From
	  Name			  "From <ess>"
	  SID			  "5660"
	  Position		  [525, 40, 620, 60]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "bus_voltage"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>1"
	  SID			  "5661"
	  Position		  [545, 235, 625, 255]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>2"
	  SID			  "5662"
	  Position		  [545, 271, 625, 289]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "eta_gb"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>3"
	  SID			  "5663"
	  Position		  [540, 306, 630, 324]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "slip_limited"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>"
	  SID			  "5664"
	  Position		  [525, 65, 620, 85]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "P_mc_in_1lim"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>1"
	  SID			  "5665"
	  Position		  [525, 102, 615, 118]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_mc_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>2"
	  SID			  "5666"
	  Position		  [525, 137, 615, 153]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <veh>"
	  SID			  "5667"
	  Position		  [25, 212, 100, 228]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_prev"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>"
	  SID			  "5668"
	  Position		  [20, 245, 80, 265]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>1"
	  SID			  "5669"
	  Position		  [15, 176, 100, 194]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>2"
	  SID			  "5670"
	  Position		  [110, 367, 220, 383]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_drivetrain_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>3"
	  SID			  "5671"
	  Position		  [115, 401, 215, 419]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_wheel_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>4"
	  SID			  "5672"
	  Position		  [110, 325, 170, 345]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>5"
	  SID			  "5673"
	  Position		  [90, 461, 210, 479]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_rear_brake"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>6"
	  SID			  "5674"
	  Position		  [285, 205, 345, 225]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>7"
	  SID			  "5675"
	  Position		  [75, 101, 160, 119]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From<gb>"
	  SID			  "5676"
	  Position		  [540, 206, 620, 224]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From<wh>4"
	  SID			  "5677"
	  Position		  [110, 426, 225, 444]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_front_brake"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto"
	  SID			  "5678"
	  Position		  [710, 217, 785, 243]
	  NamePlacement		  "alternate"
	  GotoTag		  "gear_number"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>\n<mc><pb>"
	  SID			  "5679"
	  Position		  [720, 476, 770, 494]
	  GotoTag		  "key_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>"
	  SID			  "5680"
	  Position		  [715, 291, 785, 309]
	  GotoTag		  "shifting"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>1"
	  SID			  "5681"
	  Position		  [715, 256, 785, 274]
	  GotoTag		  "gear_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <mc>"
	  SID			  "5682"
	  Position		  [695, 80, 760, 100]
	  GotoTag		  "P_mc_in_r"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>"
	  SID			  "5683"
	  Position		  [715, 394, 785, 416]
	  GotoTag		  "clutch_state"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>1"
	  SID			  "5684"
	  Position		  [435, 201, 520, 219]
	  GotoTag		  "slip_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>"
	  SID			  "5685"
	  Position		  [430, 135, 515, 155]
	  NamePlacement		  "alternate"
	  GotoTag		  "F_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>1"
	  SID			  "5686"
	  Position		  [185, 194, 275, 216]
	  GotoTag		  "v_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>2"
	  SID			  "5687"
	  Position		  [255, 226, 345, 244]
	  GotoTag		  "wt_front_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>3"
	  SID			  "5688"
	  Position		  [310, 371, 395, 389]
	  GotoTag		  "F_front_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>4"
	  SID			  "5689"
	  Position		  [310, 434, 395, 456]
	  GotoTag		  "F_rear_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>5"
	  SID			  "5690"
	  Position		  [225, 100, 335, 120]
	  GotoTag		  "F_front_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>6"
	  SID			  "5691"
	  Position		  [185, 261, 275, 279]
	  GotoTag		  "wt_rear_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>7"
	  SID			  "5692"
	  Position		  [180, 291, 270, 309]
	  GotoTag		  "front_traction_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>8"
	  SID			  "5693"
	  Position		  [395, 70, 505, 90]
	  GotoTag		  "F_rear_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Ground
	  Name			  "Ground"
	  SID			  "5694"
	  Position		  [180, 520, 200, 540]
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator"
	  SID			  "5695"
	  Ports			  [2, 1]
	  Position		  [380, 192, 410, 223]
	  Operator		  "~="
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  SID			  "5696"
	  Ports			  [2, 1]
	  Position		  [380, 127, 410, 158]
	  Inputs		  "-+"
	}
	Block {
	  BlockType		  Reference
	  Name			  "braking strategy"
	  SID			  "5697"
	  Ports			  [2, 2]
	  Position		  [180, 97, 210, 148]
	  NamePlacement		  "alternate"
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/braking strategy"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "config traction control"
	  SID			  "5698"
	  Ports			  [3, 5]
	  Position		  [120, 169, 155, 271]
	  BackgroundColor	  "darkGreen"
	  AttributesFormatString  "%<BlockChoice>"
	  ShowPortLabels	  "none"
	  BlockChoice		  "traction control 2 axle"
	  TemplateBlock		  "lib_controls/SubSystem/config traction control"
	  MemberBlocks		  "traction control 2 axle,traction control J2452 2 axle"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "config traction control"
	    Location		    [148, 182, 646, 482]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    SIDHighWatermark	    "6898"
	    Block {
	      BlockType		      Inport
	      Name		      "time-average\nvehicle speed\n req'd (m/s)"
	      SID		      "5698::706"
	      Position		      [20, 40, 40, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SID		      "5698::707"
	      Position		      [20, 80, 40, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "total tractive\nforce req'd\n(N)"
	      SID		      "5698::708"
	      Position		      [20, 120, 40, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "traction control\n2 axle"
	      SID		      "5698::709"
	      Ports		      [3, 5]
	      Position		      [100, 40, 140, 80]
	      BackgroundColor	      "darkGreen"
	      LibraryVersion	      "1.479"
	      SourceBlock	      "lib_controls/SubSystem/traction control 2 axle"
	      SourceType	      "SubSystem"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd force\n(N)"
	      SID		      "5698::710"
	      Position		      [200, 40, 220, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd speed\n(m/s)"
	      SID		      "5698::711"
	      Position		      [200, 80, 220, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nfront axle\n(N)"
	      SID		      "5698::712"
	      Position		      [200, 120, 220, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nrear axle\n(N)"
	      SID		      "5698::713"
	      Position		      [200, 160, 220, 180]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "front/total \ntraction ratio"
	      SID		      "5698::714"
	      Position		      [200, 200, 220, 220]
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "time-average\nvehicle speed\n req'd (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "total tractive\nforce req'd\n(N)"
	      SrcPort		      1
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      1
	      DstBlock		      "req'd force\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      2
	      DstBlock		      "req'd speed\n(m/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      3
	      DstBlock		      "weight on\nfront axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      4
	      DstBlock		      "weight on\nrear axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      5
	      DstBlock		      "front/total \ntraction ratio"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "front and rear\nbrake controller\n(achievable)"
	  SID			  "5699"
	  Ports			  [6, 2]
	  Position		  [255, 346, 290, 474]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/front and rear\nbrake controller\n(achievable)"
	  SourceType		  "SubSystem"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "gearbox control\nfor series \nHV and EV"
	  SID			  "5700"
	  Ports			  [4, 3]
	  Position		  [650, 209, 690, 316]
	  FontName		  "Arial"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "gearbox control\nfor series \nHV and EV"
	    Location		    [12, 74, 999, 742]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_out_r"
	      SID		      "5701"
	      Position		      [45, 130, 65, 150]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_out_r"
	      SID		      "5702"
	      Position		      [45, 250, 65, 270]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "prev.\nPout/Pin"
	      SID		      "5703"
	      Position		      [45, 20, 65, 40]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "tires are at\ntraction limit"
	      SID		      "5704"
	      Position		      [45, 75, 65, 95]
	      FontName		      "Arial"
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "5705"
	      Ports		      []
	      Position		      [875, 590, 931, 630]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[229, 259, 687, 388]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "5706"
		  Name			  "This gearbox control block computes the current gear number given the gearbox's\nreq'd output torque and"
		  " speed and an estimate its efficiency.  Upshifts occur, given a\ncertain engine speed,  when the estimated engine "
		  "load falls below the upshift curve\nin engine speed/load space, and downshifts likewise occur when estimated engin"
		  "e\nload rises above the downshift curve.  Separate upshift and downshift curves are\ndefined for each gear.  An up"
		  "shift may not be immediately followed by a downshift.\nIf the tires are about to slip, don't upshift unless the en"
		  "gine would be at max. speed.\nEnforce this rule by setting the load to 1 when the tires are about to slip."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "5707"
	      Position		      [330, 95, 350, 115]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant14"
	      SID		      "5708"
	      Position		      [460, 538, 555, 552]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant15"
	      SID		      "5709"
	      Position		      [390, 403, 485, 417]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      SID		      "5710"
	      Ports		      [1, 2]
	      Position		      [730, 391, 735, 429]
	      BackgroundColor	      "black"
	      ShowName		      off
	      Outputs		      "2"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn"
	      SID		      "5711"
	      Position		      [155, 20, 185, 40]
	      FontName		      "Arial"
	      Expr		      "1/u"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn1"
	      SID		      "5712"
	      Position		      [85, 180, 115, 200]
	      BlockRotation	      270
	      FontName		      "Arial"
	      Expr		      "1/u"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      SID		      "5713"
	      Position		      [560, 510, 685, 530]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <logic>2"
	      SID		      "5714"
	      Position		      [40, 464, 145, 496]
	      ForegroundColor	      "red"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "v_req_limited"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      SID		      "5715"
	      Position		      [560, 570, 685, 590]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From2"
	      SID		      "5716"
	      Position		      [500, 430, 625, 450]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From3"
	      SID		      "5717"
	      Position		      [500, 455, 625, 475]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From4"
	      SID		      "5718"
	      Position		      [500, 365, 625, 385]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      SID		      "5719"
	      Position		      [480, 237, 505, 263]
	      FontName		      "Arial"
	      Gain		      "-1"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto1"
	      SID		      "5720"
	      Position		      [265, 455, 385, 475]
	      NamePlacement	      "alternate"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto2"
	      SID		      "5721"
	      Position		      [265, 479, 385, 501]
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto4"
	      SID		      "5722"
	      Position		      [810, 250, 945, 270]
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto5"
	      SID		      "5723"
	      Position		      [835, 95, 945, 115]
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto6"
	      SID		      "5724"
	      Position		      [835, 170, 945, 190]
	      NamePlacement	      "alternate"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "MOTOR\ntorque\ncapability"
	      SID		      "5725"
	      Position		      [190, 210, 220, 230]
	      BlockRotation	      270
	      FontName		      "Arial"
	      InputValues	      "mc_map_spd*mc_spd_scale"
	      Table		      "mc_max_trq*mc_trq_scale+eps"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "5726"
	      Ports		      [2, 1]
	      Position		      [645, 427, 650, 478]
	      ShowName		      off
	      Inputs		      "2"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      SID		      "5727"
	      Ports		      [2, 1]
	      Position		      [225, 142, 255, 173]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      SID		      "5728"
	      Ports		      [2, 1]
	      Position		      [540, 233, 560, 257]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      RateLimiter
	      Name		      "Rate Limiter"
	      SID		      "5729"
	      Position		      [510, 307, 540, 333]
	      BlockMirror	      on
	      RisingSlewLimit	      "1/(gb_shift_delay+eps)"
	      FallingSlewLimit	      "-1/(gb_shift_delay+eps)"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "5730"
	      Ports		      [1, 1]
	      Position		      [90, 20, 120, 40]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "0.2"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation1"
	      SID		      "5731"
	      Ports		      [1, 1]
	      Position		      [725, 96, 745, 114]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "gb_gears_num"
	      LowerLimit	      "1"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Speed Dependent Shifting"
	      SID		      "5732"
	      Ports		      [1, 2]
	      Position		      [190, 452, 220, 503]
	      SourceBlock	      "lib_controls/SubSystem/Speed Dependent Shifting"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "off"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "5733"
	      Position		      [325, 135, 355, 165]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch3"
	      SID		      "5734"
	      Position		      [705, 530, 735, 560]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch4"
	      SID		      "5735"
	      Position		      [675, 395, 705, 425]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "allow downshift?"
	      SID		      "5736"
	      Ports		      [1, 1]
	      Position		      [420, 42, 450, 78]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"allow downshift?"
		Location		[328, 265, 817, 480]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gearnum"
		  SID			  "5737"
		  Position		  [35, 35, 55, 55]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  SID			  "5738"
		  Ports			  [2, 1]
		  Position		  [375, 43, 405, 67]
		  FontName		  "Arial"
		  Operator		  "NOR"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "5739"
		  Position		  [145, 60, 180, 80]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "5740"
		  Position		  [145, 105, 180, 125]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "5741"
		  Ports			  [2, 1]
		  Position		  [225, 38, 255, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator2"
		  SID			  "5742"
		  Ports			  [2, 1]
		  Position		  [225, 98, 255, 122]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  Outport
		  Name			  "allow shift"
		  SID			  "5743"
		  Position		  [445, 45, 465, 65]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  DstBlock		  "allow shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gearnum"
		  SrcPort		  1
		  Points		  [45, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 25]
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 35]
		    DstBlock		    "Relational\nOperator2"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [15, 0; 0, -15]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 30; -60, 0]
		    DstBlock		    "Memory1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator2"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical\nOperator"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "current\ngear\nnumber"
	      SID		      "5744"
	      Ports		      [2, 1]
	      Position		      [670, 87, 690, 123]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "delta\ngear\nnumber"
	      SID		      "5745"
	      Position		      [600, 144, 630, 176]
	      FontName		      "Arial"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "downshift \ncommand"
	      SID		      "5746"
	      Ports		      [3, 1]
	      Position		      [415, 224, 445, 276]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"downshift \ncommand"
		Location		[431, 372, 906, 667]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "5747"
		  Position		  [45, 98, 75, 112]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "5748"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "5749"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "5750"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "5751"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "5752"
		  Ports			  [1, 1]
		  Position		  [240, 100, 270, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_dnshift_spd|gb_dnshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "5753"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "5754"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "5755"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "5756"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [55, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Product
	      Name		      "gb_spd_in_r"
	      SID		      "5757"
	      Ports		      [2, 1]
	      Position		      [150, 253, 170, 277]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio"
	      SID		      "5758"
	      Position		      [400, 308, 430, 332]
	      BlockMirror	      on
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      Table		      "gb_ratio"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio1"
	      SID		      "5759"
	      Position		      [785, 93, 815, 117]
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      Table		      "gb_ratio"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "gearbox speed\nestimator"
	      SID		      "5760"
	      Ports		      [1, 1]
	      Position		      [225, 250, 255, 280]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"gearbox speed\nestimator"
		Location		[232, 187, 820, 696]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_in_r\nif no gear change"
		  SID			  "5761"
		  Position		  [45, 18, 75, 32]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "5762"
		  Ports			  []
		  Position		  [515, 345, 571, 385]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [497, 485, 832, 570]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "5763"
		    Name		    "The requested motor speed is replaced by an estimate of the\nengine's previous speed whenever the veh"
		    "icle missed the trace\n by more than 1 mph on the last time step."
		    Position		    [167, 41]
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "5764"
		  Position		  [165, 240, 185, 260]
		  BlockMirror		  on
		  Value			  "eps"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "5765"
		  Position		  [315, 165, 335, 185]
		  BlockMirror		  on
		  Value			  "0"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "5766"
		  Position		  [230, 360, 250, 380]
		  BlockMirror		  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "5767"
		  Position		  [230, 460, 250, 480]
		  BlockMirror		  on
		  Value			  "0.11"
		}
		Block {
		  BlockType		  From
		  Name			  "From"
		  SID			  "5768"
		  Position		  [195, 40, 285, 70]
		  BlockMirror		  on
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "gb_spd_in_a"
		}
		Block {
		  BlockType		  From
		  Name			  "From <cyc>"
		  SID			  "5769"
		  Position		  [30, 304, 120, 336]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "cyc_mph_r"
		}
		Block {
		  BlockType		  From
		  Name			  "From <veh>"
		  SID			  "5770"
		  Position		  [30, 99, 85, 131]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "mpha"
		}
		Block {
		  BlockType		  From
		  Name			  "From <wh>/\ntire slip model (m/s)"
		  SID			  "5771"
		  Position		  [30, 184, 120, 216]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "veh_spd_a_rec"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  SID			  "5772"
		  Position		  [150, 97, 190, 133]
		  Gain			  "0.447"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical"
		  SID			  "5773"
		  Ports			  [2, 1]
		  Position		  [375, 317, 405, 348]
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "5774"
		  Position		  [395, 110, 425, 140]
		  X0			  "cyc_mph(1,2)*0.447/wh_radius*fd_ratio*gb_ratio(gb_num_init)"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "5775"
		  Position		  [310, 310, 340, 340]
		  X0			  "1"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "5776"
		  Ports			  [3, 1]
		  Position		  [215, 99, 245, 131]
		  Inputs		  "**/"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational"
		  SID			  "5777"
		  Ports			  [2, 1]
		  Position		  [225, 307, 255, 338]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational1"
		  SID			  "5778"
		  Ports			  [2, 1]
		  Position		  [225, 412, 255, 443]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "5779"
		  Ports			  [2, 1]
		  Position		  [160, 192, 190, 223]
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "5780"
		  Ports			  [2, 1]
		  Position		  [160, 297, 190, 328]
		  Inputs		  "-+"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "5781"
		  Position		  [310, 110, 340, 140]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "5782"
		  Position		  [465, 120, 495, 150]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "dt"
		  SID			  "5783"
		  Ports			  [0, 1]
		  Position		  [165, 408, 185, 432]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "dt"
		    Location		    [240, 561, 480, 665]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "5784"
		    Position		    [25, 25, 45, 45]
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "5785"
		    Position		    [75, 53, 105, 77]
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum4"
		    SID			    "5786"
		    Ports		    [2, 1]
		    Position		    [130, 27, 160, 58]
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "5787"
		    Position		    [185, 38, 215, 52]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Sum4"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Sum4"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Sum4"
		    DstPort		    1
		    }
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  SID			  "5788"
		  Position		  [545, 128, 575, 142]
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Product"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  Labels		  [1, 0]
		  SrcBlock		  "From <wh>/\ntire slip model (m/s)"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -25; 155, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <cyc>"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <veh>"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    DstBlock		    "Gain"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 190]
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Relational"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gb_spd_in_r\nif no gear change"
		  SrcPort		  1
		  Points		  [370, 0]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "From"
		  SrcPort		  1
		  Points		  [0, 50]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "dt"
		  SrcPort		  1
		  DstBlock		  "Relational1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Logical"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical"
		  SrcPort		  1
		  Points		  [30, 0; 0, -200]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational1"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational1"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "load=T/\n(maxT\nat spd)"
	      SID		      "5789"
	      Ports		      [1, 1]
	      Position		      [275, 151, 295, 169]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "0"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev gear\nnumber"
	      SID		      "5790"
	      Position		      [690, 20, 730, 40]
	      BlockMirror	      on
	      FontName		      "Arial"
	      X0		      "1"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev gear\nratio"
	      SID		      "5791"
	      Position		      [265, 310, 300, 330]
	      BlockMirror	      on
	      FontName		      "Arial"
	      X0		      "gb_ratio(1)"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "shifting1"
	      SID		      "5792"
	      Ports		      [1, 1]
	      Position		      [785, 164, 815, 196]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"shifting1"
		Location		[164, 210, 454, 401]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gear\nnumber"
		  SID			  "5793"
		  Position		  [15, 50, 35, 70]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "5794"
		  Position		  [20, 131, 120, 159]
		  FontName		  "Arial"
		  Value			  "gb_shift_delay-1e-6"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "5795"
		  Ports			  [2, 1]
		  Position		  [185, 53, 215, 77]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "time since last shift"
		  SID			  "5796"
		  Ports			  [1, 1]
		  Position		  [65, 43, 125, 77]
		  ShowName		  off
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('time since\\nlast shift')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "time since last shift"
		    Location		    [16, 396, 306, 535]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "5797"
		    Position		    [10, 60, 30, 80]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "just shifted"
		    SID			    "5798"
		    Ports		    [1, 1]
		    Position		    [60, 57, 110, 83]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('just\\nshifted')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "just shifted"
		    Location		    [140, 214, 463, 359]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "5799"
		    Position		    [55, 55, 75, 75]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "5800"
		    Position		    [120, 55, 155, 75]
		    FontName		    "Arial"
		    X0			    "1"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    SID			    "5801"
		    Ports		    [2, 1]
		    Position		    [190, 58, 220, 82]
		    FontName		    "Arial"
		    Operator		    "~="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "5802"
		    Position		    [250, 60, 270, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, 30; 75, 0; 0, -20]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "timer"
		    SID			    "5803"
		    Ports		    [1, 1]
		    Position		    [140, 55, 175, 85]
		    ShowName		    off
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskDisplay		    "disp('timer')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "timer"
		    Location		    [455, 179, 859, 394]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "trigger"
		    SID			    "5804"
		    Position		    [15, 125, 35, 145]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "5805"
		    Position		    [100, 100, 120, 120]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant1"
		    SID			    "5806"
		    Position		    [100, 150, 120, 170]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant2"
		    SID			    "5807"
		    Position		    [150, 5, 170, 25]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "5808"
		    Position		    [265, 59, 295, 91]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "no-lag\nReset Integrator"
		    SID			    "5809"
		    Ports		    [3, 1]
		    Position		    [155, 96, 205, 174]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskType		    "No-lag Reset Integrator"
		    MaskDescription	    "No-lag Reset Integrator"
		    MaskHelp		    "Integrates first input using Euler technique.\\nAt the time step that input 2 <> zero,\\noutput i"
		    "s reset to input 3."
		    MaskPromptString	    "Initial Value"
		    MaskStyleString	    "edit"
		    MaskVariables	    "initval=@1;"
		    MaskTunableValueString  "on"
		    MaskEnableString	    "on"
		    MaskVisibilityString    "on"
		    MaskToolTipString	    "on"
		    MaskDisplay		    "disp('1/s\\nw/ reset\\nno lag')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "15"
		    System {
		    Name		    "no-lag\nReset Integrator"
		    Location		    [258, 616, 780, 880]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "5810"
		    Position		    [60, 100, 80, 120]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    SID			    "5811"
		    Position		    [60, 140, 80, 160]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_3"
		    SID			    "5812"
		    Position		    [45, 185, 65, 205]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "5813"
		    Position		    [125, 205, 145, 225]
		    BlockRotation	    270
		    NamePlacement	    "alternate"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "5814"
		    Position		    [340, 55, 375, 75]
		    BlockMirror		    on
		    FontName		    "Arial"
		    X0			    "initval"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    SID			    "5815"
		    Ports		    [2, 1]
		    Position		    [160, 96, 180, 114]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    SID			    "5816"
		    Ports		    [2, 1]
		    Position		    [230, 90, 250, 110]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "5817"
		    Position		    [290, 139, 320, 171]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "dt"
		    SID			    "5818"
		    Ports		    [0, 1]
		    Position		    [112, 50, 138, 80]
		    BlockRotation	    270
		    BlockMirror		    on
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "dt"
		    Location		    [80, 285, 429, 424]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "5819"
		    Position		    [65, 60, 85, 80]
		    FontName		    "Arial"
		    FontSize		    8
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "5820"
		    Position		    [125, 85, 160, 105]
		    FontName		    "Arial"
		    FontSize		    8
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    SID			    "5821"
		    Ports		    [2, 1]
		    Position		    [205, 65, 225, 85]
		    FontName		    "Arial"
		    FontSize		    8
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "5822"
		    Position		    [255, 65, 275, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [10, 0; 0, -15]
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "in_2==0"
		    SID			    "5823"
		    Ports		    [2, 1]
		    Position		    [160, 143, 190, 167]
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "5824"
		    Position		    [455, 145, 475, 165]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_3"
		    SrcPort		    1
		    Points		    [200, 0; 0, -30]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "in_2==0"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "dt"
		    SrcPort		    1
		    Points		    [0, 15]
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    Points		    [-130, 0; 0, 30]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    Points		    [10, 0; 0, 45]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    Points		    [85, 0]
		    Branch {
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -90]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "in_2==0"
		    SrcPort		    1
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    Points		    [0, -40]
		    DstBlock		    "in_2==0"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "time"
		    SID			    "5825"
		    Position		    [350, 65, 370, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    DstBlock		    "time"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "trigger"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, -60]
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Constant2"
		    SrcPort		    1
		    Points		    [35, 0; 0, 50]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant1"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "no-lag\nReset Integrator"
		    SrcPort		    1
		    Points		    [35, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "5826"
		    Position		    [225, 60, 245, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "just shifted"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "just shifted"
		    SrcPort		    1
		    DstBlock		    "timer"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "timer"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "5827"
		  Position		  [250, 55, 270, 75]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gear\nnumber"
		  SrcPort		  1
		  DstBlock		  "time since last shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [15, 0; 0, -75]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "time since last shift"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "upshift\n command"
	      SID		      "5828"
	      Ports		      [3, 1]
	      Position		      [415, 124, 445, 176]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"upshift\n command"
		Location		[324, 355, 799, 650]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  SID			  "5829"
		  Position		  [45, 103, 75, 117]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  SID			  "5830"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  SID			  "5831"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "5832"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "5833"
		  Ports			  [2, 1]
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  SID			  "5834"
		  Ports			  [1, 1]
		  Position		  [245, 100, 275, 150]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear interplation (extrapolation outside of bounds) to determine th"
		  "e shift point load fraction associated with the current gear number and speed. \n\nThe Speeds parameter should be "
		  "defined as an array of vectors containing speeds for each gear number.  The Load Fractions parameter should be def"
		  "ined as a array of vectors containing load fractions indexed by the speeds in the Speeds parameter for each gear n"
		  "umber."
		  MaskHelp		  "Reference the base workspace variables - gb_**shift_spd and gb_**shift_load  where ** is either up fo"
		  "r upshift conditions or dn for downshift conditions.\n\nOr define the arrays as follows:\n\n{[spd1 spd2 spd3 spd4]"
		  "; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array c"
		  "ontains one row for each gear in the gearbox.  Speeds should be defined in rad/s and loads as a decimal fraction.\n"
		  "\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_upshift_spd|gb_upshift_load"
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "5835"
		    Position		    [25, 33, 55, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "5836"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "5837"
		    Position		    [185, 33, 215, 47]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  SID			  "5838"
		  Position		  [420, 43, 450, 57]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [50, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Product
	      Name		      "~gb_trq_in_r"
	      SID		      "5839"
	      Ports		      [3, 1]
	      Position		      [150, 132, 170, 168]
	      FontName		      "Arial"
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear number, out"
	      SID		      "5840"
	      Position		      [800, 535, 820, 555]
	      FontName		      "Arial"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear ratio, out"
	      SID		      "5841"
	      Position		      [800, 375, 820, 395]
	      FontName		      "Arial"
	      Port		      "2"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "shifting, out"
	      SID		      "5842"
	      Position		      [800, 420, 820, 440]
	      FontName		      "Arial"
	      Port		      "3"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "gearbox speed\nestimator"
	      SrcPort		      1
	      Points		      [60, 0]
	      Branch {
		Points			[0, -20]
		DstBlock		"MOTOR\ntorque\ncapability"
		DstPort			1
	      }
	      Branch {
		Points			[55, 0]
		Branch {
		  DstBlock		  "downshift \ncommand"
		  DstPort		  3
		}
		Branch {
		  Points		  [0, -100]
		  DstBlock		  "upshift\n command"
		  DstPort		  3
		}
	      }
	    }
	    Line {
	      SrcBlock		      "gb_spd_in_r"
	      SrcPort		      1
	      DstBlock		      "gearbox speed\nestimator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "current\ngear\nnumber"
	      SrcPort		      1
	      DstBlock		      "Saturation1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Fcn"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "prev.\nPout/Pin"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gb_trq_out_r"
	      SrcPort		      1
	      DstBlock		      "~gb_trq_in_r"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "upshift\n command"
	      SrcPort		      1
	      Points		      [115, 0]
	      Branch {
		DstBlock		"delta\ngear\nnumber"
		DstPort			1
	      }
	      Branch {
		Points			[0, 10]
		DstBlock		"delta\ngear\nnumber"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "gear ratio"
	      SrcPort		      1
	      DstBlock		      "prev gear\nratio"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Rate Limiter"
	      SrcPort		      1
	      DstBlock		      "gear ratio"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gb_spd_out_r"
	      SrcPort		      1
	      DstBlock		      "gb_spd_in_r"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "downshift \ncommand"
	      SrcPort		      1
	      DstBlock		      "Gain1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      DstBlock		      "Product3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      Points		      [10, 0; 0, -75]
	      DstBlock		      "delta\ngear\nnumber"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "allow downshift?"
	      SrcPort		      1
	      Points		      [55, 0; 0, 180]
	      DstBlock		      "Product3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "prev gear\nratio"
	      SrcPort		      1
	      Points		      [-160, 0; 0, -50]
	      Branch {
		DstBlock		"Fcn1"
		DstPort			1
	      }
	      Branch {
		DstBlock		"gb_spd_in_r"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "delta\ngear\nnumber"
	      SrcPort		      1
	      Points		      [15, 0; 0, -45]
	      DstBlock		      "current\ngear\nnumber"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Fcn1"
	      SrcPort		      1
	      Points		      [0, -15]
	      DstBlock		      "~gb_trq_in_r"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "MOTOR\ntorque\ncapability"
	      SrcPort		      1
	      Points		      [0, -40]
	      DstBlock		      "Product2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "load=T/\n(maxT\nat spd)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "~gb_trq_in_r"
	      SrcPort		      1
	      DstBlock		      "Product2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Fcn"
	      SrcPort		      1
	      Points		      [10, 0; 0, 85; -75, 0; 0, 35]
	      DstBlock		      "~gb_trq_in_r"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "load=T/\n(maxT\nat spd)"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "tires are at\ntraction limit"
	      SrcPort		      1
	      Points		      [230, 0; 0, 65]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		DstBlock		"upshift\n command"
		DstPort			2
	      }
	      Branch {
		Points			[0, 100]
		DstBlock		"downshift \ncommand"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Saturation1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, 0]
		Branch {
		  Points		  [0, -75]
		  DstBlock		  "prev gear\nnumber"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "gear ratio1"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[0, 75]
		Branch {
		  DstBlock		  "shifting1"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 80]
		  Branch {
		    Points		    [0, 60]
		    DstBlock		    "Rate Limiter"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Goto4"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Line {
	      SrcBlock		      "prev gear\nnumber"
	      SrcPort		      1
	      Points		      [-160, 0]
	      Branch {
		Points			[-130, 0; 0, 30]
		Branch {
		  DstBlock		  "allow downshift?"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 75]
		  Branch {
		    DstBlock		    "upshift\n command"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 100]
		    DstBlock		    "downshift \ncommand"
		    DstPort		    1
		  }
		}
	      }
	      Branch {
		Points			[0, 65]
		DstBlock		"current\ngear\nnumber"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant14"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant15"
	      SrcPort		      1
	      DstBlock		      "Switch4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From4"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Switch4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Switch4"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From2"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From3"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch4"
	      SrcPort		      1
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <logic>2"
	      SrcPort		      1
	      DstBlock		      "Speed Dependent Shifting"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      1
	      DstBlock		      "Goto1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      2
	      DstBlock		      "Goto2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      Points		      [0, -15]
	      DstBlock		      "gear ratio, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      Points		      [0, 10]
	      DstBlock		      "shifting, out"
	      DstPort		      1
	    }
	    Line {
	      Labels		      [1, 0]
	      SrcBlock		      "Switch3"
	      SrcPort		      1
	      DstBlock		      "gear number, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gear ratio1"
	      SrcPort		      1
	      DstBlock		      "Goto5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "shifting1"
	      SrcPort		      1
	      DstBlock		      "Goto6"
	      DstPort		      1
	    }
	    Annotation {
	      SID		      "5843"
	      Name		      "default gear number\ncalculation"
	      Position		      [889, 304]
	    }
	    Annotation {
	      SID		      "5844"
	      Name		      "default shifting\ncalculation"
	      Position		      [893, 211]
	    }
	    Annotation {
	      SID		      "5845"
	      Name		      "default gear ratio\ncalculation"
	      Position		      [882, 74]
	    }
	    Annotation {
	      SID		      "5846"
	      Name		      "local GOTO blocks:"
	      Position		      [887, 42]
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "key_on"
	  SID			  "5847"
	  Ports			  [0, 1]
	  Position		  [650, 470, 690, 500]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  MaskType		  "Repeating table"
	  MaskDescription	  "Repeating table.\nEnter values of time and output for first cycle."
	  MaskHelp		  "Repeats cycle given in table. Time values should be monotonically increasing."
	  MaskPromptString	  "Time values:|Output values:"
	  MaskStyleString	  "edit,edit"
	  MaskVariables		  "t=@1;y=@2;"
	  MaskTunableValueString  "on,on"
	  MaskCallbackString	  "|"
	  MaskEnableString	  "on,on"
	  MaskVisibilityString	  "on,on"
	  MaskToolTipString	  "on,on"
	  MaskInitialization	  "period = max(t);"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskPortRotate	  "default"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "vc_key_on(:,1)|vc_key_on(:,2)"
	  System {
	    Name		    "key_on"
	    Location		    [7, 74, 300, 156]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Clock
	      Name		      "Clock"
	      SID		      "5848"
	      Position		      [15, 25, 35, 45]
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn1"
	      SID		      "5849"
	      Position		      [80, 25, 120, 45]
	      Expr		      "rem(u[1],period)"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "Look-Up Table"
	      SID		      "5850"
	      Position		      [180, 23, 220, 47]
	      InputValues	      "t"
	      Table		      "y"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "out_1"
	      SID		      "5851"
	      Position		      [255, 25, 275, 45]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Look-Up Table"
	      SrcPort		      1
	      DstBlock		      "out_1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Clock"
	      SrcPort		      1
	      DstBlock		      "Fcn1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Fcn1"
	      SrcPort		      1
	      DstBlock		      "Look-Up Table"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "motor controller\nlogic"
	  SID			  "5852"
	  Ports			  [4, 1]
	  Position		  [650, 37, 680, 138]
	  NamePlacement		  "alternate"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "motor controller\nlogic"
	    Location		    [219, 174, 882, 616]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "bus voltage"
	      SID		      "5853"
	      Position		      [40, 30, 60, 50]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd input\npower (W)"
	      SID		      "5854"
	      Position		      [40, 160, 60, 180]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req'd output\nspd (rad/s)"
	      SID		      "5855"
	      Position		      [40, 280, 60, 300]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      SID		      "5856"
	      Position		      [40, 385, 60, 405]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs"
	      SID		      "5857"
	      Position		      [205, 123, 235, 147]
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs1"
	      SID		      "5858"
	      Position		      [105, 278, 135, 302]
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "5859"
	      Ports		      []
	      Position		      [590, 385, 646, 425]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[263, 139, 778, 219]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "5860"
		  Name			  "This block models a motor/controller's logic, modulating the power input requirement as follows:\n- enfo"
		  "rcing the maximum current limit of the motor/controller\n- shutting the motor off if the average speed over the ti"
		  "me step ==0\n- shutting the motor off if the transmission is shifting."
		  Position		  [257, 40]
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "5861"
	      Position		      [95, 79, 165, 101]
	      FontName		      "Arial"
	      Value		      "mc_max_crrnt"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "5862"
	      Position		      [140, 348, 175, 372]
	      FontName		      "Arial"
	      Value		      "0.001"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "5863"
	      Position		      [500, 232, 520, 258]
	      BlockMirror	      on
	      FontName		      "Arial"
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <sdo>"
	      SID		      "5864"
	      Position		      [555, 24, 645, 46]
	      GotoTag		      "mc_crrnt_limited"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "5865"
	      Ports		      [1, 1]
	      Position		      [434, 240, 466, 275]
	      BlockRotation	      270
	      NamePlacement	      "alternate"
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "5866"
	      Position		      [110, 25, 140, 55]
	      X0		      "ess_module_num*mean(ess_voc(1,:))"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      SID		      "5867"
	      Ports		      [2, 1]
	      Position		      [270, 37, 300, 68]
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      SID		      "5868"
	      Ports		      [2, 1]
	      Position		      [210, 36, 230, 54]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "5869"
	      Ports		      [2, 1]
	      Position		      [230, 282, 260, 313]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "5870"
	      Ports		      [2, 1]
	      Position		      [490, 17, 520, 48]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Sign"
	      SID		      "5871"
	      Ports		      [1, 1]
	      Position		      [270, 157, 300, 183]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Sign"
	      MaskDescription	      "y = sign(x)"
	      MaskHelp		      "Sign Function:\\n\\t\\t\\ty = 1 if x > 0\\n\\t\\t\\ty = 0 if x = 0\\n\\t\\t\\ty = -1 if x < 0"
	      MaskDisplay	      "plot(-50,-50,50,50,[-50,50],[0,0],[0,0],[-50,50],[-40,0],[-30,-30],[0,40],[30,30])"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Sign"
		Location		[159, 417, 467, 586]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "5872"
		  Position		  [35, 30, 55, 50]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "5873"
		  Position		  [65, 105, 85, 125]
		  Value			  "0"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "5874"
		  Ports			  [2, 1]
		  Position		  [140, 32, 170, 63]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "5875"
		  Ports			  [2, 1]
		  Position		  [140, 92, 170, 123]
		  Operator		  "<"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "5876"
		  Ports			  [2, 1]
		  Position		  [215, 64, 235, 91]
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "5877"
		  Position		  [265, 70, 285, 90]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  Points		  [10, 0; 0, 20]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  Points		  [10, 0; 0, -25]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    Points		    [0, -60]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    Points		    [0, 60]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "5878"
	      Position		      [495, 180, 525, 210]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "current-limited\npower"
	      SID		      "5879"
	      Ports		      [2, 1]
	      Position		      [365, 51, 385, 69]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "true if motor\nshould be\nshut down"
	      SID		      "5880"
	      Ports		      [2, 1]
	      Position		      [385, 292, 415, 323]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd input\npower (W)1"
	      SID		      "5881"
	      Position		      [590, 185, 610, 205]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Abs1"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "true if motor\nshould be\nshut down"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      Points		      [290, 0; 0, -80]
	      DstBlock		      "true if motor\nshould be\nshut down"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [0, -40]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [20, 0; 0, -40]
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Abs"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sign"
	      SrcPort		      1
	      Points		      [20, 0; 0, -105]
	      DstBlock		      "current-limited\npower"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "req'd input\npower (W)1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "current-limited\npower"
	      SrcPort		      1
	      Points		      [60, 0; 0, 125]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, -20]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"MinMax"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"current-limited\npower"
		DstPort			1
	      }
	      Branch {
		Points			[0, -15]
		DstBlock		"Relational\nOperator2"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Goto <sdo>"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "true if motor\nshould be\nshut down"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [10, 0; 0, -55]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "req'd output\nspd (rad/s)"
	      SrcPort		      1
	      DstBlock		      "Abs1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "bus voltage"
	      SrcPort		      1
	      DstBlock		      "Memory"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "req'd input\npower (W)"
	      SrcPort		      1
	      Points		      [105, 0]
	      Branch {
		Points			[0, -35]
		DstBlock		"Abs"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Sign"
		DstPort			1
	      }
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "series 'clutch'\ncontrol"
	  SID			  "5882"
	  Ports			  [1, 1]
	  Position		  [650, 386, 685, 424]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "series 'clutch'\ncontrol"
	    Location		    [295, 159, 784, 433]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "engine on"
	      SID		      "5883"
	      Position		      [35, 33, 65, 47]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "5884"
	      Ports		      []
	      Position		      [420, 220, 476, 260]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[315, 744, 770, 896]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "5885"
		  Name			  "There is no clutch, per se, in the series hybrid vehicle, that is connected to\nthe engine.  This clutch"
		  " control is provided to tell the fuel converter (a.k.a. engine)\nwhen it can spin up freely.  The fuel converter s"
		  "pins up or down when the 'clutch' is\ndisengaged, and provides torque when the 'clutch' is engaged (signal==3).\n\n"
		  "Here, the fuel converter spins up when the engine has been off within the\npast 0.5 s (or one time step, whichever"
		  " is greater).  At all other times, the fuel\nconverter provides torque to the generator."
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Clock
	      Name		      "Clock"
	      SID		      "5886"
	      Position		      [45, 190, 65, 210]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "5887"
	      Position		      [385, 105, 405, 125]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant7"
	      SID		      "5888"
	      Position		      [385, 15, 405, 35]
	      BlockMirror	      on
	      Value		      "3"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory1"
	      SID		      "5889"
	      Position		      [120, 50, 150, 80]
	      X0		      "cyc_mph(1,2)>0"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory2"
	      SID		      "5890"
	      Position		      [115, 220, 145, 250]
	      X0		      "-1"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      SID		      "5891"
	      Ports		      [2, 1]
	      Position		      [180, 192, 210, 223]
	      Inputs		      "+-"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "5892"
	      Position		      [380, 55, 410, 85]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "5893"
	      Position		      [275, 55, 305, 85]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      TransportDelay
	      Name		      "Transport\nDelay"
	      SID		      "5894"
	      Ports		      [1, 1]
	      Position		      [115, 130, 145, 160]
	      DelayTime		      "0.5"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping1"
	      SID		      "5895"
	      Ports		      [2, 1]
	      Position		      [180, 41, 210, 74]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping2"
	      SID		      "5896"
	      Ports		      [2, 1]
	      Position		      [180, 121, 210, 154]
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "clutch\nstate"
	      SID		      "5897"
	      Position		      [445, 63, 475, 77]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "engine on"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		Points			[0, 25]
		Branch {
		  Points		  [0, 45]
		  Branch {
		    Points		    [70, 0]
		    DstBlock		    "clutch\nslipping2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 35]
		    DstBlock		    "Transport\nDelay"
		    DstPort		    1
		  }
		}
		Branch {
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[70, 0]
		DstBlock		"clutch\nslipping1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "Switch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory2"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Clock"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		Points			[0, 35]
		DstBlock		"Memory2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Sum"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping2"
	      SrcPort		      1
	      Points		      [25, 0; 0, -60]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Transport\nDelay"
	      SrcPort		      1
	      DstBlock		      "clutch\nslipping2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping1"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "clutch\nstate"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant7"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory1"
	      SrcPort		      1
	      DstBlock		      "clutch\nslipping1"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "sim stop\nsubsystem"
	  SID			  "5898"
	  Ports			  []
	  Position		  [40, 15, 70, 65]
	  LibraryVersion	  "1.479"
	  SourceBlock		  "lib_controls/SubSystem/sim stop\nsubsystem"
	  SourceType		  "SubSystem"
	}
	Line {
	  SrcBlock		  "motor controller\nlogic"
	  SrcPort		  1
	  DstBlock		  "Goto <mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <ess>"
	  SrcPort		  1
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <mc>"
	  SrcPort		  1
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <mc>1"
	  SrcPort		  1
	  Points		  [15, 0]
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <mc>2"
	  SrcPort		  1
	  Points		  [15, 0]
	  DstBlock		  "motor controller\nlogic"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <gb>2"
	  SrcPort		  1
	  Points		  [0, -5]
	  DstBlock		  "gearbox control\nfor series \nHV and EV"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <gb>1"
	  SrcPort		  1
	  Points		  [5, 0]
	  DstBlock		  "gearbox control\nfor series \nHV and EV"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From<gb>"
	  SrcPort		  1
	  Points		  [0, 10]
	  DstBlock		  "gearbox control\nfor series \nHV and EV"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>3"
	  SrcPort		  1
	  DstBlock		  "gearbox control\nfor series \nHV and EV"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "series 'clutch'\ncontrol"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <cs>"
	  SrcPort		  1
	  DstBlock		  "series 'clutch'\ncontrol"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "key_on"
	  SrcPort		  1
	  DstBlock		  "Goto <fc>\n<mc><pb>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>2"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <wh>3"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From<wh>4"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <wh>5"
	  SrcPort		  1
	  Points		  [0, -10]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>4"
	  SrcPort		  1
	  Points		  [65, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>5"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>7"
	  SrcPort		  1
	  DstBlock		  "braking strategy"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  2
	  Points		  [130, 0]
	  Branch {
	    DstBlock		    "Sum"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -55]
	    DstBlock		    "Goto <wh>8"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  1
	  Points		  [0, 5; 5, 0]
	  Branch {
	    DstBlock		    "braking strategy"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [170, 0]
	    Branch {
	      Points		      [0, -35]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Branch {
	      Points		      [0, 15]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "From <veh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  2
	  Points		  [0, 5]
	  DstBlock		  "Goto <wh>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  3
	  Points		  [0, 15]
	  DstBlock		  "Goto <wh>2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Relational\nOperator"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>6"
	  SrcPort		  1
	  DstBlock		  "Relational\nOperator"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <wh>1"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox control\nfor series \nHV and EV"
	  SrcPort		  3
	  DstBlock		  "Goto <gb>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox control\nfor series \nHV and EV"
	  SrcPort		  2
	  DstBlock		  "Goto <gb>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearbox control\nfor series \nHV and EV"
	  SrcPort		  1
	  DstBlock		  "Goto"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  4
	  Points		  [10, 0]
	  DstBlock		  "Goto <wh>6"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  5
	  Points		  [5, 0]
	  DstBlock		  "Goto <wh>7"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Ground"
	  SrcPort		  1
	  Points		  [25, 0; 0, -70]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  6
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "Adaptive\ncontrol strategy\n<cs>"
      SID		      "315"
      Ports		      [1, 1]
      Position		      [580, 319, 610, 351]
      ShowPortLabels	      "none"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_cs.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"Adaptive\ncontrol strategy\n<cs>"
	Location		[202, 74, 955, 744]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "trq and spd req'd\ninto clutch\n(N*m, rad/s)"
	  SID			  "5899"
	  Position		  [35, 113, 65, 127]
	  IconDisplay		  "Port number"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Delta SOC\nexpected\nfrom regen"
	  SID			  "5900"
	  Ports			  [1, 1]
	  Position		  [135, 172, 165, 208]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "Delta SOC\nexpected\nfrom regen"
	    Location		    [72, 664, 662, 948]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "trq and spd req'd\ninto clutch\n(N*m, rad/s)"
	      SID		      "5901"
	      Position		      [50, 188, 80, 202]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      From
	      Name		      " \n"
	      SID		      "5902"
	      Position		      [90, 26, 165, 54]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "  1"
	      SID		      "5903"
	      Position		      [325, 208, 350, 232]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      " 2"
	      SID		      "5904"
	      Position		      [200, 153, 225, 177]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Delta\nSOC"
	      SID		      "5905"
	      Ports		      [2, 1]
	      Position		      [265, 48, 290, 77]
	      Inputs		      "-+"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From<mc>1"
	      SID		      "5906"
	      Position		      [105, 135, 190, 165]
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "mc_trq_out_a"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "5907"
	      Ports		      [2, 1]
	      Position		      [300, 162, 330, 193]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory1"
	      SID		      "5908"
	      Position		      [210, 29, 240, 51]
	      X0		      "ess_init_soc"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Regen \n(Tmc<0, \nbut Tfc<=0)"
	      SID		      "5909"
	      Position		      [375, 165, 405, 195]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Regen flag conditions"
	      SID		      "5910"
	      Position		      [195, 198, 220, 222]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "5911"
	      Ports		      [2, 1]
	      Position		      [240, 187, 270, 218]
	      ShowName		      off
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "5912"
	      Ports		      [2, 1]
	      Position		      [240, 142, 270, 173]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "5913"
	      Ports		      [1, 1]
	      Position		      [315, 100, 345, 130]
	      ShowName		      off
	      InputPortMap	      "u0"
	      UpperLimit	      "1"
	      LowerLimit	      "0"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Subsystem"
	      SID		      "5914"
	      Ports		      [1, 1]
	      Position		      [435, 164, 500, 196]
	      ShowName		      off
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Running Average"
	      MaskDescription	      "Running Average"
	      MaskHelp		      "Output is the average of the last (Averaging Time) seconds of input."
	      MaskPromptString	      "Averaging Time (s)"
	      MaskStyleString	      "edit"
	      MaskVariables	      "n=@1;"
	      MaskTunableValueString  "on"
	      MaskEnableString	      "on"
	      MaskVisibilityString    "on"
	      MaskToolTipString	      "on"
	      MaskDisplay	      "disp('Running\\nAverage')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "cs_regen_avg_time"
	      System {
		Name			"Subsystem"
		Location		[137, 550, 582, 766]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "5915"
		  Position		  [30, 55, 50, 75]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "1/average time"
		  SID			  "5916"
		  Position		  [255, 154, 295, 176]
		  FontName		  "Arial"
		  Value			  "1/n"
		}
		Block {
		  BlockType		  Integrator
		  Name			  "Integrator"
		  SID			  "5917"
		  Ports			  [1, 1]
		  Position		  [80, 55, 100, 75]
		  ShowName		  off
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "5918"
		  Ports			  [2, 1]
		  Position		  [340, 66, 360, 84]
		  ShowName		  off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "5919"
		  Ports			  [2, 1]
		  Position		  [225, 60, 245, 80]
		  ShowName		  off
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  TransportDelay
		  Name			  "Transport\nDelay"
		  SID			  "5920"
		  Ports			  [1, 1]
		  Position		  [155, 90, 195, 120]
		  DelayTime		  "n"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "5921"
		  Position		  [390, 65, 410, 85]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "1/average time"
		  SrcPort		  1
		  Points		  [15, 0; 0, -85]
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  DstBlock		  "Integrator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Transport\nDelay"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Integrator"
		  SrcPort		  1
		  Points		  [25, 0]
		  Branch {
		    Points		    [0, 40]
		    DstBlock		    "Transport\nDelay"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      Selector
	      Name		      "trq"
	      SID		      "5922"
	      Ports		      [1, 1]
	      Position		      [155, 180, 185, 210]
	      InputPortWidth	      "2"
	      IndexOptions	      "Index vector (dialog)"
	      Indices		      "1"
	      OutputSizes	      "1"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Delta SOC\nregen"
	      SID		      "5923"
	      Position		      [535, 173, 565, 187]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Delta\nSOC"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Regen \n(Tmc<0, \nbut Tfc<=0)"
	      SrcPort		      1
	      DstBlock		      "Subsystem"
	      DstPort		      1
	    }
	    Line {
	      Labels		      [0, 0]
	      SrcBlock		      "Subsystem"
	      SrcPort		      1
	      DstBlock		      "Delta SOC\nregen"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      DstBlock		      "Regen \n(Tmc<0, \nbut Tfc<=0)"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      " \n"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, 30]
		DstBlock		"Delta\nSOC"
		DstPort			2
	      }
	      Branch {
		DstBlock		"Memory1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Memory1"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Delta\nSOC"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Regen \n(Tmc<0, \nbut Tfc<=0)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "trq and spd req'd\ninto clutch\n(N*m, rad/s)"
	      SrcPort		      1
	      DstBlock		      "trq"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "  1"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Regen \n(Tmc<0, \nbut Tfc<=0)"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "trq"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Regen flag conditions"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      " 2"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From<mc>1"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Finds operation \npoint - energy/emissions \nweighting"
	  SID			  "5924"
	  Ports			  [2, 1]
	  Position		  [260, 145, 330, 205]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "Finds operation \npoint - energy/emissions \nweighting"
	    Location		    [39, 135, 564, 657]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "trq and spd req'd\ninto clutch\n(N*m, rad/s)"
	      SID		      "5925"
	      Position		      [45, 23, 75, 37]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Delta SOC\nexpected from\nregen"
	      SID		      "5926"
	      Position		      [40, 98, 70, 112]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From<cyc>"
	      SID		      "5927"
	      Position		      [25, 200, 90, 220]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "cyc_mph_r"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From<ess>"
	      SID		      "5928"
	      Position		      [25, 379, 100, 401]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_tmp"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From<ex>"
	      SID		      "5929"
	      Position		      [20, 309, 95, 331]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ex_cat_tmp"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From<fc>"
	      SID		      "5930"
	      Position		      [20, 259, 95, 281]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "fc_clt_tmp"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From<mc>2"
	      SID		      "5931"
	      Position		      [35, 165, 80, 185]
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "5932"
	      Position		      [115, 305, 130, 335]
	      X0		      "amb_tmp"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory1"
	      SID		      "5933"
	      Position		      [115, 255, 130, 285]
	      X0		      "amb_tmp"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory2"
	      SID		      "5934"
	      Position		      [120, 375, 135, 405]
	      X0		      "amb_tmp"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Minimize the \nenergy used \nand emissions"
	      SID		      "5935"
	      Ports		      [1, 1]
	      Position		      [320, 201, 370, 249]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"Minimize the \nenergy used \nand emissions"
		Location		[202, 74, 955, 744]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "input\nvector"
		  SID			  "5936"
		  Position		  [20, 198, 50, 212]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "  1"
		  SID			  "5937"
		  Position		  [265, 118, 290, 142]
		  ShowName		  off
		  Value			  "0"
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux"
		  SID			  "5938"
		  Ports			  [1, 8]
		  Position		  [75, 117, 90, 293]
		  ShowName		  off
		  Outputs		  "8"
		}
		Block {
		  BlockType		  From
		  Name			  "From"
		  SID			  "5939"
		  Position		  [15, 320, 130, 340]
		  BackgroundColor	  "cyan"
		  ShowName		  off
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "acc_elec_pwr_est"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  SID			  "5940"
		  Ports			  [1, 1]
		  Position		  [190, 75, 220, 105]
		  BlockRotation		  270
		  BlockMirror		  on
		  NamePlacement		  "alternate"
		  ShowName		  off
		  Operator		  "NOT"
		  Inputs		  "1"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Min. Energy/emis"
		  SID			  "5941"
		  Ports			  [9, 2, 1]
		  Position		  [180, 131, 230, 299]
		  ShowPortLabels	  "none"
		  TreatAsAtomicUnit	  on
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "Min. Energy/emis"
		    Location		    [349, 95, 950, 765]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "81"
		    Block {
		    BlockType		    Inport
		    Name		    "Treq"
		    SID			    "5942"
		    Position		    [30, 33, 60, 47]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "wreq"
		    SID			    "5943"
		    Position		    [25, 128, 55, 142]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "DeltaSOC\nregen"
		    SID			    "5944"
		    Position		    [30, 318, 60, 332]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "SOC"
		    SID			    "5945"
		    Position		    [30, 388, 60, 402]
		    Port		    "4"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "cyc_mph_r"
		    SID			    "5946"
		    Position		    [40, 583, 70, 597]
		    Port		    "5"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "fc_clt_tmp"
		    SID			    "5947"
		    Position		    [40, 653, 70, 667]
		    Port		    "6"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "ex_cat_tmp"
		    SID			    "5948"
		    Position		    [35, 483, 65, 497]
		    Port		    "7"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "ess_tmp"
		    SID			    "5949"
		    Position		    [40, 793, 70, 807]
		    Port		    "8"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Elect\nAux \nLoad\nPower"
		    SID			    "5950"
		    Position		    [25, 168, 55, 182]
		    Port		    "9"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    SID			    "5951"
		    Ports		    []
		    Position		    [310, 15, 330, 35]
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    ">0"
		    SID			    "5952"
		    Ports		    [1, 1]
		    Position		    [200, 645, 230, 675]
		    InputPortMap	    "u0"
		    UpperLimit		    "inf"
		    LowerLimit		    "0"
		    }
		    Block {
		    BlockType		    Lookup
		    Name		    "CO temp eff"
		    SID			    "5953"
		    Position		    [155, 458, 185, 482]
		    InputValues		    "ex_cat_tmp_range"
		    Table		    "ex_cat_co_frac"
		    }
		    Block {
		    BlockType		    Demux
		    Name		    "Demux"
		    SID			    "5954"
		    Ports		    [1, 2]
		    Position		    [485, 406, 495, 464]
		    ShowName		    off
		    Outputs		    "2"
		    }
		    Block {
		    BlockType		    Lookup
		    Name		    "HC temp eff"
		    SID			    "5955"
		    Position		    [155, 418, 185, 442]
		    InputValues		    "ex_cat_tmp_range"
		    Table		    "ex_cat_hc_frac"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux2"
		    SID			    "5956"
		    Ports		    [14, 1]
		    Position		    [295, 55, 300, 810]
		    ShowName		    off
		    Inputs		    "14"
		    }
		    Block {
		    BlockType		    Lookup
		    Name		    "NOx temp eff"
		    SID			    "5957"
		    Position		    [155, 498, 185, 522]
		    InputValues		    "ex_cat_tmp_range"
		    Table		    "ex_cat_nox_frac"
		    }
		    Block {
		    BlockType		    Lookup
		    Name		    "PM temp eff"
		    SID			    "5958"
		    Position		    [155, 543, 185, 567]
		    InputValues		    "ex_cat_tmp_range"
		    Table		    "ex_cat_pm_frac"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-Function"
		    SID			    "5959"
		    Ports		    [1, 1]
		    Position		    [335, 418, 455, 452]
		    FunctionName	    "minimum_energy9"
		    Parameters		    "tc_mc_to_fc_ratio,fc_map_spd,fc_map_trq,fc_max_trq,fc_fuel_map,fc_nox_map,fc_pm_map,fc_hc_map,f"
		    "c_co_map,fc_fuel_lhv,fc_fuel_den,fc_trq_scale,fc_spd_scale,ex_cat_lim,K_Energy,K_Emis,mpg_desired,hc_desired,co_"
		    "desired,nox_desired,pm_desired,mc_max_trq,mc_map_spd,mc_map_trq,mc_eff_map,mc_trq_scale,mc_spd_scale,fc_eff_map"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Lookup
		    Name		    "Scale\nFactor"
		    SID			    "5960"
		    Position		    [175, 710, 205, 740]
		    InputValues		    "cs_soc_range"
		    Table		    "cs_scale_factor"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Tinit motor,\n(limited by\nmax Tmotor and ess)\nand dT"
		    SID			    "5961"
		    Ports		    [5, 2]
		    Position		    [190, 110, 225, 170]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "Tinit motor,\n(limited by\nmax Tmotor and ess)\nand dT"
		    Location		    [39, 135, 1046, 695]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    246
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "78"
		    Block {
		    BlockType		    Inport
		    Name		    "Treq\n"
		    SID			    "5962"
		    Position		    [25, 28, 55, 42]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "wreq"
		    SID			    "5963"
		    Position		    [25, 88, 55, 102]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "SOC"
		    SID			    "5964"
		    Position		    [395, 238, 425, 252]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Tess"
		    SID			    "5965"
		    Position		    [385, 293, 415, 307]
		    Port		    "4"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Electrical Aux Loads\n(Power, W)"
		    SID			    "5966"
		    Position		    [445, 383, 475, 397]
		    Port		    "5"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "1/(#points-1)"
		    SID			    "5967"
		    Position		    [865, 421, 900, 449]
		    Gain		    "1/9"
		    }
		    Block {
		    BlockType		    Display
		    Name		    "Display1"
		    SID			    "5968"
		    Ports		    [1]
		    Position		    [830, 327, 940, 353]
		    Decimation		    "1"
		    Lockdown		    off
		    }
		    Block {
		    BlockType		    Display
		    Name		    "Display2"
		    SID			    "5969"
		    Ports		    [1]
		    Position		    [845, 107, 955, 133]
		    Decimation		    "1"
		    Lockdown		    off
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Fcn"
		    SID			    "5970"
		    Position		    [595, 115, 630, 135]
		    Expr		    "1/u"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Fcn1"
		    SID			    "5971"
		    Position		    [560, 275, 595, 295]
		    ShowName		    off
		    Expr		    "1/u"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Pavailable"
		    SID			    "5972"
		    Ports		    [2, 1]
		    Position		    [600, 183, 630, 207]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Pchg max"
		    SID			    "5973"
		    Ports		    [2, 1]
		    Position		    [615, 298, 645, 322]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    SID			    "5974"
		    Ports		    [2, 1]
		    Position		    [310, 72, 340, 103]
		    ShowName		    off
		    Operator		    "<"
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    "Saturation1"
		    SID			    "5975"
		    Ports		    [1, 1]
		    Position		    [95, 395, 115, 415]
		    BlockRotation	    270
		    BlockMirror		    on
		    ShowName		    off
		    InputPortMap	    "u0"
		    UpperLimit		    "max(fc_map_spd*fc_spd_scale)"
		    LowerLimit		    "min(fc_map_spd*fc_spd_scale)"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    SID			    "5976"
		    Ports		    [2, 1]
		    Position		    [220, 442, 250, 473]
		    ShowName		    off
		    Inputs		    "-+"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    SID			    "5977"
		    Ports		    [2, 1]
		    Position		    [810, 417, 840, 448]
		    ShowName		    off
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum2"
		    SID			    "5978"
		    Ports		    [2, 1]
		    Position		    [565, 367, 595, 398]
		    ShowName		    off
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Tavailable"
		    SID			    "5979"
		    Ports		    [2, 1]
		    Position		    [670, 178, 700, 202]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Tavailable\nchg"
		    SID			    "5980"
		    Ports		    [2, 1]
		    Position		    [670, 293, 700, 317]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Tinit,\nlimited"
		    SID			    "5981"
		    Position		    [390, 75, 420, 105]
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    MinMax
		    Name		    "Tlim by Tmotor, \nTreq, or Pavail"
		    SID			    "5982"
		    Ports		    [2, 1]
		    Position		    [745, 167, 775, 198]
		    Inputs		    "2"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Tm ->Tfc"
		    SID			    "5983"
		    Position		    [245, 83, 270, 107]
		    Gain		    "tc_mc_to_fc_ratio"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Treq ->Tm"
		    SID			    "5984"
		    Position		    [315, 23, 340, 47]
		    Gain		    "1/tc_mc_to_fc_ratio"
		    }
		    Block {
		    BlockType		    Lookup
		    Name		    "max Tfc"
		    SID			    "5985"
		    Position		    [150, 415, 180, 445]
		    InputValues		    "fc_map_spd*fc_spd_scale"
		    Table		    "fc_max_trq*fc_trq_scale"
		    }
		    Block {
		    BlockType		    Lookup
		    Name		    "max Tm"
		    SID			    "5986"
		    Position		    [185, 80, 215, 110]
		    InputValues		    "mc_map_spd*mc_spd_scale"
		    Table		    "mc_max_trq*mc_trq_scale"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "max pack\npwr (W)1"
		    SID			    "5987"
		    Ports		    [2, 1]
		    Position		    [455, 231, 485, 264]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "max pack\npwr (W)1"
		    Location		    [428, 325, 1250, 676]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "SOC"
		    SID			    "5988"
		    Position		    [50, 25, 70, 45]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "ess_mod_tmp"
		    SID			    "5989"
		    Position		    [45, 110, 65, 130]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "#bty"
		    SID			    "5990"
		    Position		    [195, 173, 285, 197]
		    BlockMirror		    on
		    Value		    "ess_module_num"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "5991"
		    Position		    [282, 200, 368, 220]
		    BlockRotation	    270
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    "mc_min_volts"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant1"
		    SID			    "5992"
		    Position		    [335, 90, 370, 110]
		    BlockMirror		    on
		    Value		    "0.001"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant2"
		    SID			    "5993"
		    Position		    [645, 190, 680, 210]
		    BlockMirror		    on
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant7"
		    SID			    "5994"
		    Position		    [435, 60, 475, 80]
		    ShowName		    off
		    Value		    "ess_on"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gain"
		    SID			    "5995"
		    Position		    [320, 142, 350, 168]
		    ShowName		    off
		    FontName		    "Arial"
		    Gain		    "0.5"
		    }
		    Block {
		    BlockType		    MinMax
		    Name		    "MinMax1"
		    SID			    "5996"
		    Ports		    [3, 1]
		    Position		    [385, 149, 415, 181]
		    ShowName		    off
		    Function		    "max"
		    Inputs		    "3"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    SID			    "5997"
		    Ports		    [3, 1]
		    Position		    [475, 123, 495, 157]
		    FontName		    "Arial"
		    Inputs		    "3"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    SID			    "5998"
		    Ports		    [2, 1]
		    Position		    [225, 118, 255, 142]
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product1"
		    SID			    "5999"
		    Ports		    [2, 1]
		    Position		    [225, 223, 255, 247]
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Rdis\n(ohms)"
		    SID			    "6000"
		    Ports		    [2, 1]
		    Position		    [140, 228, 170, 252]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskType		    "2-D Table Lookup"
		    MaskDescription	    "Two Dimensional Table Lookup\nThe first input corresponds to X Index and the second input c"
		    "orresponds to the Y Index"
		    MaskHelp		    "This block returns a linearly interpolated intersection from the table using the X index (which c"
		    "orresponds to the rows of the table) and the Y index (which corresponds to the columns of the table).  Extrapola"
		    "tion is used."
		    MaskPromptString	    "X Index|Y Index|Table"
		    MaskStyleString	    "edit,edit,edit"
		    MaskVariables	    "xindex=@1;yindex=@2;table=@3;"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskInitialization	    " sftab2chk(xindex,yindex,table);"
		    MaskDisplay		    "plot(-10,-10,110,110,[90,50,10],[90,40,30],[90,50,10],[50,26,20],[90,50,10],[22,13,10])"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "ess_tmp|ess_soc|ess_r_dis"
		    System {
		    Name		    "Rdis\n(ohms)"
		    Location		    [316, 263, 598, 417]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "x0"
		    SID			    "6001"
		    Position		    [20, 25, 40, 45]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "y0"
		    SID			    "6002"
		    Position		    [20, 80, 40, 100]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    SID			    "6003"
		    Ports		    [2, 1]
		    Position		    [90, 46, 120, 79]
		    Inputs		    "2"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-function"
		    SID			    "6004"
		    Ports		    [1, 1]
		    Position		    [140, 52, 190, 78]
		    FunctionName	    "sftable2"
		    Parameters		    "xindex, yindex, table"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "table out"
		    SID			    "6005"
		    Position		    [215, 55, 235, 75]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "y0"
		    SrcPort		    1
		    Points		    [20, 0; 0, -20]
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "S-function"
		    SrcPort		    1
		    DstBlock		    "table out"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "x0"
		    SrcPort		    1
		    Points		    [20, 0; 0, 20]
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "S-function"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    SID			    "6006"
		    Ports		    [2, 1]
		    Position		    [340, 27, 370, 58]
		    Operator		    ">"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "6007"
		    Position		    [645, 140, 675, 170]
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "VOC\n(V)"
		    SID			    "6008"
		    Ports		    [2, 1]
		    Position		    [145, 113, 175, 137]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskType		    "2-D Table Lookup"
		    MaskDescription	    "Two Dimensional Table Lookup\nThe first input corresponds to X Index and the second input c"
		    "orresponds to the Y Index"
		    MaskHelp		    "This block returns a linearly interpolated intersection from the table using the X index (which c"
		    "orresponds to the rows of the table) and the Y index (which corresponds to the columns of the table).  Extrapola"
		    "tion is used."
		    MaskPromptString	    "X Index|Y Index|Table"
		    MaskStyleString	    "edit,edit,edit"
		    MaskVariables	    "xindex=@1;yindex=@2;table=@3;"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskInitialization	    " sftab2chk(xindex,yindex,table);"
		    MaskDisplay		    "plot(-10,-10,110,110,[90,50,10],[90,40,30],[90,50,10],[50,26,20],[90,50,10],[22,13,10])"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "ess_tmp|ess_soc|ess_voc"
		    System {
		    Name		    "VOC\n(V)"
		    Location		    [316, 263, 598, 417]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "x0"
		    SID			    "6009"
		    Position		    [20, 25, 40, 45]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "y0"
		    SID			    "6010"
		    Position		    [20, 80, 40, 100]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    SID			    "6011"
		    Ports		    [2, 1]
		    Position		    [90, 46, 120, 79]
		    Inputs		    "2"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-function"
		    SID			    "6012"
		    Ports		    [1, 1]
		    Position		    [140, 52, 190, 78]
		    FunctionName	    "sftable2"
		    Parameters		    "xindex, yindex, table"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "table out"
		    SID			    "6013"
		    Position		    [215, 55, 235, 75]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "y0"
		    SrcPort		    1
		    Points		    [20, 0; 0, -20]
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "S-function"
		    SrcPort		    1
		    DstBlock		    "table out"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "x0"
		    SrcPort		    1
		    Points		    [20, 0; 0, 20]
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "S-function"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "and"
		    SID			    "6014"
		    Ports		    [2, 1]
		    Position		    [505, 37, 535, 68]
		    NamePlacement	    "alternate"
		    ShowName		    off
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "max power corresponding\nto minimum voltage"
		    SID			    "6015"
		    Position		    [520, 131, 615, 159]
		    FontName		    "Arial"
		    Expr		    "(u[1]-u[2])*u[2]/u[3]"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "min ess V"
		    SID			    "6016"
		    Position		    [195, 277, 360, 303]
		    Value		    "ess_module_num*ess_min_volts"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "max ess\ndischarge\npwr"
		    SID			    "6017"
		    Position		    [730, 145, 750, 165]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    DstBlock		    "max ess\ndischarge\npwr"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "SOC"
		    SrcPort		    1
		    Points		    [45, 0]
		    Branch {
		    Points		    [0, 95]
		    Branch {
		    DstBlock		    "VOC\n(V)"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, 115]
		    DstBlock		    "Rdis\n(ohms)"
		    DstPort		    2
		    }
		    }
		    Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Constant2"
		    SrcPort		    1
		    Points		    [-10, 0]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "max power corresponding\nto minimum voltage"
		    SrcPort		    1
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "#bty"
		    SrcPort		    1
		    Points		    [-10, 0]
		    Branch {
		    Points		    [0, 45]
		    DstBlock		    "Product1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -50]
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Rdis\n(ohms)"
		    SrcPort		    1
		    DstBlock		    "Product1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "VOC\n(V)"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product1"
		    SrcPort		    1
		    Points		    [200, 0]
		    DstBlock		    "Mux"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    Points		    [0, 5; 40, 0]
		    Branch {
		    Points		    [0, 20]
		    DstBlock		    "Gain"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [160, 0]
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "MinMax1"
		    SrcPort		    1
		    Points		    [0, -25]
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Gain"
		    SrcPort		    1
		    DstBlock		    "MinMax1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    Points		    [0, 5]
		    DstBlock		    "max power corresponding\nto minimum voltage"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    Points		    [25, 0; 0, -30]
		    DstBlock		    "MinMax1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant1"
		    SrcPort		    1
		    Points		    [-5, 0]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "ess_mod_tmp"
		    SrcPort		    1
		    Points		    [40, 0]
		    Branch {
		    DstBlock		    "VOC\n(V)"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 115]
		    DstBlock		    "Rdis\n(ohms)"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "min ess V"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "MinMax1"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "and"
		    SrcPort		    1
		    Points		    [90, 0]
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "and"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant7"
		    SrcPort		    1
		    Points		    [10, 0]
		    DstBlock		    "and"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "min pack\npwr (W)"
		    SID			    "6018"
		    Ports		    [2, 1]
		    Position		    [450, 302, 480, 333]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "min pack\npwr (W)"
		    Location		    [53, 618, 864, 970]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "SOC"
		    SID			    "6019"
		    Position		    [30, 25, 50, 45]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Tess"
		    SID			    "6020"
		    Position		    [20, 105, 40, 125]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "#bty"
		    SID			    "6021"
		    Position		    [140, 173, 230, 197]
		    BlockMirror		    on
		    Value		    "ess_module_num"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux5"
		    SID			    "6022"
		    Ports		    [3, 1]
		    Position		    [420, 146, 440, 234]
		    Inputs		    "3"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "P=i*Vmax"
		    SID			    "6023"
		    Ports		    [2, 1]
		    Position		    [605, 173, 635, 197]
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    SID			    "6024"
		    Ports		    [2, 1]
		    Position		    [170, 123, 200, 147]
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product1"
		    SID			    "6025"
		    Ports		    [2, 1]
		    Position		    [170, 223, 200, 247]
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Rchg\n(ohms)"
		    SID			    "6026"
		    Ports		    [2, 1]
		    Position		    [85, 228, 115, 252]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskType		    "2-D Table Lookup"
		    MaskDescription	    "Two Dimensional Table Lookup\nThe first input corresponds to X Index and the second input c"
		    "orresponds to the Y Index"
		    MaskHelp		    "This block returns a linearly interpolated intersection from the table using the X index (which c"
		    "orresponds to the rows of the table) and the Y index (which corresponds to the columns of the table).  Extrapola"
		    "tion is used."
		    MaskPromptString	    "X Index|Y Index|Table"
		    MaskStyleString	    "edit,edit,edit"
		    MaskVariables	    "xindex=@1;yindex=@2;table=@3;"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskInitialization	    " sftab2chk(xindex,yindex,table);"
		    MaskDisplay		    "plot(-10,-10,110,110,[90,50,10],[90,40,30],[90,50,10],[50,26,20],[90,50,10],[22,13,10])"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "ess_tmp|ess_soc|ess_r_chg"
		    System {
		    Name		    "Rchg\n(ohms)"
		    Location		    [316, 263, 598, 417]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "x0"
		    SID			    "6027"
		    Position		    [20, 25, 40, 45]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "y0"
		    SID			    "6028"
		    Position		    [20, 80, 40, 100]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    SID			    "6029"
		    Ports		    [2, 1]
		    Position		    [90, 46, 120, 79]
		    Inputs		    "2"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-function"
		    SID			    "6030"
		    Ports		    [1, 1]
		    Position		    [140, 52, 190, 78]
		    FunctionName	    "sftable2"
		    Parameters		    "xindex, yindex, table"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "table out"
		    SID			    "6031"
		    Position		    [215, 55, 235, 75]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "y0"
		    SrcPort		    1
		    Points		    [20, 0; 0, -20]
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "S-function"
		    SrcPort		    1
		    DstBlock		    "table out"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "x0"
		    SrcPort		    1
		    Points		    [20, 0; 0, 20]
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "S-function"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "VOC\n(V)"
		    SID			    "6032"
		    Ports		    [2, 1]
		    Position		    [85, 118, 115, 142]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskType		    "2-D Table Lookup"
		    MaskDescription	    "Two Dimensional Table Lookup\nThe first input corresponds to X Index and the second input c"
		    "orresponds to the Y Index"
		    MaskHelp		    "This block returns a linearly interpolated intersection from the table using the X index (which c"
		    "orresponds to the rows of the table) and the Y index (which corresponds to the columns of the table).  Extrapola"
		    "tion is used."
		    MaskPromptString	    "X Index|Y Index|Table"
		    MaskStyleString	    "edit,edit,edit"
		    MaskVariables	    "xindex=@1;yindex=@2;table=@3;"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskInitialization	    " sftab2chk(xindex,yindex,table);"
		    MaskDisplay		    "plot(-10,-10,110,110,[90,50,10],[90,40,30],[90,50,10],[50,26,20],[90,50,10],[22,13,10])"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "ess_tmp|ess_soc|ess_voc"
		    System {
		    Name		    "VOC\n(V)"
		    Location		    [316, 263, 598, 417]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "x0"
		    SID			    "6033"
		    Position		    [20, 25, 40, 45]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "y0"
		    SID			    "6034"
		    Position		    [20, 80, 40, 100]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    SID			    "6035"
		    Ports		    [2, 1]
		    Position		    [90, 46, 120, 79]
		    Inputs		    "2"
		    }
		    Block {
		    BlockType		    S-Function
		    Name		    "S-function"
		    SID			    "6036"
		    Ports		    [1, 1]
		    Position		    [140, 52, 190, 78]
		    FunctionName	    "sftable2"
		    Parameters		    "xindex, yindex, table"
		    EnableBusSupport	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "table out"
		    SID			    "6037"
		    Position		    [215, 55, 235, 75]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "y0"
		    SrcPort		    1
		    Points		    [20, 0; 0, -20]
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "S-function"
		    SrcPort		    1
		    DstBlock		    "table out"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "x0"
		    SrcPort		    1
		    Points		    [20, 0; 0, 20]
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "S-function"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "ess max voltage*#batts"
		    SID			    "6038"
		    Position		    [235, 180, 400, 200]
		    FontName		    "Arial"
		    Value		    "ess_max_volts*ess_module_num"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "iabs min=(Voc-Vmax)/R"
		    SID			    "6039"
		    Position		    [465, 178, 545, 202]
		    Expr		    "(u(1)-u(2))/u(3)"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "max ess\ncharge\npwr\n(neg #)"
		    SID			    "6040"
		    Position		    [725, 175, 745, 195]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Tess"
		    SrcPort		    1
		    Points		    [5, 0]
		    Branch {
		    Points		    [0, 120]
		    DstBlock		    "Rchg\n(ohms)"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [20, 0]
		    DstBlock		    "VOC\n(V)"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "SOC"
		    SrcPort		    1
		    Points		    [10, 0; 0, 100]
		    Branch {
		    DstBlock		    "VOC\n(V)"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, 110]
		    DstBlock		    "Rchg\n(ohms)"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "ess max voltage*#batts"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    Points		    [0, -80; 155, 0; 0, 70]
		    DstBlock		    "P=i*Vmax"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Mux5"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    Points		    [180, 0; 0, 25]
		    DstBlock		    "Mux5"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "P=i*Vmax"
		    SrcPort		    1
		    DstBlock		    "max ess\ncharge\npwr\n(neg #)"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "iabs min=(Voc-Vmax)/R"
		    SrcPort		    1
		    DstBlock		    "P=i*Vmax"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Mux5"
		    SrcPort		    1
		    DstBlock		    "iabs min=(Voc-Vmax)/R"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product1"
		    SrcPort		    1
		    Points		    [200, 0]
		    DstBlock		    "Mux5"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "VOC\n(V)"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Rchg\n(ohms)"
		    SrcPort		    1
		    DstBlock		    "Product1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "#bty"
		    SrcPort		    1
		    Points		    [-10, 0; 0, 0]
		    Branch {
		    Points		    [0, -45]
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, 45]
		    DstBlock		    "Product1"
		    DstPort		    1
		    }
		    }
		    }
		    }
		    Block {
		    BlockType		    Lookup2D
		    Name		    "motor/controller\nefficiency\nmap (W)"
		    SID			    "6041"
		    Position		    [470, 130, 530, 170]
		    RowIndex		    "mc_map_spd*mc_spd_scale"
		    ColumnIndex		    "mc_map_trq*mc_trq_scale"
		    Table		    "mc_eff_map*mc_spd_scale*mc_trq_scale"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "neg"
		    SID			    "6042"
		    Position		    [270, 398, 295, 422]
		    Gain		    "-1"
		    }
		    Block {
		    BlockType		    MinMax
		    Name		    "pick value\nclosest to\nzero"
		    SID			    "6043"
		    Ports		    [3, 1]
		    Position		    [730, 424, 760, 456]
		    Function		    "max"
		    Inputs		    "3"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "to motor"
		    SID			    "6044"
		    Position		    [270, 448, 295, 472]
		    Gain		    "1/tc_mc_to_fc_ratio"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "wfc ->wm"
		    SID			    "6045"
		    Position		    [130, 83, 155, 107]
		    Gain		    "tc_mc_to_fc_ratio"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Tinit\nmotor"
		    SID			    "6046"
		    Position		    [810, 178, 840, 192]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "dT"
		    SID			    "6047"
		    Position		    [920, 428, 950, 442]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Line {
		    SrcBlock		    "Tlim by Tmotor, \nTreq, or Pavail"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    Points		    [0, -65]
		    DstBlock		    "Display2"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [15, 0]
		    Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Tinit\nmotor"
		    DstPort		    1
		    }
		    }
		    }
		    Line {
		    SrcBlock		    "pick value\nclosest to\nzero"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    Points		    [0, -100]
		    DstBlock		    "Display1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "min pack\npwr (W)"
		    SrcPort		    1
		    Points		    [65, 0]
		    DstBlock		    "Sum2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum2"
		    SrcPort		    1
		    DstBlock		    "Pchg max"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Tess"
		    SrcPort		    1
		    Points		    [5, 0]
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "min pack\npwr (W)"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [15, 0]
		    DstBlock		    "max pack\npwr (W)1"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "max Tfc"
		    SrcPort		    1
		    Points		    [20, 0]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "to motor"
		    SrcPort		    1
		    Points		    [10, 0; 0, -10]
		    DstBlock		    "pick value\nclosest to\nzero"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Pchg max"
		    SrcPort		    1
		    DstBlock		    "Tavailable\nchg"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Tavailable\nchg"
		    SrcPort		    1
		    Points		    [10, 0]
		    DstBlock		    "pick value\nclosest to\nzero"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Tavailable"
		    SrcPort		    1
		    DstBlock		    "Tlim by Tmotor, \nTreq, or Pavail"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "neg"
		    SrcPort		    1
		    Points		    [10, 0; 0, 30]
		    DstBlock		    "pick value\nclosest to\nzero"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "Tinit,\nlimited"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "motor/controller\nefficiency\nmap (W)"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "Fcn1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [40, 0]
		    DstBlock		    "Pavailable"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Treq ->Tm"
		    SrcPort		    1
		    Points		    [20, 0; 0, 45]
		    DstBlock		    "Tinit,\nlimited"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "SOC"
		    SrcPort		    1
		    Points		    [5, 0]
		    Branch {
		    DstBlock		    "min pack\npwr (W)"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "max pack\npwr (W)1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Fcn1"
		    SrcPort		    1
		    DstBlock		    "Pchg max"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Fcn"
		    SrcPort		    1
		    Points		    [20, 0; 0, 60]
		    Branch {
		    DstBlock		    "Tavailable\nchg"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Tavailable"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "1/(#points-1)"
		    SrcPort		    1
		    DstBlock		    "dT"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    DstBlock		    "1/(#points-1)"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Pavailable"
		    SrcPort		    1
		    DstBlock		    "Tavailable"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Tinit,\nlimited"
		    SrcPort		    1
		    Points		    [20, 0]
		    Branch {
		    Points		    [245, 0; 0, 85]
		    DstBlock		    "Tlim by Tmotor, \nTreq, or Pavail"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 70]
		    DstBlock		    "motor/controller\nefficiency\nmap (W)"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "max pack\npwr (W)1"
		    SrcPort		    1
		    Points		    [95, 0]
		    DstBlock		    "Pavailable"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "wfc ->wm"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    Points		    [0, 45; 265, 0]
		    Branch {
		    Points		    [0, -15]
		    DstBlock		    "Fcn"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "motor/controller\nefficiency\nmap (W)"
		    DstPort		    1
		    }
		    }
		    Branch {
		    DstBlock		    "max Tm"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Saturation1"
		    SrcPort		    1
		    Points		    [0, 10]
		    DstBlock		    "max Tfc"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    DstBlock		    "to motor"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Treq\n"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    Points		    [0, 430]
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [210, 0]
		    Branch {
		    DstBlock		    "Treq ->Tm"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 45]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    }
		    }
		    Line {
		    SrcBlock		    "wreq"
		    SrcPort		    1
		    Points		    [45, 0]
		    Branch {
		    DstBlock		    "Saturation1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "wfc ->wm"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Tm ->Tfc"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "max Tm"
		    SrcPort		    1
		    Points		    [5, 0]
		    Branch {
		    Points		    [0, 30]
		    Branch {
		    Points		    [150, 0]
		    DstBlock		    "Tinit,\nlimited"
		    DstPort		    3
		    }
		    Branch {
		    Points		    [0, 285]
		    DstBlock		    "neg"
		    DstPort		    1
		    }
		    }
		    Branch {
		    DstBlock		    "Tm ->Tfc"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Electrical Aux Loads\n(Power, W)"
		    SrcPort		    1
		    DstBlock		    "Sum2"
		    DstPort		    2
		    }
		    Annotation {
		    SID			    "6048"
		    Name		    "Note: Electrical Aux Loads are the estimated load on the power bus (after efficiency conversions)"
		    Position		    [454, 526]
		    }
		    }
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "lambda\n(non-negative)"
		    SID			    "6049"
		    Position		    [130, 649, 160, 671]
		    Expr		    "(fc_tstat-u)/(fc_tstat-20)"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "limit\nTreq"
		    SID			    "6050"
		    Ports		    [2, 1]
		    Position		    [100, 30, 135, 70]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "limit\nTreq"
		    Location		    [262, 147, 1269, 707]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Treq\n"
		    SID			    "6051"
		    Position		    [25, 18, 55, 32]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "wreq"
		    SID			    "6052"
		    Position		    [20, 113, 50, 127]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    MinMax
		    Name		    "MinMax"
		    SID			    "6053"
		    Ports		    [2, 1]
		    Position		    [330, 52, 360, 83]
		    ShowName		    off
		    Inputs		    "2"
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    "Saturation1"
		    SID			    "6054"
		    Ports		    [1, 1]
		    Position		    [50, 65, 70, 85]
		    BlockRotation	    270
		    ShowName		    off
		    InputPortMap	    "u0"
		    UpperLimit		    "max(fc_map_spd*fc_spd_scale)"
		    LowerLimit		    "min(fc_map_spd*fc_spd_scale)"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    SID			    "6055"
		    Ports		    [2, 1]
		    Position		    [255, 72, 285, 103]
		    ShowName		    off
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Tm ->Tfc"
		    SID			    "6056"
		    Position		    [200, 108, 225, 132]
		    Gain		    "tc_mc_to_fc_ratio"
		    }
		    Block {
		    BlockType		    Lookup
		    Name		    "max Tfc"
		    SID			    "6057"
		    Position		    [105, 40, 135, 70]
		    InputValues		    "fc_map_spd*fc_spd_scale"
		    Table		    "fc_max_trq*fc_trq_scale"
		    }
		    Block {
		    BlockType		    Lookup
		    Name		    "max Tm"
		    SID			    "6058"
		    Position		    [140, 105, 170, 135]
		    InputValues		    "mc_map_spd*mc_spd_scale"
		    Table		    "mc_max_trq*mc_trq_scale"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "wfc ->wm"
		    SID			    "6059"
		    Position		    [85, 108, 110, 132]
		    Gain		    "tc_mc_to_fc_ratio"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Treq"
		    SID			    "6060"
		    Position		    [390, 63, 420, 77]
		    IconDisplay		    "Port number"
		    }
		    Line {
		    SrcBlock		    "Saturation1"
		    SrcPort		    1
		    Points		    [0, -5]
		    DstBlock		    "max Tfc"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "MinMax"
		    SrcPort		    1
		    DstBlock		    "Treq"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    Points		    [25, 0]
		    DstBlock		    "MinMax"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Treq\n"
		    SrcPort		    1
		    Points		    [255, 0]
		    DstBlock		    "MinMax"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "max Tfc"
		    SrcPort		    1
		    Points		    [100, 0]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Tm ->Tfc"
		    SrcPort		    1
		    Points		    [10, 0]
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "wreq"
		    SrcPort		    1
		    Points		    [5, 0]
		    Branch {
		    DstBlock		    "Saturation1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "wfc ->wm"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "max Tm"
		    SrcPort		    1
		    DstBlock		    "Tm ->Tfc"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "wfc ->wm"
		    SrcPort		    1
		    DstBlock		    "max Tm"
		    DstPort		    1
		    }
		    Annotation {
		    SID			    "6061"
		    Name		    "Limit Treq\nto max motor \nand engine can\n supply together"
		    Position		    [395, 139]
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Tfc"
		    SID			    "6062"
		    Position		    [530, 413, 560, 427]
		    IconDisplay		    "Port number"
		    OutputWhenDisabled	    "reset"
		    InitialOutput	    "0"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Impact"
		    SID			    "6063"
		    Position		    [530, 443, 560, 457]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    OutputWhenDisabled	    "reset"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Mux2"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "lambda\n(non-negative)"
		    SrcPort		    1
		    DstBlock		    ">0"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "SOC"
		    SrcPort		    1
		    Points		    [20, 0]
		    Branch {
		    Points		    [0, -15]
		    Branch {
		    Points		    [0, -240]
		    DstBlock		    "Tinit motor,\n(limited by\nmax Tmotor and ess)\nand dT"
		    DstPort		    3
		    }
		    Branch {
		    Points		    [195, 0]
		    DstBlock		    "Mux2"
		    DstPort		    6
		    }
		    }
		    Branch {
		    Points		    [0, 330]
		    DstBlock		    "Scale\nFactor"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "DeltaSOC\nregen"
		    SrcPort		    1
		    Points		    [215, 0]
		    DstBlock		    "Mux2"
		    DstPort		    5
		    }
		    Line {
		    SrcBlock		    "ex_cat_tmp"
		    SrcPort		    1
		    Points		    [55, 0]
		    Branch {
		    Points		    [0, 20]
		    Branch {
		    Points		    [0, 45]
		    DstBlock		    "PM temp eff"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "NOx temp eff"
		    DstPort		    1
		    }
		    }
		    Branch {
		    Points		    [0, -20]
		    Branch {
		    Points		    [0, -40]
		    DstBlock		    "HC temp eff"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "CO temp eff"
		    DstPort		    1
		    }
		    }
		    }
		    Line {
		    SrcBlock		    "fc_clt_tmp"
		    SrcPort		    1
		    DstBlock		    "lambda\n(non-negative)"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "wreq"
		    SrcPort		    1
		    Points		    [20, 0]
		    Branch {
		    Points		    [0, 105]
		    DstBlock		    "Mux2"
		    DstPort		    4
		    }
		    Branch {
		    Points		    [0, -75]
		    DstBlock		    "limit\nTreq"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [95, 0]
		    DstBlock		    "Tinit motor,\n(limited by\nmax Tmotor and ess)\nand dT"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "limit\nTreq"
		    SrcPort		    1
		    Points		    [15, 0; 0, 65]
		    Branch {
		    Points		    [0, 70]
		    DstBlock		    "Mux2"
		    DstPort		    3
		    }
		    Branch {
		    Points		    [20, 0]
		    DstBlock		    "Tinit motor,\n(limited by\nmax Tmotor and ess)\nand dT"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Treq"
		    SrcPort		    1
		    DstBlock		    "limit\nTreq"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Tinit motor,\n(limited by\nmax Tmotor and ess)\nand dT"
		    SrcPort		    2
		    Points		    [0, -25]
		    DstBlock		    "Mux2"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Tinit motor,\n(limited by\nmax Tmotor and ess)\nand dT"
		    SrcPort		    1
		    Points		    [50, 0]
		    DstBlock		    "Mux2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "HC temp eff"
		    SrcPort		    1
		    Points		    [90, 0]
		    DstBlock		    "Mux2"
		    DstPort		    7
		    }
		    Line {
		    SrcBlock		    "CO temp eff"
		    SrcPort		    1
		    Points		    [90, 0]
		    DstBlock		    "Mux2"
		    DstPort		    8
		    }
		    Line {
		    SrcBlock		    "NOx temp eff"
		    SrcPort		    1
		    Points		    [90, 0]
		    DstBlock		    "Mux2"
		    DstPort		    9
		    }
		    Line {
		    SrcBlock		    "PM temp eff"
		    SrcPort		    1
		    Points		    [10, 0; 0, -5; 80, 0]
		    DstBlock		    "Mux2"
		    DstPort		    10
		    }
		    Line {
		    SrcBlock		    "ess_tmp"
		    SrcPort		    1
		    Points		    [25, 0; 0, -5]
		    Branch {
		    Points		    [0, -645]
		    DstBlock		    "Tinit motor,\n(limited by\nmax Tmotor and ess)\nand dT"
		    DstPort		    4
		    }
		    Branch {
		    Points		    [0, -5]
		    DstBlock		    "Mux2"
		    DstPort		    14
		    }
		    }
		    Line {
		    SrcBlock		    "Scale\nFactor"
		    SrcPort		    1
		    Points		    [0, 10]
		    DstBlock		    "Mux2"
		    DstPort		    13
		    }
		    Line {
		    SrcBlock		    ">0"
		    SrcPort		    1
		    Points		    [0, 20]
		    DstBlock		    "Mux2"
		    DstPort		    12
		    }
		    Line {
		    SrcBlock		    "cyc_mph_r"
		    SrcPort		    1
		    Points		    [0, 35]
		    DstBlock		    "Mux2"
		    DstPort		    11
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Demux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    2
		    DstBlock		    "Impact"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    1
		    DstBlock		    "Tfc"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Elect\nAux \nLoad\nPower"
		    SrcPort		    1
		    Points		    [0, -15]
		    DstBlock		    "Tinit motor,\n(limited by\nmax Tmotor and ess)\nand dT"
		    DstPort		    5
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Zero T/w/spd\ncase"
		  SID			  "6064"
		  Ports			  [2, 1]
		  Position		  [150, 19, 185, 61]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "Zero T/w/spd\ncase"
		    Location		    [303, 314, 600, 496]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Treq"
		    SID			    "6065"
		    Position		    [30, 23, 60, 37]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "wreq"
		    SID			    "6066"
		    Position		    [30, 68, 60, 82]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    " "
		    SID			    "6067"
		    Position		    [80, 78, 105, 102]
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    " 2"
		    SID			    "6068"
		    Position		    [85, 33, 110, 57]
		    ShowName		    off
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "Logical\nOperator"
		    SID			    "6069"
		    Ports		    [2, 1]
		    Position		    [185, 64, 215, 106]
		    ShowName		    off
		    Operator		    "OR"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    SID			    "6070"
		    Ports		    [2, 1]
		    Position		    [125, 67, 155, 98]
		    ShowName		    off
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator1"
		    SID			    "6071"
		    Ports		    [2, 1]
		    Position		    [125, 22, 155, 53]
		    ShowName		    off
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "zero req\nflag"
		    SID			    "6072"
		    Position		    [245, 78, 275, 92]
		    IconDisplay		    "Port number"
		    }
		    Line {
		    SrcBlock		    " 2"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Logical\nOperator"
		    SrcPort		    1
		    DstBlock		    "zero req\nflag"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "wreq"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Treq"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    Points		    [10, 0]
		    DstBlock		    "Logical\nOperator"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator1"
		    SrcPort		    1
		    Points		    [10, 0]
		    DstBlock		    "Logical\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    " "
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		  }
		}
		Block {
		  BlockType		  Switch
		  Name			  "Zero Treq\nor wreq case"
		  SID			  "6073"
		  Position		  [315, 150, 345, 180]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  ToWorkspace
		  Name			  "total fuel used (gal)1"
		  SID			  "6074"
		  Ports			  [1]
		  Position		  [295, 251, 365, 269]
		  ShowName		  off
		  FontName		  "Arial"
		  VariableName		  "cs_Impact"
		  MaxDataPoints		  "inf"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Tfc"
		  SID			  "6075"
		  Position		  [385, 158, 415, 172]
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  DstBlock		  "Min. Energy/emis"
		  DstPort		  enable
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  8
		  DstBlock		  "Min. Energy/emis"
		  DstPort		  8
		}
		Line {
		  SrcBlock		  "Min. Energy/emis"
		  SrcPort		  2
		  DstBlock		  "total fuel used (gal)1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Zero Treq\nor wreq case"
		  SrcPort		  1
		  DstBlock		  "Tfc"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "  1"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Zero Treq\nor wreq case"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Min. Energy/emis"
		  SrcPort		  1
		  DstBlock		  "Zero Treq\nor wreq case"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    Points		    [0, -105]
		    DstBlock		    "Zero T/w/spd\ncase"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Min. Energy/emis"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  2
		  Points		  [25, 0]
		  Branch {
		    Points		    [0, -105]
		    DstBlock		    "Zero T/w/spd\ncase"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Min. Energy/emis"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  7
		  DstBlock		  "Min. Energy/emis"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  6
		  DstBlock		  "Min. Energy/emis"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  5
		  DstBlock		  "Min. Energy/emis"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  4
		  DstBlock		  "Min. Energy/emis"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  3
		  DstBlock		  "Min. Energy/emis"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "input\nvector"
		  SrcPort		  1
		  DstBlock		  "Demux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Zero T/w/spd\ncase"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    Points		    [35, 0; 0, 125]
		    DstBlock		    "Zero Treq\nor wreq case"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Logical\nOperator"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "From"
		  SrcPort		  1
		  Points		  [0, -35]
		  DstBlock		  "Min. Energy/emis"
		  DstPort		  9
		}
		Annotation {
		  SID			  "6076"
		  Name			  "Note: acc_elec_pwr_est is placed\noutside of Min. Energy/emis due to the fact\nthat it is a FROM block. "
		  "FROM blocks cannot\nbe placed inside of enabled sub-systems"
		  Position		  [132, 378]
		}
	      }
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux2"
	      SID		      "6077"
	      Ports		      [7, 1]
	      Position		      [260, 61, 280, 389]
	      ShowName		      off
	      Inputs		      "7"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Subsystem"
	      SID		      "6078"
	      Ports		      [1, 1]
	      Position		      [120, 194, 185, 226]
	      ShowName		      off
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Running Average"
	      MaskDescription	      "Running Average"
	      MaskHelp		      "Output is the average of the last (Averaging Time) seconds of input."
	      MaskPromptString	      "Averaging Time (s)"
	      MaskStyleString	      "edit"
	      MaskVariables	      "n=@1;"
	      MaskTunableValueString  "on"
	      MaskEnableString	      "on"
	      MaskVisibilityString    "on"
	      MaskToolTipString	      "on"
	      MaskDisplay	      "disp('Running\\nAverage')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "cs_mph_avg_time"
	      System {
		Name			"Subsystem"
		Location		[137, 550, 582, 766]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "6079"
		  Position		  [30, 55, 50, 75]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "1/average time"
		  SID			  "6080"
		  Position		  [255, 154, 295, 176]
		  FontName		  "Arial"
		  Value			  "1/n"
		}
		Block {
		  BlockType		  Integrator
		  Name			  "Integrator"
		  SID			  "6081"
		  Ports			  [1, 1]
		  Position		  [80, 55, 100, 75]
		  ShowName		  off
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "6082"
		  Ports			  [2, 1]
		  Position		  [340, 66, 360, 84]
		  ShowName		  off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "6083"
		  Ports			  [2, 1]
		  Position		  [225, 60, 245, 80]
		  ShowName		  off
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  TransportDelay
		  Name			  "Transport\nDelay"
		  SID			  "6084"
		  Ports			  [1, 1]
		  Position		  [155, 90, 195, 120]
		  DelayTime		  "n"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "6085"
		  Position		  [390, 65, 410, 85]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "1/average time"
		  SrcPort		  1
		  Points		  [15, 0; 0, -85]
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  DstBlock		  "Integrator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Transport\nDelay"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Integrator"
		  SrcPort		  1
		  Points		  [25, 0]
		  Branch {
		    Points		    [0, 40]
		    DstBlock		    "Transport\nDelay"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "total fuel used (gal)1"
	      SID		      "6086"
	      Ports		      [1]
	      Position		      [130, 72, 240, 88]
	      ShowName		      off
	      FontName		      "Arial"
	      VariableName	      "cs_DeltaSOC_regen"
	      MaxDataPoints	      "50000"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "trq req'd from\n engine (N*m)"
	      SID		      "6087"
	      Position		      [430, 218, 460, 232]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Delta SOC\nexpected from\nregen"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		Points			[0, -25]
		DstBlock		"total fuel used (gal)1"
		DstPort			1
	      }
	      Branch {
		Points			[140, 0]
		DstBlock		"Mux2"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "From<ex>"
	      SrcPort		      1
	      DstBlock		      "Memory"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [110, 0]
	      DstBlock		      "Mux2"
	      DstPort		      6
	    }
	    Line {
	      SrcBlock		      "From<cyc>"
	      SrcPort		      1
	      DstBlock		      "Subsystem"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Subsystem"
	      SrcPort		      1
	      Points		      [35, 0; 0, 15]
	      DstBlock		      "Mux2"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "From<mc>2"
	      SrcPort		      1
	      Points		      [160, 0]
	      DstBlock		      "Mux2"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From<ess>"
	      SrcPort		      1
	      DstBlock		      "Memory2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory2"
	      SrcPort		      1
	      Points		      [105, 0]
	      DstBlock		      "Mux2"
	      DstPort		      7
	    }
	    Line {
	      SrcBlock		      "Mux2"
	      SrcPort		      1
	      DstBlock		      "Minimize the \nenergy used \nand emissions"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Minimize the \nenergy used \nand emissions"
	      SrcPort		      1
	      DstBlock		      "trq req'd from\n engine (N*m)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From<fc>"
	      SrcPort		      1
	      DstBlock		      "Memory1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory1"
	      SrcPort		      1
	      DstBlock		      "Mux2"
	      DstPort		      5
	    }
	    Line {
	      SrcBlock		      "trq and spd req'd\ninto clutch\n(N*m, rad/s)"
	      SrcPort		      1
	      Points		      [165, 0]
	      DstBlock		      "Mux2"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <vc>"
	  SID			  "6088"
	  Position		  [465, 195, 540, 215]
	  GotoTag		  "fc_trq_out_r"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux1"
	  SID			  "6089"
	  Ports			  [2, 1]
	  Position		  [450, 91, 470, 129]
	  ShowName		  off
	  Inputs		  "2"
	}
	Block {
	  BlockType		  Selector
	  Name			  "spd"
	  SID			  "6090"
	  Ports			  [1, 1]
	  Position		  [150, 105, 180, 135]
	  InputPortWidth	  "2"
	  IndexOptions		  "Index vector (dialog)"
	  Indices		  "2"
	  OutputSizes		  "1"
	}
	Block {
	  BlockType		  Outport
	  Name			  "trq and spd\nreq'd from\nengine\n(N*m, rad/s)"
	  SID			  "6091"
	  Position		  [545, 103, 575, 117]
	  IconDisplay		  "Port number"
	}
	Line {
	  SrcBlock		  "Mux1"
	  SrcPort		  1
	  DstBlock		  "trq and spd\nreq'd from\nengine\n(N*m, rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "spd"
	  SrcPort		  1
	  DstBlock		  "Mux1"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Delta SOC\nexpected\nfrom regen"
	  SrcPort		  1
	  DstBlock		  "Finds operation \npoint - energy/emissions \nweighting"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "trq and spd req'd\ninto clutch\n(N*m, rad/s)"
	  SrcPort		  1
	  Points		  [25, 0]
	  Branch {
	    DstBlock		    "spd"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 40]
	    Branch {
	      DstBlock		      "Finds operation \npoint - energy/emissions \nweighting"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [0, 30]
	      DstBlock		      "Delta SOC\nexpected\nfrom regen"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "Finds operation \npoint - energy/emissions \nweighting"
	  SrcPort		  1
	  Points		  [85, 0]
	  Branch {
	    Points		    [0, -75]
	    DstBlock		    "Mux1"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 30]
	    DstBlock		    "Goto <vc>"
	    DstPort		    1
	  }
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "Fuzzy Logic\ncontrol strategy\n<cs>"
      SID		      "316"
      Ports		      [1, 1]
      Position		      [555, 548, 605, 582]
      ShowPortLabels	      "none"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDescription	      "This Block contains the Fuzzy Logic Control Strategy to control a parallel hybird configu"
      "ration. 2 modes of operation are available. \n\nA FUEL USE mode limits the instantaneous fuel use of the IC engi"
      "ne. \nAn EFFICIENCY mode tries to operate the IC engine near regions of peak efficiency.\n\nTo look at the CONTE"
      "NTS of this block, right-click and choose \"Look under Mask\"."
      MaskDisplay	      "image(imread('bdi_fuzzy.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"Fuzzy Logic\ncontrol strategy\n<cs>"
	Location		[110, 95, 1000, 389]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "trq and spd req'd\ninto clutch\n(N*m, rad/s)"
	  SID			  "6092"
	  Position		  [35, 160, 65, 180]
	  IconDisplay		  "Port number"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Block NOTES"
	  SID			  "6093"
	  Ports			  []
	  Position		  [795, 240, 851, 280]
	  BackgroundColor	  "green"
	  ShowName		  off
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  MaskDisplay		  "disp('Block\\nNOTES')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskPortRotate	  "default"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Block NOTES"
	    Location		    [314, 648, 925, 997]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Annotation {
	      SID		      "6094"
	      Name		      "Where TLOAD is the load required from the drive cycle due to acceleration, drag, road grade, etc.,"
	      " and \nTICE_Set is the desired output torque of the ICE.  The controller outputs the change of the throttle com"
	      "mand. "
	      Position		      [303, 320]
	    }
	    Annotation {
	      SID		      "6095"
	      Name		      "\nDue to the highly nonlinear, time varying nature of the plant, the control strategy will be\n im"
	      "plemented with the use of a fuzzy logic controller (FLC). The FLC will use two \ninputs:  the battery pack SOC "
	      "and the desired ICE torque. Based on the above inputs,\nthe ICE operating point is set (according to the MODE s"
	      "elected). Along the simulation, \nin the reverse loop, the desired e-machine torque is calculated from the \nfo"
	      "llowing equation.  \n\nTEM_Desired = TLOAD - TICE_Set\n"
	      Position		      [290, 244]
	    }
	    Annotation {
	      SID		      "6096"
	      Name		      "The idea behind the Fuzzy Logic control strategy is to let the ICE run at an operating point \ntha"
	      "t consumes less than x gram of fuel per second at all operating conditions (FUSE USE MODE) or to \noperate abou"
	      "t a preak efficiency point (EFFICIENCY MODE).  Since an Electric Machine is available \nto load-level, the HEV "
	      "can use its e-machine to force the engine to operate in a region that consumes less fuel, \nwhile maintaining  "
	      "the state of charge (SOC) of the battery pack over the  majority of the drive cycle. \nThis is achieved by  usi"
	      "ng to E-Machine to compensate for the dearth in Torque required to meet the road load.\n"
	      Position		      [316, 148]
	    }
	    Annotation {
	      SID		      "6097"
	      Name		      "This Block contains the Fuzzy Logic Control Strategy to control a parallel hybrid configuration.\n"
	      "\nA standard set of inputs (SoC and ICE torque required) are input in the beginning. Then scaling is done \nto "
	      "the inputs to reflect the input membership functions. Likewise, the outputs are scaled based on the no. of outp"
	      "ut \nmembership functions. The above block diagram also calls the M-Function which contains the rules.\n\n"
	      Position		      [290, 56]
	    }
	  }
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux"
	  SID			  "6098"
	  Ports			  [1, 2]
	  Position		  [90, 152, 125, 188]
	  Outputs		  "2"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Fuzzy logic Code"
	  SID			  "6099"
	  Ports			  [2, 1]
	  Position		  [440, 95, 510, 155]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "Fuzzy logic Code"
	    Location		    [386, 334, 937, 545]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Torque"
	      SID		      "6100"
	      Position		      [20, 63, 50, 77]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "SoC"
	      SID		      "6101"
	      Position		      [20, 98, 50, 112]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "6102"
	      Ports		      []
	      Position		      [475, 160, 531, 200]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[198, 195, 678, 363]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "6103"
		  Name			  "This block calls the Fuzzy Controller through the Matlab-Function module. \nThe Fuzzy Control algorithm "
		  "is written in MATLAB script. This makes it easy \nfor the user to edit the fuzzy algorithm and make changes.\n\nFo"
		  "r more information on Matlab-functions, please refer to the MATLAB help files."
		  Position		  [243, 53]
		}
	      }
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Fuel use \nor\nEfficieny"
	      SID		      "6104"
	      Position		      [430, 80, 460, 110]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      MATLABFcn
	      Name		      "MATLAB Fcn\nEFFICIENCY MODE"
	      SID		      "6105"
	      Ports		      [1, 1]
	      Position		      [225, 130, 285, 160]
	      MATLABFcn		      "mfuzzy_eff_mode(u(1),u(2))"
	      OutputDimensions	      "1"
	    }
	    Block {
	      BlockType		      MATLABFcn
	      Name		      "MATLAB Fcn\nFUEL USE MODE"
	      SID		      "6106"
	      Ports		      [1, 1]
	      Position		      [225, 25, 285, 55]
	      MATLABFcn		      "mfuzzy_fuel_mode(u(1),u(2))"
	      OutputDimensions	      "1"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Mode switcher"
	      SID		      "6107"
	      Position		      [285, 85, 390, 105]
	      Value		      "cs_fuzzy_fuel_mode"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "6108"
	      Ports		      [2, 1]
	      Position		      [90, 62, 125, 98]
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "delta \nalpha"
	      SID		      "6109"
	      Position		      [500, 88, 530, 102]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		Points			[0, -40]
		DstBlock		"MATLAB Fcn\nFUEL USE MODE"
		DstPort			1
	      }
	      Branch {
		Points			[0, 65]
		DstBlock		"MATLAB Fcn\nEFFICIENCY MODE"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Torque"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "SoC"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Mode switcher"
	      SrcPort		      1
	      DstBlock		      "Fuel use \nor\nEfficieny"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Fuel use \nor\nEfficieny"
	      SrcPort		      1
	      DstBlock		      "delta \nalpha"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "MATLAB Fcn\nFUEL USE MODE"
	      SrcPort		      1
	      Points		      [125, 0]
	      DstBlock		      "Fuel use \nor\nEfficieny"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "MATLAB Fcn\nEFFICIENCY MODE"
	      SrcPort		      1
	      Points		      [125, 0]
	      DstBlock		      "Fuel use \nor\nEfficieny"
	      DstPort		      3
	    }
	    Annotation {
	      SID		      "6110"
	      Name		      "FUZZY LOGIC CODE"
	      Position		      [251, 14]
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Input Scaling"
	  SID			  "6111"
	  Ports			  [1, 2]
	  Position		  [300, 94, 375, 156]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "Input Scaling"
	    Location		    [96, 117, 894, 604]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Torque required"
	      SID		      "6112"
	      Position		      [35, 68, 65, 82]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      " 2"
	      SID		      "6113"
	      Ports		      [2, 1]
	      Position		      [510, 76, 525, 109]
	    }
	    Block {
	      BlockType		      Sum
	      Name		      " 3"
	      SID		      "6114"
	      Ports		      [2, 1]
	      Position		      [335, 221, 350, 254]
	      Inputs		      "+-"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      " 5"
	      SID		      "6115"
	      Ports		      [2, 1]
	      Position		      [515, 241, 530, 274]
	    }
	    Block {
	      BlockType		      Sum
	      Name		      " 6"
	      SID		      "6116"
	      Ports		      [2, 1]
	      Position		      [365, 116, 380, 149]
	    }
	    Block {
	      BlockType		      Sum
	      Name		      " 7"
	      SID		      "6117"
	      Ports		      [3, 1]
	      Position		      [330, 328, 345, 362]
	      Inputs		      "++-"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "6118"
	      Ports		      []
	      Position		      [695, 335, 751, 375]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[332, 702, 928, 910]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "6119"
		  Name			  "INPUT SCALING"
		  Position		  [277, 29]
		}
		Annotation {
		  SID			  "6120"
		  Name			  "In this block, inputs to the Fuzzy Logic controller are computed. The Current torque demand on the ICE \n"
		  "and the SoC are input as 2 scaled variables to the fuzzy controller. Both inputs are scaled from 1 to 11.\n\nFor S"
		  "oC, a value of cs_lo_soc would correspond to 1 and a value of cs_hi_soc would correspond to 11, \nlinearly interpo"
		  "lating between them.\n\nFor the ICE Torque, any torque demand less than the target ICE torque would scale from 1 t"
		  "o 6. Any torque \ndemand greater than the target ICE torque would scale from 6 to 11 (the 2 being piecewise linear"
		  ").\n\nThe target ICE torque is the x g/s fuel use line, (FUEL USE MODE), or the peak efficiency line \n(EFFICIENCY"
		  " MODE)."
		  Position		  [298, 123]
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "6121"
	      Position		      [320, 80, 345, 100]
	      Value		      "5"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "6122"
	      Position		      [450, 90, 475, 110]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant7"
	      SID		      "6123"
	      Position		      [335, 277, 355, 293]
	      Value		      "5"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant8"
	      SID		      "6124"
	      Position		      [455, 255, 480, 275]
	      Value		      "6"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant9"
	      SID		      "6125"
	      Position		      [235, 337, 290, 353]
	      Value		      "10e4*eps"
	    }
	    Block {
	      BlockType		      From
	      Name		      "Current  \nEngine RPM\nfrom <fc>\n"
	      SID		      "6126"
	      Position		      [20, 163, 90, 187]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "engine_rpm"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto Output Scaling"
	      SID		      "6127"
	      Position		      [340, 186, 380, 204]
	      GotoTag		      "FLC1"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product8"
	      SID		      "6128"
	      Ports		      [3, 1]
	      Position		      [400, 69, 430, 101]
	      Inputs		      "**/"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "6129"
	      Ports		      [2, 1]
	      Position		      [415, 152, 445, 183]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      From
	      Name		      "SOC\nfrom <ess>"
	      SID		      "6130"
	      Position		      [20, 398, 80, 432]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation\n1-11"
	      SID		      "6131"
	      Ports		      [1, 1]
	      Position		      [420, 400, 450, 430]
	      InputPortMap	      "u0"
	      UpperLimit	      "11"
	      LowerLimit	      "1"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation\n1-11 "
	      SID		      "6132"
	      Ports		      [1, 1]
	      Position		      [645, 155, 675, 185]
	      InputPortMap	      "u0"
	      UpperLimit	      "11"
	      LowerLimit	      "1"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "SoC scaling function\n1-11"
	      SID		      "6133"
	      Position		      [225, 400, 285, 430]
	      Expr		      "10*(u-cs_hi_soc)/(cs_hi_soc-cs_lo_soc)+11"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "6134"
	      Position		      [590, 155, 620, 185]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "Target ICE Line"
	      SID		      "6135"
	      Position		      [145, 153, 195, 197]
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      Table		      "flc_target*fc_trq_scale"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "epsilon"
	      SID		      "6136"
	      Position		      [305, 117, 335, 133]
	      Value		      "eps"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max_torque lookup"
	      SID		      "6137"
	      Position		      [140, 314, 190, 356]
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      Table		      "fc_max_trq*fc_trq_scale"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "trouble"
	      SID		      "6138"
	      Ports		      [3, 1]
	      Position		      [405, 234, 435, 266]
	      Inputs		      "**/"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Torque"
	      SID		      "6139"
	      Position		      [705, 163, 735, 177]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "SoC"
	      SID		      "6140"
	      Position		      [705, 408, 735, 422]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product8"
	      SrcPort		      1
	      DstBlock		      " 2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      DstBlock		      " 2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      " 2"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      " 3"
	      SrcPort		      1
	      DstBlock		      "trouble"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant7"
	      SrcPort		      1
	      Points		      [15, 0; 0, -35]
	      DstBlock		      "trouble"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant8"
	      SrcPort		      1
	      DstBlock		      " 5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "trouble"
	      SrcPort		      1
	      DstBlock		      " 5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "SOC\nfrom <ess>"
	      SrcPort		      1
	      DstBlock		      "SoC scaling function\n1-11"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation\n1-11"
	      SrcPort		      1
	      DstBlock		      "SoC"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      " 5"
	      SrcPort		      1
	      Points		      [40, 0]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Saturation\n1-11 "
	      SrcPort		      1
	      DstBlock		      "Torque"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      Points		      [15, 0; 0, -5]
	      DstBlock		      "Product8"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant9"
	      SrcPort		      1
	      DstBlock		      " 7"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "epsilon"
	      SrcPort		      1
	      DstBlock		      " 6"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      " 6"
	      SrcPort		      1
	      DstBlock		      "Product8"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      " 7"
	      SrcPort		      1
	      Points		      [40, 0]
	      DstBlock		      "trouble"
	      DstPort		      3
	    }
	    Line {
	      Labels		      [1, 0]
	      SrcBlock		      "Current  \nEngine RPM\nfrom <fc>\n"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"Target ICE Line"
		DstPort			1
	      }
	      Branch {
		Points			[0, 160]
		DstBlock		"max_torque lookup"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "SoC scaling function\n1-11"
	      SrcPort		      1
	      DstBlock		      "Saturation\n1-11"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "Saturation\n1-11 "
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "max_torque lookup"
	      SrcPort		      1
	      DstBlock		      " 7"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Torque required"
	      SrcPort		      1
	      Points		      [225, 0]
	      Branch {
		DstBlock		"Product8"
		DstPort			1
	      }
	      Branch {
		Points			[0, 85]
		Branch {
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 70]
		  DstBlock		  " 3"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Target ICE Line"
	      SrcPort		      1
	      Points		      [105, 0]
	      Branch {
		Points			[15, 0]
		Branch {
		  Points		  [0, 20]
		  DstBlock		  "Goto Output Scaling"
		  DstPort		  1
		}
		Branch {
		  Points		  [30, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    " 6"
		    DstPort		    2
		  }
		}
	      }
	      Branch {
		Points			[0, 70]
		Branch {
		  DstBlock		  " 3"
		  DstPort		  2
		}
		Branch {
		  Points		  [0, 110]
		  DstBlock		  " 7"
		  DstPort		  3
		}
	      }
	    }
	    Annotation {
	      SID		      "6141"
	      Name		      "INPUT SCALING"
	      Position		      [507, 32]
	      FontName		      "Arial"
	      FontSize		      14
	      FontWeight	      "bold"
	    }
	    Annotation {
	      SID		      "6142"
	      Name		      "STANDARD INPUTS"
	      Position		      [226, 28]
	      FontName		      "Arial"
	      FontWeight	      "bold"
	    }
	  }
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux"
	  SID			  "6143"
	  Ports			  [2, 1]
	  Position		  [730, 117, 765, 153]
	  Inputs		  "2"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Output scaling"
	  SID			  "6144"
	  Ports			  [1, 1]
	  Position		  [565, 93, 640, 157]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "Output scaling"
	    Location		    [242, 320, 940, 676]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "delta alpha\n"
	      SID		      "6145"
	      Position		      [40, 143, 70, 157]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      " "
	      SID		      "6146"
	      Ports		      [2, 1]
	      Position		      [240, 81, 255, 114]
	      Inputs		      "+-"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      " 1"
	      SID		      "6147"
	      Ports		      [2, 1]
	      Position		      [240, 201, 255, 234]
	      Inputs		      "+-"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      " 2"
	      SID		      "6148"
	      Ports		      [2, 1]
	      Position		      [455, 251, 470, 284]
	    }
	    Block {
	      BlockType		      Sum
	      Name		      " 3"
	      SID		      "6149"
	      Ports		      [2, 1]
	      Position		      [240, 261, 255, 294]
	      Inputs		      "+-"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "6150"
	      Ports		      []
	      Position		      [586, 278, 641, 320]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[427, 288, 962, 473]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "6151"
		  Name			  "OUTPUT SCALING\nThis bock scales the outputs of the controller to match the size of the components.\nThe"
		  " scaling affects the way control signal is fed into the actuators. The scaling is done based \non the membership f"
		  "unctions of the Fuzzy Control block. \n\nHere:\n DELTA ALPHA is scaled from 1 to 11, 1 representing zero torque, 6"
		  " representing target Torque \nand 11 representing Max ICE torque. (the 2 regions being piecewise linear).\n\n"
		  Position		  [269, 92]
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "6152"
	      Position		      [190, 155, 215, 175]
	      Value		      "6"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "6153"
	      Position		      [195, 95, 220, 115]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "6154"
	      Position		      [340, 70, 365, 90]
	      Value		      "5"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "6155"
	      Position		      [195, 215, 220, 235]
	      Value		      "6"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "6156"
	      Position		      [340, 255, 365, 275]
	      Value		      "5"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From Input \nscaling"
	      SID		      "6157"
	      Position		      [30, 40, 90, 70]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "FLC1"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From5"
	      SID		      "6158"
	      Position		      [20, 255, 90, 285]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "engine_rpm"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product4"
	      SID		      "6159"
	      Ports		      [2, 1]
	      Position		      [295, 47, 325, 78]
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product5"
	      SID		      "6160"
	      Ports		      [2, 1]
	      Position		      [395, 57, 425, 88]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product6"
	      SID		      "6161"
	      Ports		      [2, 1]
	      Position		      [295, 232, 325, 263]
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product7"
	      SID		      "6162"
	      Ports		      [2, 1]
	      Position		      [395, 242, 425, 273]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "6163"
	      Ports		      [2, 1]
	      Position		      [245, 142, 275, 173]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation 1-11"
	      SID		      "6164"
	      Ports		      [1, 1]
	      Position		      [135, 135, 165, 165]
	      InputPortMap	      "u0"
	      UpperLimit	      "11"
	      LowerLimit	      "1"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation4"
	      SID		      "6165"
	      Ports		      [1, 1]
	      Position		      [565, 145, 595, 175]
	      InputPortMap	      "u0"
	      UpperLimit	      "max(fc_max_trq*fc_trq_scale)"
	      LowerLimit	      "0"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "6166"
	      Position		      [505, 145, 535, 175]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max_torque lookup"
	      SID		      "6167"
	      Position		      [135, 257, 180, 283]
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      Table		      "fc_max_trq*fc_trq_scale"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "ICE Torque\ncommand"
	      SID		      "6168"
	      Position		      [635, 153, 665, 167]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      " "
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Saturation 1-11"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	      Branch {
		Points			[0, -60]
		DstBlock		" "
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      " "
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Product4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product4"
	      SrcPort		      1
	      DstBlock		      "Product5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "Product5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From Input \nscaling"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"Product4"
		DstPort			1
	      }
	      Branch {
		Points			[0, 245]
		Branch {
		  Points		  [0, 30; 335, 0]
		  DstBlock		  " 2"
		  DstPort		  2
		}
		Branch {
		  Points		  [120, 0]
		  DstBlock		  " 3"
		  DstPort		  2
		}
	      }
	    }
	    Line {
	      SrcBlock		      "delta alpha\n"
	      SrcPort		      1
	      Points		      [35, 0]
	      Branch {
		Points			[0, 60]
		DstBlock		" 1"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Saturation 1-11"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      " 1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      " 1"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Product6"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      " 3"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Product6"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product6"
	      SrcPort		      1
	      DstBlock		      "Product7"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "Product7"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product5"
	      SrcPort		      1
	      Points		      [60, 0]
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      " 2"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Product7"
	      SrcPort		      1
	      DstBlock		      " 2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "Saturation4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation4"
	      SrcPort		      1
	      DstBlock		      "ICE Torque\ncommand"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From5"
	      SrcPort		      1
	      DstBlock		      "max_torque lookup"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "max_torque lookup"
	      SrcPort		      1
	      DstBlock		      " 3"
	      DstPort		      1
	    }
	    Annotation {
	      SID		      "6169"
	      Name		      "OUTPUT SCALING"
	      Position		      [274, 15]
	      FontName		      "Arial"
	      FontSize		      12
	      FontWeight	      "bold"
	    }
	  }
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace4"
	  SID			  "6170"
	  Ports			  [1]
	  Position		  [185, 150, 265, 170]
	  VariableName		  "cs_trq_in_r"
	  MaxDataPoints		  "inf"
	  SampleTime		  "-1"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace5"
	  SID			  "6171"
	  Ports			  [1]
	  Position		  [185, 190, 265, 210]
	  VariableName		  "cs_spd_in_r"
	  MaxDataPoints		  "inf"
	  SampleTime		  "-1"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "help"
	  SID			  "6172"
	  Ports			  []
	  Position		  [746, 229, 777, 272]
	  BackgroundColor	  "yellow"
	  DropShadow		  on
	  ShowName		  off
	  OpenFcn		  "web(['file:\\\\\\' which('fuzzy_logic.htm')]);"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskPortRotate	  "default"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "help"
	    Location		    [203, 331, 569, 538]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "trq and spd\nreq'd from\nengine\n(N*m, rad/s)"
	  SID			  "6173"
	  Position		  [800, 128, 830, 142]
	  IconDisplay		  "Port number"
	}
	Line {
	  SrcBlock		  "Output scaling"
	  SrcPort		  1
	  DstBlock		  "Mux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux"
	  SrcPort		  1
	  DstBlock		  "trq and spd\nreq'd from\nengine\n(N*m, rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Fuzzy logic Code"
	  SrcPort		  1
	  DstBlock		  "Output scaling"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Input Scaling"
	  SrcPort		  1
	  DstBlock		  "Fuzzy logic Code"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Input Scaling"
	  SrcPort		  2
	  DstBlock		  "Fuzzy logic Code"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "trq and spd req'd\ninto clutch\n(N*m, rad/s)"
	  SrcPort		  1
	  DstBlock		  "Demux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  2
	  Points		  [15, 0; 0, 20]
	  Branch {
	    DstBlock		    "To Workspace5"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 30; 570, 0]
	    DstBlock		    "Mux"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    DstBlock		    "To Workspace4"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -35]
	    DstBlock		    "Input Scaling"
	    DstPort		    1
	  }
	}
	Annotation {
	  SID			  "6174"
	  Name			  "FUZZY CONTROL BLOCK"
	  Position		  [434, 25]
	  FontName		  "Arial"
	  FontSize		  12
	  FontWeight		  "bold"
	}
	Annotation {
	  SID			  "6175"
	  Name			  "Speed is directly fed through"
	  Position		  [448, 222]
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "Fuzzy Logic\ncontrol strategy\nwith Emissions\n<cs>"
      SID		      "317"
      Ports		      [1, 1]
      Position		      [685, 542, 735, 578]
      ShowPortLabels	      "none"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_fuzzy.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"Fuzzy Logic\ncontrol strategy\nwith Emissions\n<cs>"
	Location		[76, 152, 958, 550]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"93"
	Block {
	  BlockType		  Inport
	  Name			  "trq and spd req'd\ninto clutch\n(N*m, rad/s)"
	  SID			  "6176"
	  Position		  [35, 160, 65, 180]
	  IconDisplay		  "Port number"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Block NOTES"
	  SID			  "6177"
	  Ports			  []
	  Position		  [791, 283, 846, 325]
	  BackgroundColor	  "green"
	  ShowName		  off
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  MaskDisplay		  "disp('Block\\nNOTES')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskPortRotate	  "default"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Block NOTES"
	    Location		    [441, 524, 976, 709]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Annotation {
	      SID		      "6178"
	      Name		      "The Fuzzy Control Block takes in the torque and speed requested by the clutch (sink) and calculate"
	      "s \nthe torque split between the ICE and the Motor. The fuzzy logic algorithm sets a base (optimal) \noperating"
	      " point of the ICE and modifies the actual operating point about the optimal, based on \nthe actual torque reque"
	      "st and the battery State of Charge (SOC). Finally, a torque request is sent to the \nICE and the motor buffers "
	      "the remaining torque (positive or negative)."
	      Position		      [269, 87]
	    }
	  }
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux"
	  SID			  "6179"
	  Ports			  [1, 2]
	  Position		  [100, 152, 135, 188]
	  Outputs		  "2"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Fuzzy logic Code"
	  SID			  "6180"
	  Ports			  [2, 1]
	  Position		  [420, 90, 490, 150]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "Fuzzy logic Code"
	    Location		    [342, 492, 922, 680]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Torque"
	      SID		      "6181"
	      Position		      [35, 63, 65, 77]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "SoC"
	      SID		      "6182"
	      Position		      [35, 103, 65, 117]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "6183"
	      Ports		      []
	      Position		      [495, 110, 551, 150]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[202, 191, 682, 359]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "6184"
		  Name			  "This block calls the Fuzzy Controller through the Matlab-Function module. \nThe Fuzzy Control algorithm "
		  "is written in MATLAB script. This makes it easy \nfor the user to edit the fuzzy algorithm and make changes.\n\nFo"
		  "r more information on Matlab-functions, please refer to the MATLAB help files."
		  Position		  [243, 53]
		}
	      }
	    }
	    Block {
	      BlockType		      MATLABFcn
	      Name		      "MATLAB Fcn\nGPS\n"
	      SID		      "6185"
	      Ports		      [1, 1]
	      Position		      [295, 75, 355, 105]
	      MATLABFcn		      "mfuzzy_emissions(u(1),u(2))"
	      OutputDimensions	      "1"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "6186"
	      Ports		      [2, 1]
	      Position		      [185, 52, 225, 128]
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "delta \nalpha"
	      SID		      "6187"
	      Position		      [405, 83, 435, 97]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      DstBlock		      "MATLAB Fcn\nGPS\n"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Torque"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "MATLAB Fcn\nGPS\n"
	      SrcPort		      1
	      DstBlock		      "delta \nalpha"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "SoC"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Annotation {
	      SID		      "6188"
	      Name		      "FUZZY LOGIC CODE"
	      Position		      [316, 24]
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Input Scaling"
	  SID			  "6189"
	  Ports			  [1, 1]
	  Position		  [255, 74, 330, 136]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "Input Scaling"
	    Location		    [24, 214, 1036, 662]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Torque required"
	      SID		      "6190"
	      Position		      [45, 73, 75, 87]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      " 2"
	      SID		      "6191"
	      Ports		      [2, 1]
	      Position		      [890, 81, 905, 114]
	    }
	    Block {
	      BlockType		      Sum
	      Name		      " 3"
	      SID		      "6192"
	      Ports		      [2, 1]
	      Position		      [715, 226, 730, 259]
	      Inputs		      "+-"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      " 5"
	      SID		      "6193"
	      Ports		      [2, 1]
	      Position		      [895, 246, 910, 279]
	    }
	    Block {
	      BlockType		      Sum
	      Name		      " 6"
	      SID		      "6194"
	      Ports		      [2, 1]
	      Position		      [745, 116, 760, 149]
	    }
	    Block {
	      BlockType		      Sum
	      Name		      " 7"
	      SID		      "6195"
	      Ports		      [3, 1]
	      Position		      [710, 333, 725, 367]
	      Inputs		      "++-"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "6196"
	      Ports		      []
	      Position		      [945, 315, 1001, 355]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[441, 351, 1027, 840]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "6197"
		  Name			  "In this block, inputs to the Fuzzy Logic controller are computed. The Current torque demand on the ICE \n"
		  "and the SoC are input as 2 scaled variables to the fuzzy controller. Both inputs are scaled from 1 to 11.\n\nFor S"
		  "oC, a value of cs_lo_soc would correspond to 1 and a value of cs_hi_soc would correspond to 11, \nlinearly interpo"
		  "lating between them.\n\nFor the ICE Torque, any torque demand less than the target ICE torque would scale from 1 t"
		  "o 6. Any torque \ndemand greater than the target ICE torque would scale from 6 to 11 (the 2 being piecewise linear"
		  ").\n\n\n\n"
		  Position		  [288, 123]
		}
		Annotation {
		  SID			  "6198"
		  Name			  "INPUT SCALING"
		  Position		  [277, 29]
		}
		Annotation {
		  SID			  "6199"
		  Name			  "TARGET TORQUE COMPUTATION"
		  Position		  [277, 214]
		}
		Annotation {
		  SID			  "6200"
		  Name			  "The target (optimal) torque for a particular speed requested from the ICE is calculated using a weighted"
		  " average of \nthe efficiency and emissions data for a particular speed in consideration. \n\nThe calculation of th"
		  "e target torque involves calculating the minimum of a cost function. The competing quantities \nof the cost functi"
		  "on include the emissions and fuel economy for all torques at that speed, weighed by their \nrespective weights. \n"
		  "\nThe relative importance for the competing quantities (weights) are changed during the simulation, \nto reflect c"
		  "hanges in driving conditions. For example, during a cold start, emissions are given higher priority. Also,\nif the"
		  " electric motor has been reaching it's maximum assist capability in the wake of the torque request not being met,\n"
		  "then emissions are sacrificed for higher torque from the ICE.\n"
		  Position		  [288, 312]
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "6201"
	      Position		      [695, 85, 720, 105]
	      Value		      "5"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "6202"
	      Position		      [830, 95, 855, 115]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant7"
	      SID		      "6203"
	      Position		      [715, 282, 735, 298]
	      Value		      "5"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant8"
	      SID		      "6204"
	      Position		      [835, 260, 860, 280]
	      Value		      "6"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant9"
	      SID		      "6205"
	      Position		      [615, 342, 670, 358]
	      Value		      "10e4*eps"
	    }
	    Block {
	      BlockType		      From
	      Name		      "Current  \nEngine speed\nfrom <fc>\n(rad/s)\n"
	      SID		      "6206"
	      Position		      [20, 288, 105, 312]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "engine_rpm"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>"
	      SID		      "6207"
	      Position		      [70, 141, 140, 159]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "fc_clt_tmp"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From<mc>/enforce torque limit"
	      SID		      "6208"
	      Position		      [75, 235, 175, 255]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "mc_trq_limited"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      SID		      "6209"
	      Position		      [140, 173, 170, 197]
	      Gain		      "vc_fc_warm_tmp_frac"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto Output Scaling"
	      SID		      "6210"
	      Position		      [720, 191, 760, 209]
	      GotoTag		      "FLC1"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      MATLABFcn
	      Name		      "MATLAB Fcn\nTarget torque"
	      SID		      "6211"
	      Ports		      [1, 1]
	      Position		      [470, 165, 530, 195]
	      MATLABFcn		      "fuzzy_target_compute_emissions(u(1),u(2),u(3))"
	      OutputDimensions	      "1"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "6212"
	      Position		      [320, 230, 350, 260]
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "6213"
	      Ports		      [3, 1]
	      Position		      [415, 148, 445, 222]
	      FontName		      "Arial"
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product8"
	      SID		      "6214"
	      Ports		      [3, 1]
	      Position		      [780, 74, 810, 106]
	      Inputs		      "**/"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "6215"
	      Ports		      [2, 1]
	      Position		      [795, 157, 825, 188]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator5"
	      SID		      "6216"
	      Ports		      [2, 1]
	      Position		      [190, 144, 215, 171]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation\n1-11 "
	      SID		      "6217"
	      Ports		      [1, 1]
	      Position		      [1025, 160, 1055, 190]
	      InputPortMap	      "u0"
	      UpperLimit	      "11"
	      LowerLimit	      "1"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "6218"
	      Position		      [970, 160, 1000, 190]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To Workspace4"
	      SID		      "6219"
	      Ports		      [1]
	      Position		      [570, 244, 665, 266]
	      VariableName	      "flc_opt_trq"
	      MaxDataPoints	      "inf"
	      SampleTime	      "-1"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To Workspace5"
	      SID		      "6220"
	      Ports		      [1]
	      Position		      [570, 284, 665, 306]
	      VariableName	      "flc_max_trq"
	      MaxDataPoints	      "inf"
	      SampleTime	      "-1"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "epsilon"
	      SID		      "6221"
	      Position		      [690, 122, 720, 138]
	      Value		      "eps"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max_torque lookup"
	      SID		      "6222"
	      Position		      [140, 334, 190, 376]
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      Table		      "fc_max_trq*fc_trq_scale"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "product"
	      SID		      "6223"
	      Ports		      [3, 1]
	      Position		      [785, 239, 815, 271]
	      Inputs		      "**/"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "thermostat\nsetting"
	      SID		      "6224"
	      Position		      [75, 177, 125, 193]
	      Value		      "fc_tstat"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Torque"
	      SID		      "6225"
	      Position		      [1085, 168, 1115, 182]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "Saturation\n1-11 "
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      " 7"
	      SrcPort		      1
	      Points		      [40, 0]
	      DstBlock		      "product"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      " 6"
	      SrcPort		      1
	      DstBlock		      "Product8"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "epsilon"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      " 6"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant9"
	      SrcPort		      1
	      DstBlock		      " 7"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      Points		      [20, 0; 0, -5]
	      DstBlock		      "Product8"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Saturation\n1-11 "
	      SrcPort		      1
	      DstBlock		      "Torque"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      " 5"
	      SrcPort		      1
	      Points		      [40, 0]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "product"
	      SrcPort		      1
	      DstBlock		      " 5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant8"
	      SrcPort		      1
	      DstBlock		      " 5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant7"
	      SrcPort		      1
	      Points		      [15, 0; 0, -35]
	      DstBlock		      "product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      " 3"
	      SrcPort		      1
	      DstBlock		      "product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      " 2"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      DstBlock		      " 2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product8"
	      SrcPort		      1
	      DstBlock		      " 2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "MATLAB Fcn\nTarget torque"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		Points			[0, 75]
		DstBlock		"To Workspace4"
		DstPort			1
	      }
	      Branch {
		Points			[145, 0]
		Branch {
		  Points		  [0, 70]
		  Branch {
		    Points		    [0, 110]
		    DstBlock		    " 7"
		    DstPort		    3
		  }
		  Branch {
		    DstBlock		    " 3"
		    DstPort		    2
		  }
		}
		Branch {
		  Points		  [15, 0]
		  Branch {
		    Points		    [30, 0]
		    Branch {
		    DstBlock		    " 6"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		  }
		  Branch {
		    Points		    [0, 20]
		    DstBlock		    "Goto Output Scaling"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Line {
	      Labels		      [1, 0]
	      SrcBlock		      "Current  \nEngine speed\nfrom <fc>\n(rad/s)\n"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"max_torque lookup"
		DstPort			1
	      }
	      Branch {
		Points			[255, 0; 0, -90]
		DstBlock		"Mux"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      Points		      [0, -5]
	      DstBlock		      "MATLAB Fcn\nTarget torque"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "max_torque lookup"
	      SrcPort		      1
	      Points		      [360, 0]
	      Branch {
		Points			[140, 0]
		DstBlock		" 7"
		DstPort			1
	      }
	      Branch {
		DstBlock		"To Workspace5"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Torque required"
	      SrcPort		      1
	      Points		      [505, 0]
	      Branch {
		Points			[0, 85]
		Branch {
		  Points		  [0, 70]
		  DstBlock		  " 3"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
	      }
	      Branch {
		DstBlock		"Product8"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "From<mc>/enforce torque limit"
	      SrcPort		      1
	      DstBlock		      "Memory"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "thermostat\nsetting"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <vc>"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator5"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [0, -60]
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Annotation {
	      SID		      "6226"
	      Name		      "INPUTS"
	      Position		      [216, 38]
	      FontName		      "Arial"
	      FontSize		      14
	      FontWeight	      "bold"
	    }
	    Annotation {
	      SID		      "6227"
	      Name		      "INPUT SCALING"
	      Position		      [782, 37]
	      FontName		      "Arial"
	      FontSize		      14
	      FontWeight	      "bold"
	    }
	    Annotation {
	      SID		      "6228"
	      Name		      "Engine COLD"
	      Position		      [267, 149]
	    }
	    Annotation {
	      SID		      "6229"
	      Name		      "Motor Max \nTorque reached"
	      Position		      [248, 226]
	    }
	    Annotation {
	      SID		      "6230"
	      Name		      "engine speed"
	      Position		      [223, 291]
	    }
	  }
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux"
	  SID			  "6231"
	  Ports			  [2, 1]
	  Position		  [755, 112, 790, 148]
	  Inputs		  "2"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Output scaling"
	  SID			  "6232"
	  Ports			  [1, 1]
	  Position		  [550, 88, 625, 152]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "Output scaling"
	    Location		    [258, 313, 960, 721]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "delta alpha\n"
	      SID		      "6233"
	      Position		      [40, 143, 70, 157]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      " "
	      SID		      "6234"
	      Ports		      [2, 1]
	      Position		      [240, 81, 255, 114]
	      Inputs		      "+-"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      " 1"
	      SID		      "6235"
	      Ports		      [2, 1]
	      Position		      [240, 201, 255, 234]
	      Inputs		      "+-"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      " 2"
	      SID		      "6236"
	      Ports		      [2, 1]
	      Position		      [455, 251, 470, 284]
	    }
	    Block {
	      BlockType		      Sum
	      Name		      " 3"
	      SID		      "6237"
	      Ports		      [2, 1]
	      Position		      [240, 261, 255, 294]
	      Inputs		      "+-"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "6238"
	      Ports		      []
	      Position		      [586, 278, 641, 320]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[431, 284, 966, 469]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "6239"
		  Name			  "OUTPUT SCALING\nThis bock scales the outputs of the controller to match the size of the components.\nThe"
		  " scaling affects the way control signal is fed into the actuators. The scaling is done based \non the membership f"
		  "unctions of the Fuzzy Control block. \n\nHere:\n DELTA ALPHA is scaled from 1 to 11, 1 representing zero torque, 6"
		  " representing target Torque \nand 11 representing Max ICE torque. (the 2 regions being piecewise linear).\n\n"
		  Position		  [269, 92]
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "6240"
	      Position		      [190, 155, 215, 175]
	      Value		      "6"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "6241"
	      Position		      [195, 95, 220, 115]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "6242"
	      Position		      [340, 70, 365, 90]
	      Value		      "5"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "6243"
	      Position		      [195, 215, 220, 235]
	      Value		      "6"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "6244"
	      Position		      [340, 255, 365, 275]
	      Value		      "5"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From Input \nscaling"
	      SID		      "6245"
	      Position		      [30, 40, 90, 70]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "FLC1"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From5"
	      SID		      "6246"
	      Position		      [20, 255, 90, 285]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "engine_rpm"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product4"
	      SID		      "6247"
	      Ports		      [2, 1]
	      Position		      [295, 47, 325, 78]
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product5"
	      SID		      "6248"
	      Ports		      [2, 1]
	      Position		      [395, 57, 425, 88]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product6"
	      SID		      "6249"
	      Ports		      [2, 1]
	      Position		      [295, 232, 325, 263]
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product7"
	      SID		      "6250"
	      Ports		      [2, 1]
	      Position		      [395, 242, 425, 273]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "6251"
	      Ports		      [2, 1]
	      Position		      [245, 142, 275, 173]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation 1-11"
	      SID		      "6252"
	      Ports		      [1, 1]
	      Position		      [135, 135, 165, 165]
	      InputPortMap	      "u0"
	      UpperLimit	      "11"
	      LowerLimit	      "1"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation4"
	      SID		      "6253"
	      Ports		      [1, 1]
	      Position		      [565, 145, 595, 175]
	      InputPortMap	      "u0"
	      UpperLimit	      "max(fc_max_trq*fc_trq_scale)"
	      LowerLimit	      "0"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "6254"
	      Position		      [505, 145, 535, 175]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max_torque lookup"
	      SID		      "6255"
	      Position		      [135, 257, 180, 283]
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      Table		      "fc_max_trq*fc_trq_scale"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "ICE Torque\ncommand"
	      SID		      "6256"
	      Position		      [635, 153, 665, 167]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "max_torque lookup"
	      SrcPort		      1
	      DstBlock		      " 3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From5"
	      SrcPort		      1
	      DstBlock		      "max_torque lookup"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation4"
	      SrcPort		      1
	      DstBlock		      "ICE Torque\ncommand"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "Saturation4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product7"
	      SrcPort		      1
	      DstBlock		      " 2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      " 2"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product5"
	      SrcPort		      1
	      Points		      [60, 0]
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "Product7"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product6"
	      SrcPort		      1
	      DstBlock		      "Product7"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      " 3"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Product6"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      " 1"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Product6"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      " 1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "delta alpha\n"
	      SrcPort		      1
	      Points		      [35, 0]
	      Branch {
		DstBlock		"Saturation 1-11"
		DstPort			1
	      }
	      Branch {
		Points			[0, 60]
		DstBlock		" 1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "From Input \nscaling"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, 245]
		Branch {
		  Points		  [120, 0]
		  DstBlock		  " 3"
		  DstPort		  2
		}
		Branch {
		  Points		  [0, 30; 335, 0]
		  DstBlock		  " 2"
		  DstPort		  2
		}
	      }
	      Branch {
		DstBlock		"Product4"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "Product5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product4"
	      SrcPort		      1
	      DstBlock		      "Product5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      " "
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Product4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Saturation 1-11"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, -60]
		DstBlock		" "
		DstPort			1
	      }
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      " "
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Annotation {
	      SID		      "6257"
	      Name		      "OUTPUT SCALING"
	      Position		      [274, 15]
	      FontName		      "Arial"
	      FontSize		      12
	      FontWeight	      "bold"
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "SoC "
	  SID			  "6258"
	  Ports			  [0, 1]
	  Position		  [340, 174, 390, 216]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "SoC "
	    Location		    [383, 84, 1066, 398]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "6259"
	      Ports		      []
	      Position		      [505, 225, 561, 265]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[216, 177, 696, 345]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "6260"
		  Name			  "This block scales the battery SOC so as to feed it into the Fuzzy controller.\n1 represents the lower li"
		  "mit of allowable battery SOC while 11 represents the higher\nlimit of allowable battery SOC."
		  Position		  [243, 63]
		}
	      }
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "6261"
	      Ports		      [3, 1]
	      Position		      [415, 106, 430, 194]
	      ShowName		      off
	      Inputs		      "3"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      From
	      Name		      "SOC\nfrom <ess>"
	      SID		      "6262"
	      Position		      [150, 68, 210, 102]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation\n1-11"
	      SID		      "6263"
	      Ports		      [1, 1]
	      Position		      [570, 135, 600, 165]
	      InputPortMap	      "u0"
	      UpperLimit	      "11"
	      LowerLimit	      "1"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "SoC scaling function\n1-11"
	      SID		      "6264"
	      Position		      [470, 135, 530, 165]
	      Expr		      "10*(u(1)-u(2))/(u(2)-u(3))+11"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "default = 0.45"
	      SID		      "6265"
	      Position		      [140, 185, 215, 205]
	      Value		      "cs_lo_soc"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "default = 0.55"
	      SID		      "6266"
	      Position		      [140, 140, 215, 160]
	      Value		      "cs_hi_soc"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "SoC"
	      SID		      "6267"
	      Position		      [625, 143, 655, 157]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      DstBlock		      "SoC scaling function\n1-11"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "SOC\nfrom <ess>"
	      SrcPort		      1
	      Points		      [185, 0]
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "default = 0.55"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "default = 0.45"
	      SrcPort		      1
	      Points		      [180, 0]
	      DstBlock		      "Mux"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "SoC scaling function\n1-11"
	      SrcPort		      1
	      DstBlock		      "Saturation\n1-11"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation\n1-11"
	      SrcPort		      1
	      DstBlock		      "SoC"
	      DstPort		      1
	    }
	    Annotation {
	      SID		      "6268"
	      Name		      "soc"
	      Position		      [365, 107]
	    }
	    Annotation {
	      SID		      "6269"
	      Name		      "cs_hi_soc"
	      Position		      [376, 136]
	    }
	    Annotation {
	      SID		      "6270"
	      Name		      "cs_lo_soc"
	      Position		      [368, 181]
	    }
	    Annotation {
	      SID		      "6271"
	      Name		      "BASE SOC LIMITS\nHigh= 0. 55\nLow  = 0.45"
	      Position		      [290, 231]
	    }
	  }
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace4"
	  SID			  "6272"
	  Ports			  [1]
	  Position		  [185, 245, 265, 265]
	  VariableName		  "cs_trq_in_r"
	  MaxDataPoints		  "inf"
	  SampleTime		  "-1"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace5"
	  SID			  "6273"
	  Ports			  [1]
	  Position		  [185, 290, 265, 310]
	  VariableName		  "cs_spd_in_r"
	  MaxDataPoints		  "inf"
	  SampleTime		  "-1"
	}
	Block {
	  BlockType		  Outport
	  Name			  "trq and spd\nreq'd from\nengine\n(N*m, rad/s)"
	  SID			  "6274"
	  Position		  [825, 123, 855, 137]
	  IconDisplay		  "Port number"
	}
	Line {
	  SrcBlock		  "Fuzzy logic Code"
	  SrcPort		  1
	  DstBlock		  "Output scaling"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Input Scaling"
	  SrcPort		  1
	  DstBlock		  "Fuzzy logic Code"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "trq and spd req'd\ninto clutch\n(N*m, rad/s)"
	  SrcPort		  1
	  DstBlock		  "Demux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  2
	  Points		  [5, 0; 0, 120]
	  Branch {
	    DstBlock		    "To Workspace5"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 40; 595, 0]
	    DstBlock		    "Mux"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  1
	  Points		  [30, 0]
	  Branch {
	    DstBlock		    "To Workspace4"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -55]
	    DstBlock		    "Input Scaling"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Mux"
	  SrcPort		  1
	  DstBlock		  "trq and spd\nreq'd from\nengine\n(N*m, rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "SoC "
	  SrcPort		  1
	  Points		  [10, 0]
	  DstBlock		  "Fuzzy logic Code"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Output scaling"
	  SrcPort		  1
	  DstBlock		  "Mux"
	  DstPort		  1
	}
	Annotation {
	  SID			  "6275"
	  Name			  "FUZZY CONTROL BLOCK"
	  Position		  [434, 25]
	  FontName		  "Arial"
	  FontSize		  12
	  FontWeight		  "bold"
	}
	Annotation {
	  SID			  "6276"
	  Name			  "Speed is directly fed through"
	  Position		  [448, 312]
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "Insight electric assist\ncontrol strategy\n<cs> DIRECT SPLIT"
      SID		      "318"
      Ports		      [1, 2]
      Position		      [215, 335, 245, 370]
      BackgroundColor	      "yellow"
      AncestorBlock	      "lib_controls/Insight electric assist\ncontrol strategy\n<cs> DIRECT SPLIT"
      LibraryVersion	      "*"
      ShowPortLabels	      "none"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_cs.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"Insight electric assist\ncontrol strategy\n<cs> DIRECT SPLIT"
	Location		[5, 80, 1010, 561]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	212
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"61"
	SIDHighWatermark	"172"
	Block {
	  BlockType		  Inport
	  Name			  "trq and spd req'd\ninto clutch\n(N*m, rad/s)"
	  SID			  "318:1"
	  Position		  [60, 173, 90, 187]
	  IconDisplay		  "Port number"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "1st gear ?"
	  SID			  "318:2"
	  Ports			  [2, 1]
	  Position		  [440, 97, 485, 133]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "1st gear ?"
	    Location		    [225, 328, 890, 683]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "In 1"
	      SID		      "318:3"
	      Position		      [50, 303, 80, 317]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "In 2"
	      SID		      "318:4"
	      Position		      [45, 28, 75, 42]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "318:5"
	      Position		      [120, 243, 145, 267]
	      Value		      "125"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "318:6"
	      Position		      [95, 134, 115, 156]
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      SID		      "318:7"
	      Position		      [30, 90, 120, 120]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "gear_number"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From2"
	      SID		      "318:8"
	      Position		      [20, 225, 110, 255]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "cs_trq_in_r"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "318:9"
	      Ports		      [2, 1]
	      Position		      [290, 142, 320, 173]
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "318:10"
	      Ports		      [2, 1]
	      Position		      [145, 97, 175, 128]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "318:11"
	      Ports		      [2, 1]
	      Position		      [175, 232, 205, 263]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch11"
	      SID		      "318:12"
	      Position		      [365, 145, 395, 175]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Out1"
	      SID		      "318:13"
	      Position		      [425, 153, 455, 167]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "In 2"
	      SrcPort		      1
	      Points		      [270, 0]
	      DstBlock		      "Switch11"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "In 1"
	      SrcPort		      1
	      Points		      [265, 0]
	      DstBlock		      "Switch11"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch11"
	      SrcPort		      1
	      DstBlock		      "Out1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From2"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      Points		      [40, 0; 0, -85]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      DstBlock		      "Switch11"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [70, 0; 0, 35]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Annotation {
	      SID		      "318:14"
	      Name		      "1st Gear"
	      Position		      [213, 104]
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Alternator\nFunction"
	  SID			  "318:15"
	  Ports			  [2, 2]
	  Position		  [630, 105, 670, 140]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "Alternator\nFunction"
	    Location		    [2, 74, 1014, 724]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "In1"
	      SID		      "318:16"
	      Position		      [50, 193, 80, 207]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "In2"
	      SID		      "318:17"
	      Position		      [55, 473, 85, 487]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "318:18"
	      Ports		      []
	      Position		      [20, 130, 76, 170]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[634, 323, 1223, 566]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "318:19"
		  Name			  "ALTERNATOR FUNCTION\nIn the HONDA Insight, there is no separate alternator for the vehicle in the powert"
		  "rain\nto supply power for the accessory loads. The main electric motor is the alternator for the vehicle. \nThus, "
		  "it always produces a small negative torque for driving the accessory loads.  But the electric\nmotor has to take i"
		  "nto account, the component efficiencies, and thus, is forced\nto regenerate a little more than the accessory load."
		  "\n\nDuring assist, the battery pack supplies the electrical accessory loads.\n"
		  Position		  [287, 128]
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "318:20"
	      Position		      [375, 95, 400, 115]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "318:21"
	      Position		      [545, 245, 570, 265]
	      BlockMirror	      on
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "318:22"
	      Position		      [730, 70, 755, 90]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      SID		      "318:23"
	      Position		      [25, 250, 140, 270]
	      BackgroundColor	      "cyan"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "acc_elec_pwr_est"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <fc>\nEngine speed\nin rad/s"
	      SID		      "318:24"
	      Position		      [25, 300, 115, 330]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "engine_rpm"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      SID		      "318:25"
	      Position		      [535, 215, 650, 235]
	      BackgroundColor	      "cyan"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "acc_elec_pwr_est"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      SID		      "318:26"
	      Ports		      [2, 1]
	      Position		      [210, 247, 230, 303]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      SID		      "318:27"
	      Ports		      [2, 1]
	      Position		      [755, 282, 775, 338]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "318:28"
	      Ports		      [2, 1]
	      Position		      [455, 82, 485, 113]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator6"
	      SID		      "318:29"
	      Ports		      [2, 1]
	      Position		      [790, 57, 820, 88]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum2"
	      SID		      "318:30"
	      Ports		      [2, 1]
	      Position		      [320, 239, 335, 286]
	      ShowName		      off
	      Inputs		      "+-"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum3"
	      SID		      "318:31"
	      Ports		      [2, 1]
	      Position		      [805, 239, 820, 286]
	      ShowName		      off
	      Inputs		      "+-"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum4"
	      SID		      "318:32"
	      Ports		      [2, 1]
	      Position		      [610, 279, 625, 326]
	      ShowName		      off
	      Inputs		      "+-"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum5"
	      SID		      "318:33"
	      Ports		      [2, 1]
	      Position		      [670, 269, 685, 316]
	      ShowName		      off
	      Inputs		      "+-"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum7"
	      SID		      "318:34"
	      Ports		      [2, 1]
	      Position		      [890, 469, 905, 516]
	      ShowName		      off
	      Inputs		      "--"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "318:35"
	      Position		      [545, 285, 575, 315]
	      ShowName		      off
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch8"
	      SID		      "318:36"
	      Position		      [880, 115, 910, 145]
	      ShowName		      off
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Lookup2D
	      Name		      "motor/controller\ninput power\nmap (W)\nonly base torque"
	      SID		      "318:37"
	      Position		      [425, 225, 485, 265]
	      RowIndex		      "mc_map_spd*mc_spd_scale"
	      ColumnIndex	      "mc_map_trq*mc_trq_scale"
	      Table		      "mc_inpwr_map*mc_spd_scale*mc_trq_scale"
	    }
	    Block {
	      BlockType		      Lookup2D
	      Name		      "motor/controller\ninput power\nmap (W)\nwith REGEN"
	      SID		      "318:38"
	      Position		      [430, 365, 490, 405]
	      RowIndex		      "mc_map_spd*mc_spd_scale"
	      ColumnIndex	      "mc_map_trq*mc_trq_scale"
	      Table		      "mc_inpwr_map*mc_spd_scale*mc_trq_scale"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "prevent \ndivide by zero\nerror"
	      SID		      "318:39"
	      Ports		      [1, 1]
	      Position		      [135, 300, 165, 330]
	      InputPortMap	      "u0"
	      UpperLimit	      "max(fc_spd_scale*fc_map_spd)"
	      LowerLimit	      "vc_idle_spd"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "prevent \ndivide by zero\nerror2"
	      SID		      "318:40"
	      Ports		      [1, 1]
	      Position		      [250, 465, 280, 495]
	      InputPortMap	      "u0"
	      UpperLimit	      "max(fc_spd_scale*fc_map_spd)"
	      LowerLimit	      "vc_idle_spd"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "saturation"
	      SID		      "318:41"
	      Ports		      [1, 1]
	      Position		      [705, 280, 735, 310]
	      InputPortMap	      "u0"
	      UpperLimit	      "inf"
	      LowerLimit	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Motor torque"
	      SID		      "318:42"
	      Position		      [955, 123, 985, 137]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "alternator torque"
	      SID		      "318:43"
	      Position		      [955, 488, 985, 502]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator6"
	      SrcPort		      1
	      Points		      [40, 0]
	      DstBlock		      "Switch8"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator6"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "prevent \ndivide by zero\nerror2"
	      SrcPort		      1
	      Points		      [0, 0; 105, 0]
	      Branch {
		Points			[350, 0]
		DstBlock		"Product1"
		DstPort			2
	      }
	      Branch {
		Points			[0, -105]
		Branch {
		  Points		  [0, -140]
		  DstBlock		  "motor/controller\ninput power\nmap (W)\nonly base torque"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "motor/controller\ninput power\nmap (W)\nwith REGEN"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Sum5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "In2"
	      SrcPort		      1
	      DstBlock		      "prevent \ndivide by zero\nerror2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum2"
	      SrcPort		      1
	      Points		      [0, 0; 10, 0]
	      Branch {
		Points			[0, 130]
		DstBlock		"motor/controller\ninput power\nmap (W)\nwith REGEN"
		DstPort			2
	      }
	      Branch {
		Points			[0, -60; 440, 0]
		DstBlock		"Sum3"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "In1"
	      SrcPort		      1
	      Points		      [0, 0; 215, 0]
	      Branch {
		Points			[110, 0]
		DstBlock		"motor/controller\ninput power\nmap (W)\nonly base torque"
		DstPort			2
	      }
	      Branch {
		Points			[0, 50]
		DstBlock		"Sum2"
		DstPort			1
	      }
	      Branch {
		Points			[0, -110]
		Branch {
		  Points		  [0, -25; 380, 0]
		  Branch {
		    Points		    [0, 55]
		    DstBlock		    "Switch8"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Relational\nOperator6"
		    DstPort		    1
		  }
		}
		Branch {
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Sum5"
	      SrcPort		      1
	      DstBlock		      "saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "saturation"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "motor/controller\ninput power\nmap (W)\nwith REGEN"
	      SrcPort		      1
	      Points		      [100, 0]
	      DstBlock		      "Sum4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum4"
	      SrcPort		      1
	      DstBlock		      "Sum5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "prevent \ndivide by zero\nerror"
	      SrcPort		      1
	      Points		      [20, 0; 0, -25]
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <fc>\nEngine speed\nin rad/s"
	      SrcPort		      1
	      DstBlock		      "prevent \ndivide by zero\nerror"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch8"
	      SrcPort		      1
	      DstBlock		      "Motor torque"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      Points		      [0, 0; 70, 0]
	      Branch {
		DstBlock		"Sum2"
		DstPort			2
	      }
	      Branch {
		Points			[0, 230]
		DstBlock		"Sum7"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Sum7"
	      SrcPort		      1
	      DstBlock		      "alternator torque"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum3"
	      SrcPort		      1
	      Points		      [40, 0]
	      DstBlock		      "Switch8"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      Points		      [0, 0; 10, 0]
	      Branch {
		DstBlock		"Sum3"
		DstPort			2
	      }
	      Branch {
		Points			[0, 170]
		DstBlock		"Sum7"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [20, 0; 0, 200]
	      DstBlock		      "Switch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "motor/controller\ninput power\nmap (W)\nonly base torque"
	      SrcPort		      1
	      Points		      [15, 0; 0, 65]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-20, 0; 0, 35]
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Sum4"
	      DstPort		      1
	    }
	    Annotation {
	      SID		      "318:44"
	      Name		      "current speed (rad/s)"
	      Position		      [136, 472]
	    }
	    Annotation {
	      SID		      "318:45"
	      Name		      "Torque request"
	      Position		      [152, 180]
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Block NOTES"
	  SID			  "318:46"
	  Ports			  []
	  Position		  [1180, 335, 1236, 375]
	  BackgroundColor	  "green"
	  ShowName		  off
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  MaskDisplay		  "disp('Block\\nNOTES')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskPortRotate	  "default"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Block NOTES"
	    Location		    [630, 327, 1219, 570]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Annotation {
	      SID		      "318:47"
	      Name		      "HONDA INSIGHT TORQUE SPLIT CONTROL STRATEGY\n\nThe Honda Insight Control Startegy is modeled in th"
	      "is block. The Input is the Torque and speed\nrequired into the clutch. The electric motor torque contibution is"
	      " then calculated based on the \nfollowing parameters:\n1. Acceleration torque \n2. Deceleration torque\n3. 1st "
	      "gear selection\n4. Vehicle speed\netc...\n\nThe electric motor is also the alternator in the vehicle. Thus, it "
	      "produces the power required by the \naccessory loads. The remaining is then demanded from the IC Engine. The 2 "
	      "signals are then\nsent to the respective blocks in the INSIGHT Model."
	      Position		      [287, 128]
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Clutch Engaged ?"
	  SID			  "318:48"
	  Ports			  [2, 1]
	  Position		  [740, 106, 780, 139]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "Clutch Engaged ?"
	    Location		    [651, 588, 1230, 926]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "In1"
	      SID		      "318:49"
	      Position		      [90, 13, 120, 27]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "In2"
	      SID		      "318:50"
	      Position		      [90, 173, 120, 187]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "318:51"
	      Position		      [105, 90, 135, 120]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "318:52"
	      Position		      [110, 265, 140, 295]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "318:53"
	      Position		      [335, 250, 365, 280]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <gb>4"
	      SID		      "318:54"
	      Position		      [25, 214, 115, 236]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "engine_on"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From2"
	      SID		      "318:55"
	      Position		      [25, 50, 115, 80]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "clutch_state"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "318:56"
	      Ports		      [1, 1]
	      Position		      [240, 59, 270, 91]
	      Operator		      "NOT"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "318:57"
	      Ports		      [2, 1]
	      Position		      [180, 57, 210, 88]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      SID		      "318:58"
	      Ports		      [2, 1]
	      Position		      [180, 217, 210, 248]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch2"
	      SID		      "318:59"
	      Position		      [460, 60, 490, 90]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch3"
	      SID		      "318:60"
	      Position		      [400, 220, 430, 250]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Out1"
	      SID		      "318:61"
	      Position		      [515, 68, 545, 82]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From2"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [20, 0; 0, -25]
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Switch3"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch3"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Switch2"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "In2"
	      SrcPort		      1
	      Points		      [260, 0]
	      DstBlock		      "Switch3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <gb>4"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "In1"
	      SrcPort		      1
	      Points		      [320, 0]
	      DstBlock		      "Switch2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch2"
	      SrcPort		      1
	      DstBlock		      "Out1"
	      DstPort		      1
	    }
	    Annotation {
	      SID		      "318:62"
	      Name		      "clutch not \ndisengaged"
	      Position		      [314, 90]
	    }
	    Annotation {
	      SID		      "318:63"
	      Name		      "Any torque\n requested from\nElectric Motor\nonly when \nclutch engaged"
	      Position		      [397, 108]
	    }
	  }
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant7"
	  SID			  "318:64"
	  Position		  [1100, 175, 1120, 195]
	  BlockRotation		  270
	  Value			  "0"
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux"
	  SID			  "318:65"
	  Ports			  [1, 2]
	  Position		  [120, 162, 155, 198]
	  Outputs		  "2"
	}
	Block {
	  BlockType		  From
	  Name			  "From <vc>"
	  SID			  "318:66"
	  Position		  [1015, 165, 1085, 185]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "engine_on"
	}
	Block {
	  BlockType		  From
	  Name			  "From <vc>\nEngine Speed control"
	  SID			  "318:67"
	  Position		  [965, 250, 1060, 280]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "spd_command"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto"
	  SID			  "318:68"
	  Position		  [235, 350, 305, 380]
	  GotoTag		  "cs_trq_in_r"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Hard Acceleration"
	  SID			  "318:69"
	  Ports			  [2, 1]
	  Position		  [340, 66, 380, 99]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "Hard Acceleration"
	    Location		    [194, 170, 994, 643]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    212
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "93"
	    Block {
	      BlockType		      Inport
	      Name		      "In1"
	      SID		      "318:70"
	      Position		      [55, 313, 85, 327]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "In2"
	      SID		      "318:71"
	      Position		      [50, 473, 80, 487]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "318:72"
	      Position		      [175, 158, 200, 182]
	      Value		      "125"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "318:73"
	      Position		      [355, 96, 465, 124]
	      ShowName		      off
	      Value		      "6000*mc_trq_scale"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "318:74"
	      Position		      [370, 69, 540, 91]
	      ShowName		      off
	      Value		      "max(mc_max_trq)*mc_trq_scale"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "318:75"
	      Position		      [110, 325, 245, 345]
	      Value		      "cs_dl_assist_trq_threshold"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant7"
	      SID		      "318:76"
	      Position		      [230, 413, 255, 437]
	      Value		      ".3"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Define the Assist\nCharacteristics"
	      SID		      "318:77"
	      Position		      [335, 225, 395, 255]
	      Expr		      "cs_mc_assist_slope*(u-cs_dl_assist_trq_threshold)+ (cs_mc_assist_min_frac*max(mc_max_trq*mc_trq_sc"
	      "ale))"
	    }
	    Block {
	      BlockType		      Derivative
	      Name		      "Derivative"
	      SID		      "318:78"
	      Position		      [150, 385, 180, 415]
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      SID		      "318:79"
	      Position		      [35, 385, 125, 415]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "v_req_limited"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      SID		      "318:80"
	      Position		      [195, 114, 285, 136]
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "fc_spd_est"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "318:81"
	      Ports		      [2, 1]
	      Position		      [455, 321, 485, 354]
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      SID		      "318:82"
	      Ports		      [2, 1]
	      Position		      [575, 97, 605, 128]
	      ShowName		      off
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      SID		      "318:83"
	      Ports		      [2, 1]
	      Position		      [495, 101, 540, 134]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "318:84"
	      Ports		      [2, 1]
	      Position		      [230, 147, 260, 178]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator5"
	      SID		      "318:85"
	      Ports		      [2, 1]
	      Position		      [305, 312, 335, 343]
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator6"
	      SID		      "318:86"
	      Ports		      [2, 1]
	      Position		      [280, 392, 310, 423]
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturate motor torque\nat approx 32% max trq"
	      SID		      "318:87"
	      Ports		      [1, 1]
	      Position		      [455, 225, 485, 255]
	      InputPortMap	      "u0"
	      UpperLimit	      "max(mc_max_trq*mc_trq_scale)*cs_mc_assist_max_frac"
	      LowerLimit	      "min(mc_max_gen_trq*mc_trq_scale)"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch10"
	      SID		      "318:88"
	      Position		      [565, 325, 595, 355]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch2"
	      SID		      "318:89"
	      Position		      [635, 150, 665, 180]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "filter from\ndivide by zero \nor negative\n"
	      SID		      "318:90"
	      Ports		      [1, 1]
	      Position		      [310, 113, 340, 137]
	      SourceBlock	      "lib_etc/filter from\ndivide by zero \nor negative\n"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "off"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Out1"
	      SID		      "318:91"
	      Position		      [690, 158, 720, 172]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Constant7"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Relational\nOperator6"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Derivative"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator6"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch10"
	      SrcPort		      1
	      Points		      [10, 0; 0, -165]
	      DstBlock		      "Switch2"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "In2"
	      SrcPort		      1
	      Points		      [465, 0]
	      DstBlock		      "Switch10"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      DstBlock		      "Switch10"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator5"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator6"
	      SrcPort		      1
	      Points		      [125, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Define the Assist\nCharacteristics"
	      SrcPort		      1
	      DstBlock		      "Saturate motor torque\nat approx 32% max trq"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturate motor torque\nat approx 32% max trq"
	      SrcPort		      1
	      Points		      [40, 0; 0, 90]
	      DstBlock		      "Switch10"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "In1"
	      SrcPort		      1
	      Points		      [0, 0; 65, 0]
	      Branch {
		DstBlock		"Relational\nOperator5"
		DstPort			1
	      }
	      Branch {
		Points			[0, -80]
		Branch {
		  DstBlock		  "Define the Assist\nCharacteristics"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, -85]
		  DstBlock		  "Relational\nOperator2"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "Derivative"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch2"
	      SrcPort		      1
	      DstBlock		      "Out1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "filter from\ndivide by zero \nor negative\n"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "filter from\ndivide by zero \nor negative\n"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      Points		      [0, 40]
	      DstBlock		      "Switch2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [0, 25]
	      DstBlock		      "MinMax"
	      DstPort		      1
	    }
	    Annotation {
	      SID		      "318:92"
	      Name		      "Transient = 1"
	      Position		      [367, 400]
	    }
	    Annotation {
	      SID		      "318:93"
	      Name		      "moderate\naccn"
	      Position		      [379, 328]
	    }
	    Annotation {
	      SID		      "318:94"
	      Name		      "Insight max. effort Torque from motor\nwill be the minimum between\n{6000 W/shaft_speed} Nm AND\nt"
	      "he maximum output torque of motor (Nm)"
	      Position		      [662, 55]
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Hard Deceleration"
	  SID			  "318:95"
	  Ports			  [1, 1]
	  Position		  [225, 108, 265, 142]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "Hard Deceleration"
	    Location		    [86, 439, 782, 899]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "In1"
	      SID		      "318:96"
	      Position		      [15, 153, 45, 167]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "318:97"
	      Position		      [65, 166, 190, 184]
	      Value		      "cs_dl_regen_trq_threshold"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "318:98"
	      Position		      [80, 336, 205, 354]
	      Value		      "cs_dl_regen_trq_threshold"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "318:99"
	      Position		      [175, 270, 200, 290]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant7"
	      SID		      "318:100"
	      Position		      [365, 365, 390, 385]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Define regenerative \ncapabilities"
	      SID		      "318:101"
	      Position		      [210, 70, 270, 100]
	      Expr		      "(u-cs_dl_regen_trq_threshold)*cs_mc_regen_slope + (cs_mc_regen_min_frac*min(mc_max_gen_trq*mc_trq_"
	      "scale))"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "318:102"
	      Ports		      [2, 1]
	      Position		      [305, 281, 335, 319]
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      SID		      "318:103"
	      Ports		      [2, 1]
	      Position		      [215, 152, 245, 183]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator4"
	      SID		      "318:104"
	      Ports		      [2, 1]
	      Position		      [235, 242, 265, 273]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator5"
	      SID		      "318:105"
	      Ports		      [2, 1]
	      Position		      [235, 322, 265, 353]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturate motor torque\nat 100% max regen trq"
	      SID		      "318:106"
	      Ports		      [1, 1]
	      Position		      [360, 70, 390, 100]
	      InputPortMap	      "u0"
	      UpperLimit	      "max(mc_max_trq*mc_trq_scale)"
	      LowerLimit	      "min(mc_max_gen_trq*mc_trq_scale)*cs_mc_regen_max_frac"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch10"
	      SID		      "318:107"
	      Position		      [430, 285, 460, 315]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch9"
	      SID		      "318:108"
	      Position		      [495, 155, 525, 185]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Out1"
	      SID		      "318:109"
	      Position		      [565, 163, 595, 177]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Saturate motor torque\nat 100% max regen trq"
	      SrcPort		      1
	      Points		      [85, 0]
	      DstBlock		      "Switch9"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Define regenerative \ncapabilities"
	      SrcPort		      1
	      DstBlock		      "Saturate motor torque\nat 100% max regen trq"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "In1"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		Points			[35, 0]
		Branch {
		  Points		  [0, -75]
		  DstBlock		  "Define regenerative \ncapabilities"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "Relational\nOperator3"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[0, 70]
		Branch {
		  Points		  [0, 20]
		  Branch {
		    DstBlock		    "Relational\nOperator4"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 80]
		    DstBlock		    "Relational\nOperator5"
		    DstPort		    1
		  }
		}
		Branch {
		  Points		  [360, 0]
		  DstBlock		  "Switch10"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      DstBlock		      "Switch9"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Relational\nOperator4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator4"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator5"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch9"
	      SrcPort		      1
	      DstBlock		      "Out1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant7"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Switch10"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      DstBlock		      "Switch10"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch10"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Switch9"
	      DstPort		      3
	    }
	    Annotation {
	      SID		      "318:110"
	      Name		      "heavy decel"
	      Position		      [363, 163]
	    }
	    Annotation {
	      SID		      "318:111"
	      Name		      "light decel"
	      Position		      [371, 289]
	    }
	  }
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux"
	  SID			  "318:112"
	  Ports			  [2, 1]
	  Position		  [1210, 142, 1245, 178]
	  Inputs		  "2"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux1"
	  SID			  "318:113"
	  Ports			  [2, 1]
	  Position		  [1215, 237, 1250, 273]
	  Inputs		  "2"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "No EM activity\nat\nSlow Speed"
	  SID			  "318:114"
	  Ports			  [1, 1]
	  Position		  [525, 99, 565, 131]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "No EM activity\nat\nSlow Speed"
	    Location		    [-13, 274, 673, 640]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "In1"
	      SID		      "318:115"
	      Position		      [80, 298, 110, 312]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "318:116"
	      Position		      [225, 243, 250, 267]
	      Value		      "125"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant11"
	      SID		      "318:117"
	      Position		      [480, 136, 500, 154]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant9"
	      SID		      "318:118"
	      Position		      [130, 148, 265, 172]
	      Value		      "cs_decel_regen_threshold"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      SID		      "318:119"
	      Position		      [55, 95, 145, 125]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "v_req_limited"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      SID		      "318:120"
	      Position		      [65, 225, 155, 255]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "cs_trq_in_r"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "318:121"
	      Ports		      [2, 1]
	      Position		      [425, 167, 455, 198]
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "318:122"
	      Ports		      [2, 1]
	      Position		      [300, 232, 330, 263]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator7"
	      SID		      "318:123"
	      Ports		      [2, 1]
	      Position		      [310, 102, 340, 133]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch4"
	      SID		      "318:124"
	      Position		      [555, 170, 585, 200]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "m/s-->mph"
	      SID		      "318:125"
	      Position		      [180, 96, 230, 124]
	      Gain		      "1/0.447"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Out1"
	      SID		      "318:126"
	      Position		      [605, 178, 635, 192]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Constant9"
	      SrcPort		      1
	      Points		      [10, 0; 0, -35]
	      DstBlock		      "Relational\nOperator7"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "m/s-->mph"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "m/s-->mph"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator7"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "In1"
	      SrcPort		      1
	      Points		      [410, 0; 0, -110]
	      DstBlock		      "Switch4"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch4"
	      SrcPort		      1
	      DstBlock		      "Out1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant11"
	      SrcPort		      1
	      Points		      [20, 0; 0, 30]
	      DstBlock		      "Switch4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      DstBlock		      "Switch4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator7"
	      SrcPort		      1
	      Points		      [30, 0; 0, 55]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [35, 0; 0, -60]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Annotation {
	      SID		      "318:127"
	      Name		      "slow \nspeed"
	      Position		      [401, 135]
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "SoC Correction"
	  SID			  "318:128"
	  Ports			  [1, 1]
	  Position		  [845, 107, 885, 143]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "SoC Correction"
	    Location		    [505, 77, 1361, 862]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "In1"
	      SID		      "318:129"
	      Position		      [60, 68, 90, 82]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "16% of peak torque"
	      SID		      "318:130"
	      Ports		      [1, 1]
	      Position		      [390, 410, 420, 440]
	      InputPortMap	      "u0"
	      UpperLimit	      "0.16*15"
	      LowerLimit	      "min(mc_max_gen_trq*mc_trq_scale)"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "318:131"
	      Ports		      []
	      Position		      [740, 660, 796, 700]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[632, 325, 1221, 568]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "318:132"
		  Name			  "HONDA INSIGHT SoC Correction STRATEGY\n\nIn the HONDA Insight strategy, the electric motor assist is ind"
		  "ependent on the SoC of the battery pack\nexcept at low and high SoCs. (Based on test results).\n\nAt high SoCs, ab"
		  "ove 0.8, all regeneration (charging) is stopped. At low SoCs, below 0.35 (approx), \nthe assist capacity of the mo"
		  "tor is limited, and all assist is cut off below an SoC of 0.2.\n\n"
		  Position		  [287, 128]
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant10"
	      SID		      "318:133"
	      Position		      [285, 336, 320, 354]
	      Value		      "0.235"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "318:134"
	      Position		      [460, 156, 480, 174]
	      Value		      "0.8"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "318:135"
	      Position		      [210, 666, 230, 684]
	      Value		      "0.2"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant7"
	      SID		      "318:136"
	      Position		      [210, 477, 245, 493]
	      Value		      "0.235"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant8"
	      SID		      "318:137"
	      Position		      [215, 557, 240, 573]
	      Value		      "0.2"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant9"
	      SID		      "318:138"
	      Position		      [285, 271, 320, 289]
	      Value		      "0.355"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <gb>"
	      SID		      "318:139"
	      Position		      [45, 138, 115, 162]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "Limited assist"
	      SID		      "318:140"
	      Ports		      [2, 1]
	      Position		      [475, 227, 505, 258]
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Low SoC"
	      SID		      "318:141"
	      Ports		      [2, 1]
	      Position		      [465, 286, 495, 319]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Moderately\nlow SoC"
	      SID		      "318:142"
	      Ports		      [2, 1]
	      Position		      [390, 501, 420, 534]
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "No Assist"
	      SID		      "318:143"
	      Ports		      [1, 1]
	      Position		      [295, 605, 325, 635]
	      InputPortMap	      "u0"
	      UpperLimit	      "0"
	      LowerLimit	      "min(mc_max_gen_trq*mc_trq_scale)"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator6"
	      SID		      "318:144"
	      Ports		      [2, 1]
	      Position		      [295, 462, 325, 493]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator7"
	      SID		      "318:145"
	      Ports		      [2, 1]
	      Position		      [295, 542, 325, 573]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator8"
	      SID		      "318:146"
	      Ports		      [2, 1]
	      Position		      [390, 257, 420, 288]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator9"
	      SID		      "318:147"
	      Ports		      [2, 1]
	      Position		      [390, 322, 420, 353]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch4"
	      SID		      "318:148"
	      Position		      [655, 145, 685, 175]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch5"
	      SID		      "318:149"
	      Position		      [395, 655, 425, 685]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch6"
	      SID		      "318:150"
	      Position		      [485, 505, 515, 535]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch7"
	      SID		      "318:151"
	      Position		      [550, 290, 580, 320]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Torque limiter"
	      SID		      "318:152"
	      Position		      [270, 195, 330, 225]
	      Expr		      "u*6.88-1.4528"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Very high SoC"
	      SID		      "318:153"
	      Ports		      [2, 1]
	      Position		      [535, 142, 565, 173]
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Very low SoC"
	      SID		      "318:154"
	      Ports		      [2, 1]
	      Position		      [295, 652, 325, 683]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "estimated\npeak torque"
	      SID		      "318:155"
	      Position		      [365, 195, 395, 225]
	      Gain		      "15"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "no regen\nonly assist"
	      SID		      "318:156"
	      Ports		      [1, 1]
	      Position		      [535, 60, 565, 90]
	      InputPortMap	      "u0"
	      UpperLimit	      "max(mc_max_trq*mc_trq_scale)"
	      LowerLimit	      "0"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "saturation"
	      SID		      "318:157"
	      Ports		      [1, 1]
	      Position		      [600, 290, 630, 320]
	      InputPortMap	      "u0"
	      UpperLimit	      "max(mc_max_trq*mc_trq_scale)"
	      LowerLimit	      "min(mc_max_gen_trq*mc_trq_scale)"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Out1"
	      SID		      "318:158"
	      Position		      [730, 153, 760, 167]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "In1"
	      SrcPort		      1
	      Points		      [160, 0]
	      Branch {
		Points			[0, 175]
		Branch {
		  Points		  [0, 175]
		  Branch {
		    Points		    [0, 195]
		    Branch {
		    Points		    [0, 100; 125, 0]
		    DstBlock		    "Switch5"
		    DstPort		    3
		    }
		    Branch {
		    DstBlock		    "No Assist"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "16% of peak torque"
		    DstPort		    1
		  }
		}
		Branch {
		  DstBlock		  "Limited assist"
		  DstPort		  2
		}
	      }
	      Branch {
		DstBlock		"no regen\nonly assist"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "16% of peak torque"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "Switch6"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Torque limiter"
	      SrcPort		      1
	      DstBlock		      "estimated\npeak torque"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <gb>"
	      SrcPort		      1
	      Points		      [70, 0]
	      Branch {
		Points			[0, 60]
		Branch {
		  DstBlock		  "Torque limiter"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 55]
		  Branch {
		    Points		    [0, 65]
		    Branch {
		    Points		    [0, 140]
		    Branch {
		    Points		    [0, 80]
		    Branch {
		    Points		    [0, 110]
		    DstBlock		    "Very low SoC"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Relational\nOperator7"
		    DstPort		    1
		    }
		    }
		    Branch {
		    DstBlock		    "Relational\nOperator6"
		    DstPort		    1
		    }
		    }
		    Branch {
		    DstBlock		    "Relational\nOperator9"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "Relational\nOperator8"
		    DstPort		    1
		  }
		}
	      }
	      Branch {
		DstBlock		"Very high SoC"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "No Assist"
	      SrcPort		      1
	      Points		      [50, 0]
	      DstBlock		      "Switch5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Very low SoC"
	      SrcPort		      1
	      DstBlock		      "Switch5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      DstBlock		      "Very low SoC"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant8"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator7"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant7"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator6"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator7"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "Moderately\nlow SoC"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator6"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "Moderately\nlow SoC"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch5"
	      SrcPort		      1
	      Points		      [40, 0]
	      DstBlock		      "Switch6"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Moderately\nlow SoC"
	      SrcPort		      1
	      DstBlock		      "Switch6"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch6"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Switch7"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Low SoC"
	      SrcPort		      1
	      DstBlock		      "Switch7"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant10"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator9"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant9"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator8"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "no regen\nonly assist"
	      SrcPort		      1
	      Points		      [70, 0]
	      DstBlock		      "Switch4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Very high SoC"
	      SrcPort		      1
	      DstBlock		      "Switch4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      DstBlock		      "Very high SoC"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "estimated\npeak torque"
	      SrcPort		      1
	      Points		      [60, 0]
	      DstBlock		      "Limited assist"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator9"
	      SrcPort		      1
	      Points		      [25, 0]
	      DstBlock		      "Low SoC"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator8"
	      SrcPort		      1
	      Points		      [25, 0]
	      DstBlock		      "Low SoC"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch4"
	      SrcPort		      1
	      DstBlock		      "Out1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Limited assist"
	      SrcPort		      1
	      Points		      [25, 0]
	      DstBlock		      "Switch7"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch7"
	      SrcPort		      1
	      DstBlock		      "saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "saturation"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Switch4"
	      DstPort		      3
	    }
	    Annotation {
	      SID		      "318:159"
	      Name		      "ORIGINAL TORQUE SIGNAL"
	      Position		      [319, 727]
	    }
	  }
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  SID			  "318:160"
	  Ports			  [2, 1]
	  Position		  [1015, 114, 1030, 161]
	  ShowName		  off
	  Inputs		  "-+"
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch7"
	  SID			  "318:161"
	  Position		  [1145, 135, 1175, 165]
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace2"
	  SID			  "318:162"
	  Ports			  [1]
	  Position		  [225, 247, 295, 273]
	  VariableName		  "cs_trq_in_r"
	  MaxDataPoints		  "inf"
	  SampleTime		  "-1"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace3"
	  SID			  "318:163"
	  Ports			  [1]
	  Position		  [225, 292, 295, 318]
	  VariableName		  "cs_spd_in_r"
	  MaxDataPoints		  "inf"
	  SampleTime		  "-1"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "help"
	  SID			  "318:164"
	  Ports			  []
	  Position		  [1266, 339, 1297, 382]
	  BackgroundColor	  "yellow"
	  DropShadow		  on
	  ShowName		  off
	  OpenFcn		  "web(['file:\\\\\\' which('honda_insight.htm')]);"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskPortRotate	  "default"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "help"
	    Location		    [203, 331, 569, 538]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "trq and spd\nreq'd from\nengine\n(N*m, rad/s)"
	  SID			  "318:165"
	  Position		  [1275, 153, 1305, 167]
	  IconDisplay		  "Port number"
	}
	Block {
	  BlockType		  Outport
	  Name			  "trq and spd\nreq'd from\nMOTOR\n(N*m, rad/s)"
	  SID			  "318:166"
	  Position		  [1275, 248, 1305, 262]
	  Port			  "2"
	  IconDisplay		  "Port number"
	}
	Line {
	  SrcBlock		  "Hard Deceleration"
	  SrcPort		  1
	  Points		  [10, 0]
	  Branch {
	    DstBlock		    "1st gear ?"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [0, -35]
	    DstBlock		    "Hard Acceleration"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "trq and spd req'd\ninto clutch\n(N*m, rad/s)"
	  SrcPort		  1
	  DstBlock		  "Demux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  2
	  Points		  [0, 20; 45, 0]
	  Branch {
	    Points		    [0, 95]
	    DstBlock		    "To Workspace3"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [395, 0]
	    Branch {
	      Points		      [0, -80]
	      DstBlock		      "Alternator\nFunction"
	      DstPort		      2
	    }
	    Branch {
	      Points		      [595, 0]
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	  }
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    Points		    [15, 0]
	    Branch {
	      Points		      [0, 90]
	      DstBlock		      "To Workspace2"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [810, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Branch {
	      Points		      [0, -45]
	      Branch {
		DstBlock		"Hard Deceleration"
		DstPort			1
	      }
	      Branch {
		Points			[0, -50]
		DstBlock		"Hard Acceleration"
		DstPort			1
	      }
	    }
	  }
	  Branch {
	    Points		    [0, 195]
	    DstBlock		    "Goto"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Hard Acceleration"
	  SrcPort		  1
	  Points		  [25, 0; 0, 20]
	  DstBlock		  "1st gear ?"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "Switch7"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant7"
	  SrcPort		  1
	  Points		  [0, -10]
	  DstBlock		  "Switch7"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <vc>"
	  SrcPort		  1
	  Points		  [0, -25]
	  DstBlock		  "Switch7"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Mux"
	  SrcPort		  1
	  DstBlock		  "trq and spd\nreq'd from\nengine\n(N*m, rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Switch7"
	  SrcPort		  1
	  DstBlock		  "Mux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux1"
	  SrcPort		  1
	  DstBlock		  "trq and spd\nreq'd from\nMOTOR\n(N*m, rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Alternator\nFunction"
	  SrcPort		  1
	  DstBlock		  "Clutch Engaged ?"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "1st gear ?"
	  SrcPort		  1
	  DstBlock		  "No EM activity\nat\nSlow Speed"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "No EM activity\nat\nSlow Speed"
	  SrcPort		  1
	  DstBlock		  "Alternator\nFunction"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Alternator\nFunction"
	  SrcPort		  2
	  DstBlock		  "Clutch Engaged ?"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <vc>\nEngine Speed control"
	  SrcPort		  1
	  DstBlock		  "Mux1"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Clutch Engaged ?"
	  SrcPort		  1
	  DstBlock		  "SoC Correction"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "SoC Correction"
	  SrcPort		  1
	  Points		  [100, 0]
	  Branch {
	    DstBlock		    "Sum"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 120]
	    DstBlock		    "Mux1"
	    DstPort		    1
	  }
	}
	Annotation {
	  SID			  "318:167"
	  Name			  "ICE Torque"
	  Position		  [1068, 129]
	}
	Annotation {
	  SID			  "318:168"
	  Name			  "Total Torque"
	  Position		  [957, 179]
	}
	Annotation {
	  SID			  "318:169"
	  Name			  "EM Torque"
	  Position		  [958, 135]
	}
	Annotation {
	  SID			  "318:170"
	  Name			  "Speed is directly fed through"
	  Position		  [368, 202]
	}
	Annotation {
	  SID			  "318:171"
	  Name			  "Motor Spins at ICE speed"
	  Position		  [1128, 258]
	}
	Annotation {
	  SID			  "318:172"
	  Name			  "HONDA INSIGHT CONTROL STRATEGY"
	  Position		  [594, 15]
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "SubSystem"
      SID		      "319"
      Ports		      []
      Position		      [555, 449, 610, 498]
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      System {
	Name			"SubSystem"
	Location		[190, 107, 1002, 777]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"96"
	Block {
	  BlockType		  From
	  Name			  "From <logic>2"
	  SID			  "715"
	  Position		  [50, 394, 155, 426]
	  ForegroundColor	  "red"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_req_limited"
	}
	Block {
	  BlockType		  From
	  Name			  "From <veh>"
	  SID			  "716"
	  Position		  [25, 77, 100, 93]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_prev"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>"
	  SID			  "717"
	  Position		  [25, 110, 85, 130]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>1"
	  SID			  "718"
	  Position		  [25, 41, 110, 59]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>2"
	  SID			  "719"
	  Position		  [420, 312, 530, 328]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_drivetrain_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>3"
	  SID			  "720"
	  Position		  [420, 346, 520, 364]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_wheel_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>4"
	  SID			  "721"
	  Position		  [415, 450, 540, 470]
	  ForegroundColor	  "lightBlue"
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_rear_drivetrain_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>5"
	  SID			  "722"
	  Position		  [415, 401, 535, 419]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_rear_brake"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>6"
	  SID			  "723"
	  Position		  [435, 270, 495, 290]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>8"
	  SID			  "724"
	  Position		  [30, 266, 115, 284]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From<wh>4"
	  SID			  "725"
	  Position		  [415, 371, 530, 389]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_front_brake"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto"
	  SID			  "726"
	  Position		  [275, 385, 395, 405]
	  NamePlacement		  "alternate"
	  GotoTag		  "spd_dep_muxed"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>1"
	  SID			  "727"
	  Position		  [230, 74, 320, 96]
	  GotoTag		  "v_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>2"
	  SID			  "728"
	  Position		  [230, 111, 320, 129]
	  GotoTag		  "wt_front_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>3"
	  SID			  "729"
	  Position		  [650, 316, 735, 334]
	  GotoTag		  "F_front_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>4"
	  SID			  "730"
	  Position		  [650, 379, 735, 401]
	  GotoTag		  "F_rear_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>5"
	  SID			  "731"
	  Position		  [225, 265, 335, 285]
	  GotoTag		  "F_front_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto1"
	  SID			  "732"
	  Position		  [275, 409, 395, 431]
	  GotoTag		  "spd_dep_gear_num"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Speed Dependent Shifting"
	  SID			  "330"
	  Ports			  [1, 2]
	  Position		  [200, 382, 230, 433]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "Speed Dependent Shifting"
	    Location		    [-16, 76, 971, 726]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "velocity\nrequired\n(limited)\n"
	      SID		      "331"
	      Position		      [25, 58, 55, 72]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "Look-Up\nTable\n(gear for downshift)"
	      SID		      "332"
	      Position		      [110, 375, 140, 405]
	      InputValues	      "tx_spd_dep_dnshift(:,1)   % vector of speeds m/s"
	      Table		      "tx_spd_dep_dnshift(:,2)  % gear number--must be step function"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "Look-Up\nTable\n(gear for upshift)"
	      SID		      "333"
	      Position		      [105, 50, 135, 80]
	      InputValues	      "tx_spd_dep_upshift(:,1)   % vector of speeds in m/s"
	      Table		      "tx_spd_dep_upshift(:,2)  % gear number--must be step function"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "334"
	      Ports		      [2, 1]
	      Position		      [405, 102, 440, 138]
	      ForegroundColor	      "red"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux2"
	      SID		      "335"
	      Ports		      [2, 1]
	      Position		      [450, 382, 485, 418]
	      ForegroundColor	      "red"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "New gear ratio"
	      SID		      "336"
	      Ports		      [1]
	      Position		      [725, 259, 810, 281]
	      ForegroundColor	      "red"
	      FontName		      "Arial"
	      VariableName	      "new_gear_ratio"
	      MaxDataPoints	      "50000"
	    }
	    Block {
	      BlockType		      Rounding
	      Name		      "Rounding\nFunction"
	      SID		      "337"
	      Position		      [190, 50, 220, 80]
	      Operator		      "round"
	    }
	    Block {
	      BlockType		      Rounding
	      Name		      "Rounding\nFunction1"
	      SID		      "338"
	      Position		      [195, 375, 225, 405]
	      Operator		      "round"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation4"
	      SID		      "339"
	      Ports		      [1, 1]
	      Position		      [280, 56, 300, 74]
	      ForegroundColor	      "red"
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "gb_gears_num"
	      LowerLimit	      "1"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation5"
	      SID		      "340"
	      Ports		      [1, 1]
	      Position		      [285, 381, 305, 399]
	      ForegroundColor	      "red"
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "gb_gears_num"
	      LowerLimit	      "1"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "delta\nspeed\n(\"+\" is acceleration)"
	      SID		      "341"
	      Ports		      [2, 1]
	      Position		      [215, 240, 240, 300]
	      ForegroundColor	      "red"
	      FontName		      "Arial"
	      Inputs		      "-+"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio6"
	      SID		      "342"
	      Position		      [345, 53, 375, 77]
	      ForegroundColor	      "red"
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      Table		      "gb_ratio"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio8"
	      SID		      "343"
	      Position		      [380, 378, 410, 402]
	      ForegroundColor	      "red"
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      Table		      "gb_ratio"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev veh\nspeed"
	      SID		      "344"
	      Position		      [130, 245, 170, 265]
	      ForegroundColor	      "red"
	      NamePlacement	      "alternate"
	      FontName		      "Arial"
	      X0		      "1"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "shifting"
	      SID		      "345"
	      Ports		      [1, 1]
	      Position		      [380, 444, 410, 476]
	      SourceBlock	      "lib_controls/SubSystem/shifting"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "off"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "shifting1"
	      SID		      "346"
	      Ports		      [1, 1]
	      Position		      [350, 114, 380, 146]
	      SourceBlock	      "lib_controls/SubSystem/shifting"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "off"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "switch for gear\nnumber"
	      SID		      "347"
	      Position		      [580, 160, 610, 190]
	      ForegroundColor	      "red"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "switch for gear ratio\nand shifting (muxed)"
	      SID		      "348"
	      Position		      [580, 255, 610, 285]
	      ForegroundColor	      "red"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "total fuel used (gal)"
	      SID		      "349"
	      Ports		      [1]
	      Position		      [370, 339, 450, 361]
	      ForegroundColor	      "red"
	      NamePlacement	      "alternate"
	      FontName		      "Arial"
	      VariableName	      "neg_gear_num"
	      MaxDataPoints	      "50000"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear ratio and shifting"
	      SID		      "350"
	      Position		      [650, 235, 680, 250]
	      BlockRotation	      270
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear number"
	      SID		      "351"
	      Position		      [665, 168, 695, 182]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      Labels		      [0, 0]
	      SrcBlock		      "velocity\nrequired\n(limited)\n"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, 190]
		Branch {
		  DstBlock		  "prev veh\nspeed"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 30]
		  Branch {
		    DstBlock		    "delta\nspeed\n(\"+\" is acceleration)"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 105]
		    DstBlock		    "Look-Up\nTable\n(gear for downshift)"
		    DstPort		    1
		  }
		}
	      }
	      Branch {
		DstBlock		"Look-Up\nTable\n(gear for upshift)"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "prev veh\nspeed"
	      SrcPort		      1
	      DstBlock		      "delta\nspeed\n(\"+\" is acceleration)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mux2"
	      SrcPort		      1
	      Points		      [0, -120]
	      DstBlock		      "switch for gear ratio\nand shifting (muxed)"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      Points		      [0, 140]
	      DstBlock		      "switch for gear ratio\nand shifting (muxed)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Mux2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gear ratio8"
	      SrcPort		      1
	      DstBlock		      "Mux2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation5"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		Points			[0, 0]
		Branch {
		  Points		  [0, -40]
		  Branch {
		    Points		    [0, -165]
		    DstBlock		    "switch for gear\nnumber"
		    DstPort		    3
		  }
		  Branch {
		    DstBlock		    "total fuel used (gal)"
		    DstPort		    1
		  }
		}
		Branch {
		  DstBlock		  "gear ratio8"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[0, 70]
		DstBlock		"shifting"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "gear ratio6"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "shifting1"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Saturation4"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		Points			[0, 65]
		Branch {
		  Points		  [0, 35]
		  DstBlock		  "switch for gear\nnumber"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "shifting1"
		  DstPort		  1
		}
	      }
	      Branch {
		DstBlock		"gear ratio6"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "switch for gear ratio\nand shifting (muxed)"
	      SrcPort		      1
	      Points		      [50, 0]
	      Branch {
		DstBlock		"New gear ratio"
		DstPort			1
	      }
	      Branch {
		DstBlock		"gear ratio and shifting"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "switch for gear\nnumber"
	      SrcPort		      1
	      DstBlock		      "gear number"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "delta\nspeed\n(\"+\" is acceleration)"
	      SrcPort		      1
	      Points		      [245, 0]
	      Branch {
		Points			[0, -95]
		DstBlock		"switch for gear\nnumber"
		DstPort			2
	      }
	      Branch {
		DstBlock		"switch for gear ratio\nand shifting (muxed)"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Look-Up\nTable\n(gear for upshift)"
	      SrcPort		      1
	      DstBlock		      "Rounding\nFunction"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Rounding\nFunction"
	      SrcPort		      1
	      DstBlock		      "Saturation4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Look-Up\nTable\n(gear for downshift)"
	      SrcPort		      1
	      DstBlock		      "Rounding\nFunction1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Rounding\nFunction1"
	      SrcPort		      1
	      DstBlock		      "Saturation5"
	      DstPort		      1
	    }
	    Annotation {
	      SID		      "358"
	      Name		      "SPEED \nDEPENDENT \nSHIFT\nSIGNAL"
	      Position		      [709, 85]
	    }
	    Annotation {
	      SID		      "357"
	      Name		      "delta speed"
	      Position		      [285, 260]
	    }
	    Annotation {
	      SID		      "356"
	      Name		      "decel\ncase"
	      Position		      [510, 383]
	    }
	    Annotation {
	      SID		      "355"
	      Name		      "accel\ncase"
	      Position		      [468, 222]
	    }
	    Annotation {
	      SID		      "354"
	      Name		      "accel case"
	      Position		      [525, 155]
	    }
	    Annotation {
	      SID		      "353"
	      Name		      "decel case"
	      Position		      [361, 193]
	    }
	    Annotation {
	      SID		      "352"
	      Name		      "storing shifting and gear ratio\ninformation to workspace"
	      Position		      [740, 326]
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "braking strategy"
	  SID			  "359"
	  Ports			  [2, 2]
	  Position		  [150, 262, 180, 313]
	  NamePlacement		  "alternate"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "braking strategy"
	    Location		    [27, 441, 629, 769]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "req'd speed\n(m/s)"
	      SID		      "360"
	      Position		      [25, 130, 45, 150]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "slip-limited\nforce req'd\n(N)"
	      SID		      "361"
	      Position		      [25, 55, 45, 75]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "362"
	      Ports		      []
	      Position		      [530, 275, 586, 315]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[229, 259, 496, 325]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "363"
		  Name			  "This controller determines how much braking\nforce the front and rear  friction brakes will supply."
		  Position		  [132, 17]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "364"
	      Position		      [420, 25, 440, 45]
	      BlockMirror	      on
	      NamePlacement	      "alternate"
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "365"
	      Position		      [240, 250, 260, 270]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "366"
	      Position		      [425, 150, 445, 170]
	      BlockMirror	      on
	      NamePlacement	      "alternate"
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Keep\nfrac>0"
	      SID		      "367"
	      Ports		      [1, 1]
	      Position		      [290, 190, 320, 220]
	      ForegroundColor	      "magenta"
	      InputPortMap	      "u0"
	      UpperLimit	      "1"
	      LowerLimit	      "0"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      SID		      "368"
	      Ports		      [2, 1]
	      Position		      [365, 126, 385, 144]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      SID		      "369"
	      Ports		      [2, 1]
	      Position		      [365, 191, 385, 209]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      SID		      "370"
	      Ports		      [3, 1]
	      Position		      [235, 177, 265, 233]
	      Inputs		      "--+"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "371"
	      Position		      [415, 49, 445, 81]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "372"
	      Position		      [420, 174, 450, 206]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "convert\n(mph)"
	      SID		      "373"
	      Position		      [75, 121, 125, 159]
	      FontName		      "Arial"
	      Gain		      "2.2371"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "front driveline\nbraking fraction"
	      SID		      "374"
	      Position		      [165, 193, 195, 217]
	      InputValues	      "wh_fa_dl_brake_mph"
	      Table		      "wh_fa_dl_brake_frac"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "front friction\nbraking fraction"
	      SID		      "375"
	      Position		      [165, 128, 195, 152]
	      InputValues	      "wh_fa_fric_brake_mph"
	      Table		      "wh_fa_fric_brake_frac"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd front brake\nforce (N)"
	      SID		      "376"
	      Position		      [535, 55, 555, 75]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd rear brake\nforce (N)"
	      SID		      "377"
	      Position		      [530, 180, 550, 200]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Keep\nfrac>0"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "Keep\nfrac>0"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [-20, 0; 0, 20]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      Points		      [0, -60]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "slip-limited\nforce req'd\n(N)"
	      SrcPort		      1
	      Points		      [295, 0]
	      Branch {
		DstBlock		"Switch"
		DstPort			2
	      }
	      Branch {
		Points			[0, 65]
		Branch {
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 30]
		  Branch {
		    Points		    [0, 35]
		    DstBlock		    "Product1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [55, 0; 0, 30]
		    DstBlock		    "Switch1"
		    DstPort		    2
		  }
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "req'd front brake\nforce (N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "req'd rear brake\nforce (N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "req'd speed\n(m/s)"
	      SrcPort		      1
	      DstBlock		      "convert\n(mph)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "convert\n(mph)"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"front friction\nbraking fraction"
		DstPort			1
	      }
	      Branch {
		Points			[0, 65]
		DstBlock		"front driveline\nbraking fraction"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "front driveline\nbraking fraction"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "front friction\nbraking fraction"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"Product"
		DstPort			2
	      }
	      Branch {
		Points			[0, 45]
		DstBlock		"Sum"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Sum"
	      DstPort		      3
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "config traction control"
	  SID			  "378"
	  Ports			  [3, 5]
	  Position		  [550, 39, 585, 141]
	  BackgroundColor	  "darkGreen"
	  ShowPortLabels	  "none"
	  BlockChoice		  "traction control 2 axle"
	  TemplateBlock		  "self"
	  MemberBlocks		  "traction control 2 axle,traction control J2452 2 axle"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "config traction control"
	    Location		    [148, 182, 646, 482]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "time-average\nvehicle speed\n req'd (m/s)"
	      SID		      "706"
	      Position		      [20, 40, 40, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SID		      "707"
	      Position		      [20, 80, 40, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "total tractive\nforce req'd\n(N)"
	      SID		      "708"
	      Position		      [20, 120, 40, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "traction control\n2 axle"
	      SID		      "709"
	      Ports		      [3, 5]
	      Position		      [100, 40, 140, 80]
	      BackgroundColor	      "darkGreen"
	      SourceBlock	      "lib_controls/SubSystem/traction control\n2 axle"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "off"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd force\n(N)"
	      SID		      "710"
	      Position		      [200, 40, 220, 60]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd speed\n(m/s)"
	      SID		      "711"
	      Position		      [200, 80, 220, 100]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nfront axle\n(N)"
	      SID		      "712"
	      Position		      [200, 120, 220, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nrear axle\n(N)"
	      SID		      "713"
	      Position		      [200, 160, 220, 180]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "front/total \ntraction ratio"
	      SID		      "714"
	      Position		      [200, 200, 220, 220]
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "time-average\nvehicle speed\n req'd (m/s)"
	      SrcPort		      1
	      Points		      [20, 0; 0, -5]
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SrcPort		      1
	      Points		      [20, 0; 0, -30]
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "total tractive\nforce req'd\n(N)"
	      SrcPort		      1
	      Points		      [40, 0]
	      DstBlock		      "traction control\n2 axle"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      1
	      Points		      [20, 0; 0, 10]
	      DstBlock		      "req'd force\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      2
	      Points		      [10, 0; 0, 40]
	      DstBlock		      "req'd speed\n(m/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      3
	      Points		      [35, 0; 0, 70]
	      DstBlock		      "weight on\nfront axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      4
	      Points		      [35, 0; 0, 100]
	      DstBlock		      "weight on\nrear axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control\n2 axle"
	      SrcPort		      5
	      Points		      [0, 130]
	      DstBlock		      "front/total \ntraction ratio"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "current veh mass (kg)"
	  SID			  "379"
	  Ports			  [0, 1]
	  Position		  [135, 192, 195, 208]
	  BackgroundColor	  "darkGreen"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "current veh mass (kg)"
	    Location		    [26, 425, 296, 547]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Constant
	      Name		      "Constant12"
	      SID		      "667"
	      Position		      [25, 74, 80, 96]
	      BackgroundColor	      "darkGreen"
	      FontName		      "Arial"
	      Value		      "veh_mass"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      SID		      "668"
	      Position		      [25, 26, 155, 54]
	      BackgroundColor	      "darkGreen"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "veh_cargo_mass"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum8"
	      SID		      "669"
	      Ports		      [2, 1]
	      Position		      [170, 30, 190, 50]
	      ShowName		      off
	      IconShape		      "round"
	      Inputs		      "|++"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Out1"
	      SID		      "670"
	      Position		      [215, 33, 245, 47]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Sum8"
	      SrcPort		      1
	      DstBlock		      "Out1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "Sum8"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant12"
	      SrcPort		      1
	      Points		      [95, 0]
	      DstBlock		      "Sum8"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "front and rear\nbrake controller\n(achievable)"
	  SID			  "380"
	  Ports			  [6, 2]
	  Position		  [580, 291, 615, 419]
	  ForegroundColor	  "lightBlue"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "front and rear\nbrake controller\n(achievable)"
	    Location		    [255, 126, 863, 699]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "total tractive\nforce req'd\n(N)"
	      SID		      "381"
	      Position		      [95, 165, 115, 185]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "tractive force\navailable from \nfront drivetrain\n(N)"
	      SID		      "382"
	      Position		      [35, 225, 55, 245]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "axle speed\npossible\n(rad/s)"
	      SID		      "383"
	      Position		      [100, 35, 120, 55]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "max front\nbrake force\n(N)"
	      SID		      "384"
	      Position		      [65, 320, 85, 340]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "max rear\nbrake force\n(N)"
	      SID		      "385"
	      Position		      [65, 480, 85, 500]
	      Port		      "5"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "tractive force\navailable from \nrear drivetrain\n(N)"
	      SID		      "386"
	      Position		      [110, 245, 130, 265]
	      ForegroundColor	      "lightBlue"
	      Port		      "6"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "387"
	      Ports		      []
	      Position		      [465, 500, 521, 540]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[229, 259, 596, 338]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "388"
		  Name			  "This block apportions required friction braking force between the \nfront (drive) and rear brakes.  Vehi"
		  "cle speed for brake strategy is\ncomputed assuming zero slip."
		  Position		  [182, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "389"
	      Position		      [160, 125, 180, 145]
	      BlockRotation	      270
	      BlockMirror	      on
	      FontName		      "Arial"
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "390"
	      Position		      [155, 360, 175, 380]
	      BlockRotation	      270
	      BlockMirror	      on
	      FontName		      "Arial"
	      Value		      "0"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      SID		      "391"
	      Ports		      [2, 1]
	      Position		      [205, 432, 235, 463]
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax1"
	      SID		      "392"
	      Ports		      [2, 1]
	      Position		      [205, 202, 235, 233]
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax2"
	      SID		      "393"
	      Ports		      [2, 1]
	      Position		      [415, 392, 445, 423]
	      Function		      "max"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum1"
	      SID		      "394"
	      Ports		      [3, 1]
	      Position		      [155, 218, 175, 262]
	      ForegroundColor	      "lightBlue"
	      FontName		      "Arial"
	      Inputs		      "+--"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum2"
	      SID		      "395"
	      Ports		      [2, 1]
	      Position		      [150, 445, 170, 465]
	      FontName		      "Arial"
	      Inputs		      "+-"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch:\nbraking force\nto be split between\nfriction brakes\n(N)"
	      SID		      "396"
	      Position		      [290, 159, 320, 191]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "braking force\nsupplied by\nfront friction brakes\n(N)"
	      SID		      "397"
	      Ports		      [3, 1]
	      Position		      [415, 164, 445, 216]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"braking force\nsupplied by\nfront friction brakes\n(N)"
		Location		[148, 298, 890, 621]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "add'l braking\nforce req'd\n(N)"
		  SID			  "398"
		  Position		  [35, 15, 55, 35]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "possible speed\n(mph)"
		  SID			  "399"
		  Position		  [35, 115, 55, 135]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "max front\nbrake force\n(N)"
		  SID			  "400"
		  Position		  [35, 235, 55, 255]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "401"
		  Ports			  []
		  Position		  [605, 245, 661, 285]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [229, 259, 832, 482]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "406"
		    Name		    "The variable \"wh_max_front_fric_brake_force_N\" must be assigned a positive value."
		    Position		    [312, 167]
		    VerticalAlignment	    "top"
		    }
		    Annotation {
		    SID			    "405"
		    Name		    "If all braking was intended to be done by the drivetrain, the front friction brakes will do 60% of th"
		    "e braking."
		    Position		    [292, 142]
		    VerticalAlignment	    "top"
		    }
		    Annotation {
		    SID			    "404"
		    Name		    "where the denominator can also be expressed as [1 - front_axle_drivetrain_brake_fraction(vehicle spee"
		    "d)]."
		    Position		    [292, 117]
		    VerticalAlignment	    "top"
		    }
		    Annotation {
		    SID			    "403"
		    Name		    "[front_axle_friction_brake_fraction(vehicle speed)]\n------------------------------------------------"
		    "------------------------------\n[front_axle_friction_brake_fraction(vehicle speed) + rear_axle_friction_brake_fr"
		    "action(vehicle speed)]"
		    Position		    [292, 62]
		    VerticalAlignment	    "top"
		    }
		    Annotation {
		    SID			    "402"
		    Name		    "If additional braking force is required to meet the specified deceleration, input #1 will be negative"
		    ".\nThe fraction of the additional req'd braking force made up by the front-axle friction brakes is given by:"
		    Position		    [292, 22]
		    VerticalAlignment	    "top"
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "407"
		  Position		  [165, 210, 215, 230]
		  BlockRotation		  270
		  FontName		  "Arial"
		  Value			  "1+eps"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "408"
		  Position		  [345, 195, 365, 215]
		  FontName		  "Arial"
		  Value			  "0.6"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Keep\n0<frac<1"
		  SID			  "409"
		  Ports			  [1, 1]
		  Position		  [455, 140, 485, 170]
		  ForegroundColor	  "magenta"
		  InputPortMap		  "u0"
		  UpperLimit		  "1"
		  LowerLimit		  "0"
		}
		Block {
		  BlockType		  MinMax
		  Name			  "MinMax"
		  SID			  "410"
		  Ports			  [2, 1]
		  Position		  [590, 142, 620, 173]
		  Function		  "max"
		  Inputs		  "2"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "411"
		  Ports			  [2, 1]
		  Position		  [530, 141, 550, 159]
		  FontName		  "Arial"
		  Inputs		  "**"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  SID			  "412"
		  Ports			  [2, 1]
		  Position		  [320, 136, 340, 154]
		  FontName		  "Arial"
		  Inputs		  "*/"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation"
		  SID			  "413"
		  Ports			  [1, 1]
		  Position		  [110, 40, 140, 70]
		  InputPortMap		  "u0"
		  UpperLimit		  "max(wh_fa_fric_brake_mph)"
		  LowerLimit		  "min(wh_fa_fric_brake_mph)"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation1"
		  SID			  "414"
		  Ports			  [1, 1]
		  Position		  [110, 110, 140, 140]
		  InputPortMap		  "u0"
		  UpperLimit		  "max(wh_fa_dl_brake_mph)"
		  LowerLimit		  "min(wh_fa_dl_brake_mph)"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "415"
		  Ports			  [2, 1]
		  Position		  [250, 102, 270, 193]
		  FontName		  "Arial"
		  Inputs		  "-+"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  SID			  "416"
		  Position		  [395, 139, 425, 171]
		  FontName		  "Arial"
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "driveline\nbraking fraction"
		  SID			  "417"
		  Position		  [175, 113, 205, 137]
		  InputValues		  "wh_fa_dl_brake_mph"
		  Table			  "wh_fa_dl_brake_frac"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "front friction\nbraking fraction"
		  SID			  "418"
		  Position		  [175, 43, 205, 67]
		  InputValues		  "wh_fa_fric_brake_mph"
		  Table			  "wh_fa_fric_brake_frac"
		}
		Block {
		  BlockType		  Outport
		  Name			  "braking force\nfrom front-axle\nfriction brakes\n(N)"
		  SID			  "419"
		  Position		  [680, 150, 700, 170]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Keep\n0<frac<1"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  DstBlock		  "Keep\n0<frac<1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "MinMax"
		  SrcPort		  1
		  DstBlock		  "braking force\nfrom front-axle\nfriction brakes\n(N)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "MinMax"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "max front\nbrake force\n(N)"
		  SrcPort		  1
		  Points		  [505, 0; 0, -80]
		  DstBlock		  "MinMax"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "add'l braking\nforce req'd\n(N)"
		  SrcPort		  1
		  Points		  [450, 0; 0, 120]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [0, -35]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "driveline\nbraking fraction"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "front friction\nbraking fraction"
		  SrcPort		  1
		  Points		  [80, 0; 0, 85]
		  DstBlock		  "Product1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  DstBlock		  "Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    DstBlock		    "Product1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 25; 80, 0; 0, -20]
		    DstBlock		    "Switch1"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [5, 0; 0, -40]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Saturation"
		  SrcPort		  1
		  DstBlock		  "front friction\nbraking fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation1"
		  SrcPort		  1
		  DstBlock		  "driveline\nbraking fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "possible speed\n(mph)"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    DstBlock		    "Saturation1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -70]
		    DstBlock		    "Saturation"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "m/s -> mph\n(mph)"
	      SID		      "420"
	      Position		      [255, 22, 305, 68]
	      FontName		      "Arial"
	      Gain		      "2.237"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "rad/s -> m/s\n(m/s)"
	      SID		      "421"
	      Position		      [150, 18, 230, 72]
	      FontName		      "Arial"
	      Gain		      "wh_radius"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "rear braking\nforce req'd\n(N)"
	      SID		      "422"
	      Position		      [285, 384, 315, 416]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "front-axle\nbraking force\n(N)"
	      SID		      "423"
	      Position		      [505, 180, 525, 200]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "rear-axle\nbraking force\n(N)"
	      SID		      "424"
	      Position		      [505, 400, 525, 420]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "max rear\nbrake force\n(N)"
	      SrcPort		      1
	      Points		      [270, 0; 0, -75]
	      DstBlock		      "MinMax2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "max front\nbrake force\n(N)"
	      SrcPort		      1
	      Points		      [310, 0]
	      DstBlock		      "braking force\nsupplied by\nfront friction brakes\n(N)"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [0, 0; 0, 5]
	      Branch {
		DstBlock		"rear braking\nforce req'd\n(N)"
		DstPort			1
	      }
	      Branch {
		Points			[0, 50]
		DstBlock		"MinMax"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      Points		      [5, 0; 0, -40]
	      DstBlock		      "rear braking\nforce req'd\n(N)"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Sum2"
	      SrcPort		      1
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "rear braking\nforce req'd\n(N)"
	      SrcPort		      1
	      DstBlock		      "MinMax2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "MinMax2"
	      SrcPort		      1
	      DstBlock		      "rear-axle\nbraking force\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "rad/s -> m/s\n(m/s)"
	      SrcPort		      1
	      DstBlock		      "m/s -> mph\n(mph)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "axle speed\npossible\n(rad/s)"
	      SrcPort		      1
	      DstBlock		      "rad/s -> m/s\n(m/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "tractive force\navailable from \nfront drivetrain\n(N)"
	      SrcPort		      1
	      Points		      [0, 5]
	      DstBlock		      "Sum1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "total tractive\nforce req'd\n(N)"
	      SrcPort		      1
	      Points		      [0, 0; 15, 0]
	      Branch {
		Points			[0, 50]
		DstBlock		"Sum1"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Switch:\nbraking force\nto be split between\nfriction brakes\n(N)"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Sum1"
	      SrcPort		      1
	      Points		      [5, 0; 0, -15]
	      DstBlock		      "MinMax1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "MinMax1"
	      SrcPort		      1
	      Points		      [10, 0; 0, -35]
	      DstBlock		      "Switch:\nbraking force\nto be split between\nfriction brakes\n(N)"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [0, 0; 0, 15]
	      Branch {
		DstBlock		"Switch:\nbraking force\nto be split between\nfriction brakes\n(N)"
		DstPort			1
	      }
	      Branch {
		Points			[0, 45]
		DstBlock		"MinMax1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "m/s -> mph\n(mph)"
	      SrcPort		      1
	      Points		      [70, 0; 0, 145]
	      DstBlock		      "braking force\nsupplied by\nfront friction brakes\n(N)"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch:\nbraking force\nto be split between\nfriction brakes\n(N)"
	      SrcPort		      1
	      Points		      [0, 0; 25, 0]
	      Branch {
		DstBlock		"braking force\nsupplied by\nfront friction brakes\n(N)"
		DstPort			1
	      }
	      Branch {
		Points			[0, 130; -90, 0; 0, 95]
		Branch {
		  DstBlock		  "rear braking\nforce req'd\n(N)"
		  DstPort		  2
		}
		Branch {
		  Points		  [-125, 0]
		  DstBlock		  "Sum2"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "braking force\nsupplied by\nfront friction brakes\n(N)"
	      SrcPort		      1
	      Points		      [0, 0; 10, 0]
	      Branch {
		Points			[0, 165; -335, 0; 0, 105]
		DstBlock		"Sum2"
		DstPort			2
	      }
	      Branch {
		DstBlock		"front-axle\nbraking force\n(N)"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "tractive force\navailable from \nrear drivetrain\n(N)"
	      SrcPort		      1
	      DstBlock		      "Sum1"
	      DstPort		      3
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "shifting"
	  SID			  "425"
	  Ports			  [1, 1]
	  Position		  [200, 459, 230, 491]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "shifting"
	    Location		    [178, 196, 468, 387]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "gear\nnumber"
	      SID		      "671"
	      Position		      [15, 50, 35, 70]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "672"
	      Position		      [20, 131, 120, 159]
	      FontName		      "Arial"
	      Value		      "gb_shift_delay-1e-6"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "673"
	      Ports		      [2, 1]
	      Position		      [185, 53, 215, 77]
	      FontName		      "Arial"
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "time since last shift"
	      SID		      "674"
	      Ports		      [1, 1]
	      Position		      [65, 43, 125, 77]
	      ShowName		      off
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('time since\\nlast shift')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"time since last shift"
		Location		[24, 388, 314, 527]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "675"
		  Position		  [10, 60, 30, 80]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "just shifted"
		  SID			  "676"
		  Ports			  [1, 1]
		  Position		  [60, 57, 110, 83]
		  ShowName		  off
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('just\\nshifted')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "just shifted"
		    Location		    [142, 212, 465, 357]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "677"
		    Position		    [55, 55, 75, 75]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "678"
		    Position		    [120, 55, 155, 75]
		    FontName		    "Arial"
		    X0			    "1"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    SID			    "679"
		    Ports		    [2, 1]
		    Position		    [190, 58, 220, 82]
		    FontName		    "Arial"
		    Operator		    "~="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "680"
		    Position		    [250, 60, 270, 80]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, 30; 75, 0; 0, -20]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "timer"
		  SID			  "681"
		  Ports			  [1, 1]
		  Position		  [140, 55, 175, 85]
		  ShowName		  off
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('timer')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "timer"
		    Location		    [455, 179, 859, 394]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "trigger"
		    SID			    "682"
		    Position		    [15, 125, 35, 145]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "683"
		    Position		    [100, 100, 120, 120]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant1"
		    SID			    "684"
		    Position		    [100, 150, 120, 170]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant2"
		    SID			    "685"
		    Position		    [150, 5, 170, 25]
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "686"
		    Position		    [265, 59, 295, 91]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "no-lag\nReset Integrator"
		    SID			    "687"
		    Ports		    [3, 1]
		    Position		    [155, 96, 205, 174]
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    MaskType		    "No-lag Reset Integrator"
		    MaskDescription	    "No-lag Reset Integrator"
		    MaskHelp		    "Integrates first input using Euler technique.\\nAt the time step that input 2 <> zero,\\noutput i"
		    "s reset to input 3."
		    MaskPromptString	    "Initial Value"
		    MaskStyleString	    "edit"
		    MaskVariables	    "initval=@1;"
		    MaskTunableValueString  "on"
		    MaskEnableString	    "on"
		    MaskVisibilityString    "on"
		    MaskToolTipString	    "on"
		    MaskDisplay		    "disp('1/s\\nw/ reset\\nno lag')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskPortRotate	    "default"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "15"
		    System {
		    Name		    "no-lag\nReset Integrator"
		    Location		    [258, 616, 780, 880]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "688"
		    Position		    [60, 100, 80, 120]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    SID			    "689"
		    Position		    [60, 140, 80, 160]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_3"
		    SID			    "690"
		    Position		    [45, 185, 65, 205]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "691"
		    Position		    [125, 205, 145, 225]
		    BlockRotation	    270
		    NamePlacement	    "alternate"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    SID			    "692"
		    Position		    [340, 55, 375, 75]
		    BlockMirror		    on
		    FontName		    "Arial"
		    X0			    "initval"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    SID			    "693"
		    Ports		    [2, 1]
		    Position		    [160, 96, 180, 114]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    SID			    "694"
		    Ports		    [2, 1]
		    Position		    [230, 90, 250, 110]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    SID			    "695"
		    Position		    [290, 139, 320, 171]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "dt"
		    SID			    "696"
		    Ports		    [0, 1]
		    Position		    [112, 50, 138, 80]
		    BlockRotation	    270
		    BlockMirror		    on
		    ShowPortLabels	    "none"
		    MinAlgLoopOccurrences   off
		    PropExecContextOutsideSubsystem off
		    RTWSystemCode	    "Auto"
		    FunctionWithSeparateData off
		    Opaque		    off
		    RequestExecContextInheritance off
		    MaskHideContents	    off
		    System {
		    Name		    "dt"
		    Location		    [80, 285, 429, 424]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "697"
		    Position		    [65, 60, 85, 80]
		    FontName		    "Arial"
		    FontSize		    8
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "698"
		    Position		    [125, 85, 160, 105]
		    FontName		    "Arial"
		    FontSize		    8
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    SID			    "699"
		    Ports		    [2, 1]
		    Position		    [205, 65, 225, 85]
		    FontName		    "Arial"
		    FontSize		    8
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "700"
		    Position		    [255, 65, 275, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [10, 0; 0, -15]
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "in_2==0"
		    SID			    "701"
		    Ports		    [2, 1]
		    Position		    [160, 143, 190, 167]
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "702"
		    Position		    [455, 145, 475, 165]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_3"
		    SrcPort		    1
		    Points		    [200, 0; 0, -30]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "in_2==0"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "dt"
		    SrcPort		    1
		    Points		    [0, 15]
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    Points		    [-130, 0; 0, 30]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    Points		    [10, 0; 0, 45]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    Points		    [85, 0]
		    Branch {
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -90]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "in_2==0"
		    SrcPort		    1
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    Points		    [0, -40]
		    DstBlock		    "in_2==0"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "time"
		    SID			    "703"
		    Position		    [350, 65, 370, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    DstBlock		    "time"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "trigger"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, -60]
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Constant2"
		    SrcPort		    1
		    Points		    [35, 0; 0, 50]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant1"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "no-lag\nReset Integrator"
		    SrcPort		    1
		    Points		    [35, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "704"
		  Position		  [225, 60, 245, 80]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  DstBlock		  "just shifted"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "just shifted"
		  SrcPort		  1
		  DstBlock		  "timer"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "timer"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "out_1"
	      SID		      "705"
	      Position		      [250, 55, 270, 75]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "out_1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gear\nnumber"
	      SrcPort		      1
	      DstBlock		      "time since last shift"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [15, 0; 0, -75]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "time since last shift"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "sim stop\nsubsystem"
	  SID			  "426"
	  Ports			  []
	  Position		  [585, 485, 615, 535]
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "sim stop\nsubsystem"
	    Location		    [128, 88, 766, 630]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "427"
	      Ports		      []
	      Position		      [465, 65, 521, 105]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[323, 484, 957, 574]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "428"
		  Name			  "This block controls the simulation stop time.  The simulation maybe \nstop based on the achievement of a"
		  " specified speed, a max speed, a time, a distance, or an engine condition."
		  Position		  [317, 48]
		}
	      }
	    }
	    Block {
	      BlockType		      Clock
	      Name		      "Clock"
	      SID		      "429"
	      Position		      [65, 375, 85, 395]
	    }
	    Block {
	      BlockType		      From
	      Name		      "From<cs>"
	      SID		      "430"
	      Position		      [25, 70, 95, 90]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "engine_on"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From<cs>1"
	      SID		      "431"
	      Position		      [25, 170, 95, 190]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "distance"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From<cs>2"
	      SID		      "432"
	      Position		      [30, 270, 100, 290]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "mpha"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From<cs>3"
	      SID		      "433"
	      Position		      [40, 475, 110, 495]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "mpha"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "434"
	      Ports		      [2, 1]
	      Position		      [500, 302, 530, 333]
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      SID		      "435"
	      Ports		      [2, 1]
	      Position		      [260, 157, 290, 188]
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      SID		      "436"
	      Ports		      [2, 1]
	      Position		      [260, 257, 290, 288]
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      SID		      "437"
	      Ports		      [2, 1]
	      Position		      [255, 362, 285, 393]
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      SID		      "438"
	      Ports		      [2, 1]
	      Position		      [255, 462, 285, 493]
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "439"
	      Ports		      [2, 1]
	      Position		      [435, 212, 465, 243]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "440"
	      Ports		      [2, 1]
	      Position		      [400, 377, 430, 408]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      Stop
	      Name		      "Stop Simulation"
	      SID		      "441"
	      Position		      [570, 303, 605, 337]
	    }
	    Block {
	      BlockType		      Stop
	      Name		      "Stop Simulation1"
	      SID		      "442"
	      Position		      [270, 63, 305, 97]
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      SID		      "443"
	      Ports		      [4, 1]
	      Position		      [340, 151, 360, 284]
	      ShowName		      off
	      Inputs		      "++++"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum1"
	      SID		      "444"
	      Ports		      [4, 1]
	      Position		      [340, 331, 360, 464]
	      ShowName		      off
	      Inputs		      "++++"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "do ex calcs?2"
	      SID		      "445"
	      Position		      [120, 25, 210, 40]
	      BlockRotation	      270
	      BlockMirror	      on
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Value		      "enable_stop_fc"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "do ex calcs?3"
	      SID		      "446"
	      Position		      [20, 120, 150, 140]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Value		      "enable_sim_stop_distance"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "do ex calcs?4"
	      SID		      "447"
	      Position		      [25, 225, 155, 245]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Value		      "enable_sim_stop_speed"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "do ex calcs?5"
	      SID		      "448"
	      Position		      [30, 325, 150, 345]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Value		      "enable_sim_stop_time"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "do ex calcs?6"
	      SID		      "449"
	      Position		      [25, 424, 165, 446]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Value		      "enable_sim_stop_max_spd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "do ex calcs?7"
	      SID		      "450"
	      Position		      [385, 232, 410, 258]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "stop sim distance"
	      SID		      "451"
	      Ports		      [1, 1, 1]
	      Position		      [145, 163, 220, 197]
	      TreatAsAtomicUnit	      on
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"stop sim distance"
		Location		[443, 266, 766, 434]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "distance"
		  SID			  "452"
		  Position		  [30, 15, 50, 35]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  EnablePort
		  Name			  "Enable"
		  SID			  "453"
		  Ports			  []
		  Position		  [230, 70, 250, 90]
		}
		Block {
		  BlockType		  Constant
		  Name			  "Const"
		  SID			  "454"
		  Position		  [30, 74, 135, 96]
		  ShowName		  off
		  FontName		  "Arial"
		  Value			  "sim_stop_distance"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator2"
		  SID			  "455"
		  Ports			  [2, 1]
		  Position		  [165, 18, 195, 42]
		  Operator		  ">"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  SID			  "456"
		  Position		  [240, 23, 270, 37]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "distance"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Const"
		  SrcPort		  1
		  Points		  [0, -50]
		  DstBlock		  "Relational\nOperator2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator2"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "stop sim fc"
	      SID		      "457"
	      Ports		      [1, 1, 1]
	      Position		      [110, 63, 215, 97]
	      TreatAsAtomicUnit	      on
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"stop sim fc"
		Location		[441, 252, 788, 534]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "engine on?"
		  SID			  "458"
		  Position		  [30, 15, 50, 35]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  EnablePort
		  Name			  "Enable"
		  SID			  "459"
		  Ports			  []
		  Position		  [270, 145, 290, 165]
		}
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "460"
		  Position		  [30, 140, 50, 160]
		}
		Block {
		  BlockType		  Constant
		  Name			  "Const"
		  SID			  "461"
		  Position		  [15, 180, 85, 200]
		  ShowName		  off
		  FontName		  "Arial"
		  Value			  "j17_endtimes"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  SID			  "462"
		  Ports			  [2, 1]
		  Position		  [185, 27, 215, 58]
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator1"
		  SID			  "463"
		  Ports			  [2, 1]
		  Position		  [100, 17, 130, 48]
		  Operator		  "OR"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator2"
		  SID			  "464"
		  Ports			  [1, 1]
		  Position		  [185, 94, 215, 126]
		  Operator		  "OR"
		  Inputs		  "1"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Manual Switch"
		  SID			  "465"
		  Ports			  [2, 1]
		  Position		  [185, 187, 215, 223]
		  ForegroundColor	  "green"
		  SourceBlock		  "simulink3/Nonlinear/Manual Switch"
		  SourceType		  "Manual Switch"
		  sw			  "0"
		  action		  "0"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "466"
		  Position		  [95, 80, 125, 110]
		  BlockMirror		  on
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "467"
		  Ports			  [2, 1]
		  Position		  [125, 158, 155, 182]
		  Operator		  "=="
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  SID			  "468"
		  Ports			  [2, 1]
		  Position		  [125, 218, 155, 242]
		  ForegroundColor	  "green"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  SID			  "469"
		  Position		  [275, 38, 305, 52]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Manual Switch"
		  SrcPort		  1
		  Points		  [0, -45; -50, 0]
		  DstBlock		  "Logical\nOperator2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Manual Switch"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Manual Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [45, 0; 0, 15]
		  Branch {
		    Points		    [0, 60]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Const"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "engine on?"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [-5, 0]
		  DstBlock		  "Logical\nOperator1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Logical\nOperator1"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    Points		    [0, 60]
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Logical\nOperator"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Logical\nOperator2"
		  SrcPort		  1
		  Points		  [0, -20; -50, 0]
		  DstBlock		  "Logical\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "stop sim max spd"
	      SID		      "470"
	      Ports		      [1, 1, 1]
	      Position		      [140, 468, 215, 502]
	      TreatAsAtomicUnit	      on
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"stop sim max spd"
		Location		[445, 264, 798, 458]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "speed"
		  SID			  "471"
		  Position		  [30, 15, 50, 35]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  EnablePort
		  Name			  "Enable"
		  SID			  "472"
		  Ports			  []
		  Position		  [30, 75, 50, 95]
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "473"
		  Ports			  []
		  Position		  [260, 45, 316, 85]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [319, 488, 953, 578]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "474"
		    Name		    "When enabled, stop the simulation when the current speed is greater \nthan zero and is less than or e"
		    "qual to the speed at gb_shift_delay*5+1 \nseconds ago (i.e. vehicle has reached a constant max speed). Only used"
		    " \nduring acceleration test."
		    Position		    [317, 48]
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Const"
		  SID			  "475"
		  Position		  [25, 129, 55, 151]
		  ShowName		  off
		  FontName		  "Arial"
		  Value			  "eps"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  SID			  "476"
		  Ports			  [2, 1]
		  Position		  [190, 112, 220, 143]
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator2"
		  SID			  "477"
		  Ports			  [2, 1]
		  Position		  [115, 123, 145, 147]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator3"
		  SID			  "478"
		  Ports			  [2, 1]
		  Position		  [185, 18, 215, 42]
		  Operator		  "<="
		}
		Block {
		  BlockType		  TransportDelay
		  Name			  "Transport\nDelay"
		  SID			  "479"
		  Ports			  [1, 1]
		  Position		  [115, 40, 145, 70]
		  DelayTime		  "(gb_shift_delay*5)+1"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  SID			  "480"
		  Position		  [270, 123, 300, 137]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Const"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator2"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "speed"
		  SrcPort		  1
		  Points		  [25, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator3"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 30]
		    Branch {
		    Points		    [0, 75]
		    DstBlock		    "Relational\nOperator2"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Transport\nDelay"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Transport\nDelay"
		  SrcPort		  1
		  Points		  [20, 0]
		  DstBlock		  "Relational\nOperator3"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator3"
		  SrcPort		  1
		  Points		  [10, 0; 0, 55; -55, 0]
		  DstBlock		  "Logical\nOperator"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "stop sim speed"
	      SID		      "481"
	      Ports		      [1, 1, 1]
	      Position		      [150, 263, 225, 297]
	      TreatAsAtomicUnit	      on
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"stop sim speed"
		Location		[445, 260, 768, 428]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "speed"
		  SID			  "482"
		  Position		  [30, 15, 50, 35]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  EnablePort
		  Name			  "Enable"
		  SID			  "483"
		  Ports			  []
		  Position		  [230, 70, 250, 90]
		}
		Block {
		  BlockType		  Constant
		  Name			  "Const"
		  SID			  "484"
		  Position		  [30, 74, 135, 96]
		  ShowName		  off
		  FontName		  "Arial"
		  Value			  "sim_stop_speed"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator2"
		  SID			  "485"
		  Ports			  [2, 1]
		  Position		  [165, 18, 195, 42]
		  Operator		  ">"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  SID			  "486"
		  Position		  [240, 23, 270, 37]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator2"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Const"
		  SrcPort		  1
		  Points		  [0, -50]
		  DstBlock		  "Relational\nOperator2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "speed"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator2"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "stop sim time"
	      SID		      "487"
	      Ports		      [1, 1, 1]
	      Position		      [145, 368, 220, 402]
	      TreatAsAtomicUnit	      on
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"stop sim time"
		Location		[443, 266, 766, 434]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "time"
		  SID			  "488"
		  Position		  [30, 15, 50, 35]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  EnablePort
		  Name			  "Enable"
		  SID			  "489"
		  Ports			  []
		  Position		  [230, 70, 250, 90]
		}
		Block {
		  BlockType		  Constant
		  Name			  "Const"
		  SID			  "490"
		  Position		  [30, 74, 135, 96]
		  ShowName		  off
		  FontName		  "Arial"
		  Value			  "sim_stop_time"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator2"
		  SID			  "491"
		  Ports			  [2, 1]
		  Position		  [165, 18, 195, 42]
		  Operator		  ">"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  SID			  "492"
		  Position		  [240, 23, 270, 37]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "time"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Const"
		  SrcPort		  1
		  Points		  [0, -50]
		  DstBlock		  "Relational\nOperator2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator2"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "stop sim fc"
	      SrcPort		      1
	      DstBlock		      "Stop Simulation1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [50, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "do ex calcs?7"
	      SrcPort		      1
	      Points		      [0, -10]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	      Branch {
		Points			[0, 165]
		DstBlock		"Relational\nOperator1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Sum1"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      DstBlock		      "Stop Simulation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      Points		      [35, 0]
	      DstBlock		      "Sum1"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      Points		      [10, 0; 0, 35]
	      DstBlock		      "Sum1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      Points		      [10, 0; 0, 105]
	      DstBlock		      "Sum1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      Points		      [15, 0; 0, 170]
	      DstBlock		      "Sum1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "do ex calcs?6"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		Points			[65, 0]
		Branch {
		  Points		  [85, 0]
		  DstBlock		  "Sum"
		  DstPort		  4
		}
		Branch {
		  DstBlock		  "Product3"
		  DstPort		  1
		}
	      }
	      Branch {
		DstBlock		"stop sim max spd"
		DstPort			enable
	      }
	    }
	    Line {
	      SrcBlock		      "do ex calcs?5"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		Points			[60, 0]
		Branch {
		  Points		  [80, 0; 0, -100]
		  DstBlock		  "Sum"
		  DstPort		  3
		}
		Branch {
		  DstBlock		  "Product2"
		  DstPort		  1
		}
	      }
	      Branch {
		DstBlock		"stop sim time"
		DstPort			enable
	      }
	    }
	    Line {
	      SrcBlock		      "do ex calcs?4"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		Points			[60, 0]
		Branch {
		  Points		  [70, 0; 0, -35]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Branch {
		  DstBlock		  "Product1"
		  DstPort		  1
		}
	      }
	      Branch {
		DstBlock		"stop sim speed"
		DstPort			enable
	      }
	    }
	    Line {
	      SrcBlock		      "stop sim speed"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "stop sim time"
	      SrcPort		      1
	      DstBlock		      "Product2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "stop sim max spd"
	      SrcPort		      1
	      DstBlock		      "Product3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "do ex calcs?3"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		Points			[65, 0]
		Branch {
		  Points		  [80, 0]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "Product"
		  DstPort		  1
		}
	      }
	      Branch {
		DstBlock		"stop sim distance"
		DstPort			enable
	      }
	    }
	    Line {
	      SrcBlock		      "stop sim distance"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From<cs>3"
	      SrcPort		      1
	      DstBlock		      "stop sim max spd"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Clock"
	      SrcPort		      1
	      DstBlock		      "stop sim time"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From<cs>2"
	      SrcPort		      1
	      DstBlock		      "stop sim speed"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From<cs>1"
	      SrcPort		      1
	      DstBlock		      "stop sim distance"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From<cs>"
	      SrcPort		      1
	      DstBlock		      "stop sim fc"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "do ex calcs?2"
	      SrcPort		      1
	      DstBlock		      "stop sim fc"
	      DstPort		      enable
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "traction control"
	  SID			  "493"
	  Ports			  [3, 3]
	  Position		  [140, 35, 175, 135]
	  BackgroundColor	  "darkGreen"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "traction control"
	    Location		    [468, 206, 851, 474]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "time-average\nvehicle speed\n req'd (m/s)"
	      SID		      "733"
	      Position		      [45, 95, 65, 115]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SID		      "734"
	      Position		      [50, 180, 70, 200]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "total tractive\nforce req'd\n(N)"
	      SID		      "735"
	      Position		      [45, 70, 65, 90]
	      NamePlacement	      "alternate"
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "736"
	      Ports		      []
	      Position		      [310, 215, 366, 255]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[229, 259, 504, 317]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "737"
		  Name			  "Requested speed and force are limited by the\ntractive characteristics of the tires in this block."
		  Position		  [137, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "apply tire traction\nlimit to req'd speed\n(m/s)"
	      SID		      "738"
	      Ports		      [2, 1]
	      Position		      [140, 93, 170, 142]
	      BackgroundColor	      "darkGreen"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"apply tire traction\nlimit to req'd speed\n(m/s)"
		Location		[2, 70, 1006, 732]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "requested time-step \naverage vehicle speed\n(m/s)\n"
		  SID			  "739"
		  Position		  [60, 20, 80, 40]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "vehicle speed at\nbeginning of time step\n(m/s)"
		  SID			  "740"
		  Position		  [55, 185, 75, 205]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "741"
		  Ports			  []
		  Position		  [1020, 920, 1076, 960]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [229, 259, 910, 399]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "744"
		    Name		    "This block limits the requested speed by the maximum and minimum attainable given the maximum tractio"
		    "n of the tires.\nThat is, acceleration and braking maneuvers are limited to the point of imminent skidding."
		    Position		    [347, 22]
		    VerticalAlignment	    "top"
		    }
		    Annotation {
		    SID			    "743"
		    Name		    "The above equations are derived by solving F_maxaccel=mass*a_max for the maximum or minimum speed at "
		    "the end of the time step,\ngiven that F_maxaccel depends on the weight borne by the front tires which in turn de"
		    "pends on the vehicle's acceleration rate."
		    Position		    [337, 57]
		    VerticalAlignment	    "top"
		    }
		    Annotation {
		    SID			    "742"
		    Name		    "Front-wheel drive is assumed, and weight transfer due to acceleration is included in the calculation "
		    "of maximum tractive force."
		    Position		    [337, 92]
		    VerticalAlignment	    "top"
		    }
		  }
		}
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "745"
		  Position		  [270, 620, 290, 640]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "746"
		  Position		  [420, 107, 485, 123]
		  BackgroundColor	  "darkGreen"
		  Value			  "veh_gravity"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "747"
		  Position		  [410, 173, 560, 187]
		  FontName		  "Arial"
		  Value			  "0.5*veh_gravity*wh_2nd_rrc"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant10"
		  SID			  "748"
		  Position		  [450, 344, 515, 366]
		  FontName		  "Arial"
		  Value			  "veh_gravity"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant11"
		  SID			  "749"
		  Position		  [205, 94, 275, 116]
		  Value			  "wh_1st_rrc"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "750"
		  Position		  [145, 46, 430, 64]
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Value			  "max(wh_slip_force_coeff)*veh_gravity*veh_front_wt_frac"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "751"
		  Position		  [225, 234, 420, 256]
		  FontName		  "Arial"
		  Value			  "0.125*veh_air_density*veh_CD*veh_FA"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant4"
		  SID			  "752"
		  Position		  [235, 290, 515, 310]
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Value			  "max(wh_slip_force_coeff)*veh_cg_height/veh_wheelbase"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant6"
		  SID			  "753"
		  Position		  [255, 703, 460, 727]
		  FontName		  "Arial"
		  Value			  "0.375*veh_air_density*veh_CD*veh_FA"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant7"
		  SID			  "754"
		  Position		  [255, 748, 460, 772]
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Value			  "0.5*veh_gravity*wh_2nd_rrc"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant9"
		  SID			  "755"
		  Position		  [150, 884, 530, 906]
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Value			  "max(wh_slip_force_coeff)*veh_cg_height/veh_wheelbase"
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn"
		  SID			  "756"
		  Position		  [415, 625, 445, 645]
		  FontName		  "Arial"
		  Expr			  "1/u"
		}
		Block {
		  BlockType		  From
		  Name			  "From<cyc>"
		  SID			  "757"
		  Position		  [35, 134, 95, 156]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "grade"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "758"
		  Position		  [315, 660, 355, 680]
		  FontName		  "Arial"
		  X0			  "-0.1"
		}
		Block {
		  BlockType		  MinMax
		  Name			  "MinMax"
		  SID			  "759"
		  Ports			  [2, 1]
		  Position		  [915, 247, 945, 278]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "760"
		  Ports			  [4, 1]
		  Position		  [590, 168, 610, 227]
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Inputs		  "4"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  SID			  "761"
		  Ports			  [3, 1]
		  Position		  [590, 237, 610, 273]
		  FontName		  "Arial"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product10"
		  SID			  "762"
		  Ports			  [3, 1]
		  Position		  [590, 357, 610, 393]
		  FontName		  "Arial"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product11"
		  SID			  "763"
		  Ports			  [3, 1]
		  Position		  [505, 119, 535, 151]
		  BackgroundColor	  "darkGreen"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product2"
		  SID			  "764"
		  Ports			  [4, 1]
		  Position		  [590, 297, 610, 333]
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Inputs		  "4"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product3"
		  SID			  "765"
		  Ports			  [3, 1]
		  Position		  [590, 417, 610, 453]
		  FontName		  "Arial"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product4"
		  SID			  "766"
		  Ports			  [2, 1]
		  Position		  [590, 691, 610, 724]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product5"
		  SID			  "767"
		  Ports			  [2, 1]
		  Position		  [590, 821, 610, 854]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product6"
		  SID			  "768"
		  Ports			  [3, 1]
		  Position		  [590, 888, 610, 922]
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product7"
		  SID			  "769"
		  Ports			  [3, 1]
		  Position		  [500, 754, 520, 796]
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product8"
		  SID			  "770"
		  Ports			  [2, 1]
		  Position		  [310, 98, 330, 122]
		}
		Block {
		  BlockType		  Product
		  Name			  "Product9"
		  SID			  "771"
		  Ports			  [3, 1]
		  Position		  [510, 63, 530, 87]
		  BackgroundColor	  "darkGreen"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "772"
		  Ports			  [7, 1]
		  Position		  [680, 47, 700, 463]
		  FontName		  "Arial"
		  Inputs		  "+---+-+"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "773"
		  Ports			  [2, 1]
		  Position		  [375, 625, 395, 645]
		  FontName		  "Arial"
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum2"
		  SID			  "774"
		  Ports			  [4, 1]
		  Position		  [670, 681, 690, 934]
		  FontName		  "Arial"
		  Inputs		  "++++"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum3"
		  SID			  "775"
		  Ports			  [6, 1]
		  Position		  [680, 482, 700, 643]
		  FontName		  "Arial"
		  Inputs		  "-----+"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum4"
		  SID			  "776"
		  Ports			  [2, 1]
		  Position		  [835, 570, 855, 590]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum5"
		  SID			  "777"
		  Ports			  [2, 1]
		  Position		  [820, 260, 840, 280]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum6"
		  SID			  "778"
		  Ports			  [2, 1]
		  Position		  [390, 113, 410, 157]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum7"
		  SID			  "779"
		  Ports			  [4, 1]
		  Position		  [725, 676, 745, 929]
		  FontName		  "Arial"
		  Inputs		  "+++-"
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trig\nFn4"
		  SID			  "780"
		  Ports			  [1, 1]
		  Position		  [160, 200, 190, 230]
		  Operator		  "cos"
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trig Fn"
		  SID			  "781"
		  Ports			  [1, 1]
		  Position		  [110, 130, 140, 160]
		  Operator		  "atan"
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trig Fn1"
		  SID			  "782"
		  Ports			  [1, 1]
		  Position		  [160, 130, 190, 160]
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)"
		  SID			  "783"
		  Ports			  [0, 1]
		  Position		  [320, 152, 380, 168]
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)1"
		  SID			  "784"
		  Ports			  [0, 1]
		  Position		  [450, 217, 510, 233]
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)2"
		  SID			  "785"
		  Ports			  [0, 1]
		  Position		  [370, 77, 430, 93]
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)3"
		  SID			  "786"
		  Ports			  [0, 1]
		  Position		  [280, 322, 340, 338]
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)4"
		  SID			  "787"
		  Ports			  [0, 1]
		  Position		  [275, 427, 335, 443]
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)5"
		  SID			  "788"
		  Ports			  [0, 1]
		  Position		  [385, 782, 445, 798]
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)6"
		  SID			  "789"
		  Ports			  [0, 1]
		  Position		  [385, 822, 445, 838]
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)7"
		  SID			  "790"
		  Ports			  [0, 1]
		  Position		  [385, 907, 445, 923]
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "max speed at END\nof time step given\ntire traction limit\n(m/s)"
		  SID			  "791"
		  Ports			  [2, 1]
		  Position		  [750, 249, 775, 276]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('/')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "max speed at END\nof time step given\ntire traction limit\n(m/s)"
		    Location		    [0, 0, 0, 0]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "792"
		    Position		    [30, 50, 50, 70]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    SID			    "793"
		    Position		    [10, 80, 30, 100]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Fcn"
		    SID			    "794"
		    Position		    [60, 79, 90, 101]
		    FontName		    "Arial"
		    Expr		    "1/u"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    SID			    "795"
		    Ports		    [2, 1]
		    Position		    [130, 56, 150, 74]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "796"
		    Position		    [180, 55, 200, 75]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "Fcn"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Fcn"
		    SrcPort		    1
		    Points		    [15, 0; 0, -20]
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Gain
		  Name			  "max time-step\naverage speed\n(m/s)"
		  SID			  "797"
		  Position		  [865, 256, 895, 284]
		  FontName		  "Arial"
		  Gain			  "0.5"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "min speed at END\nof time step given\ntire traction limit\n(m/s)"
		  SID			  "798"
		  Ports			  [2, 1]
		  Position		  [770, 559, 795, 586]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('/')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "min speed at END\nof time step given\ntire traction limit\n(m/s)"
		    Location		    [435, 32767, 641, 32767]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "799"
		    Position		    [30, 50, 50, 70]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    SID			    "800"
		    Position		    [10, 80, 30, 100]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Fcn"
		    SID			    "801"
		    Position		    [60, 79, 90, 101]
		    FontName		    "Arial"
		    Expr		    "1/u"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    SID			    "802"
		    Ports		    [2, 1]
		    Position		    [130, 56, 150, 74]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "803"
		    Position		    [180, 55, 200, 75]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Fcn"
		    SrcPort		    1
		    Points		    [15, 0; 0, -20]
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "Fcn"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Gain
		  Name			  "min time-step\naverage speed\n(m/s)"
		  SID			  "804"
		  Position		  [880, 566, 910, 594]
		  FontName		  "Arial"
		  Gain			  "0.5"
		}
		Block {
		  BlockType		  MinMax
		  Name			  "requested time-step\naverage speed limited\nby tire traction\n(m/s)"
		  SID			  "805"
		  Ports			  [2, 1]
		  Position		  [975, 557, 1005, 588]
		  Function		  "max"
		  Inputs		  "2"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "806"
		  Position		  [1055, 565, 1075, 585]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "current veh mass (kg)7"
		  SrcPort		  1
		  DstBlock		  "Product6"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "current veh mass (kg)5"
		  SrcPort		  1
		  DstBlock		  "Product7"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "current veh mass (kg)3"
		  SrcPort		  1
		  DstBlock		  "Product2"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "current veh mass (kg)2"
		  SrcPort		  1
		  DstBlock		  "Product9"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "current veh mass (kg)1"
		  SrcPort		  1
		  Points		  [60, 0]
		  DstBlock		  "Product"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "current veh mass (kg)"
		  SrcPort		  1
		  Points		  [105, 0]
		  DstBlock		  "Product11"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  DstBlock		  "Product11"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product11"
		  SrcPort		  1
		  Points		  [105, 0]
		  Branch {
		    Labels		    [1, 0]
		    Points		    [0, 390]
		    DstBlock		    "Sum3"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Sum6"
		  SrcPort		  1
		  DstBlock		  "Product11"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Trig Fn1"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [0, 240]
		    DstBlock		    "Product10"
		    DstPort		    3
		  }
		  Branch {
		    DstBlock		    "Sum6"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Constant10"
		  SrcPort		  1
		  Points		  [25, 0; 0, 20]
		  DstBlock		  "Product10"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant4"
		  SrcPort		  1
		  Points		  [30, 0]
		  Branch {
		    Points		    [0, 65]
		    DstBlock		    "Product10"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Product2"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Product10"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "Product3"
		  SrcPort		  1
		  Points		  [45, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    7
		  }
		  Branch {
		    Points		    [0, 190]
		    DstBlock		    "Sum3"
		    DstPort		    6
		  }
		}
		Line {
		  SrcBlock		  "current veh mass (kg)4"
		  SrcPort		  1
		  DstBlock		  "Product3"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "max time-step\naverage speed\n(m/s)"
		  SrcPort		  1
		  DstBlock		  "MinMax"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "requested time-step \naverage vehicle speed\n(m/s)\n"
		  SrcPort		  1
		  Points		  [800, 0; 0, 225]
		  DstBlock		  "MinMax"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum5"
		  SrcPort		  1
		  DstBlock		  "max time-step\naverage speed\n(m/s)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [60, 0]
		  DstBlock		  "Product9"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant11"
		  SrcPort		  1
		  DstBlock		  "Product8"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product8"
		  SrcPort		  1
		  Points		  [40, 0]
		  DstBlock		  "Sum6"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Trig\nFn4"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    Points		    [80, 0]
		    Branch {
		    Points		    [0, -100]
		    Branch {
		    Points		    [0, -40]
		    DstBlock		    "Product9"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Product8"
		    DstPort		    2
		    }
		    }
		    Branch {
		    Points		    [290, 0]
		    DstBlock		    "Product"
		    DstPort		    3
		    }
		  }
		  Branch {
		    Points		    [0, 560]
		    DstBlock		    "Product7"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    Points		    [0, 40]
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Fcn"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "current veh mass (kg)6"
		  SrcPort		  1
		  DstBlock		  "Product5"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum2"
		  SrcPort		  1
		  Points		  [10, 0; 0, -540]
		  DstBlock		  "max speed at END\nof time step given\ntire traction limit\n(m/s)"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "min time-step\naverage speed\n(m/s)"
		  SrcPort		  1
		  DstBlock		  "requested time-step\naverage speed limited\nby tire traction\n(m/s)"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "requested time-step\naverage speed limited\nby tire traction\n(m/s)"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum4"
		  SrcPort		  1
		  DstBlock		  "min time-step\naverage speed\n(m/s)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "min speed at END\nof time step given\ntire traction limit\n(m/s)"
		  SrcPort		  1
		  DstBlock		  "Sum4"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "MinMax"
		  SrcPort		  1
		  Points		  [0, 300]
		  DstBlock		  "requested time-step\naverage speed limited\nby tire traction\n(m/s)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum3"
		  SrcPort		  1
		  DstBlock		  "min speed at END\nof time step given\ntire traction limit\n(m/s)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum7"
		  SrcPort		  1
		  Points		  [0, -225]
		  DstBlock		  "min speed at END\nof time step given\ntire traction limit\n(m/s)"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant7"
		  SrcPort		  1
		  DstBlock		  "Product7"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant9"
		  SrcPort		  1
		  DstBlock		  "Product6"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant6"
		  SrcPort		  1
		  DstBlock		  "Product4"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product4"
		  SrcPort		  1
		  Points		  [30, 0]
		  Branch {
		    DstBlock		    "Sum2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -5]
		    DstBlock		    "Sum7"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Product7"
		  SrcPort		  1
		  Points		  [120, 0]
		  Branch {
		    DstBlock		    "Sum2"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, -5]
		    DstBlock		    "Sum7"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Product5"
		  SrcPort		  1
		  Points		  [30, 0]
		  Branch {
		    DstBlock		    "Sum2"
		    DstPort		    3
		  }
		  Branch {
		    Points		    [0, -5]
		    DstBlock		    "Sum7"
		    DstPort		    3
		  }
		}
		Line {
		  SrcBlock		  "Product6"
		  SrcPort		  1
		  Points		  [30, 0]
		  Branch {
		    DstBlock		    "Sum2"
		    DstPort		    4
		  }
		  Branch {
		    Points		    [0, -5]
		    DstBlock		    "Sum7"
		    DstPort		    4
		  }
		}
		Line {
		  SrcBlock		  "Trig Fn"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    DstBlock		    "Trig\nFn4"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Trig Fn1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "vehicle speed at\nbeginning of time step\n(m/s)"
		  SrcPort		  1
		  Points		  [480, 0]
		  Branch {
		    Points		    [0, 60]
		    Branch {
		    Points		    [0, 10]
		    Branch {
		    Labels		    [1, 0]
		    Points		    [0, 50]
		    Branch {
		    Points		    [0, 110]
		    Branch {
		    Points		    [0, 240]
		    Branch {
		    Points		    [245, 0; 0, -80]
		    Branch {
		    DstBlock		    "Sum5"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Sum4"
		    DstPort		    2
		    }
		    }
		    Branch {
		    Points		    [0, 35]
		    DstBlock		    "Product4"
		    DstPort		    1
		    }
		    }
		    Branch {
		    DstBlock		    "Product3"
		    DstPort		    1
		    }
		    }
		    Branch {
		    Points		    [15, 0]
		    DstBlock		    "Product2"
		    DstPort		    2
		    }
		    }
		    Branch {
		    DstBlock		    "Product1"
		    DstPort		    3
		    }
		    }
		    Branch {
		    DstBlock		    "Product1"
		    DstPort		    2
		    }
		  }
		  Branch {
		    Points		    [15, 0]
		    DstBlock		    "Product"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "From<cyc>"
		  SrcPort		  1
		  DstBlock		  "Trig Fn"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "max speed at END\nof time step given\ntire traction limit\n(m/s)"
		  SrcPort		  1
		  DstBlock		  "Sum5"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product2"
		  SrcPort		  1
		  Points		  [25, 0]
		  Branch {
		    Points		    [0, 285]
		    DstBlock		    "Sum3"
		    DstPort		    5
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    5
		  }
		}
		Line {
		  SrcBlock		  "Product9"
		  SrcPort		  1
		  Points		  [85, 0]
		  Branch {
		    Points		    [0, 425]
		    DstBlock		    "Sum3"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  Points		  [0, -5; 35, 0]
		  Branch {
		    Points		    [0, 355]
		    DstBlock		    "Sum3"
		    DstPort		    3
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    3
		  }
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  Points		  [40, 0]
		  Branch {
		    Points		    [0, 320]
		    DstBlock		    "Sum3"
		    DstPort		    4
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    4
		  }
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "max speed at END\nof time step given\ntire traction limit\n(m/s)"
		  DstPort		  1
		}
		Line {
		  Labels		  [0, 0]
		  SrcBlock		  "Fcn"
		  SrcPort		  1
		  Points		  [115, 0]
		  Branch {
		    Points		    [0, 270]
		    DstBlock		    "Product6"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 210]
		    Branch {
		    DstBlock		    "Product5"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, -400]
		    Branch {
		    DstBlock		    "Product3"
		    DstPort		    3
		    }
		    Branch {
		    Points		    [0, -125]
		    DstBlock		    "Product2"
		    DstPort		    3
		    }
		    }
		  }
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [0, -5]
		  DstBlock		  "Product"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "enforce max. \nfront axle\ntractive force\n due to slip (N)"
	      SID		      "807"
	      Ports		      [3, 2]
	      Position		      [255, 62, 285, 178]
	      BackgroundColor	      "darkGreen"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"enforce max. \nfront axle\ntractive force\n due to slip (N)"
		Location		[110, 99, 997, 640]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "tractive force req'd at\ntire/road interface\n(N)"
		  SID			  "808"
		  Position		  [70, 385, 90, 405]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "requested time-step\naverage vehicle speed\n(m/s)"
		  SID			  "809"
		  Position		  [70, 15, 90, 35]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "speed at beginning\nof time step\n(m/s)"
		  SID			  "810"
		  Position		  [65, 85, 85, 105]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  MinMax
		  Name			  " "
		  SID			  "811"
		  Ports			  [2, 1]
		  Position		  [620, 372, 650, 403]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "812"
		  Ports			  []
		  Position		  [815, 480, 871, 520]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [229, 259, 712, 322]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "813"
		    Name		    "No more force will be requested of the drivetrain than can be transmitted by the front tires.\nThis t"
		    "ransmittable force is computed taking into account the slip characteristics of the tires\nand the variable, acce"
		    "leration-dependent weight borne by the front axle."
		    Position		    [242, 12]
		    VerticalAlignment	    "top"
		    }
		  }
		}
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "814"
		  Position		  [140, 110, 160, 130]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "815"
		  Position		  [415, 13, 610, 37]
		  BlockMirror		  on
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Value			  "veh_cg_height/veh_wheelbase"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "816"
		  Position		  [215, 316, 395, 334]
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Value			  "veh_gravity*veh_front_wt_frac"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "817"
		  Position		  [605, 274, 740, 296]
		  BlockMirror		  on
		  FontName		  "Arial"
		  Value			  "max(wh_slip_force_coeff)"
		}
		Block {
		  BlockType		  From
		  Name			  "From<cyc>"
		  SID			  "818"
		  Position		  [105, 194, 165, 216]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "grade"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  SID			  "819"
		  Position		  [620, 422, 645, 448]
		  FontName		  "Arial"
		  Gain			  "-1"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain1"
		  SID			  "820"
		  Position		  [355, 82, 380, 108]
		  FontName		  "Arial"
		  Gain			  "2"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain2"
		  SID			  "821"
		  Position		  [310, 182, 390, 228]
		  Gain			  "veh_gravity"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "822"
		  Position		  [185, 135, 220, 155]
		  FontName		  "Arial"
		  X0			  "-0.1"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "823"
		  Ports			  [2, 1]
		  Position		  [300, 86, 320, 104]
		  FontName		  "Arial"
		  Inputs		  "*/"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  SID			  "824"
		  Ports			  [3, 1]
		  Position		  [485, 63, 505, 107]
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product2"
		  SID			  "825"
		  Ports			  [2, 1]
		  Position		  [585, 340, 605, 360]
		  BlockRotation		  270
		  BlockMirror		  on
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product3"
		  SID			  "826"
		  Ports			  [3, 1]
		  Position		  [480, 253, 500, 297]
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "827"
		  Ports			  [2, 1]
		  Position		  [155, 80, 175, 100]
		  FontName		  "Arial"
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "828"
		  Ports			  [2, 1]
		  Position		  [240, 115, 260, 135]
		  FontName		  "Arial"
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum2"
		  SID			  "829"
		  Ports			  [2, 1]
		  Position		  [415, 87, 445, 118]
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trig Fn"
		  SID			  "830"
		  Ports			  [1, 1]
		  Position		  [195, 190, 225, 220]
		  Operator		  "atan"
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trig Fn1"
		  SID			  "831"
		  Ports			  [1, 1]
		  Position		  [250, 190, 280, 220]
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trig Fn2"
		  SID			  "832"
		  Ports			  [1, 1]
		  Position		  [250, 260, 280, 290]
		  Operator		  "cos"
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)"
		  SID			  "833"
		  Ports			  [0, 1]
		  Position		  [310, 147, 370, 163]
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  MinMax
		  Name			  "tractive force request\nlimited by slip-threshhold\nforce (N)1"
		  SID			  "834"
		  Ports			  [2, 1]
		  Position		  [700, 412, 730, 443]
		  Function		  "max"
		  Inputs		  "2"
		}
		Block {
		  BlockType		  Sum
		  Name			  "weight on\nfront axle\n(N)"
		  SID			  "835"
		  Ports			  [2, 1]
		  Position		  [540, 59, 560, 161]
		  FontName		  "Arial"
		  Inputs		  "-+"
		}
		Block {
		  BlockType		  Outport
		  Name			  "slip-limited force\n(N)"
		  SID			  "836"
		  Position		  [820, 420, 840, 440]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Block {
		  BlockType		  Outport
		  Name			  "weight on front axle\n(N)1"
		  SID			  "837"
		  Position		  [820, 100, 840, 120]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "current veh mass (kg)"
		  SrcPort		  1
		  Points		  [90, 0]
		  Branch {
		    Points		    [0, -55]
		    DstBlock		    "Product1"
		    DstPort		    3
		  }
		  Branch {
		    DstBlock		    "Product3"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Trig Fn2"
		  SrcPort		  1
		  DstBlock		  "Product3"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [65, 0]
		  DstBlock		  "Product3"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Product3"
		  SrcPort		  1
		  Points		  [20, 0]
		  DstBlock		  "weight on\nfront axle\n(N)"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Trig Fn"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    Points		    [0, 70]
		    DstBlock		    "Trig Fn2"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Trig Fn1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Gain2"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Sum2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Trig Fn1"
		  SrcPort		  1
		  DstBlock		  "Gain2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "From<cyc>"
		  SrcPort		  1
		  DstBlock		  "Trig Fn"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum2"
		  SrcPort		  1
		  Points		  [0, -20]
		  DstBlock		  "Product1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Gain1"
		  SrcPort		  1
		  DstBlock		  "Sum2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "tractive force request\nlimited by slip-threshhold\nforce (N)1"
		  SrcPort		  1
		  DstBlock		  "slip-limited force\n(N)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  " "
		  SrcPort		  1
		  Points		  [15, 0; 0, 30]
		  DstBlock		  "tractive force request\nlimited by slip-threshhold\nforce (N)1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product2"
		  SrcPort		  1
		  Points		  [0, 15]
		  Branch {
		    Points		    [0, 55]
		    DstBlock		    "Gain"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    " "
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "tractive force req'd at\ntire/road interface\n(N)"
		  SrcPort		  1
		  DstBlock		  " "
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  DstBlock		  "Product2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "tractive force request\nlimited by slip-threshhold\nforce (N)1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Gain1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  Points		  [15, 0; 0, -25]
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    Points		    [0, 25]
		    DstBlock		    "Memory1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "speed at beginning\nof time step\n(m/s)"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "requested time-step\naverage vehicle speed\n(m/s)"
		  SrcPort		  1
		  Points		  [40, 0; 0, 60]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "weight on\nfront axle\n(N)"
		  SrcPort		  1
		  Points		  [25, 0]
		  Branch {
		    DstBlock		    "weight on front axle\n(N)1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Product2"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [0, 45]
		  DstBlock		  "Product1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  DstBlock		  "weight on\nfront axle\n(N)"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd force\n(N)"
	      SID		      "838"
	      Position		      [330, 60, 350, 80]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd speed\n(m/s)"
	      SID		      "839"
	      Position		      [330, 15, 350, 35]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nfront axle\n(N)"
	      SID		      "840"
	      Position		      [330, 120, 350, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "time-average\nvehicle speed\n req'd (m/s)"
	      SrcPort		      1
	      DstBlock		      "apply tire traction\nlimit to req'd speed\n(m/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		Points			[115, 0; 0, -30]
		DstBlock		"enforce max. \nfront axle\ntractive force\n due to slip (N)"
		DstPort			3
	      }
	      Branch {
		Points			[0, -60]
		DstBlock		"apply tire traction\nlimit to req'd speed\n(m/s)"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "enforce max. \nfront axle\ntractive force\n due to slip (N)"
	      SrcPort		      2
	      Points		      [0, -20]
	      DstBlock		      "weight on\nfront axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "enforce max. \nfront axle\ntractive force\n due to slip (N)"
	      SrcPort		      1
	      Points		      [0, -20]
	      DstBlock		      "req'd force\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "total tractive\nforce req'd\n(N)"
	      SrcPort		      1
	      DstBlock		      "enforce max. \nfront axle\ntractive force\n due to slip (N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "apply tire traction\nlimit to req'd speed\n(m/s)"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, -95]
		DstBlock		"req'd speed\n(m/s)"
		DstPort			1
	      }
	      Branch {
		DstBlock		"enforce max. \nfront axle\ntractive force\n due to slip (N)"
		DstPort			2
	      }
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "traction control 2 axle"
	  SID			  "494"
	  Ports			  [3, 5]
	  Position		  [685, 39, 720, 141]
	  ForegroundColor	  "lightBlue"
	  BackgroundColor	  "darkGreen"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "traction control 2 axle"
	    Location		    [303, 349, 766, 645]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "time-average\nvehicle speed\n req'd (m/s)"
	      SID		      "495"
	      Position		      [45, 95, 65, 115]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SID		      "496"
	      Position		      [50, 180, 70, 200]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "total tractive\nforce req'd\n(N)"
	      SID		      "497"
	      Position		      [45, 70, 65, 90]
	      NamePlacement	      "alternate"
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "498"
	      Ports		      []
	      Position		      [360, 225, 416, 265]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[229, 259, 504, 317]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "499"
		  Name			  "Requested speed and force are limited by the\ntractive characteristics of the tires in this block."
		  Position		  [137, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "apply tire traction\nlimit to req'd speed\n(m/s)"
	      SID		      "500"
	      Ports		      [2, 1]
	      Position		      [140, 93, 170, 142]
	      ForegroundColor	      "lightBlue"
	      BackgroundColor	      "darkGreen"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"apply tire traction\nlimit to req'd speed\n(m/s)"
		Location		[2, 70, 1006, 722]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "requested time-step \naverage vehicle speed\n(m/s)\n"
		  SID			  "501"
		  Position		  [810, 255, 830, 275]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "vehicle speed at\nbeginning of time step\n(m/s)"
		  SID			  "502"
		  Position		  [55, 275, 75, 295]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "503"
		  Ports			  []
		  Position		  [1020, 1010, 1076, 1050]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [229, 259, 910, 399]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "506"
		    Name		    "This block limits the requested speed by the maximum and minimum attainable given the maximum tractio"
		    "n of the tires.\nThat is, acceleration and braking maneuvers are limited to the point of imminent skidding."
		    Position		    [347, 22]
		    VerticalAlignment	    "top"
		    }
		    Annotation {
		    SID			    "505"
		    Name		    "The above equations are derived by solving F_maxaccel=mass*a_max for the maximum or minimum speed at "
		    "the end of the time step,\ngiven that F_maxaccel depends on the weight borne by the front tires which in turn de"
		    "pends on the vehicle's acceleration rate."
		    Position		    [337, 57]
		    VerticalAlignment	    "top"
		    }
		    Annotation {
		    SID			    "504"
		    Name		    "Front-wheel drive is assumed, and weight transfer due to acceleration is included in the calculation "
		    "of maximum tractive force."
		    Position		    [337, 92]
		    VerticalAlignment	    "top"
		    }
		  }
		}
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "507"
		  Position		  [270, 795, 290, 815]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "508"
		  Position		  [420, 197, 485, 213]
		  BackgroundColor	  "darkGreen"
		  Value			  "veh_gravity"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "509"
		  Position		  [410, 263, 560, 277]
		  FontName		  "Arial"
		  Value			  "0.5*veh_gravity*wh_2nd_rrc"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant10"
		  SID			  "510"
		  Position		  [450, 434, 515, 456]
		  FontName		  "Arial"
		  Value			  "veh_gravity"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant11"
		  SID			  "511"
		  Position		  [205, 184, 275, 206]
		  Value			  "wh_1st_rrc"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant12"
		  SID			  "512"
		  Position		  [135, 1124, 515, 1146]
		  ForegroundColor	  "lightBlue"
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Value			  "max(wh_slip_force_coeff)*(-1*veh_cg_height)/veh_wheelbase"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "513"
		  Position		  [145, 136, 430, 154]
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Value			  "max(wh_slip_force_coeff)*veh_gravity*veh_front_wt_frac"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "514"
		  Position		  [225, 324, 420, 346]
		  FontName		  "Arial"
		  Value			  "0.125*veh_air_density*veh_CD*veh_FA"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant4"
		  SID			  "515"
		  Position		  [215, 380, 495, 400]
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Value			  "max(wh_slip_force_coeff)*veh_cg_height/veh_wheelbase"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant5"
		  SID			  "516"
		  Position		  [145, 56, 430, 74]
		  ForegroundColor	  "lightBlue"
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Value			  "max(wh_slip_force_coeff)*veh_gravity*(1-veh_front_wt_frac)"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant6"
		  SID			  "517"
		  Position		  [255, 878, 460, 902]
		  FontName		  "Arial"
		  Value			  "0.375*veh_air_density*veh_CD*veh_FA"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant7"
		  SID			  "518"
		  Position		  [255, 923, 460, 947]
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Value			  "0.5*veh_gravity*wh_2nd_rrc"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant9"
		  SID			  "519"
		  Position		  [150, 1059, 530, 1081]
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Value			  "max(wh_slip_force_coeff)*veh_cg_height/veh_wheelbase"
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn"
		  SID			  "520"
		  Position		  [415, 800, 445, 820]
		  FontName		  "Arial"
		  Expr			  "1/u"
		}
		Block {
		  BlockType		  From
		  Name			  "From<cyc>"
		  SID			  "521"
		  Position		  [35, 224, 95, 246]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "grade"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "522"
		  Position		  [315, 835, 355, 855]
		  FontName		  "Arial"
		  X0			  "-0.1"
		}
		Block {
		  BlockType		  MinMax
		  Name			  "MinMax"
		  SID			  "523"
		  Ports			  [2, 1]
		  Position		  [915, 337, 945, 368]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "524"
		  Ports			  [4, 1]
		  Position		  [590, 258, 610, 317]
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Inputs		  "4"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  SID			  "525"
		  Ports			  [3, 1]
		  Position		  [590, 327, 610, 363]
		  FontName		  "Arial"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product10"
		  SID			  "526"
		  Ports			  [3, 1]
		  Position		  [590, 447, 610, 483]
		  FontName		  "Arial"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product11"
		  SID			  "527"
		  Ports			  [3, 1]
		  Position		  [505, 209, 535, 241]
		  BackgroundColor	  "darkGreen"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product12"
		  SID			  "528"
		  Ports			  [3, 1]
		  Position		  [510, 73, 530, 97]
		  ForegroundColor	  "lightBlue"
		  BackgroundColor	  "darkGreen"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product14"
		  SID			  "529"
		  Ports			  [3, 1]
		  Position		  [575, 1128, 595, 1162]
		  ForegroundColor	  "lightBlue"
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product2"
		  SID			  "530"
		  Ports			  [4, 1]
		  Position		  [590, 387, 610, 423]
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Inputs		  "4"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product3"
		  SID			  "531"
		  Ports			  [3, 1]
		  Position		  [590, 507, 610, 543]
		  FontName		  "Arial"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product4"
		  SID			  "532"
		  Ports			  [2, 1]
		  Position		  [590, 866, 610, 899]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product5"
		  SID			  "533"
		  Ports			  [2, 1]
		  Position		  [590, 996, 610, 1029]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product6"
		  SID			  "534"
		  Ports			  [3, 1]
		  Position		  [580, 1063, 600, 1097]
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product7"
		  SID			  "535"
		  Ports			  [3, 1]
		  Position		  [500, 929, 520, 971]
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product8"
		  SID			  "536"
		  Ports			  [2, 1]
		  Position		  [310, 188, 330, 212]
		}
		Block {
		  BlockType		  Product
		  Name			  "Product9"
		  SID			  "537"
		  Ports			  [3, 1]
		  Position		  [510, 153, 530, 177]
		  BackgroundColor	  "darkGreen"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "538"
		  Ports			  [10, 1]
		  Position		  [680, 102, 700, 618]
		  ForegroundColor	  "lightBlue"
		  FontName		  "Arial"
		  Inputs		  "++---+-++-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "539"
		  Ports			  [2, 1]
		  Position		  [375, 800, 395, 820]
		  FontName		  "Arial"
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum2"
		  SID			  "540"
		  Ports			  [5, 1]
		  Position		  [670, 878, 690, 1132]
		  ForegroundColor	  "lightBlue"
		  FontName		  "Arial"
		  Inputs		  "+++++"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum3"
		  SID			  "541"
		  Ports			  [8, 1]
		  Position		  [680, 659, 700, 821]
		  ForegroundColor	  "lightBlue"
		  FontName		  "Arial"
		  Inputs		  "------+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum4"
		  SID			  "542"
		  Ports			  [2, 1]
		  Position		  [835, 745, 855, 765]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum5"
		  SID			  "543"
		  Ports			  [2, 1]
		  Position		  [820, 350, 840, 370]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum6"
		  SID			  "544"
		  Ports			  [2, 1]
		  Position		  [390, 203, 410, 247]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum7"
		  SID			  "545"
		  Ports			  [5, 1]
		  Position		  [725, 853, 745, 1107]
		  ForegroundColor	  "lightBlue"
		  FontName		  "Arial"
		  Inputs		  "+++--"
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trig\nFn4"
		  SID			  "546"
		  Ports			  [1, 1]
		  Position		  [160, 290, 190, 320]
		  Operator		  "cos"
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trig Fn"
		  SID			  "547"
		  Ports			  [1, 1]
		  Position		  [110, 220, 140, 250]
		  Operator		  "atan"
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trig Fn1"
		  SID			  "548"
		  Ports			  [1, 1]
		  Position		  [160, 220, 190, 250]
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)"
		  SID			  "549"
		  Ports			  [0, 1]
		  Position		  [320, 242, 380, 258]
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)1"
		  SID			  "550"
		  Ports			  [0, 1]
		  Position		  [450, 307, 510, 323]
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)10"
		  SID			  "551"
		  Ports			  [0, 1]
		  Position		  [370, 1147, 430, 1163]
		  ForegroundColor	  "lightBlue"
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)2"
		  SID			  "552"
		  Ports			  [0, 1]
		  Position		  [370, 167, 430, 183]
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)3"
		  SID			  "553"
		  Ports			  [0, 1]
		  Position		  [280, 412, 340, 428]
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)4"
		  SID			  "554"
		  Ports			  [0, 1]
		  Position		  [275, 517, 335, 533]
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)5"
		  SID			  "555"
		  Ports			  [0, 1]
		  Position		  [385, 957, 445, 973]
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)6"
		  SID			  "556"
		  Ports			  [0, 1]
		  Position		  [385, 997, 445, 1013]
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)7"
		  SID			  "557"
		  Ports			  [0, 1]
		  Position		  [385, 1082, 445, 1098]
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)8"
		  SID			  "558"
		  Ports			  [0, 1]
		  Position		  [370, 87, 430, 103]
		  ForegroundColor	  "lightBlue"
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Gain
		  Name			  "front \nactive?"
		  SID			  "559"
		  Position		  [565, 151, 595, 179]
		  ForegroundColor	  "lightBlue"
		  FontName		  "Arial"
		  Gain			  "wh_front_active_bool"
		}
		Block {
		  BlockType		  Gain
		  Name			  "front \nactive?1"
		  SID			  "560"
		  Position		  [620, 1067, 640, 1093]
		  ForegroundColor	  "lightBlue"
		  FontName		  "Arial"
		  Gain			  "wh_front_active_bool"
		}
		Block {
		  BlockType		  Gain
		  Name			  "front \nactive?2"
		  SID			  "561"
		  Position		  [515, 377, 535, 403]
		  ForegroundColor	  "lightBlue"
		  FontName		  "Arial"
		  Gain			  "wh_front_active_bool"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "max speed at END\nof time step given\ntire traction limit\n(m/s)"
		  SID			  "562"
		  Ports			  [2, 1]
		  Position		  [750, 339, 775, 366]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('/')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "max speed at END\nof time step given\ntire traction limit\n(m/s)"
		    Location		    [0, 0, 0, 0]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "563"
		    Position		    [30, 50, 50, 70]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    SID			    "564"
		    Position		    [10, 80, 30, 100]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Fcn"
		    SID			    "565"
		    Position		    [60, 79, 90, 101]
		    FontName		    "Arial"
		    Expr		    "1/u"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    SID			    "566"
		    Ports		    [2, 1]
		    Position		    [130, 56, 150, 74]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "567"
		    Position		    [180, 55, 200, 75]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Fcn"
		    SrcPort		    1
		    Points		    [15, 0; 0, -20]
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "Fcn"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Gain
		  Name			  "max time-step\naverage speed\n(m/s)"
		  SID			  "568"
		  Position		  [865, 346, 895, 374]
		  FontName		  "Arial"
		  Gain			  "0.5"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "min speed at END\nof time step given\ntire traction limit\n(m/s)"
		  SID			  "569"
		  Ports			  [2, 1]
		  Position		  [770, 734, 795, 761]
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('/')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "min speed at END\nof time step given\ntire traction limit\n(m/s)"
		    Location		    [435, 32767, 641, 32767]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    SID			    "570"
		    Position		    [30, 50, 50, 70]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    SID			    "571"
		    Position		    [10, 80, 30, 100]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Fcn"
		    SID			    "572"
		    Position		    [60, 79, 90, 101]
		    FontName		    "Arial"
		    Expr		    "1/u"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    SID			    "573"
		    Ports		    [2, 1]
		    Position		    [130, 56, 150, 74]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "574"
		    Position		    [180, 55, 200, 75]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "Fcn"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Fcn"
		    SrcPort		    1
		    Points		    [15, 0; 0, -20]
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Gain
		  Name			  "min time-step\naverage speed\n(m/s)"
		  SID			  "575"
		  Position		  [880, 741, 910, 769]
		  FontName		  "Arial"
		  Gain			  "0.5"
		}
		Block {
		  BlockType		  Gain
		  Name			  "rear \nactive?"
		  SID			  "576"
		  Position		  [555, 71, 585, 99]
		  ForegroundColor	  "lightBlue"
		  FontName		  "Arial"
		  Gain			  "wh_rear_active_bool"
		}
		Block {
		  BlockType		  Gain
		  Name			  "rear \nactive?1"
		  SID			  "577"
		  Position		  [535, 531, 565, 559]
		  ForegroundColor	  "lightBlue"
		  FontName		  "Arial"
		  Gain			  "wh_rear_active_bool"
		}
		Block {
		  BlockType		  Gain
		  Name			  "rear \nactive?2"
		  SID			  "578"
		  Position		  [535, 591, 565, 619]
		  ForegroundColor	  "lightBlue"
		  FontName		  "Arial"
		  Gain			  "wh_rear_active_bool"
		}
		Block {
		  BlockType		  Gain
		  Name			  "rear \nactive?3"
		  SID			  "579"
		  Position		  [615, 1131, 640, 1159]
		  ForegroundColor	  "lightBlue"
		  FontName		  "Arial"
		  Gain			  "wh_rear_active_bool"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "rear slip\nterms"
		  SID			  "580"
		  Ports			  [3, 2]
		  Position		  [475, 540, 515, 600]
		  ForegroundColor	  "lightBlue"
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "rear slip\nterms"
		    Location		    [251, 364, 905, 608]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "initial speed"
		    SID			    "581"
		    Position		    [365, 48, 395, 62]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "1/dt"
		    SID			    "582"
		    Position		    [420, 68, 450, 82]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "sin(theta)"
		    SID			    "583"
		    Position		    [395, 163, 425, 177]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant12"
		    SID			    "584"
		    Position		    [15, 23, 320, 47]
		    BackgroundColor	    "darkGreen"
		    FontName		    "Arial"
		    Value		    "max(wh_slip_force_coeff)*(-1*veh_cg_height)/veh_wheelbase"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant8"
		    SID			    "585"
		    Position		    [260, 149, 325, 171]
		    FontName		    "Arial"
		    Value		    "veh_gravity"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product13"
		    SID			    "586"
		    Ports		    [3, 1]
		    Position		    [470, 142, 490, 178]
		    FontName		    "Arial"
		    Inputs		    "3"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product14"
		    SID			    "587"
		    Ports		    [4, 1]
		    Position		    [485, 28, 505, 102]
		    BackgroundColor	    "darkGreen"
		    FontName		    "Arial"
		    Inputs		    "4"
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "current \nveh mass (kg)"
		    SID			    "588"
		    Ports		    [0, 1]
		    Position		    [355, 83, 405, 117]
		    BackgroundColor	    "darkGreen"
		    SourceBlock		    "lib_controls/SubSystem/current veh mass (kg)"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "off"
		    TreatAsAtomicUnit	    "off"
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "589"
		    Position		    [540, 58, 570, 72]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out2"
		    SID			    "590"
		    Position		    [530, 153, 560, 167]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Line {
		    SrcBlock		    "sin(theta)"
		    SrcPort		    1
		    DstBlock		    "Product13"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Product13"
		    SrcPort		    1
		    DstBlock		    "Out2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "1/dt"
		    SrcPort		    1
		    DstBlock		    "Product14"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Product14"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "initial speed"
		    SrcPort		    1
		    DstBlock		    "Product14"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "current \nveh mass (kg)"
		    SrcPort		    1
		    Points		    [60, 0]
		    DstBlock		    "Product14"
		    DstPort		    4
		    }
		    Line {
		    SrcBlock		    "Constant8"
		    SrcPort		    1
		    DstBlock		    "Product13"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant12"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    Points		    [0, 0; 0, 115]
		    DstBlock		    "Product13"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Product14"
		    DstPort		    1
		    }
		    }
		  }
		}
		Block {
		  BlockType		  MinMax
		  Name			  "requested time-step\naverage speed limited\nby tire traction\n(m/s)"
		  SID			  "591"
		  Ports			  [2, 1]
		  Position		  [975, 732, 1005, 763]
		  Function		  "max"
		  Inputs		  "2"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "592"
		  Position		  [1055, 655, 1075, 675]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [0, -5]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  1
		}
		Line {
		  Labels		  [0, 0]
		  SrcBlock		  "Fcn"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    Points		    [105, 0]
		    Branch {
		    Points		    [0, 210]
		    Branch {
		    Points		    [0, -485]
		    Branch {
		    Points		    [0, -125]
		    DstBlock		    "Product2"
		    DstPort		    3
		    }
		    Branch {
		    DstBlock		    "Product3"
		    DstPort		    3
		    }
		    }
		    Branch {
		    DstBlock		    "Product5"
		    DstPort		    2
		    }
		    }
		    Branch {
		    Points		    [-5, 0; 0, 270]
		    Branch {
		    DstBlock		    "Product6"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Product14"
		    DstPort		    2
		    }
		    }
		  }
		  Branch {
		    DstBlock		    "rear slip\nterms"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [0, -15]
		  DstBlock		  "max speed at END\nof time step given\ntire traction limit\n(m/s)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  Points		  [0, 0; 40, 0]
		  Branch {
		    Points		    [10, 0]
		    DstBlock		    "Sum"
		    DstPort		    5
		  }
		  Branch {
		    Points		    [0, 405]
		    DstBlock		    "Sum3"
		    DstPort		    5
		  }
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  Points		  [0, -5; 35, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    4
		  }
		  Branch {
		    Points		    [0, 445]
		    DstBlock		    "Sum3"
		    DstPort		    4
		  }
		}
		Line {
		  SrcBlock		  "Product9"
		  SrcPort		  1
		  DstBlock		  "front \nactive?"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product2"
		  SrcPort		  1
		  Points		  [0, 0; 25, 0]
		  Branch {
		    Points		    [25, 0]
		    DstBlock		    "Sum"
		    DstPort		    6
		  }
		  Branch {
		    Points		    [0, 365]
		    DstBlock		    "Sum3"
		    DstPort		    6
		  }
		}
		Line {
		  SrcBlock		  "max speed at END\nof time step given\ntire traction limit\n(m/s)"
		  SrcPort		  1
		  DstBlock		  "Sum5"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "From<cyc>"
		  SrcPort		  1
		  DstBlock		  "Trig Fn"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "vehicle speed at\nbeginning of time step\n(m/s)"
		  SrcPort		  1
		  Points		  [0, 0; 50, 0]
		  Branch {
		    Points		    [430, 0]
		    Branch {
		    Points		    [15, 0]
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, 60]
		    Branch {
		    DstBlock		    "Product1"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, 10]
		    Branch {
		    DstBlock		    "Product1"
		    DstPort		    3
		    }
		    Branch {
		    Labels		    [1, 0]
		    Points		    [0, 50]
		    Branch {
		    Points		    [15, 0]
		    DstBlock		    "Product2"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, 110]
		    Branch {
		    DstBlock		    "Product3"
		    DstPort		    1
		    }
		    Branch {
		    Labels		    [1, 0]
		    Points		    [0, 325]
		    Branch {
		    Points		    [0, 35]
		    DstBlock		    "Product4"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [245, 0; 0, -80]
		    Branch {
		    DstBlock		    "Sum4"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Sum5"
		    DstPort		    2
		    }
		    }
		    }
		    }
		    }
		    }
		    }
		  }
		  Branch {
		    Points		    [0, 265]
		    DstBlock		    "rear slip\nterms"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Trig Fn"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    DstBlock		    "Trig Fn1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Trig\nFn4"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Product6"
		  SrcPort		  1
		  DstBlock		  "front \nactive?1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product5"
		  SrcPort		  1
		  Points		  [0, 0; 30, 0]
		  Branch {
		    Points		    [0, -35]
		    DstBlock		    "Sum7"
		    DstPort		    3
		  }
		  Branch {
		    Points		    [10, 0]
		    DstBlock		    "Sum2"
		    DstPort		    3
		  }
		}
		Line {
		  SrcBlock		  "Product7"
		  SrcPort		  1
		  Points		  [0, 0; 120, 0]
		  Branch {
		    Points		    [0, -20]
		    DstBlock		    "Sum7"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [10, 0]
		    DstBlock		    "Sum2"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Product4"
		  SrcPort		  1
		  Points		  [0, 0; 30, 0]
		  Branch {
		    Points		    [0, -5]
		    DstBlock		    "Sum7"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [10, 0]
		    DstBlock		    "Sum2"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant6"
		  SrcPort		  1
		  DstBlock		  "Product4"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant9"
		  SrcPort		  1
		  DstBlock		  "Product6"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant7"
		  SrcPort		  1
		  DstBlock		  "Product7"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum7"
		  SrcPort		  1
		  Points		  [0, -225]
		  DstBlock		  "min speed at END\nof time step given\ntire traction limit\n(m/s)"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum3"
		  SrcPort		  1
		  DstBlock		  "min speed at END\nof time step given\ntire traction limit\n(m/s)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "MinMax"
		  SrcPort		  1
		  Points		  [0, 385]
		  DstBlock		  "requested time-step\naverage speed limited\nby tire traction\n(m/s)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "min speed at END\nof time step given\ntire traction limit\n(m/s)"
		  SrcPort		  1
		  DstBlock		  "Sum4"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum4"
		  SrcPort		  1
		  DstBlock		  "min time-step\naverage speed\n(m/s)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "requested time-step\naverage speed limited\nby tire traction\n(m/s)"
		  SrcPort		  1
		  Points		  [0, -85]
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "min time-step\naverage speed\n(m/s)"
		  SrcPort		  1
		  DstBlock		  "requested time-step\naverage speed limited\nby tire traction\n(m/s)"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum2"
		  SrcPort		  1
		  Points		  [25, 0; 0, -645]
		  DstBlock		  "max speed at END\nof time step given\ntire traction limit\n(m/s)"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "current veh mass (kg)6"
		  SrcPort		  1
		  DstBlock		  "Product5"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Fcn"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 40]
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Trig\nFn4"
		  SrcPort		  1
		  Points		  [0, 0; 10, 0]
		  Branch {
		    Points		    [0, 645]
		    DstBlock		    "Product7"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [80, 0]
		    Branch {
		    Points		    [290, 0]
		    DstBlock		    "Product"
		    DstPort		    3
		    }
		    Branch {
		    Points		    [0, -100]
		    Branch {
		    DstBlock		    "Product8"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, -40]
		    Branch {
		    DstBlock		    "Product9"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, -80]
		    DstBlock		    "Product12"
		    DstPort		    2
		    }
		    }
		    }
		  }
		}
		Line {
		  SrcBlock		  "Product8"
		  SrcPort		  1
		  Points		  [40, 0]
		  DstBlock		  "Sum6"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant11"
		  SrcPort		  1
		  DstBlock		  "Product8"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [60, 0]
		  DstBlock		  "Product9"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum5"
		  SrcPort		  1
		  DstBlock		  "max time-step\naverage speed\n(m/s)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "requested time-step \naverage vehicle speed\n(m/s)\n"
		  SrcPort		  1
		  Points		  [50, 0; 0, 80]
		  DstBlock		  "MinMax"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "max time-step\naverage speed\n(m/s)"
		  SrcPort		  1
		  DstBlock		  "MinMax"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "current veh mass (kg)4"
		  SrcPort		  1
		  DstBlock		  "Product3"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product3"
		  SrcPort		  1
		  Points		  [0, 0; 45, 0]
		  Branch {
		    Points		    [5, 0]
		    DstBlock		    "Sum"
		    DstPort		    8
		  }
		  Branch {
		    Points		    [0, 265]
		    DstBlock		    "Sum3"
		    DstPort		    7
		  }
		}
		Line {
		  SrcBlock		  "Product10"
		  SrcPort		  1
		  Points		  [50, 0]
		  DstBlock		  "Sum"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "Constant4"
		  SrcPort		  1
		  DstBlock		  "front \nactive?2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant10"
		  SrcPort		  1
		  Points		  [25, 0; 0, 20]
		  DstBlock		  "Product10"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Trig Fn1"
		  SrcPort		  1
		  Points		  [0, 0; 5, 0]
		  Branch {
		    DstBlock		    "Sum6"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 240]
		    Branch {
		    DstBlock		    "Product10"
		    DstPort		    3
		    }
		    Branch {
		    Points		    [0, 115]
		    DstBlock		    "rear slip\nterms"
		    DstPort		    3
		    }
		  }
		}
		Line {
		  SrcBlock		  "Sum6"
		  SrcPort		  1
		  DstBlock		  "Product11"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product11"
		  SrcPort		  1
		  Points		  [0, 0; 105, 0]
		  Branch {
		    Points		    [20, 0]
		    DstBlock		    "Sum"
		    DstPort		    3
		  }
		  Branch {
		    Labels		    [1, 0]
		    Points		    [0, 485]
		    DstBlock		    "Sum3"
		    DstPort		    3
		  }
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  DstBlock		  "Product11"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "current veh mass (kg)"
		  SrcPort		  1
		  Points		  [105, 0]
		  DstBlock		  "Product11"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "current veh mass (kg)1"
		  SrcPort		  1
		  Points		  [60, 0]
		  DstBlock		  "Product"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "current veh mass (kg)2"
		  SrcPort		  1
		  DstBlock		  "Product9"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "current veh mass (kg)3"
		  SrcPort		  1
		  DstBlock		  "Product2"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "current veh mass (kg)5"
		  SrcPort		  1
		  DstBlock		  "Product7"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "current veh mass (kg)7"
		  SrcPort		  1
		  DstBlock		  "Product6"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Product12"
		  SrcPort		  1
		  DstBlock		  "rear \nactive?"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant5"
		  SrcPort		  1
		  Points		  [60, 0]
		  DstBlock		  "Product12"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "current veh mass (kg)8"
		  SrcPort		  1
		  DstBlock		  "Product12"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "rear \nactive?"
		  SrcPort		  1
		  Points		  [45, 0]
		  Branch {
		    Points		    [30, 0]
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 585]
		    DstBlock		    "Sum3"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "rear slip\nterms"
		  SrcPort		  1
		  DstBlock		  "rear \nactive?1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "rear slip\nterms"
		  SrcPort		  2
		  DstBlock		  "rear \nactive?2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product14"
		  SrcPort		  1
		  DstBlock		  "rear \nactive?3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant12"
		  SrcPort		  1
		  DstBlock		  "Product14"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "current veh mass (kg)10"
		  SrcPort		  1
		  DstBlock		  "Product14"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "rear \nactive?1"
		  SrcPort		  1
		  Points		  [5, 0; 0, 20; 30, 0]
		  Branch {
		    Points		    [60, 0]
		    DstBlock		    "Sum"
		    DstPort		    9
		  }
		  Branch {
		    Points		    [0, 245]
		    DstBlock		    "Sum3"
		    DstPort		    8
		  }
		}
		Line {
		  SrcBlock		  "rear \nactive?2"
		  SrcPort		  1
		  Points		  [0, -20]
		  DstBlock		  "Sum"
		  DstPort		  10
		}
		Line {
		  SrcBlock		  "rear \nactive?3"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    Points		    [0, -5; 65, 0]
		    DstBlock		    "Sum7"
		    DstPort		    5
		  }
		  Branch {
		    Points		    [10, 0]
		    DstBlock		    "Sum2"
		    DstPort		    5
		  }
		}
		Line {
		  SrcBlock		  "front \nactive?"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    Points		    [45, 0]
		    DstBlock		    "Sum"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 525]
		    DstBlock		    "Sum3"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "front \nactive?1"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    Points		    [0, -50]
		    DstBlock		    "Sum7"
		    DstPort		    4
		  }
		  Branch {
		    Points		    [10, 0]
		    DstBlock		    "Sum2"
		    DstPort		    4
		  }
		}
		Line {
		  SrcBlock		  "front \nactive?2"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    DstBlock		    "Product2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 65]
		    DstBlock		    "Product10"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "enforce max. \nfront axle\ntractive force\n due to slip (N)"
	      SID		      "593"
	      Ports		      [3, 4]
	      Position		      [255, 62, 285, 178]
	      ForegroundColor	      "lightBlue"
	      BackgroundColor	      "darkGreen"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"enforce max. \nfront axle\ntractive force\n due to slip (N)"
		Location		[78, 78, 766, 631]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "tractive force req'd at\ntire/road interface\n(N)"
		  SID			  "594"
		  Position		  [260, 385, 280, 405]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "requested time-step\naverage vehicle speed\n(m/s)"
		  SID			  "595"
		  Position		  [65, 20, 85, 40]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "speed at beginning\nof time step\n(m/s)"
		  SID			  "596"
		  Position		  [65, 85, 85, 105]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  MinMax
		  Name			  " "
		  SID			  "597"
		  Ports			  [2, 1]
		  Position		  [370, 372, 400, 403]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "598"
		  Ports			  []
		  Position		  [565, 480, 621, 520]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [229, 259, 712, 322]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "599"
		    Name		    "No more force will be requested of the drivetrain than can be transmitted by the front tires.\nThis t"
		    "ransmittable force is computed taking into account the slip characteristics of the tires\nand the variable, acce"
		    "leration-dependent weight borne by the front axle."
		    Position		    [242, 12]
		    VerticalAlignment	    "top"
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "600"
		  Position		  [365, 174, 500, 196]
		  BlockMirror		  on
		  FontName		  "Arial"
		  Value			  "max(wh_slip_force_coeff)"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  SID			  "601"
		  Position		  [370, 422, 395, 448]
		  FontName		  "Arial"
		  Gain			  "-1"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  SID			  "602"
		  Ports			  [2, 1]
		  Position		  [265, 210, 285, 230]
		  BlockRotation		  270
		  BlockMirror		  on
		  ForegroundColor	  "lightBlue"
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product2"
		  SID			  "603"
		  Ports			  [2, 1]
		  Position		  [335, 230, 355, 250]
		  BlockRotation		  270
		  BlockMirror		  on
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product3"
		  SID			  "604"
		  Ports			  [2, 1]
		  Position		  [425, 322, 445, 353]
		  ForegroundColor	  "lightBlue"
		  FontName		  "Arial"
		  Inputs		  "*/"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product4"
		  SID			  "605"
		  Ports			  [2, 1]
		  Position		  [145, 237, 165, 268]
		  BlockMirror		  on
		  ForegroundColor	  "lightBlue"
		  FontName		  "Arial"
		  Inputs		  "*/"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "606"
		  Ports			  [2, 1]
		  Position		  [305, 335, 325, 355]
		  ForegroundColor	  "lightBlue"
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum2"
		  SID			  "607"
		  Ports			  [2, 1]
		  Position		  [200, 248, 225, 272]
		  BlockMirror		  on
		  ForegroundColor	  "lightBlue"
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "front"
		  SID			  "608"
		  Ports			  [2, 1]
		  Position		  [175, 15, 215, 75]
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "front"
		    Location		    [344, 121, 909, 494]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "609"
		    Position		    [25, 88, 55, 102]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "In2"
		    SID			    "610"
		    Position		    [25, 98, 55, 112]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "611"
		    Position		    [65, 120, 85, 140]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "612"
		    Position		    [340, 23, 535, 47]
		    BlockMirror		    on
		    BackgroundColor	    "darkGreen"
		    FontName		    "Arial"
		    Value		    "veh_cg_height/veh_wheelbase"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant1"
		    SID			    "613"
		    Position		    [140, 326, 320, 344]
		    BackgroundColor	    "darkGreen"
		    FontName		    "Arial"
		    Value		    "veh_gravity*veh_front_wt_frac"
		    }
		    Block {
		    BlockType		    From
		    Name		    "From<cyc>"
		    SID			    "614"
		    Position		    [30, 204, 90, 226]
		    CloseFcn		    "tagdialog Close"
		    GotoTag		    "grade"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gain1"
		    SID			    "615"
		    Position		    [280, 92, 305, 118]
		    FontName		    "Arial"
		    Gain		    "2"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gain2"
		    SID			    "616"
		    Position		    [235, 192, 315, 238]
		    Gain		    "veh_gravity"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "617"
		    Position		    [110, 145, 145, 165]
		    FontName		    "Arial"
		    X0			    "-0.1"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    SID			    "618"
		    Ports		    [2, 1]
		    Position		    [225, 96, 245, 114]
		    FontName		    "Arial"
		    Inputs		    "*/"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product1"
		    SID			    "619"
		    Ports		    [3, 1]
		    Position		    [410, 73, 430, 117]
		    BackgroundColor	    "darkGreen"
		    FontName		    "Arial"
		    Inputs		    "3"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product3"
		    SID			    "620"
		    Ports		    [3, 1]
		    Position		    [405, 263, 425, 307]
		    BackgroundColor	    "darkGreen"
		    FontName		    "Arial"
		    Inputs		    "3"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    SID			    "621"
		    Ports		    [2, 1]
		    Position		    [80, 90, 100, 110]
		    FontName		    "Arial"
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    SID			    "622"
		    Ports		    [2, 1]
		    Position		    [165, 125, 185, 145]
		    FontName		    "Arial"
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum2"
		    SID			    "623"
		    Ports		    [2, 1]
		    Position		    [340, 97, 370, 128]
		    }
		    Block {
		    BlockType		    Trigonometry
		    Name		    "Trig Fn"
		    SID			    "624"
		    Ports		    [1, 1]
		    Position		    [120, 200, 150, 230]
		    Operator		    "atan"
		    }
		    Block {
		    BlockType		    Trigonometry
		    Name		    "Trig Fn1"
		    SID			    "625"
		    Ports		    [1, 1]
		    Position		    [175, 200, 205, 230]
		    }
		    Block {
		    BlockType		    Trigonometry
		    Name		    "Trig Fn2"
		    SID			    "626"
		    Ports		    [1, 1]
		    Position		    [175, 270, 205, 300]
		    Operator		    "cos"
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "current veh mass (kg)"
		    SID			    "627"
		    Ports		    [0, 1]
		    Position		    [235, 157, 295, 173]
		    BackgroundColor	    "darkGreen"
		    SourceBlock		    "lib_controls/SubSystem/current veh mass (kg)"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "off"
		    TreatAsAtomicUnit	    "off"
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "weight on\nfront axle\n(N)1"
		    SID			    "628"
		    Ports		    [2, 1]
		    Position		    [465, 69, 485, 171]
		    FontName		    "Arial"
		    Inputs		    "-+"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "629"
		    Position		    [510, 113, 540, 127]
		    IconDisplay		    "Port number"
		    }
		    Line {
		    SrcBlock		    "weight on\nfront axle\n(N)1"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "In2"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "current veh mass (kg)"
		    SrcPort		    1
		    Points		    [0, 0; 90, 0]
		    Branch {
		    DstBlock		    "Product3"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -55]
		    DstBlock		    "Product1"
		    DstPort		    3
		    }
		    }
		    Line {
		    SrcBlock		    "Trig Fn2"
		    SrcPort		    1
		    DstBlock		    "Product3"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant1"
		    SrcPort		    1
		    Points		    [65, 0]
		    DstBlock		    "Product3"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Product3"
		    SrcPort		    1
		    Points		    [20, 0]
		    DstBlock		    "weight on\nfront axle\n(N)1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Trig Fn"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    Points		    [0, 70]
		    DstBlock		    "Trig Fn2"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Trig Fn1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Gain2"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Sum2"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Trig Fn1"
		    SrcPort		    1
		    DstBlock		    "Gain2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "From<cyc>"
		    SrcPort		    1
		    DstBlock		    "Trig Fn"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum2"
		    SrcPort		    1
		    Points		    [0, -20]
		    DstBlock		    "Product1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Gain1"
		    SrcPort		    1
		    DstBlock		    "Sum2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "Gain1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    Points		    [15, 0; 0, -25]
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    Points		    [0, 45]
		    DstBlock		    "Product1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product1"
		    SrcPort		    1
		    DstBlock		    "weight on\nfront axle\n(N)1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Gain
		  Name			  "front \nactive?"
		  SID			  "630"
		  Position		  [335, 275, 355, 305]
		  BlockRotation		  270
		  BlockMirror		  on
		  ForegroundColor	  "lightBlue"
		  FontName		  "Arial"
		  Gain			  "wh_front_active_bool"
		}
		Block {
		  BlockType		  ToWorkspace
		  Name			  "front traction ratio"
		  SID			  "631"
		  Ports			  [1]
		  Position		  [120, 322, 245, 338]
		  FontName		  "Arial"
		  VariableName		  "front_traction_ratio_orig"
		  MaxDataPoints		  "inf"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "rear"
		  SID			  "632"
		  Ports			  [2, 1]
		  Position		  [175, 100, 215, 160]
		  ForegroundColor	  "lightBlue"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "rear"
		    Location		    [185, 87, 750, 460]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    SID			    "633"
		    Position		    [25, 88, 55, 102]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "In2"
		    SID			    "634"
		    Position		    [25, 98, 55, 112]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "635"
		    Position		    [65, 120, 85, 140]
		    FontName		    "Arial"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    SID			    "636"
		    Position		    [340, 23, 535, 47]
		    BlockMirror		    on
		    BackgroundColor	    "darkGreen"
		    FontName		    "Arial"
		    Value		    "(-1*veh_cg_height)/veh_wheelbase"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant1"
		    SID			    "637"
		    Position		    [140, 326, 320, 344]
		    BackgroundColor	    "darkGreen"
		    FontName		    "Arial"
		    Value		    "veh_gravity*(1-veh_front_wt_frac)"
		    }
		    Block {
		    BlockType		    From
		    Name		    "From<cyc>"
		    SID			    "638"
		    Position		    [30, 204, 90, 226]
		    CloseFcn		    "tagdialog Close"
		    GotoTag		    "grade"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gain1"
		    SID			    "639"
		    Position		    [280, 92, 305, 118]
		    FontName		    "Arial"
		    Gain		    "2"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gain2"
		    SID			    "640"
		    Position		    [235, 192, 315, 238]
		    Gain		    "veh_gravity"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "641"
		    Position		    [110, 145, 145, 165]
		    FontName		    "Arial"
		    X0			    "-0.1"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    SID			    "642"
		    Ports		    [2, 1]
		    Position		    [225, 96, 245, 114]
		    FontName		    "Arial"
		    Inputs		    "*/"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product1"
		    SID			    "643"
		    Ports		    [3, 1]
		    Position		    [410, 73, 430, 117]
		    BackgroundColor	    "darkGreen"
		    FontName		    "Arial"
		    Inputs		    "3"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product3"
		    SID			    "644"
		    Ports		    [3, 1]
		    Position		    [405, 263, 425, 307]
		    BackgroundColor	    "darkGreen"
		    FontName		    "Arial"
		    Inputs		    "3"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    SID			    "645"
		    Ports		    [2, 1]
		    Position		    [80, 90, 100, 110]
		    FontName		    "Arial"
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    SID			    "646"
		    Ports		    [2, 1]
		    Position		    [165, 125, 185, 145]
		    FontName		    "Arial"
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum2"
		    SID			    "647"
		    Ports		    [2, 1]
		    Position		    [340, 97, 370, 128]
		    }
		    Block {
		    BlockType		    Trigonometry
		    Name		    "Trig Fn"
		    SID			    "648"
		    Ports		    [1, 1]
		    Position		    [120, 200, 150, 230]
		    Operator		    "atan"
		    }
		    Block {
		    BlockType		    Trigonometry
		    Name		    "Trig Fn1"
		    SID			    "649"
		    Ports		    [1, 1]
		    Position		    [175, 200, 205, 230]
		    }
		    Block {
		    BlockType		    Trigonometry
		    Name		    "Trig Fn2"
		    SID			    "650"
		    Ports		    [1, 1]
		    Position		    [175, 270, 205, 300]
		    Operator		    "cos"
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "current veh mass (kg)"
		    SID			    "651"
		    Ports		    [0, 1]
		    Position		    [235, 157, 295, 173]
		    BackgroundColor	    "darkGreen"
		    SourceBlock		    "lib_controls/SubSystem/current veh mass (kg)"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "off"
		    TreatAsAtomicUnit	    "off"
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "weight on\nrear axle\n(N)"
		    SID			    "652"
		    Ports		    [2, 1]
		    Position		    [465, 69, 485, 171]
		    FontName		    "Arial"
		    Inputs		    "-+"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "653"
		    Position		    [510, 113, 540, 127]
		    IconDisplay		    "Port number"
		    }
		    Line {
		    SrcBlock		    "weight on\nrear axle\n(N)"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "In2"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "current veh mass (kg)"
		    SrcPort		    1
		    Points		    [0, 0; 90, 0]
		    Branch {
		    DstBlock		    "Product3"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -55]
		    DstBlock		    "Product1"
		    DstPort		    3
		    }
		    }
		    Line {
		    SrcBlock		    "Trig Fn2"
		    SrcPort		    1
		    DstBlock		    "Product3"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant1"
		    SrcPort		    1
		    Points		    [65, 0]
		    DstBlock		    "Product3"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Product3"
		    SrcPort		    1
		    Points		    [20, 0]
		    DstBlock		    "weight on\nrear axle\n(N)"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Trig Fn"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    Points		    [0, 70]
		    DstBlock		    "Trig Fn2"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Trig Fn1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Gain2"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Sum2"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Trig Fn1"
		    SrcPort		    1
		    DstBlock		    "Gain2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "From<cyc>"
		    SrcPort		    1
		    DstBlock		    "Trig Fn"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum2"
		    SrcPort		    1
		    Points		    [0, -20]
		    DstBlock		    "Product1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Gain1"
		    SrcPort		    1
		    DstBlock		    "Sum2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "Gain1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    Points		    [15, 0; 0, -25]
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    Points		    [0, 45]
		    DstBlock		    "Product1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product1"
		    SrcPort		    1
		    DstBlock		    "weight on\nrear axle\n(N)"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Gain
		  Name			  "rear \nactive?"
		  SID			  "654"
		  Position		  [265, 275, 285, 305]
		  BlockRotation		  270
		  BlockMirror		  on
		  ForegroundColor	  "lightBlue"
		  NamePlacement		  "alternate"
		  FontName		  "Arial"
		  Gain			  "wh_rear_active_bool"
		}
		Block {
		  BlockType		  MinMax
		  Name			  "tractive force request\nlimited by slip-threshhold\nforce (N)1"
		  SID			  "655"
		  Ports			  [2, 1]
		  Position		  [450, 412, 480, 443]
		  Function		  "max"
		  Inputs		  "2"
		}
		Block {
		  BlockType		  Outport
		  Name			  "slip-limited force\n(N)"
		  SID			  "656"
		  Position		  [570, 420, 590, 440]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Block {
		  BlockType		  Outport
		  Name			  "weight on front axle\n(N)"
		  SID			  "657"
		  Position		  [390, 35, 410, 55]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Block {
		  BlockType		  Outport
		  Name			  "weight on rear axle\n(N)"
		  SID			  "658"
		  Position		  [390, 120, 410, 140]
		  ForegroundColor	  "lightBlue"
		  Port			  "3"
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Block {
		  BlockType		  Outport
		  Name			  "front/total\ntraction ratio"
		  SID			  "659"
		  Position		  [495, 330, 515, 350]
		  ForegroundColor	  "lightBlue"
		  Port			  "4"
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "front"
		  SrcPort		  1
		  Points		  [110, 0]
		  Branch {
		    Points		    [0, 170]
		    DstBlock		    "Product2"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "weight on front axle\n(N)"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "requested time-step\naverage vehicle speed\n(m/s)"
		  SrcPort		  1
		  Points		  [55, 0]
		  Branch {
		    DstBlock		    "front"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 85]
		    DstBlock		    "rear"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "speed at beginning\nof time step\n(m/s)"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    Points		    [35, 0]
		    DstBlock		    "front"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 50]
		    DstBlock		    "rear"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "tractive force request\nlimited by slip-threshhold\nforce (N)1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [-10, 0; 0, 10]
		  Branch {
		    DstBlock		    "Product2"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Product1"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "tractive force req'd at\ntire/road interface\n(N)"
		  SrcPort		  1
		  DstBlock		  " "
		  DstPort		  2
		}
		Line {
		  SrcBlock		  " "
		  SrcPort		  1
		  Points		  [15, 0; 0, 30]
		  DstBlock		  "tractive force request\nlimited by slip-threshhold\nforce (N)1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "tractive force request\nlimited by slip-threshhold\nforce (N)1"
		  SrcPort		  1
		  DstBlock		  "slip-limited force\n(N)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "rear"
		  SrcPort		  1
		  Points		  [25, 0]
		  Branch {
		    DstBlock		    "weight on rear axle\n(N)"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 65]
		    DstBlock		    "Product1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  Points		  [10, 0; 0, 15]
		  Branch {
		    Points		    [0, 20]
		    Branch {
		    DstBlock		    " "
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 55]
		    DstBlock		    "Gain"
		    DstPort		    1
		    }
		  }
		  Branch {
		    Points		    [70, 0]
		    DstBlock		    "Product3"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  Points		  [0, 25]
		  Branch {
		    DstBlock		    "rear \nactive?"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [-35, 0]
		    DstBlock		    "Sum2"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Product2"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    DstBlock		    "front \nactive?"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [-100, 0]
		    Branch {
		    DstBlock		    "Sum2"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -10]
		    DstBlock		    "Product4"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Product3"
		  SrcPort		  1
		  DstBlock		  "front/total\ntraction ratio"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "front \nactive?"
		  SrcPort		  1
		  Points		  [0, -5; 0, 10]
		  Branch {
		    Points		    [0, 10; -55, 0]
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [65, 0]
		    DstBlock		    "Product3"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "rear \nactive?"
		  SrcPort		  1
		  Points		  [0, 40]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum2"
		  SrcPort		  1
		  DstBlock		  "Product4"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product4"
		  SrcPort		  1
		  Points		  [-35, 0]
		  DstBlock		  "front traction ratio"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd force\n(N)"
	      SID		      "660"
	      Position		      [320, 50, 340, 70]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd speed\n(m/s)"
	      SID		      "661"
	      Position		      [360, 15, 380, 35]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nfront axle\n(N)"
	      SID		      "662"
	      Position		      [350, 95, 370, 115]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nrear axle\n(N)"
	      SID		      "663"
	      Position		      [405, 125, 425, 145]
	      ForegroundColor	      "lightBlue"
	      Port		      "4"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "front/total \ntraction ratio"
	      SID		      "664"
	      Position		      [325, 155, 345, 175]
	      ForegroundColor	      "lightBlue"
	      Port		      "5"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "apply tire traction\nlimit to req'd speed\n(m/s)"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"enforce max. \nfront axle\ntractive force\n due to slip (N)"
		DstPort			2
	      }
	      Branch {
		Points			[0, -95]
		DstBlock		"req'd speed\n(m/s)"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "total tractive\nforce req'd\n(N)"
	      SrcPort		      1
	      DstBlock		      "enforce max. \nfront axle\ntractive force\n due to slip (N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "enforce max. \nfront axle\ntractive force\n due to slip (N)"
	      SrcPort		      1
	      Points		      [0, -15]
	      DstBlock		      "req'd force\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "enforce max. \nfront axle\ntractive force\n due to slip (N)"
	      SrcPort		      2
	      DstBlock		      "weight on\nfront axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		Points			[115, 0; 0, -30]
		DstBlock		"enforce max. \nfront axle\ntractive force\n due to slip (N)"
		DstPort			3
	      }
	      Branch {
		Points			[0, -60]
		DstBlock		"apply tire traction\nlimit to req'd speed\n(m/s)"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "time-average\nvehicle speed\n req'd (m/s)"
	      SrcPort		      1
	      DstBlock		      "apply tire traction\nlimit to req'd speed\n(m/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "enforce max. \nfront axle\ntractive force\n due to slip (N)"
	      SrcPort		      3
	      DstBlock		      "weight on\nrear axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "enforce max. \nfront axle\ntractive force\n due to slip (N)"
	      SrcPort		      4
	      DstBlock		      "front/total \ntraction ratio"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "traction control J2452"
	  SID			  "665"
	  Ports			  [3, 3]
	  Position		  [410, 35, 445, 135]
	  BackgroundColor	  "darkGreen"
	  AncestorBlock		  "lib_controls/SubSystem/traction\n control"
	  LibraryVersion	  "*"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "traction control J2452"
	    Location		    [6, 74, 553, 353]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    SIDHighWatermark	    "470"
	    Block {
	      BlockType		      Inport
	      Name		      "time-average\nvehicle speed\n req'd (m/s)"
	      SID		      "665:1"
	      Position		      [45, 95, 65, 115]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SID		      "665:2"
	      Position		      [50, 180, 70, 200]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "total tractive\nforce req'd\n(N)"
	      SID		      "665:3"
	      Position		      [45, 70, 65, 90]
	      NamePlacement	      "alternate"
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "665:4"
	      Ports		      []
	      Position		      [310, 215, 366, 255]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[229, 259, 504, 317]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "665:5"
		  Name			  "Requested speed and force are limited by the\ntractive characteristics of the tires in this block."
		  Position		  [137, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "apply tire traction\nlimit to req'd speed\n(m/s)"
	      SID		      "665:6"
	      Ports		      [2, 1]
	      Position		      [135, 97, 165, 148]
	      BackgroundColor	      "darkGreen"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"apply tire traction\nlimit to req'd speed\n(m/s)"
		Location		[2, 44, 1014, 742]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "requested time-step \naverage vehicle speed\n(m/s)\n"
		  SID			  "665:7"
		  Position		  [65, 15, 85, 35]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "vehicle speed at\nbeginning of time step\n(m/s)"
		  SID			  "665:8"
		  Position		  [60, 630, 80, 650]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "665:9"
		  Ports			  []
		  Position		  [695, 620, 751, 660]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [135, 290, 822, 501]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "665:10"
		    Name		    "This block limits the requested speed by the maximum and minimum attainable given the maximum tractio"
		    "n of the tires.\nThat is, acceleration and braking maneuvers are limited to the point of imminent skidding."
		    Position		    [347, 22]
		    VerticalAlignment	    "top"
		    }
		    Annotation {
		    SID			    "665:11"
		    Name		    "The above equations are derived by solving F_maxaccel=mass*a_max for the maximum or minimum speed at "
		    "the end of the time step,\ngiven that F_maxaccel depends on the weight borne by the front tires which in turn de"
		    "pends on the vehicle's acceleration rate."
		    Position		    [337, 57]
		    VerticalAlignment	    "top"
		    }
		    Annotation {
		    SID			    "665:12"
		    Name		    "Front-wheel drive is assumed, and weight transfer due to acceleration is included in the calculation "
		    "of maximum tractive force.\n\nSAE J2452 rolling resistance model is included.\n\nRolling resistance coefficients"
		    " veh_rr_a and veh_rr_b have units of N/km/h and N/(km/h)^2 respectively.\nEach is converted to N/m/s and N/(m/s)"
		    "^2 with the gain blocks before it is input into the final traction equation.\n\nVeh_rr_a, veh_rr_b, and veh_rr_c"
		    " must always be adjusted for roadwheel curvature before use."
		    Position		    [337, 92]
		    VerticalAlignment	    "top"
		    }
		  }
		}
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "665:13"
		  Position		  [210, 205, 230, 225]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "665:14"
		  Position		  [540, 122, 600, 138]
		  ShowName		  off
		  Value			  "veh_CD"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "665:15"
		  Position		  [540, 186, 600, 204]
		  ShowName		  off
		  Value			  "veh_FA"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant10"
		  SID			  "665:16"
		  Position		  [450, 502, 545, 518]
		  ShowName		  off
		  Value			  "veh_gravity"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant11"
		  SID			  "665:17"
		  Position		  [65, 600, 270, 620]
		  BackgroundColor	  "darkGreen"
		  ShowName		  off
		  FontName		  "Arial"
		  Value			  "(veh_cg_height/veh_wheelbase)"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant12"
		  SID			  "665:18"
		  Position		  [25, 528, 110, 552]
		  BackgroundColor	  "darkGreen"
		  ShowName		  off
		  FontName		  "Arial"
		  Value			  "wh_radius"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant13"
		  SID			  "665:19"
		  Position		  [170, 444, 290, 466]
		  BackgroundColor	  "darkGreen"
		  ShowName		  off
		  FontName		  "Arial"
		  Value			  "veh_front_wt_frac"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant14"
		  SID			  "665:20"
		  Position		  [415, 559, 440, 581]
		  BackgroundColor	  "darkGreen"
		  ShowName		  off
		  FontName		  "Arial"
		  Value			  "0"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "665:21"
		  Position		  [150, 46, 435, 64]
		  BackgroundColor	  "darkGreen"
		  ShowName		  off
		  FontName		  "Arial"
		  Value			  "max(wh_slip_force_coeff)*veh_gravity*veh_front_wt_frac"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "665:22"
		  Position		  [450, 241, 545, 259]
		  ShowName		  off
		  Value			  "veh_air_density"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant4"
		  SID			  "665:23"
		  Position		  [450, 272, 545, 288]
		  ShowName		  off
		  Value			  "veh_rr_alpha"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant5"
		  SID			  "665:24"
		  Position		  [450, 307, 545, 323]
		  ShowName		  off
		  Value			  "veh_rr_beta"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant6"
		  SID			  "665:25"
		  Position		  [385, 382, 480, 398]
		  ShowName		  off
		  Value			  "veh_rr_a"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant7"
		  SID			  "665:26"
		  Position		  [385, 412, 480, 428]
		  ShowName		  off
		  Value			  "veh_rr_b"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant8"
		  SID			  "665:27"
		  Position		  [390, 441, 485, 459]
		  ShowName		  off
		  Value			  "veh_rr_c"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant9"
		  SID			  "665:28"
		  Position		  [450, 471, 545, 489]
		  ShowName		  off
		  Value			  "wh_pressure"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Curvature Correction Factor"
		  SID			  "665:29"
		  Position		  [80, 314, 380, 346]
		  Value			  "(veh_roadwheel_radius/(veh_roadwheel_radius+wh_radius))"
		  VectorParams1D	  off
		}
		Block {
		  BlockType		  MinMax
		  Name			  "Error Check"
		  SID			  "665:30"
		  Ports			  [2, 1]
		  Position		  [470, 537, 500, 568]
		  Function		  "max"
		  Inputs		  "2"
		  Port {
		    PortNumber		    1
		    Name		    "Nf"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		  }
		}
		Block {
		  BlockType		  From
		  Name			  "From <veh>"
		  SID			  "665:31"
		  Position		  [110, 562, 185, 578]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "Fr_out"
		}
		Block {
		  BlockType		  From
		  Name			  "From<cyc>"
		  SID			  "665:32"
		  Position		  [40, 94, 100, 116]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "grade"
		}
		Block {
		  BlockType		  From
		  Name			  "From<cyc>1"
		  SID			  "665:33"
		  Position		  [295, 129, 355, 151]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "grade"
		}
		Block {
		  BlockType		  From
		  Name			  "From<cyc>2"
		  SID			  "665:34"
		  Position		  [125, 384, 185, 406]
		  NamePlacement		  "alternate"
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "grade"
		}
		Block {
		  BlockType		  From
		  Name			  "From<wh>"
		  SID			  "665:35"
		  Position		  [12, 420, 108, 450]
		  BlockRotation		  270
		  BlockMirror		  on
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "wh_trq_a"
		}
		Block {
		  BlockType		  Math
		  Name			  "Math\nFunction3"
		  SID			  "665:36"
		  Ports			  [1, 1]
		  Position		  [405, 315, 435, 345]
		  ShowName		  off
		  Operator		  "sqrt"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "665:37"
		  Position		  [255, 245, 295, 265]
		  FontName		  "Arial"
		  X0			  "-0.1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "665:38"
		  Position		  [40, 470, 80, 490]
		  BlockRotation		  270
		  BlockMirror		  on
		  FontName		  "Arial"
		  X0			  "-0.1"
		}
		Block {
		  BlockType		  MinMax
		  Name			  "MinMax"
		  SID			  "665:39"
		  Ports			  [2, 1]
		  Position		  [760, 247, 790, 278]
		  ShowName		  off
		  Inputs		  "2"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "665:40"
		  Ports			  [17, 1]
		  Position		  [655, 59, 670, 631]
		  ShowName		  off
		  Inputs		  "17"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  SID			  "665:41"
		  Ports			  [3, 1]
		  Position		  [315, 423, 335, 447]
		  BackgroundColor	  "darkGreen"
		  NamePlacement		  "alternate"
		  ShowName		  off
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product2"
		  SID			  "665:42"
		  Ports			  [2, 1]
		  Position		  [525, 353, 545, 377]
		  BackgroundColor	  "darkGreen"
		  NamePlacement		  "alternate"
		  ShowName		  off
		}
		Block {
		  BlockType		  Product
		  Name			  "Product3"
		  SID			  "665:43"
		  Ports			  [2, 1]
		  Position		  [530, 388, 550, 412]
		  BackgroundColor	  "darkGreen"
		  NamePlacement		  "alternate"
		  ShowName		  off
		}
		Block {
		  BlockType		  Product
		  Name			  "Product4"
		  SID			  "665:44"
		  Ports			  [2, 1]
		  Position		  [150, 513, 170, 537]
		  BackgroundColor	  "darkGreen"
		  NamePlacement		  "alternate"
		  ShowName		  off
		}
		Block {
		  BlockType		  Product
		  Name			  "Product5"
		  SID			  "665:45"
		  Ports			  [2, 1]
		  Position		  [310, 538, 330, 562]
		  BackgroundColor	  "darkGreen"
		  NamePlacement		  "alternate"
		  ShowName		  off
		}
		Block {
		  BlockType		  Product
		  Name			  "Product6"
		  SID			  "665:46"
		  Ports			  [2, 1]
		  Position		  [365, 588, 385, 612]
		  BackgroundColor	  "darkGreen"
		  NamePlacement		  "alternate"
		  ShowName		  off
		  Port {
		    PortNumber		    1
		    Name		    "W"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		  }
		}
		Block {
		  BlockType		  Product
		  Name			  "Product7"
		  SID			  "665:47"
		  Ports			  [2, 1]
		  Position		  [525, 423, 545, 447]
		  BackgroundColor	  "darkGreen"
		  NamePlacement		  "alternate"
		  ShowName		  off
		}
		Block {
		  BlockType		  Product
		  Name			  "Product9"
		  SID			  "665:48"
		  Ports			  [3, 1]
		  Position		  [515, 53, 535, 87]
		  BackgroundColor	  "darkGreen"
		  NamePlacement		  "alternate"
		  ShowName		  off
		  Inputs		  "3"
		  Port {
		    PortNumber		    1
		    Name		    "Ftract"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		  }
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "665:49"
		  Ports			  [2, 1]
		  Position		  [395, 530, 415, 550]
		  ShowName		  off
		  Inputs		  "+-"
		  Port {
		    PortNumber		    1
		    Name		    "Nf"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		  }
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "665:50"
		  Ports			  [2, 1]
		  Position		  [315, 210, 335, 230]
		  ShowName		  off
		  FontName		  "Arial"
		  Inputs		  "+-"
		  Port {
		    PortNumber		    1
		    Name		    "dt"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		  }
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum4"
		  SID			  "665:51"
		  Ports			  [2, 1]
		  Position		  [220, 530, 240, 550]
		  ShowName		  off
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum5"
		  SID			  "665:52"
		  Ports			  [2, 1]
		  Position		  [570, 565, 590, 585]
		  ShowName		  off
		  Inputs		  "-+"
		  Port {
		    PortNumber		    1
		    Name		    "Nr=W-Nf"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		  }
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trig Fn"
		  SID			  "665:53"
		  Ports			  [1, 1]
		  Position		  [115, 90, 145, 120]
		  Operator		  "atan"
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trig Fn1"
		  SID			  "665:54"
		  Ports			  [1, 1]
		  Position		  [165, 90, 195, 120]
		  Operator		  "cos"
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trig Fn2"
		  SID			  "665:55"
		  Ports			  [1, 1]
		  Position		  [370, 125, 400, 155]
		  ShowName		  off
		  Operator		  "atan"
		  Port {
		    PortNumber		    1
		    Name		    "theta"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		  }
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trig Fn3"
		  SID			  "665:56"
		  Ports			  [1, 1]
		  Position		  [200, 380, 230, 410]
		  ShowName		  off
		  Operator		  "atan"
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trig Fn4"
		  SID			  "665:57"
		  Ports			  [1, 1]
		  Position		  [250, 380, 280, 410]
		  ShowName		  off
		  Operator		  "cos"
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Vf"
		  SID			  "665:58"
		  Position		  [690, 293, 730, 327]
		  Expr			  "-1/2*(-2*u(4)*u(17)-2*u(1)*u(6)+4*u(13)^u(8)*u(6)*(1/2*u(15))^u(9)*u(10)+4*u(13)^u(8)*u(6)*(1/2*u(15))^u"
		  "(9)*u(11)*u(17)+4*u(13)^u(8)*u(6)*(1/2*u(15))^u(9)*u(12)*u(17)^2+4*u(13)^u(8)*u(6)*(1/2*u(16))^u(9)*u(10)+4*u(13)^"
		  "u(8)*u(6)*(1/2*u(16))^u(9)*u(11)*u(17)+4*u(13)^u(8)*u(6)*(1/2*u(16))^u(9)*u(12)*u(17)^2+u(7)*u(3)*u(5)*u(17)^2*u(6"
		  ")+2*u(4)*u(14)*sin(u(2))*u(6))/u(4)"
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)1"
		  SID			  "665:59"
		  Ports			  [0, 1]
		  Position		  [190, 482, 250, 498]
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)2"
		  SID			  "665:60"
		  Ports			  [0, 1]
		  Position		  [375, 82, 435, 98]
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)6"
		  SID			  "665:61"
		  Ports			  [0, 1]
		  Position		  [540, 152, 600, 168]
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Gain
		  Name			  "unit conversion"
		  SID			  "665:62"
		  Position		  [570, 434, 635, 466]
		  Gain			  "3.6*3.6"
		}
		Block {
		  BlockType		  Gain
		  Name			  "unit conversion2"
		  SID			  "665:63"
		  Position		  [585, 407, 630, 433]
		  NamePlacement		  "alternate"
		  Gain			  "3.6"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "665:64"
		  Position		  [810, 255, 830, 275]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Product7"
		  SrcPort		  1
		  Points		  [0, 15]
		  DstBlock		  "unit conversion"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant8"
		  SrcPort		  1
		  Points		  [10, 0; 0, -10]
		  DstBlock		  "Product7"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product3"
		  SrcPort		  1
		  Points		  [5, 0; 0, 20]
		  DstBlock		  "unit conversion2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant7"
		  SrcPort		  1
		  Points		  [15, 0; 0, -15]
		  DstBlock		  "Product3"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product2"
		  SrcPort		  1
		  Points		  [45, 0; 0, 15]
		  DstBlock		  "Mux"
		  DstPort		  10
		}
		Line {
		  SrcBlock		  "Constant6"
		  SrcPort		  1
		  Points		  [10, 0; 0, -20]
		  DstBlock		  "Product2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Math\nFunction3"
		  SrcPort		  1
		  Points		  [35, 0; 0, 30; 30, 0]
		  Branch {
		    Points		    [0, 35]
		    Branch {
		    Points		    [0, 35]
		    DstBlock		    "Product7"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Product3"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "Product2"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Curvature Correction Factor"
		  SrcPort		  1
		  DstBlock		  "Math\nFunction3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "unit conversion"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  12
		}
		Line {
		  SrcBlock		  "unit conversion2"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Mux"
		  DstPort		  11
		}
		Line {
		  Name			  "Nf"
		  Labels		  [0, 0]
		  SrcBlock		  "Error Check"
		  SrcPort		  1
		  Points		  [0, 0; 45, 0]
		  Branch {
		    Points		    [0, 15]
		    DstBlock		    "Sum5"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Mux"
		    DstPort		    15
		  }
		}
		Line {
		  SrcBlock		  "Constant14"
		  SrcPort		  1
		  Points		  [5, 0; 0, -10]
		  DstBlock		  "Error Check"
		  DstPort		  2
		}
		Line {
		  Name			  "Nf"
		  Labels		  [0, 0]
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [15, 0; 0, 5]
		  DstBlock		  "Error Check"
		  DstPort		  1
		}
		Line {
		  Name			  "Nr=W-Nf"
		  Labels		  [0, 0]
		  SrcBlock		  "Sum5"
		  SrcPort		  1
		  Points		  [35, 0; 0, 15]
		  DstBlock		  "Mux"
		  DstPort		  16
		}
		Line {
		  Name			  "W"
		  Labels		  [0, 0]
		  SrcBlock		  "Product6"
		  SrcPort		  1
		  Points		  [150, 0; 0, -20]
		  DstBlock		  "Sum5"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  Points		  [75, 0]
		  DstBlock		  "Product4"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "From<wh>"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "vehicle speed at\nbeginning of time step\n(m/s)"
		  SrcPort		  1
		  Points		  [510, 0; 0, -15]
		  DstBlock		  "Mux"
		  DstPort		  17
		}
		Line {
		  SrcBlock		  "current veh mass (kg)1"
		  SrcPort		  1
		  Points		  [0, 0; 45, 0]
		  Branch {
		    Points		    [35, 0; 0, 115]
		    DstBlock		    "Product6"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Product1"
		    DstPort		    3
		  }
		}
		Line {
		  SrcBlock		  "Constant13"
		  SrcPort		  1
		  Points		  [0, -20]
		  DstBlock		  "Product1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Trig Fn4"
		  SrcPort		  1
		  Points		  [0, 0; 15, 0]
		  Branch {
		    Points		    [50, 0]
		    DstBlock		    "Product6"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Product1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Trig Fn3"
		  SrcPort		  1
		  DstBlock		  "Trig Fn4"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "From<cyc>2"
		  SrcPort		  1
		  DstBlock		  "Trig Fn3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant10"
		  SrcPort		  1
		  Points		  [90, 0]
		  DstBlock		  "Mux"
		  DstPort		  14
		}
		Line {
		  SrcBlock		  "Constant9"
		  SrcPort		  1
		  Points		  [90, 0]
		  DstBlock		  "Mux"
		  DstPort		  13
		}
		Line {
		  SrcBlock		  "Constant5"
		  SrcPort		  1
		  Points		  [90, 0]
		  DstBlock		  "Mux"
		  DstPort		  9
		}
		Line {
		  SrcBlock		  "Constant4"
		  SrcPort		  1
		  Points		  [90, 0]
		  DstBlock		  "Mux"
		  DstPort		  8
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  Points		  [90, 0]
		  DstBlock		  "Mux"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [0, 10]
		  DstBlock		  "Mux"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "current veh mass (kg)6"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "Vf"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Trig Fn1"
		  SrcPort		  1
		  Points		  [150, 0; 0, -35]
		  DstBlock		  "Product9"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "current veh mass (kg)2"
		  SrcPort		  1
		  Points		  [0, -10]
		  DstBlock		  "Product9"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "requested time-step \naverage vehicle speed\n(m/s)\n"
		  SrcPort		  1
		  Points		  [605, 0; 0, 230]
		  DstBlock		  "MinMax"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [60, 0]
		  DstBlock		  "Product9"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Trig Fn"
		  SrcPort		  1
		  DstBlock		  "Trig Fn1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "From<cyc>"
		  SrcPort		  1
		  DstBlock		  "Trig Fn"
		  DstPort		  1
		}
		Line {
		  Name			  "Ftract"
		  Labels		  [0, 0]
		  SrcBlock		  "Product9"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  Name			  "dt"
		  Labels		  [0, 0]
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  Points		  [300, 0]
		  DstBlock		  "Mux"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    Points		    [0, 40]
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From<cyc>1"
		  SrcPort		  1
		  DstBlock		  "Trig Fn2"
		  DstPort		  1
		}
		Line {
		  Name			  "theta"
		  Labels		  [0, 0]
		  SrcBlock		  "Trig Fn2"
		  SrcPort		  1
		  Points		  [100, 0; 0, -35; 135, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  Points		  [30, 0; 0, 100]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "MinMax"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant12"
		  SrcPort		  1
		  Points		  [20, 0]
		  DstBlock		  "Product4"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product4"
		  SrcPort		  1
		  Points		  [15, 0; 0, 10]
		  DstBlock		  "Sum4"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "From <veh>"
		  SrcPort		  1
		  Points		  [10, 0; 0, -25]
		  DstBlock		  "Sum4"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum4"
		  SrcPort		  1
		  Points		  [25, 0; 0, 5]
		  DstBlock		  "Product5"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant11"
		  SrcPort		  1
		  Points		  [10, 0; 0, -55]
		  DstBlock		  "Product5"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product5"
		  SrcPort		  1
		  Points		  [45, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Vf"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "MinMax"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "enforce max. \nfront axle\ntractive force\n due to slip (N)"
	      SID		      "665:65"
	      Ports		      [3, 2]
	      Position		      [255, 62, 285, 178]
	      BackgroundColor	      "darkGreen"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"enforce max. \nfront axle\ntractive force\n due to slip (N)"
		Location		[76, 174, 963, 715]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "tractive force req'd at\ntire/road interface\n(N)"
		  SID			  "665:66"
		  Position		  [70, 385, 90, 405]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "requested time-step\naverage vehicle speed\n(m/s)"
		  SID			  "665:67"
		  Position		  [70, 15, 90, 35]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "speed at beginning\nof time step\n(m/s)"
		  SID			  "665:68"
		  Position		  [65, 85, 85, 105]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  MinMax
		  Name			  " "
		  SID			  "665:69"
		  Ports			  [2, 1]
		  Position		  [620, 372, 650, 403]
		  Inputs		  "2"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "665:70"
		  Ports			  []
		  Position		  [815, 480, 871, 520]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [229, 259, 712, 322]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "665:71"
		    Name		    "No more force will be requested of the drivetrain than can be transmitted by the front tires.\nThis t"
		    "ransmittable force is computed taking into account the slip characteristics of the tires\nand the variable, acce"
		    "leration-dependent weight borne by the front axle."
		    Position		    [242, 12]
		    VerticalAlignment	    "top"
		    }
		  }
		}
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "665:72"
		  Position		  [140, 110, 160, 130]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "665:73"
		  Position		  [415, 13, 610, 37]
		  BlockMirror		  on
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Value			  "veh_cg_height/veh_wheelbase"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "665:74"
		  Position		  [215, 316, 395, 334]
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Value			  "veh_gravity*veh_front_wt_frac"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "665:75"
		  Position		  [605, 274, 740, 296]
		  BlockMirror		  on
		  FontName		  "Arial"
		  Value			  "max(wh_slip_force_coeff)"
		}
		Block {
		  BlockType		  From
		  Name			  "From<cyc>"
		  SID			  "665:76"
		  Position		  [105, 194, 165, 216]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "grade"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  SID			  "665:77"
		  Position		  [620, 422, 645, 448]
		  FontName		  "Arial"
		  Gain			  "-1"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain1"
		  SID			  "665:78"
		  Position		  [355, 82, 380, 108]
		  FontName		  "Arial"
		  Gain			  "2"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain2"
		  SID			  "665:79"
		  Position		  [310, 182, 390, 228]
		  Gain			  "veh_gravity"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "665:80"
		  Position		  [185, 135, 220, 155]
		  FontName		  "Arial"
		  X0			  "-0.1"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "665:81"
		  Ports			  [2, 1]
		  Position		  [300, 86, 320, 104]
		  FontName		  "Arial"
		  Inputs		  "*/"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  SID			  "665:82"
		  Ports			  [3, 1]
		  Position		  [485, 63, 505, 107]
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product2"
		  SID			  "665:83"
		  Ports			  [2, 1]
		  Position		  [585, 340, 605, 360]
		  BlockRotation		  270
		  BlockMirror		  on
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product3"
		  SID			  "665:84"
		  Ports			  [3, 1]
		  Position		  [480, 253, 500, 297]
		  BackgroundColor	  "darkGreen"
		  FontName		  "Arial"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "665:85"
		  Ports			  [2, 1]
		  Position		  [155, 80, 175, 100]
		  FontName		  "Arial"
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "665:86"
		  Ports			  [2, 1]
		  Position		  [240, 115, 260, 135]
		  FontName		  "Arial"
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum2"
		  SID			  "665:87"
		  Ports			  [2, 1]
		  Position		  [415, 87, 445, 118]
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trig Fn"
		  SID			  "665:88"
		  Ports			  [1, 1]
		  Position		  [195, 190, 225, 220]
		  Operator		  "atan"
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trig Fn1"
		  SID			  "665:89"
		  Ports			  [1, 1]
		  Position		  [250, 190, 280, 220]
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trig Fn2"
		  SID			  "665:90"
		  Ports			  [1, 1]
		  Position		  [250, 260, 280, 290]
		  Operator		  "cos"
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)"
		  SID			  "665:91"
		  Ports			  [0, 1]
		  Position		  [310, 147, 370, 163]
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  MinMax
		  Name			  "tractive force request\nlimited by slip-threshhold\nforce (N)1"
		  SID			  "665:92"
		  Ports			  [2, 1]
		  Position		  [700, 412, 730, 443]
		  Function		  "max"
		  Inputs		  "2"
		}
		Block {
		  BlockType		  Sum
		  Name			  "weight on\nfront axle\n(N)"
		  SID			  "665:93"
		  Ports			  [2, 1]
		  Position		  [540, 59, 560, 161]
		  FontName		  "Arial"
		  Inputs		  "-+"
		}
		Block {
		  BlockType		  Outport
		  Name			  "slip-limited force\n(N)"
		  SID			  "665:94"
		  Position		  [820, 420, 840, 440]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Block {
		  BlockType		  Outport
		  Name			  "weight on front axle\n(N)1"
		  SID			  "665:95"
		  Position		  [820, 100, 840, 120]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  DstBlock		  "weight on\nfront axle\n(N)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [0, 45]
		  DstBlock		  "Product1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "weight on\nfront axle\n(N)"
		  SrcPort		  1
		  Points		  [25, 0]
		  Branch {
		    DstBlock		    "Product2"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "weight on front axle\n(N)1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "requested time-step\naverage vehicle speed\n(m/s)"
		  SrcPort		  1
		  Points		  [40, 0; 0, 60]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "speed at beginning\nof time step\n(m/s)"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 25]
		    DstBlock		    "Memory1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  Points		  [15, 0; 0, -25]
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Gain1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "tractive force request\nlimited by slip-threshhold\nforce (N)1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  DstBlock		  "Product2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "tractive force req'd at\ntire/road interface\n(N)"
		  SrcPort		  1
		  DstBlock		  " "
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product2"
		  SrcPort		  1
		  Points		  [0, 15]
		  Branch {
		    DstBlock		    " "
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 55]
		    DstBlock		    "Gain"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  " "
		  SrcPort		  1
		  Points		  [15, 0; 0, 30]
		  DstBlock		  "tractive force request\nlimited by slip-threshhold\nforce (N)1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "tractive force request\nlimited by slip-threshhold\nforce (N)1"
		  SrcPort		  1
		  DstBlock		  "slip-limited force\n(N)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Gain1"
		  SrcPort		  1
		  DstBlock		  "Sum2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum2"
		  SrcPort		  1
		  Points		  [0, -20]
		  DstBlock		  "Product1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From<cyc>"
		  SrcPort		  1
		  DstBlock		  "Trig Fn"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Trig Fn1"
		  SrcPort		  1
		  DstBlock		  "Gain2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Gain2"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Sum2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Trig Fn"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    DstBlock		    "Trig Fn1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 70]
		    DstBlock		    "Trig Fn2"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Product3"
		  SrcPort		  1
		  Points		  [20, 0]
		  DstBlock		  "weight on\nfront axle\n(N)"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [65, 0]
		  DstBlock		  "Product3"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Trig Fn2"
		  SrcPort		  1
		  DstBlock		  "Product3"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "current veh mass (kg)"
		  SrcPort		  1
		  Points		  [90, 0]
		  Branch {
		    DstBlock		    "Product3"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -55]
		    DstBlock		    "Product1"
		    DstPort		    3
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd force\n(N)"
	      SID		      "665:96"
	      Position		      [330, 60, 350, 80]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd speed\n(m/s)"
	      SID		      "665:97"
	      Position		      [330, 15, 350, 35]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nfront axle\n(N)"
	      SID		      "665:98"
	      Position		      [330, 120, 350, 140]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "apply tire traction\nlimit to req'd speed\n(m/s)"
	      SrcPort		      1
	      Points		      [0, -5; 20, 0]
	      Branch {
		DstBlock		"enforce max. \nfront axle\ntractive force\n due to slip (N)"
		DstPort			2
	      }
	      Branch {
		Points			[0, -95]
		DstBlock		"req'd speed\n(m/s)"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "total tractive\nforce req'd\n(N)"
	      SrcPort		      1
	      DstBlock		      "enforce max. \nfront axle\ntractive force\n due to slip (N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "enforce max. \nfront axle\ntractive force\n due to slip (N)"
	      SrcPort		      1
	      Points		      [0, -20]
	      DstBlock		      "req'd force\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "enforce max. \nfront axle\ntractive force\n due to slip (N)"
	      SrcPort		      2
	      Points		      [0, -20]
	      DstBlock		      "weight on\nfront axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		Points			[115, 0; 0, -30]
		DstBlock		"enforce max. \nfront axle\ntractive force\n due to slip (N)"
		DstPort			3
	      }
	      Branch {
		Points			[0, -55]
		DstBlock		"apply tire traction\nlimit to req'd speed\n(m/s)"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "time-average\nvehicle speed\n req'd (m/s)"
	      SrcPort		      1
	      Points		      [50, 0]
	      DstBlock		      "apply tire traction\nlimit to req'd speed\n(m/s)"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "traction control J2452 2 axle"
	  SID			  "666"
	  Ports			  [3, 5]
	  Position		  [755, 144, 790, 246]
	  ForegroundColor	  "lightBlue"
	  BackgroundColor	  "darkGreen"
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "traction control J2452 2 axle"
	    Location		    [31, 184, 578, 463]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "time-average\nvehicle speed\n req'd (m/s)"
	      SID		      "841"
	      Position		      [45, 95, 65, 115]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SID		      "842"
	      Position		      [50, 180, 70, 200]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "total tractive\nforce req'd\n(N)"
	      SID		      "843"
	      Position		      [45, 70, 65, 90]
	      NamePlacement	      "alternate"
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "844"
	      Ports		      []
	      Position		      [400, 215, 456, 255]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[229, 259, 504, 317]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "845"
		  Name			  "Requested speed and force are limited by the\ntractive characteristics of the tires in this block."
		  Position		  [137, 12]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "apply tire traction\nlimit to req'd speed\n(m/s)"
	      SID		      "846"
	      Ports		      [2, 1]
	      Position		      [135, 97, 165, 148]
	      BackgroundColor	      "darkGreen"
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"apply tire traction\nlimit to req'd speed\n(m/s)"
		Location		[2, 74, 998, 742]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "requested time-step \naverage vehicle speed\n(m/s)\n"
		  SID			  "847"
		  Position		  [65, 15, 85, 35]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "vehicle speed at\nbeginning of time step\n(m/s)"
		  SID			  "848"
		  Position		  [60, 630, 80, 650]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  SID			  "849"
		  Ports			  []
		  Position		  [765, 670, 821, 710]
		  BackgroundColor	  "green"
		  ShowName		  off
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskPortRotate	  "default"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [135, 290, 822, 501]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Annotation {
		    SID			    "852"
		    Name		    "This block limits the requested speed by the maximum and minimum attainable given the maximum tractio"
		    "n of the tires.\nThat is, acceleration and braking maneuvers are limited to the point of imminent skidding."
		    Position		    [347, 22]
		    VerticalAlignment	    "top"
		    }
		    Annotation {
		    SID			    "851"
		    Name		    "The above equations are derived by solving F_maxaccel=mass*a_max for the maximum or minimum speed at "
		    "the end of the time step,\ngiven that F_maxaccel depends on the weight borne by the front tires which in turn de"
		    "pends on the vehicle's acceleration rate."
		    Position		    [337, 57]
		    VerticalAlignment	    "top"
		    }
		    Annotation {
		    SID			    "850"
		    Name		    "Front-wheel drive is assumed, and weight transfer due to acceleration is included in the calculation "
		    "of maximum tractive force.\n\nSAE J2452 rolling resistance model is included.\n\nRolling resistance coefficients"
		    " veh_rr_a and veh_rr_b have units of N/km/h and N/(km/h)^2 respectively.\nEach is converted to N/m/s and N/(m/s)"
		    "^2 with the gain blocks before it is input into the final traction equation.\n\nVeh_rr_a, veh_rr_b, and veh_rr_c"
		    " must always be adjusted for roadwheel curvature before use."
		    Position		    [337, 92]
		    VerticalAlignment	    "top"
		    }
		  }
		}
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "853"
		  Position		  [210, 205, 230, 225]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "854"
		  Position		  [540, 122, 600, 138]
		  ShowName		  off
		  Value			  "veh_CD"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "855"
		  Position		  [540, 186, 600, 204]
		  ShowName		  off
		  Value			  "veh_FA"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant10"
		  SID			  "856"
		  Position		  [450, 502, 545, 518]
		  ShowName		  off
		  Value			  "veh_gravity"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant11"
		  SID			  "857"
		  Position		  [65, 600, 270, 620]
		  BackgroundColor	  "darkGreen"
		  ShowName		  off
		  FontName		  "Arial"
		  Value			  "(veh_cg_height/veh_wheelbase)"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant12"
		  SID			  "858"
		  Position		  [25, 528, 110, 552]
		  BackgroundColor	  "darkGreen"
		  ShowName		  off
		  FontName		  "Arial"
		  Value			  "wh_radius"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant13"
		  SID			  "859"
		  Position		  [170, 444, 290, 466]
		  BackgroundColor	  "darkGreen"
		  ShowName		  off
		  FontName		  "Arial"
		  Value			  "veh_front_wt_frac"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant14"
		  SID			  "860"
		  Position		  [415, 559, 440, 581]
		  BackgroundColor	  "darkGreen"
		  ShowName		  off
		  FontName		  "Arial"
		  Value			  "0"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  SID			  "861"
		  Position		  [150, 46, 435, 64]
		  BackgroundColor	  "darkGreen"
		  ShowName		  off
		  FontName		  "Arial"
		  Value			  "max(wh_slip_force_coeff)*veh_gravity*veh_front_wt_frac"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "862"
		  Position		  [450, 241, 545, 259]
		  ShowName		  off
		  Value			  "veh_air_density"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant4"
		  SID			  "863"
		  Position		  [450, 272, 545, 288]
		  ShowName		  off
		  Value			  "veh_rr_alpha"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant5"
		  SID			  "864"
		  Position		  [450, 307, 545, 323]
		  ShowName		  off
		  Value			  "veh_rr_beta"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant6"
		  SID			  "865"
		  Position		  [385, 382, 480, 398]
		  ShowName		  off
		  Value			  "veh_rr_a"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant7"
		  SID			  "866"
		  Position		  [385, 412, 480, 428]
		  ShowName		  off
		  Value			  "veh_rr_b"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant8"
		  SID			  "867"
		  Position		  [390, 441, 485, 459]
		  ShowName		  off
		  Value			  "veh_rr_c"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant9"
		  SID			  "868"
		  Position		  [450, 471, 545, 489]
		  ShowName		  off
		  Value			  "wh_pressure"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Curvature Correction Factor"
		  SID			  "869"
		  Position		  [80, 314, 380, 346]
		  Value			  "(veh_roadwheel_radius/(veh_roadwheel_radius+wh_radius))"
		  VectorParams1D	  off
		}
		Block {
		  BlockType		  MinMax
		  Name			  "Error Check"
		  SID			  "870"
		  Ports			  [2, 1]
		  Position		  [470, 537, 500, 568]
		  Function		  "max"
		  Inputs		  "2"
		  Port {
		    PortNumber		    1
		    Name		    "Nf"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		  }
		}
		Block {
		  BlockType		  From
		  Name			  "From <veh>"
		  SID			  "871"
		  Position		  [110, 562, 185, 578]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "Fr_out"
		}
		Block {
		  BlockType		  From
		  Name			  "From<cyc>"
		  SID			  "872"
		  Position		  [150, 84, 210, 106]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "grade"
		}
		Block {
		  BlockType		  From
		  Name			  "From<cyc>1"
		  SID			  "873"
		  Position		  [295, 129, 355, 151]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "grade"
		}
		Block {
		  BlockType		  From
		  Name			  "From<cyc>2"
		  SID			  "874"
		  Position		  [125, 384, 185, 406]
		  NamePlacement		  "alternate"
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "grade"
		}
		Block {
		  BlockType		  From
		  Name			  "From<wh>"
		  SID			  "875"
		  Position		  [12, 420, 108, 450]
		  BlockRotation		  270
		  BlockMirror		  on
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "wh_trq_a"
		}
		Block {
		  BlockType		  Math
		  Name			  "Math\nFunction3"
		  SID			  "876"
		  Ports			  [1, 1]
		  Position		  [405, 315, 435, 345]
		  ShowName		  off
		  Operator		  "sqrt"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "877"
		  Position		  [255, 245, 295, 265]
		  FontName		  "Arial"
		  X0			  "-0.1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "878"
		  Position		  [40, 470, 80, 490]
		  BlockRotation		  270
		  BlockMirror		  on
		  FontName		  "Arial"
		  X0			  "-0.1"
		}
		Block {
		  BlockType		  MinMax
		  Name			  "MinMax"
		  SID			  "879"
		  Ports			  [2, 1]
		  Position		  [760, 247, 790, 278]
		  ShowName		  off
		  Inputs		  "2"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  SID			  "880"
		  Ports			  [20, 1]
		  Position		  [655, 42, 675, 743]
		  ShowName		  off
		  Inputs		  "20"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  SID			  "881"
		  Ports			  [3, 1]
		  Position		  [315, 423, 335, 447]
		  BackgroundColor	  "darkGreen"
		  NamePlacement		  "alternate"
		  ShowName		  off
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product2"
		  SID			  "882"
		  Ports			  [2, 1]
		  Position		  [525, 353, 545, 377]
		  BackgroundColor	  "darkGreen"
		  NamePlacement		  "alternate"
		  ShowName		  off
		}
		Block {
		  BlockType		  Product
		  Name			  "Product3"
		  SID			  "883"
		  Ports			  [2, 1]
		  Position		  [530, 388, 550, 412]
		  BackgroundColor	  "darkGreen"
		  NamePlacement		  "alternate"
		  ShowName		  off
		}
		Block {
		  BlockType		  Product
		  Name			  "Product4"
		  SID			  "884"
		  Ports			  [2, 1]
		  Position		  [150, 513, 170, 537]
		  BackgroundColor	  "darkGreen"
		  NamePlacement		  "alternate"
		  ShowName		  off
		}
		Block {
		  BlockType		  Product
		  Name			  "Product5"
		  SID			  "885"
		  Ports			  [2, 1]
		  Position		  [310, 538, 330, 562]
		  BackgroundColor	  "darkGreen"
		  NamePlacement		  "alternate"
		  ShowName		  off
		}
		Block {
		  BlockType		  Product
		  Name			  "Product6"
		  SID			  "886"
		  Ports			  [2, 1]
		  Position		  [365, 588, 385, 612]
		  BackgroundColor	  "darkGreen"
		  NamePlacement		  "alternate"
		  ShowName		  off
		  Port {
		    PortNumber		    1
		    Name		    "W"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		  }
		}
		Block {
		  BlockType		  Product
		  Name			  "Product7"
		  SID			  "887"
		  Ports			  [2, 1]
		  Position		  [525, 423, 545, 447]
		  BackgroundColor	  "darkGreen"
		  NamePlacement		  "alternate"
		  ShowName		  off
		}
		Block {
		  BlockType		  Product
		  Name			  "Product9"
		  SID			  "888"
		  Ports			  [3, 1]
		  Position		  [515, 53, 535, 87]
		  BackgroundColor	  "darkGreen"
		  NamePlacement		  "alternate"
		  ShowName		  off
		  Inputs		  "3"
		  Port {
		    PortNumber		    1
		    Name		    "Ftract"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Subsystem"
		  SID			  "889"
		  Ports			  [0, 2]
		  Position		  [445, 700, 485, 760]
		  ForegroundColor	  "lightBlue"
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "Subsystem"
		    Location		    [111, 265, 794, 557]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Constant
		    Name		    "Constant16"
		    SID			    "890"
		    Position		    [80, 245, 285, 265]
		    ForegroundColor	    "lightBlue"
		    BackgroundColor	    "darkGreen"
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    "(-1*veh_cg_height/veh_wheelbase)"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant17"
		    SID			    "891"
		    Position		    [40, 173, 125, 197]
		    BackgroundColor	    "darkGreen"
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    "wh_radius"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant18"
		    SID			    "892"
		    Position		    [185, 89, 305, 111]
		    ForegroundColor	    "lightBlue"
		    BackgroundColor	    "darkGreen"
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    "(1-veh_front_wt_frac)"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant19"
		    SID			    "893"
		    Position		    [430, 204, 455, 226]
		    BackgroundColor	    "darkGreen"
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    "0"
		    }
		    Block {
		    BlockType		    MinMax
		    Name		    "Error Check1"
		    SID			    "894"
		    Ports		    [2, 1]
		    Position		    [485, 182, 515, 213]
		    Function		    "max"
		    Inputs		    "2"
		    Port {
		    PortNumber		    1
		    Name		    "Nf"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    }
		    }
		    Block {
		    BlockType		    From
		    Name		    "From <veh>1"
		    SID			    "895"
		    Position		    [125, 207, 200, 223]
		    CloseFcn		    "tagdialog Close"
		    GotoTag		    "Fr_out"
		    }
		    Block {
		    BlockType		    From
		    Name		    "From<cyc>4"
		    SID			    "896"
		    Position		    [140, 29, 200, 51]
		    NamePlacement	    "alternate"
		    CloseFcn		    "tagdialog Close"
		    GotoTag		    "grade"
		    }
		    Block {
		    BlockType		    From
		    Name		    "From<wh>1"
		    SID			    "897"
		    Position		    [27, 65, 123, 95]
		    BlockRotation	    270
		    BlockMirror		    on
		    CloseFcn		    "tagdialog Close"
		    GotoTag		    "wh_trq_a"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory2"
		    SID			    "898"
		    Position		    [55, 115, 95, 135]
		    BlockRotation	    270
		    BlockMirror		    on
		    FontName		    "Arial"
		    X0			    "-0.1"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product10"
		    SID			    "899"
		    Ports		    [3, 1]
		    Position		    [330, 68, 350, 92]
		    BackgroundColor	    "darkGreen"
		    NamePlacement	    "alternate"
		    ShowName		    off
		    Inputs		    "3"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product11"
		    SID			    "900"
		    Ports		    [2, 1]
		    Position		    [165, 158, 185, 182]
		    BackgroundColor	    "darkGreen"
		    NamePlacement	    "alternate"
		    ShowName		    off
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product12"
		    SID			    "901"
		    Ports		    [2, 1]
		    Position		    [325, 183, 345, 207]
		    BackgroundColor	    "darkGreen"
		    NamePlacement	    "alternate"
		    ShowName		    off
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product13"
		    SID			    "902"
		    Ports		    [2, 1]
		    Position		    [380, 233, 400, 257]
		    BackgroundColor	    "darkGreen"
		    NamePlacement	    "alternate"
		    ShowName		    off
		    Port {
		    PortNumber		    1
		    Name		    "W"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    }
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum2"
		    SID			    "903"
		    Ports		    [2, 1]
		    Position		    [410, 175, 430, 195]
		    ShowName		    off
		    Inputs		    "+-"
		    Port {
		    PortNumber		    1
		    Name		    "Nf"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    }
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum3"
		    SID			    "904"
		    Ports		    [2, 1]
		    Position		    [235, 175, 255, 195]
		    ShowName		    off
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum6"
		    SID			    "905"
		    Ports		    [2, 1]
		    Position		    [585, 210, 605, 230]
		    ShowName		    off
		    Inputs		    "-+"
		    Port {
		    PortNumber		    1
		    Name		    "Nr=W-Nf"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    }
		    }
		    Block {
		    BlockType		    Trigonometry
		    Name		    "Trig Fn7"
		    SID			    "906"
		    Ports		    [1, 1]
		    Position		    [215, 25, 245, 55]
		    ShowName		    off
		    Operator		    "atan"
		    }
		    Block {
		    BlockType		    Trigonometry
		    Name		    "Trig Fn8"
		    SID			    "907"
		    Ports		    [1, 1]
		    Position		    [265, 25, 295, 55]
		    ShowName		    off
		    Operator		    "cos"
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "current veh mass (kg)4"
		    SID			    "908"
		    Ports		    [0, 1]
		    Position		    [205, 127, 265, 143]
		    BackgroundColor	    "darkGreen"
		    SourceBlock		    "lib_controls/SubSystem/current veh mass (kg)"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "off"
		    TreatAsAtomicUnit	    "off"
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "909"
		    Position		    [585, 193, 615, 207]
		    IconDisplay		    "Port number"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out2"
		    SID			    "910"
		    Position		    [630, 213, 660, 227]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    }
		    Line {
		    Name		    "Nf"
		    Labels		    [0, 0]
		    SrcBlock		    "Error Check1"
		    SrcPort		    1
		    Points		    [0, 0; 45, 0]
		    Branch {
		    Points		    [0, 15]
		    DstBlock		    "Sum6"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Constant19"
		    SrcPort		    1
		    Points		    [5, 0; 0, -10]
		    DstBlock		    "Error Check1"
		    DstPort		    2
		    }
		    Line {
		    Name		    "Nf"
		    Labels		    [0, 0]
		    SrcBlock		    "Sum2"
		    SrcPort		    1
		    Points		    [15, 0; 0, 5]
		    DstBlock		    "Error Check1"
		    DstPort		    1
		    }
		    Line {
		    Name		    "W"
		    Labels		    [0, 0]
		    SrcBlock		    "Product13"
		    SrcPort		    1
		    Points		    [150, 0; 0, -20]
		    DstBlock		    "Sum6"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Memory2"
		    SrcPort		    1
		    Points		    [75, 0]
		    DstBlock		    "Product11"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "From<wh>1"
		    SrcPort		    1
		    DstBlock		    "Memory2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "current veh mass (kg)4"
		    SrcPort		    1
		    Points		    [0, 0; 45, 0]
		    Branch {
		    Points		    [35, 0; 0, 115]
		    DstBlock		    "Product13"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Product10"
		    DstPort		    3
		    }
		    }
		    Line {
		    SrcBlock		    "Constant18"
		    SrcPort		    1
		    Points		    [0, -20]
		    DstBlock		    "Product10"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Trig Fn8"
		    SrcPort		    1
		    Points		    [0, 0; 15, 0]
		    Branch {
		    Points		    [50, 0]
		    DstBlock		    "Product13"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Product10"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Trig Fn7"
		    SrcPort		    1
		    DstBlock		    "Trig Fn8"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "From<cyc>4"
		    SrcPort		    1
		    DstBlock		    "Trig Fn7"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product10"
		    SrcPort		    1
		    Points		    [30, 0; 0, 100]
		    DstBlock		    "Sum2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant17"
		    SrcPort		    1
		    Points		    [20, 0]
		    DstBlock		    "Product11"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Product11"
		    SrcPort		    1
		    Points		    [15, 0; 0, 10]
		    DstBlock		    "Sum3"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "From <veh>1"
		    SrcPort		    1
		    Points		    [10, 0; 0, -25]
		    DstBlock		    "Sum3"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum3"
		    SrcPort		    1
		    Points		    [25, 0; 0, 5]
		    DstBlock		    "Product12"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant16"
		    SrcPort		    1
		    Points		    [10, 0; 0, -55]
		    DstBlock		    "Product12"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Product12"
		    SrcPort		    1
		    Points		    [45, 0]
		    DstBlock		    "Sum2"
		    DstPort		    2
		    }
		    Line {
		    Name		    "Nr=W-Nf"
		    Labels		    [0, 0]
		    SrcBlock		    "Sum6"
		    SrcPort		    1
		    DstBlock		    "Out2"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Subsystem1"
		  SID			  "911"
		  Ports			  [0, 1]
		  Position		  [385, 650, 425, 710]
		  ForegroundColor	  "lightBlue"
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "Subsystem1"
		    Location		    [112, 574, 602, 690]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Constant
		    Name		    "Constant15"
		    SID			    "912"
		    Position		    [25, 26, 310, 44]
		    ForegroundColor	    "lightBlue"
		    BackgroundColor	    "darkGreen"
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    "max(wh_slip_force_coeff)*veh_gravity*(1-veh_front_wt_frac)"
		    }
		    Block {
		    BlockType		    From
		    Name		    "From<cyc>3"
		    SID			    "913"
		    Position		    [25, 64, 85, 86]
		    CloseFcn		    "tagdialog Close"
		    GotoTag		    "grade"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product8"
		    SID			    "914"
		    Ports		    [3, 1]
		    Position		    [390, 33, 410, 67]
		    BackgroundColor	    "darkGreen"
		    NamePlacement	    "alternate"
		    ShowName		    off
		    Inputs		    "3"
		    Port {
		    PortNumber		    1
		    Name		    "Ftract"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    }
		    }
		    Block {
		    BlockType		    Trigonometry
		    Name		    "Trig Fn5"
		    SID			    "915"
		    Ports		    [1, 1]
		    Position		    [100, 60, 130, 90]
		    Operator		    "atan"
		    }
		    Block {
		    BlockType		    Trigonometry
		    Name		    "Trig Fn6"
		    SID			    "916"
		    Ports		    [1, 1]
		    Position		    [150, 60, 180, 90]
		    Operator		    "cos"
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "current veh mass (kg)3"
		    SID			    "917"
		    Ports		    [0, 1]
		    Position		    [250, 62, 310, 78]
		    BackgroundColor	    "darkGreen"
		    SourceBlock		    "lib_controls/SubSystem/current veh mass (kg)"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "off"
		    TreatAsAtomicUnit	    "off"
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    SID			    "918"
		    Position		    [435, 43, 465, 57]
		    IconDisplay		    "Port number"
		    }
		    Line {
		    SrcBlock		    "Trig Fn6"
		    SrcPort		    1
		    Points		    [30, 0; 0, -25]
		    DstBlock		    "Product8"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "current veh mass (kg)3"
		    SrcPort		    1
		    Points		    [0, -10]
		    DstBlock		    "Product8"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Constant15"
		    SrcPort		    1
		    Points		    [60, 0]
		    DstBlock		    "Product8"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Trig Fn5"
		    SrcPort		    1
		    DstBlock		    "Trig Fn6"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "From<cyc>3"
		    SrcPort		    1
		    DstBlock		    "Trig Fn5"
		    DstPort		    1
		    }
		    Line {
		    Name		    "Ftract"
		    Labels		    [0, 0]
		    SrcBlock		    "Product8"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "919"
		  Ports			  [2, 1]
		  Position		  [395, 530, 415, 550]
		  ShowName		  off
		  Inputs		  "+-"
		  Port {
		    PortNumber		    1
		    Name		    "Nf"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		  }
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "920"
		  Ports			  [2, 1]
		  Position		  [315, 210, 335, 230]
		  ShowName		  off
		  FontName		  "Arial"
		  Inputs		  "+-"
		  Port {
		    PortNumber		    1
		    Name		    "dt"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		  }
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum4"
		  SID			  "921"
		  Ports			  [2, 1]
		  Position		  [220, 530, 240, 550]
		  ShowName		  off
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum5"
		  SID			  "922"
		  Ports			  [2, 1]
		  Position		  [540, 565, 560, 585]
		  ShowName		  off
		  Inputs		  "-+"
		  Port {
		    PortNumber		    1
		    Name		    "Nr=W-Nf"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		  }
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trig Fn"
		  SID			  "923"
		  Ports			  [1, 1]
		  Position		  [225, 80, 255, 110]
		  Operator		  "atan"
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trig Fn1"
		  SID			  "924"
		  Ports			  [1, 1]
		  Position		  [275, 80, 305, 110]
		  Operator		  "cos"
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trig Fn2"
		  SID			  "925"
		  Ports			  [1, 1]
		  Position		  [370, 125, 400, 155]
		  ShowName		  off
		  Operator		  "atan"
		  Port {
		    PortNumber		    1
		    Name		    "theta"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		  }
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trig Fn3"
		  SID			  "926"
		  Ports			  [1, 1]
		  Position		  [200, 380, 230, 410]
		  ShowName		  off
		  Operator		  "atan"
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trig Fn4"
		  SID			  "927"
		  Ports			  [1, 1]
		  Position		  [250, 380, 280, 410]
		  ShowName		  off
		  Operator		  "cos"
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Vf"
		  SID			  "928"
		  Position		  [695, 303, 735, 337]
		  ForegroundColor	  "lightBlue"
		  Expr			  "-1/2*(-2*u(4)*u(17)-2*u(1)*u(6)-2*u(18)*u(6)+4*u(13)^u(8)*u(6)*(1/2*u(15))^u(9)*u(10)+4*u(13)^u(8)*u(6)*"
		  "(1/2*u(19))^u(9)*u(10)+4*u(13)^u(8)*u(6)*(1/2*u(15))^u(9)*u(11)*u(17)+4*u(13)^u(8)*u(6)*(1/2*u(19))^u(9)*u(11)*u(1"
		  "7)+4*u(13)^u(8)*u(6)*(1/2*u(15))^u(9)*u(12)*u(17)^2+4*u(13)^u(8)*u(6)*(1/2*u(19))^u(9)*u(12)*u(17)^2+4*u(13)^u(8)*"
		  "u(6)*(1/2*u(16))^u(9)*u(10)+4*u(13)^u(8)*u(6)*(1/2*u(20))^u(9)*u(10)+4*u(13)^u(8)*u(6)*(1/2*u(16))^u(9)*u(11)*u(17"
		  ")+4*u(13)^u(8)*u(6)*(1/2*u(20))^u(9)*u(11)*u(17)+4*u(13)^u(8)*u(6)*(1/2*u(16))^u(9)*u(12)*u(17)^2+4*u(13)^u(8)*u(6"
		  ")*(1/2*u(20))^u(9)*u(12)*u(17)^2+u(7)*u(3)*u(5)*u(17)^2*u(6)+2*u(4)*u(14)*sin(u(2))*u(6))/u(4)"
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)1"
		  SID			  "929"
		  Ports			  [0, 1]
		  Position		  [190, 482, 250, 498]
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)2"
		  SID			  "930"
		  Ports			  [0, 1]
		  Position		  [375, 82, 435, 98]
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Reference
		  Name			  "current veh mass (kg)6"
		  SID			  "931"
		  Ports			  [0, 1]
		  Position		  [540, 152, 600, 168]
		  BackgroundColor	  "darkGreen"
		  SourceBlock		  "lib_controls/SubSystem/current veh mass (kg)"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "off"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Gain
		  Name			  "front \nactive?"
		  SID			  "932"
		  Position		  [580, 525, 610, 555]
		  ForegroundColor	  "lightBlue"
		  Gain			  "wh_front_active_bool"
		}
		Block {
		  BlockType		  Gain
		  Name			  "front \nactive?1"
		  SID			  "933"
		  Position		  [585, 55, 615, 85]
		  ForegroundColor	  "lightBlue"
		  Gain			  "wh_front_active_bool"
		}
		Block {
		  BlockType		  Gain
		  Name			  "front \nactive?2"
		  SID			  "934"
		  Position		  [605, 570, 635, 600]
		  ForegroundColor	  "lightBlue"
		  Gain			  "wh_front_active_bool"
		}
		Block {
		  BlockType		  Gain
		  Name			  "rear\nactive?"
		  SID			  "935"
		  Position		  [505, 665, 535, 695]
		  ForegroundColor	  "lightBlue"
		  Gain			  "wh_rear_active_bool"
		}
		Block {
		  BlockType		  Gain
		  Name			  "rear\nactive?1"
		  SID			  "936"
		  Position		  [550, 700, 580, 730]
		  ForegroundColor	  "lightBlue"
		  Gain			  "wh_rear_active_bool"
		}
		Block {
		  BlockType		  Gain
		  Name			  "rear\nactive?2"
		  SID			  "937"
		  Position		  [590, 730, 620, 760]
		  ForegroundColor	  "lightBlue"
		  Gain			  "wh_rear_active_bool"
		}
		Block {
		  BlockType		  Gain
		  Name			  "unit conversion"
		  SID			  "938"
		  Position		  [570, 434, 635, 466]
		  Gain			  "3.6*3.6"
		}
		Block {
		  BlockType		  Gain
		  Name			  "unit conversion2"
		  SID			  "939"
		  Position		  [585, 407, 630, 433]
		  NamePlacement		  "alternate"
		  Gain			  "3.6"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "940"
		  Position		  [810, 255, 830, 275]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Product7"
		  SrcPort		  1
		  Points		  [0, 15]
		  DstBlock		  "unit conversion"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant8"
		  SrcPort		  1
		  Points		  [10, 0; 0, -10]
		  DstBlock		  "Product7"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product3"
		  SrcPort		  1
		  Points		  [5, 0; 0, 20]
		  DstBlock		  "unit conversion2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant7"
		  SrcPort		  1
		  Points		  [15, 0; 0, -15]
		  DstBlock		  "Product3"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product2"
		  SrcPort		  1
		  Points		  [45, 0; 0, 10]
		  DstBlock		  "Mux"
		  DstPort		  10
		}
		Line {
		  SrcBlock		  "Constant6"
		  SrcPort		  1
		  Points		  [10, 0; 0, -20]
		  DstBlock		  "Product2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Math\nFunction3"
		  SrcPort		  1
		  Points		  [35, 0; 0, 30; 30, 0]
		  Branch {
		    Points		    [0, 35]
		    Branch {
		    Points		    [0, 35]
		    DstBlock		    "Product7"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Product3"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "Product2"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Curvature Correction Factor"
		  SrcPort		  1
		  DstBlock		  "Math\nFunction3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "unit conversion"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  12
		}
		Line {
		  SrcBlock		  "unit conversion2"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Mux"
		  DstPort		  11
		}
		Line {
		  Name			  "Nf"
		  Labels		  [0, 0]
		  SrcBlock		  "Error Check"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    DstBlock		    "Sum5"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [40, 0]
		    DstBlock		    "front \nactive?"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant14"
		  SrcPort		  1
		  Points		  [5, 0; 0, -10]
		  DstBlock		  "Error Check"
		  DstPort		  2
		}
		Line {
		  Name			  "Nf"
		  Labels		  [0, 0]
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [15, 0; 0, 5]
		  DstBlock		  "Error Check"
		  DstPort		  1
		}
		Line {
		  Name			  "Nr=W-Nf"
		  Labels		  [0, 0]
		  SrcBlock		  "Sum5"
		  SrcPort		  1
		  Points		  [0, 10]
		  DstBlock		  "front \nactive?2"
		  DstPort		  1
		}
		Line {
		  Name			  "W"
		  Labels		  [0, 0]
		  SrcBlock		  "Product6"
		  SrcPort		  1
		  Points		  [135, 0]
		  DstBlock		  "Sum5"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  Points		  [75, 0]
		  DstBlock		  "Product4"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "From<wh>"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "vehicle speed at\nbeginning of time step\n(m/s)"
		  SrcPort		  1
		  Points		  [555, 0]
		  DstBlock		  "Mux"
		  DstPort		  17
		}
		Line {
		  SrcBlock		  "current veh mass (kg)1"
		  SrcPort		  1
		  Points		  [0, 0; 45, 0]
		  Branch {
		    Points		    [35, 0; 0, 115]
		    DstBlock		    "Product6"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Product1"
		    DstPort		    3
		  }
		}
		Line {
		  SrcBlock		  "Constant13"
		  SrcPort		  1
		  Points		  [0, -20]
		  DstBlock		  "Product1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Trig Fn4"
		  SrcPort		  1
		  Points		  [0, 0; 15, 0]
		  Branch {
		    Points		    [50, 0]
		    DstBlock		    "Product6"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Product1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Trig Fn3"
		  SrcPort		  1
		  DstBlock		  "Trig Fn4"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "From<cyc>2"
		  SrcPort		  1
		  DstBlock		  "Trig Fn3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant10"
		  SrcPort		  1
		  Points		  [90, 0]
		  DstBlock		  "Mux"
		  DstPort		  14
		}
		Line {
		  SrcBlock		  "Constant9"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  13
		}
		Line {
		  SrcBlock		  "Constant5"
		  SrcPort		  1
		  Points		  [90, 0]
		  DstBlock		  "Mux"
		  DstPort		  9
		}
		Line {
		  SrcBlock		  "Constant4"
		  SrcPort		  1
		  Points		  [90, 0]
		  DstBlock		  "Mux"
		  DstPort		  8
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  Points		  [90, 0]
		  DstBlock		  "Mux"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [0, 5]
		  DstBlock		  "Mux"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "current veh mass (kg)6"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "Vf"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Trig Fn1"
		  SrcPort		  1
		  Points		  [30, 0; 0, -25]
		  DstBlock		  "Product9"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "current veh mass (kg)2"
		  SrcPort		  1
		  Points		  [0, -10]
		  DstBlock		  "Product9"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "requested time-step \naverage vehicle speed\n(m/s)\n"
		  SrcPort		  1
		  Points		  [605, 0; 0, 230]
		  DstBlock		  "MinMax"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [60, 0]
		  DstBlock		  "Product9"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Trig Fn"
		  SrcPort		  1
		  DstBlock		  "Trig Fn1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "From<cyc>"
		  SrcPort		  1
		  DstBlock		  "Trig Fn"
		  DstPort		  1
		}
		Line {
		  Name			  "Ftract"
		  Labels		  [0, 0]
		  SrcBlock		  "Product9"
		  SrcPort		  1
		  DstBlock		  "front \nactive?1"
		  DstPort		  1
		}
		Line {
		  Name			  "dt"
		  Labels		  [0, 0]
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  Points		  [300, 0]
		  DstBlock		  "Mux"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    Points		    [0, 40]
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From<cyc>1"
		  SrcPort		  1
		  DstBlock		  "Trig Fn2"
		  DstPort		  1
		}
		Line {
		  Name			  "theta"
		  Labels		  [0, 0]
		  SrcBlock		  "Trig Fn2"
		  SrcPort		  1
		  Points		  [100, 0; 0, -45]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  Points		  [30, 0; 0, 100]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "MinMax"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant12"
		  SrcPort		  1
		  Points		  [20, 0]
		  DstBlock		  "Product4"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product4"
		  SrcPort		  1
		  Points		  [15, 0; 0, 10]
		  DstBlock		  "Sum4"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "From <veh>"
		  SrcPort		  1
		  Points		  [10, 0; 0, -25]
		  DstBlock		  "Sum4"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum4"
		  SrcPort		  1
		  Points		  [25, 0; 0, 5]
		  DstBlock		  "Product5"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant11"
		  SrcPort		  1
		  Points		  [10, 0; 0, -55]
		  DstBlock		  "Product5"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product5"
		  SrcPort		  1
		  Points		  [45, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Vf"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "MinMax"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Subsystem1"
		  SrcPort		  1
		  DstBlock		  "rear\nactive?"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Subsystem"
		  SrcPort		  1
		  DstBlock		  "rear\nactive?1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Subsystem"
		  SrcPort		  2
		  DstBlock		  "rear\nactive?2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "front \nactive?1"
		  SrcPort		  1
		  Points		  [20, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "front \nactive?"
		  SrcPort		  1
		  Points		  [25, 0]
		  DstBlock		  "Mux"
		  DstPort		  15
		}
		Line {
		  SrcBlock		  "front \nactive?2"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  16
		}
		Line {
		  SrcBlock		  "rear\nactive?"
		  SrcPort		  1
		  Points		  [45, 0; 0, -25]
		  DstBlock		  "Mux"
		  DstPort		  18
		}
		Line {
		  SrcBlock		  "rear\nactive?2"
		  SrcPort		  1
		  Points		  [0, -20]
		  DstBlock		  "Mux"
		  DstPort		  20
		}
		Line {
		  SrcBlock		  "rear\nactive?1"
		  SrcPort		  1
		  Points		  [10, 0; 0, -25]
		  DstBlock		  "Mux"
		  DstPort		  19
		}
	      }
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "enforce max. \nfront axle\ntractive force\n due to slip (N)1"
	      SID		      "941"
	      Ports		      [3, 4]
	      Position		      [260, 62, 290, 178]
	      ForegroundColor	      "lightBlue"
	      BackgroundColor	      "darkGreen"
	      SourceBlock	      "lib_controls/SubSystem/traction control\n2 axle/enforce max. \nfront axle\ntractive force\n "
	      "due to slip (N)"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "off"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd force\n(N)"
	      SID		      "942"
	      Position		      [330, 60, 350, 80]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd speed\n(m/s)"
	      SID		      "943"
	      Position		      [330, 15, 350, 35]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nfront axle\n(N)"
	      SID		      "944"
	      Position		      [365, 100, 385, 120]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nrear axle\n(N)"
	      SID		      "945"
	      Position		      [425, 130, 445, 150]
	      Port		      "4"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "front/total \ntraction ratio"
	      SID		      "946"
	      Position		      [320, 155, 340, 175]
	      ForegroundColor	      "lightBlue"
	      Port		      "5"
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "apply tire traction\nlimit to req'd speed\n(m/s)"
	      SrcPort		      1
	      Points		      [0, -5; 20, 0]
	      Branch {
		Points			[0, -95]
		DstBlock		"req'd speed\n(m/s)"
		DstPort			1
	      }
	      Branch {
		DstBlock		"enforce max. \nfront axle\ntractive force\n due to slip (N)1"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "total tractive\nforce req'd\n(N)"
	      SrcPort		      1
	      DstBlock		      "enforce max. \nfront axle\ntractive force\n due to slip (N)1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "enforce max. \nfront axle\ntractive force\n due to slip (N)1"
	      SrcPort		      1
	      Points		      [0, -5]
	      DstBlock		      "req'd force\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "enforce max. \nfront axle\ntractive force\n due to slip (N)1"
	      SrcPort		      2
	      Points		      [0, 5]
	      DstBlock		      "weight on\nfront axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "vehicle speed at\nbeginning of time\n step (m/s)"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		Points			[0, -55]
		DstBlock		"apply tire traction\nlimit to req'd speed\n(m/s)"
		DstPort			2
	      }
	      Branch {
		Points			[115, 0; 0, -30]
		DstBlock		"enforce max. \nfront axle\ntractive force\n due to slip (N)1"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "time-average\nvehicle speed\n req'd (m/s)"
	      SrcPort		      1
	      Points		      [50, 0]
	      DstBlock		      "apply tire traction\nlimit to req'd speed\n(m/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "enforce max. \nfront axle\ntractive force\n due to slip (N)1"
	      SrcPort		      3
	      Points		      [115, 0]
	      DstBlock		      "weight on\nrear axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "enforce max. \nfront axle\ntractive force\n due to slip (N)1"
	      SrcPort		      4
	      DstBlock		      "front/total \ntraction ratio"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "From <wh>1"
	  SrcPort		  1
	  DstBlock		  "traction control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <veh>"
	  SrcPort		  1
	  DstBlock		  "traction control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <wh>"
	  SrcPort		  1
	  DstBlock		  "traction control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "traction control"
	  SrcPort		  3
	  DstBlock		  "Goto <wh>2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "traction control"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>8"
	  SrcPort		  1
	  DstBlock		  "braking strategy"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>5"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>6"
	  SrcPort		  1
	  Points		  [65, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>2"
	  SrcPort		  1
	  Points		  [30, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <wh>3"
	  SrcPort		  1
	  Points		  [40, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From<wh>4"
	  SrcPort		  1
	  Points		  [30, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <wh>5"
	  SrcPort		  1
	  Points		  [5, 0; 0, -25]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievable)"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <logic>2"
	  SrcPort		  1
	  DstBlock		  "Speed Dependent Shifting"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Speed Dependent Shifting"
	  SrcPort		  1
	  DstBlock		  "Goto"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Speed Dependent Shifting"
	  SrcPort		  2
	  DstBlock		  "Goto1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>4"
	  SrcPort		  1
	  Points		  [10, 0; 0, -55]
	  DstBlock		  "front and rear\nbrake controller\n(achievable)"
	  DstPort		  6
	}
	Annotation {
	  SID			  "951"
	  Name			  "required\nforce (N)"
	  Position		  [216, 46]
	}
	Annotation {
	  SID			  "950"
	  Name			  "required force\n(from traction control)"
	  Position		  [84, 301]
	}
	Annotation {
	  SID			  "949"
	  Name			  "required rear \nbrake force"
	  Position		  [221, 307]
	}
	Annotation {
	  SID			  "948"
	  Name			  "SUB MODEL LIBRARY FOR VEHICLE CONTROLS"
	  Position		  [466, 19]
	}
	Annotation {
	  SID			  "947"
	  Name			  "this shifting block part \nof the speed dependent\n shifting above"
	  Position		  [310, 483]
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "electric assist\ncontrol strategy\n<cs>"
      SID		      "320"
      Ports		      [1, 1]
      Position		      [385, 149, 415, 181]
      BackgroundColor	      "yellow"
      ShowPortLabels	      "none"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_cs.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"electric assist\ncontrol strategy\n<cs>"
	Location		[170, 202, 774, 548]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "trq and spd req'd\ninto clutch\n(N*m, rad/s)"
	  SID			  "6277"
	  Position		  [40, 108, 70, 122]
	  IconDisplay		  "Port number"
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant"
	  SID			  "6278"
	  Position		  [365, 150, 385, 170]
	  BlockRotation		  270
	  Value			  "0"
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux"
	  SID			  "6279"
	  Ports			  [1, 2]
	  Position		  [150, 162, 185, 198]
	  Outputs		  "2"
	}
	Block {
	  BlockType		  From
	  Name			  "From <vc>"
	  SID			  "6280"
	  Position		  [135, 225, 205, 245]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "engine_on"
	}
	Block {
	  BlockType		  MinMax
	  Name			  "MinMax"
	  SID			  "6281"
	  Ports			  [2, 1]
	  Position		  [315, 92, 345, 123]
	  Function		  "max"
	  Inputs		  "2"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux"
	  SID			  "6282"
	  Ports			  [2, 1]
	  Position		  [455, 112, 490, 148]
	  Inputs		  "2"
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  SID			  "6283"
	  Ports			  [2, 1]
	  Position		  [255, 49, 270, 96]
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch"
	  SID			  "6284"
	  Position		  [390, 105, 420, 135]
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "chg trq req'd\n(Nm)"
	  SID			  "6285"
	  Ports			  [0, 1]
	  Position		  [95, 45, 125, 75]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "chg trq req'd\n(Nm)"
	    Location		    [318, 134, 900, 377]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "6286"
	      Position		      [25, 48, 170, 72]
	      Value		      "cs_charge_trq*fc_trq_scale"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "6287"
	      Position		      [325, 105, 365, 125]
	      Value		      "ess_on"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <ess>1"
	      SID		      "6288"
	      Position		      [65, 94, 110, 116]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Goal"
	      SID		      "6289"
	      Position		      [20, 134, 155, 156]
	      Value		      "(cs_lo_soc+cs_hi_soc)/2"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      SID		      "6290"
	      Ports		      [2, 1]
	      Position		      [280, 52, 310, 83]
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      SID		      "6291"
	      Ports		      [2, 1]
	      Position		      [230, 142, 260, 173]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Range"
	      SID		      "6292"
	      Position		      [20, 174, 155, 196]
	      Value		      "(cs_hi_soc-cs_lo_soc)/2"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "6293"
	      Ports		      [1, 1]
	      Position		      [330, 55, 360, 85]
	      InputPortMap	      "u0"
	      UpperLimit	      "inf"
	      LowerLimit	      "-inf"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      SID		      "6294"
	      Ports		      [2, 1]
	      Position		      [180, 97, 210, 128]
	      Inputs		      "-+"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "6295"
	      Position		      [420, 65, 450, 95]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "add'l trq req'd\n(Nm)"
	      SID		      "6296"
	      Position		      [490, 73, 520, 87]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Range"
	      SrcPort		      1
	      Points		      [55, 0]
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Goal"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <ess>1"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "add'l trq req'd\n(Nm)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [35, 0; 0, -25]
	      Branch {
		DstBlock		"Switch"
		DstPort			2
	      }
	      Branch {
		DstBlock		"Switch"
		DstPort			3
	      }
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "help"
	  SID			  "6297"
	  Ports			  []
	  Position		  [451, 194, 482, 237]
	  BackgroundColor	  "yellow"
	  DropShadow		  on
	  ShowName		  off
	  OpenFcn		  "web(['file:\\\\\\' which('Parallel.htm')])"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskPortRotate	  "default"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "help"
	    Location		    [203, 331, 569, 538]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "minimum trq\n(Nm)"
	  SID			  "6298"
	  Ports			  [1, 1]
	  Position		  [150, 100, 180, 130]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "minimum trq\n(Nm)"
	    Location		    [193, 230, 777, 538]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "trq and spd req'd\ninto trq coupler\n(N*m, rad/s)"
	      SID		      "6299"
	      Position		      [40, 108, 70, 122]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)"
	      SID		      "6300"
	      Position		      [60, 223, 130, 247]
	      Value		      "cs_lo_soc"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "6301"
	      Position		      [355, 215, 375, 235]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <ess>"
	      SID		      "6302"
	      Position		      [60, 174, 105, 196]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      SID		      "6303"
	      Position		      [280, 89, 385, 141]
	      Gain		      "cs_min_trq_frac"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "6304"
	      Ports		      [2, 1]
	      Position		      [200, 177, 230, 208]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      Selector
	      Name		      "Selector"
	      SID		      "6305"
	      Ports		      [1, 1]
	      Position		      [120, 100, 150, 130]
	      InputPortWidth	      "2"
	      IndexOptions	      "Index vector (dialog)"
	      Indices		      "2"
	      OutputSizes	      "1"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "6306"
	      Position		      [405, 180, 435, 210]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Terminator
	      Name		      "Terminator"
	      SID		      "6307"
	      Position		      [400, 30, 420, 50]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "constant threshhold trq (N*m)"
	      SID		      "6308"
	      Position		      [240, 28, 370, 52]
	      Value		      "max(fc_max_trq)*0.33"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max_torque lookup"
	      SID		      "6309"
	      Position		      [200, 103, 230, 127]
	      InputValues	      "fc_map_spd"
	      Table		      "fc_max_trq*fc_trq_scale"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "minimum trq\n(N*m)"
	      SID		      "6310"
	      Position		      [480, 188, 510, 202]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "From <ess>"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "(--)"
	      SrcPort		      1
	      Points		      [25, 0; 0, -35]
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "minimum trq\n(N*m)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [5, 0; 0, -20]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "constant threshhold trq (N*m)"
	      SrcPort		      1
	      DstBlock		      "Terminator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "trq and spd req'd\ninto trq coupler\n(N*m, rad/s)"
	      SrcPort		      1
	      DstBlock		      "Selector"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Selector"
	      SrcPort		      1
	      DstBlock		      "max_torque lookup"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "max_torque lookup"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "trq and spd\nreq'd from\nengine\n(N*m, rad/s)"
	  SID			  "6311"
	  Position		  [525, 123, 555, 137]
	  IconDisplay		  "Port number"
	}
	Line {
	  SrcBlock		  "trq and spd req'd\ninto clutch\n(N*m, rad/s)"
	  SrcPort		  1
	  Points		  [50, 0]
	  Branch {
	    DstBlock		    "minimum trq\n(Nm)"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 65]
	    DstBlock		    "Demux"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "chg trq req'd\n(Nm)"
	  SrcPort		  1
	  DstBlock		  "Sum"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  Points		  [20, 0; 0, 25]
	  DstBlock		  "MinMax"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "MinMax"
	  SrcPort		  1
	  DstBlock		  "Switch"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant"
	  SrcPort		  1
	  DstBlock		  "Switch"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Switch"
	  SrcPort		  1
	  DstBlock		  "Mux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux"
	  SrcPort		  1
	  DstBlock		  "trq and spd\nreq'd from\nengine\n(N*m, rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  2
	  Points		  [245, 0; 0, -50]
	  DstBlock		  "Mux"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "minimum trq\n(Nm)"
	  SrcPort		  1
	  DstBlock		  "MinMax"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <vc>"
	  SrcPort		  1
	  Points		  [145, 0; 0, -115]
	  DstBlock		  "Switch"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  1
	  Points		  [50, 0]
	  DstBlock		  "Sum"
	  DstPort		  2
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "electric assist\ncontrol strategy\nbal <cs>"
      SID		      "321"
      Ports		      [1, 1]
      Position		      [580, 224, 610, 256]
      ShowPortLabels	      "none"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_cs.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"electric assist\ncontrol strategy\nbal <cs>"
	Location		[87, 152, 696, 451]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "trq and spd req'd\ninto clutch\n(N*m, rad/s)"
	  SID			  "6312"
	  Position		  [40, 23, 70, 37]
	  IconDisplay		  "Port number"
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant"
	  SID			  "6313"
	  Position		  [365, 145, 385, 165]
	  BlockRotation		  270
	  Value			  "0"
	}
	Block {
	  BlockType		  From
	  Name			  "From <vc>"
	  SID			  "6314"
	  Position		  [150, 225, 220, 245]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "engine_on"
	}
	Block {
	  BlockType		  MinMax
	  Name			  "MinMax"
	  SID			  "6315"
	  Ports			  [2, 1]
	  Position		  [315, 82, 345, 113]
	  Function		  "max"
	  Inputs		  "2"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux"
	  SID			  "6316"
	  Ports			  [2, 1]
	  Position		  [455, 102, 490, 138]
	  Inputs		  "2"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "SOC corrected \ntrq req'd (N*m)"
	  SID			  "6317"
	  Ports			  [1, 1]
	  Position		  [165, 14, 195, 46]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "SOC corrected \ntrq req'd (N*m)"
	    Location		    [10, 74, 1021, 716]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "trq and spd req'd\ninto trq coupler\n(N*m, rad/s)"
	      SID		      "6318"
	      Position		      [35, 63, 65, 77]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs"
	      SID		      "6319"
	      Position		      [510, 310, 540, 340]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "6320"
	      Position		      [170, 300, 190, 320]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "6321"
	      Position		      [410, 325, 430, 345]
	      BlockMirror	      on
	      Value		      "-1"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "6322"
	      Position		      [410, 410, 430, 430]
	      BlockMirror	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant7"
	      SID		      "6323"
	      Position		      [550, 415, 570, 435]
	      BlockMirror	      on
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      SID		      "6324"
	      Ports		      [1, 2]
	      Position		      [100, 39, 105, 101]
	      ShowName		      off
	      Outputs		      "2"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <ess>2"
	      SID		      "6325"
	      Position		      [60, 469, 105, 491]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      SID		      "6326"
	      Position		      [370, 220, 400, 250]
	      Gain		      "cs_trq_to_soc_factor"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "6327"
	      Ports		      [2, 1]
	      Position		      [490, 527, 520, 558]
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator2"
	      SID		      "6328"
	      Ports		      [3, 1]
	      Position		      [505, 194, 535, 226]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator3"
	      SID		      "6329"
	      Ports		      [2, 1]
	      Position		      [350, 357, 380, 388]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator4"
	      SID		      "6330"
	      Ports		      [1, 1]
	      Position		      [290, 364, 320, 396]
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator5"
	      SID		      "6331"
	      Ports		      [2, 1]
	      Position		      [435, 492, 465, 523]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator6"
	      SID		      "6332"
	      Ports		      [1, 1]
	      Position		      [370, 454, 400, 486]
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator7"
	      SID		      "6333"
	      Ports		      [2, 1]
	      Position		      [435, 562, 465, 593]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator8"
	      SID		      "6334"
	      Ports		      [1, 1]
	      Position		      [370, 524, 400, 556]
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator9"
	      SID		      "6335"
	      Ports		      [1, 1]
	      Position		      [510, 465, 540, 495]
	      BlockRotation	      270
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Manual \nSwitch"
	      SID		      "6336"
	      Ports		      [2, 1]
	      Position		      [700, 247, 730, 278]
	      SourceBlock	      "simulink3/Nonlinear/Manual Switch"
	      SourceType	      "Manual Switch"
	      sw		      "1"
	      action		      "0"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Manual \nSwitch1"
	      SID		      "6337"
	      Ports		      [2, 1]
	      Position		      [560, 292, 590, 323]
	      SourceBlock	      "simulink3/Nonlinear/Manual Switch"
	      SourceType	      "Manual Switch"
	      sw		      "1"
	      action		      "0"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Multiplier4"
	      SID		      "6338"
	      Ports		      [4, 1]
	      Position		      [750, 75, 770, 290]
	      ShowName		      off
	      Inputs		      "4"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "6339"
	      Ports		      [2, 1]
	      Position		      [440, 182, 470, 213]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator4"
	      SID		      "6340"
	      Ports		      [2, 1]
	      Position		      [235, 302, 265, 333]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator5"
	      SID		      "6341"
	      Ports		      [2, 1]
	      Position		      [440, 242, 470, 273]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "SOC \nCorrection\n Factor"
	      SID		      "6342"
	      Ports		      [3, 1]
	      Position		      [160, 494, 190, 546]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"SOC \nCorrection\n Factor"
		Location		[133, 175, 916, 430]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "SOC"
		  SID			  "6343"
		  Position		  [20, 33, 50, 47]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "high soc"
		  SID			  "6344"
		  Position		  [20, 67, 50, 83]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "low soc"
		  SID			  "6345"
		  Position		  [20, 98, 50, 112]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Gain
		  Name			  "0.5*range"
		  SID			  "6346"
		  Position		  [135, 120, 165, 150]
		  Gain			  "0.5"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "6347"
		  Position		  [390, 70, 410, 90]
		  Value			  "3"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant4"
		  SID			  "6348"
		  Position		  [325, 140, 345, 160]
		  Value			  "2"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Manual \nSwitch1"
		  SID			  "6349"
		  Ports			  [2, 1]
		  Position		  [635, 82, 665, 113]
		  SourceBlock		  "simulink3/Nonlinear/Manual Switch"
		  SourceType		  "Manual Switch"
		  sw			  "0"
		  action		  "0"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Manual Switch"
		  SID			  "6350"
		  Ports			  [2, 1]
		  Position		  [560, 37, 590, 68]
		  SourceBlock		  "simulink3/Nonlinear/Manual Switch"
		  SourceType		  "Manual Switch"
		  sw			  "1"
		  action		  "0"
		}
		Block {
		  BlockType		  Math
		  Name			  "Math\nFunction"
		  SID			  "6351"
		  Ports			  [2, 1]
		  Position		  [495, 52, 525, 83]
		  Operator		  "pow"
		}
		Block {
		  BlockType		  Math
		  Name			  "Math\nFunction1"
		  SID			  "6352"
		  Ports			  [2, 1]
		  Position		  [385, 122, 415, 153]
		  Operator		  "pow"
		}
		Block {
		  BlockType		  Product
		  Name			  "Multiplier6"
		  SID			  "6353"
		  Ports			  [2, 1]
		  Position		  [255, 42, 285, 73]
		  ShowName		  off
		  Inputs		  "*/"
		}
		Block {
		  BlockType		  Product
		  Name			  "Multiplier7"
		  SID			  "6354"
		  Ports			  [2, 1]
		  Position		  [450, 107, 480, 138]
		  ShowName		  off
		}
		Block {
		  BlockType		  Signum
		  Name			  "Sign"
		  SID			  "6355"
		  Position		  [315, 84, 350, 116]
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum11"
		  SID			  "6356"
		  Ports			  [2, 1]
		  Position		  [200, 32, 230, 63]
		  ShowName		  off
		  Inputs		  "-+"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum12"
		  SID			  "6357"
		  Ports			  [2, 1]
		  Position		  [85, 67, 115, 98]
		  ShowName		  off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum14"
		  SID			  "6358"
		  Ports			  [2, 1]
		  Position		  [85, 117, 115, 148]
		  ShowName		  off
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Gain
		  Name			  "mean"
		  SID			  "6359"
		  Position		  [135, 70, 165, 100]
		  Gain			  "0.5"
		}
		Block {
		  BlockType		  Outport
		  Name			  "SOC \ncorrection \nfactor"
		  SID			  "6360"
		  Position		  [705, 93, 735, 107]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Multiplier7"
		  SrcPort		  1
		  Points		  [135, 0]
		  DstBlock		  "Manual \nSwitch1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sign"
		  SrcPort		  1
		  Points		  [0, 15]
		  DstBlock		  "Multiplier7"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Math\nFunction1"
		  SrcPort		  1
		  Points		  [15, 0]
		  DstBlock		  "Multiplier7"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Manual \nSwitch1"
		  SrcPort		  1
		  DstBlock		  "SOC \ncorrection \nfactor"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Manual Switch"
		  SrcPort		  1
		  Points		  [25, 0]
		  DstBlock		  "Manual \nSwitch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Multiplier6"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    Points		    [0, 40]
		    Branch {
		    Points		    [0, 30]
		    DstBlock		    "Math\nFunction1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Sign"
		    DstPort		    1
		    }
		  }
		  Branch {
		    Points		    [0, 0]
		    Branch {
		    Points		    [0, -15]
		    DstBlock		    "Manual Switch"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Math\nFunction"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Constant4"
		  SrcPort		  1
		  Points		  [20, 0]
		  DstBlock		  "Math\nFunction1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Math\nFunction"
		  SrcPort		  1
		  Points		  [0, -10]
		  DstBlock		  "Manual Switch"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  Points		  [65, 0]
		  DstBlock		  "Math\nFunction"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "0.5*range"
		  SrcPort		  1
		  Points		  [70, 0]
		  DstBlock		  "Multiplier6"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum11"
		  SrcPort		  1
		  DstBlock		  "Multiplier6"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "low soc"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    DstBlock		    "Sum14"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Sum12"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "high soc"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    Points		    [0, 50]
		    DstBlock		    "Sum14"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum12"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Sum14"
		  SrcPort		  1
		  DstBlock		  "0.5*range"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum12"
		  SrcPort		  1
		  DstBlock		  "mean"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "mean"
		  SrcPort		  1
		  Points		  [15, 0]
		  DstBlock		  "Sum11"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "SOC"
		  SrcPort		  1
		  DstBlock		  "Sum11"
		  DstPort		  1
		}
		Annotation {
		  SID			  "6361"
		  Name			  "Depending in the location of the manual\nswitches the correction factor will either\nbe a linear, quad, "
		  "or cubic function within the \nspecified range"
		  Position		  [591, 201]
		}
	      }
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation2"
	      SID		      "6362"
	      Ports		      [1, 1]
	      Position		      [870, 50, 900, 80]
	      InputPortMap	      "u0"
	      UpperLimit	      "inf"
	      LowerLimit	      "0"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum12"
	      SID		      "6363"
	      Ports		      [2, 1]
	      Position		      [315, 162, 345, 193]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum13"
	      SID		      "6364"
	      Ports		      [2, 1]
	      Position		      [690, 117, 720, 148]
	      ShowName		      off
	      Inputs		      "-+"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum14"
	      SID		      "6365"
	      Ports		      [2, 1]
	      Position		      [630, 237, 660, 268]
	      ShowName		      off
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum2"
	      SID		      "6366"
	      Ports		      [2, 1]
	      Position		      [805, 47, 835, 78]
	      ShowName		      off
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch2"
	      SID		      "6367"
	      Position		      [635, 135, 665, 165]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch3"
	      SID		      "6368"
	      Position		      [405, 360, 435, 390]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch4"
	      SID		      "6369"
	      Position		      [550, 370, 580, 400]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "goal SOC1"
	      SID		      "6370"
	      Position		      [45, 511, 115, 529]
	      Value		      "cs_hi_soc"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "goal SOC2"
	      SID		      "6371"
	      Position		      [45, 546, 115, 564]
	      Value		      "cs_lo_soc"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "goal trq frac"
	      SID		      "6372"
	      Position		      [190, 177, 280, 193]
	      Value		      "cs_lo_trq_frac"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "goal trq frac1"
	      SID		      "6373"
	      Position		      [190, 132, 280, 148]
	      Value		      "cs_hi_trq_frac"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "max trq \nand \ntrq frac"
	      SID		      "6374"
	      Ports		      [2, 2]
	      Position		      [145, 87, 175, 138]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"max trq \nand \ntrq frac"
		Location		[47, 120, 476, 354]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "trq req"
		  SID			  "6375"
		  Position		  [25, 53, 55, 67]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "spd req"
		  SID			  "6376"
		  Position		  [25, 93, 55, 107]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "6377"
		  Position		  [140, 135, 160, 155]
		  Value			  "eps"
		}
		Block {
		  BlockType		  Product
		  Name			  "Multiplier3"
		  SID			  "6378"
		  Ports			  [2, 1]
		  Position		  [260, 87, 290, 118]
		  ShowName		  off
		  Inputs		  "*/"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation4"
		  SID			  "6379"
		  Ports			  [1, 1]
		  Position		  [140, 87, 165, 113]
		  InputPortMap		  "u0"
		  UpperLimit		  "inf"
		  LowerLimit		  "0"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation7"
		  SID			  "6380"
		  Ports			  [1, 1]
		  Position		  [315, 92, 340, 118]
		  InputPortMap		  "u0"
		  UpperLimit		  "1"
		  LowerLimit		  "0"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum8"
		  SID			  "6381"
		  Ports			  [2, 1]
		  Position		  [200, 92, 230, 123]
		  ShowName		  off
		  Inputs		  "2"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "max_torque\n lookup"
		  SID			  "6382"
		  Position		  [80, 88, 110, 112]
		  InputValues		  "fc_map_spd*fc_spd_scale"
		  Table			  "fc_max_trq*fc_trq_scale"
		}
		Block {
		  BlockType		  Outport
		  Name			  "max trq"
		  SID			  "6383"
		  Position		  [365, 57, 395, 73]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Block {
		  BlockType		  Outport
		  Name			  "trq frac"
		  SID			  "6384"
		  Position		  [365, 98, 395, 112]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Saturation7"
		  SrcPort		  1
		  DstBlock		  "trq frac"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "spd req"
		  SrcPort		  1
		  DstBlock		  "max_torque\n lookup"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation4"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [0, -35]
		    DstBlock		    "max trq"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum8"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "max_torque\n lookup"
		  SrcPort		  1
		  DstBlock		  "Saturation4"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [20, 0]
		  DstBlock		  "Sum8"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum8"
		  SrcPort		  1
		  DstBlock		  "Multiplier3"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Multiplier3"
		  SrcPort		  1
		  DstBlock		  "Saturation7"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "trq req"
		  SrcPort		  1
		  Points		  [185, 0]
		  DstBlock		  "Multiplier3"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "mean"
	      SID		      "6385"
	      Position		      [365, 165, 395, 195]
	      Gain		      "0.5"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "trq \nCorrection\n Factor"
	      SID		      "6386"
	      Ports		      [3, 1]
	      Position		      [315, 209, 345, 261]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"trq \nCorrection\n Factor"
		Location		[135, 173, 870, 418]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "trq"
		  SID			  "6387"
		  Position		  [20, 33, 50, 47]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "high trq"
		  SID			  "6388"
		  Position		  [20, 67, 50, 83]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "low trq"
		  SID			  "6389"
		  Position		  [20, 98, 50, 112]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Gain
		  Name			  "0.5*range"
		  SID			  "6390"
		  Position		  [135, 120, 165, 150]
		  Gain			  "0.5"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  SID			  "6391"
		  Position		  [360, 45, 380, 65]
		  Value			  "3"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant4"
		  SID			  "6392"
		  Position		  [360, 130, 380, 150]
		  Value			  "2"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Manual Switch"
		  SID			  "6393"
		  Ports			  [2, 1]
		  Position		  [485, 17, 515, 48]
		  SourceBlock		  "simulink3/Nonlinear/Manual Switch"
		  SourceType		  "Manual Switch"
		  sw			  "1"
		  action		  "0"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Manual Switch1"
		  SID			  "6394"
		  Ports			  [2, 1]
		  Position		  [560, 62, 590, 93]
		  SourceBlock		  "simulink3/Nonlinear/Manual Switch"
		  SourceType		  "Manual Switch"
		  sw			  "0"
		  action		  "0"
		}
		Block {
		  BlockType		  Math
		  Name			  "Math\nFunction"
		  SID			  "6395"
		  Ports			  [2, 1]
		  Position		  [410, 32, 440, 63]
		  Operator		  "pow"
		}
		Block {
		  BlockType		  Math
		  Name			  "Math\nFunction1"
		  SID			  "6396"
		  Ports			  [2, 1]
		  Position		  [415, 117, 445, 148]
		  Operator		  "pow"
		}
		Block {
		  BlockType		  Product
		  Name			  "Multiplier6"
		  SID			  "6397"
		  Ports			  [2, 1]
		  Position		  [255, 42, 285, 73]
		  ShowName		  off
		  Inputs		  "*/"
		}
		Block {
		  BlockType		  Product
		  Name			  "Multiplier7"
		  SID			  "6398"
		  Ports			  [2, 1]
		  Position		  [490, 97, 520, 128]
		  ShowName		  off
		}
		Block {
		  BlockType		  Signum
		  Name			  "Sign"
		  SID			  "6399"
		  Position		  [305, 79, 340, 111]
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum11"
		  SID			  "6400"
		  Ports			  [2, 1]
		  Position		  [200, 32, 230, 63]
		  ShowName		  off
		  Inputs		  "-+"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum12"
		  SID			  "6401"
		  Ports			  [2, 1]
		  Position		  [85, 67, 115, 98]
		  ShowName		  off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum14"
		  SID			  "6402"
		  Ports			  [2, 1]
		  Position		  [85, 117, 115, 148]
		  ShowName		  off
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Gain
		  Name			  "mean"
		  SID			  "6403"
		  Position		  [135, 70, 165, 100]
		  Gain			  "0.5"
		}
		Block {
		  BlockType		  Outport
		  Name			  "trq \ncorrection \nfactor"
		  SID			  "6404"
		  Position		  [625, 73, 655, 87]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Multiplier7"
		  SrcPort		  1
		  Points		  [0, -30]
		  DstBlock		  "Manual Switch1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sign"
		  SrcPort		  1
		  Points		  [0, 10]
		  DstBlock		  "Multiplier7"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Math\nFunction1"
		  SrcPort		  1
		  Points		  [25, 0]
		  DstBlock		  "Multiplier7"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Manual Switch1"
		  SrcPort		  1
		  DstBlock		  "trq \ncorrection \nfactor"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Manual Switch"
		  SrcPort		  1
		  Points		  [25, 0]
		  DstBlock		  "Manual Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Multiplier6"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    Points		    [0, 35]
		    Branch {
		    Points		    [0, 30]
		    DstBlock		    "Math\nFunction1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Sign"
		    DstPort		    1
		    }
		  }
		  Branch {
		    Points		    [0, -20; 105, 0]
		    Branch {
		    Points		    [0, -15]
		    DstBlock		    "Manual Switch"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Math\nFunction"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Constant4"
		  SrcPort		  1
		  DstBlock		  "Math\nFunction1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Math\nFunction"
		  SrcPort		  1
		  Points		  [0, -10]
		  DstBlock		  "Manual Switch"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  DstBlock		  "Math\nFunction"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "0.5*range"
		  SrcPort		  1
		  Points		  [70, 0]
		  DstBlock		  "Multiplier6"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum11"
		  SrcPort		  1
		  DstBlock		  "Multiplier6"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "low trq"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    DstBlock		    "Sum14"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Sum12"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "high trq"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    Points		    [0, 50]
		    DstBlock		    "Sum14"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum12"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Sum14"
		  SrcPort		  1
		  DstBlock		  "0.5*range"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum12"
		  SrcPort		  1
		  DstBlock		  "mean"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "mean"
		  SrcPort		  1
		  Points		  [15, 0]
		  DstBlock		  "Sum11"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "trq"
		  SrcPort		  1
		  DstBlock		  "Sum11"
		  DstPort		  1
		}
		Annotation {
		  SID			  "6405"
		  Name			  "Depending in the location of the manual\nswitches the correction factor will either\nbe a linear, quad, "
		  "or cubic function within the \nspecified range"
		  Position		  [586, 191]
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "SOC corrected \ntrq req'd (N*m)"
	      SID		      "6406"
	      Position		      [945, 58, 975, 72]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      Points		      [0, 65; 90, 0]
	      Branch {
		DstBlock		"Manual \nSwitch1"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Abs"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Manual \nSwitch1"
	      SrcPort		      1
	      Points		      [10, 0; 0, -65]
	      DstBlock		      "Sum14"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Abs"
	      SrcPort		      1
	      DstBlock		      "Manual \nSwitch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Manual \nSwitch"
	      SrcPort		      1
	      DstBlock		      "Multiplier4"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "Sum14"
	      SrcPort		      1
	      DstBlock		      "Manual \nSwitch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "goal trq frac"
	      SrcPort		      1
	      Points		      [0, 0]
	      Branch {
		Points			[0, 65]
		DstBlock		"trq \nCorrection\n Factor"
		DstPort			3
	      }
	      Branch {
		DstBlock		"Sum12"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "max trq \nand \ntrq frac"
	      SrcPort		      2
	      Points		      [115, 0]
	      Branch {
		Points			[0, 95]
		DstBlock		"trq \nCorrection\n Factor"
		DstPort			1
	      }
	      Branch {
		Points			[115, 0]
		Branch {
		  Points		  [0, 80]
		  Branch {
		    Points		    [0, 45]
		    DstBlock		    "Relational\nOperator5"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		}
		Branch {
		  DstBlock		  "Sum13"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator9"
	      SrcPort		      1
	      Points		      [0, -75]
	      DstBlock		      "Switch4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "SOC \nCorrection\n Factor"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, -195]
		DstBlock		"Relational\nOperator4"
		DstPort			2
	      }
	      Branch {
		Points			[0, 110; 405, 0; 0, -340]
		Branch {
		  Points		  [70, 0]
		  DstBlock		  "Manual \nSwitch"
		  DstPort		  2
		}
		Branch {
		  DstBlock		  "Sum14"
		  DstPort		  2
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Constant7"
	      SrcPort		      1
	      Points		      [-10, 0]
	      DstBlock		      "Switch4"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch3"
	      SrcPort		      1
	      DstBlock		      "Switch4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator7"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator8"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Logical\nOperator7"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator5"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator6"
	      SrcPort		      1
	      Points		      [0, 30]
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator4"
	      SrcPort		      1
	      Points		      [0, 0]
	      Branch {
		Points			[0, 205]
		DstBlock		"Logical\nOperator7"
		DstPort			2
	      }
	      Branch {
		DstBlock		"Logical\nOperator3"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch3"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator3"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		Points			[0, 245; -125, 0]
		DstBlock		"Logical\nOperator6"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Logical\nOperator2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator5"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, 45; -150, 0; 0, 60]
		Branch {
		  Points		  [0, 175]
		  DstBlock		  "Logical\nOperator8"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "Logical\nOperator3"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[0, -50]
		DstBlock		"Logical\nOperator2"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator2"
	      SrcPort		      1
	      Points		      [10, 0; 0, -60]
	      DstBlock		      "Switch2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "mean"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		Points			[0, 85]
		DstBlock		"Relational\nOperator5"
		DstPort			2
	      }
	      Branch {
		Points			[0, -20]
		DstBlock		"Switch2"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "goal trq frac1"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		Points			[0, 30]
		Branch {
		  Points		  [0, 65]
		  DstBlock		  "trq \nCorrection\n Factor"
		  DstPort		  2
		}
		Branch {
		  DstBlock		  "Sum12"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[135, 0]
		Branch {
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "Switch2"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Sum12"
	      SrcPort		      1
	      DstBlock		      "mean"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch2"
	      SrcPort		      1
	      Points		      [0, -10]
	      DstBlock		      "Sum13"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "goal SOC2"
	      SrcPort		      1
	      Points		      [25, 0]
	      DstBlock		      "SOC \nCorrection\n Factor"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "goal SOC1"
	      SrcPort		      1
	      DstBlock		      "SOC \nCorrection\n Factor"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <ess>2"
	      SrcPort		      1
	      Points		      [35, 0]
	      DstBlock		      "SOC \nCorrection\n Factor"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator4"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		Points			[0, 60]
		Branch {
		  Points		  [0, 135]
		  DstBlock		  "Logical\nOperator5"
		  DstPort		  2
		}
		Branch {
		  DstBlock		  "Logical\nOperator4"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[215, 0]
		DstBlock		"Logical\nOperator2"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"max trq \nand \ntrq frac"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Sum2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      Points		      [0, 40]
	      DstBlock		      "max trq \nand \ntrq frac"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Saturation2"
	      SrcPort		      1
	      DstBlock		      "SOC corrected \ntrq req'd (N*m)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum2"
	      SrcPort		      1
	      DstBlock		      "Saturation2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "trq and spd req'd\ninto trq coupler\n(N*m, rad/s)"
	      SrcPort		      1
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "max trq \nand \ntrq frac"
	      SrcPort		      1
	      DstBlock		      "Multiplier4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum13"
	      SrcPort		      1
	      Points		      [0, 20]
	      DstBlock		      "Multiplier4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Multiplier4"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Sum2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch4"
	      SrcPort		      1
	      Points		      [10, 0; 0, -175]
	      DstBlock		      "Multiplier4"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "trq \nCorrection\n Factor"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Annotation {
	      SID		      "6407"
	      Name		      "This controller produces a modified trq request based on the \nSOC and the trq request.  The objec"
	      "tive is to move the SOC to the \nmean of the hi and lo set points and to move the trq operation to the \nmean o"
	      "f the hi and lo trq set points"
	      Position		      [822, 418]
	    }
	  }
	}
	Block {
	  BlockType		  Selector
	  Name			  "Selector"
	  SID			  "6408"
	  Ports			  [1, 1]
	  Position		  [165, 160, 195, 190]
	  InputPortWidth	  "2"
	  IndexOptions		  "Index vector (dialog)"
	  Indices		  "2"
	  OutputSizes		  "1"
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch"
	  SID			  "6409"
	  Position		  [390, 95, 420, 125]
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "help"
	  SID			  "6410"
	  Ports			  []
	  Position		  [476, 224, 507, 267]
	  BackgroundColor	  "yellow"
	  DropShadow		  on
	  ShowName		  off
	  OpenFcn		  "web(['file:\\\\\\' which('Parallel.htm')])"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskPortRotate	  "default"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "help"
	    Location		    [203, 331, 569, 538]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "minimum trq\n(N*m)"
	  SID			  "6411"
	  Ports			  [1, 1]
	  Position		  [165, 90, 195, 120]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "minimum trq\n(N*m)"
	    Location		    [193, 234, 786, 475]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "trq and spd req'd\ninto trq coupler\n(N*m, rad/s)"
	      SID		      "6412"
	      Position		      [55, 43, 85, 57]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "6413"
	      Position		      [370, 150, 390, 170]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <ess>"
	      SID		      "6414"
	      Position		      [175, 109, 220, 131]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      SID		      "6415"
	      Position		      [295, 24, 400, 76]
	      Gain		      "cs_min_trq_frac"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "6416"
	      Ports		      [2, 1]
	      Position		      [300, 112, 330, 143]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      Selector
	      Name		      "Selector"
	      SID		      "6417"
	      Ports		      [1, 1]
	      Position		      [135, 35, 165, 65]
	      InputPortWidth	      "2"
	      IndexOptions	      "Index vector (dialog)"
	      Indices		      "2"
	      OutputSizes	      "1"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "6418"
	      Position		      [420, 115, 450, 145]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "goal SOC"
	      SID		      "6419"
	      Position		      [135, 149, 265, 171]
	      Value		      "0.5*(cs_hi_soc+cs_lo_soc)"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max_torque lookup"
	      SID		      "6420"
	      Position		      [215, 38, 245, 62]
	      InputValues	      "fc_map_spd"
	      Table		      "fc_max_trq*fc_trq_scale"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "minimum trq\n(N*m)"
	      SID		      "6421"
	      Position		      [495, 123, 525, 137]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "goal SOC"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [5, 0; 0, -20]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <ess>"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "max_torque lookup"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Selector"
	      SrcPort		      1
	      DstBlock		      "max_torque lookup"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "trq and spd req'd\ninto trq coupler\n(N*m, rad/s)"
	      SrcPort		      1
	      DstBlock		      "Selector"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "minimum trq\n(N*m)"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "trq and spd\nreq'd from\nengine\n(N*m, rad/s)"
	  SID			  "6422"
	  Position		  [525, 113, 555, 127]
	  IconDisplay		  "Port number"
	}
	Line {
	  SrcBlock		  "SOC corrected \ntrq req'd (N*m)"
	  SrcPort		  1
	  Points		  [95, 0; 0, 60]
	  DstBlock		  "MinMax"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "MinMax"
	  SrcPort		  1
	  DstBlock		  "Switch"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "trq and spd req'd\ninto clutch\n(N*m, rad/s)"
	  SrcPort		  1
	  Points		  [50, 0]
	  Branch {
	    DstBlock		    "SOC corrected \ntrq req'd (N*m)"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 75]
	    Branch {
	      Points		      [0, 70]
	      DstBlock		      "Selector"
	      DstPort		      1
	    }
	    Branch {
	      DstBlock		      "minimum trq\n(N*m)"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "minimum trq\n(N*m)"
	  SrcPort		  1
	  DstBlock		  "MinMax"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <vc>"
	  SrcPort		  1
	  Points		  [130, 0; 0, -125]
	  DstBlock		  "Switch"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Selector"
	  SrcPort		  1
	  Points		  [235, 0; 0, -45]
	  DstBlock		  "Mux"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Mux"
	  SrcPort		  1
	  DstBlock		  "trq and spd\nreq'd from\nengine\n(N*m, rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Switch"
	  SrcPort		  1
	  DstBlock		  "Mux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant"
	  SrcPort		  1
	  DstBlock		  "Switch"
	  DstPort		  3
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "electric assist\ncontrol strategy \nCVT <cs>"
      SID		      "322"
      Ports		      [1, 1]
      Position		      [215, 239, 245, 271]
      BackgroundColor	      "yellow"
      ShowPortLabels	      "none"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_cs.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"electric assist\ncontrol strategy \nCVT <cs>"
	Location		[43, 216, 875, 620]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "trq and spd req'd\ninto clutch\n(N*m, rad/s)"
	  SID			  "6423"
	  Position		  [40, 33, 70, 47]
	  IconDisplay		  "Port number"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Block NOTES1"
	  SID			  "6424"
	  Ports			  []
	  Position		  [430, 25, 486, 65]
	  BackgroundColor	  "green"
	  ShowName		  off
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  MaskDisplay		  "disp('Block\\nNOTES')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskPortRotate	  "default"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Block NOTES1"
	    Location		    [91, 413, 529, 634]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Annotation {
	      SID		      "6425"
	      Name		      "Known issues: tm:8/16/00\n?? Should inertia estimate be included too??\n?? unsure why I must bypas"
	      "s speed calc??\n"
	      Position		      [217, 12]
	      VerticalAlignment	      "top"
	    }
	  }
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant"
	  SID			  "6426"
	  Position		  [550, 130, 570, 150]
	  Value			  "0"
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux"
	  SID			  "6427"
	  Ports			  [1, 2]
	  Position		  [415, 152, 450, 188]
	  Outputs		  "2"
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux1"
	  SID			  "6428"
	  Ports			  [1, 2]
	  Position		  [110, 96, 115, 134]
	  BackgroundColor	  "black"
	  ShowName		  off
	  Outputs		  "2"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "FC trq and spd"
	  SID			  "6429"
	  Ports			  [3, 1]
	  Position		  [355, 154, 385, 186]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "FC trq and spd"
	    Location		    [37, 137, 999, 475]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "power req'd\nby FC (W)"
	      SID		      "6430"
	      Position		      [160, 143, 190, 157]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "FC on"
	      SID		      "6431"
	      Position		      [675, 248, 705, 262]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Mode"
	      SID		      "6432"
	      Position		      [95, 28, 125, 42]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "6433"
	      Ports		      []
	      Position		      [130, 230, 186, 270]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[340, 545, 722, 675]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "6434"
		  Name			  "In modes 1 and 2 engine is off and trq req is zero\nIn mode 3 a charge pwr is added to the pwr req and t"
		  "he spd \nand trq are then determined based on modified pwr\nIn Mode 4 the trq is determined by fc IOL"
		  Position		  [202, 27]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "6435"
	      Position		      [480, 80, 500, 100]
	      Value		      "eps"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "6436"
	      Position		      [770, 179, 790, 201]
	      BlockMirror	      on
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant8"
	      SID		      "6437"
	      Position		      [180, 54, 200, 76]
	      Value		      "3"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "6438"
	      Ports		      [2, 1]
	      Position		      [840, 142, 875, 178]
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "6439"
	      Ports		      [2, 1]
	      Position		      [235, 52, 265, 83]
	      NamePlacement	      "alternate"
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation3"
	      SID		      "6440"
	      Ports		      [1, 1]
	      Position		      [495, 15, 525, 35]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "max(ptc_fc_mc_iol_pwr_vec)"
	      LowerLimit	      "min(ptc_fc_mc_iol_pwr_vec)"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation7"
	      SID		      "6441"
	      Ports		      [1, 1]
	      Position		      [405, 170, 435, 190]
	      InputPortMap	      "u0"
	      FontName		      "Arial"
	      UpperLimit	      "max(ptc_fc_iol_pwr_vec)"
	      LowerLimit	      "min(ptc_fc_iol_pwr_vec)"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Speed Interp"
	      SID		      "6442"
	      Ports		      [2, 1]
	      Position		      [395, 75, 445, 150]
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"Speed Interp"
		Location		[497, 208, 839, 510]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Mode"
		  SID			  "6443"
		  Position		  [170, 15, 200, 30]
		  BlockRotation		  270
		  BlockMirror		  on
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "pwr req"
		  SID			  "6444"
		  Position		  [15, 13, 45, 27]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  MultiPortSwitch
		  Name			  "Multiport\nSwitch"
		  SID			  "6445"
		  Ports			  [5, 1]
		  Position		  [215, 33, 230, 217]
		  Inputs		  "4"
		  zeroidx		  off
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation3"
		  SID			  "6446"
		  Ports			  [1, 1]
		  Position		  [55, 50, 85, 70]
		  InputPortMap		  "u0"
		  FontName		  "Arial"
		  UpperLimit		  "max(ptc_fc_mc_iol_pwr_vec)"
		  LowerLimit		  "min(ptc_fc_mc_iol_pwr_vec)"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation6"
		  SID			  "6447"
		  Ports			  [1, 1]
		  Position		  [55, 160, 85, 180]
		  InputPortMap		  "u0"
		  FontName		  "Arial"
		  UpperLimit		  "max(ptc_mc_iol_pwr_vec)"
		  LowerLimit		  "min(ptc_mc_iol_pwr_vec)"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation7"
		  SID			  "6448"
		  Ports			  [1, 1]
		  Position		  [55, 105, 85, 125]
		  InputPortMap		  "u0"
		  FontName		  "Arial"
		  UpperLimit		  "max(ptc_fc_iol_pwr_vec)"
		  LowerLimit		  "min(ptc_fc_iol_pwr_vec)"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation8"
		  SID			  "6449"
		  Ports			  [1, 1]
		  Position		  [55, 215, 85, 235]
		  InputPortMap		  "u0"
		  FontName		  "Arial"
		  UpperLimit		  "max(ptc_mc_gen_iol_pwr_vec)"
		  LowerLimit		  "min(ptc_mc_gen_iol_pwr_vec)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "desired engine spd\nengine and motor"
		  SID			  "6450"
		  Position		  [130, 48, 160, 72]
		  InputValues		  "ptc_fc_mc_iol_pwr_vec"
		  Table			  "ptc_fc_mc_iol_spd_vec"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "desired engine spd\nengine only"
		  SID			  "6451"
		  Position		  [130, 103, 160, 127]
		  InputValues		  "ptc_fc_iol_pwr_vec"
		  Table			  "ptc_fc_iol_spd_vec"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "desired motor spd\nmotor only"
		  SID			  "6452"
		  Position		  [130, 158, 160, 182]
		  InputValues		  "ptc_mc_iol_pwr_vec"
		  Table			  "ptc_mc_iol_spd_vec"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "desired motor spd\nmotor only regen"
		  SID			  "6453"
		  Position		  [130, 213, 160, 237]
		  InputValues		  "fliplr(ptc_mc_gen_iol_pwr_vec)"
		  Table			  "fliplr(ptc_mc_gen_iol_spd_vec)"
		}
		Block {
		  BlockType		  Outport
		  Name			  "input spd"
		  SID			  "6454"
		  Position		  [255, 118, 285, 132]
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "Saturation6"
		  SrcPort		  1
		  DstBlock		  "desired motor spd\nmotor only"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation8"
		  SrcPort		  1
		  DstBlock		  "desired motor spd\nmotor only regen"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation7"
		  SrcPort		  1
		  DstBlock		  "desired engine spd\nengine only"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation3"
		  SrcPort		  1
		  DstBlock		  "desired engine spd\nengine and motor"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Multiport\nSwitch"
		  SrcPort		  1
		  DstBlock		  "input spd"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mode"
		  SrcPort		  1
		  Points		  [0, 20]
		  DstBlock		  "Multiport\nSwitch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "pwr req"
		  SrcPort		  1
		  Points		  [0, 25; -10, 0; 0, 15]
		  Branch {
		    DstBlock		    "Saturation3"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 55]
		    Branch {
		    DstBlock		    "Saturation7"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 55]
		    Branch {
		    DstBlock		    "Saturation6"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Saturation8"
		    DstPort		    1
		    }
		    }
		  }
		}
		Line {
		  SrcBlock		  "desired motor spd\nmotor only regen"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Multiport\nSwitch"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "desired motor spd\nmotor only"
		  SrcPort		  1
		  Points		  [30, 0; 0, -45]
		  DstBlock		  "Multiport\nSwitch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "desired engine spd\nengine only"
		  SrcPort		  1
		  Points		  [20, 0; 0, 45]
		  DstBlock		  "Multiport\nSwitch"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "desired engine spd\nengine and motor"
		  SrcPort		  1
		  Points		  [10, 0; 0, 135]
		  DstBlock		  "Multiport\nSwitch"
		  DstPort		  5
		}
	      }
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      SID		      "6455"
	      Ports		      [2, 1]
	      Position		      [535, 92, 565, 123]
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum1"
	      SID		      "6456"
	      Ports		      [2, 1]
	      Position		      [235, 102, 265, 133]
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "6457"
	      Position		      [765, 135, 795, 165]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To Workspace1"
	      SID		      "6458"
	      Ports		      [1]
	      Position		      [395, 215, 455, 245]
	      VariableName	      "cs_pwr_r"
	      MaxDataPoints	      "inf"
	      SampleTime	      "-1"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "chg pwr req'd\n(W)"
	      SID		      "6459"
	      Ports		      [0, 1]
	      Position		      [90, 105, 120, 135]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"chg pwr req'd\n(W)"
		Location		[312, 140, 791, 383]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "6460"
		  Position		  [50, 48, 195, 72]
		  Value			  "cs_charge_pwr*fc_trq_scale"
		}
		Block {
		  BlockType		  From
		  Name			  "From <ess>1"
		  SID			  "6461"
		  Position		  [65, 94, 110, 116]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "SOC"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Goal"
		  SID			  "6462"
		  Position		  [20, 134, 155, 156]
		  Value			  "(cs_lo_soc+cs_hi_soc)/2"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "6463"
		  Ports			  [2, 1]
		  Position		  [280, 52, 310, 83]
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  SID			  "6464"
		  Ports			  [2, 1]
		  Position		  [230, 142, 260, 173]
		  Inputs		  "*/"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Range"
		  SID			  "6465"
		  Position		  [20, 174, 155, 196]
		  Value			  "(cs_hi_soc-cs_lo_soc)/2"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation"
		  SID			  "6466"
		  Ports			  [1, 1]
		  Position		  [330, 55, 360, 85]
		  InputPortMap		  "u0"
		  UpperLimit		  "inf"
		  LowerLimit		  "-inf"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "6467"
		  Ports			  [2, 1]
		  Position		  [180, 97, 210, 128]
		  Inputs		  "-+"
		}
		Block {
		  BlockType		  Outport
		  Name			  "add'l pwr req'd\n(W)"
		  SID			  "6468"
		  Position		  [395, 63, 425, 77]
		  IconDisplay		  "Port number"
		}
		Line {
		  SrcBlock		  "From <ess>1"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Goal"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Range"
		  SrcPort		  1
		  Points		  [55, 0]
		  DstBlock		  "Product1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Saturation"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation"
		  SrcPort		  1
		  DstBlock		  "add'l pwr req'd\n(W)"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Product
	      Name		      "desired engine trq \nmode 3 (Nm)"
	      SID		      "6469"
	      Ports		      [2, 1]
	      Position		      [615, 102, 645, 133]
	      Inputs		      "/*"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "desired engine trq \nmode 4 (Nm)"
	      SID		      "6470"
	      Position		      [585, 13, 615, 37]
	      InputValues	      "ptc_fc_mc_iol_pwr_vec"
	      Table		      "ptc_fc_mc_iol_trq_vec"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "mode==3?"
	      SID		      "6471"
	      Position		      [310, 115, 340, 145]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "mode==4?"
	      SID		      "6472"
	      Position		      [680, 50, 710, 80]
	      Threshold		      "3.5"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "old engine spin up"
	      SID		      "6473"
	      Ports		      [2]
	      Position		      [840, 217, 870, 268]
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"old engine spin up"
		Location		[251, 321, 809, 528]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "In1"
		  SID			  "6474"
		  Position		  [60, 25, 90, 40]
		  BlockRotation		  270
		  BlockMirror		  on
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "In2"
		  SID			  "6475"
		  Position		  [25, 63, 55, 77]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant6"
		  SID			  "6476"
		  Position		  [90, 104, 110, 126]
		  BlockMirror		  on
		  Value			  "0"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant7"
		  SID			  "6477"
		  Position		  [160, 124, 180, 146]
		  BlockMirror		  on
		  Value			  "eps"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  SID			  "6478"
		  Position		  [375, 35, 405, 65]
		  Gain			  ".5"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  SID			  "6479"
		  Ports			  [2, 1]
		  Position		  [315, 72, 345, 103]
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator1"
		  SID			  "6480"
		  Ports			  [1, 1]
		  Position		  [265, 119, 295, 151]
		  Operator		  "NOT"
		  Inputs		  "1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "6481"
		  Position		  [215, 120, 245, 150]
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  SID			  "6482"
		  Ports			  [2, 1]
		  Position		  [155, 62, 185, 93]
		  Operator		  ">"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch2"
		  SID			  "6483"
		  Position		  [90, 55, 120, 85]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch3"
		  SID			  "6484"
		  Position		  [435, 75, 465, 105]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Terminator
		  Name			  "Terminator"
		  SID			  "6485"
		  Position		  [485, 80, 505, 100]
		}
		Line {
		  SrcBlock		  "In2"
		  SrcPort		  1
		  DstBlock		  "Switch2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Switch3"
		  SrcPort		  1
		  DstBlock		  "Terminator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant6"
		  SrcPort		  1
		  Points		  [-10, 0]
		  DstBlock		  "Switch2"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  DstBlock		  "Switch3"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant7"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    DstBlock		    "Logical\nOperator"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Logical\nOperator1"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Switch2"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -20; 225, 0]
		    Branch {
		    DstBlock		    "Gain"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 50]
		    DstBlock		    "Switch3"
		    DstPort		    3
		    }
		  }
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Switch3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "In1"
		  SrcPort		  1
		  DstBlock		  "Switch2"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "engine torque\nand speed\n(Nm), (rad/s)"
	      SID		      "6486"
	      Position		      [910, 150, 930, 170]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "mode==3?"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		Points			[0, 0]
		Branch {
		  Points		  [0, 100]
		  DstBlock		  "To Workspace1"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 50]
		  DstBlock		  "Saturation7"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[0, -105]
		DstBlock		"Saturation3"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Speed Interp"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "power req'd\nby FC (W)"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		DstBlock		"Sum1"
		DstPort			2
	      }
	      Branch {
		Points			[65, 0; 0, -10]
		DstBlock		"mode==3?"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "Sum1"
	      SrcPort		      1
	      DstBlock		      "mode==3?"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [15, 0; 0, 60]
	      DstBlock		      "mode==3?"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant8"
	      SrcPort		      1
	      Points		      [0, 10]
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "chg pwr req'd\n(W)"
	      SrcPort		      1
	      Points		      [0, -10]
	      DstBlock		      "Sum1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mode"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		Points			[0, 60]
		DstBlock		"Speed Interp"
		DstPort			1
	      }
	      Branch {
		Points			[65, 0]
		Branch {
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  1
		}
		Branch {
		  Points		  [95, 0; 0, 30]
		  DstBlock		  "mode==4?"
		  DstPort		  2
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Saturation7"
	      SrcPort		      1
	      Points		      [140, 0; 0, -55]
	      DstBlock		      "desired engine trq \nmode 3 (Nm)"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "FC on"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		Points			[0, -105]
		DstBlock		"Switch1"
		DstPort			2
	      }
	      Branch {
		DstBlock		"old engine spin up"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Speed Interp"
	      SrcPort		      1
	      Points		      [40, 0]
	      Branch {
		Points			[0, 115; 325, 0]
		Branch {
		  Points		  [0, -60]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Branch {
		  DstBlock		  "old engine spin up"
		  DstPort		  1
		}
	      }
	      Branch {
		DstBlock		"Sum"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "desired engine trq \nmode 3 (Nm)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation3"
	      SrcPort		      1
	      DstBlock		      "desired engine trq \nmode 4 (Nm)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "desired engine trq \nmode 4 (Nm)"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "mode==4?"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "desired engine trq \nmode 3 (Nm)"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "mode==4?"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      DstBlock		      "engine torque\nand speed\n(Nm), (rad/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "mode==4?"
	      SrcPort		      1
	      Points		      [25, 0; 0, 75]
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	  }
	}
	Block {
	  BlockType		  From
	  Name			  "From <vc>"
	  SID			  "6487"
	  Position		  [130, 160, 200, 180]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "engine_on"
	}
	Block {
	  BlockType		  From
	  Name			  "From <vc>1"
	  SID			  "6488"
	  Position		  [235, 180, 305, 200]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "mode"
	}
	Block {
	  BlockType		  MinMax
	  Name			  "MinMax"
	  SID			  "6489"
	  Ports			  [2, 1]
	  Position		  [485, 97, 515, 128]
	  Function		  "max"
	  Inputs		  "2"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux"
	  SID			  "6490"
	  Ports			  [2, 1]
	  Position		  [660, 117, 695, 153]
	  Inputs		  "2"
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch"
	  SID			  "6491"
	  Position		  [600, 110, 630, 140]
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace"
	  SID			  "6492"
	  Ports			  [1]
	  Position		  [240, 93, 305, 117]
	  VariableName		  "cl_trq_in_r"
	  MaxDataPoints		  "inf"
	  SampleTime		  "-1"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace1"
	  SID			  "6493"
	  Ports			  [1]
	  Position		  [155, 114, 215, 136]
	  VariableName		  "cl_spd_in_r"
	  MaxDataPoints		  "inf"
	  SampleTime		  "-1"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace2"
	  SID			  "6494"
	  Ports			  [1]
	  Position		  [680, 70, 740, 90]
	  VariableName		  "cs_trq_in_r"
	  MaxDataPoints		  "inf"
	  SampleTime		  "-1"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace3"
	  SID			  "6495"
	  Ports			  [1]
	  Position		  [470, 169, 530, 191]
	  VariableName		  "cs_spd_in_r"
	  MaxDataPoints		  "inf"
	  SampleTime		  "-1"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "help"
	  SID			  "6496"
	  Ports			  []
	  Position		  [551, 24, 582, 67]
	  BackgroundColor	  "yellow"
	  DropShadow		  on
	  ShowName		  off
	  OpenFcn		  "web(['file:\\\\\\' which('Parallel.htm')])"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskPortRotate	  "default"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "help"
	    Location		    [203, 331, 569, 538]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "minimum trq\n(Nm)"
	  SID			  "6497"
	  Ports			  [1, 1]
	  Position		  [420, 90, 450, 120]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "minimum trq\n(Nm)"
	    Location		    [209, 214, 793, 522]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "trq and spd req'd\ninto trq coupler\n(N*m, rad/s)"
	      SID		      "6498"
	      Position		      [40, 108, 70, 122]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)"
	      SID		      "6499"
	      Position		      [60, 223, 130, 247]
	      Value		      "cs_lo_soc"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "6500"
	      Position		      [355, 215, 375, 235]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <ess>"
	      SID		      "6501"
	      Position		      [60, 174, 105, 196]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      SID		      "6502"
	      Position		      [280, 89, 385, 141]
	      Gain		      "cs_min_trq_frac"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "6503"
	      Ports		      [2, 1]
	      Position		      [200, 177, 230, 208]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      Selector
	      Name		      "Selector"
	      SID		      "6504"
	      Ports		      [1, 1]
	      Position		      [120, 100, 150, 130]
	      InputPortWidth	      "2"
	      IndexOptions	      "Index vector (dialog)"
	      Indices		      "2"
	      OutputSizes	      "1"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "6505"
	      Position		      [405, 180, 435, 210]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Terminator
	      Name		      "Terminator"
	      SID		      "6506"
	      Position		      [400, 30, 420, 50]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "constant threshhold trq (N*m)"
	      SID		      "6507"
	      Position		      [240, 28, 370, 52]
	      Value		      "max(fc_max_trq)*0.33"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max_torque lookup"
	      SID		      "6508"
	      Position		      [200, 103, 230, 127]
	      InputValues	      "fc_map_spd"
	      Table		      "fc_max_trq*fc_trq_scale"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "minimum trq\n(N*m)"
	      SID		      "6509"
	      Position		      [480, 188, 510, 202]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "max_torque lookup"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Selector"
	      SrcPort		      1
	      DstBlock		      "max_torque lookup"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "trq and spd req'd\ninto trq coupler\n(N*m, rad/s)"
	      SrcPort		      1
	      DstBlock		      "Selector"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "constant threshhold trq (N*m)"
	      SrcPort		      1
	      DstBlock		      "Terminator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [5, 0; 0, -20]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "minimum trq\n(N*m)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "(--)"
	      SrcPort		      1
	      Points		      [25, 0; 0, -35]
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <ess>"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "mod pwr req"
	  SID			  "6510"
	  Ports			  [1, 1]
	  Position		  [205, 15, 235, 65]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "mod pwr req"
	    Location		    [214, 74, 955, 744]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "In1"
	      SID		      "6511"
	      Position		      [105, 43, 135, 57]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      SID		      "6512"
	      Position		      [80, 73, 205, 97]
	      BackgroundColor	      "gray"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "acc_mech_pwr_est"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      SID		      "6513"
	      Ports		      [2, 1]
	      Position		      [265, 31, 280, 104]
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Out1"
	      SID		      "6514"
	      Position		      [305, 63, 335, 77]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "Out1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "In1"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  Product
	  Name			  "raw pwr req"
	  SID			  "6515"
	  Ports			  [1, 1]
	  Position		  [135, 24, 165, 56]
	  FontName		  "Arial"
	  Inputs		  "1"
	}
	Block {
	  BlockType		  Outport
	  Name			  "trq and spd\nreq'd from\nengine\n(N*m, rad/s)"
	  SID			  "6516"
	  Position		  [715, 128, 745, 142]
	  IconDisplay		  "Port number"
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  2
	  Points		  [5, 0]
	  Branch {
	    Points		    [0, 110; 520, 0]
	    DstBlock		    "Mux"
	    DstPort		    2
	  }
	  Branch {
	    DstBlock		    "To Workspace1"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  2
	  DstBlock		  "To Workspace3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "FC trq and spd"
	  SrcPort		  1
	  DstBlock		  "Demux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "mod pwr req"
	  SrcPort		  1
	  Points		  [100, 0]
	  DstBlock		  "FC trq and spd"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  1
	  DstBlock		  "To Workspace"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "trq and spd req'd\ninto clutch\n(N*m, rad/s)"
	  SrcPort		  1
	  Points		  [20, 0]
	  Branch {
	    Points		    [0, 40]
	    Branch {
	      DstBlock		      "Demux1"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [310, 0]
	      DstBlock		      "minimum trq\n(Nm)"
	      DstPort		      1
	    }
	  }
	  Branch {
	    DstBlock		    "raw pwr req"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Switch"
	  SrcPort		  1
	  Points		  [10, 0]
	  Branch {
	    Points		    [0, -45]
	    DstBlock		    "To Workspace2"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Mux"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "minimum trq\n(Nm)"
	  SrcPort		  1
	  DstBlock		  "MinMax"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  1
	  Points		  [15, 0]
	  DstBlock		  "MinMax"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Mux"
	  SrcPort		  1
	  DstBlock		  "trq and spd\nreq'd from\nengine\n(N*m, rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant"
	  SrcPort		  1
	  Points		  [10, 0]
	  DstBlock		  "Switch"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "MinMax"
	  SrcPort		  1
	  DstBlock		  "Switch"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <vc>1"
	  SrcPort		  1
	  Points		  [10, 0; 0, -10]
	  DstBlock		  "FC trq and spd"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <vc>"
	  SrcPort		  1
	  Points		  [10, 0]
	  Branch {
	    DstBlock		    "FC trq and spd"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [0, 50; 320, 0; 0, -95]
	    DstBlock		    "Switch"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "raw pwr req"
	  SrcPort		  1
	  DstBlock		  "mod pwr req"
	  DstPort		  1
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "fuel cell\nadaptive\n<cs>"
      SID		      "323"
      Ports		      [1, 1]
      Position		      [320, 557, 365, 593]
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_cs.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"fuel cell\nadaptive\n<cs>"
	Location		[204, 140, 895, 677]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "power req'd\nby bus (W)"
	  SID			  "6517"
	  Position		  [85, 58, 115, 72]
	  IconDisplay		  "Port number"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Delta SOC\nexpected from regen"
	  SID			  "6518"
	  Ports			  [2, 1]
	  Position		  [220, 97, 250, 133]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "Delta SOC\nexpected from regen"
	    Location		    [204, 375, 794, 659]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Power req'd\nby bus (W)"
	      SID		      "6519"
	      Position		      [50, 188, 80, 202]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Soc"
	      SID		      "6520"
	      Position		      [65, 33, 95, 47]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "  "
	      SID		      "6521"
	      Position		      [325, 208, 350, 232]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      " 2"
	      SID		      "6522"
	      Position		      [200, 153, 225, 177]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Delta\nSOC"
	      SID		      "6523"
	      Ports		      [2, 1]
	      Position		      [265, 48, 290, 77]
	      Inputs		      "-+"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From<mc>1"
	      SID		      "6524"
	      Position		      [100, 138, 190, 162]
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_pwr_out_a"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "6525"
	      Ports		      [2, 1]
	      Position		      [300, 162, 330, 193]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory1"
	      SID		      "6526"
	      Position		      [210, 29, 240, 51]
	      X0		      "ess_init_soc"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Regen "
	      SID		      "6527"
	      Position		      [375, 165, 405, 195]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Regen flag conditions"
	      SID		      "6528"
	      Position		      [195, 198, 220, 222]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "6529"
	      Ports		      [2, 1]
	      Position		      [240, 187, 270, 218]
	      ShowName		      off
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "6530"
	      Ports		      [2, 1]
	      Position		      [240, 142, 270, 173]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "6531"
	      Ports		      [1, 1]
	      Position		      [315, 100, 345, 130]
	      ShowName		      off
	      InputPortMap	      "u0"
	      UpperLimit	      "1"
	      LowerLimit	      "0"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Subsystem"
	      SID		      "6532"
	      Ports		      [1, 1]
	      Position		      [435, 164, 500, 196]
	      ShowName		      off
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Running Average"
	      MaskDescription	      "Running Average"
	      MaskHelp		      "Output is the average of the last (Averaging Time) seconds of input."
	      MaskPromptString	      "Averaging Time (s)"
	      MaskStyleString	      "edit"
	      MaskVariables	      "n=@1;"
	      MaskTunableValueString  "on"
	      MaskEnableString	      "on"
	      MaskVisibilityString    "on"
	      MaskToolTipString	      "on"
	      MaskDisplay	      "disp('Running\\nAverage')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "cs_regen_avg_time"
	      System {
		Name			"Subsystem"
		Location		[130, 153, 575, 369]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "6533"
		  Position		  [30, 55, 50, 75]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "1/average time"
		  SID			  "6534"
		  Position		  [255, 154, 295, 176]
		  FontName		  "Arial"
		  Value			  "1/n"
		}
		Block {
		  BlockType		  Integrator
		  Name			  "Integrator"
		  SID			  "6535"
		  Ports			  [1, 1]
		  Position		  [80, 55, 100, 75]
		  ShowName		  off
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "6536"
		  Ports			  [2, 1]
		  Position		  [340, 66, 360, 84]
		  ShowName		  off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "6537"
		  Ports			  [2, 1]
		  Position		  [225, 60, 245, 80]
		  ShowName		  off
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  TransportDelay
		  Name			  "Transport\nDelay"
		  SID			  "6538"
		  Ports			  [1, 1]
		  Position		  [155, 90, 195, 120]
		  DelayTime		  "n"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "6539"
		  Position		  [390, 65, 410, 85]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "1/average time"
		  SrcPort		  1
		  Points		  [15, 0; 0, -85]
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  DstBlock		  "Integrator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Transport\nDelay"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Integrator"
		  SrcPort		  1
		  Points		  [25, 0]
		  Branch {
		    Points		    [0, 40]
		    DstBlock		    "Transport\nDelay"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Delta SOC\nregen"
	      SID		      "6540"
	      Position		      [535, 173, 565, 187]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Delta\nSOC"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Regen "
	      SrcPort		      1
	      DstBlock		      "Subsystem"
	      DstPort		      1
	    }
	    Line {
	      Labels		      [0, 0]
	      SrcBlock		      "Subsystem"
	      SrcPort		      1
	      DstBlock		      "Delta SOC\nregen"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      DstBlock		      "Regen "
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Soc"
	      SrcPort		      1
	      Points		      [80, 0]
	      Branch {
		Points			[0, 30]
		DstBlock		"Delta\nSOC"
		DstPort			2
	      }
	      Branch {
		DstBlock		"Memory1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Memory1"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Delta\nSOC"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Regen "
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Power req'd\nby bus (W)"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "  "
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Regen "
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Regen flag conditions"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      " 2"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From<mc>1"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux"
	  SID			  "6541"
	  Ports			  [1, 2]
	  Position		  [475, 203, 480, 272]
	  BackgroundColor	  "black"
	  ShowName		  off
	  Outputs		  "2"
	}
	Block {
	  BlockType		  From
	  Name			  "From <ess>"
	  SID			  "6542"
	  Position		  [65, 155, 125, 175]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "SOC"
	}
	Block {
	  BlockType		  From
	  Name			  "From <ess>1"
	  SID			  "6543"
	  Position		  [55, 253, 140, 277]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "ess_max_pwr"
	}
	Block {
	  BlockType		  From
	  Name			  "From <ess>2"
	  SID			  "6544"
	  Position		  [55, 303, 155, 327]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "ess_max_chg_pwr"
	}
	Block {
	  BlockType		  From
	  Name			  "From <vc>"
	  SID			  "6545"
	  Position		  [420, 289, 480, 311]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "key_on"
	}
	Block {
	  BlockType		  From
	  Name			  "From <vc> "
	  SID			  "6546"
	  Position		  [55, 405, 150, 425]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_pwr_out_a"
	}
	Block {
	  BlockType		  From
	  Name			  "From<ess>"
	  SID			  "6547"
	  Position		  [55, 354, 130, 376]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "ess_tmp"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>3"
	  SID			  "6548"
	  Position		  [570, 273, 645, 297]
	  GotoTag		  "engine_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Logic
	  Name			  "Logical\nOperator"
	  SID			  "6549"
	  Ports			  [2, 1]
	  Position		  [510, 255, 540, 315]
	}
	Block {
	  BlockType		  Memory
	  Name			  "Memory"
	  SID			  "6550"
	  Position		  [175, 403, 200, 427]
	}
	Block {
	  BlockType		  S-Function
	  Name			  "Minimize\nenergy"
	  SID			  "6551"
	  Ports			  [1, 1]
	  Position		  [335, 220, 455, 260]
	  FunctionName		  "sfun_fuelcell_adapt"
	  Parameters		  "cs_max_pwr_rise_rate,cs_max_pwr_fall_rate,fc_fuel_lhv,cs_shutoff,cs_min_pwr,cs_max_pwr,cs_mean_eff_b"
	  "ool,cs_mean_eff,cs_plot_output"
	  EnableBusSupport	  off
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux"
	  SID			  "6552"
	  Ports			  [8, 1]
	  Position		  [300, 39, 310, 441]
	  ShowName		  off
	  Inputs		  "8"
	  DisplayOption		  "bar"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "SOC regulation factor"
	  SID			  "6553"
	  Ports			  [1, 1]
	  Position		  [205, 201, 250, 229]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "SOC regulation factor"
	    Location		    [237, 527, 903, 713]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "In1"
	      SID		      "6554"
	      Position		      [120, 58, 150, 72]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "1"
	      SID		      "6555"
	      Position		      [445, 20, 465, 40]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Goal"
	      SID		      "6556"
	      Position		      [25, 94, 160, 116]
	      Value		      "(cs_lo_soc+cs_hi_soc)/2"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      SID		      "6557"
	      Ports		      [2, 1]
	      Position		      [235, 102, 265, 133]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Range"
	      SID		      "6558"
	      Position		      [25, 134, 160, 156]
	      Value		      "(cs_hi_soc-cs_lo_soc)/2"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "6559"
	      Ports		      [1, 1]
	      Position		      [310, 105, 340, 135]
	      InputPortMap	      "u0"
	      UpperLimit	      "1"
	      LowerLimit	      "-1"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      SID		      "6560"
	      Ports		      [2, 1]
	      Position		      [185, 57, 215, 88]
	      Inputs		      "-+"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "6561"
	      Position		      [505, 55, 535, 85]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "between\n 0.8 and 1.2"
	      SID		      "6562"
	      Position		      [380, 105, 440, 135]
	      Expr		      "0.2*u+1"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "boolean sustaining/depleting"
	      SID		      "6563"
	      Position		      [340, 59, 475, 81]
	      Value		      "cs_charge_deplete_bool"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Out1"
	      SID		      "6564"
	      Position		      [600, 63, 630, 77]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Range"
	      SrcPort		      1
	      Points		      [55, 0]
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Goal"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "In1"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "between\n 0.8 and 1.2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "boolean sustaining/depleting"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "1"
	      SrcPort		      1
	      Points		      [10, 0; 0, 30]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "between\n 0.8 and 1.2"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Out1"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "engine pwr (W)"
	  SID			  "6565"
	  Position		  [545, 213, 575, 227]
	  IconDisplay		  "Port number"
	}
	Line {
	  SrcBlock		  "power req'd\nby bus (W)"
	  SrcPort		  1
	  Points		  [75, 0]
	  Branch {
	    DstBlock		    "Mux"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 40]
	    DstBlock		    "Delta SOC\nexpected from regen"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Mux"
	  SrcPort		  1
	  DstBlock		  "Minimize\nenergy"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <ess>"
	  SrcPort		  1
	  Points		  [0, 0; 30, 0]
	  Branch {
	    Points		    [20, 0]
	    Branch {
	      DstBlock		      "Mux"
	      DstPort		      3
	    }
	    Branch {
	      Points		      [0, 50]
	      DstBlock		      "SOC regulation factor"
	      DstPort		      1
	    }
	  }
	  Branch {
	    Points		    [0, -40]
	    DstBlock		    "Delta SOC\nexpected from regen"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "Minimize\nenergy"
	  SrcPort		  1
	  DstBlock		  "Demux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <vc>"
	  SrcPort		  1
	  DstBlock		  "Logical\nOperator"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  2
	  Points		  [10, 0]
	  DstBlock		  "Logical\nOperator"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  1
	  DstBlock		  "engine pwr (W)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Logical\nOperator"
	  SrcPort		  1
	  DstBlock		  "Goto <fc>3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "SOC regulation factor"
	  SrcPort		  1
	  DstBlock		  "Mux"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <ess>1"
	  SrcPort		  1
	  DstBlock		  "Mux"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "From <ess>2"
	  SrcPort		  1
	  DstBlock		  "Mux"
	  DstPort		  6
	}
	Line {
	  SrcBlock		  "From<ess>"
	  SrcPort		  1
	  DstBlock		  "Mux"
	  DstPort		  7
	}
	Line {
	  SrcBlock		  "Memory"
	  SrcPort		  1
	  DstBlock		  "Mux"
	  DstPort		  8
	}
	Line {
	  SrcBlock		  "From <vc> "
	  SrcPort		  1
	  DstBlock		  "Memory"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Delta SOC\nexpected from regen"
	  SrcPort		  1
	  DstBlock		  "Mux"
	  DstPort		  2
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "fuel cell\ncontrol strategy\n<cs>"
      SID		      "324"
      Ports		      [1, 1]
      Position		      [220, 549, 255, 591]
      BackgroundColor	      "yellow"
      ShowPortLabels	      "none"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_cs.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"fuel cell\ncontrol strategy\n<cs>"
	Location		[31, 75, 545, 336]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "power req'd\nby bus (W)"
	  SID			  "6566"
	  Position		  [25, 158, 55, 172]
	  IconDisplay		  "Port number"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "FC on"
	  SID			  "6567"
	  Ports			  [4, 1]
	  Position		  [305, 73, 335, 107]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "FC on"
	    Location		    [19, 94, 984, 697]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "ess max pwr would\nbe insufficient"
	      SID		      "6568"
	      Position		      [35, 563, 65, 577]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "SOC"
	      SID		      "6569"
	      Position		      [25, 298, 55, 312]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "FC pwr\ncommand"
	      SID		      "6570"
	      Position		      [20, 398, 50, 412]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "bus pwr req"
	      SID		      "6571"
	      Position		      [85, 523, 115, 537]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "6572"
	      Position		      [80, 371, 130, 389]
	      ShowName		      off
	      Value		      "cs_hi_soc"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "6573"
	      Position		      [15, 442, 205, 468]
	      ShowName		      off
	      Value		      "cs_min_pwr*fc_pwr_scale"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant10"
	      SID		      "6574"
	      Position		      [675, 316, 735, 334]
	      BlockMirror	      on
	      ShowName		      off
	      Value		      "cs_fc_on"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant11"
	      SID		      "6575"
	      Position		      [215, 537, 235, 553]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "6576"
	      Position		      [95, 257, 150, 273]
	      ShowName		      off
	      Value		      "cs_lo_soc"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "6577"
	      Position		      [95, 72, 115, 88]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "6578"
	      Position		      [95, 42, 115, 58]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "6579"
	      Position		      [100, 101, 185, 119]
	      ShowName		      off
	      Value		      "cs_min_off_time"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "6580"
	      Position		      [86, 200, 284, 225]
	      BlockRotation	      270
	      ShowName		      off
	      Value		      "1.2*cs_min_pwr*fc_pwr_scale"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant7"
	      SID		      "6581"
	      Position		      [760, 320, 800, 340]
	      BlockMirror	      on
	      ShowName		      off
	      Value		      "fc_on"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant8"
	      SID		      "6582"
	      Position		      [235, 270, 355, 290]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Value		      "cs_charge_deplete_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant9"
	      SID		      "6583"
	      Position		      [365, 437, 385, 453]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <ess>2"
	      SID		      "6584"
	      Position		      [50, 478, 160, 502]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_max_chg_pwr"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>"
	      SID		      "6585"
	      Position		      [755, 242, 810, 258]
	      BlockMirror	      on
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "key_on"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      SID		      "6586"
	      Position		      [240, 320, 270, 350]
	      Gain		      "0.5"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "6587"
	      Ports		      [2, 1]
	      Position		      [295, 367, 325, 398]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "6588"
	      Ports		      [2, 1]
	      Position		      [390, 242, 420, 273]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator10"
	      SID		      "6589"
	      Ports		      [1, 1]
	      Position		      [390, 489, 420, 521]
	      ShowName		      off
	      Operator		      "NOT"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator11"
	      SID		      "6590"
	      Ports		      [2, 1]
	      Position		      [685, 270, 715, 305]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator13"
	      SID		      "6591"
	      Ports		      [3, 1]
	      Position		      [765, 272, 795, 308]
	      ShowName		      off
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator2"
	      SID		      "6592"
	      Ports		      [3, 1]
	      Position		      [335, 234, 365, 266]
	      ShowName		      off
	      Operator		      "OR"
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator3"
	      SID		      "6593"
	      Ports		      [2, 1]
	      Position		      [265, 67, 295, 98]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator4"
	      SID		      "6594"
	      Ports		      [3, 1]
	      Position		      [560, 253, 590, 287]
	      ShowName		      off
	      Operator		      "OR"
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator5"
	      SID		      "6595"
	      Ports		      [2, 1]
	      Position		      [620, 261, 650, 294]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator6"
	      SID		      "6596"
	      Ports		      [2, 1]
	      Position		      [440, 322, 470, 353]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator7"
	      SID		      "6597"
	      Ports		      [1, 1]
	      Position		      [440, 279, 470, 311]
	      ShowName		      off
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator8"
	      SID		      "6598"
	      Ports		      [2, 1]
	      Position		      [485, 392, 515, 423]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator9"
	      SID		      "6599"
	      Ports		      [2, 1]
	      Position		      [335, 487, 365, 518]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "6600"
	      Position		      [385, 15, 415, 45]
	      BlockMirror	      on
	      X0		      "cs_fc_init_state"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "6601"
	      Ports		      [2, 1]
	      Position		      [150, 357, 180, 388]
	      ShowName		      off
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "6602"
	      Ports		      [2, 1]
	      Position		      [240, 397, 270, 428]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "6603"
	      Ports		      [2, 1]
	      Position		      [190, 242, 220, 273]
	      ShowName		      off
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      SID		      "6604"
	      Ports		      [2, 1]
	      Position		      [210, 57, 240, 88]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator4"
	      SID		      "6605"
	      Ports		      [2, 1]
	      Position		      [200, 152, 230, 183]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator5"
	      SID		      "6606"
	      Ports		      [2, 1]
	      Position		      [295, 297, 325, 328]
	      ShowName		      off
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator6"
	      SID		      "6607"
	      Ports		      [2, 1]
	      Position		      [425, 397, 455, 428]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator7"
	      SID		      "6608"
	      Ports		      [2, 1]
	      Position		      [270, 447, 300, 478]
	      ShowName		      off
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator8"
	      SID		      "6609"
	      Ports		      [2, 1]
	      Position		      [270, 522, 300, 553]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Subsystem"
	      SID		      "6610"
	      Ports		      [1, 1]
	      Position		      [80, 143, 125, 177]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Running Average"
	      MaskDescription	      "Running Average"
	      MaskHelp		      "Output is the average of the last (Averaging Time) seconds of input."
	      MaskPromptString	      "Averaging Time (s)"
	      MaskStyleString	      "edit"
	      MaskVariables	      "n=@1;"
	      MaskTunableValueString  "on"
	      MaskEnableString	      "on"
	      MaskVisibilityString    "on"
	      MaskToolTipString	      "on"
	      MaskDisplay	      "disp('Running\\nAverage')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "5"
	      System {
		Name			"Subsystem"
		Location		[115, 388, 551, 664]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "6611"
		  Position		  [30, 55, 50, 75]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "6612"
		  Position		  [255, 154, 295, 176]
		  FontName		  "Arial"
		  Value			  "n"
		}
		Block {
		  BlockType		  Integrator
		  Name			  "Integrator"
		  SID			  "6613"
		  Ports			  [1, 1]
		  Position		  [80, 55, 100, 75]
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "6614"
		  Ports			  [2, 1]
		  Position		  [340, 66, 360, 84]
		  Inputs		  "*/"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "6615"
		  Ports			  [2, 1]
		  Position		  [225, 60, 245, 80]
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  TransportDelay
		  Name			  "Transport\nDelay"
		  SID			  "6616"
		  Ports			  [1, 1]
		  Position		  [155, 90, 195, 120]
		  DelayTime		  "n"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "6617"
		  Position		  [390, 65, 410, 85]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [15, 0; 0, -85]
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  DstBlock		  "Integrator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Transport\nDelay"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Integrator"
		  SrcPort		  1
		  Points		  [25, 0]
		  Branch {
		    Points		    [0, 40]
		    DstBlock		    "Transport\nDelay"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      SID		      "6618"
	      Ports		      [2, 1]
	      Position		      [190, 317, 220, 348]
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum2"
	      SID		      "6619"
	      Ports		      [2, 1]
	      Position		      [195, 482, 225, 513]
	      Inputs		      "-+"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "6620"
	      Position		      [490, 279, 520, 311]
	      FontName		      "Arial"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "dt"
	      SID		      "6621"
	      Ports		      [0, 1]
	      Position		      [360, 390, 390, 420]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"dt"
		Location		[80, 285, 429, 424]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "6622"
		  Position		  [65, 60, 85, 80]
		  FontName		  "Arial"
		  FontSize		  8
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "6623"
		  Position		  [125, 85, 160, 105]
		  FontName		  "Arial"
		  FontSize		  8
		  X0			  "-1"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "6624"
		  Ports			  [2, 1]
		  Position		  [205, 65, 225, 85]
		  FontName		  "Arial"
		  FontSize		  8
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "6625"
		  Position		  [255, 65, 275, 85]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  Points		  [10, 0; 0, -15]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    Points		    [0, 25]
		    DstBlock		    "Memory1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "just shut \ndown"
	      SID		      "6626"
	      Ports		      [1, 1]
	      Position		      [50, 48, 80, 82]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"just shut \ndown"
		Location		[71, 150, 410, 293]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "state"
		  SID			  "6627"
		  Position		  [15, 20, 35, 40]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  SID			  "6628"
		  Ports			  [2, 1]
		  Position		  [220, 23, 250, 47]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator1"
		  SID			  "6629"
		  Ports			  [1, 1]
		  Position		  [135, 18, 165, 42]
		  FontName		  "Arial"
		  Operator		  "NOT"
		  Inputs		  "1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "6630"
		  Position		  [135, 85, 170, 105]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  Outport
		  Name			  "trigger"
		  SID			  "6631"
		  Position		  [295, 25, 315, 45]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  DstBlock		  "trigger"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  Points		  [30, 0]
		  DstBlock		  "Logical\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "state"
		  SrcPort		  1
		  Points		  [50, 0]
		  Branch {
		    Points		    [0, 65]
		    DstBlock		    "Memory1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Logical\nOperator1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Logical\nOperator1"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "no-lag\nReset Integrator"
	      SID		      "6632"
	      Ports		      [3, 1]
	      Position		      [135, 44, 175, 86]
	      ShowName		      off
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "No-lag Reset Integrator"
	      MaskDescription	      "No-lag Reset Integrator"
	      MaskHelp		      "Integrates first input using Euler technique.\\nAt the time step that input 2 <> zero,\\noutpu"
	      "t is reset to input 3."
	      MaskPromptString	      "Initial Value"
	      MaskStyleString	      "edit"
	      MaskVariables	      "initval=@1;"
	      MaskTunableValueString  "on"
	      MaskEnableString	      "on"
	      MaskVisibilityString    "on"
	      MaskToolTipString	      "on"
	      MaskDisplay	      "disp('1/s\\nw/ reset\\nno lag')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "0"
	      System {
		Name			"no-lag\nReset Integrator"
		Location		[265, 331, 787, 595]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "6633"
		  Position		  [60, 100, 80, 120]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "in_2"
		  SID			  "6634"
		  Position		  [60, 140, 80, 160]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "in_3"
		  SID			  "6635"
		  Position		  [45, 185, 65, 205]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "6636"
		  Position		  [105, 155, 125, 175]
		  Value			  "0"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "6637"
		  Position		  [340, 55, 375, 75]
		  BlockMirror		  on
		  FontName		  "Arial"
		  X0			  "initval"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "6638"
		  Ports			  [2, 1]
		  Position		  [160, 96, 180, 114]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "6639"
		  Ports			  [2, 1]
		  Position		  [230, 90, 250, 110]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "6640"
		  Position		  [290, 139, 320, 171]
		  FontName		  "Arial"
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "dt"
		  SID			  "6641"
		  Ports			  [0, 1]
		  Position		  [112, 50, 138, 80]
		  BlockRotation		  270
		  BlockMirror		  on
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "dt"
		    Location		    [80, 285, 429, 424]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "6642"
		    Position		    [65, 60, 85, 80]
		    FontName		    "Arial"
		    FontSize		    8
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "6643"
		    Position		    [125, 85, 160, 105]
		    FontName		    "Arial"
		    FontSize		    8
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    SID			    "6644"
		    Ports		    [2, 1]
		    Position		    [205, 65, 225, 85]
		    FontName		    "Arial"
		    FontSize		    8
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "6645"
		    Position		    [255, 65, 275, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [10, 0; 0, -15]
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    }
		  }
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "in_2==0"
		  SID			  "6646"
		  Ports			  [2, 1]
		  Position		  [160, 143, 190, 167]
		  Operator		  "=="
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "6647"
		  Position		  [455, 145, 475, 165]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [15, 0]
		  DstBlock		  "in_2==0"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "in_2==0"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  Points		  [85, 0]
		  Branch {
		    Points		    [0, -90]
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "out_1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [10, 0; 0, 45]
		  DstBlock		  "Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [-130, 0; 0, 30]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "dt"
		  SrcPort		  1
		  Points		  [0, 15]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "in_2"
		  SrcPort		  1
		  DstBlock		  "in_2==0"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "in_3"
		  SrcPort		  1
		  Points		  [195, 0; 0, -30]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "FC on"
	      SID		      "6648"
	      Position		      [850, 283, 880, 297]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator6"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant9"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Relational\nOperator6"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "dt"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator6"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator8"
	      SrcPort		      1
	      Points		      [25, 0]
	      DstBlock		      "Logical\nOperator4"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant8"
	      SrcPort		      1
	      Points		      [35, 0]
	      Branch {
		Points			[0, 90; 75, 0]
		DstBlock		"Logical\nOperator8"
		DstPort			1
	      }
	      Branch {
		Points			[20, 0; 0, 15]
		DstBlock		"Logical\nOperator7"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [0, -35]
	      DstBlock		      "Logical\nOperator4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [0, 0]
	      Branch {
		DstBlock		"Logical\nOperator6"
		DstPort			1
	      }
	      Branch {
		Points			[50, 0]
		DstBlock		"Switch"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator6"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator7"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Relational\nOperator5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [0, 0]
	      Branch {
		Points			[0, -40]
		DstBlock		"Sum"
		DstPort			2
	      }
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"Sum"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Relational\nOperator2"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [-60, 0]
	      Branch {
		Points			[-285, 0]
		DstBlock		"just shut \ndown"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Logical\nOperator2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "no-lag\nReset Integrator"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "just shut \ndown"
	      SrcPort		      1
	      DstBlock		      "no-lag\nReset Integrator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "no-lag\nReset Integrator"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "no-lag\nReset Integrator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator4"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Subsystem"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator3"
	      SrcPort		      1
	      Points		      [10, 0; 0, 165]
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "SOC"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"Relational\nOperator5"
		DstPort			1
	      }
	      Branch {
		Points			[0, 60]
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	      Branch {
		Points			[0, -55]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "FC pwr\ncommand"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"Relational\nOperator1"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Subsystem"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "ess max pwr would\nbe insufficient"
	      SrcPort		      1
	      Points		      [465, 0; 0, -300]
	      DstBlock		      "Logical\nOperator4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator5"
	      SrcPort		      1
	      Points		      [0, 30]
	      DstBlock		      "Logical\nOperator6"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant11"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator8"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <ess>2"
	      SrcPort		      1
	      DstBlock		      "Sum2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "bus pwr req"
	      SrcPort		      1
	      Points		      [55, 0]
	      Branch {
		DstBlock		"Relational\nOperator8"
		DstPort			1
	      }
	      Branch {
		Points			[0, -25]
		DstBlock		"Sum2"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Sum2"
	      SrcPort		      1
	      Points		      [0, -30]
	      DstBlock		      "Relational\nOperator7"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator9"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator10"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator10"
	      SrcPort		      1
	      Points		      [175, 0; 0, -220]
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator7"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator8"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"Relational\nOperator1"
		DstPort			2
	      }
	      Branch {
		DstBlock		"Relational\nOperator7"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator5"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator11"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant10"
	      SrcPort		      1
	      Points		      [-10, 0; 0, -30]
	      DstBlock		      "Logical\nOperator11"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator4"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator11"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator13"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <vc>"
	      SrcPort		      1
	      Points		      [-10, 0; 0, 30]
	      DstBlock		      "Logical\nOperator13"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant7"
	      SrcPort		      1
	      Points		      [-15, 0; 0, -30]
	      DstBlock		      "Logical\nOperator13"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator13"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		DstBlock		"FC on"
		DstPort			1
	      }
	      Branch {
		Points			[0, -260]
		DstBlock		"Memory"
		DstPort			1
	      }
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "FC pwr command,\nmodified by SOC"
	  SID			  "6649"
	  Ports			  [3, 1]
	  Position		  [205, 149, 235, 181]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "FC pwr command,\nmodified by SOC"
	    Location		    [101, 251, 923, 551]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "SOC"
	      SID		      "6650"
	      Position		      [130, 123, 160, 137]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "raw\npwr command\n(W)"
	      SID		      "6651"
	      Position		      [85, 28, 115, 42]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "pwr req'd at bus (W)"
	      SID		      "6652"
	      Position		      [205, 43, 235, 57]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "6653"
	      Ports		      []
	      Position		      [670, 225, 726, 265]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[168, 385, 648, 555]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "6654"
		  Name			  "1/5/98/98:tm  Modified calculation of additional power required to maintain goal SOC\n(SOC_goal - SOC_ac"
		  "tual) / (0.5*SOC_range) * cs_charge_pwr\ntherefore when\nactual_SOC=cs_lo_soc ==> 1.0  *cs_charge_pwr\nactual_SOC="
		  "goal_SOC ==> 0.0  *cs_charge_pwr\nactual_SOC=cs_hi_soc ==> -1.0 * cs_charge_pwr"
		  Position		  [242, 57]
		  VerticalAlignment	  "top"
		}
		Annotation {
		  SID			  "6655"
		  Name			  "This block determines the additional power required of the fuel convertor\n to maintian an SOC equal to "
		  "the average of cs_hi_soc and cs_lo_soc."
		  Position		  [222, 17]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <ess>2"
	      SID		      "6656"
	      Position		      [175, 78, 285, 102]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_max_chg_pwr"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      SID		      "6657"
	      Position		      [370, 127, 460, 173]
	      Gain		      "cs_charge_pwr"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      SID		      "6658"
	      Position		      [205, 222, 240, 258]
	      ShowName		      off
	      Gain		      "0.5"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain2"
	      SID		      "6659"
	      Position		      [495, 51, 520, 79]
	      Gain		      "-1"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Goal SOC"
	      SID		      "6660"
	      Position		      [35, 177, 175, 203]
	      Value		      "0.5*(cs_hi_soc+cs_lo_soc)"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax1"
	      SID		      "6661"
	      Ports		      [2, 1]
	      Position		      [495, 97, 525, 128]
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Multiplier"
	      SID		      "6662"
	      Ports		      [2, 1]
	      Position		      [270, 132, 300, 163]
	      ShowName		      off
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Multiplier1"
	      SID		      "6663"
	      Ports		      [2, 1]
	      Position		      [625, 57, 655, 88]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "SOC Range"
	      SID		      "6664"
	      Position		      [55, 228, 175, 252]
	      Value		      "cs_hi_soc-cs_lo_soc"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "6665"
	      Ports		      [1, 1]
	      Position		      [320, 135, 350, 165]
	      InputPortMap	      "u0"
	      UpperLimit	      "1"
	      LowerLimit	      "-1"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      SID		      "6666"
	      Ports		      [2, 1]
	      Position		      [210, 122, 240, 153]
	      ShowName		      off
	      Inputs		      "-+"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum1"
	      SID		      "6667"
	      Ports		      [2, 1]
	      Position		      [690, 27, 720, 58]
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum4"
	      SID		      "6668"
	      Ports		      [2, 1]
	      Position		      [335, 67, 365, 98]
	      Inputs		      "+-"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "6669"
	      Position		      [555, 50, 585, 80]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "ess state"
	      SID		      "6670"
	      Position		      [550, 105, 600, 125]
	      Value		      "ess_on"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "pwr command\nmodifed for SOC\n(W)"
	      SID		      "6671"
	      Position		      [750, 38, 780, 52]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "SOC"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Goal SOC"
	      SrcPort		      1
	      Points		      [10, 0; 0, -45]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "SOC Range"
	      SrcPort		      1
	      DstBlock		      "Gain1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Multiplier"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "Multiplier"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      Points		      [5, 0; 0, -85]
	      DstBlock		      "Multiplier"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "MinMax1"
	      SrcPort		      1
	      Points		      [5, 0; 0, -60]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, -30]
		DstBlock		"MinMax1"
		DstPort			2
	      }
	      Branch {
		Points			[65, 0]
		DstBlock		"Switch"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "Gain2"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "raw\npwr command\n(W)"
	      SrcPort		      1
	      DstBlock		      "Sum1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "pwr req'd at bus (W)"
	      SrcPort		      1
	      Points		      [35, 0]
	      Branch {
		Points			[0, 25]
		DstBlock		"Sum4"
		DstPort			1
	      }
	      Branch {
		Points			[205, 0]
		DstBlock		"Gain2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "From <ess>2"
	      SrcPort		      1
	      DstBlock		      "Sum4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum4"
	      SrcPort		      1
	      Points		      [110, 0]
	      DstBlock		      "MinMax1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum1"
	      SrcPort		      1
	      DstBlock		      "pwr command\nmodifed for SOC\n(W)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "ess state"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Multiplier1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Multiplier1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Multiplier1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Sum1"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "FC pwr command,\nw/ limits enforced"
	  SID			  "6672"
	  Ports			  [3, 1]
	  Position		  [305, 139, 335, 171]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "FC pwr command,\nw/ limits enforced"
	    Location		    [156, 171, 855, 561]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "ess max pwr would\nbe insufficient"
	      SID		      "6673"
	      Position		      [45, 33, 75, 47]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "SOC"
	      SID		      "6674"
	      Position		      [45, 88, 75, 102]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "FC pwr\ncommand"
	      SID		      "6675"
	      Position		      [45, 258, 75, 272]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "6676"
	      Position		      [27, 315, 163, 335]
	      BlockRotation	      270
	      Value		      "cs_min_pwr*fc_pwr_scale"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "6677"
	      Position		      [290, 153, 350, 177]
	      BlockMirror	      on
	      Value		      "cs_lo_soc"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "6678"
	      Position		      [25, 220, 160, 240]
	      Value		      "cs_max_pwr*fc_pwr_scale"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "6679"
	      Ports		      [3, 1]
	      Position		      [385, 71, 420, 139]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "6680"
	      Ports		      [1, 1]
	      Position		      [305, 24, 335, 56]
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      SID		      "6681"
	      Ports		      [2, 1]
	      Position		      [140, 257, 170, 288]
	      Function		      "max"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax1"
	      SID		      "6682"
	      Ports		      [2, 1]
	      Position		      [255, 257, 285, 288]
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      RateLimiter
	      Name		      "Rate Limiter"
	      SID		      "6683"
	      Position		      [535, 270, 565, 300]
	      RisingSlewLimit	      "cs_max_pwr_rise_rate*fc_pwr_scale"
	      FallingSlewLimit	      "cs_max_pwr_fall_rate*fc_pwr_scale"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "6684"
	      Ports		      [2, 1]
	      Position		      [305, 87, 335, 118]
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "6685"
	      Position		      [460, 270, 490, 300]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "ess state"
	      SID		      "6686"
	      Position		      [295, 205, 345, 225]
	      Value		      "ess_on"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "limited\nFC pwr\ncommand\n(W)"
	      SID		      "6687"
	      Position		      [615, 278, 645, 292]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "ess max pwr would\nbe insufficient"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "SOC"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [-5, 0; 0, -55]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Rate Limiter"
	      SrcPort		      1
	      DstBlock		      "limited\nFC pwr\ncommand\n(W)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Rate Limiter"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      Points		      [45, 0]
	      Branch {
		Points			[0, 20]
		DstBlock		"Switch"
		DstPort			3
	      }
	      Branch {
		Points			[20, 0]
		DstBlock		"MinMax1"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "MinMax1"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [75, 0]
	      DstBlock		      "MinMax1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [0, -30]
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "FC pwr\ncommand"
	      SrcPort		      1
	      DstBlock		      "MinMax"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "ess state"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      3
	    }
	  }
	}
	Block {
	  BlockType		  From
	  Name			  "From <ess>"
	  SID			  "6688"
	  Position		  [100, 75, 160, 95]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "SOC"
	}
	Block {
	  BlockType		  From
	  Name			  "From <ess>1"
	  SID			  "6689"
	  Position		  [90, 33, 175, 57]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "ess_max_pwr"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>3"
	  SID			  "6690"
	  Position		  [380, 81, 455, 99]
	  GotoTag		  "engine_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Product
	  Name			  "Product"
	  SID			  "6691"
	  Ports			  [2, 1]
	  Position		  [380, 138, 410, 162]
	  ShowName		  off
	  FontName		  "Arial"
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator"
	  SID			  "6692"
	  Ports			  [2, 1]
	  Position		  [200, 12, 230, 43]
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "pwr req'd from\nFC to supply\npwr req'd at bus\n(W)"
	  SID			  "6693"
	  Ports			  [1, 1]
	  Position		  [110, 150, 140, 180]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "pwr req'd from\nFC to supply\npwr req'd at bus\n(W)"
	    Location		    [140, 150, 608, 416]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "power req'd\nby bus (W)"
	      SID		      "6694"
	      Position		      [15, 43, 45, 57]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "6695"
	      Position		      [135, 145, 155, 165]
	      BlockMirror	      on
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "6696"
	      Position		      [265, 90, 285, 110]
	      BlockMirror	      on
	      Value		      "0"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "6697"
	      Ports		      [2, 1]
	      Position		      [125, 77, 155, 108]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "6698"
	      Position		      [260, 45, 290, 75]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "pwr req'd\nof FC (W)"
	      SID		      "6699"
	      Position		      [335, 53, 365, 67]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "power req'd\nby bus (W)"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, 35]
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Switch"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-20, 0]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [70, 0; 0, -35]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "pwr req'd\nof FC (W)"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "engine pwr (W)"
	  SID			  "6700"
	  Position		  [445, 140, 465, 160]
	  IconDisplay		  "Port number"
	  InitialOutput		  "0"
	}
	Line {
	  SrcBlock		  "power req'd\nby bus (W)"
	  SrcPort		  1
	  Points		  [25, 0]
	  Branch {
	    Points		    [0, 75; 85, 0]
	    Branch {
	      Points		      [100, 0; 0, -135]
	      DstBlock		      "FC on"
	      DstPort		      4
	    }
	    Branch {
	      Points		      [0, -65]
	      DstBlock		      "FC pwr command,\nmodified by SOC"
	      DstPort		      3
	    }
	  }
	  Branch {
	    Points		    [0, -145]
	    DstBlock		    "Relational\nOperator"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "pwr req'd from\nFC to supply\npwr req'd at bus\n(W)"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "From <ess>1"
	  SrcPort		  1
	  Points		  [5, 0]
	  DstBlock		  "Relational\nOperator"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Product"
	  SrcPort		  1
	  DstBlock		  "engine pwr (W)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "pwr req'd from\nFC to supply\npwr req'd at bus\n(W)"
	  SrcPort		  1
	  DstBlock		  "FC pwr command,\nmodified by SOC"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "FC pwr command,\nw/ limits enforced"
	  SrcPort		  1
	  DstBlock		  "Product"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Relational\nOperator"
	  SrcPort		  1
	  Points		  [50, 0; 0, 45]
	  Branch {
	    DstBlock		    "FC on"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 70]
	    DstBlock		    "FC pwr command,\nw/ limits enforced"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "From <ess>"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    Points		    [0, 70]
	    DstBlock		    "FC pwr command,\nmodified by SOC"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [90, 0]
	    Branch {
	      DstBlock		      "FC on"
	      DstPort		      2
	    }
	    Branch {
	      Points		      [0, 70]
	      DstBlock		      "FC pwr command,\nw/ limits enforced"
	      DstPort		      2
	    }
	  }
	}
	Line {
	  SrcBlock		  "FC pwr command,\nmodified by SOC"
	  SrcPort		  1
	  Points		  [10, 0]
	  Branch {
	    DstBlock		    "FC pwr command,\nw/ limits enforced"
	    DstPort		    3
	  }
	  Branch {
	    Points		    [0, -70]
	    DstBlock		    "FC on"
	    DstPort		    3
	  }
	}
	Line {
	  SrcBlock		  "FC on"
	  SrcPort		  1
	  Points		  [10, 0]
	  Branch {
	    DstBlock		    "Goto <fc>3"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 55]
	    DstBlock		    "Product"
	    DstPort		    1
	  }
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "fuel cell <cs> config"
      SID		      "325"
      Ports		      [1, 1]
      Position		      [655, 705, 720, 755]
      ShowPortLabels	      "none"
      BlockChoice	      "fuel cell adaptive <cs>"
      TemplateBlock	      "self"
      MemberBlocks	      "fuel cell adaptive <cs>,fuel cell control strategy <cs>"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      System {
	Name			"fuel cell <cs> config"
	Location		[148, 182, 646, 482]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "power req'd\nby bus (W)"
	  SID			  "6701"
	  Position		  [20, 40, 40, 60]
	  IconDisplay		  "Port number"
	}
	Block {
	  BlockType		  Reference
	  Name			  "fuel cell\nadaptive\n<cs>"
	  SID			  "6702"
	  Ports			  [1, 1]
	  Position		  [100, 40, 140, 80]
	  SourceBlock		  "lib_controls/fuel cell\nadaptive\n<cs>"
	  SourceType		  "Unknown"
	}
	Block {
	  BlockType		  Outport
	  Name			  "engine pwr (W)"
	  SID			  "6703"
	  Position		  [200, 40, 220, 60]
	  IconDisplay		  "Port number"
	}
	Line {
	  SrcBlock		  "power req'd\nby bus (W)"
	  SrcPort		  1
	  Points		  [20, 0; 0, 10]
	  DstBlock		  "fuel cell\nadaptive\n<cs>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "fuel cell\nadaptive\n<cs>"
	  SrcPort		  1
	  Points		  [20, 0; 0, -10]
	  DstBlock		  "engine pwr (W)"
	  DstPort		  1
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "par <cs> config"
      SID		      "326"
      Ports		      [1, 1]
      Position		      [380, 681, 420, 719]
      ShowPortLabels	      "none"
      BlockChoice	      "electric assist control strategy <cs>"
      TemplateBlock	      "self"
      MemberBlocks	      "Adaptive control strategy <cs>,Fuzzy Logic control strategy <cs>,Fuzzy Logic control strateg"
      "y with Emissions <cs>,electric assist control strategy <cs>,electric assist control strategy bal <cs>"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      System {
	Name			"par <cs> config"
	Location		[148, 182, 646, 482]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "trq and spd req'd\ninto clutch\n(N*m, rad/s)"
	  SID			  "6704"
	  Position		  [20, 40, 40, 60]
	  IconDisplay		  "Port number"
	}
	Block {
	  BlockType		  Reference
	  Name			  "electric assist\ncontrol strategy\n<cs>"
	  SID			  "6705"
	  Ports			  [1, 1]
	  Position		  [100, 40, 140, 80]
	  SourceBlock		  "lib_controls/electric assist\ncontrol strategy\n<cs>"
	  SourceType		  "Unknown"
	}
	Block {
	  BlockType		  Outport
	  Name			  "trq and spd\nreq'd from\nengine\n(N*m, rad/s)"
	  SID			  "6706"
	  Position		  [200, 40, 220, 60]
	  IconDisplay		  "Port number"
	}
	Line {
	  SrcBlock		  "trq and spd req'd\ninto clutch\n(N*m, rad/s)"
	  SrcPort		  1
	  Points		  [20, 0; 0, 10]
	  DstBlock		  "electric assist\ncontrol strategy\n<cs>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "electric assist\ncontrol strategy\n<cs>"
	  SrcPort		  1
	  Points		  [20, 0; 0, -10]
	  DstBlock		  "trq and spd\nreq'd from\nengine\n(N*m, rad/s)"
	  DstPort		  1
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "par <vc> config"
      SID		      "327"
      Ports		      [0, 1]
      Position		      [375, 771, 440, 819]
      ShowPortLabels	      "none"
      BlockChoice	      "<vc> par"
      TemplateBlock	      "self"
      MemberBlocks	      "<vc> par,<vc> par Adaptive,<vc> par balanced"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      System {
	Name			"par <vc> config"
	Location		[148, 182, 646, 482]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"100"
	Block {
	  BlockType		  Reference
	  Name			  "<vc> par"
	  SID			  "6707"
	  Ports			  [0, 1]
	  Position		  [100, 40, 140, 80]
	  SourceBlock		  "lib_controls/<vc> par"
	  SourceType		  "Unknown"
	}
	Block {
	  BlockType		  Outport
	  Name			  "clutch\nstate"
	  SID			  "6708"
	  Position		  [200, 40, 220, 60]
	  IconDisplay		  "Port number"
	}
	Line {
	  SrcBlock		  "<vc> par"
	  SrcPort		  1
	  Points		  [20, 0; 0, -10]
	  DstBlock		  "clutch\nstate"
	  DstPort		  1
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "series hybrid\ncontrol stategy\n <cs>"
      SID		      "328"
      Ports		      [1, 1]
      Position		      [220, 444, 260, 486]
      BackgroundColor	      "yellow"
      ShowPortLabels	      "none"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      MaskDisplay	      "image(imread('bdi_cs.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskPortRotate	      "default"
      MaskIconUnits	      "autoscale"
      System {
	Name			"series hybrid\ncontrol stategy\n <cs>"
	Location		[28, 74, 737, 351]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "power req'd\nby bus (W)"
	  SID			  "6709"
	  Position		  [25, 158, 55, 172]
	  IconDisplay		  "Port number"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "FC on"
	  SID			  "6710"
	  Ports			  [4, 1]
	  Position		  [325, 73, 355, 107]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "FC on"
	    Location		    [142, 74, 915, 686]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "ess max pwr would\nbe insufficient"
	      SID		      "6711"
	      Position		      [35, 563, 65, 577]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "SOC"
	      SID		      "6712"
	      Position		      [25, 298, 55, 312]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "FC pwr\ncommand"
	      SID		      "6713"
	      Position		      [20, 398, 50, 412]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "bus pwr req"
	      SID		      "6714"
	      Position		      [85, 523, 115, 537]
	      Port		      "4"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "6715"
	      Position		      [80, 371, 130, 389]
	      ShowName		      off
	      Value		      "cs_hi_soc"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "6716"
	      Position		      [15, 442, 205, 468]
	      ShowName		      off
	      Value		      "cs_min_pwr*fc_spd_scale*fc_trq_scale"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant11"
	      SID		      "6717"
	      Position		      [215, 537, 235, 553]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "6718"
	      Position		      [95, 257, 150, 273]
	      ShowName		      off
	      Value		      "cs_lo_soc"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "6719"
	      Position		      [95, 72, 115, 88]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "6720"
	      Position		      [95, 42, 115, 58]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "6721"
	      Position		      [100, 101, 185, 119]
	      ShowName		      off
	      Value		      "cs_min_off_time"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "6722"
	      Position		      [86, 200, 284, 225]
	      BlockRotation	      270
	      ShowName		      off
	      Value		      "1.2*cs_min_pwr*fc_spd_scale*fc_trq_scale"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant7"
	      SID		      "6723"
	      Position		      [615, 300, 655, 320]
	      BlockMirror	      on
	      ShowName		      off
	      Value		      "fc_on"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant8"
	      SID		      "6724"
	      Position		      [235, 270, 355, 290]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Value		      "cs_charge_deplete_bool"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant9"
	      SID		      "6725"
	      Position		      [365, 437, 385, 453]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <ess>2"
	      SID		      "6726"
	      Position		      [50, 478, 160, 502]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_max_chg_pwr"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>"
	      SID		      "6727"
	      Position		      [610, 227, 665, 243]
	      BlockMirror	      on
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "key_on"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      SID		      "6728"
	      Position		      [240, 320, 270, 350]
	      Gain		      "0.5"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "6729"
	      Ports		      [2, 1]
	      Position		      [295, 367, 325, 398]
	      ShowName		      off
	      Operator		      "OR"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "6730"
	      Ports		      [2, 1]
	      Position		      [390, 242, 420, 273]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator10"
	      SID		      "6731"
	      Ports		      [1, 1]
	      Position		      [390, 489, 420, 521]
	      ShowName		      off
	      Operator		      "NOT"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator2"
	      SID		      "6732"
	      Ports		      [3, 1]
	      Position		      [335, 234, 365, 266]
	      ShowName		      off
	      Operator		      "OR"
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator3"
	      SID		      "6733"
	      Ports		      [2, 1]
	      Position		      [265, 67, 295, 98]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator4"
	      SID		      "6734"
	      Ports		      [3, 1]
	      Position		      [560, 253, 590, 287]
	      ShowName		      off
	      Operator		      "OR"
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator5"
	      SID		      "6735"
	      Ports		      [4, 1]
	      Position		      [620, 259, 650, 291]
	      ShowName		      off
	      Inputs		      "4"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator6"
	      SID		      "6736"
	      Ports		      [2, 1]
	      Position		      [440, 322, 470, 353]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator7"
	      SID		      "6737"
	      Ports		      [1, 1]
	      Position		      [440, 279, 470, 311]
	      ShowName		      off
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator8"
	      SID		      "6738"
	      Ports		      [2, 1]
	      Position		      [485, 392, 515, 423]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator9"
	      SID		      "6739"
	      Ports		      [2, 1]
	      Position		      [335, 487, 365, 518]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "6740"
	      Position		      [385, 15, 415, 45]
	      BlockMirror	      on
	      X0		      "cs_fc_init_state"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "6741"
	      Ports		      [2, 1]
	      Position		      [150, 357, 180, 388]
	      ShowName		      off
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      SID		      "6742"
	      Ports		      [2, 1]
	      Position		      [240, 397, 270, 428]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      SID		      "6743"
	      Ports		      [2, 1]
	      Position		      [190, 242, 220, 273]
	      ShowName		      off
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      SID		      "6744"
	      Ports		      [2, 1]
	      Position		      [210, 57, 240, 88]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator4"
	      SID		      "6745"
	      Ports		      [2, 1]
	      Position		      [200, 152, 230, 183]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator5"
	      SID		      "6746"
	      Ports		      [2, 1]
	      Position		      [295, 297, 325, 328]
	      ShowName		      off
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator6"
	      SID		      "6747"
	      Ports		      [2, 1]
	      Position		      [425, 397, 455, 428]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator7"
	      SID		      "6748"
	      Ports		      [2, 1]
	      Position		      [270, 447, 300, 478]
	      ShowName		      off
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator8"
	      SID		      "6749"
	      Ports		      [2, 1]
	      Position		      [270, 522, 300, 553]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Subsystem"
	      SID		      "6750"
	      Ports		      [1, 1]
	      Position		      [80, 143, 125, 177]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "Running Average"
	      MaskDescription	      "Running Average"
	      MaskHelp		      "Output is the average of the last (Averaging Time) seconds of input."
	      MaskPromptString	      "Averaging Time (s)"
	      MaskStyleString	      "edit"
	      MaskVariables	      "n=@1;"
	      MaskTunableValueString  "on"
	      MaskEnableString	      "on"
	      MaskVisibilityString    "on"
	      MaskToolTipString	      "on"
	      MaskDisplay	      "disp('Running\\nAverage')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "5"
	      System {
		Name			"Subsystem"
		Location		[115, 388, 551, 664]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "6751"
		  Position		  [30, 55, 50, 75]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  SID			  "6752"
		  Position		  [255, 154, 295, 176]
		  FontName		  "Arial"
		  Value			  "n"
		}
		Block {
		  BlockType		  Integrator
		  Name			  "Integrator"
		  SID			  "6753"
		  Ports			  [1, 1]
		  Position		  [80, 55, 100, 75]
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "6754"
		  Ports			  [2, 1]
		  Position		  [340, 66, 360, 84]
		  Inputs		  "*/"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "6755"
		  Ports			  [2, 1]
		  Position		  [225, 60, 245, 80]
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  TransportDelay
		  Name			  "Transport\nDelay"
		  SID			  "6756"
		  Ports			  [1, 1]
		  Position		  [155, 90, 195, 120]
		  DelayTime		  "n"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "6757"
		  Position		  [390, 65, 410, 85]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Integrator"
		  SrcPort		  1
		  Points		  [25, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 40]
		    DstBlock		    "Transport\nDelay"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Transport\nDelay"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  DstBlock		  "Integrator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [15, 0; 0, -85]
		  DstBlock		  "Product"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      SID		      "6758"
	      Ports		      [2, 1]
	      Position		      [190, 317, 220, 348]
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum2"
	      SID		      "6759"
	      Ports		      [2, 1]
	      Position		      [195, 482, 225, 513]
	      Inputs		      "-+"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "6760"
	      Position		      [490, 279, 520, 311]
	      FontName		      "Arial"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "dt"
	      SID		      "6761"
	      Ports		      [0, 1]
	      Position		      [360, 390, 390, 420]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"dt"
		Location		[80, 285, 429, 424]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  SID			  "6762"
		  Position		  [65, 60, 85, 80]
		  FontName		  "Arial"
		  FontSize		  8
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "6763"
		  Position		  [125, 85, 160, 105]
		  FontName		  "Arial"
		  FontSize		  8
		  X0			  "-1"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  SID			  "6764"
		  Ports			  [2, 1]
		  Position		  [205, 65, 225, 85]
		  FontName		  "Arial"
		  FontSize		  8
		  Inputs		  "+-"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "6765"
		  Position		  [255, 65, 275, 85]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 25]
		    DstBlock		    "Memory1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  Points		  [10, 0; 0, -15]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "just shut \ndown"
	      SID		      "6766"
	      Ports		      [1, 1]
	      Position		      [50, 48, 80, 82]
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      System {
		Name			"just shut \ndown"
		Location		[71, 150, 410, 293]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "state"
		  SID			  "6767"
		  Position		  [15, 20, 35, 40]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  SID			  "6768"
		  Ports			  [2, 1]
		  Position		  [220, 23, 250, 47]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator1"
		  SID			  "6769"
		  Ports			  [1, 1]
		  Position		  [135, 18, 165, 42]
		  FontName		  "Arial"
		  Operator		  "NOT"
		  Inputs		  "1"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  SID			  "6770"
		  Position		  [135, 85, 170, 105]
		  FontName		  "Arial"
		  X0			  "1"
		}
		Block {
		  BlockType		  Outport
		  Name			  "trigger"
		  SID			  "6771"
		  Position		  [295, 25, 315, 45]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Logical\nOperator1"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "state"
		  SrcPort		  1
		  Points		  [50, 0]
		  Branch {
		    DstBlock		    "Logical\nOperator1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 65]
		    DstBlock		    "Memory1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  Points		  [30, 0]
		  DstBlock		  "Logical\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  DstBlock		  "trigger"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "no-lag\nReset Integrator"
	      SID		      "6772"
	      Ports		      [3, 1]
	      Position		      [135, 44, 175, 86]
	      ShowName		      off
	      ShowPortLabels	      "none"
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskType		      "No-lag Reset Integrator"
	      MaskDescription	      "No-lag Reset Integrator"
	      MaskHelp		      "Integrates first input using Euler technique.\\nAt the time step that input 2 <> zero,\\noutpu"
	      "t is reset to input 3."
	      MaskPromptString	      "Initial Value"
	      MaskStyleString	      "edit"
	      MaskVariables	      "initval=@1;"
	      MaskTunableValueString  "on"
	      MaskEnableString	      "on"
	      MaskVisibilityString    "on"
	      MaskToolTipString	      "on"
	      MaskDisplay	      "disp('1/s\\nw/ reset\\nno lag')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "0"
	      System {
		Name			"no-lag\nReset Integrator"
		Location		[265, 331, 787, 595]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  SID			  "6773"
		  Position		  [60, 100, 80, 120]
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "in_2"
		  SID			  "6774"
		  Position		  [60, 140, 80, 160]
		  Port			  "2"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Inport
		  Name			  "in_3"
		  SID			  "6775"
		  Position		  [45, 185, 65, 205]
		  Port			  "3"
		  IconDisplay		  "Port number"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  SID			  "6776"
		  Position		  [105, 155, 125, 175]
		  Value			  "0"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  SID			  "6777"
		  Position		  [340, 55, 375, 75]
		  BlockMirror		  on
		  FontName		  "Arial"
		  X0			  "initval"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  SID			  "6778"
		  Ports			  [2, 1]
		  Position		  [160, 96, 180, 114]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  SID			  "6779"
		  Ports			  [2, 1]
		  Position		  [230, 90, 250, 110]
		  FontName		  "Arial"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  SID			  "6780"
		  Position		  [290, 139, 320, 171]
		  FontName		  "Arial"
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "dt"
		  SID			  "6781"
		  Ports			  [0, 1]
		  Position		  [112, 50, 138, 80]
		  BlockRotation		  270
		  BlockMirror		  on
		  ShowPortLabels	  "none"
		  MinAlgLoopOccurrences	  off
		  PropExecContextOutsideSubsystem off
		  RTWSystemCode		  "Auto"
		  FunctionWithSeparateData off
		  Opaque		  off
		  RequestExecContextInheritance	off
		  MaskHideContents	  off
		  System {
		    Name		    "dt"
		    Location		    [80, 285, 429, 424]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
		    TiledPageScale	    1
		    ShowPageBoundaries	    off
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    SID			    "6782"
		    Position		    [65, 60, 85, 80]
		    FontName		    "Arial"
		    FontSize		    8
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    SID			    "6783"
		    Position		    [125, 85, 160, 105]
		    FontName		    "Arial"
		    FontSize		    8
		    X0			    "-1"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    SID			    "6784"
		    Ports		    [2, 1]
		    Position		    [205, 65, 225, 85]
		    FontName		    "Arial"
		    FontSize		    8
		    Inputs		    "+-"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    SID			    "6785"
		    Position		    [255, 65, 275, 85]
		    IconDisplay		    "Port number"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [10, 0; 0, -15]
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "in_2==0"
		  SID			  "6786"
		  Ports			  [2, 1]
		  Position		  [160, 143, 190, 167]
		  Operator		  "=="
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  SID			  "6787"
		  Position		  [455, 145, 475, 165]
		  IconDisplay		  "Port number"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "in_3"
		  SrcPort		  1
		  Points		  [195, 0; 0, -30]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "in_2"
		  SrcPort		  1
		  DstBlock		  "in_2==0"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "dt"
		  SrcPort		  1
		  Points		  [0, 15]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [-130, 0; 0, 30]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [10, 0; 0, 45]
		  DstBlock		  "Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  Points		  [85, 0]
		  Branch {
		    DstBlock		    "out_1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -90]
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "in_2==0"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [15, 0]
		  DstBlock		  "in_2==0"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "FC on"
	      SID		      "6788"
	      Position		      [695, 268, 725, 282]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"Relational\nOperator7"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Relational\nOperator1"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator8"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator7"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator10"
	      SrcPort		      1
	      Points		      [175, 0; 0, -225]
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant7"
	      SrcPort		      1
	      Points		      [-5, 0]
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "From <vc>"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator5"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, -245]
		DstBlock		"Memory"
		DstPort			1
	      }
	      Branch {
		DstBlock		"FC on"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator4"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator9"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator10"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum2"
	      SrcPort		      1
	      Points		      [0, -30]
	      DstBlock		      "Relational\nOperator7"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "bus pwr req"
	      SrcPort		      1
	      Points		      [55, 0]
	      Branch {
		Points			[0, -25]
		DstBlock		"Sum2"
		DstPort			2
	      }
	      Branch {
		DstBlock		"Relational\nOperator8"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "From <ess>2"
	      SrcPort		      1
	      DstBlock		      "Sum2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant11"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator8"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator5"
	      SrcPort		      1
	      Points		      [0, 30]
	      DstBlock		      "Logical\nOperator6"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "ess max pwr would\nbe insufficient"
	      SrcPort		      1
	      Points		      [465, 0; 0, -300]
	      DstBlock		      "Logical\nOperator4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "FC pwr\ncommand"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"Subsystem"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Relational\nOperator1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "SOC"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		Points			[0, -55]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	      Branch {
		Points			[0, 60]
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Relational\nOperator5"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator2"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator3"
	      SrcPort		      1
	      Points		      [10, 0; 0, 165]
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Subsystem"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator4"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "no-lag\nReset Integrator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "no-lag\nReset Integrator"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "just shut \ndown"
	      SrcPort		      1
	      DstBlock		      "no-lag\nReset Integrator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "no-lag\nReset Integrator"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [-60, 0]
	      Branch {
		DstBlock		"Logical\nOperator2"
		DstPort			1
	      }
	      Branch {
		Points			[-285, 0]
		DstBlock		"just shut \ndown"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"Relational\nOperator2"
		DstPort			2
	      }
	      Branch {
		DstBlock		"Sum"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [0, 0]
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			2
	      }
	      Branch {
		Points			[0, -40]
		DstBlock		"Sum"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Relational\nOperator5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator7"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator6"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [0, 0]
	      Branch {
		Points			[50, 0]
		DstBlock		"Switch"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Logical\nOperator6"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [0, -35]
	      DstBlock		      "Logical\nOperator4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant8"
	      SrcPort		      1
	      Points		      [35, 0]
	      Branch {
		Points			[20, 0; 0, 15]
		DstBlock		"Logical\nOperator7"
		DstPort			1
	      }
	      Branch {
		Points			[0, 90; 75, 0]
		DstBlock		"Logical\nOperator8"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator8"
	      SrcPort		      1
	      Points		      [25, 0]
	      DstBlock		      "Logical\nOperator4"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "dt"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator6"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant9"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Relational\nOperator6"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator6"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "FC pwr command,\nmodified by SOC"
	  SID			  "6789"
	  Ports			  [3, 1]
	  Position		  [225, 149, 255, 181]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "FC pwr command,\nmodified by SOC"
	    Location		    [187, 74, 960, 426]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "SOC"
	      SID		      "6790"
	      Position		      [130, 123, 160, 137]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "raw\npwr command\n(W)"
	      SID		      "6791"
	      Position		      [85, 28, 115, 42]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "pwr req'd at bus (W)"
	      SID		      "6792"
	      Position		      [205, 43, 235, 57]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "6793"
	      Ports		      []
	      Position		      [640, 280, 696, 320]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[170, 383, 650, 553]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "6794"
		  Name			  "This block determines the additional power required of the fuel convertor\n to maintian an SOC equal to "
		  "the average of cs_hi_soc and cs_lo_soc."
		  Position		  [222, 17]
		  VerticalAlignment	  "top"
		}
		Annotation {
		  SID			  "6795"
		  Name			  "1/5/98/98:tm  Modified calculation of additional power required to maintain goal SOC\n(SOC_goal - SOC_ac"
		  "tual) / (0.5*SOC_range) * cs_charge_pwr\ntherefore when\nactual_SOC=cs_lo_soc ==> 1.0  *cs_charge_pwr\nactual_SOC="
		  "goal_SOC ==> 0.0  *cs_charge_pwr\nactual_SOC=cs_hi_soc ==> -1.0 * cs_charge_pwr\n\n2/6/01:tm added if battery disa"
		  "bled - do not modify request"
		  Position		  [242, 57]
		  VerticalAlignment	  "top"
		}
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <ess>2"
	      SID		      "6796"
	      Position		      [175, 78, 285, 102]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_max_chg_pwr"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      SID		      "6797"
	      Position		      [370, 127, 460, 173]
	      Gain		      "cs_charge_pwr"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      SID		      "6798"
	      Position		      [205, 222, 240, 258]
	      ShowName		      off
	      Gain		      "0.5"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain2"
	      SID		      "6799"
	      Position		      [495, 51, 520, 79]
	      Gain		      "-1"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Goal SOC"
	      SID		      "6800"
	      Position		      [35, 177, 175, 203]
	      Value		      "0.5*(cs_hi_soc+cs_lo_soc)"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax1"
	      SID		      "6801"
	      Ports		      [2, 1]
	      Position		      [495, 97, 525, 128]
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Multiplier"
	      SID		      "6802"
	      Ports		      [2, 1]
	      Position		      [270, 132, 300, 163]
	      ShowName		      off
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Multiplier1"
	      SID		      "6803"
	      Ports		      [2, 1]
	      Position		      [615, 57, 645, 88]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "SOC Range"
	      SID		      "6804"
	      Position		      [55, 228, 175, 252]
	      Value		      "cs_hi_soc-cs_lo_soc"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "6805"
	      Ports		      [1, 1]
	      Position		      [320, 135, 350, 165]
	      InputPortMap	      "u0"
	      UpperLimit	      "1"
	      LowerLimit	      "-1"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      SID		      "6806"
	      Ports		      [2, 1]
	      Position		      [210, 122, 240, 153]
	      ShowName		      off
	      Inputs		      "-+"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum1"
	      SID		      "6807"
	      Ports		      [2, 1]
	      Position		      [665, 27, 680, 58]
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum4"
	      SID		      "6808"
	      Ports		      [2, 1]
	      Position		      [335, 67, 365, 98]
	      Inputs		      "+-"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "6809"
	      Position		      [555, 50, 585, 80]
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "ess state"
	      SID		      "6810"
	      Position		      [495, 160, 545, 180]
	      Value		      "ess_on"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "pwr command\nmodifed for SOC\n(W)"
	      SID		      "6811"
	      Position		      [710, 38, 740, 52]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "Sum4"
	      SrcPort		      1
	      Points		      [110, 0]
	      DstBlock		      "MinMax1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <ess>2"
	      SrcPort		      1
	      DstBlock		      "Sum4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "pwr req'd at bus (W)"
	      SrcPort		      1
	      Points		      [35, 0]
	      Branch {
		Points			[205, 0]
		DstBlock		"Gain2"
		DstPort			1
	      }
	      Branch {
		Points			[0, 25]
		DstBlock		"Sum4"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "raw\npwr command\n(W)"
	      SrcPort		      1
	      DstBlock		      "Sum1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain2"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[65, 0]
		DstBlock		"Switch"
		DstPort			3
	      }
	      Branch {
		Points			[0, -30]
		DstBlock		"MinMax1"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "MinMax1"
	      SrcPort		      1
	      Points		      [5, 0; 0, -60]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      Points		      [5, 0; 0, -85]
	      DstBlock		      "Multiplier"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "Multiplier"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Multiplier"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "SOC Range"
	      SrcPort		      1
	      DstBlock		      "Gain1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Goal SOC"
	      SrcPort		      1
	      Points		      [10, 0; 0, -45]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "SOC"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum1"
	      SrcPort		      1
	      DstBlock		      "pwr command\nmodifed for SOC\n(W)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Multiplier1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Multiplier1"
	      SrcPort		      1
	      DstBlock		      "Sum1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "ess state"
	      SrcPort		      1
	      Points		      [50, 0]
	      DstBlock		      "Multiplier1"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "FC pwr command,\nw/ limits enforced"
	  SID			  "6812"
	  Ports			  [3, 1]
	  Position		  [325, 139, 355, 171]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "FC pwr command,\nw/ limits enforced"
	    Location		    [45, 91, 735, 454]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "ess max pwr would\nbe insufficient"
	      SID		      "6813"
	      Position		      [45, 33, 75, 47]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "SOC"
	      SID		      "6814"
	      Position		      [45, 88, 75, 102]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "FC pwr\ncommand"
	      SID		      "6815"
	      Position		      [45, 243, 75, 257]
	      Port		      "3"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "6816"
	      Position		      [27, 300, 213, 320]
	      BlockRotation	      270
	      Value		      "cs_min_pwr*fc_spd_scale*fc_trq_scale"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "6817"
	      Position		      [290, 148, 350, 172]
	      BlockMirror	      on
	      Value		      "cs_lo_soc"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "6818"
	      Position		      [25, 200, 215, 220]
	      Value		      "cs_max_pwr*fc_spd_scale*fc_trq_scale"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "6819"
	      Position		      [290, 193, 350, 217]
	      Value		      "ess_on"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "6820"
	      Ports		      [3, 1]
	      Position		      [385, 74, 410, 136]
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "6821"
	      Ports		      [1, 1]
	      Position		      [305, 24, 335, 56]
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      SID		      "6822"
	      Ports		      [2, 1]
	      Position		      [140, 242, 170, 273]
	      Function		      "max"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax1"
	      SID		      "6823"
	      Ports		      [2, 1]
	      Position		      [255, 237, 285, 268]
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      RateLimiter
	      Name		      "Rate Limiter"
	      SID		      "6824"
	      Position		      [535, 250, 565, 280]
	      RisingSlewLimit	      "cs_max_pwr_rise_rate*fc_spd_scale*fc_trq_scale"
	      FallingSlewLimit	      "cs_max_pwr_fall_rate*fc_spd_scale*fc_trq_scale"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "6825"
	      Ports		      [2, 1]
	      Position		      [305, 87, 335, 118]
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "6826"
	      Position		      [460, 250, 490, 280]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "limited\nFC pwr\ncommand\n(W)"
	      SID		      "6827"
	      Position		      [615, 258, 645, 272]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "ess max pwr would\nbe insufficient"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "SOC"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "FC pwr\ncommand"
	      SrcPort		      1
	      DstBlock		      "MinMax"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      Points		      [45, 0]
	      Branch {
		Points			[0, 35; 225, 0]
		DstBlock		"Switch"
		DstPort			3
	      }
	      Branch {
		DstBlock		"MinMax1"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [0, -30]
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [-5, 0; 0, -50]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Rate Limiter"
	      SrcPort		      1
	      DstBlock		      "limited\nFC pwr\ncommand\n(W)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Rate Limiter"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "MinMax1"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [0, 35]
	      DstBlock		      "MinMax1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      3
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "FC trq and spd"
	  SID			  "6828"
	  Ports			  [2, 1]
	  Position		  [410, 132, 440, 163]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "FC trq and spd"
	    Location		    [97, 99, 939, 407]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "FC on"
	      SID		      "6829"
	      Position		      [35, 163, 65, 177]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "power req'd\nby FC (W)"
	      SID		      "6830"
	      Position		      [35, 73, 65, 87]
	      Port		      "2"
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      SID		      "6831"
	      Ports		      []
	      Position		      [770, 255, 826, 295]
	      BackgroundColor	      "green"
	      ShowName		      off
	      MinAlgLoopOccurrences   off
	      PropExecContextOutsideSubsystem off
	      RTWSystemCode	      "Auto"
	      FunctionWithSeparateData off
	      Opaque		      off
	      RequestExecContextInheritance off
	      MaskHideContents	      off
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskPortRotate	      "default"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[622, 566, 1038, 699]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
		TiledPageScale		1
		ShowPageBoundaries	off
		ZoomFactor		"100"
		Annotation {
		  SID			  "6832"
		  Name			  "This block determines the required fuel converter torque and speed from the\nrequired power using a vect"
		  "or usually representing the locus of best efficiency\nor lowest emissions points in the map.  The speed request is"
		  " cut in half if it is\nnonzero and preceded by a zero speed request to account for the fact that all\nADVISOR's dr"
		  "ivetrain components deal in speeds averaged over the time step.\nA speed command here of 1/2 of max. engine speed "
		  "means that the AVERAGE\nengine speed required is 1/2 of max.  If the previous speed was zero, that means\nthat the"
		  " speed at the end of the current time step must be equal to max. engine\nspeed."
		  Position		  [207, 63]
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "6833"
	      Position		      [245, 20, 265, 40]
	      BlockMirror	      on
	      Value		      "eps"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      SID		      "6834"
	      Position		      [380, 109, 400, 131]
	      BlockMirror	      on
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      SID		      "6835"
	      Position		      [380, 199, 400, 221]
	      BlockMirror	      on
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant7"
	      SID		      "6836"
	      Position		      [455, 224, 475, 246]
	      BlockMirror	      on
	      Value		      "eps"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      SID		      "6837"
	      Position		      [675, 135, 705, 165]
	      Gain		      ".5"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      SID		      "6838"
	      Ports		      [2, 1]
	      Position		      [620, 172, 650, 203]
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      SID		      "6839"
	      Ports		      [1, 1]
	      Position		      [565, 219, 595, 251]
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      SID		      "6840"
	      Position		      [515, 220, 545, 250]
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      SID		      "6841"
	      Ports		      [2, 1]
	      Position		      [690, 72, 725, 108]
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "6842"
	      Ports		      [2, 1]
	      Position		      [450, 162, 480, 193]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "6843"
	      Ports		      [1, 1]
	      Position		      [110, 65, 140, 95]
	      InputPortMap	      "u0"
	      UpperLimit	      "max(cs_pwr)"
	      LowerLimit	      "min(cs_pwr)"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      SID		      "6844"
	      Ports		      [2, 1]
	      Position		      [240, 57, 270, 88]
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      SID		      "6845"
	      Position		      [375, 65, 405, 95]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch2"
	      SID		      "6846"
	      Position		      [375, 155, 405, 185]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch3"
	      SID		      "6847"
	      Position		      [730, 175, 760, 205]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "desired\nspd (rad/s)"
	      SID		      "6848"
	      Position		      [175, 65, 205, 95]
	      InputValues	      "cs_pwr"
	      Table		      "cs_spd"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "desired\ntrq (Nm)"
	      SID		      "6849"
	      Ports		      [2, 1]
	      Position		      [300, 52, 330, 83]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "engine torque\nand speed\n(Nm), (rad/s)"
	      SID		      "6850"
	      Position		      [775, 80, 795, 100]
	      IconDisplay	      "Port number"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Switch3"
	      SrcPort		      1
	      Points		      [0, -60; -90, 0]
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      Points		      [0, 30]
	      DstBlock		      "Switch3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch2"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, -20; 230, 0]
		Branch {
		  Points		  [0, 50]
		  DstBlock		  "Switch3"
		  DstPort		  3
		}
		Branch {
		  DstBlock		  "Gain"
		  DstPort		  1
		}
	      }
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"Memory"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Logical\nOperator"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant7"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      DstBlock		      "engine torque\nand speed\n(Nm), (rad/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "FC on"
	      SrcPort		      1
	      Points		      [285, 0]
	      Branch {
		DstBlock		"Switch2"
		DstPort			2
	      }
	      Branch {
		Points			[0, -90]
		DstBlock		"Switch1"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "desired\nspd (rad/s)"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, 80]
		DstBlock		"Switch2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Sum"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch2"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		Points			[0, -65; 130, 0; 0, 45]
		DstBlock		"desired\ntrq (Nm)"
		DstPort			1
	      }
	      Branch {
		DstBlock		"desired\nspd (rad/s)"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "power req'd\nby FC (W)"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "desired\ntrq (Nm)"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "desired\ntrq (Nm)"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  From
	  Name			  "From <ess>"
	  SID			  "6851"
	  Position		  [105, 75, 165, 95]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "SOC"
	}
	Block {
	  BlockType		  From
	  Name			  "From <ess>1"
	  SID			  "6852"
	  Position		  [100, 33, 185, 57]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "ess_max_pwr"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>2"
	  SID			  "6853"
	  Position		  [595, 103, 675, 127]
	  GotoTag		  "spd_command"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>3"
	  SID			  "6854"
	  Position		  [395, 81, 470, 99]
	  GotoTag		  "engine_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator"
	  SID			  "6855"
	  Ports			  [2, 1]
	  Position		  [215, 12, 245, 43]
	}
	Block {
	  BlockType		  Selector
	  Name			  "Selector"
	  SID			  "6856"
	  Ports			  [1, 1]
	  Position		  [485, 100, 515, 130]
	  InputPortWidth	  "2"
	  IndexOptions		  "Index vector (dialog)"
	  Indices		  "2"
	  OutputSizes		  "1"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "power follower"
	  SID			  "6857"
	  Ports			  []
	  Position		  [481, 194, 512, 237]
	  BackgroundColor	  "yellow"
	  DropShadow		  on
	  OpenFcn		  "web(['file:\\\\\\' which('Series.htm')]);"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskPortRotate	  "default"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "power follower"
	    Location		    [203, 331, 569, 538]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "pwr req'd from\nFC to supply\npwr req'd at bus\n(W)"
	  SID			  "6858"
	  Ports			  [1, 1]
	  Position		  [120, 150, 150, 180]
	  ShowPortLabels	  "none"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  System {
	    Name		    "pwr req'd from\nFC to supply\npwr req'd at bus\n(W)"
	    Location		    [162, 130, 985, 392]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "power req'd\nby bus (W)"
	      SID		      "6859"
	      Position		      [15, 43, 45, 57]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      SID		      "6860"
	      Position		      [225, 90, 245, 110]
	      BlockMirror	      on
	      Value		      "eps"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      SID		      "6861"
	      Position		      [460, 45, 480, 65]
	      BlockMirror	      on
	      Value		      "eps"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      SID		      "6862"
	      Position		      [535, 215, 555, 235]
	      BlockMirror	      on
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      SID		      "6863"
	      Position		      [705, 100, 725, 120]
	      BlockMirror	      on
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      SID		      "6864"
	      Position		      [575, 85, 595, 105]
	      BlockMirror	      on
	      Value		      "eps"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      SID		      "6865"
	      Ports		      [2, 1]
	      Position		      [530, 152, 560, 183]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      SID		      "6866"
	      Ports		      [1, 1]
	      Position		      [80, 35, 110, 65]
	      InputPortMap	      "u0"
	      UpperLimit	      "max(cs_pwr)"
	      LowerLimit	      "min(cs_pwr)"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      SID		      "6867"
	      Ports		      [2, 1]
	      Position		      [220, 42, 250, 73]
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum1"
	      SID		      "6868"
	      Ports		      [2, 1]
	      Position		      [455, 82, 485, 113]
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum2"
	      SID		      "6869"
	      Ports		      [2, 1]
	      Position		      [570, 37, 600, 68]
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      SID		      "6870"
	      Position		      [700, 50, 730, 80]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "est.\nefficiency"
	      SID		      "6871"
	      Ports		      [2, 1]
	      Position		      [510, 27, 540, 58]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "est. desired\nspd (rad/s)"
	      SID		      "6872"
	      Position		      [155, 35, 185, 65]
	      InputValues	      "cs_pwr"
	      Table		      "cs_spd"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "est. desired\ntrq (Nm)"
	      SID		      "6873"
	      Ports		      [2, 1]
	      Position		      [280, 27, 310, 58]
	      Inputs		      "*/"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "est. pwr\nreq'd into\ngenerator"
	      SID		      "6874"
	      Ports		      [2, 1]
	      Position		      [635, 37, 665, 68]
	      Inputs		      "/*"
	    }
	    Block {
	      BlockType		      Lookup2D
	      Name		      "generator\noutput power\nmap (W)"
	      SID		      "6875"
	      Position		      [345, 16, 410, 54]
	      RowIndex		      "gc_map_spd*gc_spd_scale"
	      ColumnIndex	      "gc_map_trq*gc_trq_scale"
	      Table		      "gc_outpwr_map*gc_spd_scale*gc_trq_scale"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "pwr req'd\nof FC (W)"
	      SID		      "6876"
	      Position		      [770, 58, 800, 72]
	      IconDisplay	      "Port number"
	    }
	    Line {
	      SrcBlock		      "power req'd\nby bus (W)"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, 110]
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Saturation"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Sum1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum1"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "est.\nefficiency"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "generator\noutput power\nmap (W)"
	      SrcPort		      1
	      DstBlock		      "est.\nefficiency"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, 80; 310, 0]
		Branch {
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Branch {
		  Points		  [180, 0]
		  DstBlock		  "est. pwr\nreq'd into\ngenerator"
		  DstPort		  2
		}
	      }
	      Branch {
		Points			[5, 0]
		Branch {
		  Points		  [0, -35; 130, 0]
		  DstBlock		  "est. desired\ntrq (Nm)"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "est. desired\nspd (rad/s)"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "est. desired\nspd (rad/s)"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, -25]
		DstBlock		"generator\noutput power\nmap (W)"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Sum"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "est. desired\ntrq (Nm)"
	      SrcPort		      1
	      DstBlock		      "generator\noutput power\nmap (W)"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "est. desired\ntrq (Nm)"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [115, 0; 0, -105]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "pwr req'd\nof FC (W)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "est. pwr\nreq'd into\ngenerator"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "est.\nefficiency"
	      SrcPort		      1
	      DstBlock		      "Sum2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum2"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "est. pwr\nreq'd into\ngenerator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Sum2"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "thermostat"
	  SID			  "6877"
	  Ports			  []
	  Position		  [411, 194, 442, 237]
	  BackgroundColor	  "yellow"
	  DropShadow		  on
	  OpenFcn		  "web(['file:\\\\\\' which('Series-therm.htm')]);"
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskPortRotate	  "default"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "thermostat"
	    Location		    [203, 331, 569, 538]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "engine torque\nand speed\n(Nm), (rad/s)"
	  SID			  "6878"
	  Position		  [565, 140, 585, 160]
	  IconDisplay		  "Port number"
	  InitialOutput		  "0"
	}
	Line {
	  SrcBlock		  "Selector"
	  SrcPort		  1
	  DstBlock		  "Goto <fc>2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "FC trq and spd"
	  SrcPort		  1
	  Points		  [25, 0]
	  Branch {
	    DstBlock		    "Selector"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "engine torque\nand speed\n(Nm), (rad/s)"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "FC pwr command,\nw/ limits enforced"
	  SrcPort		  1
	  DstBlock		  "FC trq and spd"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "FC on"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    DstBlock		    "Goto <fc>3"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 50]
	    DstBlock		    "FC trq and spd"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "power req'd\nby bus (W)"
	  SrcPort		  1
	  Points		  [25, 0]
	  Branch {
	    Points		    [0, 70; 100, 0]
	    Branch {
	      Points		      [100, 0; 0, -130]
	      DstBlock		      "FC on"
	      DstPort		      4
	    }
	    Branch {
	      Points		      [0, -60]
	      DstBlock		      "FC pwr command,\nmodified by SOC"
	      DstPort		      3
	    }
	  }
	  Branch {
	    Points		    [0, -145]
	    DstBlock		    "Relational\nOperator"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "pwr req'd from\nFC to supply\npwr req'd at bus\n(W)"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "From <ess>1"
	  SrcPort		  1
	  Points		  [10, 0]
	  DstBlock		  "Relational\nOperator"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Relational\nOperator"
	  SrcPort		  1
	  Points		  [50, 0; 0, 45]
	  Branch {
	    DstBlock		    "FC on"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 70]
	    DstBlock		    "FC pwr command,\nw/ limits enforced"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "pwr req'd from\nFC to supply\npwr req'd at bus\n(W)"
	  SrcPort		  1
	  DstBlock		  "FC pwr command,\nmodified by SOC"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "FC pwr command,\nmodified by SOC"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    DstBlock		    "FC pwr command,\nw/ limits enforced"
	    DstPort		    3
	  }
	  Branch {
	    Points		    [0, -70]
	    DstBlock		    "FC on"
	    DstPort		    3
	  }
	}
	Line {
	  SrcBlock		  "From <ess>"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    Points		    [90, 0]
	    Branch {
	      DstBlock		      "FC on"
	      DstPort		      2
	    }
	    Branch {
	      Points		      [0, 70]
	      DstBlock		      "FC pwr command,\nw/ limits enforced"
	      DstPort		      2
	    }
	  }
	  Branch {
	    Points		    [0, 70]
	    DstBlock		    "FC pwr command,\nmodified by SOC"
	    DstPort		    1
	  }
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "user contributed engine on\n(balanced parallel hybrid)"
      SID		      "329"
      Ports		      [5, 3]
      Position		      [770, 189, 805, 301]
      AncestorBlock	      "lib_controls/<vc> ISG bal shift\nby time CD3xx/engine on\n(balanced parallel hybrid)"
      LibraryVersion	      "*"
      ShowPortLabels	      "none"
      MinAlgLoopOccurrences   off
      PropExecContextOutsideSubsystem off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      Opaque		      off
      RequestExecContextInheritance off
      MaskHideContents	      off
      System {
	Name			"user contributed engine on\n(balanced parallel hybrid)"
	Location		[228, 106, 1040, 776]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"80"
	SIDHighWatermark	"45"
	Block {
	  BlockType		  Inport
	  Name			  "trq req'd\nout of clutch\n(N*m)"
	  SID			  "329:1"
	  Position		  [190, 18, 220, 32]
	  IconDisplay		  "Port number"
	}
	Block {
	  BlockType		  Inport
	  Name			  "spd req'd\nout of clutch\n(N*m)1"
	  SID			  "329:2"
	  Position		  [185, 88, 215, 102]
	  Port			  "2"
	  IconDisplay		  "Port number"
	}
	Block {
	  BlockType		  Inport
	  Name			  "fc_spd_out_r"
	  SID			  "329:3"
	  Position		  [595, 543, 625, 557]
	  Port			  "3"
	  IconDisplay		  "Port number"
	}
	Block {
	  BlockType		  Inport
	  Name			  "v_ave_req"
	  SID			  "329:4"
	  Position		  [330, 513, 360, 527]
	  Port			  "4"
	  IconDisplay		  "Port number"
	}
	Block {
	  BlockType		  Inport
	  Name			  "clutch\nstate"
	  SID			  "329:5"
	  Position		  [285, 458, 315, 472]
	  Port			  "5"
	  IconDisplay		  "Port number"
	}
	Block {
	  BlockType		  Constant
	  Name			  "(--)2"
	  SID			  "329:6"
	  Position		  [695, 45, 735, 65]
	  Value			  "fc_on"
	}
	Block {
	  BlockType		  Constant
	  Name			  "(--)3"
	  SID			  "329:7"
	  Position		  [625, 256, 655, 274]
	  ForegroundColor	  "blue"
	  ShowName		  off
	}
	Block {
	  BlockType		  Constant
	  Name			  "(--)4"
	  SID			  "329:8"
	  Position		  [280, 285, 350, 305]
	  ForegroundColor	  "blue"
	  ShowName		  off
	  Value			  "cs_lo_soc"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Block NOTES"
	  SID			  "329:9"
	  Ports			  []
	  Position		  [45, 65, 101, 105]
	  BackgroundColor	  "green"
	  ShowName		  off
	  MinAlgLoopOccurrences	  off
	  PropExecContextOutsideSubsystem off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  Opaque		  off
	  RequestExecContextInheritance	off
	  MaskHideContents	  off
	  MaskDisplay		  "disp('Block\\nNOTES')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskPortRotate	  "default"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Block NOTES"
	    Location		    [232, 291, 754, 446]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Annotation {
	      SID		      "329:10"
	      Name		      "this user-contributed model came from Serve Ploumen-Research Engineer in Energy Management\n at Fo"
	      "rd Forschungszentrum Aachen GmbH (Ford Research Centre Aachen)\nThe following is from the email:\nFor integrate"
	      "d Starter/generator equipped vehicles, we found it important to make the activation of \nengine start-stop depe"
	      "ndent on thetime needed for the engine-warmup (or catalyst warmup if you like)\n and also dependent in the SOC "
	      "of the energy storage device. Furthermore we found \nit important to delay the engine shut-down after the vehic"
	      "le has come to a stop after a braking period. \n\nTherefore we implemented these functionality in the control s"
	      "trategy of Advisor's parallel hybrid model.\n"
	      Position		      [260, 77]
	    }
	  }
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant1"
	  SID			  "329:11"
	  Position		  [320, 363, 440, 387]
	  ForegroundColor	  "blue"
	  ShowName		  off
	  Value			  "vc_eng_warmup_time"
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant2"
	  SID			  "329:12"
	  Position		  [105, 189, 245, 211]
	  ForegroundColor	  "blue"
	  ShowName		  off
	  Value			  "engine_shutdown_delay"
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant3"
	  SID			  "329:13"
	  Position		  [580, 499, 660, 521]
	  ShowName		  off
	  Value			  "vc_launch_spd"
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant4"
	  SID			  "329:14"
	  Position		  [340, 470, 360, 490]
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant5"
	  SID			  "329:15"
	  Position		  [385, 525, 405, 545]
	  Value			  "0"
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant6"
	  SID			  "329:16"
	  Position		  [265, 565, 285, 585]
	  Value			  "0"
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant7"
	  SID			  "329:17"
	  Position		  [825, 540, 845, 560]
	  Value			  "0"
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant8"
	  SID			  "329:18"
	  Position		  [815, 90, 835, 110]
	  BlockRotation		  270
	  BlockMirror		  on
	  NamePlacement		  "alternate"
	  ShowName		  off
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant9"
	  SID			  "329:19"
	  Position		  [100, 235, 120, 255]
	  ForegroundColor	  "blue"
	  ShowName		  off
	  Value			  "0"
	}
	Block {
	  BlockType		  From
	  Name			  "From <ess>"
	  SID			  "329:20"
	  Position		  [330, 254, 375, 276]
	  ForegroundColor	  "blue"
	  NamePlacement		  "alternate"
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "SOC"
	}
	Block {
	  BlockType		  HitCross
	  Name			  "Hit \nCrossing1"
	  SID			  "329:21"
	  Ports			  [1, 1]
	  Position		  [195, 225, 225, 255]
	  ForegroundColor	  "blue"
	  HitCrossingDirection	  "rising"
	}
	Block {
	  BlockType		  Logic
	  Name			  "Logical\nOperator10"
	  SID			  "329:22"
	  Ports			  [3, 1]
	  Position		  [520, 501, 550, 559]
	  ShowName		  off
	  Inputs		  "3"
	}
	Block {
	  BlockType		  Logic
	  Name			  "Logical\nOperator12"
	  SID			  "329:23"
	  Ports			  [3, 1]
	  Position		  [775, 113, 800, 207]
	  ShowName		  off
	  Inputs		  "3"
	}
	Block {
	  BlockType		  Logic
	  Name			  "Logical\nOperator2"
	  SID			  "329:24"
	  Ports			  [2, 1]
	  Position		  [545, 250, 575, 345]
	  ForegroundColor	  "blue"
	  ShowName		  off
	}
	Block {
	  BlockType		  RateLimiter
	  Name			  "Rate Limiter1"
	  SID			  "329:25"
	  Position		  [250, 225, 280, 255]
	  ForegroundColor	  "blue"
	  RisingSlewLimit	  "inf"
	  FallingSlewLimit	  "-1/1"
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator1"
	  SID			  "329:26"
	  Ports			  [2, 1]
	  Position		  [475, 317, 505, 348]
	  ForegroundColor	  "blue"
	  ShowName		  off
	  Operator		  ">"
	}
	Block {
	  BlockType		  Saturate
	  Name			  "Saturation"
	  SID			  "329:27"
	  Ports			  [1, 1]
	  Position		  [775, 515, 805, 545]
	  InputPortMap		  "u0"
	  UpperLimit		  "max(fc_map_spd)*fc_spd_scale"
	  LowerLimit		  "vc_idle_spd*vc_idle_bool"
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch"
	  SID			  "329:28"
	  Position		  [695, 503, 725, 557]
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch1"
	  SID			  "329:29"
	  Position		  [895, 524, 920, 556]
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch2"
	  SID			  "329:30"
	  Position		  [380, 194, 410, 236]
	  ForegroundColor	  "blue"
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch3"
	  SID			  "329:31"
	  Position		  [695, 209, 725, 251]
	  ForegroundColor	  "blue"
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch4"
	  SID			  "329:32"
	  Position		  [855, 134, 880, 166]
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  Terminator
	  Name			  "Terminator"
	  SID			  "329:33"
	  Position		  [290, 15, 310, 35]
	}
	Block {
	  BlockType		  Terminator
	  Name			  "Terminator1"
	  SID			  "329:34"
	  Position		  [290, 85, 310, 105]
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "clutch\ndisengaged"
	  SID			  "329:35"
	  Ports			  [2, 1]
	  Position		  [400, 457, 430, 488]
	  Operator		  "=="
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "clutch\ndisengaged1"
	  SID			  "329:36"
	  Ports			  [2, 1]
	  Position		  [145, 222, 175, 253]
	  ForegroundColor	  "blue"
	  Operator		  "=="
	}
	Block {
	  BlockType		  Reference
	  Name			  "key_on"
	  SID			  "329:37"
	  Ports			  [0, 1]
	  Position		  [480, 84, 535, 116]
	  NamePlacement		  "alternate"
	  SourceBlock		  "lib_controls/<vc> ISG bal shift\nby time CD3xx/engine on\n(balanced parallel hybrid)/key_on"
	  SourceType		  "Repeating table"
	  MaskParam1		  "vc_key_on(:,1)"
	  MaskParam2		  "vc_key_on(:,2)"
	  Port {
	    PortNumber		    1
	    Name		    "ignition key is on"
	    RTWStorageClass	    "Auto"
	    DataLoggingNameMode	    "SignalName"
	  }
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "moving next\ntime"
	  SID			  "329:38"
	  Ports			  [2, 1]
	  Position		  [325, 552, 355, 583]
	  Operator		  ">"
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "moving next\ntime1"
	  SID			  "329:39"
	  Ports			  [2, 1]
	  Position		  [415, 257, 445, 288]
	  ForegroundColor	  "blue"
	  ShowName		  off
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "not\nmoving"
	  SID			  "329:40"
	  Ports			  [2, 1]
	  Position		  [460, 512, 490, 543]
	  Operator		  "=="
	}
	Block {
	  BlockType		  Reference
	  Name			  "repeated cycle time"
	  SID			  "329:41"
	  Ports			  [0, 1]
	  Position		  [360, 307, 395, 343]
	  ForegroundColor	  "blue"
	  FontName		  "Arial"
	  SourceBlock		  "lib_controls/<vc> ISG bal shift\nby time CD3xx/engine on\n(balanced parallel hybrid)/repeated cycle"
	  " time"
	  SourceType		  "Forward looking repeating table"
	  t			  "cyc_mph(:,1)"
	  y			  "cyc_mph(:,1)"
	}
	Block {
	  BlockType		  Reference
	  Name			  "repeated cycle:\n speed required at\nend of NEXT step"
	  SID			  "329:42"
	  Ports			  [0, 1]
	  Position		  [30, 497, 65, 533]
	  ForegroundColor	  "blue"
	  FontName		  "Arial"
	  SourceBlock		  "lib_controls/<vc> ISG bal shift\nby time CD3xx/engine on\n(balanced parallel hybrid)/repeated cycle"
	  ":\n speed required at\nend of NEXT step"
	  SourceType		  "Forward looking repeating table"
	  t			  "cyc_mph(:,1)"
	  y			  "cyc_mph(:,2)"
	}
	Block {
	  BlockType		  Outport
	  Name			  "engine on"
	  SID			  "329:43"
	  Position		  [930, 143, 960, 157]
	  IconDisplay		  "Port number"
	}
	Block {
	  BlockType		  Outport
	  Name			  "spd command\n (rad/s)"
	  SID			  "329:44"
	  Position		  [950, 533, 980, 547]
	  Port			  "2"
	  IconDisplay		  "Port number"
	}
	Block {
	  BlockType		  Outport
	  Name			  "key on"
	  SID			  "329:45"
	  Position		  [700, 93, 730, 107]
	  Port			  "3"
	  IconDisplay		  "Port number"
	}
	Line {
	  SrcBlock		  "trq req'd\nout of clutch\n(N*m)"
	  SrcPort		  1
	  DstBlock		  "Terminator"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "spd req'd\nout of clutch\n(N*m)1"
	  SrcPort		  1
	  DstBlock		  "Terminator1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Logical\nOperator2"
	  SrcPort		  1
	  Points		  [25, 0; 0, -70]
	  DstBlock		  "Switch3"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Relational\nOperator1"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "Logical\nOperator2"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Switch3"
	  SrcPort		  1
	  Points		  [25, 0; 0, -40]
	  DstBlock		  "Logical\nOperator12"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "moving next\ntime1"
	  SrcPort		  1
	  DstBlock		  "Logical\nOperator2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "(--)3"
	  SrcPort		  1
	  Points		  [10, 0; 0, -20]
	  DstBlock		  "Switch3"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Constant1"
	  SrcPort		  1
	  Points		  [10, 0; 0, -35]
	  DstBlock		  "Relational\nOperator1"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "repeated cycle time"
	  SrcPort		  1
	  DstBlock		  "Relational\nOperator1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <ess>"
	  SrcPort		  1
	  DstBlock		  "moving next\ntime1"
	  DstPort		  1
	}
	Line {
	  Name			  "ignition key is on"
	  Labels		  [0, 0]
	  SrcBlock		  "key_on"
	  SrcPort		  1
	  Points		  [0, 0; 125, 0]
	  Branch {
	    Points		    [0, 60]
	    DstBlock		    "Logical\nOperator12"
	    DstPort		    2
	  }
	  Branch {
	    DstBlock		    "key on"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "(--)2"
	  SrcPort		  1
	  Points		  [15, 0; 0, 75]
	  DstBlock		  "Logical\nOperator12"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant3"
	  SrcPort		  1
	  DstBlock		  "Switch"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Switch"
	  SrcPort		  1
	  DstBlock		  "Saturation"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Logical\nOperator10"
	  SrcPort		  1
	  DstBlock		  "Switch"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "fc_spd_out_r"
	  SrcPort		  1
	  DstBlock		  "Switch"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Saturation"
	  SrcPort		  1
	  DstBlock		  "Switch1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "clutch\nstate"
	  SrcPort		  1
	  DstBlock		  "clutch\ndisengaged"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Switch1"
	  SrcPort		  1
	  DstBlock		  "spd command\n (rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant7"
	  SrcPort		  1
	  DstBlock		  "Switch1"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Constant4"
	  SrcPort		  1
	  DstBlock		  "clutch\ndisengaged"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "v_ave_req"
	  SrcPort		  1
	  DstBlock		  "not\nmoving"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant5"
	  SrcPort		  1
	  DstBlock		  "not\nmoving"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "repeated cycle:\n speed required at\nend of NEXT step"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    Points		    [225, 0]
	    DstBlock		    "moving next\ntime"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -285]
	    Branch {
	      Points		      [0, -15]
	      DstBlock		      "Switch2"
	      DstPort		      2
	    }
	    Branch {
	      DstBlock		      "clutch\ndisengaged1"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "Constant6"
	  SrcPort		  1
	  DstBlock		  "moving next\ntime"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "clutch\ndisengaged"
	  SrcPort		  1
	  Points		  [70, 0]
	  DstBlock		  "Logical\nOperator10"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "not\nmoving"
	  SrcPort		  1
	  DstBlock		  "Logical\nOperator10"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "moving next\ntime"
	  SrcPort		  1
	  Points		  [0, 0; 140, 0]
	  Branch {
	    Points		    [0, -20]
	    DstBlock		    "Logical\nOperator10"
	    DstPort		    3
	  }
	  Branch {
	    Points		    [65, 0; 0, -80; 250, 0; 0, -340]
	    DstBlock		    "Switch4"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "(--)4"
	  SrcPort		  1
	  Points		  [25, 0; 0, -15]
	  DstBlock		  "moving next\ntime1"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Logical\nOperator12"
	  SrcPort		  1
	  DstBlock		  "Switch4"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Constant8"
	  SrcPort		  1
	  Points		  [0, 25]
	  DstBlock		  "Switch4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Switch4"
	  SrcPort		  1
	  Points		  [0, 0; 20, 0]
	  Branch {
	    DstBlock		    "engine on"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 40; -50, 0; 0, 350]
	    DstBlock		    "Switch1"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "Switch2"
	  SrcPort		  1
	  Points		  [0, 0]
	  DstBlock		  "Switch3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant2"
	  SrcPort		  1
	  DstBlock		  "Switch2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant9"
	  SrcPort		  1
	  DstBlock		  "clutch\ndisengaged1"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "clutch\ndisengaged1"
	  SrcPort		  1
	  DstBlock		  "Hit \nCrossing1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Hit \nCrossing1"
	  SrcPort		  1
	  DstBlock		  "Rate Limiter1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Rate Limiter1"
	  SrcPort		  1
	  Points		  [35, 0; 0, -10]
	  DstBlock		  "Switch2"
	  DstPort		  3
	}
      }
    }
    Annotation {
      SID		      "6879"
      Name		      "Vehicle Controls:"
      Position		      [81, 21]
      ForegroundColor	      "blue"
      BackgroundColor	      "yellow"
      DropShadow	      on
      FontName		      "Arial"
      FontSize		      14
    }
    Annotation {
      SID		      "6880"
      Name		      "Conventional"
      Position		      [55, 54]
    }
    Annotation {
      SID		      "6881"
      Name		      "Series"
      Position		      [60, 449]
    }
    Annotation {
      SID		      "6882"
      Name		      "Parallel"
      Position		      [51, 143]
    }
    Annotation {
      SID		      "6883"
      Name		      "Fuel Cell"
      Position		      [58, 559]
    }
    Annotation {
      SID		      "6884"
      Name		      "EV"
      Position		      [56, 668]
    }
    Annotation {
      SID		      "6885"
      Name		      "Other"
      Position		      [60, 752]
    }
    Annotation {
      SID		      "6886"
      Name		      "---------------------------------------------------------------------------------------------------"
      "----------------------------------------------------------------------------------------------------------------"
      "--------------------------------------------------"
      Position		      [411, 124]
    }
    Annotation {
      SID		      "6887"
      Name		      "---------------------------------------------------------------------------------------------------"
      "---------------------"
      Position		      [211, 419]
    }
    Annotation {
      SID		      "6888"
      Name		      "---------------------------------------------------------------------------------------------------"
      "---------------------"
      Position		      [216, 529]
    }
    Annotation {
      SID		      "6889"
      Name		      "---------------------------------------------------------------------------------------------------"
      "---------------------"
      Position		      [211, 634]
    }
    Annotation {
      SID		      "6890"
      Name		      "---------------------------------------------------------------------------------------------------"
      "---------------------"
      Position		      [601, 529]
    }
    Annotation {
      SID		      "6891"
      Name		      "Saber Co-simulation"
      Position		      [531, 18]
    }
    Annotation {
      SID		      "6892"
      Name		      "control sub-models"
      Position		      [474, 449]
    }
    Annotation {
      SID		      "6893"
      Name		      "---------------------------------------------------------------------------------------------------"
      "---------------------"
      Position		      [601, 419]
    }
    Annotation {
      SID		      "6894"
      Name		      "Fuzzy Logic"
      Position		      [474, 548]
    }
    Annotation {
      SID		      "6895"
      Name		      "---------------------------------------------------------------------------------------------------"
      "---------------------"
      Position		      [601, 634]
    }
    Annotation {
      SID		      "6896"
      Name		      "Configurable Subsystem for BD_PAR the <cs> blocks"
      Position		      [408, 662]
    }
    Annotation {
      SID		      "6897"
      Name		      "Configurable Subsystem for BD_PAR the <vc> blocks"
      Position		      [403, 752]
    }
    Annotation {
      SID		      "6898"
      Name		      "Configurable subsystem for BD_FUELCELL the <cs> blocks"
      Position		      [675, 679]
    }
  }
}
