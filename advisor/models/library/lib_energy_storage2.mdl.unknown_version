Library {
  Name			  "lib_energy_storage2"
  Version		  4.1.1
  Description		  "energy storage"
  LibraryLinkDisplay	  "all"
  CovSaveName		  "covdata"
  CovMetricSettings	  "dw"
  CovNameIncrementing	  off
  CovHtmlReporting	  on
  BlockNameDataTip	  on
  BlockParametersDataTip  on
  BlockDescriptionStringDataTip	off
  ToolBar		  on
  StatusBar		  on
  BrowserShowLibraryLinks on
  BrowserLookUnderMasks	  on
  Created		  "Tue May 30 16:45:37 2000"
  Creator		  "NREL"
  UpdateHistory		  "UpdateHistoryNever"
  ModifiedByFormat	  "%<Auto>"
  LastModifiedBy	  "mokeefe"
  ModifiedDateFormat	  "%<Auto>"
  LastModifiedDate	  "Tue Apr 01 15:17:30 2003"
  ModifiedComment	  "mzolot -- Mon Apr 29 15:28:23 2002 -- Version 3.010"
"7\n"
  ModifiedHistory	  "mzolot -- Mon Apr 29 15:28:23 2002 -- Version 3.010"
"7\n\n\nmzolot -- Mon Apr 29 15:28:23 2002 -- Version 3.0107\n\n\nmzolot -- Mo"
"n Apr 29 15:09:57 2002 -- Version 3.0106\n\n\nmzolot -- Mon Apr 29 14:58:03 2"
"002 -- Version 3.0105\n\n\nmzolot -- Mon Apr 29 14:03:19 2002 -- Version 3.01"
"04\n\n\nmzolot -- Mon Apr 29 14:02:44 2002 -- Version 3.0103\n\n\nmzolot -- M"
"on Apr 29 14:02:36 2002 -- Version 3.0102\n\n\nmzolot -- Mon Apr 29 14:01:30 "
"2002 -- Version 3.0101\n\n\nmzolot -- Tue Apr 23 09:34:07 2002 -- Version 3.0"
"100\n\n\nmzolot -- Tue Apr 23 09:26:47 2002 -- Version 3.099\n\n\nmzolot -- T"
"ue Apr 23 09:26:41 2002 -- Version 3.098\n\n\nmzolot -- Fri Apr 19 16:37:41 2"
"002 -- Version 3.097\n\n\nmzolot -- Fri Apr 19 11:13:38 2002 -- Version 3.096"
"\n\n\nmzolot -- Thu Apr 18 17:16:22 2002 -- Version 3.095\n\n\nmokeefe -- Thu"
" Apr 18 08:28:08 2002 -- Version 3.094\nsaving the model:\no \"without the mo"
"del browser open\"\no with only top-level screen visible \no with \"fit to vi"
"ew\" enabled\no with \"status bar\" off and \"toolbar\" off\no with \"prompt "
"to update model history with each save\" on\n\nvjohnson -- Thu Jan 25 10:35:5"
"6 2001 -- Version 3.02\n\n\nssprik -- Wed Nov 01 15:28:33 2000 -- Version 3.0"
"1\nenabled comment dialogue to prompt the person saving the model to add comm"
"ents.\n\n"
  ModelVersionFormat	  "3.0%<AutoIncrement:169>"
  ConfigurationManager	  "none"
  SimParamPage		  "Solver"
  AlgebraicLoopMsg	  "warning"
  MinStepSizeMsg	  "warning"
  UnconnectedInputMsg	  "warning"
  UnconnectedOutputMsg	  "warning"
  UnconnectedLineMsg	  "warning"
  InheritedTsInSrcMsg	  "warning"
  SingleTaskRateTransMsg  "none"
  MultiTaskRateTransMsg	  "error"
  IntegerOverflowMsg	  "warning"
  CheckForMatrixSingularity "none"
  UnnecessaryDatatypeConvMsg "none"
  Int32ToFloatConvMsg	  "warning"
  InvalidFcnCallConnMsg	  "error"
  SignalLabelMismatchMsg  "none"
  LinearizationMsg	  "none"
  VectorMatrixConversionMsg "none"
  SfunCompatibilityCheckMsg "none"
  BlockPriorityViolationMsg "warning"
  ArrayBoundsChecking	  "none"
  ConsistencyChecking	  "none"
  Profile		  off
  SimulationMode	  "normal"
  RTWRetainRTWFile	  off
  RTWMakeCommand	  "make_rtw"
  RTWGenerateCodeOnly	  off
  TLCProfiler		  off
  TLCDebug		  off
  TLCCoverage		  off
  ExtModeMexFile	  "ext_comm"
  ExtModeBatchMode	  off
  ExtModeTrigType	  "manual"
  ExtModeTrigMode	  "normal"
  ExtModeTrigPort	  "1"
  ExtModeTrigElement	  "any"
  ExtModeTrigDuration	  1000
  ExtModeTrigHoldOff	  0
  ExtModeTrigDelay	  0
  ExtModeTrigDirection	  "rising"
  ExtModeTrigLevel	  0
  ExtModeArchiveMode	  "off"
  ExtModeAutoIncOneShot	  off
  ExtModeIncDirWhenArm	  off
  ExtModeAddSuffixToVar	  off
  ExtModeWriteAllDataToWs off
  ExtModeArmWhenConnect	  on
  ExtModeSkipDownloadWhenConnect off
  ExtModeLogAll		  on
  ExtModeAutoUpdateStatusClock on
  BlockDefaults {
    Orientation		    "right"
    ForegroundColor	    "black"
    BackgroundColor	    "white"
    DropShadow		    off
    NamePlacement	    "normal"
    FontName		    "Helvetica"
    FontSize		    10
    FontWeight		    "normal"
    FontAngle		    "normal"
    ShowName		    on
  }
  AnnotationDefaults {
    HorizontalAlignment	    "center"
    VerticalAlignment	    "middle"
    ForegroundColor	    "black"
    BackgroundColor	    "white"
    DropShadow		    off
    FontName		    "Helvetica"
    FontSize		    10
    FontWeight		    "normal"
    FontAngle		    "normal"
  }
  LineDefaults {
    FontName		    "Helvetica"
    FontSize		    9
    FontWeight		    "normal"
    FontAngle		    "normal"
  }
  System {
    Name		    "lib_energy_storage2"
    Location		    [202, 77, 966, 744]
    Open		    on
    ModelBrowserVisibility  on
    ModelBrowserWidth	    212
    ScreenColor		    "automatic"
    PaperOrientation	    "landscape"
    PaperPositionMode	    "auto"
    PaperType		    "usletter"
    PaperUnits		    "inches"
    ZoomFactor		    "100"
    ReportName		    "simulink-default.rpt"
    Block {
      BlockType		      SubSystem
      Name		      "Ultracapacitor\n System"
      Ports		      [1, 1]
      Position		      [70, 148, 135, 192]
      BackgroundColor	      "yellow"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskType		      "Stand-Alone Energy Storage System Mask"
      MaskPromptString	      "General Name of this Component [char]|Log Varia"
"bles to Workspace?|Initialization File(s) [cell array of char]|Modification C"
"ell [2 column cell array of param and val]|Icon image file name [char--evalua"
"ted]|DEBUG"
      MaskStyleString	      "edit,popup(Don't Log|Log Variable),edit,edit,ed"
"it,popup(ON|OFF)"
      MaskTunableValueString  "on,on,on,on,on,on"
      MaskCallbackString      "|||||"
      MaskEnableString	      "on,on,on,on,on,on"
      MaskVisibilityString    "on,on,on,on,on,on"
      MaskToolTipString	      "on,on,on,on,on,on"
      MaskVariables	      "generalName=@1;logPick=@2;initFileName=@3;modCe"
"ll=@4;imgFileName=@5;DEBUG=&6;"
      MaskInitialization      "% initialization via m-file script\nadvSACompMa"
"skInit;"
      MaskDisplay	      "image(imread(imgFileName))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      MaskValueString	      "'ess'|Log Variable|{}|{}|'bdi_ess.jpg'|OFF"
      MaskVariableAliases     ",,,,,"
      System {
	Name			"Ultracapacitor\n System"
	Location		[202, 77, 966, 744]
	Open			off
	ModelBrowserVisibility	on
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "power req'd\ninto bus (W)"
	  Position		  [140, 200, 160, 220]
	  FontName		  "Arial"
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Block NOTES"
	  Ports			  []
	  Position		  [75, 90, 131, 130]
	  BackgroundColor	  "green"
	  ShowName		  off
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "disp('Block\\nNOTES')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Block NOTES"
	    Location		    [256, 329, 741, 634]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Annotation {
	      Position		      [242, 146]
	      Text		      "This is a stand-alone version of an ene"
"rgy storage system\n\nSeveral different models are available"
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Ultracapacitor\n System"
	  Ports			  [2, 3]
	  Position		  [245, 200, 305, 240]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('bdi_ess.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Ultracapacitor\n System"
	    Location		    [207, 263, 900, 661]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "automatic"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "power req'd\ninto bus (W)"
	      Position		      [145, 115, 165, 135]
	      NamePlacement	      "alternate"
	      FontName		      "Arial"
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "control"
	      Position		      [45, 410, 65, 430]
	      FontName		      "Arial"
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      BusCreator
	      Name		      "Bus\nCreator"
	      Ports		      [12, 1]
	      Position		      [595, 224, 620, 641]
	      ShowName		      off
	      Inputs		      "12"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      Position		      [355, 228, 440, 252]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_tmp"
	      Port {
		PortNumber		1
		Name			"ess_tmp"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      Position		      [355, 263, 440, 287]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "bus_voltage"
	      Port {
		PortNumber		1
		Name			"bus_voltage"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From10"
	      Position		      [355, 578, 455, 602]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_pwr_limited"
	      Port {
		PortNumber		1
		Name			"ess_pwr_limited"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From11"
	      Position		      [355, 613, 455, 637]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_minV_limited"
	      Port {
		PortNumber		1
		Name			"ess_minV_limited"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From2"
	      Position		      [355, 368, 455, 392]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_max_pwr"
	      Port {
		PortNumber		1
		Name			"ess_max_pwr"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From3"
	      Position		      [355, 333, 470, 357]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_max_chg_pwr"
	      Port {
		PortNumber		1
		Name			"ess_max_chg_pwr"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From4"
	      Position		      [355, 298, 440, 322]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_current"
	      Port {
		PortNumber		1
		Name			"ess_current"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From5"
	      Position		      [355, 403, 455, 427]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	      Port {
		PortNumber		1
		Name			"SOC"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From6"
	      Position		      [355, 438, 455, 462]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_maxV_limited"
	      Port {
		PortNumber		1
		Name			"ess_maxV_limited"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From7"
	      Position		      [355, 473, 455, 497]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_soc_hi_limited"
	      Port {
		PortNumber		1
		Name			"ess_soc_hi_limited"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From8"
	      Position		      [355, 508, 455, 532]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_soc_low_limited"
	      Port {
		PortNumber		1
		Name			"ess_soc_low_limited"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From9"
	      Position		      [355, 543, 455, 567]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "mc_voltage_limited"
	      Port {
		PortNumber		1
		Name			"mc_voltage_limited"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility"
	      Position		      [260, 227, 345, 249]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_tmp"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility1"
	      Position		      [260, 262, 345, 284]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "bus_voltage"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility10"
	      Position		      [242, 542, 345, 564]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "mc_voltage_limited"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility11"
	      Position		      [260, 577, 345, 599]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_pwr_limited"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility12"
	      Position		      [260, 612, 345, 634]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_minV_limited"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility2"
	      Position		      [260, 367, 345, 389]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_max_pwr"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility3"
	      Position		      [241, 332, 345, 354]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_max_chg_pwr"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility4"
	      Position		      [260, 297, 345, 319]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_current"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility6"
	      Position		      [260, 402, 345, 424]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility7"
	      Position		      [260, 437, 345, 459]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_maxV_limited"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility8"
	      Position		      [260, 472, 345, 494]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_soc_hi_limited"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility9"
	      Position		      [260, 507, 345, 529]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_soc_low_limited"
	    }
	    Block {
	      BlockType		      Terminator
	      Name		      "Terminator"
	      Position		      [95, 410, 115, 430]
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "model"
	      Ports		      [1, 1]
	      Position		      [230, 95, 270, 155]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"model"
		Location		[363, 71, 1007, 449]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"automatic"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "power req'd\ninto bus (W)"
		  Position		  [30, 50, 50, 70]
		  NamePlacement		  "alternate"
		  FontName		  "Arial"
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Reference
		  Name			  "C\n(Farads)"
		  Ports			  [2, 1]
		  Position		  [150, 234, 175, 256]
		  SourceBlock		  "simulink3/Functions\n& Tables/Look-"
"Up\nTable (2-D)"
		  SourceType		  "Lookup Table (2-D)"
		  x			  "ess_tmp"
		  y			  "ess_i"
		  t			  "ess_cap"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Calc Iout"
		  Ports			  [4, 3]
		  Position		  [195, 55, 240, 110]
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  Port {
		    PortNumber		    1
		    Name		    "Iout"
		    TestPoint		    off
		    LinearAnalysisOutput    off
		    LinearAnalysisInput	    off
		    RTWStorageClass	    "Auto"
		  }
		  System {
		    Name		    "Calc Iout"
		    Location		    [210, 400, 857, 627]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Preq"
		    Position		    [15, 43, 45, 57]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Voc"
		    Position		    [15, 73, 45, 87]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "tmp"
		    Position		    [15, 103, 45, 117]
		    Port		    "3"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "SOC"
		    Position		    [15, 13, 45, 27]
		    Port		    "4"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "-1*|u|"
		    Position		    [75, 174, 95, 186]
		    Expr		    "-1*abs(u)"
		    }
		    Block {
		    BlockType		    Abs
		    Name		    "Abs"
		    Position		    [75, 117, 95, 133]
		    ShowName		    off
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <cs>1"
		    Position		    [550, 130, 650, 150]
		    BackgroundColor	    "lightBlue"
		    ShowName		    off
		    GotoTag		    "ess_max_pwr"
		    TagVisibility	    "scoped"
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <cs>2"
		    Position		    [535, 100, 650, 120]
		    BackgroundColor	    "lightBlue"
		    ShowName		    off
		    GotoTag		    "ess_max_chg_pwr"
		    TagVisibility	    "scoped"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Iout=(Voc-(Voc^2-4RPout)^.5)\n   "
"    -----------------------------\n(2*R)"
		    Position		    [330, 69, 360, 91]
		    NamePlacement	    "alternate"
		    Expr		    "(u[2]-(((u[2]^2-4*u[1]*u[3])>0)*("
"u[2]^2-4*u[1]*u[3]))^.5)/(2*u[3])"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    Position		    [490, 131, 500, 149]
		    ShowName		    off
		    X0			    "0"
		    InheritSampleTime	    off
		    RTWStateStorageClass    "Auto"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    Position		    [505, 101, 515, 119]
		    ShowName		    off
		    X0			    "0"
		    InheritSampleTime	    off
		    RTWStateStorageClass    "Auto"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [3, 1]
		    Position		    [305, 61, 310, 99]
		    ShowName		    off
		    Inputs		    "3"
		    DisplayOption	    "bar"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Parallel"
		    Position		    [200, 162, 225, 188]
		    Gain		    "1/ess_parallel_mod_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Parallel1"
		    Position		    [205, 107, 230, 133]
		    ShowName		    off
		    Gain		    "1/ess_parallel_mod_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Prdct"
		    Ports		    [2, 1]
		    Position		    [115, 58, 135, 82]
		    ShowName		    off
		    Inputs		    "*/"
		    Multiplication	    "Element-wise(.*)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "R scale fn"
		    Position		    [160, 107, 185, 133]
		    Gain		    "ess_res_scale_fun(ess_res_scale_c"
"oef,ess_module_num,ess_cap_scale)"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "R2 scale fn"
		    Position		    [160, 163, 185, 187]
		    ShowName		    off
		    Gain		    "ess_res_scale_fun(ess_res_scale_c"
"oef,ess_module_num,ess_cap_scale)"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Rchg\n(ohms)"
		    Ports		    [2, 1]
		    Position		    [120, 159, 145, 186]
		    SourceBlock		    "simulink3/Functions\n& Tables/Loo"
"k-Up\nTable (2-D)"
		    SourceType		    "Lookup Table (2-D)"
		    x			    "ess_tmp"
		    y			    "ess_i"
		    t			    "ess_r"
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Rdis\n(ohms)"
		    Ports		    [2, 1]
		    Position		    [120, 104, 145, 131]
		    SourceBlock		    "simulink3/Functions\n& Tables/Loo"
"k-Up\nTable (2-D)"
		    SourceType		    "Lookup Table (2-D)"
		    x			    "ess_tmp"
		    y			    "ess_i"
		    t			    "ess_r"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "SOC limit"
		    Ports		    [2, 1]
		    Position		    [125, 14, 165, 36]
		    ShowPortLabels	    off
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    System {
		    Name		    "SOC limit"
		    Location		    [266, 224, 729, 496]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "SOC"
		    Position		    [15, 40, 35, 60]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Pbty"
		    Position		    [15, 130, 35, 150]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant1"
		    Position		    [45, 55, 80, 75]
		    ShowName		    off
		    Value		    "0.001"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant5"
		    Position		    [135, 26, 170, 44]
		    ShowName		    off
		    Value		    ".999"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant9"
		    Position		    [65, 118, 75, 132]
		    ShowName		    off
		    Value		    "0"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <sdo>2"
		    Position		    [310, 124, 420, 146]
		    BackgroundColor	    "lightBlue"
		    ShowName		    off
		    GotoTag		    "ess_soc_low_limited"
		    TagVisibility	    "scoped"
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <sdo>4"
		    Position		    [310, 29, 420, 51]
		    BackgroundColor	    "lightBlue"
		    ShowName		    off
		    GotoTag		    "ess_soc_hi_limited"
		    TagVisibility	    "scoped"
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "Logical\nOperator"
		    Ports		    [2, 1]
		    Position		    [150, 97, 180, 128]
		    ShowName		    off
		    Operator		    "OR"
		    Inputs		    "2"
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "Logical\nOperator1"
		    Ports		    [2, 1]
		    Position		    [260, 22, 290, 53]
		    ShowName		    off
		    Operator		    "AND"
		    Inputs		    "2"
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "Logical\nOperator2"
		    Ports		    [1, 1]
		    Position		    [225, 119, 255, 151]
		    Operator		    "NOT"
		    Inputs		    "1"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    Position		    [100, 42, 130, 73]
		    ShowName		    off
		    Operator		    ">"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator3"
		    Position		    [95, 102, 125, 133]
		    NamePlacement	    "alternate"
		    ShowName		    off
		    Operator		    "<"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "SOC>=.999"
		    Position		    [185, 12, 215, 43]
		    Operator		    ">="
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "charging\n(Preq is neg)"
		    Position		    [205, 57, 235, 88]
		    Operator		    "<"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "no power req if\nSOC<0 and trying"
" \nto discharge"
		    Position		    [225, 190, 255, 220]
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "no power req if\nSOC>.999 and try"
"ing \nto charge"
		    Position		    [330, 180, 360, 210]
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Pbty, limited"
		    Position		    [415, 185, 435, 205]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Constant1"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Pbty"
		    SrcPort		    1
		    Points		    [0, 0; 15, 0]
		    Branch {
		    Points		    [0, -30]
		    DstBlock		    "Relational\nOperator3"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [130, 0]
		    Branch {
		    Points		    [0, -75]
		    DstBlock		    "charging\n(Preq is neg)"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 55]
		    DstBlock		    "no power req if\nSOC<0 and trying"
" \nto discharge"
		    DstPort		    1
		    }
		    }
		    }
		    Line {
		    SrcBlock		    "Logical\nOperator"
		    SrcPort		    1
		    Points		    [10, 0; 0, 20]
		    Branch {
		    DstBlock		    "Logical\nOperator2"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 70]
		    DstBlock		    "no power req if\nSOC<0 and trying"
" \nto discharge"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "SOC"
		    SrcPort		    1
		    Points		    [0, 0; 40, 0]
		    Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -30]
		    DstBlock		    "SOC>=.999"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "SOC>=.999"
		    SrcPort		    1
		    DstBlock		    "Logical\nOperator1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "charging\n(Preq is neg)"
		    SrcPort		    1
		    Points		    [0, -30]
		    DstBlock		    "Logical\nOperator1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant5"
		    SrcPort		    1
		    DstBlock		    "SOC>=.999"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "no power req if\nSOC<0 and trying"
" \nto discharge"
		    SrcPort		    1
		    DstBlock		    "no power req if\nSOC>.999 and try"
"ing \nto charge"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "no power req if\nSOC>.999 and try"
"ing \nto charge"
		    SrcPort		    1
		    DstBlock		    "Pbty, limited"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Logical\nOperator1"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    DstBlock		    "Goto <sdo>4"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 0; 0, 155]
		    DstBlock		    "no power req if\nSOC>.999 and try"
"ing \nto charge"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator3"
		    SrcPort		    1
		    DstBlock		    "Logical\nOperator"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant9"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    Points		    [0, 0]
		    Branch {
		    DstBlock		    "Relational\nOperator3"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, -45]
		    DstBlock		    "charging\n(Preq is neg)"
		    DstPort		    2
		    }
		    }
		    Branch {
		    Points		    [0, 90; 115, 0]
		    Branch {
		    DstBlock		    "no power req if\nSOC<0 and trying"
" \nto discharge"
		    DstPort		    3
		    }
		    Branch {
		    Points		    [0, 45; 85, 0; 0, -75]
		    DstBlock		    "no power req if\nSOC>.999 and try"
"ing \nto charge"
		    DstPort		    1
		    }
		    }
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "Logical\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Logical\nOperator2"
		    SrcPort		    1
		    DstBlock		    "Goto <sdo>2"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch2"
		    Position		    [255, 180, 285, 210]
		    ShowName		    off
		    Threshold		    "0"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "enhancedToWorkspace"
		    Ports		    [1]
		    Position		    [550, 42, 645, 58]
		    ShowName		    off
		    CopyFcn		    "breakLinkCopyFcn"
		    ParentCloseFcn	    "breakLinkParCloseFcn"
		    FontSize		    8
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    on
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "enhancedToWorkspace"
		    MaskDescription	    "A wrapper for the Simulink \"To W"
"orkspace\" block that allows you to evaluate the name of the variable to log "
"to workspace. This is useful to avoid the double logging errors that occur wh"
"en you pull in two library models that attempt to log to the same variable."
		    MaskHelp		    "<h2>Enhanced To Workspace Block</"
"h2>\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gen"
"eral name of the variable. Variables are saved to the workspace as <i>general"
"Name_specificName</i>. Note that this is an evaluated variable. If you would "
"like to type in the value directly, it must be surrounded with single quotes."
" Otherwise you can input the name of a variable containing a char string.</li"
">\n<li><b>Specific Name:</b> This is the specific name of the variable. Note "
"that this is input as a char literal (i.e., you don't need quotes).</li>\n<li"
"><b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the var"
"iable will not be logged to the workspace. If 1, the variable will be logged."
" This is done so that variable logging can be turned off to improve speed.</l"
"i>\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toge"
"ther to allow one to dynamically resolve variable names at run time in simuli"
"nk. This is most powerful when used in conjunction with a masked subsystem to"
" allow multiple instances of that masked subsytem to be used in the same mode"
"l. The strategy is to set the generalName in the block mask which will allow "
"the block to change the general name for all variable logging on the fly. \n<"
"h3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspac"
"e block. These files are located in the &lt; ADVISOR root &gt;/GUI directory "
":\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initializatio"
"n for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the "
"block callback when the simulink block is copied. It is necessary to break th"
"e link to the enhancedToWorkspace similar to the To Workspace block in order "
"for it to be able to configure itself. (Try copying simulink's To Workspace b"
"lock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i"
"> This file is similar to the breakLinkCopyFcn and is used when a parent syst"
"em is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'K"
"eefe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</"
"B> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type"
"</B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</"
"UL>\n</VARDEF>\n-->\n"
		    MaskPromptString	    "General Name [char-evaluated]|Spe"
"cific Name [char-literal]|Enable flag (1=on,0=off)"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskVariables	    "generalName=@1;specificName=&2;lo"
"gFlag=@3;"
		    MaskInitialization	    "enhancedToWsMaker"
		    MaskDisplay		    "disp([generalName,'_',specificNam"
"e])"
		    MaskSelfModifiable	    on
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "generalName|current|logFlag"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "enhancedToWorkspace"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "limit power"
		    Ports		    [4, 3]
		    Position		    [380, 88, 470, 132]
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    System {
		    Name		    "limit power"
		    Location		    [518, 214, 1085, 632]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Iout"
		    Position		    [15, 38, 45, 52]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Voc"
		    Position		    [15, 68, 45, 82]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Rchg"
		    Position		    [15, 98, 45, 112]
		    Port		    "3"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Rdchg"
		    Position		    [15, 263, 45, 277]
		    Port		    "4"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <sdo>3"
		    Position		    [385, 33, 490, 57]
		    BackgroundColor	    "lightBlue"
		    ShowName		    off
		    GotoTag		    "ess_maxV_limited"
		    TagVisibility	    "scoped"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Imax chg=(Voc-Vmax)/R"
		    Position		    [150, 99, 180, 121]
		    Expr		    "(u(1)-u(3))/u(2)"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Imax dchg=(Voc -Vmin)/R"
		    Position		    [140, 264, 170, 286]
		    Expr		    "(u(3)-u(2))/u(1)"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Limits"
		    Ports		    [6]
		    Position		    [470, 232, 495, 333]
		    FontName		    "Arial"
		    ShowPortLabels	    off
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    System {
		    Name		    "Limits"
		    Location		    [298, 266, 645, 610]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "current req"
		    Position		    [20, 15, 40, 35]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "current bat\nlimited"
		    Position		    [20, 55, 40, 75]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "V used"
		    Position		    [20, 110, 40, 130]
		    Port		    "3"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "V mc_min_volts"
		    Position		    [20, 150, 40, 170]
		    Port		    "4"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "V battery (.5Voc)"
		    Position		    [20, 190, 40, 210]
		    Port		    "5"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "V ess_min_volts"
		    Position		    [15, 240, 35, 260]
		    Port		    "6"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <sdo>"
		    Position		    [230, 178, 335, 202]
		    BackgroundColor	    "lightBlue"
		    ShowName		    off
		    GotoTag		    "ess_pwr_limited"
		    TagVisibility	    "scoped"
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <sdo>1"
		    Position		    [230, 102, 340, 128]
		    BackgroundColor	    "lightBlue"
		    ShowName		    off
		    GotoTag		    "mc_voltage_limited"
		    TagVisibility	    "scoped"
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <sdo>2"
		    Position		    [225, 268, 330, 292]
		    BackgroundColor	    "lightBlue"
		    ShowName		    off
		    GotoTag		    "ess_minV_limited"
		    TagVisibility	    "scoped"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator1"
		    Position		    [75, 42, 105, 73]
		    ShowName		    off
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator3"
		    Position		    [95, 112, 125, 143]
		    ShowName		    off
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator4"
		    Position		    [95, 177, 125, 208]
		    ShowName		    off
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator5"
		    Position		    [95, 227, 125, 258]
		    ShowName		    off
		    Operator		    "<="
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "limited\nby battery"
		    Ports		    [2, 1]
		    Position		    [175, 172, 205, 203]
		    Operator		    "AND"
		    Inputs		    "2"
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "limited\nby battery\nmin V"
		    Ports		    [2, 1]
		    Position		    [175, 262, 205, 293]
		    Operator		    "AND"
		    Inputs		    "2"
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "limited by\nmotor controller"
		    Ports		    [2, 1]
		    Position		    [180, 97, 210, 128]
		    Operator		    "AND"
		    Inputs		    "2"
		    }
		    Line {
		    SrcBlock		    "current bat\nlimited"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "V mc_min_volts"
		    SrcPort		    1
		    Points		    [35, 0]
		    DstBlock		    "Relational\nOperator3"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "V used"
		    SrcPort		    1
		    Points		    [0, 0; 25, 0]
		    Branch {
		    DstBlock		    "Relational\nOperator3"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 65]
		    Branch {
		    DstBlock		    "Relational\nOperator4"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 50]
		    DstBlock		    "Relational\nOperator5"
		    DstPort		    1
		    }
		    }
		    }
		    Line {
		    SrcBlock		    "V battery (.5Voc)"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator4"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "V ess_min_volts"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator5"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "limited by\nmotor controller"
		    SrcPort		    1
		    DstBlock		    "Goto <sdo>1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "limited\nby battery"
		    SrcPort		    1
		    DstBlock		    "Goto <sdo>"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "limited\nby battery\nmin V"
		    SrcPort		    1
		    DstBlock		    "Goto <sdo>2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator3"
		    SrcPort		    1
		    Points		    [35, 0]
		    DstBlock		    "limited by\nmotor controller"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator1"
		    SrcPort		    1
		    Points		    [30, 0; 0, 45]
		    Branch {
		    DstBlock		    "limited by\nmotor controller"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 75]
		    Branch {
		    DstBlock		    "limited\nby battery"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 90]
		    DstBlock		    "limited\nby battery\nmin V"
		    DstPort		    1
		    }
		    }
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator4"
		    SrcPort		    1
		    DstBlock		    "limited\nby battery"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator5"
		    SrcPort		    1
		    Points		    [0, 40]
		    DstBlock		    "limited\nby battery\nmin V"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "current req"
		    SrcPort		    1
		    Points		    [15, 0]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "Logical\nOperator"
		    Ports		    [1, 1]
		    Position		    [270, 33, 295, 57]
		    ShowName		    off
		    Operator		    "NOT"
		    Inputs		    "2"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Max Chg current\nnot exceeded"
		    Position		    [220, 62, 250, 93]
		    Operator		    ">"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Max Dchg current\nnot exceeded"
		    Position		    [210, 232, 240, 263]
		    Operator		    ">"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [3, 1]
		    Position		    [240, 126, 245, 164]
		    ShowName		    off
		    Inputs		    "3"
		    DisplayOption	    "bar"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux2"
		    Ports		    [3, 1]
		    Position		    [120, 86, 125, 124]
		    ShowName		    off
		    Inputs		    "3"
		    DisplayOption	    "bar"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux3"
		    Ports		    [3, 1]
		    Position		    [95, 261, 100, 289]
		    ShowName		    off
		    Inputs		    "3"
		    DisplayOption	    "bar"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    Ports		    [2, 1]
		    Position		    [350, 124, 375, 151]
		    ShowName		    off
		    Inputs		    "2"
		    Multiplication	    "Element-wise(.*)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product1"
		    Ports		    [2, 1]
		    Position		    [235, 293, 260, 317]
		    ShowName		    off
		    Inputs		    "2"
		    Multiplication	    "Element-wise(.*)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    "Saturation"
		    Position		    [470, 163, 490, 177]
		    ShowName		    off
		    UpperLimit		    "2000*ess_parallel_mod_num"
		    LowerLimit		    "-2000*ess_parallel_mod_num"
		    LinearizeAsGain	    on
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Vmin"
		    Position		    [150, 302, 180, 318]
		    Expr		    "u(2)"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Voc-I*R"
		    Position		    [265, 136, 335, 154]
		    Expr		    "u(3)-u(1)*u(2)"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "ess max voltage*#batts"
		    Position		    [70, 111, 95, 129]
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    "ess_max_volts*ess_module_num"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "ess max voltage*#batts1"
		    Position		    [50, 375, 215, 395]
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    "ess_min_volts*ess_module_num"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "ess_module_num1"
		    Position		    [65, 330, 105, 360]
		    ShowName		    off
		    FontName		    "Arial"
		    Gain		    "0.5"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    MinMax
		    Name		    "limit by 0.5 battery \nor min mc "
"voltage \nor ess min"
		    Ports		    [3, 1]
		    Position		    [245, 338, 265, 372]
		    ShowName		    off
		    Function		    "max"
		    Inputs		    "3"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "limit current based on \nmax volt"
"age during charge"
		    Position		    [325, 65, 355, 95]
		    Threshold		    "0.5"
		    Port {
		    PortNumber		    1
		    Name		    "I_chgmax"
		    TestPoint		    off
		    LinearAnalysisOutput    off
		    LinearAnalysisInput	    off
		    RTWStorageClass	    "Auto"
		    }
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "limit current based on \nmin volt"
"age during dcharge"
		    Position		    [420, 155, 450, 185]
		    ShowName		    off
		    Threshold		    "0.5"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "mc min voltage"
		    Position		    [50, 356, 120, 374]
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    "mc_min_volts"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Iout_lim"
		    Position		    [510, 163, 540, 177]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "[]"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "mx chg pwr"
		    Position		    [510, 133, 540, 147]
		    Port		    "2"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "[]"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "mx dchg pwr"
		    Position		    [510, 193, 540, 207]
		    Port		    "3"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "[]"
		    }
		    Line {
		    SrcBlock		    "Mux2"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Imax chg=(Voc-Vmax)/R"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Iout"
		    SrcPort		    1
		    Points		    [5, 0]
		    Branch {
		    Points		    [140, 0; 0, 15]
		    Branch {
		    Points		    [0, 10]
		    DstBlock		    "Max Chg current\nnot exceeded"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [115, 0]
		    DstBlock		    "limit current based on \nmax volt"
"age during charge"
		    DstPort		    1
		    }
		    }
		    Branch {
		    Points		    [0, 195]
		    DstBlock		    "Max Dchg current\nnot exceeded"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Imax chg=(Voc-Vmax)/R"
		    SrcPort		    1
		    Points		    [5, 0]
		    Branch {
		    Points		    [0, -25]
		    DstBlock		    "Max Chg current\nnot exceeded"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, 10; 35, 0]
		    Branch {
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [50, 0]
		    Branch {
		    Points		    [0, -30]
		    DstBlock		    "limit current based on \nmax volt"
"age during charge"
		    DstPort		    3
		    }
		    Branch {
		    Points		    [0, 10]
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    }
		    }
		    }
		    Line {
		    SrcBlock		    "Rchg"
		    SrcPort		    1
		    Points		    [50, 0]
		    Branch {
		    DstBlock		    "Mux2"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, 40]
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Voc"
		    SrcPort		    1
		    Points		    [0, 20]
		    Branch {
		    DstBlock		    "Mux2"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 60]
		    Branch {
		    DstBlock		    "Mux"
		    DstPort		    3
		    }
		    Branch {
		    Points		    [0, 130]
		    Branch {
		    DstBlock		    "Mux3"
		    DstPort		    3
		    }
		    Branch {
		    DstBlock		    "ess_module_num1"
		    DstPort		    1
		    }
		    }
		    }
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "Voc-I*R"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Voc-I*R"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "mx chg pwr"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Max Chg current\nnot exceeded"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    DstBlock		    "limit current based on \nmax volt"
"age during charge"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Logical\nOperator"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Logical\nOperator"
		    SrcPort		    1
		    DstBlock		    "Goto <sdo>3"
		    DstPort		    1
		    }
		    Line {
		    Labels		    [2, 0]
		    SrcBlock		    "ess max voltage*#batts"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Mux2"
		    DstPort		    3
		    }
		    Line {
		    Name		    "I_chgmax"
		    Labels		    [1, 0]
		    SrcBlock		    "limit current based on \nmax volt"
"age during charge"
		    SrcPort		    1
		    Points		    [45, 0]
		    DstBlock		    "limit current based on \nmin volt"
"age during dcharge"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "limit current based on \nmin volt"
"age during dcharge"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    DstBlock		    "Saturation"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Limits"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Mux3"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    DstBlock		    "Imax dchg=(Voc -Vmin)/R"
		    DstPort		    1
		    }
		    Branch {
		    Labels		    [2, 0]
		    Points		    [0, 35]
		    DstBlock		    "Vmin"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Imax dchg=(Voc -Vmin)/R"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    Points		    [0, -20]
		    DstBlock		    "Max Dchg current\nnot exceeded"
		    DstPort		    2
		    }
		    Branch {
		    Labels		    [1, 0]
		    Points		    [0, 15; 35, 0]
		    Branch {
		    DstBlock		    "Product1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [100, 0; 0, -130]
		    DstBlock		    "limit current based on \nmin volt"
"age during dcharge"
		    DstPort		    1
		    }
		    }
		    }
		    Line {
		    SrcBlock		    "ess max voltage*#batts1"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "limit by 0.5 battery \nor min mc "
"voltage \nor ess min"
		    DstPort		    3
		    }
		    Branch {
		    Points		    [145, 0; 0, -65]
		    DstBlock		    "Limits"
		    DstPort		    6
		    }
		    }
		    Line {
		    SrcBlock		    "Rdchg"
		    SrcPort		    1
		    Points		    [30, 0]
		    DstBlock		    "Mux3"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Max Dchg current\nnot exceeded"
		    SrcPort		    1
		    Points		    [155, 0]
		    Branch {
		    Points		    [0, -80]
		    DstBlock		    "limit current based on \nmin volt"
"age during dcharge"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, 10]
		    DstBlock		    "Limits"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "mc min voltage"
		    SrcPort		    1
		    Points		    [100, 0]
		    Branch {
		    Points		    [0, -10]
		    DstBlock		    "limit by 0.5 battery \nor min mc "
"voltage \nor ess min"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, 10; 130, 0; 0, -85]
		    DstBlock		    "Limits"
		    DstPort		    4
		    }
		    }
		    Line {
		    SrcBlock		    "ess_module_num1"
		    SrcPort		    1
		    Points		    [110, 0]
		    Branch {
		    DstBlock		    "limit by 0.5 battery \nor min mc "
"voltage \nor ess min"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 35; 145, 0; 0, -75]
		    DstBlock		    "Limits"
		    DstPort		    5
		    }
		    }
		    Line {
		    SrcBlock		    "limit by 0.5 battery \nor min mc "
"voltage \nor ess min"
		    SrcPort		    1
		    Points		    [0, -20]
		    Branch {
		    Points		    [75, 0; 0, -60]
		    DstBlock		    "Limits"
		    DstPort		    3
		    }
		    Branch {
		    Points		    [-190, 0]
		    DstBlock		    "Mux3"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Vmin"
		    SrcPort		    1
		    DstBlock		    "Product1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Product1"
		    SrcPort		    1
		    Points		    [65, 0; 0, -105]
		    DstBlock		    "mx dchg pwr"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Saturation"
		    SrcPort		    1
		    DstBlock		    "Iout_lim"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "mod #"
		    Position		    [65, 64, 90, 86]
		    Gain		    "ess_module_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Iout"
		    Position		    [600, 68, 630, 82]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "[]"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Voc*k"
		    Position		    [605, 158, 635, 172]
		    Port		    "2"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "[]"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Rs"
		    Position		    [605, 188, 635, 202]
		    Port		    "3"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "[]"
		    }
		    Line {
		    SrcBlock		    "Preq"
		    SrcPort		    1
		    Points		    [40, 0]
		    Branch {
		    Points		    [0, 15]
		    DstBlock		    "Prdct"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -20]
		    DstBlock		    "SOC limit"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "SOC"
		    SrcPort		    1
		    DstBlock		    "SOC limit"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "Iout=(Voc-(Voc^2-4RPout)^.5)\n   "
"    -----------------------------\n(2*R)"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Rdis\n(ohms)"
		    SrcPort		    1
		    DstBlock		    "R scale fn"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "R scale fn"
		    SrcPort		    1
		    DstBlock		    "Parallel1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Rchg\n(ohms)"
		    SrcPort		    1
		    DstBlock		    "R2 scale fn"
		    DstPort		    1
		    }
		    Line {
		    Labels		    [0, 0]
		    SrcBlock		    "Prdct"
		    SrcPort		    1
		    Points		    [0, 30; -80, 0; 0, 25]
		    Branch {
		    DstBlock		    "Abs"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 55]
		    Branch {
		    Points		    [0, 35; 170, 0; 0, -20]
		    DstBlock		    "Switch2"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "-1*|u|"
		    DstPort		    1
		    }
		    }
		    }
		    Line {
		    SrcBlock		    "Abs"
		    SrcPort		    1
		    DstBlock		    "Rdis\n(ohms)"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "-1*|u|"
		    SrcPort		    1
		    DstBlock		    "Rchg\n(ohms)"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "R2 scale fn"
		    SrcPort		    1
		    DstBlock		    "Parallel"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "SOC limit"
		    SrcPort		    1
		    Points		    [5, 0; 0, 45]
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Switch2"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    DstBlock		    "Rs"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 0]
		    DstBlock		    "Mux"
		    DstPort		    3
		    }
		    }
		    Line {
		    SrcBlock		    "limit power"
		    SrcPort		    1
		    Points		    [60, 0; 0, -20]
		    Branch {
		    DstBlock		    "Iout"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "enhancedToWorkspace"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Iout=(Voc-(Voc^2-4RPout)^.5)\n   "
"    -----------------------------\n(2*R)"
		    SrcPort		    1
		    DstBlock		    "limit power"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Voc"
		    SrcPort		    1
		    DstBlock		    "mod #"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "mod #"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    Points		    [0, 0; 0, 20; 105, 0]
		    Branch {
		    Points		    [0, -15]
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, 5; 95, 0; 0, 5]
		    Branch {
		    DstBlock		    "limit power"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, 60]
		    DstBlock		    "Voc*k"
		    DstPort		    1
		    }
		    }
		    }
		    Branch {
		    DstBlock		    "Prdct"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "tmp"
		    SrcPort		    1
		    Points		    [55, 0]
		    Branch {
		    DstBlock		    "Rdis\n(ohms)"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Rchg\n(ohms)"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    DstBlock		    "Goto <cs>1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "limit power"
		    SrcPort		    3
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "limit power"
		    SrcPort		    2
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    DstBlock		    "Goto <cs>2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Parallel1"
		    SrcPort		    1
		    Points		    [5, 0; 0, 5]
		    Branch {
		    Labels		    [1, 0]
		    DstBlock		    "Switch2"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "limit power"
		    DstPort		    4
		    }
		    }
		    Line {
		    SrcBlock		    "Parallel"
		    SrcPort		    1
		    Points		    [5, 0]
		    Branch {
		    Points		    [0, 30]
		    DstBlock		    "Switch2"
		    DstPort		    3
		    }
		    Branch {
		    Points		    [0, -60]
		    DstBlock		    "limit power"
		    DstPort		    3
		    }
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Calculate SOC"
		  Ports			  [3, 1]
		  Position		  [195, 209, 240, 251]
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "Calculate SOC"
		    Location		    [463, 615, 843, 784]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Voc"
		    Position		    [15, 15, 45, 30]
		    Orientation		    "down"
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Iout"
		    Position		    [15, 43, 45, 57]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "C"
		    Position		    [15, 103, 45, 117]
		    Port		    "3"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    Position		    [15, 140, 35, 160]
		    ShowName		    off
		    DisplayTime		    off
		    Decimation		    "10"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gain"
		    Position		    [40, 65, 60, 90]
		    Orientation		    "up"
		    NamePlacement	    "alternate"
		    ShowName		    off
		    Gain		    "ess_parallel_mod_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    Position		    [84, 120, 96, 135]
		    Orientation		    "up"
		    ShowName		    off
		    X0			    "0"
		    InheritSampleTime	    off
		    RTWStateStorageClass    "Auto"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux1"
		    Ports		    [4, 1]
		    Position		    [90, 36, 95, 74]
		    ShowName		    off
		    Inputs		    "4"
		    DisplayOption	    "bar"
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    "Saturation"
		    Position		    [305, 50, 325, 70]
		    Orientation		    "up"
		    NamePlacement	    "alternate"
		    ShowName		    off
		    UpperLimit		    "1"
		    LowerLimit		    "0"
		    LinearizeAsGain	    on
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Soc = (Voc(n+1)-Vmin)/(Vmax-Vmin)"
		    Position		    [240, 90, 300, 120]
		    Expr		    "(u(1)-ess_min_volts)/(ess_max_vol"
"ts-ess_min_volts)"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    Ports		    [2, 1]
		    Position		    [55, 105, 75, 125]
		    Orientation		    "up"
		    ShowName		    off
		    IconShape		    "round"
		    Inputs		    "|+-"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Voc (n+1) = Voc(n) - I*(dt)/C"
		    Position		    [130, 65, 190, 95]
		    Expr		    "(u(1) - u(2)*u(4)/u(3))"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "SOC"
		    Position		    [330, 13, 360, 27]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "[]"
		    }
		    Line {
		    SrcBlock		    "Voc"
		    SrcPort		    1
		    Points		    [45, 0]
		    DstBlock		    "Mux1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux1"
		    SrcPort		    1
		    Points		    [15, 0]
		    DstBlock		    "Voc (n+1) = Voc(n) - I*(dt)/C"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Iout"
		    SrcPort		    1
		    DstBlock		    "Mux1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Voc (n+1) = Voc(n) - I*(dt)/C"
		    SrcPort		    1
		    Points		    [30, 0]
		    DstBlock		    "Soc = (Voc(n+1)-Vmin)/(Vmax-Vmin)"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "C"
		    SrcPort		    1
		    DstBlock		    "Gain"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Soc = (Voc(n+1)-Vmin)/(Vmax-Vmin)"
		    SrcPort		    1
		    Points		    [10, 0]
		    DstBlock		    "Saturation"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [0, 0; 25, 0]
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    Points		    [0, -30]
		    DstBlock		    "Mux1"
		    DstPort		    4
		    }
		    Line {
		    SrcBlock		    "Saturation"
		    SrcPort		    1
		    DstBlock		    "SOC"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Gain"
		    SrcPort		    1
		    DstBlock		    "Mux1"
		    DstPort		    3
		    }
		  }
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn"
		  Position		  [305, 334, 335, 356]
		  ShowName		  off
		  Expr			  "u[1]*u[1]*u[2]/ess_parallel_mod_num"
"*(u[1]>=0)+u[1]*u[1]*u(4)*u(4)*u[2]/ess_parallel_mod_num*(u[1]<0)-u[1]*u[3]*("
"1-u(4))*(u[1]<0)"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto <cs>"
		  Position		  [595, 275, 645, 295]
		  BackgroundColor	  "lightBlue"
		  ShowName		  off
		  GotoTag		  "ess_tmp"
		  TagVisibility		  "scoped"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto <mc>, <gc>, <sdo>"
		  Position		  [595, 80, 675, 100]
		  BackgroundColor	  "lightBlue"
		  ShowName		  off
		  GotoTag		  "bus_voltage"
		  TagVisibility		  "scoped"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto <sdo1"
		  Position		  [325, 25, 405, 45]
		  BackgroundColor	  "lightBlue"
		  ShowName		  off
		  GotoTag		  "ess_current"
		  TagVisibility		  "scoped"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto <sdo>, <cs>"
		  Position		  [600, 219, 645, 241]
		  BackgroundColor	  "lightBlue"
		  ShowName		  off
		  GotoTag		  "SOC"
		  TagVisibility		  "scoped"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  Position		  [260, 219, 275, 241]
		  ShowName		  off
		  X0			  "ess_init_soc"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  Position		  [475, 315, 490, 335]
		  ShowName		  off
		  X0			  "ess_mod_init_tmp"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory3"
		  Position		  [540, 79, 555, 101]
		  ShowName		  off
		  X0			  "(ess_init_soc*(ess_max_volts-ess_mi"
"n_volts)+ess_min_volts)*ess_module_num"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [4, 1]
		  Position		  [280, 121, 285, 159]
		  ShowName		  off
		  Inputs		  "4"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux1"
		  Ports			  [3, 1]
		  Position		  [275, 65, 280, 95]
		  ShowName		  off
		  Inputs		  "3"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  Ports			  [2, 1]
		  Position		  [445, 55, 460, 75]
		  ShowName		  off
		  FontName		  "Arial"
		  Inputs		  "2"
		  Multiplication	  "Element-wise(.*)"
		  SaturateOnIntegerOverflow on
		  Port {
		    PortNumber		    1
		    Name		    "Power"
		    TestPoint		    off
		    LinearAnalysisOutput    off
		    LinearAnalysisInput	    off
		    RTWStorageClass	    "Auto"
		  }
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturate I"
		  Position		  [130, 188, 155, 202]
		  Orientation		  "left"
		  UpperLimit		  "225"
		  LowerLimit		  "-225"
		  LinearizeAsGain	  on
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturate T"
		  Position		  [460, 278, 485, 292]
		  Orientation		  "left"
		  UpperLimit		  "40"
		  LowerLimit		  "0"
		  LinearizeAsGain	  on
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Voc = soc*(Vmax-Vmin) + Vmin"
		  Position		  [70, 64, 130, 86]
		  Expr			  "u(1)*(ess_max_volts-ess_min_volts) "
"+ ess_min_volts"
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Voc-I*R"
		  Position		  [320, 69, 400, 91]
		  Expr			  "u[2] - u[1]*u[3]"
		  Port {
		    PortNumber		    1
		    Name		    "Voltage"
		    TestPoint		    off
		    LinearAnalysisOutput    off
		    LinearAnalysisInput	    off
		    RTWStorageClass	    "Auto"
		  }
		}
		Block {
		  BlockType		  Reference
		  Name			  "coul eff"
		  Ports			  [2, 1]
		  Position		  [215, 146, 245, 164]
		  SourceBlock		  "simulink3/Functions\n& Tables/Look-"
"Up\nTable (2-D)"
		  SourceType		  "Lookup Table (2-D)"
		  x			  "ess_tmp"
		  y			  "ess_i"
		  t			  "ess_coulombic_eff"
		}
		Block {
		  BlockType		  Constant
		  Name			  "do ex calcs?"
		  Position		  [380, 290, 440, 305]
		  Orientation		  "down"
		  ShowName		  off
		  Value			  "ess_th_calc"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace"
		  Ports			  [1]
		  Position		  [90, 32, 185, 48]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|pwr_out_r|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace1"
		  Ports			  [1]
		  Position		  [505, 32, 600, 48]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|pwr_out_a|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace1"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace2"
		  Ports			  [1]
		  Position		  [595, 122, 690, 138]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|voltage|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace2"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace3"
		  Ports			  [1]
		  Position		  [365, 382, 460, 398]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|pwr_loss_a|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace3"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace4"
		  Ports			  [1]
		  Position		  [520, 357, 615, 373]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|air_th_pwr|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace4"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace5"
		  Ports			  [1]
		  Position		  [520, 337, 615, 353]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|air_tmp|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace5"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace6"
		  Ports			  [1]
		  Position		  [520, 317, 615, 333]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|mod_tmp|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace6"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "ess tmp"
		  Ports			  [1, 3, 1]
		  Position		  [365, 318, 455, 372]
		  ShowName		  off
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "ess tmp"
		    Location		    [515, 664, 1056, 934]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Qess_gen"
		    Position		    [25, 205, 45, 225]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [390, 217, 420, 243]
		    StatesWhenEnabling	    "reset"
		    ShowOutputPort	    off
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "#of mods"
		    Position		    [390, 88, 415, 112]
		    Gain		    "ess_module_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "1/#of mods"
		    Position		    [95, 203, 120, 227]
		    Gain		    "1/ess_module_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "1/mcp"
		    Position		    [380, 153, 405, 177]
		    Gain		    "1/(ess_module_mass*ess_mod_cp)"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Block NOTES"
		    Ports		    []
		    Position		    [445, 220, 501, 260]
		    BackgroundColor	    "green"
		    ShowName		    off
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskDisplay		    "disp('Block\\nNOTES')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "Block NOTES"
		    Location		    [505, 510, 924, 573]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Annotation {
		    Position		    [207, 33]
		    Text		    "This block models the thermal beh"
"avior of a battery module with active air cooling.\nThe module is modeled as "
"a single lumped thermal mass.  \nThe fan is on whenever the battery temp is >"
" the set temp."
		    }
		    }
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    Position		    [250, 165, 285, 185]
		    Orientation		    "left"
		    FontName		    "Arial"
		    X0			    "cyc_mph(1,2)*.447"
		    InheritSampleTime	    off
		    RTWStateStorageClass    "Auto"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    Position		    [100, 30, 135, 50]
		    Orientation		    "left"
		    FontName		    "Arial"
		    X0			    "cyc_mph(1,2)*.447"
		    InheritSampleTime	    off
		    RTWStateStorageClass    "Auto"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux20"
		    Ports		    [3, 1]
		    Position		    [195, 84, 200, 156]
		    NamePlacement	    "alternate"
		    ShowName		    off
		    Inputs		    "3"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Qc"
		    Ports		    [2, 1]
		    Position		    [350, 114, 360, 221]
		    ShowName		    off
		    IconShape		    "rectangular"
		    Inputs		    "++"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Qess_case"
		    Position		    [235, 108, 315, 132]
		    NamePlacement	    "alternate"
		    FontName		    "Arial"
		    Expr		    "(u(2) - u(1))/u(3)"
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    "Saturation3"
		    Position		    [190, 29, 200, 51]
		    Orientation		    "left"
		    ShowName		    off
		    UpperLimit		    "1"
		    LowerLimit		    "0"
		    LinearizeAsGain	    on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Tair,ave"
		    Ports		    [1, 2, 1]
		    Position		    [30, 107, 140, 158]
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    on
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    System {
		    Name		    "Tair,ave"
		    Location		    [351, 78, 751, 306]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Qess_case"
		    Position		    [45, 35, 65, 55]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [265, 167, 295, 193]
		    StatesWhenEnabling	    "reset"
		    ShowOutputPort	    off
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Block NOTES"
		    Ports		    []
		    Position		    [325, 165, 381, 205]
		    BackgroundColor	    "green"
		    ShowName		    off
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskDisplay		    "disp('Block\\nNOTES')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "Block NOTES"
		    Location		    [505, 510, 924, 573]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Annotation {
		    Position		    [207, 33]
		    Text		    "This block determins the average "
"temperature of the cooling air over the module."
		    }
		    }
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Tamb-(Q/mcp)/2"
		    Position		    [90, 34, 330, 56]
		    Expr		    "amb_tmp - (u(1)/(ess_mod_airflow*"
"air_cp))/2 "
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "do ex calcs?1"
		    Position		    [35, 105, 115, 125]
		    ShowName		    off
		    Value		    "ess_th_res_on"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Tair_ave"
		    Position		    [355, 35, 375, 55]
		    Port		    "1"
		    OutputWhenDisabled	    "reset"
		    InitialOutput	    "amb_tmp"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Th Res"
		    Position		    [355, 105, 375, 125]
		    Port		    "2"
		    OutputWhenDisabled	    "reset"
		    InitialOutput	    "ess_th_res_off"
		    }
		    Line {
		    SrcBlock		    "Tamb-(Q/mcp)/2"
		    SrcPort		    1
		    DstBlock		    "Tair_ave"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Qess_case"
		    SrcPort		    1
		    DstBlock		    "Tamb-(Q/mcp)/2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "do ex calcs?1"
		    SrcPort		    1
		    DstBlock		    "Th Res"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Integrator
		    Name		    "Tess2"
		    Ports		    [1, 1]
		    Position		    [420, 155, 440, 175]
		    ExternalReset	    "none"
		    InitialConditionSource  "internal"
		    InitialCondition	    "ess_mod_init_tmp"
		    LimitOutput		    off
		    UpperSaturationLimit    "inf"
		    LowerSaturationLimit    "-inf"
		    ShowSaturationPort	    off
		    ShowStatePort	    off
		    AbsoluteTolerance	    "auto"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "thermostat"
		    Position		    [235, 29, 340, 51]
		    Orientation		    "left"
		    NamePlacement	    "alternate"
		    FontName		    "Arial"
		    Expr		    "u(1) - ess_set_tmp"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Tess"
		    Position		    [470, 155, 490, 175]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Tair"
		    Position		    [470, 60, 490, 80]
		    NamePlacement	    "alternate"
		    Port		    "2"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "[]"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Qair"
		    Position		    [470, 90, 490, 110]
		    Port		    "3"
		    OutputWhenDisabled	    "reset"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Qc"
		    SrcPort		    1
		    DstBlock		    "1/mcp"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Qess_case"
		    SrcPort		    1
		    Points		    [5, 0]
		    Branch {
		    Points		    [10, 0]
		    DstBlock		    "Qc"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 55]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -20]
		    DstBlock		    "#of mods"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "1/mcp"
		    SrcPort		    1
		    DstBlock		    "Tess2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Tess2"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    DstBlock		    "Tess"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -85; -80, 0]
		    Branch {
		    Points		    [-185, 0]
		    DstBlock		    "Mux20"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -40]
		    DstBlock		    "thermostat"
		    DstPort		    1
		    }
		    }
		    }
		    Line {
		    SrcBlock		    "Qess_gen"
		    SrcPort		    1
		    DstBlock		    "1/#of mods"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "1/#of mods"
		    SrcPort		    1
		    Points		    [210, 0]
		    DstBlock		    "Qc"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "thermostat"
		    SrcPort		    1
		    DstBlock		    "Saturation3"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Saturation3"
		    SrcPort		    1
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [-10, 0]
		    DstBlock		    "Tair,ave"
		    DstPort		    enable
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    Points		    [-230, 0]
		    DstBlock		    "Tair,ave"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "#of mods"
		    SrcPort		    1
		    DstBlock		    "Qair"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux20"
		    SrcPort		    1
		    DstBlock		    "Qess_case"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Tair,ave"
		    SrcPort		    2
		    DstBlock		    "Mux20"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Tair,ave"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "Mux20"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, -50]
		    DstBlock		    "Tair"
		    DstPort		    1
		    }
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "power available\nto bus (W)"
		  Position		  [640, 55, 660, 75]
		  NamePlacement		  "alternate"
		  FontName		  "Arial"
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "0"
		}
		Line {
		  Labels		  [0, 0]
		  SrcBlock		  "power req'd\ninto bus (W)"
		  SrcPort		  1
		  Points		  [0, 0; 20, 0]
		  Branch {
		    DstBlock		    "Calc Iout"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "enhancedToWorkspace"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [0, 0; 5, 0]
		  Branch {
		    DstBlock		    "Goto <sdo>, <cs>"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 40; -190, 0; 0, -165]
		    Branch {
		    Points		    [-70, 0; 0, -30]
		    DstBlock		    "Voc = soc*(Vmax-Vmin) + Vmin"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Calc Iout"
		    DstPort		    4
		    }
		  }
		}
		Line {
		  Name			  "Power"
		  SrcBlock		  "Product"
		  SrcPort		  1
		  Points		  [0, 0; 25, 0]
		  Branch {
		    DstBlock		    "power available\nto bus (W)"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "enhancedToWorkspace1"
		    DstPort		    1
		  }
		}
		Line {
		  Name			  "Iout"
		  SrcBlock		  "Calc Iout"
		  SrcPort		  1
		  Points		  [0, -15; 15, 0]
		  Branch {
		    Points		    [0, 20]
		    Branch {
		    Points		    [0, 55]
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Mux1"
		    DstPort		    1
		    }
		  }
		  Branch {
		    Points		    [30, 0]
		    Branch {
		    Points		    [0, 10; 15, 0]
		    Branch {
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 135; -125, 0]
		    Branch {
		    DstBlock		    "Calculate SOC"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Saturate I"
		    DstPort		    1
		    }
		    }
		    }
		    Branch {
		    Labels		    [1, 1]
		    Points		    [0, -15]
		    DstBlock		    "Goto <sdo1"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "coul eff"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "Fcn"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux1"
		  SrcPort		  1
		  DstBlock		  "Voc-I*R"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Calc Iout"
		  SrcPort		  3
		  Points		  [5, 0]
		  Branch {
		    Points		    [0, 30]
		    DstBlock		    "Mux"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, -15]
		    DstBlock		    "Mux1"
		    DstPort		    3
		  }
		}
		Line {
		  SrcBlock		  "Fcn"
		  SrcPort		  1
		  Points		  [0, 0; 10, 0]
		  Branch {
		    DstBlock		    "ess tmp"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "enhancedToWorkspace3"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "do ex calcs?"
		  SrcPort		  1
		  DstBlock		  "ess tmp"
		  DstPort		  enable
		}
		Line {
		  SrcBlock		  "ess tmp"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "ess tmp"
		  SrcPort		  2
		  DstBlock		  "enhancedToWorkspace5"
		  DstPort		  1
		}
		Line {
		  Labels		  [0, 0]
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  Points		  [5, 0; 0, -40]
		  Branch {
		    DstBlock		    "Goto <cs>"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 40]
		    Branch {
		    DstBlock		    "Saturate T"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "enhancedToWorkspace6"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "ess tmp"
		  SrcPort		  3
		  DstBlock		  "enhancedToWorkspace4"
		  DstPort		  1
		}
		Line {
		  Name			  "Voltage"
		  SrcBlock		  "Voc-I*R"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [0, 0; 10, 0]
		    Branch {
		    Points		    [0, -10]
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, 10]
		    DstBlock		    "Memory3"
		    DstPort		    1
		    }
		  }
		  Branch {
		    Points		    [0, 30; -155, 0; 0, 35]
		    DstBlock		    "Mux"
		    DstPort		    3
		  }
		}
		Line {
		  SrcBlock		  "Memory3"
		  SrcPort		  1
		  Points		  [0, 0; 10, 0]
		  Branch {
		    DstBlock		    "Goto <mc>, <gc>, <sdo>"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 40]
		    DstBlock		    "enhancedToWorkspace2"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Calculate SOC"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "C\n(Farads)"
		  SrcPort		  1
		  DstBlock		  "Calculate SOC"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Voc = soc*(Vmax-Vmin) + Vmin"
		  SrcPort		  1
		  Points		  [0, 0; 35, 0]
		  Branch {
		    DstBlock		    "Calc Iout"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 140]
		    DstBlock		    "Calculate SOC"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Saturate I"
		  SrcPort		  1
		  Points		  [0, 0; -10, 0]
		  Branch {
		    Points		    [0, 55]
		    DstBlock		    "C\n(Farads)"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, -35]
		    DstBlock		    "coul eff"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Calc Iout"
		  SrcPort		  2
		  Points		  [0, -5]
		  DstBlock		  "Mux1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Saturate T"
		  SrcPort		  1
		  Points		  [-350, 0; 0, -45]
		  Branch {
		    DstBlock		    "C\n(Farads)"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 0; 0, -90; 70, 0]
		    Branch {
		    DstBlock		    "coul eff"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -60]
		    DstBlock		    "Calc Iout"
		    DstPort		    3
		    }
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "signal\nannotator"
	      Ports		      [1, 1]
	      Position		      [375, 61, 420, 89]
	      NamePlacement	      "alternate"
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"signal\nannotator"
		Location		[202, 77, 966, 752]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "In1"
		  Position		  [110, 103, 140, 117]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		  Port {
		    PortNumber		    1
		    Name		    "ess_pwr_out_r"
		    TestPoint		    off
		    LinearAnalysisOutput    off
		    LinearAnalysisInput	    off
		    RTWStorageClass	    "Auto"
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  Position		  [430, 103, 460, 117]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "[]"
		}
		Line {
		  Name			  "ess_pwr_out_r"
		  Labels		  [0, 0]
		  SrcBlock		  "In1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "required out"
	      Position		      [500, 65, 520, 85]
	      FontName		      "Arial"
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "power available\nto bus (W)"
	      Position		      [330, 115, 350, 135]
	      NamePlacement	      "alternate"
	      FontName		      "Arial"
	      Port		      "2"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "sensors"
	      Position		      [645, 425, 665, 445]
	      FontName		      "Arial"
	      Port		      "3"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "power req'd\ninto bus (W)"
	      SrcPort		      1
	      Points		      [0, 0; 35, 0]
	      Branch {
		Points			[0, -50]
		DstBlock		"signal\nannotator"
		DstPort			1
	      }
	      Branch {
		DstBlock		"model"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "model"
	      SrcPort		      1
	      DstBlock		      "power available\nto bus (W)"
	      DstPort		      1
	    }
	    Line {
	      Name		      "ess_tmp"
	      Labels		      [0, 0]
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "control"
	      SrcPort		      1
	      DstBlock		      "Terminator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Bus\nCreator"
	      SrcPort		      1
	      DstBlock		      "sensors"
	      DstPort		      1
	    }
	    Line {
	      Name		      "bus_voltage"
	      Labels		      [0, 0]
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      2
	    }
	    Line {
	      Name		      "ess_current"
	      Labels		      [0, 0]
	      SrcBlock		      "From4"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      3
	    }
	    Line {
	      Name		      "ess_max_chg_pwr"
	      Labels		      [0, 0]
	      SrcBlock		      "From3"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      4
	    }
	    Line {
	      Name		      "ess_max_pwr"
	      Labels		      [0, 0]
	      SrcBlock		      "From2"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      5
	    }
	    Line {
	      Name		      "SOC"
	      Labels		      [0, 0]
	      SrcBlock		      "From5"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      6
	    }
	    Line {
	      Name		      "ess_maxV_limited"
	      Labels		      [0, 0]
	      SrcBlock		      "From6"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      7
	    }
	    Line {
	      Name		      "ess_soc_hi_limited"
	      Labels		      [0, 0]
	      SrcBlock		      "From7"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      8
	    }
	    Line {
	      Name		      "ess_soc_low_limited"
	      Labels		      [0, 0]
	      SrcBlock		      "From8"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      9
	    }
	    Line {
	      Name		      "mc_voltage_limited"
	      Labels		      [0, 0]
	      SrcBlock		      "From9"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      10
	    }
	    Line {
	      Name		      "ess_pwr_limited"
	      Labels		      [0, 0]
	      SrcBlock		      "From10"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      11
	    }
	    Line {
	      Name		      "ess_minV_limited"
	      Labels		      [0, 0]
	      SrcBlock		      "From11"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      12
	    }
	    Line {
	      SrcBlock		      "signal\nannotator"
	      SrcPort		      1
	      DstBlock		      "required out"
	      DstPort		      1
	    }
	    Annotation {
	      Position		      [247, 195]
	      BackgroundColor	      "yellow"
	      Text		      "Interface"
	      FontName		      "Arial"
	      FontSize		      22
	      FontWeight	      "bold"
	      FontAngle		      "italic"
	    }
	    Annotation {
	      Position		      [252, 45]
	      BackgroundColor	      "yellow"
	      Text		      "Model"
	      FontName		      "Arial"
	      FontSize		      22
	      FontWeight	      "bold"
	      FontAngle		      "italic"
	    }
	  }
	}
	Block {
	  BlockType		  From
	  Name			  "controlTag"
	  Position		  [80, 276, 190, 314]
	  ForegroundColor	  "red"
	  BackgroundColor	  "black"
	  CloseFcn		  "tagdialog Close"
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	  GotoTag		  "essControl"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "documentation9"
	  Ports			  []
	  Position		  [145, 91, 174, 130]
	  BackgroundColor	  "orange"
	  DropShadow		  on
	  ShowName		  off
	  OpenFcn		  "web(['file:\\\\\\' which('energy_storage.ht"
"m')]);"
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "documentation9"
	    Location		    [129, 62, 308, 146]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  Goto
	  Name			  "reqOutTag"
	  Position		  [365, 124, 465, 166]
	  ForegroundColor	  "red"
	  BackgroundColor	  "black"
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	  GotoTag		  "essReqOut"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "sensorsTag"
	  Position		  [365, 274, 465, 316]
	  ForegroundColor	  "red"
	  BackgroundColor	  "black"
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	  GotoTag		  "essSensors"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Outport
	  Name			  "power available\nto bus (W)"
	  Position		  [425, 210, 445, 230]
	  FontName		  "Arial"
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Line {
	  SrcBlock		  "power req'd\ninto bus (W)"
	  SrcPort		  1
	  DstBlock		  "Ultracapacitor\n System"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "controlTag"
	  SrcPort		  1
	  Points		  [15, 0; 0, -65]
	  DstBlock		  "Ultracapacitor\n System"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Ultracapacitor\n System"
	  SrcPort		  1
	  Points		  [40, 0]
	  DstBlock		  "reqOutTag"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Ultracapacitor\n System"
	  SrcPort		  2
	  DstBlock		  "power available\nto bus (W)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Ultracapacitor\n System"
	  SrcPort		  3
	  Points		  [25, 0; 0, 60]
	  DstBlock		  "sensorsTag"
	  DstPort		  1
	}
	Annotation {
	  Position		  [297, 40]
	  BackgroundColor	  "yellow"
	  Text			  "Energy Storage System"
	  FontName		  "Arial"
	  FontSize		  18
	  FontWeight		  "bold"
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "energy\nstorage <ess>"
      Ports		      [1, 1]
      Position		      [70, 238, 135, 282]
      BackgroundColor	      "yellow"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskType		      "Stand-Alone Energy Storage System Mask"
      MaskPromptString	      "General Name of this Component [char]|Log Varia"
"bles to Workspace?|Initialization File(s) [cell array of char]|Modification C"
"ell [2 column cell array of param and val]|Icon image file name [char--evalua"
"ted]|DEBUG"
      MaskStyleString	      "edit,popup(Don't Log|Log Variable),edit,edit,ed"
"it,popup(ON|OFF)"
      MaskTunableValueString  "on,on,on,on,on,on"
      MaskCallbackString      "|||||"
      MaskEnableString	      "on,on,on,on,on,on"
      MaskVisibilityString    "on,on,on,on,on,on"
      MaskToolTipString	      "on,on,on,on,on,on"
      MaskVariables	      "generalName=@1;logPick=@2;initFileName=@3;modCe"
"ll=@4;imgFileName=@5;DEBUG=&6;"
      MaskInitialization      "% initialization via m-file script\nadvSACompMa"
"skInit;"
      MaskDisplay	      "image(imread(imgFileName))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      MaskValueString	      "'ess'|Log Variable|{}|{}|'bdi_ess.jpg'|OFF"
      MaskVariableAliases     ",,,,,"
      System {
	Name			"energy\nstorage <ess>"
	Location		[202, 77, 966, 744]
	Open			off
	ModelBrowserVisibility	on
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "power req'd\ninto bus (W)"
	  Position		  [140, 200, 160, 220]
	  FontName		  "Arial"
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Block NOTES"
	  Ports			  []
	  Position		  [75, 90, 131, 130]
	  BackgroundColor	  "green"
	  ShowName		  off
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "disp('Block\\nNOTES')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Block NOTES"
	    Location		    [256, 329, 741, 634]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Annotation {
	      Position		      [242, 146]
	      Text		      "This is a stand-alone version of an ene"
"rgy storage system\n\nSeveral different models are available"
	    }
	  }
	}
	Block {
	  BlockType		  From
	  Name			  "controlTag"
	  Position		  [80, 276, 190, 314]
	  ForegroundColor	  "red"
	  BackgroundColor	  "black"
	  CloseFcn		  "tagdialog Close"
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	  GotoTag		  "essControl"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "documentation9"
	  Ports			  []
	  Position		  [145, 91, 174, 130]
	  BackgroundColor	  "orange"
	  DropShadow		  on
	  ShowName		  off
	  OpenFcn		  "web(['file:\\\\\\' which('energy_storage.ht"
"m')]);"
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "documentation9"
	    Location		    [129, 62, 308, 146]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "energy\nstorage <ess>"
	  Ports			  [2, 3]
	  Position		  [240, 198, 305, 242]
	  BackgroundColor	  "yellow"
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('bdi_ess.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "energy\nstorage <ess>"
	    Location		    [202, 77, 963, 744]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "power req'd\ninto bus (W)"
	      Position		      [155, 100, 175, 120]
	      FontName		      "Arial"
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "control"
	      Position		      [55, 395, 75, 415]
	      FontName		      "Arial"
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      BusCreator
	      Name		      "Bus\nCreator"
	      Ports		      [12, 1]
	      Position		      [605, 209, 630, 626]
	      ShowName		      off
	      Inputs		      "12"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      Position		      [365, 213, 450, 237]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_tmp"
	      Port {
		PortNumber		1
		Name			"ess_tmp"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      Position		      [365, 248, 450, 272]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "bus_voltage"
	      Port {
		PortNumber		1
		Name			"bus_voltage"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From10"
	      Position		      [365, 563, 465, 587]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_pwr_limited"
	      Port {
		PortNumber		1
		Name			"ess_pwr_limited"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From11"
	      Position		      [365, 598, 465, 622]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_minV_limited"
	      Port {
		PortNumber		1
		Name			"ess_minV_limited"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From2"
	      Position		      [365, 353, 465, 377]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_max_pwr"
	      Port {
		PortNumber		1
		Name			"ess_max_pwr"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From3"
	      Position		      [365, 318, 480, 342]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_max_chg_pwr"
	      Port {
		PortNumber		1
		Name			"ess_max_chg_pwr"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From4"
	      Position		      [365, 283, 450, 307]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_pwr_out_a"
	      Port {
		PortNumber		1
		Name			"ess_pwr_out_a"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From5"
	      Position		      [365, 388, 465, 412]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	      Port {
		PortNumber		1
		Name			"SOC"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From6"
	      Position		      [365, 423, 465, 447]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_maxV_limited"
	      Port {
		PortNumber		1
		Name			"ess_maxV_limited"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From7"
	      Position		      [365, 458, 465, 482]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_soc_hi_limited"
	      Port {
		PortNumber		1
		Name			"ess_soc_hi_limited"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From8"
	      Position		      [365, 493, 465, 517]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_soc_low_limited"
	      Port {
		PortNumber		1
		Name			"ess_soc_low_limited"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From9"
	      Position		      [365, 528, 465, 552]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "mc_voltage_limited"
	      Port {
		PortNumber		1
		Name			"mc_voltage_limited"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility"
	      Position		      [270, 212, 355, 234]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_tmp"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility1"
	      Position		      [270, 247, 355, 269]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "bus_voltage"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility10"
	      Position		      [252, 527, 355, 549]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "mc_voltage_limited"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility11"
	      Position		      [270, 562, 355, 584]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_pwr_limited"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility12"
	      Position		      [270, 597, 355, 619]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_minV_limited"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility2"
	      Position		      [270, 352, 355, 374]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_max_pwr"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility3"
	      Position		      [251, 317, 355, 339]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_max_chg_pwr"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility4"
	      Position		      [270, 282, 355, 304]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_pwr_out_a"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility6"
	      Position		      [270, 387, 355, 409]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility7"
	      Position		      [270, 422, 355, 444]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_maxV_limited"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility8"
	      Position		      [270, 457, 355, 479]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_soc_hi_limited"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility9"
	      Position		      [270, 492, 355, 514]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_soc_low_limited"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Model"
	      Ports		      [1, 1]
	      Position		      [240, 80, 280, 140]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"Model"
		Location		[258, 67, 937, 513]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"automatic"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "power req'd\ninto bus (W)"
		  Position		  [50, 170, 70, 190]
		  FontName		  "Arial"
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  Ports			  []
		  Position		  [555, 375, 611, 415]
		  BackgroundColor	  "green"
		  ShowName		  off
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [256, 329, 741, 634]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Annotation {
		    Position		    [242, 146]
		    Text		    "This block models the energy stor"
"age system as an SOC-dependent voltage\nin series with an SOC- and current di"
"rection-dependent internal resistance.\nSOC is computed assuming that A-h cap"
"acity is constant, but limited\nsuch that a minimum voltage is never exceeded"
" (replacing the \nprevious Peukert relationship which underpredicted battery "
"capacity).\n\nDischarge power is limited here so as not to bring the bus (bat"
"tery pack) voltage below\nthe minimum controller voltage or the minimum batte"
"ry voltage and so as to allow \nthe solution of the quadratic eq'n for discha"
"rge current.\n\nCharge current is limited to ensure the voltage does not exce"
"ed a maximum\nvoltage\n\nPositive current is discharge current in the convent"
"ion used here.\nPower loss is computed as I*R+losses due to Coulombic (in)eff"
"iciency.\n\nThermal modeling of the battery performance is modeled in the\nOC"
"V, Rint, and capacity."
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Const"
		  Position		  [515, 80, 585, 100]
		  Orientation		  "down"
		  ShowName		  off
		  FontName		  "Arial"
		  Value			  "enable_stop"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn"
		  Position		  [335, 284, 365, 306]
		  ShowName		  off
		  Expr			  "u[1]*u[1]*u[2]*(u[1]>=0)+u[1]*u[1]*"
"u[2]*u(4)*u(4)*(u[1]<0)-u[1]*u[3]*(1-u(4))*(u[1]<0)"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto"
		  Position		  [410, 95, 505, 115]
		  BackgroundColor	  "lightBlue"
		  ShowName		  off
		  GotoTag		  "ess_pwr_out_a"
		  TagVisibility		  "scoped"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto <cs>"
		  Position		  [575, 330, 635, 350]
		  BackgroundColor	  "lightBlue"
		  ShowName		  off
		  GotoTag		  "ess_tmp"
		  TagVisibility		  "scoped"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto <cs>1"
		  Position		  [295, 25, 375, 45]
		  BackgroundColor	  "lightBlue"
		  ShowName		  off
		  GotoTag		  "ess_max_pwr"
		  TagVisibility		  "scoped"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto <cs>2"
		  Position		  [290, 60, 395, 80]
		  BackgroundColor	  "lightBlue"
		  ShowName		  off
		  GotoTag		  "ess_max_chg_pwr"
		  TagVisibility		  "scoped"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto <mc>, <gc>, <sdo>"
		  Position		  [325, 220, 405, 240]
		  BackgroundColor	  "lightBlue"
		  ShowName		  off
		  GotoTag		  "bus_voltage"
		  TagVisibility		  "scoped"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto <sdo>, <cs>"
		  Position		  [140, 119, 185, 141]
		  BackgroundColor	  "lightBlue"
		  ShowName		  off
		  GotoTag		  "SOC"
		  TagVisibility		  "scoped"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  Position		  [510, 265, 525, 285]
		  ShowName		  off
		  X0			  "ess_mod_init_tmp"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [4, 1]
		  Position		  [300, 279, 320, 311]
		  Inputs		  "4"
		  DisplayOption		  "none"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  Ports			  [2, 1]
		  Position		  [325, 178, 355, 202]
		  ShowName		  off
		  FontName		  "Arial"
		  Inputs		  "2"
		  Multiplication	  "Element-wise(.*)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "SOC\nalgorithm"
		  Ports			  [2, 1]
		  Position		  [330, 111, 360, 144]
		  FontName		  "Arial"
		  ShowPortLabels	  off
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "SOC\nalgorithm"
		    Location		    [98, 388, 878, 660]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "(A)"
		    Position		    [15, 35, 35, 55]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "tmp\n(C)"
		    Position		    [20, 125, 40, 145]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "(sec->hrs)"
		    Position		    [265, 43, 330, 77]
		    Gain		    "1/3600"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    "0 <= SOC <= 1"
		    Position		    [650, 121, 680, 139]
		    UpperLimit		    "1"
		    LowerLimit		    "0"
		    LinearizeAsGain	    on
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "A-h\nremaining"
		    Ports		    [2, 1]
		    Position		    [505, 85, 525, 105]
		    IconShape		    "rectangular"
		    Inputs		    "-+"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Integrator
		    Name		    "Ah used"
		    Ports		    [2, 1]
		    Position		    [425, 50, 445, 70]
		    ExternalReset	    "none"
		    InitialConditionSource  "external"
		    InitialCondition	    "(1-ess_init_soc)*ess_max_ah_cap"
		    LimitOutput		    off
		    UpperSaturationLimit    "inf"
		    LowerSaturationLimit    "-inf"
		    ShowSaturationPort	    off
		    ShowStatePort	    off
		    AbsoluteTolerance	    "auto"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Fcn"
		    Position		    [500, 150, 540, 170]
		    ShowName		    off
		    Expr		    "1/u"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Fcn1"
		    Position		    [285, 96, 385, 114]
		    ShowName		    off
		    Expr		    "(1-ess_init_soc)*u"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "SOC"
		    Ports		    [2, 1]
		    Position		    [580, 118, 610, 142]
		    Inputs		    "2"
		    Multiplication	    "Element-wise(.*)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    Position		    [205, 35, 235, 85]
		    ShowName		    off
		    Threshold		    "0"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "adjusted A"
		    Ports		    [2, 1]
		    Position		    [135, 63, 165, 87]
		    Inputs		    "2"
		    Multiplication	    "Element-wise(.*)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Lookup
		    Name		    "coul eff"
		    Position		    [75, 88, 105, 112]
		    InputValues		    "ess_tmp"
		    OutputValues	    "ess_coulombic_eff"
		    }
		    Block {
		    BlockType		    Lookup
		    Name		    "max cap"
		    Position		    [200, 128, 230, 152]
		    InputValues		    "ess_tmp"
		    OutputValues	    "ess_max_ah_cap*ess_cap_scale"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "SOC1"
		    Position		    [725, 120, 745, 140]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Fcn1"
		    SrcPort		    1
		    Points		    [20, 0]
		    DstBlock		    "Ah used"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "max cap"
		    SrcPort		    1
		    Points		    [30, 0]
		    Branch {
		    Points		    [0, -35]
		    DstBlock		    "Fcn1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [170, 0; 0, -30; 50, 0]
		    Branch {
		    DstBlock		    "Fcn"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [5, 0]
		    DstBlock		    "A-h\nremaining"
		    DstPort		    2
		    }
		    }
		    }
		    Line {
		    SrcBlock		    "adjusted A"
		    SrcPort		    1
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "coul eff"
		    SrcPort		    1
		    Points		    [10, 0]
		    DstBlock		    "adjusted A"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "tmp\n(C)"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    DstBlock		    "coul eff"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [125, 0]
		    DstBlock		    "max cap"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "0 <= SOC <= 1"
		    SrcPort		    1
		    DstBlock		    "SOC1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "A-h\nremaining"
		    SrcPort		    1
		    Points		    [35, 0]
		    DstBlock		    "SOC"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "SOC"
		    SrcPort		    1
		    DstBlock		    "0 <= SOC <= 1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Fcn"
		    SrcPort		    1
		    Points		    [20, 0]
		    DstBlock		    "SOC"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Ah used"
		    SrcPort		    1
		    Points		    [40, 0]
		    DstBlock		    "A-h\nremaining"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "(sec->hrs)"
		    SrcPort		    1
		    Points		    [75, 0]
		    DstBlock		    "Ah used"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    DstBlock		    "(sec->hrs)"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "(A)"
		    SrcPort		    1
		    Points		    [5, 0]
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "adjusted A"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [130, 0]
		    Branch {
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 15]
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    }
		    }
		    Annotation {
		    Position		    [533, 207]
		    Text		    "SOC=(Max Ah capacity-Ah used)/Max"
" Ah capacity"
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "compute\ncurrent"
		  Ports			  [3, 2]
		  Position		  [225, 161, 255, 219]
		  ShowPortLabels	  off
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "compute\ncurrent"
		    Location		    [50, 278, 909, 675]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Voc"
		    Position		    [155, 80, 175, 100]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Rint"
		    Position		    [155, 130, 175, 150]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "limited output\npower (W)"
		    Position		    [155, 30, 175, 50]
		    Port		    "3"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <sdo>4"
		    Position		    [725, 208, 840, 232]
		    BackgroundColor	    "lightBlue"
		    ShowName		    off
		    GotoTag		    "ess_maxV_limited"
		    TagVisibility	    "scoped"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Ibty=(Voc-(Voc^2-4RPbty)^.5)\n   "
"    -----------------------------\n(2*R)"
		    Position		    [340, 79, 370, 101]
		    Expr		    "(u[2]-(u[2]^2-4*u[1]*u[3])^.5)/(2"
"*u[3])"
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "Logical\nOperator1"
		    Ports		    [1, 1]
		    Position		    [680, 208, 710, 232]
		    ShowName		    off
		    Operator		    "NOT"
		    Inputs		    "1"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux3"
		    Ports		    [3, 1]
		    Position		    [570, 313, 590, 347]
		    Inputs		    "3"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux4"
		    Ports		    [3, 1]
		    Position		    [245, 16, 265, 164]
		    Inputs		    "3"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux5"
		    Ports		    [3, 1]
		    Position		    [250, 186, 270, 274]
		    Inputs		    "3"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Voc-I*R"
		    Position		    [625, 319, 705, 341]
		    Expr		    "u[2]-u[1]*u[3]"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "enhancedToWorkspace2"
		    Ports		    [1]
		    Position		    [685, 76, 765, 94]
		    ShowName		    off
		    CopyFcn		    "breakLinkCopyFcn"
		    ParentCloseFcn	    "breakLinkParCloseFcn"
		    FontSize		    8
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    on
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "enhancedToWorkspace"
		    MaskDescription	    "A wrapper for the Simulink \"To W"
"orkspace\" block that allows you to evaluate the name of the variable to log "
"to workspace. This is useful to avoid the double logging errors that occur wh"
"en you pull in two library models that attempt to log to the same variable."
		    MaskHelp		    "<h2>Enhanced To Workspace Block</"
"h2>\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gen"
"eral name of the variable. Variables are saved to the workspace as <i>general"
"Name_specificName</i>. Note that this is an evaluated variable. If you would "
"like to type in the value directly, it must be surrounded with single quotes."
" Otherwise you can input the name of a variable containing a char string.</li"
">\n<li><b>Specific Name:</b> This is the specific name of the variable. Note "
"that this is input as a char literal (i.e., you don't need quotes).</li>\n<li"
"><b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the var"
"iable will not be logged to the workspace. If 1, the variable will be logged."
" This is done so that variable logging can be turned off to improve speed.</l"
"i>\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toge"
"ther to allow one to dynamically resolve variable names at run time in simuli"
"nk. This is most powerful when used in conjunction with a masked subsystem to"
" allow multiple instances of that masked subsytem to be used in the same mode"
"l. The strategy is to set the generalName in the block mask which will allow "
"the block to change the general name for all variable logging on the fly. \n<"
"h3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspac"
"e block. These files are located in the &lt; ADVISOR root &gt;/GUI directory "
":\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initializatio"
"n for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the "
"block callback when the simulink block is copied. It is necessary to break th"
"e link to the enhancedToWorkspace similar to the To Workspace block in order "
"for it to be able to configure itself. (Try copying simulink's To Workspace b"
"lock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i"
"> This file is similar to the breakLinkCopyFcn and is used when a parent syst"
"em is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'K"
"eefe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</"
"B> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type"
"</B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</"
"UL>\n</VARDEF>\n-->\n"
		    MaskPromptString	    "General Name [char-evaluated]|Spe"
"cific Name [char-literal]|Enable flag (1=on,0=off)"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskVariables	    "generalName=@1;specificName=&2;lo"
"gFlag=@3;"
		    MaskInitialization	    "enhancedToWsMaker"
		    MaskDisplay		    "disp([generalName,'_',specificNam"
"e])"
		    MaskSelfModifiable	    on
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "generalName|current|logFlag"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "enhancedToWorkspace2"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "ess max voltage*#batts"
		    Position		    [25, 220, 190, 240]
		    FontName		    "Arial"
		    Value		    "ess_max_volts*ess_module_num"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "iabs min=(Voc-Vmax)/R"
		    Position		    [340, 164, 370, 186]
		    Expr		    "(u(1)-u(2))/u(3)"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "limit current based on \nmax volt"
"age during charge"
		    Position		    [575, 125, 605, 155]
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "min charge current\nnot exceeded"
		    Position		    [455, 122, 485, 153]
		    Operator		    ">"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "I_"
		    Position		    [710, 130, 730, 150]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "V_"
		    Position		    [730, 320, 750, 340]
		    Port		    "2"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Logical\nOperator1"
		    SrcPort		    1
		    DstBlock		    "Goto <sdo>4"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "ess max voltage*#batts"
		    SrcPort		    1
		    DstBlock		    "Mux5"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Mux5"
		    SrcPort		    1
		    Points		    [20, 0; 0, -55]
		    DstBlock		    "iabs min=(Voc-Vmax)/R"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux4"
		    SrcPort		    1
		    DstBlock		    "Ibty=(Voc-(Voc^2-4RPbty)^.5)\n   "
"    -----------------------------\n(2*R)"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Voc-I*R"
		    SrcPort		    1
		    DstBlock		    "V_"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux3"
		    SrcPort		    1
		    DstBlock		    "Voc-I*R"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "min charge current\nnot exceeded"
		    SrcPort		    1
		    Points		    [30, 0]
		    Branch {
		    Points		    [0, 80]
		    DstBlock		    "Logical\nOperator1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "limit current based on \nmax volt"
"age during charge"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "limit current based on \nmax volt"
"age during charge"
		    SrcPort		    1
		    Points		    [50, 0]
		    Branch {
		    Points		    [0, 160; -105, 0]
		    DstBlock		    "Mux3"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "I_"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "enhancedToWorkspace2"
		    DstPort		    1
		    }
		    }
		    }
		    Line {
		    SrcBlock		    "iabs min=(Voc-Vmax)/R"
		    SrcPort		    1
		    Points		    [35, 0]
		    Branch {
		    Points		    [0, 15; 105, 0; 0, -40]
		    DstBlock		    "limit current based on \nmax volt"
"age during charge"
		    DstPort		    3
		    }
		    Branch {
		    Points		    [0, -30]
		    DstBlock		    "min charge current\nnot exceeded"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Ibty=(Voc-(Voc^2-4RPbty)^.5)\n   "
"    -----------------------------\n(2*R)"
		    SrcPort		    1
		    Points		    [55, 0]
		    Branch {
		    Points		    [90, 0; 0, 40]
		    DstBlock		    "limit current based on \nmax volt"
"age during charge"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 40]
		    DstBlock		    "min charge current\nnot exceeded"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Rint"
		    SrcPort		    1
		    Points		    [20, 0]
		    Branch {
		    Points		    [0, 120]
		    Branch {
		    DstBlock		    "Mux5"
		    DstPort		    3
		    }
		    Branch {
		    Points		    [0, 80]
		    DstBlock		    "Mux3"
		    DstPort		    3
		    }
		    }
		    Branch {
		    DstBlock		    "Mux4"
		    DstPort		    3
		    }
		    }
		    Line {
		    SrcBlock		    "Voc"
		    SrcPort		    1
		    Points		    [35, 0]
		    Branch {
		    Points		    [0, 110]
		    Branch {
		    DstBlock		    "Mux5"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 130]
		    DstBlock		    "Mux3"
		    DstPort		    2
		    }
		    }
		    Branch {
		    DstBlock		    "Mux4"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "limited output\npower (W)"
		    SrcPort		    1
		    DstBlock		    "Mux4"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Lookup
		  Name			  "coul eff"
		  Position		  [250, 368, 280, 392]
		  InputValues		  "ess_tmp"
		  OutputValues		  "ess_coulombic_eff"
		}
		Block {
		  BlockType		  Constant
		  Name			  "do ex calcs?"
		  Position		  [415, 240, 475, 255]
		  Orientation		  "down"
		  ShowName		  off
		  Value			  "ess_th_calc"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "documentation9"
		  Ports			  []
		  Position		  [625, 376, 654, 415]
		  BackgroundColor	  "orange"
		  DropShadow		  on
		  ShowName		  off
		  OpenFcn		  "web(['file:\\\\\\' which('energy_st"
"orage.htm')]);"
		  ShowPortLabels	  off
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskDisplay		  "image(imread('doc_man.jpg'))"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "documentation9"
		    Location		    [129, 62, 308, 146]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace"
		  Ports			  [1]
		  Position		  [25, 276, 100, 294]
		  Orientation		  "left"
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|pwr_out_r|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace1"
		  Ports			  [1]
		  Position		  [328, 325, 422, 345]
		  Orientation		  "down"
		  NamePlacement		  "alternate"
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|pwr_loss_a|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace1"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace2"
		  Ports			  [1]
		  Position		  [555, 266, 635, 284]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|mod_tmp|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace2"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace3"
		  Ports			  [1]
		  Position		  [555, 286, 635, 304]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|air_tmp|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace3"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace4"
		  Ports			  [1]
		  Position		  [555, 306, 635, 324]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|air_th_pwr|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace4"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace5"
		  Ports			  [1]
		  Position		  [420, 136, 500, 154]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|pwr_out_a|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace5"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "ess tmp"
		  Ports			  [1, 3, 1]
		  Position		  [400, 268, 490, 322]
		  ShowName		  off
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "ess tmp"
		    Location		    [433, 252, 964, 522]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Qess_gen"
		    Position		    [25, 205, 45, 225]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [390, 217, 420, 243]
		    StatesWhenEnabling	    "reset"
		    ShowOutputPort	    off
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "#of mods"
		    Position		    [390, 88, 415, 112]
		    Gain		    "ess_module_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "1/#of mods"
		    Position		    [95, 203, 120, 227]
		    Gain		    "1/ess_module_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "1/mcp"
		    Position		    [380, 153, 405, 177]
		    Gain		    "1/(ess_module_mass*ess_mod_cp)"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Block NOTES"
		    Ports		    []
		    Position		    [445, 220, 501, 260]
		    BackgroundColor	    "green"
		    ShowName		    off
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskDisplay		    "disp('Block\\nNOTES')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "Block NOTES"
		    Location		    [505, 510, 924, 573]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Annotation {
		    Position		    [207, 33]
		    Text		    "This block models the thermal beh"
"avior of a battery module with active air cooling.\nThe module is modeled as "
"a single lumped thermal mass.  \nThe fan is on whenever the battery temp is >"
" the set temp."
		    }
		    }
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    Position		    [250, 165, 285, 185]
		    Orientation		    "left"
		    FontName		    "Arial"
		    X0			    "cyc_mph(1,2)*.447"
		    InheritSampleTime	    off
		    RTWStateStorageClass    "Auto"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    Position		    [100, 30, 135, 50]
		    Orientation		    "left"
		    FontName		    "Arial"
		    X0			    "cyc_mph(1,2)*.447"
		    InheritSampleTime	    off
		    RTWStateStorageClass    "Auto"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux20"
		    Ports		    [3, 1]
		    Position		    [195, 84, 200, 156]
		    NamePlacement	    "alternate"
		    ShowName		    off
		    Inputs		    "3"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Qc"
		    Ports		    [2, 1]
		    Position		    [350, 114, 360, 221]
		    ShowName		    off
		    IconShape		    "rectangular"
		    Inputs		    "++"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Qess_case"
		    Position		    [235, 108, 315, 132]
		    NamePlacement	    "alternate"
		    FontName		    "Arial"
		    Expr		    "(u(2) - u(1))/u(3)"
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    "Saturation3"
		    Position		    [190, 29, 200, 51]
		    Orientation		    "left"
		    ShowName		    off
		    UpperLimit		    "1"
		    LowerLimit		    "0"
		    LinearizeAsGain	    on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Tair,ave"
		    Ports		    [1, 2, 1]
		    Position		    [30, 107, 140, 158]
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    on
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    System {
		    Name		    "Tair,ave"
		    Location		    [347, 78, 747, 306]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Qess_case"
		    Position		    [45, 35, 65, 55]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [265, 167, 295, 193]
		    StatesWhenEnabling	    "reset"
		    ShowOutputPort	    off
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Block NOTES"
		    Ports		    []
		    Position		    [325, 165, 381, 205]
		    BackgroundColor	    "green"
		    ShowName		    off
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskDisplay		    "disp('Block\\nNOTES')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "Block NOTES"
		    Location		    [505, 510, 924, 573]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Annotation {
		    Position		    [207, 33]
		    Text		    "This block determins the average "
"temperature of the cooling air over the module."
		    }
		    }
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Tamb-(Q/mcp)/2"
		    Position		    [90, 34, 330, 56]
		    Expr		    "amb_tmp - (u(1)/(ess_mod_airflow*"
"air_cp))/2 "
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "do ex calcs?1"
		    Position		    [35, 105, 115, 125]
		    ShowName		    off
		    Value		    "ess_th_res_on"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Tair_ave"
		    Position		    [355, 35, 375, 55]
		    Port		    "1"
		    OutputWhenDisabled	    "reset"
		    InitialOutput	    "amb_tmp"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Th Res"
		    Position		    [355, 105, 375, 125]
		    Port		    "2"
		    OutputWhenDisabled	    "reset"
		    InitialOutput	    "ess_th_res_off"
		    }
		    Line {
		    SrcBlock		    "do ex calcs?1"
		    SrcPort		    1
		    DstBlock		    "Th Res"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Qess_case"
		    SrcPort		    1
		    DstBlock		    "Tamb-(Q/mcp)/2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Tamb-(Q/mcp)/2"
		    SrcPort		    1
		    DstBlock		    "Tair_ave"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Integrator
		    Name		    "Tess2"
		    Ports		    [1, 1]
		    Position		    [420, 155, 440, 175]
		    ExternalReset	    "none"
		    InitialConditionSource  "internal"
		    InitialCondition	    "ess_mod_init_tmp"
		    LimitOutput		    off
		    UpperSaturationLimit    "inf"
		    LowerSaturationLimit    "-inf"
		    ShowSaturationPort	    off
		    ShowStatePort	    off
		    AbsoluteTolerance	    "auto"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "thermostat"
		    Position		    [235, 29, 340, 51]
		    Orientation		    "left"
		    NamePlacement	    "alternate"
		    FontName		    "Arial"
		    Expr		    "u(1) - ess_set_tmp"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Tess"
		    Position		    [470, 155, 490, 175]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Tair"
		    Position		    [470, 60, 490, 80]
		    NamePlacement	    "alternate"
		    Port		    "2"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "[]"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Qair"
		    Position		    [470, 90, 490, 110]
		    Port		    "3"
		    OutputWhenDisabled	    "reset"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Tair,ave"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    Points		    [0, -50]
		    DstBlock		    "Tair"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Mux20"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Tair,ave"
		    SrcPort		    2
		    DstBlock		    "Mux20"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Mux20"
		    SrcPort		    1
		    DstBlock		    "Qess_case"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "#of mods"
		    SrcPort		    1
		    DstBlock		    "Qair"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    Points		    [-230, 0]
		    DstBlock		    "Tair,ave"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [-10, 0]
		    DstBlock		    "Tair,ave"
		    DstPort		    enable
		    }
		    Line {
		    SrcBlock		    "Saturation3"
		    SrcPort		    1
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "thermostat"
		    SrcPort		    1
		    DstBlock		    "Saturation3"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "1/#of mods"
		    SrcPort		    1
		    Points		    [210, 0]
		    DstBlock		    "Qc"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Qess_gen"
		    SrcPort		    1
		    DstBlock		    "1/#of mods"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Tess2"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    Points		    [0, -85; -80, 0]
		    Branch {
		    Points		    [0, -40]
		    DstBlock		    "thermostat"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [-185, 0]
		    DstBlock		    "Mux20"
		    DstPort		    1
		    }
		    }
		    Branch {
		    DstBlock		    "Tess"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "1/mcp"
		    SrcPort		    1
		    DstBlock		    "Tess2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Qess_case"
		    SrcPort		    1
		    Points		    [5, 0]
		    Branch {
		    Points		    [0, -20]
		    DstBlock		    "#of mods"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 55]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [10, 0]
		    DstBlock		    "Qc"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Qc"
		    SrcPort		    1
		    DstBlock		    "1/mcp"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "limit power"
		  Ports			  [4, 1]
		  Position		  [220, 249, 250, 306]
		  ShowPortLabels	  off
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "limit power"
		    Location		    [-52, 144, 972, 657]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "SOC"
		    Position		    [15, 45, 35, 65]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Pbty"
		    Position		    [15, 135, 35, 155]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Voc"
		    Position		    [15, 195, 35, 215]
		    Port		    "3"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Rint"
		    Position		    [390, 270, 410, 290]
		    Orientation		    "left"
		    Port		    "4"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant1"
		    Position		    [245, 60, 280, 80]
		    ShowName		    off
		    Value		    "eps"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant2"
		    Position		    [290, 99, 315, 121]
		    ShowName		    off
		    Value		    "0"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant3"
		    Position		    [705, 284, 730, 306]
		    Value		    "0"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant4"
		    Position		    [897, 185, 923, 205]
		    Orientation		    "down"
		    NamePlacement	    "alternate"
		    ShowName		    off
		    Value		    "0"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant5"
		    Position		    [650, 36, 685, 54]
		    ShowName		    off
		    Value		    ".999"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant6"
		    Position		    [725, 74, 750, 96]
		    ShowName		    off
		    Value		    "0"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gain"
		    Position		    [135, 222, 165, 248]
		    ShowName		    off
		    FontName		    "Arial"
		    Gain		    "0.5"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Limits"
		    Ports		    [8]
		    Position		    [700, 333, 730, 472]
		    FontName		    "Arial"
		    ShowPortLabels	    off
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    System {
		    Name		    "Limits"
		    Location		    [407, 389, 973, 980]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "SOC \nhigh limited"
		    Position		    [40, 15, 60, 35]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "not SOC \nlow limited"
		    Position		    [35, 70, 55, 90]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "power req"
		    Position		    [35, 145, 55, 165]
		    Port		    "3"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "power bat\nlimited"
		    Position		    [35, 220, 55, 240]
		    Port		    "4"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "V used"
		    Position		    [35, 300, 55, 320]
		    Port		    "5"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "V mc_min_volts"
		    Position		    [40, 375, 60, 395]
		    Port		    "6"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "V battery (.5Voc)"
		    Position		    [40, 435, 60, 455]
		    Port		    "7"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "V ess_min_volts"
		    Position		    [40, 510, 60, 530]
		    Port		    "8"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <sdo>"
		    Position		    [385, 369, 475, 391]
		    BackgroundColor	    "lightBlue"
		    GotoTag		    "ess_pwr_limited"
		    TagVisibility	    "scoped"
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <sdo>1"
		    Position		    [385, 292, 495, 318]
		    BackgroundColor	    "lightBlue"
		    GotoTag		    "mc_voltage_limited"
		    TagVisibility	    "scoped"
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <sdo>2"
		    Position		    [320, 69, 430, 91]
		    BackgroundColor	    "lightBlue"
		    GotoTag		    "ess_soc_low_limited"
		    TagVisibility	    "scoped"
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <sdo>3"
		    Position		    [385, 458, 490, 482]
		    BackgroundColor	    "lightBlue"
		    GotoTag		    "ess_minV_limited"
		    TagVisibility	    "scoped"
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <sdo>4"
		    Position		    [330, 19, 440, 41]
		    BackgroundColor	    "lightBlue"
		    GotoTag		    "ess_soc_hi_limited"
		    TagVisibility	    "scoped"
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "Logical\nOperator1"
		    Ports		    [1, 1]
		    Position		    [270, 64, 300, 96]
		    Operator		    "NOT"
		    Inputs		    "1"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator1"
		    Position		    [125, 172, 155, 203]
		    ShowName		    off
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator3"
		    Position		    [185, 317, 215, 348]
		    ShowName		    off
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator4"
		    Position		    [190, 402, 220, 433]
		    ShowName		    off
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator5"
		    Position		    [185, 497, 215, 528]
		    ShowName		    off
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "limited\nby battery"
		    Ports		    [2, 1]
		    Position		    [330, 362, 360, 393]
		    Operator		    "AND"
		    Inputs		    "2"
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "limited\nby battery\nmin V"
		    Ports		    [2, 1]
		    Position		    [330, 452, 360, 483]
		    Operator		    "AND"
		    Inputs		    "2"
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "limited by\nmotor controller"
		    Ports		    [2, 1]
		    Position		    [335, 287, 365, 318]
		    Operator		    "AND"
		    Inputs		    "2"
		    }
		    Line {
		    SrcBlock		    "SOC \nhigh limited"
		    SrcPort		    1
		    Points		    [250, 0]
		    DstBlock		    "Goto <sdo>4"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "not SOC \nlow limited"
		    SrcPort		    1
		    DstBlock		    "Logical\nOperator1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Logical\nOperator1"
		    SrcPort		    1
		    DstBlock		    "Goto <sdo>2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "power req"
		    SrcPort		    1
		    Points		    [50, 0]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator5"
		    SrcPort		    1
		    Points		    [95, 0]
		    DstBlock		    "limited\nby battery\nmin V"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator4"
		    SrcPort		    1
		    Points		    [90, 0]
		    DstBlock		    "limited\nby battery"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator1"
		    SrcPort		    1
		    Points		    [105, 0; 0, 105]
		    Branch {
		    Points		    [0, 75]
		    Branch {
		    Points		    [0, 90]
		    DstBlock		    "limited\nby battery\nmin V"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "limited\nby battery"
		    DstPort		    1
		    }
		    }
		    Branch {
		    DstBlock		    "limited by\nmotor controller"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator3"
		    SrcPort		    1
		    Points		    [100, 0]
		    DstBlock		    "limited by\nmotor controller"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "limited\nby battery\nmin V"
		    SrcPort		    1
		    DstBlock		    "Goto <sdo>3"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "limited\nby battery"
		    SrcPort		    1
		    DstBlock		    "Goto <sdo>"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "limited by\nmotor controller"
		    SrcPort		    1
		    DstBlock		    "Goto <sdo>1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "V ess_min_volts"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator5"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "V battery (.5Voc)"
		    SrcPort		    1
		    Points		    [110, 0]
		    DstBlock		    "Relational\nOperator4"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "V used"
		    SrcPort		    1
		    Points		    [70, 0; 0, 15]
		    Branch {
		    Points		    [0, 85]
		    Branch {
		    Points		    [0, 95]
		    DstBlock		    "Relational\nOperator5"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Relational\nOperator4"
		    DstPort		    1
		    }
		    }
		    Branch {
		    DstBlock		    "Relational\nOperator3"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "V mc_min_volts"
		    SrcPort		    1
		    Points		    [105, 0]
		    DstBlock		    "Relational\nOperator3"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "power bat\nlimited"
		    SrcPort		    1
		    Points		    [50, 0]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "Logical\nOperator"
		    Ports		    [2, 1]
		    Position		    [465, 57, 495, 88]
		    ShowName		    off
		    Operator		    "OR"
		    Inputs		    "2"
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "Logical\nOperator1"
		    Ports		    [2, 1]
		    Position		    [830, 32, 860, 63]
		    ShowName		    off
		    Operator		    "AND"
		    Inputs		    "2"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [3, 1]
		    Position		    [390, 198, 410, 232]
		    FontName		    "Arial"
		    Inputs		    "3"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    Position		    [330, 47, 360, 78]
		    ShowName		    off
		    Operator		    ">"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator3"
		    Position		    [405, 87, 435, 118]
		    NamePlacement	    "alternate"
		    ShowName		    off
		    Operator		    "<"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "SOC>=.999"
		    Position		    [715, 22, 745, 53]
		    Operator		    ">="
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "charging\n(Preq is neg)"
		    Position		    [770, 62, 800, 93]
		    Operator		    "<"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "discharge\nmax power allowed\n(-0"
".1 is for safety, to prevent\ntaking the square of a tiny\n-ive # in I=I(P) e"
"lsewhere)"
		    Position		    [425, 201, 555, 229]
		    FontName		    "Arial"
		    Expr		    "(u[1]-u[2])*u[2]/u[3]-0.1"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "ess minimum voltage"
		    Position		    [25, 335, 115, 355]
		    FontName		    "Arial"
		    Value		    "ess_min_volts"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "ess_module_num"
		    Position		    [135, 330, 200, 360]
		    FontName		    "Arial"
		    Gain		    "ess_module_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    MinMax
		    Name		    "limit by battery max\nor min mc v"
"oltage\nor ess min"
		    Ports		    [3, 1]
		    Position		    [255, 220, 285, 320]
		    Function		    "max"
		    Inputs		    "3"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "mc minimum\nvoltage"
		    Position		    [15, 257, 85, 283]
		    FontName		    "Arial"
		    Value		    "mc_min_volts"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    MinMax
		    Name		    "min"
		    Ports		    [2, 1]
		    Position		    [620, 162, 635, 333]
		    Function		    "min"
		    Inputs		    "2"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "no power req if\nSOC<0 and trying"
" \nto discharge"
		    Position		    [770, 245, 800, 275]
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "no power req if\nSOC>.999 and try"
"ing \nto charge"
		    Position		    [925, 235, 955, 265]
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Pbty, limited"
		    Position		    [1020, 240, 1040, 260]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Logical\nOperator1"
		    SrcPort		    1
		    Points		    [15, 0; 0, 185]
		    Branch {
		    Points		    [-195, 0]
		    DstBlock		    "Limits"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 15]
		    DstBlock		    "no power req if\nSOC>.999 and try"
"ing \nto charge"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "no power req if\nSOC>.999 and try"
"ing \nto charge"
		    SrcPort		    1
		    DstBlock		    "Pbty, limited"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "no power req if\nSOC<0 and trying"
" \nto discharge"
		    SrcPort		    1
		    DstBlock		    "no power req if\nSOC>.999 and try"
"ing \nto charge"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Constant4"
		    SrcPort		    1
		    DstBlock		    "no power req if\nSOC>.999 and try"
"ing \nto charge"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant5"
		    SrcPort		    1
		    DstBlock		    "SOC>=.999"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "charging\n(Preq is neg)"
		    SrcPort		    1
		    Points		    [10, 0]
		    DstBlock		    "Logical\nOperator1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant6"
		    SrcPort		    1
		    DstBlock		    "charging\n(Preq is neg)"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "SOC>=.999"
		    SrcPort		    1
		    DstBlock		    "Logical\nOperator1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "SOC"
		    SrcPort		    1
		    Points		    [190, 0]
		    Branch {
		    Points		    [0, -25]
		    DstBlock		    "SOC>=.999"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "ess_module_num"
		    SrcPort		    1
		    Points		    [5, 0]
		    Branch {
		    Points		    [0, 110]
		    DstBlock		    "Limits"
		    DstPort		    8
		    }
		    Branch {
		    Points		    [0, -40]
		    DstBlock		    "limit by battery max\nor min mc v"
"oltage\nor ess min"
		    DstPort		    3
		    }
		    }
		    Line {
		    SrcBlock		    "ess minimum voltage"
		    SrcPort		    1
		    DstBlock		    "ess_module_num"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Gain"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    Points		    [0, -25; 195, 0; 0, 230]
		    DstBlock		    "Limits"
		    DstPort		    7
		    }
		    Branch {
		    DstBlock		    "limit by battery max\nor min mc v"
"oltage\nor ess min"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Rint"
		    SrcPort		    1
		    Points		    [-15, 0; 0, -55]
		    DstBlock		    "Mux"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "mc minimum\nvoltage"
		    SrcPort		    1
		    Points		    [30, 0]
		    Branch {
		    Points		    [0, 155]
		    DstBlock		    "Limits"
		    DstPort		    6
		    }
		    Branch {
		    DstBlock		    "limit by battery max\nor min mc v"
"oltage\nor ess min"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "discharge\nmax power allowed\n(-0"
".1 is for safety, to prevent\ntaking the square of a tiny\n-ive # in I=I(P) e"
"lsewhere)"
		    SrcPort		    1
		    Points		    [5, 0; 0, 75]
		    Branch {
		    DstBlock		    "min"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, 105]
		    DstBlock		    "Limits"
		    DstPort		    4
		    }
		    }
		    Line {
		    SrcBlock		    "limit by battery max\nor min mc v"
"oltage\nor ess min"
		    SrcPort		    1
		    Points		    [65, 0]
		    Branch {
		    Points		    [0, 140]
		    DstBlock		    "Limits"
		    DstPort		    5
		    }
		    Branch {
		    Points		    [0, -55]
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "discharge\nmax power allowed\n(-0"
".1 is for safety, to prevent\ntaking the square of a tiny\n-ive # in I=I(P) e"
"lsewhere)"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "min"
		    SrcPort		    1
		    Points		    [30, 0]
		    Branch {
		    Points		    [0, 130]
		    DstBlock		    "Limits"
		    DstPort		    3
		    }
		    Branch {
		    DstBlock		    "no power req if\nSOC<0 and trying"
" \nto discharge"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Voc"
		    SrcPort		    1
		    Points		    [80, 0]
		    Branch {
		    DstBlock		    "Gain"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Logical\nOperator"
		    SrcPort		    1
		    Points		    [180, 0; 0, 185]
		    Branch {
		    Points		    [0, 105]
		    DstBlock		    "Limits"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "no power req if\nSOC<0 and trying"
" \nto discharge"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Constant3"
		    SrcPort		    1
		    Points		    [0, -25]
		    DstBlock		    "no power req if\nSOC<0 and trying"
" \nto discharge"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator3"
		    SrcPort		    1
		    Points		    [10, 0]
		    DstBlock		    "Logical\nOperator"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant2"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator3"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Pbty"
		    SrcPort		    1
		    Points		    [335, 0]
		    Branch {
		    Points		    [230, 0]
		    Branch {
		    Points		    [0, -75]
		    DstBlock		    "charging\n(Preq is neg)"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "min"
		    DstPort		    1
		    }
		    }
		    Branch {
		    Points		    [0, -50]
		    DstBlock		    "Relational\nOperator3"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "Logical\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant1"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "max pack\npwr (W)1"
		  Ports			  [2, 2]
		  Position		  [235, 26, 265, 59]
		  ShowPortLabels	  off
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "max pack\npwr (W)1"
		    Location		    [19, 84, 877, 663]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "SOC"
		    Position		    [50, 25, 70, 45]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "ess_mod_tmp"
		    Position		    [45, 110, 65, 130]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "#bty"
		    Position		    [195, 173, 285, 197]
		    Orientation		    "left"
		    Value		    "ess_module_num"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    Position		    [307, 200, 393, 220]
		    Orientation		    "up"
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    "mc_min_volts"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant1"
		    Position		    [335, 90, 370, 110]
		    Orientation		    "left"
		    Value		    "0.001"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant2"
		    Position		    [645, 190, 680, 210]
		    Orientation		    "left"
		    Value		    "0"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant7"
		    Position		    [435, 50, 475, 70]
		    ShowName		    off
		    Value		    "ess_on"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gain"
		    Position		    [335, 142, 365, 168]
		    ShowName		    off
		    FontName		    "Arial"
		    Gain		    "0.5"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    MinMax
		    Name		    "MinMax1"
		    Ports		    [3, 1]
		    Position		    [415, 149, 445, 181]
		    ShowName		    off
		    Function		    "max"
		    Inputs		    "3"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [3, 1]
		    Position		    [475, 123, 495, 157]
		    FontName		    "Arial"
		    Inputs		    "3"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux3"
		    Ports		    [3, 1]
		    Position		    [555, 368, 575, 402]
		    Inputs		    "3"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux5"
		    Ports		    [3, 1]
		    Position		    [370, 311, 390, 399]
		    Inputs		    "3"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    Ports		    [2, 1]
		    Position		    [225, 118, 255, 142]
		    Inputs		    "2"
		    Multiplication	    "Element-wise(.*)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product3"
		    Ports		    [2, 1]
		    Position		    [710, 348, 740, 372]
		    Inputs		    "2"
		    Multiplication	    "Element-wise(.*)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Rchg\n(ohms)1"
		    Ports		    [2, 1]
		    Position		    [135, 413, 165, 437]
		    ShowPortLabels	    off
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "2-D Table Lookup"
		    MaskDescription	    "Two Dimensional Table Lookup\nThe"
" first input corresponds to X Index and the second input corresponds to the Y"
" Index"
		    MaskHelp		    "This block returns a linearly int"
"erpolated intersection from the table using the X index (which corresponds to"
" the rows of the table) and the Y index (which corresponds to the columns of "
"the table).  Extrapolation is used."
		    MaskPromptString	    "X Index|Y Index|Table"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskInitialization	    "xindex=@1; yindex=@2; table=@3; s"
"ftab2chk(xindex,yindex,table);"
		    MaskDisplay		    "plot(-10,-10,110,110,[90,50,10],["
"90,40,30],[90,50,10],[50,26,20],[90,50,10],[22,13,10])"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "ess_tmp|ess_soc|ess_r_chg"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "Rchg\n(ohms)1"
		    Location		    [316, 263, 598, 417]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "x0"
		    Position		    [20, 25, 40, 45]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "y0"
		    Position		    [20, 80, 40, 100]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [2, 1]
		    Position		    [90, 46, 120, 79]
		    Inputs		    "2"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    "S-Function"
		    Name		    "S-function"
		    Ports		    [1, 1]
		    Position		    [140, 52, 190, 78]
		    FunctionName	    "sftable2"
		    Parameters		    "xindex, yindex, table"
		    PortCounts		    "[]"
		    SFunctionModules	    "''"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "table out"
		    Position		    [215, 55, 235, 75]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "y0"
		    SrcPort		    1
		    Points		    [20, 0; 0, -20]
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "S-function"
		    SrcPort		    1
		    DstBlock		    "table out"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "x0"
		    SrcPort		    1
		    Points		    [20, 0; 0, 20]
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "S-function"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Rdis\n(ohms)"
		    Ports		    [2, 1]
		    Position		    [140, 228, 170, 252]
		    ShowPortLabels	    off
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "2-D Table Lookup"
		    MaskDescription	    "Two Dimensional Table Lookup\nThe"
" first input corresponds to X Index and the second input corresponds to the Y"
" Index"
		    MaskHelp		    "This block returns a linearly int"
"erpolated intersection from the table using the X index (which corresponds to"
" the rows of the table) and the Y index (which corresponds to the columns of "
"the table).  Extrapolation is used."
		    MaskPromptString	    "X Index|Y Index|Table"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskInitialization	    "xindex=@1; yindex=@2; table=@3; s"
"ftab2chk(xindex,yindex,table);"
		    MaskDisplay		    "plot(-10,-10,110,110,[90,50,10],["
"90,40,30],[90,50,10],[50,26,20],[90,50,10],[22,13,10])"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "ess_tmp|ess_soc|ess_r_dis"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "Rdis\n(ohms)"
		    Location		    [316, 263, 598, 417]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "x0"
		    Position		    [20, 25, 40, 45]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "y0"
		    Position		    [20, 80, 40, 100]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [2, 1]
		    Position		    [90, 46, 120, 79]
		    Inputs		    "2"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    "S-Function"
		    Name		    "S-function"
		    Ports		    [1, 1]
		    Position		    [140, 52, 190, 78]
		    FunctionName	    "sftable2"
		    Parameters		    "xindex, yindex, table"
		    PortCounts		    "[]"
		    SFunctionModules	    "''"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "table out"
		    Position		    [215, 55, 235, 75]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "y0"
		    SrcPort		    1
		    Points		    [20, 0; 0, -20]
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "S-function"
		    SrcPort		    1
		    DstBlock		    "table out"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "x0"
		    SrcPort		    1
		    Points		    [20, 0; 0, 20]
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "S-function"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    Position		    [340, 27, 370, 58]
		    Operator		    ">"
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    Position		    [645, 140, 675, 170]
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "VOC\n(V)"
		    Ports		    [2, 1]
		    Position		    [145, 113, 175, 137]
		    ShowPortLabels	    off
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "2-D Table Lookup"
		    MaskDescription	    "Two Dimensional Table Lookup\nThe"
" first input corresponds to X Index and the second input corresponds to the Y"
" Index"
		    MaskHelp		    "This block returns a linearly int"
"erpolated intersection from the table using the X index (which corresponds to"
" the rows of the table) and the Y index (which corresponds to the columns of "
"the table).  Extrapolation is used."
		    MaskPromptString	    "X Index|Y Index|Table"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskInitialization	    "xindex=@1; yindex=@2; table=@3; s"
"ftab2chk(xindex,yindex,table);"
		    MaskDisplay		    "plot(-10,-10,110,110,[90,50,10],["
"90,40,30],[90,50,10],[50,26,20],[90,50,10],[22,13,10])"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "ess_tmp|ess_soc|ess_voc"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "VOC\n(V)"
		    Location		    [316, 263, 598, 417]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "x0"
		    Position		    [20, 25, 40, 45]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "y0"
		    Position		    [20, 80, 40, 100]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [2, 1]
		    Position		    [90, 46, 120, 79]
		    Inputs		    "2"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    "S-Function"
		    Name		    "S-function"
		    Ports		    [1, 1]
		    Position		    [140, 52, 190, 78]
		    FunctionName	    "sftable2"
		    Parameters		    "xindex, yindex, table"
		    PortCounts		    "[]"
		    SFunctionModules	    "''"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "table out"
		    Position		    [215, 55, 235, 75]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "y0"
		    SrcPort		    1
		    Points		    [20, 0; 0, -20]
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "S-function"
		    SrcPort		    1
		    DstBlock		    "table out"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "x0"
		    SrcPort		    1
		    Points		    [20, 0; 0, 20]
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "S-function"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Voc-I*R"
		    Position		    [600, 374, 680, 396]
		    Expr		    "u[2]-u[1]*u[3]"
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "and"
		    Ports		    [2, 1]
		    Position		    [505, 37, 535, 68]
		    NamePlacement	    "alternate"
		    ShowName		    off
		    Operator		    "AND"
		    Inputs		    "2"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "iabs min=(Voc-Vmax)/R"
		    Position		    [435, 344, 465, 366]
		    Expr		    "(u(1)-u(2))/u(3)"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "max power corresponding\nto minim"
"um voltage"
		    Position		    [520, 131, 615, 159]
		    FontName		    "Arial"
		    Expr		    "(u[1]-u[2])*u[2]/u[3]"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "min ess V"
		    Position		    [315, 252, 480, 278]
		    Orientation		    "left"
		    Value		    "ess_module_num*ess_min_volts"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "min ess V1"
		    Position		    [185, 342, 350, 368]
		    Value		    "ess_module_num*ess_max_volts"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "resistance scale fun"
		    Position		    [225, 410, 255, 440]
		    Gain		    "ess_res_scale_fun(ess_res_scale_c"
"oef,ess_module_num,ess_cap_scale)"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "resistance scale fun1"
		    Position		    [225, 225, 255, 255]
		    Gain		    "ess_res_scale_fun(ess_res_scale_c"
"oef,ess_module_num,ess_cap_scale)"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "max ess\ndischarge\npwr"
		    Position		    [730, 145, 750, 165]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "max ess\ncharge\npwr"
		    Position		    [775, 350, 795, 370]
		    Port		    "2"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Constant7"
		    SrcPort		    1
		    DstBlock		    "and"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "and"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "and"
		    SrcPort		    1
		    Points		    [90, 0]
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "min ess V"
		    SrcPort		    1
		    Points		    [0, -20; 90, 0]
		    DstBlock		    "MinMax1"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "ess_mod_tmp"
		    SrcPort		    1
		    Points		    [40, 0]
		    Branch {
		    DstBlock		    "VOC\n(V)"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 115]
		    Branch {
		    DstBlock		    "Rdis\n(ohms)"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 185]
		    DstBlock		    "Rchg\n(ohms)1"
		    DstPort		    1
		    }
		    }
		    }
		    Line {
		    SrcBlock		    "Constant1"
		    SrcPort		    1
		    Points		    [-5, 0]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    Points		    [35, 0; 0, -30]
		    DstBlock		    "MinMax1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    Points		    [0, 5]
		    DstBlock		    "max power corresponding\nto minim"
"um voltage"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Gain"
		    SrcPort		    1
		    DstBlock		    "MinMax1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "MinMax1"
		    SrcPort		    1
		    Points		    [0, -25]
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    Points		    [40, 0]
		    Branch {
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "Gain"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 170]
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "Mux5"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [210, 0; 0, 85]
		    DstBlock		    "Mux3"
		    DstPort		    2
		    }
		    }
		    }
		    Line {
		    SrcBlock		    "resistance scale fun1"
		    SrcPort		    1
		    Points		    [200, 0]
		    DstBlock		    "Mux"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "VOC\n(V)"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Rdis\n(ohms)"
		    SrcPort		    1
		    DstBlock		    "resistance scale fun1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "max power corresponding\nto minim"
"um voltage"
		    SrcPort		    1
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant2"
		    SrcPort		    1
		    Points		    [-10, 0]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "SOC"
		    SrcPort		    1
		    Points		    [45, 0]
		    Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 95]
		    Branch {
		    DstBlock		    "VOC\n(V)"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, 115]
		    Branch {
		    DstBlock		    "Rdis\n(ohms)"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Rchg\n(ohms)1"
		    DstPort		    2
		    }
		    }
		    }
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    DstBlock		    "max ess\ndischarge\npwr"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "min ess V1"
		    SrcPort		    1
		    DstBlock		    "Mux5"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Mux5"
		    SrcPort		    1
		    DstBlock		    "iabs min=(Voc-Vmax)/R"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux3"
		    SrcPort		    1
		    DstBlock		    "Voc-I*R"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "iabs min=(Voc-Vmax)/R"
		    SrcPort		    1
		    Points		    [60, 0]
		    Branch {
		    Points		    [0, 20]
		    DstBlock		    "Mux3"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Product3"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Voc-I*R"
		    SrcPort		    1
		    Points		    [0, -20]
		    DstBlock		    "Product3"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Product3"
		    SrcPort		    1
		    DstBlock		    "max ess\ncharge\npwr"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "resistance scale fun"
		    SrcPort		    1
		    Points		    [95, 0]
		    Branch {
		    DstBlock		    "Mux5"
		    DstPort		    3
		    }
		    Branch {
		    Points		    [175, 0; 0, -30]
		    DstBlock		    "Mux3"
		    DstPort		    3
		    }
		    }
		    Line {
		    SrcBlock		    "Rchg\n(ohms)1"
		    SrcPort		    1
		    DstBlock		    "resistance scale fun"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "#bty"
		    SrcPort		    1
		    Points		    [-10, 0; 0, -50]
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "pack\nVoc, Rint"
		  Ports			  [3, 2]
		  Position		  [130, 152, 160, 208]
		  ShowPortLabels	  off
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "pack\nVoc, Rint"
		    Location		    [133, 354, 681, 657]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "SOC (prev)"
		    Position		    [25, 80, 45, 100]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "req'd battery\npower (W)"
		    Position		    [230, 160, 250, 180]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "mod tmp \n (C)"
		    Position		    [80, 140, 100, 160]
		    Port		    "3"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "#bty"
		    Position		    [255, 54, 350, 76]
		    Value		    "ess_module_num"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    Ports		    [2, 1]
		    Position		    [380, 28, 410, 52]
		    Inputs		    "2"
		    Multiplication	    "Element-wise(.*)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Rchg\n(ohms)"
		    Ports		    [2, 1]
		    Position		    [200, 228, 230, 252]
		    ShowPortLabels	    off
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "2-D Table Lookup"
		    MaskDescription	    "Two Dimensional Table Lookup\nThe"
" first input corresponds to X Index and the second input corresponds to the Y"
" Index"
		    MaskHelp		    "This block returns a linearly int"
"erpolated intersection from the table using the X index (which corresponds to"
" the rows of the table) and the Y index (which corresponds to the columns of "
"the table).  Extrapolation is used."
		    MaskPromptString	    "X Index|Y Index|Table"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskInitialization	    "xindex=@1; yindex=@2; table=@3; s"
"ftab2chk(xindex,yindex,table);"
		    MaskDisplay		    "plot(-10,-10,110,110,[90,50,10],["
"90,40,30],[90,50,10],[50,26,20],[90,50,10],[22,13,10])"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "ess_tmp|ess_soc|ess_r_chg"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "Rchg\n(ohms)"
		    Location		    [316, 263, 598, 417]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "x0"
		    Position		    [20, 25, 40, 45]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "y0"
		    Position		    [20, 80, 40, 100]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [2, 1]
		    Position		    [90, 46, 120, 79]
		    Inputs		    "2"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    "S-Function"
		    Name		    "S-function"
		    Ports		    [1, 1]
		    Position		    [140, 52, 190, 78]
		    FunctionName	    "sftable2"
		    Parameters		    "xindex, yindex, table"
		    PortCounts		    "[]"
		    SFunctionModules	    "''"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "table out"
		    Position		    [215, 55, 235, 75]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "S-function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "x0"
		    SrcPort		    1
		    Points		    [20, 0; 0, 20]
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "S-function"
		    SrcPort		    1
		    DstBlock		    "table out"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "y0"
		    SrcPort		    1
		    Points		    [20, 0; 0, -20]
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Rdis\n(ohms)"
		    Ports		    [2, 1]
		    Position		    [195, 108, 225, 132]
		    ShowPortLabels	    off
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "2-D Table Lookup"
		    MaskDescription	    "Two Dimensional Table Lookup\nThe"
" first input corresponds to X Index and the second input corresponds to the Y"
" Index"
		    MaskHelp		    "This block returns a linearly int"
"erpolated intersection from the table using the X index (which corresponds to"
" the rows of the table) and the Y index (which corresponds to the columns of "
"the table).  Extrapolation is used."
		    MaskPromptString	    "X Index|Y Index|Table"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskInitialization	    "xindex=@1; yindex=@2; table=@3; s"
"ftab2chk(xindex,yindex,table);"
		    MaskDisplay		    "plot(-10,-10,110,110,[90,50,10],["
"90,40,30],[90,50,10],[50,26,20],[90,50,10],[22,13,10])"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "ess_tmp|ess_soc|ess_r_dis"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "Rdis\n(ohms)"
		    Location		    [316, 263, 598, 417]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "x0"
		    Position		    [20, 25, 40, 45]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "y0"
		    Position		    [20, 80, 40, 100]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [2, 1]
		    Position		    [90, 46, 120, 79]
		    Inputs		    "2"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    "S-Function"
		    Name		    "S-function"
		    Ports		    [1, 1]
		    Position		    [140, 52, 190, 78]
		    FunctionName	    "sftable2"
		    Parameters		    "xindex, yindex, table"
		    PortCounts		    "[]"
		    SFunctionModules	    "''"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "table out"
		    Position		    [215, 55, 235, 75]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "S-function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "x0"
		    SrcPort		    1
		    Points		    [20, 0; 0, 20]
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "S-function"
		    SrcPort		    1
		    DstBlock		    "table out"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "y0"
		    SrcPort		    1
		    Points		    [20, 0; 0, -20]
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    Position		    [365, 154, 395, 186]
		    Threshold		    "0"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "VOC\n(V)"
		    Ports		    [2, 1]
		    Position		    [205, 23, 235, 47]
		    ShowPortLabels	    off
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "2-D Table Lookup"
		    MaskDescription	    "Two Dimensional Table Lookup\nThe"
" first input corresponds to X Index and the second input corresponds to the Y"
" Index"
		    MaskHelp		    "This block returns a linearly int"
"erpolated intersection from the table using the X index (which corresponds to"
" the rows of the table) and the Y index (which corresponds to the columns of "
"the table).  Extrapolation is used."
		    MaskPromptString	    "X Index|Y Index|Table"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskInitialization	    "xindex=@1; yindex=@2; table=@3; s"
"ftab2chk(xindex,yindex,table);"
		    MaskDisplay		    "plot(-10,-10,110,110,[90,50,10],["
"90,40,30],[90,50,10],[50,26,20],[90,50,10],[22,13,10])"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "ess_tmp|ess_soc|ess_voc"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "VOC\n(V)"
		    Location		    [316, 263, 598, 417]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "x0"
		    Position		    [20, 25, 40, 45]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "y0"
		    Position		    [20, 80, 40, 100]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [2, 1]
		    Position		    [90, 46, 120, 79]
		    Inputs		    "2"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    "S-Function"
		    Name		    "S-function"
		    Ports		    [1, 1]
		    Position		    [140, 52, 190, 78]
		    FunctionName	    "sftable2"
		    Parameters		    "xindex, yindex, table"
		    PortCounts		    "[]"
		    SFunctionModules	    "''"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "table out"
		    Position		    [215, 55, 235, 75]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "S-function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "x0"
		    SrcPort		    1
		    Points		    [20, 0; 0, 20]
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "S-function"
		    SrcPort		    1
		    DstBlock		    "table out"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "y0"
		    SrcPort		    1
		    Points		    [20, 0; 0, -20]
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "resistance scale fun"
		    Position		    [275, 105, 305, 135]
		    Gain		    "ess_res_scale_fun(ess_res_scale_c"
"oef,ess_module_num,ess_cap_scale)"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "resistance scale fun1"
		    Position		    [280, 225, 310, 255]
		    Gain		    "ess_res_scale_fun(ess_res_scale_c"
"oef,ess_module_num,ess_cap_scale)"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "pack open-\ncircuit voltage"
		    Position		    [450, 30, 470, 50]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "pack\nresistance"
		    Position		    [450, 105, 470, 125]
		    Port		    "2"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "mod tmp \n (C)"
		    SrcPort		    1
		    Points		    [55, 0]
		    Branch {
		    Points		    [0, 85]
		    DstBlock		    "Rchg\n(ohms)"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -35]
		    Branch {
		    DstBlock		    "Rdis\n(ohms)"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -85]
		    DstBlock		    "VOC\n(V)"
		    DstPort		    1
		    }
		    }
		    }
		    Line {
		    SrcBlock		    "SOC (prev)"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    Points		    [0, 35]
		    Branch {
		    Points		    [0, 120]
		    DstBlock		    "Rchg\n(ohms)"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Rdis\n(ohms)"
		    DstPort		    2
		    }
		    }
		    Branch {
		    Points		    [0, -50]
		    DstBlock		    "VOC\n(V)"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "req'd battery\npower (W)"
		    SrcPort		    1
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "VOC\n(V)"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "pack open-\ncircuit voltage"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "#bty"
		    SrcPort		    1
		    Points		    [5, 0; 0, -20]
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    Points		    [15, 0; 0, -55]
		    DstBlock		    "pack\nresistance"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Rdis\n(ohms)"
		    SrcPort		    1
		    DstBlock		    "resistance scale fun"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "resistance scale fun"
		    SrcPort		    1
		    Points		    [40, 0]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Rchg\n(ohms)"
		    SrcPort		    1
		    DstBlock		    "resistance scale fun1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "resistance scale fun1"
		    SrcPort		    1
		    Points		    [35, 0]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "stop sim"
		  Ports			  [1, 0, 1]
		  Position		  [520, 114, 580, 146]
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "stop sim"
		    Location		    [423, 258, 819, 468]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "SOC"
		    Position		    [75, 85, 95, 105]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [170, 25, 190, 45]
		    StatesWhenEnabling	    "held"
		    ShowOutputPort	    off
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Const"
		    Position		    [95, 145, 165, 165]
		    Orientation		    "up"
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    ".001"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    Position		    [185, 88, 215, 112]
		    Operator		    "<"
		    }
		    Block {
		    BlockType		    Stop
		    Name		    "Stop Simulation"
		    Position		    [255, 83, 295, 117]
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "Stop Simulation"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "SOC"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Const"
		    SrcPort		    1
		    Points		    [0, -35]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "power available\nto bus (W)"
		  Position		  [435, 180, 455, 200]
		  FontName		  "Arial"
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "compute\ncurrent"
		  SrcPort		  2
		  Points		  [0, -10; 15, 0]
		  Branch {
		    DstBlock		    "Product"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 35]
		    Branch {
		    Points		    [0, 70]
		    DstBlock		    "Mux"
		    DstPort		    3
		    }
		    Branch {
		    DstBlock		    "Goto <mc>, <gc>, <sdo>"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "Fcn"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "power req'd\ninto bus (W)"
		  SrcPort		  1
		  Points		  [0, 0; 30, 0]
		  Branch {
		    DstBlock		    "pack\nVoc, Rint"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 90; 30, 0]
		    Branch {
		    Points		    [0, 15]
		    DstBlock		    "enhancedToWorkspace"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "limit power"
		    DstPort		    2
		    }
		  }
		}
		Line {
		  SrcBlock		  "compute\ncurrent"
		  SrcPort		  1
		  Points		  [0, -10; 25, 0]
		  Branch {
		    Points		    [0, -45]
		    DstBlock		    "SOC\nalgorithm"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 20]
		    Branch {
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  Points		  [0, 0; 35, 0]
		  Branch {
		    DstBlock		    "power available\nto bus (W)"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -45]
		    Branch {
		    DstBlock		    "Goto"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "enhancedToWorkspace5"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Fcn"
		  SrcPort		  1
		  Points		  [0, 0; 5, 0]
		  Branch {
		    DstBlock		    "ess tmp"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "enhancedToWorkspace1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "do ex calcs?"
		  SrcPort		  1
		  DstBlock		  "ess tmp"
		  DstPort		  enable
		}
		Line {
		  SrcBlock		  "SOC\nalgorithm"
		  SrcPort		  1
		  Points		  [0, 0; 10, 0]
		  Branch {
		    DstBlock		    "stop sim"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -25; -170, 0]
		    Branch {
		    Points		    [-95, 0; 0, 25]
		    Branch {
		    DstBlock		    "Goto <sdo>, <cs>"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 30]
		    Branch {
		    DstBlock		    "pack\nVoc, Rint"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 95]
		    DstBlock		    "limit power"
		    DstPort		    1
		    }
		    }
		    }
		    Branch {
		    Points		    [0, -70]
		    DstBlock		    "max pack\npwr (W)1"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Const"
		  SrcPort		  1
		  DstBlock		  "stop sim"
		  DstPort		  enable
		}
		Line {
		  SrcBlock		  "pack\nVoc, Rint"
		  SrcPort		  2
		  Points		  [0, -10; 10, 0]
		  Branch {
		    Points		    [35, 0]
		    DstBlock		    "compute\ncurrent"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 115]
		    Branch {
		    DstBlock		    "limit power"
		    DstPort		    4
		    }
		    Branch {
		    Points		    [0, 30; 90, 0; 0, -40]
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		  }
		}
		Line {
		  SrcBlock		  "pack\nVoc, Rint"
		  SrcPort		  1
		  Points		  [0, 0; 15, 0]
		  Branch {
		    Points		    [30, 0]
		    DstBlock		    "compute\ncurrent"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 120]
		    DstBlock		    "limit power"
		    DstPort		    3
		  }
		}
		Line {
		  SrcBlock		  "limit power"
		  SrcPort		  1
		  Points		  [5, 0; 0, -35; -50, 0]
		  DstBlock		  "compute\ncurrent"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "ess tmp"
		  SrcPort		  2
		  DstBlock		  "enhancedToWorkspace3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "ess tmp"
		  SrcPort		  3
		  DstBlock		  "enhancedToWorkspace4"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "ess tmp"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "coul eff"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "max pack\npwr (W)1"
		  SrcPort		  1
		  DstBlock		  "Goto <cs>1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [0, 0; 10, 0]
		  Branch {
		    Points		    [0, 65]
		    Branch {
		    Points		    [0, 15; -230, 0]
		    Branch {
		    Points		    [0, -220]
		    DstBlock		    "SOC\nalgorithm"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [-80, 0]
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "coul eff"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [-30, 0]
		    Branch {
		    Points		    [-85, 0]
		    DstBlock		    "pack\nVoc, Rint"
		    DstPort		    3
		    }
		    Branch {
		    Points		    [0, -305]
		    DstBlock		    "max pack\npwr (W)1"
		    DstPort		    2
		    }
		    }
		    }
		    }
		    Branch {
		    DstBlock		    "Goto <cs>"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "enhancedToWorkspace2"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "max pack\npwr (W)1"
		  SrcPort		  2
		  Points		  [5, 0]
		  DstBlock		  "Goto <cs>2"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Terminator
	      Name		      "Terminator"
	      Position		      [105, 395, 125, 415]
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "signal\nannotator"
	      Ports		      [1, 1]
	      Position		      [385, 46, 430, 74]
	      NamePlacement	      "alternate"
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"signal\nannotator"
		Location		[202, 77, 966, 752]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "In1"
		  Position		  [110, 103, 140, 117]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		  Port {
		    PortNumber		    1
		    Name		    "ess_pwr_out_r"
		    TestPoint		    off
		    LinearAnalysisOutput    off
		    LinearAnalysisInput	    off
		    RTWStorageClass	    "Auto"
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  Position		  [430, 103, 460, 117]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "[]"
		}
		Line {
		  Name			  "ess_pwr_out_r"
		  Labels		  [0, 0]
		  SrcBlock		  "In1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "required out"
	      Position		      [510, 50, 530, 70]
	      FontName		      "Arial"
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "power available\nto bus (W)"
	      Position		      [340, 100, 360, 120]
	      FontName		      "Arial"
	      Port		      "2"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "sensors"
	      Position		      [655, 410, 675, 430]
	      FontName		      "Arial"
	      Port		      "3"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "power req'd\ninto bus (W)"
	      SrcPort		      1
	      Points		      [35, 0]
	      Branch {
		DstBlock		"Model"
		DstPort			1
	      }
	      Branch {
		Points			[0, -50]
		DstBlock		"signal\nannotator"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Model"
	      SrcPort		      1
	      DstBlock		      "power available\nto bus (W)"
	      DstPort		      1
	    }
	    Line {
	      Name		      "ess_tmp"
	      Labels		      [0, 0]
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "control"
	      SrcPort		      1
	      DstBlock		      "Terminator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Bus\nCreator"
	      SrcPort		      1
	      DstBlock		      "sensors"
	      DstPort		      1
	    }
	    Line {
	      Name		      "bus_voltage"
	      Labels		      [0, 0]
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      2
	    }
	    Line {
	      Name		      "ess_pwr_out_a"
	      Labels		      [0, 0]
	      SrcBlock		      "From4"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      3
	    }
	    Line {
	      Name		      "ess_max_chg_pwr"
	      Labels		      [0, 0]
	      SrcBlock		      "From3"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      4
	    }
	    Line {
	      Name		      "ess_max_pwr"
	      Labels		      [0, 0]
	      SrcBlock		      "From2"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      5
	    }
	    Line {
	      Name		      "SOC"
	      Labels		      [0, 0]
	      SrcBlock		      "From5"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      6
	    }
	    Line {
	      Name		      "ess_maxV_limited"
	      Labels		      [0, 0]
	      SrcBlock		      "From6"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      7
	    }
	    Line {
	      Name		      "ess_soc_hi_limited"
	      Labels		      [0, 0]
	      SrcBlock		      "From7"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      8
	    }
	    Line {
	      Name		      "ess_soc_low_limited"
	      Labels		      [0, 0]
	      SrcBlock		      "From8"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      9
	    }
	    Line {
	      Name		      "mc_voltage_limited"
	      Labels		      [0, 0]
	      SrcBlock		      "From9"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      10
	    }
	    Line {
	      Name		      "ess_pwr_limited"
	      Labels		      [0, 0]
	      SrcBlock		      "From10"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      11
	    }
	    Line {
	      Name		      "ess_minV_limited"
	      Labels		      [0, 0]
	      SrcBlock		      "From11"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      12
	    }
	    Line {
	      SrcBlock		      "signal\nannotator"
	      SrcPort		      1
	      DstBlock		      "required out"
	      DstPort		      1
	    }
	    Annotation {
	      Position		      [257, 180]
	      BackgroundColor	      "yellow"
	      Text		      "Interface"
	      FontName		      "Arial"
	      FontSize		      22
	      FontWeight	      "bold"
	      FontAngle		      "italic"
	    }
	    Annotation {
	      Position		      [262, 30]
	      BackgroundColor	      "yellow"
	      Text		      "Model"
	      FontName		      "Arial"
	      FontSize		      22
	      FontWeight	      "bold"
	      FontAngle		      "italic"
	    }
	  }
	}
	Block {
	  BlockType		  Goto
	  Name			  "reqOutTag"
	  Position		  [365, 124, 465, 166]
	  ForegroundColor	  "red"
	  BackgroundColor	  "black"
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	  GotoTag		  "essReqOut"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "sensorsTag"
	  Position		  [365, 274, 465, 316]
	  ForegroundColor	  "red"
	  BackgroundColor	  "black"
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	  GotoTag		  "essSensors"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Outport
	  Name			  "power available\nto bus (W)"
	  Position		  [425, 210, 445, 230]
	  FontName		  "Arial"
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Line {
	  SrcBlock		  "power req'd\ninto bus (W)"
	  SrcPort		  1
	  DstBlock		  "energy\nstorage <ess>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "controlTag"
	  SrcPort		  1
	  Points		  [15, 0; 0, -65]
	  DstBlock		  "energy\nstorage <ess>"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "energy\nstorage <ess>"
	  SrcPort		  1
	  Points		  [40, 0]
	  DstBlock		  "reqOutTag"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "energy\nstorage <ess>"
	  SrcPort		  2
	  DstBlock		  "power available\nto bus (W)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "energy\nstorage <ess>"
	  SrcPort		  3
	  Points		  [25, 0; 0, 60]
	  DstBlock		  "sensorsTag"
	  DstPort		  1
	}
	Annotation {
	  Position		  [297, 40]
	  BackgroundColor	  "yellow"
	  Text			  "Energy Storage System"
	  FontName		  "Arial"
	  FontSize		  18
	  FontWeight		  "bold"
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "energy\nstorage <ess>\nRC"
      Ports		      [1, 1]
      Position		      [70, 318, 135, 362]
      BackgroundColor	      "yellow"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskType		      "Stand-Alone Energy Storage System Mask"
      MaskPromptString	      "General Name of this Component [char]|Log Varia"
"bles to Workspace?|Initialization File(s) [cell array of char]|Modification C"
"ell [2 column cell array of param and val]|Icon image file name [char--evalua"
"ted]|DEBUG"
      MaskStyleString	      "edit,popup(Don't Log|Log Variable),edit,edit,ed"
"it,popup(ON|OFF)"
      MaskTunableValueString  "on,on,on,on,on,on"
      MaskCallbackString      "|||||"
      MaskEnableString	      "on,on,on,on,on,on"
      MaskVisibilityString    "on,on,on,on,on,on"
      MaskToolTipString	      "on,on,on,on,on,on"
      MaskVariables	      "generalName=@1;logPick=@2;initFileName=@3;modCe"
"ll=@4;imgFileName=@5;DEBUG=&6;"
      MaskInitialization      "% initialization via m-file script\nadvSACompMa"
"skInit;"
      MaskDisplay	      "image(imread(imgFileName))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      MaskValueString	      "'ess'|Log Variable|{}|{}|'bdi_ess.jpg'|OFF"
      MaskVariableAliases     ",,,,,"
      System {
	Name			"energy\nstorage <ess>\nRC"
	Location		[202, 77, 966, 744]
	Open			off
	ModelBrowserVisibility	on
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "power req'd\ninto bus (W)"
	  Position		  [140, 200, 160, 220]
	  FontName		  "Arial"
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Block NOTES"
	  Ports			  []
	  Position		  [75, 90, 131, 130]
	  BackgroundColor	  "green"
	  ShowName		  off
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "disp('Block\\nNOTES')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Block NOTES"
	    Location		    [256, 329, 741, 634]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Annotation {
	      Position		      [242, 146]
	      Text		      "This is a stand-alone version of an ene"
"rgy storage system\n\nSeveral different models are available"
	    }
	  }
	}
	Block {
	  BlockType		  From
	  Name			  "controlTag"
	  Position		  [80, 276, 190, 314]
	  ForegroundColor	  "red"
	  BackgroundColor	  "black"
	  CloseFcn		  "tagdialog Close"
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	  GotoTag		  "essControl"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "documentation9"
	  Ports			  []
	  Position		  [145, 91, 174, 130]
	  BackgroundColor	  "orange"
	  DropShadow		  on
	  ShowName		  off
	  OpenFcn		  "web(['file:\\\\\\' which('energy_storage.ht"
"m')]);"
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "documentation9"
	    Location		    [129, 62, 308, 146]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "energy\nstorage <ess>\nRC"
	  Ports			  [2, 3]
	  Position		  [240, 198, 305, 242]
	  ForegroundColor	  "magenta"
	  BackgroundColor	  "yellow"
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('bdi_ess.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "energy\nstorage <ess>\nRC"
	    Location		    [101, 171, 870, 620]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "power req'd\ninto bus (W)"
	      Position		      [115, 100, 135, 120]
	      FontName		      "Arial"
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "control"
	      Position		      [15, 280, 35, 300]
	      FontName		      "Arial"
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      BusCreator
	      Name		      "Bus\nCreator"
	      Ports		      [5, 1]
	      Position		      [525, 209, 550, 381]
	      ShowName		      off
	      Inputs		      "5"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      Position		      [325, 213, 410, 237]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_tmp"
	      Port {
		PortNumber		1
		Name			"ess_tmp"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      Position		      [325, 248, 410, 272]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "bus_voltage"
	      Port {
		PortNumber		1
		Name			"bus_voltage"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From2"
	      Position		      [325, 318, 425, 342]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_max_pwr"
	      Port {
		PortNumber		1
		Name			"ess_max_pwr"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From3"
	      Position		      [325, 283, 440, 307]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_max_chg_pwr"
	      Port {
		PortNumber		1
		Name			"ess_max_chg_pwr"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From5"
	      Position		      [325, 353, 425, 377]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	      Port {
		PortNumber		1
		Name			"SOC"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility"
	      Position		      [230, 212, 315, 234]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_tmp"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility1"
	      Position		      [230, 247, 315, 269]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "bus_voltage"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility2"
	      Position		      [230, 317, 315, 339]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_max_pwr"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility3"
	      Position		      [211, 282, 315, 304]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_max_chg_pwr"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility6"
	      Position		      [230, 352, 315, 374]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      Terminator
	      Name		      "Terminator"
	      Position		      [65, 280, 85, 300]
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "model"
	      Ports		      [1, 1]
	      Position		      [200, 80, 240, 140]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"model"
		Location		[137, 91, 873, 491]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"automatic"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "power req'd\ninto bus (W)"
		  Position		  [90, 275, 110, 295]
		  Orientation		  "up"
		  NamePlacement		  "alternate"
		  FontName		  "Arial"
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Allow simulation\nto stop based on "
"\nlow SOC"
		  Ports			  [1, 0, 1]
		  Position		  [390, 59, 450, 91]
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "Allow simulation\nto stop based o"
"n \nlow SOC"
		    Location		    [425, 260, 821, 470]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "SOC"
		    Position		    [75, 85, 95, 105]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [170, 25, 190, 45]
		    StatesWhenEnabling	    "held"
		    ShowOutputPort	    off
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Const"
		    Position		    [95, 145, 165, 165]
		    Orientation		    "up"
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    ".001"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    Position		    [185, 88, 215, 112]
		    Operator		    "<"
		    }
		    Block {
		    BlockType		    Stop
		    Name		    "Stop Simulation"
		    Position		    [255, 83, 295, 117]
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "Stop Simulation"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "SOC"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Const"
		    SrcPort		    1
		    Points		    [0, -35]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  Ports			  []
		  Position		  [640, 350, 696, 390]
		  BackgroundColor	  "green"
		  ShowName		  off
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [254, 542, 739, 847]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Annotation {
		    Position		    [242, 146]
		    Text		    "This block models the energy stor"
"age system as an SOC-dependent voltage\nin series with an SOC- and current di"
"rection-dependent internal resistance.\nSOC is computed assuming that A-h cap"
"acity is constant, but limited\nsuch that a minimum voltage is never exceeded"
" (replacing the \nprevious Peukert relationship which underpredicted battery "
"capacity).\n\nDischarge power is limited here so as not to bring the bus (bat"
"tery pack) voltage below\nthe minimum controller voltage or the minimum batte"
"ry voltage and so as to allow \nthe solution of the quadratic eq'n for discha"
"rge current.\n\nCharge current is limited to ensure the voltage does not exce"
"ed a maximum\nvoltage\n\nPositive current is discharge current in the convent"
"ion used here.\nPower loss is computed as I*R+losses due to Coulombic (in)eff"
"iciency.\n\nThermal modeling of the battery performance is modeled in the\nOC"
"V, Rint, and capacity."
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Const"
		  Position		  [385, 25, 455, 45]
		  Orientation		  "down"
		  ShowName		  off
		  FontName		  "Arial"
		  Value			  "enable_stop"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto <cs>"
		  Position		  [690, 280, 740, 300]
		  BackgroundColor	  "lightBlue"
		  ShowName		  off
		  GotoTag		  "ess_tmp"
		  TagVisibility		  "scoped"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto <mc>, <gc>, <sdo>"
		  Position		  [380, 200, 460, 220]
		  BackgroundColor	  "lightBlue"
		  ShowName		  off
		  GotoTag		  "bus_voltage"
		  TagVisibility		  "scoped"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto <sdo>, <cs>"
		  Position		  [410, 164, 455, 186]
		  BackgroundColor	  "lightBlue"
		  ShowName		  off
		  GotoTag		  "SOC"
		  TagVisibility		  "scoped"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  Position		  [625, 215, 640, 235]
		  ShowName		  off
		  X0			  "ess_mod_init_tmp"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Model Parameters"
		  Ports			  [3, 5]
		  Position		  [75, 114, 170, 226]
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "Model Parameters"
		    Location		    [140, 501, 507, 892]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "SOC"
		    Position		    [45, 155, 65, 175]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Ess Temp"
		    Position		    [55, 40, 75, 60]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Preq"
		    Position		    [45, 335, 65, 355]
		    Port		    "3"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [95, 335, 115, 355]
		    }
		    Block {
		    BlockType		    Lookup
		    Name		    "cb"
		    Position		    [175, 35, 205, 65]
		    InputValues		    "ess_tmp"
		    OutputValues	    "ess_cb"
		    }
		    Block {
		    BlockType		    Lookup
		    Name		    "cc"
		    Position		    [175, 85, 205, 115]
		    InputValues		    "ess_tmp"
		    OutputValues	    "ess_cc"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "rc"
		    Ports		    [2, 1]
		    Position		    [175, 203, 205, 227]
		    ShowPortLabels	    off
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "2-D Table Lookup"
		    MaskDescription	    "Two Dimensional Table Lookup\nThe"
" first input corresponds to X Index and the second input corresponds to the Y"
" Index"
		    MaskHelp		    "This block returns a linearly int"
"erpolated intersection from the table using the X index (which corresponds to"
" the rows of the table) and the Y index (which corresponds to the columns of "
"the table).  Extrapolation is used."
		    MaskPromptString	    "X Index|Y Index|Table"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskInitialization	    "xindex=@1; yindex=@2; table=@3; s"
"ftab2chk(xindex,yindex,table);"
		    MaskDisplay		    "plot(-10,-10,110,110,[90,50,10],["
"90,40,30],[90,50,10],[50,26,20],[90,50,10],[22,13,10])"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "ess_tmp|ess_soc|ess_rc"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "rc"
		    Location		    [316, 263, 598, 417]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "x0"
		    Position		    [20, 25, 40, 45]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "y0"
		    Position		    [20, 80, 40, 100]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [2, 1]
		    Position		    [90, 46, 120, 79]
		    Inputs		    "2"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    "S-Function"
		    Name		    "S-function"
		    Ports		    [1, 1]
		    Position		    [140, 52, 190, 78]
		    FunctionName	    "sftable2"
		    Parameters		    "xindex, yindex, table"
		    PortCounts		    "[]"
		    SFunctionModules	    "''"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "table out"
		    Position		    [215, 55, 235, 75]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "y0"
		    SrcPort		    1
		    Points		    [20, 0; 0, -20]
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "S-function"
		    SrcPort		    1
		    DstBlock		    "table out"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "x0"
		    SrcPort		    1
		    Points		    [20, 0; 0, 20]
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "S-function"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "re"
		    Ports		    [2, 1]
		    Position		    [175, 148, 205, 172]
		    ShowPortLabels	    off
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "2-D Table Lookup"
		    MaskDescription	    "Two Dimensional Table Lookup\nThe"
" first input corresponds to X Index and the second input corresponds to the Y"
" Index"
		    MaskHelp		    "This block returns a linearly int"
"erpolated intersection from the table using the X index (which corresponds to"
" the rows of the table) and the Y index (which corresponds to the columns of "
"the table).  Extrapolation is used."
		    MaskPromptString	    "X Index|Y Index|Table"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskInitialization	    "xindex=@1; yindex=@2; table=@3; s"
"ftab2chk(xindex,yindex,table);"
		    MaskDisplay		    "plot(-10,-10,110,110,[90,50,10],["
"90,40,30],[90,50,10],[50,26,20],[90,50,10],[22,13,10])"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "ess_tmp|ess_soc|ess_re"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "re"
		    Location		    [318, 265, 600, 419]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "x0"
		    Position		    [20, 25, 40, 45]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "y0"
		    Position		    [20, 80, 40, 100]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [2, 1]
		    Position		    [90, 46, 120, 79]
		    Inputs		    "2"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    "S-Function"
		    Name		    "S-function"
		    Ports		    [1, 1]
		    Position		    [140, 52, 190, 78]
		    FunctionName	    "sftable2"
		    Parameters		    "xindex, yindex, table"
		    PortCounts		    "[]"
		    SFunctionModules	    "''"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "table out"
		    Position		    [215, 55, 235, 75]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "S-function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "x0"
		    SrcPort		    1
		    Points		    [20, 0; 0, 20]
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "S-function"
		    SrcPort		    1
		    DstBlock		    "table out"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "y0"
		    SrcPort		    1
		    Points		    [20, 0; 0, -20]
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "rt"
		    Ports		    [2, 1]
		    Position		    [175, 263, 205, 287]
		    ShowPortLabels	    off
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "2-D Table Lookup"
		    MaskDescription	    "Two Dimensional Table Lookup\nThe"
" first input corresponds to X Index and the second input corresponds to the Y"
" Index"
		    MaskHelp		    "This block returns a linearly int"
"erpolated intersection from the table using the X index (which corresponds to"
" the rows of the table) and the Y index (which corresponds to the columns of "
"the table).  Extrapolation is used."
		    MaskPromptString	    "X Index|Y Index|Table"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskInitialization	    "xindex=@1; yindex=@2; table=@3; s"
"ftab2chk(xindex,yindex,table);"
		    MaskDisplay		    "plot(-10,-10,110,110,[90,50,10],["
"90,40,30],[90,50,10],[50,26,20],[90,50,10],[22,13,10])"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "ess_tmp|ess_soc|ess_rt"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "rt"
		    Location		    [316, 263, 598, 417]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "x0"
		    Position		    [20, 25, 40, 45]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "y0"
		    Position		    [20, 80, 40, 100]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [2, 1]
		    Position		    [90, 46, 120, 79]
		    Inputs		    "2"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    "S-Function"
		    Name		    "S-function"
		    Ports		    [1, 1]
		    Position		    [140, 52, 190, 78]
		    FunctionName	    "sftable2"
		    Parameters		    "xindex, yindex, table"
		    PortCounts		    "[]"
		    SFunctionModules	    "''"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "table out"
		    Position		    [215, 55, 235, 75]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "S-function"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "x0"
		    SrcPort		    1
		    Points		    [20, 0; 0, 20]
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "S-function"
		    SrcPort		    1
		    DstBlock		    "table out"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "y0"
		    SrcPort		    1
		    Points		    [20, 0; 0, -20]
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Cb"
		    Position		    [255, 40, 275, 60]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Cc"
		    Position		    [255, 90, 275, 110]
		    Port		    "2"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Re"
		    Position		    [255, 150, 275, 170]
		    Port		    "3"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Rc"
		    Position		    [255, 205, 275, 225]
		    Port		    "4"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Rt"
		    Position		    [255, 265, 275, 285]
		    Port		    "5"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "rc"
		    SrcPort		    1
		    DstBlock		    "Rc"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "rt"
		    SrcPort		    1
		    DstBlock		    "Rt"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "re"
		    SrcPort		    1
		    DstBlock		    "Re"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "cc"
		    SrcPort		    1
		    DstBlock		    "Cc"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "cb"
		    SrcPort		    1
		    DstBlock		    "Cb"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "SOC"
		    SrcPort		    1
		    Points		    [60, 0]
		    Branch {
		    Points		    [0, 55]
		    Branch {
		    Points		    [0, 60]
		    DstBlock		    "rt"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "rc"
		    DstPort		    2
		    }
		    }
		    Branch {
		    DstBlock		    "re"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Preq"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Ess Temp"
		    SrcPort		    1
		    Points		    [60, 0]
		    Branch {
		    Points		    [0, 50]
		    Branch {
		    Points		    [0, 55]
		    Branch {
		    Points		    [0, 55]
		    Branch {
		    Points		    [0, 60]
		    DstBlock		    "rt"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "rc"
		    DstPort		    1
		    }
		    }
		    Branch {
		    DstBlock		    "re"
		    DstPort		    1
		    }
		    }
		    Branch {
		    DstBlock		    "cc"
		    DstPort		    1
		    }
		    }
		    Branch {
		    DstBlock		    "cb"
		    DstPort		    1
		    }
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "RC model"
		  Ports			  [7, 4]
		  Position		  [240, 123, 335, 257]
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "RC model"
		    Location		    [71, 196, 928, 766]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Cb"
		    Position		    [55, 70, 75, 90]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Cc"
		    Position		    [55, 125, 75, 145]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Re"
		    Position		    [55, 180, 75, 200]
		    Port		    "3"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Rc"
		    Position		    [55, 235, 75, 255]
		    Port		    "4"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Rt"
		    Position		    [55, 290, 75, 310]
		    Port		    "5"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Preq"
		    Position		    [55, 345, 75, 365]
		    Port		    "6"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Ess Temp"
		    Position		    [60, 400, 80, 420]
		    Port		    "7"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "#mods"
		    Position		    [495, 73, 645, 117]
		    Gain		    "ess_module_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "#mods1"
		    Position		    [495, 173, 645, 217]
		    Gain		    "ess_module_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "#mods2"
		    Position		    [495, 223, 645, 267]
		    Gain		    "ess_module_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "#mods3"
		    Position		    [465, 273, 615, 317]
		    Gain		    "ess_module_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "#mods4"
		    Position		    [465, 323, 615, 367]
		    Gain		    "ess_module_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "1/#mods"
		    Position		    [100, 333, 250, 377]
		    Gain		    "1/ess_module_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Demux
		    Name		    "Demux1"
		    Ports		    [1, 7]
		    Position		    [440, 66, 445, 424]
		    BackgroundColor	    "black"
		    Outputs		    "7"
		    BusSelectionMode	    off
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <cs>1"
		    Position		    [675, 285, 755, 305]
		    BackgroundColor	    "lightBlue"
		    ShowName		    off
		    GotoTag		    "ess_max_pwr"
		    TagVisibility	    "scoped"
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <cs>2"
		    Position		    [670, 335, 775, 355]
		    BackgroundColor	    "lightBlue"
		    ShowName		    off
		    GotoTag		    "ess_max_chg_pwr"
		    TagVisibility	    "scoped"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    Position		    [530, 135, 545, 155]
		    ShowName		    off
		    X0			    "ess_init_soc"
		    InheritSampleTime	    off
		    RTWStateStorageClass    "Auto"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory2"
		    Position		    [635, 335, 650, 355]
		    ShowName		    off
		    X0			    "0"
		    InheritSampleTime	    off
		    RTWStateStorageClass    "Auto"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory3"
		    Position		    [640, 285, 655, 305]
		    ShowName		    off
		    X0			    "0"
		    InheritSampleTime	    off
		    RTWStateStorageClass    "Auto"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux2"
		    Ports		    [7, 1]
		    Position		    [295, 48, 300, 442]
		    Inputs		    "7"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    "S-Function"
		    Name		    "RC model\nof one module"
		    Ports		    [1, 1]
		    Position		    [330, 230, 390, 260]
		    FunctionName	    "RC"
		    Parameters		    "ess_min_volts,ess_max_volts,mc_mi"
"n_volts/ess_module_num,ess_soc,ess_tmp,ess_voc,ess_init_soc,ess_mod_init_tmp"
		    PortCounts		    "[]"
		    SFunctionModules	    "''"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "enhancedToWorkspace6"
		    Ports		    [1]
		    Position		    [665, 386, 740, 404]
		    ShowName		    off
		    CopyFcn		    "breakLinkCopyFcn"
		    ParentCloseFcn	    "breakLinkParCloseFcn"
		    FontSize		    8
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    on
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "enhancedToWorkspace"
		    MaskDescription	    "A wrapper for the Simulink \"To W"
"orkspace\" block that allows you to evaluate the name of the variable to log "
"to workspace. This is useful to avoid the double logging errors that occur wh"
"en you pull in two library models that attempt to log to the same variable."
		    MaskHelp		    "<h2>Enhanced To Workspace Block</"
"h2>\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gen"
"eral name of the variable. Variables are saved to the workspace as <i>general"
"Name_specificName</i>. Note that this is an evaluated variable. If you would "
"like to type in the value directly, it must be surrounded with single quotes."
" Otherwise you can input the name of a variable containing a char string.</li"
">\n<li><b>Specific Name:</b> This is the specific name of the variable. Note "
"that this is input as a char literal (i.e., you don't need quotes).</li>\n<li"
"><b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the var"
"iable will not be logged to the workspace. If 1, the variable will be logged."
" This is done so that variable logging can be turned off to improve speed.</l"
"i>\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toge"
"ther to allow one to dynamically resolve variable names at run time in simuli"
"nk. This is most powerful when used in conjunction with a masked subsystem to"
" allow multiple instances of that masked subsytem to be used in the same mode"
"l. The strategy is to set the generalName in the block mask which will allow "
"the block to change the general name for all variable logging on the fly. \n<"
"h3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspac"
"e block. These files are located in the &lt; ADVISOR root &gt;/GUI directory "
":\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initializatio"
"n for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the "
"block callback when the simulink block is copied. It is necessary to break th"
"e link to the enhancedToWorkspace similar to the To Workspace block in order "
"for it to be able to configure itself. (Try copying simulink's To Workspace b"
"lock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i"
"> This file is similar to the breakLinkCopyFcn and is used when a parent syst"
"em is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'K"
"eefe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</"
"B> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type"
"</B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</"
"UL>\n</VARDEF>\n-->\n"
		    MaskPromptString	    "General Name [char-evaluated]|Spe"
"cific Name [char-literal]|Enable flag (1=on,0=off)"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskVariables	    "generalName=@1;specificName=&2;lo"
"gFlag=@3;"
		    MaskInitialization	    "enhancedToWsMaker"
		    MaskDisplay		    "disp([generalName,'_',specificNam"
"e])"
		    MaskSelfModifiable	    on
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "generalName|current|logFlag"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "enhancedToWorkspace6"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Pavailable"
		    Position		    [705, 85, 725, 105]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "SOC"
		    Position		    [705, 135, 725, 155]
		    Port		    "2"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Vout"
		    Position		    [705, 185, 725, 205]
		    Port		    "3"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Qess_gen"
		    Position		    [705, 235, 725, 255]
		    Port		    "4"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "RC model\nof one module"
		    SrcPort		    1
		    DstBlock		    "Demux1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "#mods2"
		    SrcPort		    1
		    DstBlock		    "Qess_gen"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux1"
		    SrcPort		    4
		    DstBlock		    "#mods2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "#mods1"
		    SrcPort		    1
		    DstBlock		    "Vout"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux1"
		    SrcPort		    3
		    DstBlock		    "#mods1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "#mods"
		    SrcPort		    1
		    DstBlock		    "Pavailable"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux1"
		    SrcPort		    1
		    DstBlock		    "#mods"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "1/#mods"
		    SrcPort		    1
		    DstBlock		    "Mux2"
		    DstPort		    6
		    }
		    Line {
		    SrcBlock		    "Preq"
		    SrcPort		    1
		    DstBlock		    "1/#mods"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux2"
		    SrcPort		    1
		    DstBlock		    "RC model\nof one module"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Rt"
		    SrcPort		    1
		    DstBlock		    "Mux2"
		    DstPort		    5
		    }
		    Line {
		    SrcBlock		    "Rc"
		    SrcPort		    1
		    DstBlock		    "Mux2"
		    DstPort		    4
		    }
		    Line {
		    SrcBlock		    "Re"
		    SrcPort		    1
		    DstBlock		    "Mux2"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Cc"
		    SrcPort		    1
		    DstBlock		    "Mux2"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Cb"
		    SrcPort		    1
		    DstBlock		    "Mux2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Ess Temp"
		    SrcPort		    1
		    DstBlock		    "Mux2"
		    DstPort		    7
		    }
		    Line {
		    SrcBlock		    "Demux1"
		    SrcPort		    7
		    DstBlock		    "enhancedToWorkspace6"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux1"
		    SrcPort		    6
		    DstBlock		    "#mods4"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory2"
		    SrcPort		    1
		    DstBlock		    "Goto <cs>2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux1"
		    SrcPort		    5
		    DstBlock		    "#mods3"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory3"
		    SrcPort		    1
		    DstBlock		    "Goto <cs>1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux1"
		    SrcPort		    2
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    DstBlock		    "SOC"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "#mods3"
		    SrcPort		    1
		    DstBlock		    "Memory3"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "#mods4"
		    SrcPort		    1
		    DstBlock		    "Memory2"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Thermal Model\nof Battery"
		  Ports			  [1, 3, 1]
		  Position		  [515, 218, 605, 272]
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "Thermal Model\nof Battery"
		    Location		    [435, 254, 950, 524]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Qess_gen"
		    Position		    [25, 205, 45, 225]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [390, 217, 420, 243]
		    StatesWhenEnabling	    "reset"
		    ShowOutputPort	    off
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "#of mods"
		    Position		    [390, 88, 415, 112]
		    Gain		    "ess_module_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "1/#of mods"
		    Position		    [95, 203, 120, 227]
		    Gain		    "1/ess_module_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "1/mcp"
		    Position		    [380, 153, 405, 177]
		    Gain		    "1/(ess_module_mass*ess_mod_cp)"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Block NOTES"
		    Ports		    []
		    Position		    [445, 220, 501, 260]
		    BackgroundColor	    "green"
		    ShowName		    off
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskDisplay		    "disp('Block\\nNOTES')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "Block NOTES"
		    Location		    [505, 510, 924, 573]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Annotation {
		    Position		    [207, 33]
		    Text		    "This block models the thermal beh"
"avior of a battery module with active air cooling.\nThe module is modeled as "
"a single lumped thermal mass.  \nThe fan is on whenever the battery temp is >"
" the set temp."
		    }
		    }
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    Position		    [250, 165, 285, 185]
		    Orientation		    "left"
		    FontName		    "Arial"
		    X0			    "cyc_mph(1,2)*.447"
		    InheritSampleTime	    off
		    RTWStateStorageClass    "Auto"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    Position		    [100, 30, 135, 50]
		    Orientation		    "left"
		    FontName		    "Arial"
		    X0			    "cyc_mph(1,2)*.447"
		    InheritSampleTime	    off
		    RTWStateStorageClass    "Auto"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux20"
		    Ports		    [3, 1]
		    Position		    [195, 84, 200, 156]
		    NamePlacement	    "alternate"
		    ShowName		    off
		    Inputs		    "3"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Qc"
		    Ports		    [2, 1]
		    Position		    [350, 114, 360, 221]
		    ShowName		    off
		    IconShape		    "rectangular"
		    Inputs		    "++"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Qess_case"
		    Position		    [235, 108, 315, 132]
		    NamePlacement	    "alternate"
		    FontName		    "Arial"
		    Expr		    "(u(2) - u(1))/u(3)"
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    "Saturation3"
		    Position		    [190, 29, 200, 51]
		    Orientation		    "left"
		    ShowName		    off
		    UpperLimit		    "1"
		    LowerLimit		    "0"
		    LinearizeAsGain	    on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Tair,ave"
		    Ports		    [1, 2, 1]
		    Position		    [30, 107, 140, 158]
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    on
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    System {
		    Name		    "Tair,ave"
		    Location		    [347, 78, 747, 306]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Qess_case"
		    Position		    [45, 35, 65, 55]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [265, 167, 295, 193]
		    StatesWhenEnabling	    "reset"
		    ShowOutputPort	    off
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Block NOTES"
		    Ports		    []
		    Position		    [325, 165, 381, 205]
		    BackgroundColor	    "green"
		    ShowName		    off
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskDisplay		    "disp('Block\\nNOTES')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "Block NOTES"
		    Location		    [505, 510, 924, 573]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Annotation {
		    Position		    [207, 33]
		    Text		    "This block determins the average "
"temperature of the cooling air over the module."
		    }
		    }
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Tamb-(Q/mcp)/2"
		    Position		    [90, 34, 330, 56]
		    Expr		    "amb_tmp - (u(1)/(ess_mod_airflow*"
"air_cp))/2 "
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "do ex calcs?1"
		    Position		    [35, 105, 115, 125]
		    ShowName		    off
		    Value		    "ess_th_res_on"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Tair_ave"
		    Position		    [355, 35, 375, 55]
		    Port		    "1"
		    OutputWhenDisabled	    "reset"
		    InitialOutput	    "amb_tmp"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Th Res"
		    Position		    [355, 105, 375, 125]
		    Port		    "2"
		    OutputWhenDisabled	    "reset"
		    InitialOutput	    "ess_th_res_off"
		    }
		    Line {
		    SrcBlock		    "do ex calcs?1"
		    SrcPort		    1
		    DstBlock		    "Th Res"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Qess_case"
		    SrcPort		    1
		    DstBlock		    "Tamb-(Q/mcp)/2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Tamb-(Q/mcp)/2"
		    SrcPort		    1
		    DstBlock		    "Tair_ave"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Integrator
		    Name		    "Tess2"
		    Ports		    [1, 1]
		    Position		    [420, 155, 440, 175]
		    ExternalReset	    "none"
		    InitialConditionSource  "internal"
		    InitialCondition	    "ess_mod_init_tmp"
		    LimitOutput		    off
		    UpperSaturationLimit    "inf"
		    LowerSaturationLimit    "-inf"
		    ShowSaturationPort	    off
		    ShowStatePort	    off
		    AbsoluteTolerance	    "auto"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "thermostat"
		    Position		    [235, 29, 340, 51]
		    Orientation		    "left"
		    NamePlacement	    "alternate"
		    FontName		    "Arial"
		    Expr		    "u(1) - ess_set_tmp"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Tess"
		    Position		    [470, 155, 490, 175]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Tair"
		    Position		    [470, 60, 490, 80]
		    NamePlacement	    "alternate"
		    Port		    "2"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "[]"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Qair"
		    Position		    [470, 90, 490, 110]
		    Port		    "3"
		    OutputWhenDisabled	    "reset"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Tair,ave"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    Points		    [0, -50]
		    DstBlock		    "Tair"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Mux20"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Tair,ave"
		    SrcPort		    2
		    DstBlock		    "Mux20"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Mux20"
		    SrcPort		    1
		    DstBlock		    "Qess_case"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "#of mods"
		    SrcPort		    1
		    DstBlock		    "Qair"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    Points		    [-230, 0]
		    DstBlock		    "Tair,ave"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [-10, 0]
		    DstBlock		    "Tair,ave"
		    DstPort		    enable
		    }
		    Line {
		    SrcBlock		    "Saturation3"
		    SrcPort		    1
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "thermostat"
		    SrcPort		    1
		    DstBlock		    "Saturation3"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "1/#of mods"
		    SrcPort		    1
		    Points		    [210, 0]
		    DstBlock		    "Qc"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Qess_gen"
		    SrcPort		    1
		    DstBlock		    "1/#of mods"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Tess2"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    Points		    [0, -85; -80, 0]
		    Branch {
		    Points		    [0, -40]
		    DstBlock		    "thermostat"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [-185, 0]
		    DstBlock		    "Mux20"
		    DstPort		    1
		    }
		    }
		    Branch {
		    DstBlock		    "Tess"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "1/mcp"
		    SrcPort		    1
		    DstBlock		    "Tess2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Qess_case"
		    SrcPort		    1
		    Points		    [5, 0]
		    Branch {
		    Points		    [0, -20]
		    DstBlock		    "#of mods"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 55]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [10, 0]
		    DstBlock		    "Qc"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Qc"
		    SrcPort		    1
		    DstBlock		    "1/mcp"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "do ex calcs?"
		  Position		  [530, 190, 590, 205]
		  Orientation		  "down"
		  ShowName		  off
		  Value			  "ess_th_calc"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "documentation9"
		  Ports			  []
		  Position		  [710, 351, 739, 390]
		  BackgroundColor	  "orange"
		  DropShadow		  on
		  ShowName		  off
		  OpenFcn		  "web(['file:\\\\\\' which('energy_st"
"orage.htm')]);"
		  ShowPortLabels	  off
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskDisplay		  "image(imread('doc_man.jpg'))"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "documentation9"
		    Location		    [129, 62, 308, 146]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace"
		  Ports			  [1]
		  Position		  [135, 276, 210, 294]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|pwr_out_r|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace1"
		  Ports			  [1]
		  Position		  [312, 295, 388, 315]
		  Orientation		  "down"
		  NamePlacement		  "alternate"
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|pwr_loss_a|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace1"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace2"
		  Ports			  [1]
		  Position		  [385, 256, 460, 274]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|voltage|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace2"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace3"
		  Ports			  [1]
		  Position		  [670, 256, 745, 274]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|air_th_pwr|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace3"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace4"
		  Ports			  [1]
		  Position		  [670, 236, 745, 254]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|air_tmp|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace4"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace5"
		  Ports			  [1]
		  Position		  [670, 216, 745, 234]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|mod_tmp|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace5"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace6"
		  Ports			  [1]
		  Position		  [665, 71, 740, 89]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|pwr_out_a|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace6"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "power available\nto bus (W)"
		  Position		  [675, 130, 695, 150]
		  FontName		  "Arial"
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "RC model"
		  SrcPort		  1
		  Points		  [0, 0; 285, 0]
		  Branch {
		    DstBlock		    "power available\nto bus (W)"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -60]
		    DstBlock		    "enhancedToWorkspace6"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "do ex calcs?"
		  SrcPort		  1
		  DstBlock		  "Thermal Model\nof Battery"
		  DstPort		  enable
		}
		Line {
		  SrcBlock		  "Thermal Model\nof Battery"
		  SrcPort		  2
		  DstBlock		  "enhancedToWorkspace4"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Thermal Model\nof Battery"
		  SrcPort		  3
		  DstBlock		  "enhancedToWorkspace3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Thermal Model\nof Battery"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [0, 0; 10, 0]
		  Branch {
		    Points		    [0, 65]
		    Branch {
		    Points		    [0, 35; -430, 0]
		    Branch {
		    DstBlock		    "RC model"
		    DstPort		    7
		    }
		    Branch {
		    Points		    [-200, 0; 0, -155]
		    DstBlock		    "Model Parameters"
		    DstPort		    2
		    }
		    }
		    Branch {
		    DstBlock		    "Goto <cs>"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "enhancedToWorkspace5"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Const"
		  SrcPort		  1
		  DstBlock		  "Allow simulation\nto stop based on "
"\nlow SOC"
		  DstPort		  enable
		}
		Line {
		  SrcBlock		  "RC model"
		  SrcPort		  2
		  Points		  [0, 0; 15, 0]
		  Branch {
		    DstBlock		    "Goto <sdo>, <cs>"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -70]
		    Branch {
		    Points		    [20, 0]
		    DstBlock		    "Allow simulation\nto stop based o"
"n \nlow SOC"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [-295, 0]
		    DstBlock		    "Model Parameters"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "RC model"
		  SrcPort		  4
		  Points		  [0, 0; 10, 0]
		  Branch {
		    DstBlock		    "Thermal Model\nof Battery"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "enhancedToWorkspace1"
		    DstPort		    1
		  }
		}
		Line {
		  Labels		  [2, 0]
		  SrcBlock		  "power req'd\ninto bus (W)"
		  SrcPort		  1
		  Points		  [0, 0; 0, -15]
		  Branch {
		    Points		    [-40, 0]
		    DstBlock		    "Model Parameters"
		    DstPort		    3
		  }
		  Branch {
		    Points		    [20, 0]
		    Branch {
		    DstBlock		    "enhancedToWorkspace"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [75, 0; 0, -25]
		    DstBlock		    "RC model"
		    DstPort		    6
		    }
		  }
		}
		Line {
		  SrcBlock		  "Model Parameters"
		  SrcPort		  5
		  DstBlock		  "RC model"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "Model Parameters"
		  SrcPort		  4
		  DstBlock		  "RC model"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Model Parameters"
		  SrcPort		  3
		  DstBlock		  "RC model"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Model Parameters"
		  SrcPort		  2
		  DstBlock		  "RC model"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Model Parameters"
		  SrcPort		  1
		  DstBlock		  "RC model"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "RC model"
		  SrcPort		  3
		  Points		  [0, 0; 15, 0]
		  Branch {
		    DstBlock		    "Goto <mc>, <gc>, <sdo>"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 55]
		    DstBlock		    "enhancedToWorkspace2"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "signal\nannotator"
	      Ports		      [1, 1]
	      Position		      [345, 46, 390, 74]
	      NamePlacement	      "alternate"
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"signal\nannotator"
		Location		[253, 77, 966, 762]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "In1"
		  Position		  [110, 103, 140, 117]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		  Port {
		    PortNumber		    1
		    Name		    "ess_pwr_out_r"
		    TestPoint		    off
		    LinearAnalysisOutput    off
		    LinearAnalysisInput	    off
		    RTWStorageClass	    "Auto"
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  Position		  [430, 103, 460, 117]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "[]"
		}
		Line {
		  Name			  "ess_pwr_out_r"
		  Labels		  [0, 0]
		  SrcBlock		  "In1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "required out"
	      Position		      [470, 50, 490, 70]
	      FontName		      "Arial"
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "power available\nto bus (W)"
	      Position		      [300, 100, 320, 120]
	      FontName		      "Arial"
	      Port		      "2"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "sensors"
	      Position		      [575, 285, 595, 305]
	      FontName		      "Arial"
	      Port		      "3"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "power req'd\ninto bus (W)"
	      SrcPort		      1
	      Points		      [0, 0; 35, 0]
	      Branch {
		Points			[0, -50]
		DstBlock		"signal\nannotator"
		DstPort			1
	      }
	      Branch {
		DstBlock		"model"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "model"
	      SrcPort		      1
	      DstBlock		      "power available\nto bus (W)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "control"
	      SrcPort		      1
	      DstBlock		      "Terminator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Bus\nCreator"
	      SrcPort		      1
	      DstBlock		      "sensors"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "signal\nannotator"
	      SrcPort		      1
	      DstBlock		      "required out"
	      DstPort		      1
	    }
	    Line {
	      Name		      "ess_tmp"
	      Labels		      [0, 0]
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      1
	    }
	    Line {
	      Name		      "bus_voltage"
	      Labels		      [0, 0]
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      2
	    }
	    Line {
	      Name		      "ess_max_chg_pwr"
	      Labels		      [-1, 0]
	      SrcBlock		      "From3"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      3
	    }
	    Line {
	      Name		      "ess_max_pwr"
	      Labels		      [0, 0]
	      SrcBlock		      "From2"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      4
	    }
	    Line {
	      Name		      "SOC"
	      Labels		      [0, 0]
	      SrcBlock		      "From5"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      5
	    }
	    Annotation {
	      Position		      [217, 180]
	      BackgroundColor	      "yellow"
	      Text		      "Interface"
	      FontName		      "Arial"
	      FontSize		      22
	      FontWeight	      "bold"
	      FontAngle		      "italic"
	    }
	    Annotation {
	      Position		      [222, 30]
	      BackgroundColor	      "yellow"
	      Text		      "Model"
	      FontName		      "Arial"
	      FontSize		      22
	      FontWeight	      "bold"
	      FontAngle		      "italic"
	    }
	  }
	}
	Block {
	  BlockType		  Goto
	  Name			  "reqOutTag"
	  Position		  [365, 124, 465, 166]
	  ForegroundColor	  "red"
	  BackgroundColor	  "black"
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	  GotoTag		  "essReqOut"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "sensorsTag"
	  Position		  [365, 274, 465, 316]
	  ForegroundColor	  "red"
	  BackgroundColor	  "black"
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	  GotoTag		  "essSensors"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Outport
	  Name			  "power available\nto bus (W)"
	  Position		  [425, 210, 445, 230]
	  FontName		  "Arial"
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Line {
	  SrcBlock		  "power req'd\ninto bus (W)"
	  SrcPort		  1
	  DstBlock		  "energy\nstorage <ess>\nRC"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "controlTag"
	  SrcPort		  1
	  Points		  [15, 0; 0, -65]
	  DstBlock		  "energy\nstorage <ess>\nRC"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "energy\nstorage <ess>\nRC"
	  SrcPort		  1
	  Points		  [40, 0]
	  DstBlock		  "reqOutTag"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "energy\nstorage <ess>\nRC"
	  SrcPort		  2
	  DstBlock		  "power available\nto bus (W)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "energy\nstorage <ess>\nRC"
	  SrcPort		  3
	  Points		  [25, 0; 0, 60]
	  DstBlock		  "sensorsTag"
	  DstPort		  1
	}
	Annotation {
	  Position		  [297, 40]
	  BackgroundColor	  "yellow"
	  Text			  "Energy Storage System"
	  FontName		  "Arial"
	  FontSize		  18
	  FontWeight		  "bold"
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "energy\nstorage <ess>\nnnet"
      Ports		      [1, 1]
      Position		      [190, 148, 255, 192]
      BackgroundColor	      "yellow"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskType		      "Stand-Alone Energy Storage System Mask"
      MaskPromptString	      "General Name of this Component [char]|Log Varia"
"bles to Workspace?|Initialization File(s) [cell array of char]|Modification C"
"ell [2 column cell array of param and val]|Icon image file name [char--evalua"
"ted]|DEBUG"
      MaskStyleString	      "edit,popup(Don't Log|Log Variable),edit,edit,ed"
"it,popup(ON|OFF)"
      MaskTunableValueString  "on,on,on,on,on,on"
      MaskCallbackString      "|||||"
      MaskEnableString	      "on,on,on,on,on,on"
      MaskVisibilityString    "on,on,on,on,on,on"
      MaskToolTipString	      "on,on,on,on,on,on"
      MaskVariables	      "generalName=@1;logPick=@2;initFileName=@3;modCe"
"ll=@4;imgFileName=@5;DEBUG=&6;"
      MaskInitialization      "% initialization via m-file script\nadvSACompMa"
"skInit;"
      MaskDisplay	      "image(imread(imgFileName))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      MaskValueString	      "'ess'|Log Variable|{}|{}|'bdi_ess.jpg'|OFF"
      MaskVariableAliases     ",,,,,"
      System {
	Name			"energy\nstorage <ess>\nnnet"
	Location		[202, 77, 966, 744]
	Open			off
	ModelBrowserVisibility	on
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "power req'd\ninto bus (W)"
	  Position		  [140, 200, 160, 220]
	  FontName		  "Arial"
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Block NOTES"
	  Ports			  []
	  Position		  [75, 90, 131, 130]
	  BackgroundColor	  "green"
	  ShowName		  off
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "disp('Block\\nNOTES')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Block NOTES"
	    Location		    [256, 329, 741, 634]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Annotation {
	      Position		      [242, 146]
	      Text		      "This is a stand-alone version of an ene"
"rgy storage system\n\nSeveral different models are available"
	    }
	  }
	}
	Block {
	  BlockType		  From
	  Name			  "controlTag"
	  Position		  [80, 276, 190, 314]
	  ForegroundColor	  "red"
	  BackgroundColor	  "black"
	  CloseFcn		  "tagdialog Close"
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	  GotoTag		  "essControl"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "documentation9"
	  Ports			  []
	  Position		  [145, 91, 174, 130]
	  BackgroundColor	  "orange"
	  DropShadow		  on
	  ShowName		  off
	  OpenFcn		  "web(['file:\\\\\\' which('energy_storage.ht"
"m')]);"
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "documentation9"
	    Location		    [129, 62, 308, 146]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "energy\nstorage <ess>\nnnet"
	  Ports			  [2, 3]
	  Position		  [240, 196, 305, 244]
	  ForegroundColor	  "magenta"
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('bdi_ess.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "energy\nstorage <ess>\nnnet"
	    Location		    [67, 197, 1095, 788]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "power req'd\ninto bus (W)"
	      Position		      [145, 110, 165, 130]
	      FontName		      "Arial"
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "control"
	      Position		      [45, 355, 65, 375]
	      FontName		      "Arial"
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      BusCreator
	      Name		      "Bus\nCreator"
	      Ports		      [8, 1]
	      Position		      [595, 220, 620, 515]
	      ShowName		      off
	      Inputs		      "8"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      Position		      [355, 233, 440, 257]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "bus_voltage"
	      Port {
		PortNumber		1
		Name			"bus_voltage"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From10"
	      Position		      [355, 443, 455, 467]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_pwr_limited"
	      Port {
		PortNumber		1
		Name			"ess_pwr_limited"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From11"
	      Position		      [355, 478, 455, 502]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_minV_limited"
	      Port {
		PortNumber		1
		Name			"ess_minV_limited"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From2"
	      Position		      [355, 268, 455, 292]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_max_pwr"
	      Port {
		PortNumber		1
		Name			"ess_max_pwr"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From5"
	      Position		      [355, 303, 455, 327]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	      Port {
		PortNumber		1
		Name			"SOC"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From6"
	      Position		      [355, 338, 455, 362]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_maxV_limited"
	      Port {
		PortNumber		1
		Name			"ess_maxV_limited"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From7"
	      Position		      [355, 373, 455, 397]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_soc_limited"
	      Port {
		PortNumber		1
		Name			"ess_soc_limited"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From9"
	      Position		      [355, 408, 455, 432]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "mc_voltage_limited"
	      Port {
		PortNumber		1
		Name			"mc_voltage_limited"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility1"
	      Position		      [260, 232, 345, 254]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "bus_voltage"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility10"
	      Position		      [242, 407, 345, 429]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "mc_voltage_limited"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility11"
	      Position		      [260, 442, 345, 464]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_pwr_limited"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility12"
	      Position		      [248, 477, 345, 499]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_minV_limited"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility2"
	      Position		      [260, 267, 345, 289]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_max_pwr"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility6"
	      Position		      [260, 302, 345, 324]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility7"
	      Position		      [246, 337, 345, 359]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_maxV_limited"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility8"
	      Position		      [251, 372, 345, 395]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_soc_limited"
	    }
	    Block {
	      BlockType		      Terminator
	      Name		      "Terminator"
	      Position		      [95, 355, 115, 375]
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "model"
	      Ports		      [1, 1]
	      Position		      [230, 90, 270, 150]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"model"
		Location		[308, 94, 1057, 507]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"automatic"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "power req'd\ninto bus (W)"
		  Position		  [95, 260, 115, 280]
		  FontName		  "Arial"
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Gain
		  Name			  "# batteries1"
		  Position		  [635, 276, 680, 304]
		  NamePlacement		  "alternate"
		  Gain			  "ess_module_num"
		  Multiplication	  "Element-wise(K.*u)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Gain
		  Name			  "# batteries2"
		  Position		  [595, 215, 645, 245]
		  Gain			  "ess_module_num"
		  Multiplication	  "Element-wise(K.*u)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Gain
		  Name			  "1/# batteries"
		  Position		  [185, 250, 330, 290]
		  Gain			  "1/ess_module_num"
		  Multiplication	  "Element-wise(K.*u)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Const"
		  Position		  [195, 355, 265, 375]
		  Orientation		  "down"
		  ShowName		  off
		  FontName		  "Arial"
		  Value			  "enable_stop"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Const2"
		  Position		  [560, 430, 615, 450]
		  Orientation		  "left"
		  ShowName		  off
		  FontName		  "Arial"
		  Value			  "amb_tmp"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Const4"
		  Position		  [270, 113, 290, 137]
		  ShowName		  off
		  FontName		  "Arial"
		  Value			  "0"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Const5"
		  Position		  [390, 363, 410, 387]
		  ShowName		  off
		  FontName		  "Arial"
		  Value			  "0"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Const6"
		  Position		  [435, 288, 455, 312]
		  ShowName		  off
		  FontName		  "Arial"
		  Value			  "0"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto <cs>1"
		  Position		  [400, 520, 480, 540]
		  BackgroundColor	  "lightBlue"
		  ShowName		  off
		  GotoTag		  "ess_max_pwr"
		  TagVisibility		  "scoped"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto <mc>, <gc>, <sdo>"
		  Position		  [685, 220, 765, 240]
		  BackgroundColor	  "lightBlue"
		  ShowName		  off
		  GotoTag		  "bus_voltage"
		  TagVisibility		  "scoped"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto <sdo>, <cs>"
		  Position		  [350, 459, 395, 481]
		  BackgroundColor	  "lightBlue"
		  ShowName		  off
		  GotoTag		  "SOC"
		  TagVisibility		  "scoped"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Limits"
		  Ports			  [2]
		  Position		  [920, 25, 950, 105]
		  FontName		  "Arial"
		  ShowPortLabels	  off
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "Limits"
		    Location		    [74, 112, 640, 703]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "power req"
		    Position		    [60, 215, 80, 235]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "power \navailable from\nbattery"
		    Position		    [60, 290, 80, 310]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Const1"
		    Position		    [330, 45, 350, 65]
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    "0"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Const2"
		    Position		    [330, 90, 350, 110]
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    "0"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Const3"
		    Position		    [330, 140, 350, 160]
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    "0"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Const4"
		    Position		    [330, 190, 350, 210]
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    "0"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <sdo>"
		    Position		    [395, 249, 485, 271]
		    BackgroundColor	    "lightBlue"
		    ShowName		    off
		    GotoTag		    "ess_pwr_limited"
		    TagVisibility	    "scoped"
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <sdo>1"
		    Position		    [385, 187, 495, 213]
		    BackgroundColor	    "lightBlue"
		    ShowName		    off
		    GotoTag		    "mc_voltage_limited"
		    TagVisibility	    "scoped"
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <sdo>2"
		    Position		    [375, 44, 465, 66]
		    BackgroundColor	    "lightBlue"
		    ShowName		    off
		    GotoTag		    "ess_soc_limited"
		    TagVisibility	    "scoped"
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <sdo>3"
		    Position		    [385, 138, 490, 162]
		    BackgroundColor	    "lightBlue"
		    ShowName		    off
		    GotoTag		    "ess_minV_limited"
		    TagVisibility	    "scoped"
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <sdo>4"
		    Position		    [380, 88, 485, 112]
		    BackgroundColor	    "lightBlue"
		    ShowName		    off
		    GotoTag		    "ess_maxV_limited"
		    TagVisibility	    "scoped"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator1"
		    Position		    [150, 242, 180, 273]
		    ShowName		    off
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "limited\nby battery"
		    Ports		    [1, 1]
		    Position		    [330, 244, 360, 276]
		    Operator		    "NOT"
		    Inputs		    "1"
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator1"
		    SrcPort		    1
		    DstBlock		    "limited\nby battery"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "limited\nby battery"
		    SrcPort		    1
		    DstBlock		    "Goto <sdo>"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "power req"
		    SrcPort		    1
		    Points		    [50, 0]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "power \navailable from\nbattery"
		    SrcPort		    1
		    Points		    [50, 0]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Const4"
		    SrcPort		    1
		    DstBlock		    "Goto <sdo>1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Const3"
		    SrcPort		    1
		    DstBlock		    "Goto <sdo>3"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Const2"
		    SrcPort		    1
		    DstBlock		    "Goto <sdo>4"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Const1"
		    SrcPort		    1
		    DstBlock		    "Goto <sdo>2"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  Ports			  [1, 1]
		  Position		  [355, 180, 385, 210]
		  Orientation		  "down"
		  NamePlacement		  "alternate"
		  ShowName		  off
		  Operator		  "NOT"
		  Inputs		  "1"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "NNet"
		  Ports			  [2, 2, 1]
		  Position		  [345, 250, 400, 330]
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "NNet"
		    Location		    [481, 588, 979, 888]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Preq"
		    Position		    [40, 60, 60, 80]
		    FontName		    "Arial"
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "SOC"
		    Position		    [40, 160, 60, 180]
		    FontName		    "Arial"
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [245, 30, 265, 50]
		    StatesWhenEnabling	    "held"
		    ShowOutputPort	    off
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "De-Normalizer1\nVoltage"
		    Position		    [375, 155, 435, 185]
		    Expr		    "(u-0.2)*(ess_MMo(2,2)-ess_MMo(2,1"
"))/(0.8-0.2)+ess_MMo(2,1)"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "De-Normalizer2\nCurrent"
		    Position		    [370, 55, 430, 85]
		    Expr		    "(u-0.2)*(ess_MMo(1,2)-ess_MMo(1,1"
"))/(0.8-0.2)+ess_MMo(1,1)"
		    }
		    Block {
		    BlockType		    Demux
		    Name		    "Demux"
		    Ports		    [1, 2]
		    Position		    [305, 107, 340, 143]
		    Outputs		    "2"
		    BusSelectionMode	    off
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [2, 1]
		    Position		    [175, 107, 210, 143]
		    Inputs		    "2"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Neural Network"
		    Ports		    [1, 1]
		    Position		    [225, 105, 285, 145]
		    BackgroundColor	    "lightBlue"
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    System {
		    Name		    "Neural Network"
		    Location		    [614, 586, 1114, 846]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "p{1}"
		    Position		    [40, 40, 60, 60]
		    BackgroundColor	    "magenta"
		    Port		    "1"
		    LatchInput		    off
		    PortDimensions	    "2"
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    From
		    Name		    " a{1} "
		    Position		    [40, 120, 60, 140]
		    GotoTag		    "feedback1"
		    MaskDisplay		    "plot(cos(0:.1:2*pi),sin(0:.1:2*pi"
"))"
		    MaskIconFrame	    off
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Layer 1"
		    Ports		    [1, 1]
		    Position		    [190, 40, 250, 60]
		    BackgroundColor	    "lightBlue"
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    System {
		    Name		    "Layer 1"
		    Location		    [557, 498, 1057, 758]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "p{1}"
		    Position		    [40, 40, 60, 60]
		    BackgroundColor	    "magenta"
		    Port		    "1"
		    LatchInput		    off
		    PortDimensions	    "2"
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Delays 1"
		    Ports		    [1, 1]
		    Position		    [100, 40, 120, 60]
		    BackgroundColor	    "lightBlue"
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskDisplay		    "disp('TDL')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "Delays 1"
		    Location		    [70, 200, 570, 460]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "p{1}"
		    Position		    [60, 40, 80, 60]
		    Orientation		    "down"
		    BackgroundColor	    "magenta"
		    NamePlacement	    "alternate"
		    Port		    "1"
		    LatchInput		    off
		    PortDimensions	    "2"
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "mux"
		    Ports		    [1, 1]
		    Position		    [200, 60, 240, 80]
		    BackgroundColor	    "lightBlue"
		    Inputs		    "1"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "pd{1,1}"
		    Position		    [300, 60, 320, 80]
		    BackgroundColor	    "magenta"
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "mux"
		    SrcPort		    1
		    DstBlock		    "pd{1,1}"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "p{1}"
		    SrcPort		    1
		    DstBlock		    "mux"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "IW{1,1}"
		    Ports		    [1, 1]
		    Position		    [160, 40, 200, 60]
		    BackgroundColor	    "lightBlue"
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskDisplay		    "disp('weight')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "IW{1,1}"
		    Location		    [74, 196, 574, 456]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "pd{1,1}"
		    Position		    [40, 120, 60, 140]
		    BackgroundColor	    "magenta"
		    Port		    "1"
		    LatchInput		    off
		    PortDimensions	    "2"
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "IW{1,1}(1,:)'"
		    Position		    [140, 40, 180, 60]
		    BackgroundColor	    "lightBlue"
		    Value		    "[-4.5598890000000001;5.793647]"
		    VectorParams1D	    on
		    MaskDisplay		    "disp('weights')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "IW{1,1}(2,:)'"
		    Position		    [140, 100, 180, 120]
		    BackgroundColor	    "lightBlue"
		    Value		    "[-2.8283469999999999;1.417519]"
		    VectorParams1D	    on
		    MaskDisplay		    "disp('weights')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "IW{1,1}(3,:)'"
		    Position		    [140, 160, 180, 180]
		    BackgroundColor	    "lightBlue"
		    Value		    "[-2.3043559999999998;-1.446742999"
"9999999]"
		    VectorParams1D	    on
		    MaskDisplay		    "disp('weights')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [3, 1]
		    Position		    [340, 120, 380, 140]
		    Inputs		    "3"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "dotprod1"
		    Ports		    [2, 1]
		    Position		    [240, 40, 260, 80]
		    BackgroundColor	    "lightBlue"
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    System {
		    Name		    "dotprod1"
		    Location		    [539, 732, 797, 865]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "w"
		    Position		    [25, 33, 55, 47]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "p"
		    Position		    [25, 78, 55, 92]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Dot Product"
		    Ports		    [2, 1]
		    Position		    [120, 47, 150, 83]
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "Dot Product"
		    MaskDescription	    "Inner (dot) product.\ny=sum(u1.*u"
"2)       "
		    MaskHelp		    "Computes the inner (dot) product "
"of the inputs: sum(u1.*u2).  The inputs are vectors of the same length. Outpu"
"t is a scalar."
		    MaskInitialization	    "t=(0:.1:2*pi)';\nx=cos(t);\ny=sin"
"(t);"
		    MaskDisplay		    "plot(0,0,1,1,x*[0.025 0.07]+0.5,y"
"*[0.025 0.07]+0.5)"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "normalized"
		    System {
		    Name		    "Dot Product"
		    Location		    [33, 479, 253, 634]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    Position		    [15, 25, 35, 45]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    Position		    [15, 90, 35, 110]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    Ports		    [2, 1]
		    Position		    [65, 55, 90, 75]
		    Inputs		    "2"
		    Multiplication	    "Element-wise(.*)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    Ports		    [1, 1]
		    Position		    [125, 55, 145, 75]
		    IconShape		    "rectangular"
		    Inputs		    "+"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    Position		    [185, 55, 205, 75]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "z"
		    Position		    [200, 58, 230, 72]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "w"
		    SrcPort		    1
		    Points		    [45, 0]
		    DstBlock		    "Dot Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "p"
		    SrcPort		    1
		    Points		    [45, 0]
		    DstBlock		    "Dot Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Dot Product"
		    SrcPort		    1
		    DstBlock		    "z"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "dotprod2"
		    Ports		    [2, 1]
		    Position		    [240, 100, 260, 140]
		    BackgroundColor	    "lightBlue"
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    System {
		    Name		    "dotprod2"
		    Location		    [539, 732, 797, 865]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "w"
		    Position		    [25, 33, 55, 47]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "p"
		    Position		    [25, 78, 55, 92]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Dot Product"
		    Ports		    [2, 1]
		    Position		    [120, 47, 150, 83]
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "Dot Product"
		    MaskDescription	    "Inner (dot) product.\ny=sum(u1.*u"
"2)       "
		    MaskHelp		    "Computes the inner (dot) product "
"of the inputs: sum(u1.*u2).  The inputs are vectors of the same length. Outpu"
"t is a scalar."
		    MaskInitialization	    "t=(0:.1:2*pi)';\nx=cos(t);\ny=sin"
"(t);"
		    MaskDisplay		    "plot(0,0,1,1,x*[0.025 0.07]+0.5,y"
"*[0.025 0.07]+0.5)"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "normalized"
		    System {
		    Name		    "Dot Product"
		    Location		    [33, 479, 253, 634]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    Position		    [15, 25, 35, 45]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    Position		    [15, 90, 35, 110]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    Ports		    [2, 1]
		    Position		    [65, 55, 90, 75]
		    Inputs		    "2"
		    Multiplication	    "Element-wise(.*)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    Ports		    [1, 1]
		    Position		    [125, 55, 145, 75]
		    IconShape		    "rectangular"
		    Inputs		    "+"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    Position		    [185, 55, 205, 75]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "z"
		    Position		    [200, 58, 230, 72]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "w"
		    SrcPort		    1
		    Points		    [45, 0]
		    DstBlock		    "Dot Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "p"
		    SrcPort		    1
		    Points		    [45, 0]
		    DstBlock		    "Dot Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Dot Product"
		    SrcPort		    1
		    DstBlock		    "z"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "dotprod3"
		    Ports		    [2, 1]
		    Position		    [240, 160, 260, 200]
		    BackgroundColor	    "lightBlue"
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    System {
		    Name		    "dotprod3"
		    Location		    [539, 732, 797, 865]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "w"
		    Position		    [25, 33, 55, 47]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "p"
		    Position		    [25, 78, 55, 92]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Dot Product"
		    Ports		    [2, 1]
		    Position		    [120, 47, 150, 83]
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "Dot Product"
		    MaskDescription	    "Inner (dot) product.\ny=sum(u1.*u"
"2)       "
		    MaskHelp		    "Computes the inner (dot) product "
"of the inputs: sum(u1.*u2).  The inputs are vectors of the same length. Outpu"
"t is a scalar."
		    MaskInitialization	    "t=(0:.1:2*pi)';\nx=cos(t);\ny=sin"
"(t);"
		    MaskDisplay		    "plot(0,0,1,1,x*[0.025 0.07]+0.5,y"
"*[0.025 0.07]+0.5)"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "normalized"
		    System {
		    Name		    "Dot Product"
		    Location		    [33, 479, 253, 634]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    Position		    [15, 25, 35, 45]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    Position		    [15, 90, 35, 110]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    Ports		    [2, 1]
		    Position		    [65, 55, 90, 75]
		    Inputs		    "2"
		    Multiplication	    "Element-wise(.*)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    Ports		    [1, 1]
		    Position		    [125, 55, 145, 75]
		    IconShape		    "rectangular"
		    Inputs		    "+"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    Position		    [185, 55, 205, 75]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "z"
		    Position		    [200, 58, 230, 72]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "w"
		    SrcPort		    1
		    Points		    [45, 0]
		    DstBlock		    "Dot Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "p"
		    SrcPort		    1
		    Points		    [45, 0]
		    DstBlock		    "Dot Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Dot Product"
		    SrcPort		    1
		    DstBlock		    "z"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "iz{1,1}"
		    Position		    [420, 120, 440, 140]
		    BackgroundColor	    "magenta"
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "iz{1,1}"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "dotprod3"
		    SrcPort		    1
		    DstBlock		    "Mux"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "IW{1,1}(3,:)'"
		    SrcPort		    1
		    DstBlock		    "dotprod3"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "dotprod2"
		    SrcPort		    1
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "pd{1,1}"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    DstBlock		    "dotprod3"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "dotprod2"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "dotprod1"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "IW{1,1}(2,:)'"
		    SrcPort		    1
		    DstBlock		    "dotprod2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "dotprod1"
		    SrcPort		    1
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "IW{1,1}(1,:)'"
		    SrcPort		    1
		    DstBlock		    "dotprod1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "b{1}"
		    Position		    [160, 80, 200, 100]
		    BackgroundColor	    "lightBlue"
		    Value		    "[-6.0348629999999996;2.0410720000"
"000002;2.002373]"
		    VectorParams1D	    on
		    MaskDisplay		    "disp('bias')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "logsig"
		    Ports		    [1, 1]
		    Position		    [300, 60, 320, 80]
		    BackgroundColor	    "lightBlue"
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskDisplay		    "plot([-1 1],[0 0],[-1 -.9 -.8 -.7"
" -.6 -.5 -.4 -.3 -.2 -.1 0 .1 .2 .3 .4 .5 .6 .7 .8 .9 1],1./(1+exp(-8*[-1 -.9"
" -.8 -.7 -.6 -.5 -.4 -.3 -.2 -.1 0 .1 .2 .3 .4 .5 .6 .7 .8 .9 1]))+.01)"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "logsig"
		    Location		    [260, 574, 703, 704]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "n"
		    Position		    [25, 33, 55, 47]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    ElementaryMath
		    Name		    "Exp"
		    Ports		    [1, 1]
		    Position		    [155, 25, 185, 55]
		    Operator		    "exp"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gain"
		    Position		    [90, 25, 120, 55]
		    Gain		    "-1"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    ElementaryMath
		    Name		    "Reciprocal"
		    Ports		    [1, 1]
		    Position		    [295, 35, 325, 65]
		    Operator		    "reciprocal"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    Ports		    [2, 1]
		    Position		    [225, 32, 255, 63]
		    IconShape		    "rectangular"
		    Inputs		    "++"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "one"
		    Position		    [155, 75, 175, 95]
		    Value		    "1"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "a"
		    Position		    [370, 43, 400, 57]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "n"
		    SrcPort		    1
		    DstBlock		    "Gain"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Gain"
		    SrcPort		    1
		    DstBlock		    "Exp"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Exp"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "one"
		    SrcPort		    1
		    Points		    [30, 0]
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    DstBlock		    "Reciprocal"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Reciprocal"
		    SrcPort		    1
		    DstBlock		    "a"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "netsum"
		    Ports		    [2, 1]
		    Position		    [240, 60, 260, 80]
		    BackgroundColor	    "lightBlue"
		    IconShape		    "rectangular"
		    Inputs		    "2"
		    SaturateOnIntegerOverflow on
		    MaskDisplay		    "disp('+')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "a{1}"
		    Position		    [360, 60, 380, 80]
		    BackgroundColor	    "magenta"
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "[0;0;0]"
		    }
		    Line {
		    SrcBlock		    "logsig"
		    SrcPort		    1
		    DstBlock		    "a{1}"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "netsum"
		    SrcPort		    1
		    DstBlock		    "logsig"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "b{1}"
		    SrcPort		    1
		    DstBlock		    "netsum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "IW{1,1}"
		    SrcPort		    1
		    DstBlock		    "netsum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Delays 1"
		    SrcPort		    1
		    DstBlock		    "IW{1,1}"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "p{1}"
		    SrcPort		    1
		    DstBlock		    "Delays 1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Layer 2"
		    Ports		    [1, 1]
		    Position		    [190, 120, 250, 140]
		    BackgroundColor	    "lightBlue"
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    System {
		    Name		    "Layer 2"
		    Location		    [70, 200, 570, 460]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "a{1} "
		    Position		    [40, 40, 60, 60]
		    BackgroundColor	    "magenta"
		    Port		    "1"
		    LatchInput		    off
		    PortDimensions	    "3"
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Delays 1"
		    Ports		    [1, 1]
		    Position		    [100, 40, 120, 60]
		    BackgroundColor	    "lightBlue"
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskDisplay		    "disp('TDL')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "Delays 1"
		    Location		    [70, 200, 570, 460]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "p{2}"
		    Position		    [60, 40, 80, 60]
		    Orientation		    "down"
		    BackgroundColor	    "magenta"
		    NamePlacement	    "alternate"
		    Port		    "1"
		    LatchInput		    off
		    PortDimensions	    "3"
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "mux"
		    Ports		    [1, 1]
		    Position		    [200, 60, 240, 80]
		    BackgroundColor	    "lightBlue"
		    Inputs		    "1"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "pd{2,1}"
		    Position		    [300, 60, 320, 80]
		    BackgroundColor	    "magenta"
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "mux"
		    SrcPort		    1
		    DstBlock		    "pd{2,1}"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "p{2}"
		    SrcPort		    1
		    DstBlock		    "mux"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "LW{2,1}"
		    Ports		    [1, 1]
		    Position		    [160, 40, 200, 60]
		    BackgroundColor	    "lightBlue"
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskDisplay		    "disp('weight')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "LW{2,1}"
		    Location		    [70, 200, 570, 460]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "ad{2,1}"
		    Position		    [40, 90, 60, 110]
		    BackgroundColor	    "magenta"
		    Port		    "1"
		    LatchInput		    off
		    PortDimensions	    "3"
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "IW{2,1}(1,:)'"
		    Position		    [140, 40, 180, 60]
		    BackgroundColor	    "lightBlue"
		    Value		    "[-0.2776092;-2.6799360000000001;-"
"2.2138360000000001]"
		    VectorParams1D	    on
		    MaskDisplay		    "disp('weights')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "IW{2,1}(2,:)'"
		    Position		    [140, 100, 180, 120]
		    BackgroundColor	    "lightBlue"
		    Value		    "[3.601111;2.064257;0.866180799999"
"99997]"
		    VectorParams1D	    on
		    MaskDisplay		    "disp('weights')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [2, 1]
		    Position		    [340, 90, 380, 110]
		    Inputs		    "2"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "dotprod1"
		    Ports		    [2, 1]
		    Position		    [240, 40, 260, 80]
		    BackgroundColor	    "lightBlue"
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    System {
		    Name		    "dotprod1"
		    Location		    [539, 732, 797, 865]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "w"
		    Position		    [25, 33, 55, 47]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "p"
		    Position		    [25, 78, 55, 92]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Dot Product"
		    Ports		    [2, 1]
		    Position		    [120, 47, 150, 83]
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "Dot Product"
		    MaskDescription	    "Inner (dot) product.\ny=sum(u1.*u"
"2)       "
		    MaskHelp		    "Computes the inner (dot) product "
"of the inputs: sum(u1.*u2).  The inputs are vectors of the same length. Outpu"
"t is a scalar."
		    MaskInitialization	    "t=(0:.1:2*pi)';\nx=cos(t);\ny=sin"
"(t);"
		    MaskDisplay		    "plot(0,0,1,1,x*[0.025 0.07]+0.5,y"
"*[0.025 0.07]+0.5)"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "normalized"
		    System {
		    Name		    "Dot Product"
		    Location		    [33, 479, 253, 634]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    Position		    [15, 25, 35, 45]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    Position		    [15, 90, 35, 110]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    Ports		    [2, 1]
		    Position		    [65, 55, 90, 75]
		    Inputs		    "2"
		    Multiplication	    "Element-wise(.*)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    Ports		    [1, 1]
		    Position		    [125, 55, 145, 75]
		    IconShape		    "rectangular"
		    Inputs		    "+"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    Position		    [185, 55, 205, 75]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "z"
		    Position		    [200, 58, 230, 72]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "w"
		    SrcPort		    1
		    Points		    [45, 0]
		    DstBlock		    "Dot Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "p"
		    SrcPort		    1
		    Points		    [45, 0]
		    DstBlock		    "Dot Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Dot Product"
		    SrcPort		    1
		    DstBlock		    "z"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "dotprod2"
		    Ports		    [2, 1]
		    Position		    [240, 100, 260, 140]
		    BackgroundColor	    "lightBlue"
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    System {
		    Name		    "dotprod2"
		    Location		    [539, 732, 797, 865]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "w"
		    Position		    [25, 33, 55, 47]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "p"
		    Position		    [25, 78, 55, 92]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Dot Product"
		    Ports		    [2, 1]
		    Position		    [120, 47, 150, 83]
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "Dot Product"
		    MaskDescription	    "Inner (dot) product.\ny=sum(u1.*u"
"2)       "
		    MaskHelp		    "Computes the inner (dot) product "
"of the inputs: sum(u1.*u2).  The inputs are vectors of the same length. Outpu"
"t is a scalar."
		    MaskInitialization	    "t=(0:.1:2*pi)';\nx=cos(t);\ny=sin"
"(t);"
		    MaskDisplay		    "plot(0,0,1,1,x*[0.025 0.07]+0.5,y"
"*[0.025 0.07]+0.5)"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "normalized"
		    System {
		    Name		    "Dot Product"
		    Location		    [33, 479, 253, 634]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    Position		    [15, 25, 35, 45]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    Position		    [15, 90, 35, 110]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    Ports		    [2, 1]
		    Position		    [65, 55, 90, 75]
		    Inputs		    "2"
		    Multiplication	    "Element-wise(.*)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    Ports		    [1, 1]
		    Position		    [125, 55, 145, 75]
		    IconShape		    "rectangular"
		    Inputs		    "+"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    Position		    [185, 55, 205, 75]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "z"
		    Position		    [200, 58, 230, 72]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "w"
		    SrcPort		    1
		    Points		    [45, 0]
		    DstBlock		    "Dot Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "p"
		    SrcPort		    1
		    Points		    [45, 0]
		    DstBlock		    "Dot Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Dot Product"
		    SrcPort		    1
		    DstBlock		    "z"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "lz{2,1}"
		    Position		    [420, 90, 440, 110]
		    BackgroundColor	    "magenta"
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "lz{2,1}"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "dotprod2"
		    SrcPort		    1
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "ad{2,1}"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    DstBlock		    "dotprod2"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "dotprod1"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "IW{2,1}(2,:)'"
		    SrcPort		    1
		    DstBlock		    "dotprod2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "dotprod1"
		    SrcPort		    1
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "IW{2,1}(1,:)'"
		    SrcPort		    1
		    DstBlock		    "dotprod1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "b{2}"
		    Position		    [160, 80, 200, 100]
		    BackgroundColor	    "lightBlue"
		    Value		    "[3.0652170000000001;-2.2814760000"
"000001]"
		    VectorParams1D	    on
		    MaskDisplay		    "disp('bias')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "logsig"
		    Ports		    [1, 1]
		    Position		    [300, 60, 320, 80]
		    BackgroundColor	    "lightBlue"
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskDisplay		    "plot([-1 1],[0 0],[-1 -.9 -.8 -.7"
" -.6 -.5 -.4 -.3 -.2 -.1 0 .1 .2 .3 .4 .5 .6 .7 .8 .9 1],1./(1+exp(-8*[-1 -.9"
" -.8 -.7 -.6 -.5 -.4 -.3 -.2 -.1 0 .1 .2 .3 .4 .5 .6 .7 .8 .9 1]))+.01)"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "logsig"
		    Location		    [260, 574, 703, 704]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "n"
		    Position		    [25, 33, 55, 47]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    ElementaryMath
		    Name		    "Exp"
		    Ports		    [1, 1]
		    Position		    [155, 25, 185, 55]
		    Operator		    "exp"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gain"
		    Position		    [90, 25, 120, 55]
		    Gain		    "-1"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    ElementaryMath
		    Name		    "Reciprocal"
		    Ports		    [1, 1]
		    Position		    [295, 35, 325, 65]
		    Operator		    "reciprocal"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    Ports		    [2, 1]
		    Position		    [225, 32, 255, 63]
		    IconShape		    "rectangular"
		    Inputs		    "++"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "one"
		    Position		    [155, 75, 175, 95]
		    Value		    "1"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "a"
		    Position		    [370, 43, 400, 57]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "n"
		    SrcPort		    1
		    DstBlock		    "Gain"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Gain"
		    SrcPort		    1
		    DstBlock		    "Exp"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Exp"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "one"
		    SrcPort		    1
		    Points		    [30, 0]
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    DstBlock		    "Reciprocal"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Reciprocal"
		    SrcPort		    1
		    DstBlock		    "a"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "netsum"
		    Ports		    [2, 1]
		    Position		    [240, 60, 260, 80]
		    BackgroundColor	    "lightBlue"
		    IconShape		    "rectangular"
		    Inputs		    "2"
		    SaturateOnIntegerOverflow on
		    MaskDisplay		    "disp('+')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "a{2}"
		    Position		    [360, 60, 380, 80]
		    BackgroundColor	    "magenta"
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "[0;0]"
		    }
		    Line {
		    SrcBlock		    "logsig"
		    SrcPort		    1
		    DstBlock		    "a{2}"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "netsum"
		    SrcPort		    1
		    DstBlock		    "logsig"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "b{2}"
		    SrcPort		    1
		    DstBlock		    "netsum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "LW{2,1}"
		    SrcPort		    1
		    DstBlock		    "netsum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Delays 1"
		    SrcPort		    1
		    DstBlock		    "LW{2,1}"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "a{1} "
		    SrcPort		    1
		    DstBlock		    "Delays 1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "a{1}"
		    Position		    [380, 40, 400, 60]
		    GotoTag		    "feedback1"
		    TagVisibility	    "local"
		    MaskDisplay		    "plot(cos(0:.1:2*pi),sin(0:.1:2*pi"
"))"
		    MaskIconFrame	    off
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "y{1}"
		    Position		    [380, 120, 400, 140]
		    BackgroundColor	    "magenta"
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "[0;0]"
		    }
		    Line {
		    SrcBlock		    "Layer 2"
		    SrcPort		    1
		    DstBlock		    "y{1}"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    " a{1} "
		    SrcPort		    1
		    DstBlock		    "Layer 2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Layer 1"
		    SrcPort		    1
		    DstBlock		    "a{1}"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "p{1}"
		    SrcPort		    1
		    DstBlock		    "Layer 1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Normalizer\nPower"
		    Position		    [85, 55, 145, 85]
		    Expr		    "(u-ess_MMi(1,1))/(ess_MMi(1,2)-es"
"s_MMi(1,1))"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Normalizer\nSOC"
		    Position		    [85, 155, 145, 185]
		    Expr		    "(u-ess_MMi(2,1))/(ess_MMi(2,2)-es"
"s_MMi(2,1))"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "V"
		    Position		    [460, 160, 480, 180]
		    FontName		    "Arial"
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "i"
		    Position		    [450, 60, 470, 80]
		    FontName		    "Arial"
		    Port		    "2"
		    OutputWhenDisabled	    "reset"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "De-Normalizer1\nVoltage"
		    SrcPort		    1
		    DstBlock		    "V"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    2
		    Points		    [0, 35]
		    DstBlock		    "De-Normalizer1\nVoltage"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    1
		    Points		    [0, -45]
		    DstBlock		    "De-Normalizer2\nCurrent"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "De-Normalizer2\nCurrent"
		    SrcPort		    1
		    DstBlock		    "i"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Normalizer\nSOC"
		    SrcPort		    1
		    Points		    [0, -35]
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "SOC"
		    SrcPort		    1
		    DstBlock		    "Normalizer\nSOC"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Normalizer\nPower"
		    SrcPort		    1
		    Points		    [0, 45]
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Preq"
		    SrcPort		    1
		    DstBlock		    "Normalizer\nPower"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Neural Network"
		    SrcPort		    1
		    DstBlock		    "Demux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "Neural Network"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "No Thermal\nmodel"
		  Ports			  []
		  Position		  [760, 400, 790, 480]
		  FontName		  "Arial"
		  ShowPortLabels	  off
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "No Thermal\nmodel"
		    Location		    [78, 108, 387, 310]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Constant
		    Name		    "Const1"
		    Position		    [80, 45, 100, 65]
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    "0"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Const2"
		    Position		    [55, 75, 110, 95]
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    "amb_tmp"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Const3"
		    Position		    [85, 115, 105, 135]
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    "0"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "enhancedToWorkspace"
		    Ports		    [1]
		    Position		    [130, 47, 225, 63]
		    ShowName		    off
		    CopyFcn		    "breakLinkCopyFcn"
		    ParentCloseFcn	    "breakLinkParCloseFcn"
		    FontSize		    8
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    on
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "enhancedToWorkspace"
		    MaskDescription	    "A wrapper for the Simulink \"To W"
"orkspace\" block that allows you to evaluate the name of the variable to log "
"to workspace. This is useful to avoid the double logging errors that occur wh"
"en you pull in two library models that attempt to log to the same variable."
		    MaskHelp		    "<h2>Enhanced To Workspace Block</"
"h2>\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gen"
"eral name of the variable. Variables are saved to the workspace as <i>general"
"Name_specificName</i>. Note that this is an evaluated variable. If you would "
"like to type in the value directly, it must be surrounded with single quotes."
" Otherwise you can input the name of a variable containing a char string.</li"
">\n<li><b>Specific Name:</b> This is the specific name of the variable. Note "
"that this is input as a char literal (i.e., you don't need quotes).</li>\n<li"
"><b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the var"
"iable will not be logged to the workspace. If 1, the variable will be logged."
" This is done so that variable logging can be turned off to improve speed.</l"
"i>\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toge"
"ther to allow one to dynamically resolve variable names at run time in simuli"
"nk. This is most powerful when used in conjunction with a masked subsystem to"
" allow multiple instances of that masked subsytem to be used in the same mode"
"l. The strategy is to set the generalName in the block mask which will allow "
"the block to change the general name for all variable logging on the fly. \n<"
"h3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspac"
"e block. These files are located in the &lt; ADVISOR root &gt;/GUI directory "
":\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initializatio"
"n for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the "
"block callback when the simulink block is copied. It is necessary to break th"
"e link to the enhancedToWorkspace similar to the To Workspace block in order "
"for it to be able to configure itself. (Try copying simulink's To Workspace b"
"lock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i"
"> This file is similar to the breakLinkCopyFcn and is used when a parent syst"
"em is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'K"
"eefe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</"
"B> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type"
"</B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</"
"UL>\n</VARDEF>\n-->\n"
		    MaskPromptString	    "General Name [char-evaluated]|Spe"
"cific Name [char-literal]|Enable flag (1=on,0=off)"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskVariables	    "generalName=@1;specificName=&2;lo"
"gFlag=@3;"
		    MaskInitialization	    "enhancedToWsMaker"
		    MaskDisplay		    "disp([generalName,'_',specificNam"
"e])"
		    MaskSelfModifiable	    on
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "generalName|pwr_loss_a|logFlag"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "enhancedToWorkspace"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "enhancedToWorkspace1"
		    Ports		    [1]
		    Position		    [130, 77, 225, 93]
		    ShowName		    off
		    CopyFcn		    "breakLinkCopyFcn"
		    ParentCloseFcn	    "breakLinkParCloseFcn"
		    FontSize		    8
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    on
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "enhancedToWorkspace"
		    MaskDescription	    "A wrapper for the Simulink \"To W"
"orkspace\" block that allows you to evaluate the name of the variable to log "
"to workspace. This is useful to avoid the double logging errors that occur wh"
"en you pull in two library models that attempt to log to the same variable."
		    MaskHelp		    "<h2>Enhanced To Workspace Block</"
"h2>\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gen"
"eral name of the variable. Variables are saved to the workspace as <i>general"
"Name_specificName</i>. Note that this is an evaluated variable. If you would "
"like to type in the value directly, it must be surrounded with single quotes."
" Otherwise you can input the name of a variable containing a char string.</li"
">\n<li><b>Specific Name:</b> This is the specific name of the variable. Note "
"that this is input as a char literal (i.e., you don't need quotes).</li>\n<li"
"><b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the var"
"iable will not be logged to the workspace. If 1, the variable will be logged."
" This is done so that variable logging can be turned off to improve speed.</l"
"i>\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toge"
"ther to allow one to dynamically resolve variable names at run time in simuli"
"nk. This is most powerful when used in conjunction with a masked subsystem to"
" allow multiple instances of that masked subsytem to be used in the same mode"
"l. The strategy is to set the generalName in the block mask which will allow "
"the block to change the general name for all variable logging on the fly. \n<"
"h3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspac"
"e block. These files are located in the &lt; ADVISOR root &gt;/GUI directory "
":\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initializatio"
"n for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the "
"block callback when the simulink block is copied. It is necessary to break th"
"e link to the enhancedToWorkspace similar to the To Workspace block in order "
"for it to be able to configure itself. (Try copying simulink's To Workspace b"
"lock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i"
"> This file is similar to the breakLinkCopyFcn and is used when a parent syst"
"em is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'K"
"eefe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</"
"B> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type"
"</B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</"
"UL>\n</VARDEF>\n-->\n"
		    MaskPromptString	    "General Name [char-evaluated]|Spe"
"cific Name [char-literal]|Enable flag (1=on,0=off)"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskVariables	    "generalName=@1;specificName=&2;lo"
"gFlag=@3;"
		    MaskInitialization	    "enhancedToWsMaker"
		    MaskDisplay		    "disp([generalName,'_',specificNam"
"e])"
		    MaskSelfModifiable	    on
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "generalName|mod_tmp|logFlag"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "enhancedToWorkspace1"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "enhancedToWorkspace2"
		    Ports		    [1]
		    Position		    [130, 97, 225, 113]
		    ShowName		    off
		    CopyFcn		    "breakLinkCopyFcn"
		    ParentCloseFcn	    "breakLinkParCloseFcn"
		    FontSize		    8
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    on
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "enhancedToWorkspace"
		    MaskDescription	    "A wrapper for the Simulink \"To W"
"orkspace\" block that allows you to evaluate the name of the variable to log "
"to workspace. This is useful to avoid the double logging errors that occur wh"
"en you pull in two library models that attempt to log to the same variable."
		    MaskHelp		    "<h2>Enhanced To Workspace Block</"
"h2>\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gen"
"eral name of the variable. Variables are saved to the workspace as <i>general"
"Name_specificName</i>. Note that this is an evaluated variable. If you would "
"like to type in the value directly, it must be surrounded with single quotes."
" Otherwise you can input the name of a variable containing a char string.</li"
">\n<li><b>Specific Name:</b> This is the specific name of the variable. Note "
"that this is input as a char literal (i.e., you don't need quotes).</li>\n<li"
"><b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the var"
"iable will not be logged to the workspace. If 1, the variable will be logged."
" This is done so that variable logging can be turned off to improve speed.</l"
"i>\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toge"
"ther to allow one to dynamically resolve variable names at run time in simuli"
"nk. This is most powerful when used in conjunction with a masked subsystem to"
" allow multiple instances of that masked subsytem to be used in the same mode"
"l. The strategy is to set the generalName in the block mask which will allow "
"the block to change the general name for all variable logging on the fly. \n<"
"h3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspac"
"e block. These files are located in the &lt; ADVISOR root &gt;/GUI directory "
":\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initializatio"
"n for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the "
"block callback when the simulink block is copied. It is necessary to break th"
"e link to the enhancedToWorkspace similar to the To Workspace block in order "
"for it to be able to configure itself. (Try copying simulink's To Workspace b"
"lock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i"
"> This file is similar to the breakLinkCopyFcn and is used when a parent syst"
"em is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'K"
"eefe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</"
"B> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type"
"</B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</"
"UL>\n</VARDEF>\n-->\n"
		    MaskPromptString	    "General Name [char-evaluated]|Spe"
"cific Name [char-literal]|Enable flag (1=on,0=off)"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskVariables	    "generalName=@1;specificName=&2;lo"
"gFlag=@3;"
		    MaskInitialization	    "enhancedToWsMaker"
		    MaskDisplay		    "disp([generalName,'_',specificNam"
"e])"
		    MaskSelfModifiable	    on
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "generalName|air_tmp|logFlag"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "enhancedToWorkspace2"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "enhancedToWorkspace3"
		    Ports		    [1]
		    Position		    [130, 117, 225, 133]
		    ShowName		    off
		    CopyFcn		    "breakLinkCopyFcn"
		    ParentCloseFcn	    "breakLinkParCloseFcn"
		    FontSize		    8
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    on
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "enhancedToWorkspace"
		    MaskDescription	    "A wrapper for the Simulink \"To W"
"orkspace\" block that allows you to evaluate the name of the variable to log "
"to workspace. This is useful to avoid the double logging errors that occur wh"
"en you pull in two library models that attempt to log to the same variable."
		    MaskHelp		    "<h2>Enhanced To Workspace Block</"
"h2>\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gen"
"eral name of the variable. Variables are saved to the workspace as <i>general"
"Name_specificName</i>. Note that this is an evaluated variable. If you would "
"like to type in the value directly, it must be surrounded with single quotes."
" Otherwise you can input the name of a variable containing a char string.</li"
">\n<li><b>Specific Name:</b> This is the specific name of the variable. Note "
"that this is input as a char literal (i.e., you don't need quotes).</li>\n<li"
"><b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the var"
"iable will not be logged to the workspace. If 1, the variable will be logged."
" This is done so that variable logging can be turned off to improve speed.</l"
"i>\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toge"
"ther to allow one to dynamically resolve variable names at run time in simuli"
"nk. This is most powerful when used in conjunction with a masked subsystem to"
" allow multiple instances of that masked subsytem to be used in the same mode"
"l. The strategy is to set the generalName in the block mask which will allow "
"the block to change the general name for all variable logging on the fly. \n<"
"h3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspac"
"e block. These files are located in the &lt; ADVISOR root &gt;/GUI directory "
":\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initializatio"
"n for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the "
"block callback when the simulink block is copied. It is necessary to break th"
"e link to the enhancedToWorkspace similar to the To Workspace block in order "
"for it to be able to configure itself. (Try copying simulink's To Workspace b"
"lock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i"
"> This file is similar to the breakLinkCopyFcn and is used when a parent syst"
"em is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'K"
"eefe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</"
"B> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type"
"</B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</"
"UL>\n</VARDEF>\n-->\n"
		    MaskPromptString	    "General Name [char-evaluated]|Spe"
"cific Name [char-literal]|Enable flag (1=on,0=off)"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskVariables	    "generalName=@1;specificName=&2;lo"
"gFlag=@3;"
		    MaskInitialization	    "enhancedToWsMaker"
		    MaskDisplay		    "disp([generalName,'_',specificNam"
"e])"
		    MaskSelfModifiable	    on
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "generalName|air_th_pwr|logFlag"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "enhancedToWorkspace3"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		    }
		    }
		    Line {
		    SrcBlock		    "Const3"
		    SrcPort		    1
		    DstBlock		    "enhancedToWorkspace3"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Const2"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    DstBlock		    "enhancedToWorkspace2"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "enhancedToWorkspace1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Const1"
		    SrcPort		    1
		    DstBlock		    "enhancedToWorkspace"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Product
		  Name			  "Pout"
		  Ports			  [2, 1]
		  Position		  [545, 278, 575, 302]
		  Inputs		  "2"
		  Multiplication	  "Element-wise(.*)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Switch
		  Name			  "Preq=0\ncondition"
		  Position		  [830, 105, 860, 135]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  Position		  [315, 102, 345, 133]
		  ShowName		  off
		  Operator		  "=="
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  Position		  [425, 352, 455, 383]
		  ShowName		  off
		  Operator		  "=="
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "SOC\nalgorithm"
		  Ports			  [2, 1]
		  Position		  [350, 386, 380, 419]
		  Orientation		  "left"
		  FontName		  "Arial"
		  ShowPortLabels	  off
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "SOC\nalgorithm"
		    Location		    [427, 629, 1207, 901]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "(A)"
		    Position		    [15, 35, 35, 55]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "tmp\n(C)"
		    Position		    [20, 125, 40, 145]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "(sec->hrs)"
		    Position		    [265, 43, 330, 77]
		    Gain		    "1/3600"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    "0 <= SOC <= 1"
		    Position		    [650, 121, 680, 139]
		    UpperLimit		    "1"
		    LowerLimit		    "0"
		    LinearizeAsGain	    on
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "A-h\nremaining"
		    Ports		    [2, 1]
		    Position		    [505, 85, 525, 105]
		    IconShape		    "rectangular"
		    Inputs		    "-+"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Integrator
		    Name		    "Ah used"
		    Ports		    [2, 1]
		    Position		    [425, 50, 445, 70]
		    ExternalReset	    "none"
		    InitialConditionSource  "external"
		    InitialCondition	    "(1-ess_init_soc)*ess_max_ah_cap"
		    LimitOutput		    off
		    UpperSaturationLimit    "inf"
		    LowerSaturationLimit    "-inf"
		    ShowSaturationPort	    off
		    ShowStatePort	    off
		    AbsoluteTolerance	    "auto"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Fcn"
		    Position		    [500, 150, 540, 170]
		    ShowName		    off
		    Expr		    "1/u"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Fcn1"
		    Position		    [285, 96, 385, 114]
		    ShowName		    off
		    Expr		    "(1-ess_init_soc)*u"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "SOC"
		    Ports		    [2, 1]
		    Position		    [580, 118, 610, 142]
		    Inputs		    "2"
		    Multiplication	    "Element-wise(.*)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    Position		    [205, 35, 235, 85]
		    ShowName		    off
		    Threshold		    "0"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "adjusted A"
		    Ports		    [2, 1]
		    Position		    [135, 63, 165, 87]
		    Inputs		    "2"
		    Multiplication	    "Element-wise(.*)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Lookup
		    Name		    "coul eff"
		    Position		    [75, 88, 105, 112]
		    InputValues		    "ess_tmp"
		    OutputValues	    "ess_coulombic_eff"
		    }
		    Block {
		    BlockType		    Lookup
		    Name		    "max cap"
		    Position		    [200, 128, 230, 152]
		    InputValues		    "ess_tmp"
		    OutputValues	    "ess_max_ah_cap"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "SOC1"
		    Position		    [720, 120, 740, 140]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Fcn1"
		    SrcPort		    1
		    Points		    [20, 0]
		    DstBlock		    "Ah used"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "max cap"
		    SrcPort		    1
		    Points		    [30, 0]
		    Branch {
		    Points		    [0, -35]
		    DstBlock		    "Fcn1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [170, 0; 0, -30; 50, 0]
		    Branch {
		    DstBlock		    "Fcn"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [5, 0]
		    DstBlock		    "A-h\nremaining"
		    DstPort		    2
		    }
		    }
		    }
		    Line {
		    SrcBlock		    "adjusted A"
		    SrcPort		    1
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "coul eff"
		    SrcPort		    1
		    Points		    [10, 0]
		    DstBlock		    "adjusted A"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "tmp\n(C)"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    DstBlock		    "coul eff"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [125, 0]
		    DstBlock		    "max cap"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "0 <= SOC <= 1"
		    SrcPort		    1
		    DstBlock		    "SOC1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "A-h\nremaining"
		    SrcPort		    1
		    Points		    [35, 0]
		    DstBlock		    "SOC"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "SOC"
		    SrcPort		    1
		    DstBlock		    "0 <= SOC <= 1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Fcn"
		    SrcPort		    1
		    Points		    [20, 0]
		    DstBlock		    "SOC"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Ah used"
		    SrcPort		    1
		    Points		    [40, 0]
		    DstBlock		    "A-h\nremaining"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "(sec->hrs)"
		    SrcPort		    1
		    Points		    [75, 0]
		    DstBlock		    "Ah used"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    DstBlock		    "(sec->hrs)"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "(A)"
		    SrcPort		    1
		    Points		    [5, 0]
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "adjusted A"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [130, 0]
		    Branch {
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 15]
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    }
		    }
		    Annotation {
		    Position		    [533, 207]
		    Text		    "SOC=(Max Ah capacity-Ah used)/Max"
" Ah capacity"
		    }
		  }
		}
		Block {
		  BlockType		  Switch
		  Name			  "SOC=0\n->i=0"
		  Position		  [475, 315, 505, 345]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace"
		  Ports			  [1]
		  Position		  [25, 237, 120, 253]
		  Orientation		  "left"
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|pwr_out_r|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace1"
		  Ports			  [1]
		  Position		  [680, 177, 775, 193]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|volt|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace1"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace2"
		  Ports			  [1]
		  Position		  [555, 387, 650, 403]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|current|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace2"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace3"
		  Ports			  [1]
		  Position		  [910, 172, 1005, 188]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|pwr_out_a|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace3"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "max pack\npwr (W)"
		  Ports			  [1, 1]
		  Position		  [340, 515, 370, 545]
		  ShowPortLabels	  off
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "max pack\npwr (W)"
		    Location		    [502, 536, 957, 673]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "SOC"
		    Position		    [35, 43, 65, 57]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "# batteries"
		    Position		    [245, 35, 295, 65]
		    Gain		    "ess_module_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Lookup
		    Name		    "max power"
		    Position		    [165, 35, 195, 65]
		    InputValues		    "ess_max_p_soc"
		    OutputValues	    "ess_max_p"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "ess\ndischarge\npwr"
		    Position		    [355, 40, 375, 60]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "# batteries"
		    SrcPort		    1
		    DstBlock		    "ess\ndischarge\npwr"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "max power"
		    SrcPort		    1
		    DstBlock		    "# batteries"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "SOC"
		    SrcPort		    1
		    DstBlock		    "max power"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "stop sim"
		  Ports			  [1, 0, 1]
		  Position		  [200, 389, 260, 421]
		  Orientation		  "left"
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "stop sim"
		    Location		    [423, 258, 819, 468]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "SOC"
		    Position		    [75, 85, 95, 105]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [170, 25, 190, 45]
		    StatesWhenEnabling	    "held"
		    ShowOutputPort	    off
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Const"
		    Position		    [95, 145, 165, 165]
		    Orientation		    "up"
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    ".001"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    Position		    [185, 88, 215, 112]
		    Operator		    "<"
		    }
		    Block {
		    BlockType		    Stop
		    Name		    "Stop Simulation"
		    Position		    [255, 83, 295, 117]
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "Stop Simulation"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "SOC"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Const"
		    SrcPort		    1
		    Points		    [0, -35]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "power available\nto bus (W)"
		  Position		  [965, 110, 985, 130]
		  FontName		  "Arial"
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "SOC=0\n->i=0"
		  SrcPort		  1
		  Points		  [0, 0; 5, 0]
		  Branch {
		    Points		    [0, -35]
		    DstBlock		    "Pout"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 65]
		    Branch {
		    DstBlock		    "SOC\nalgorithm"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "enhancedToWorkspace2"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  DstBlock		  "SOC=0\n->i=0"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Const5"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "NNet"
		  SrcPort		  2
		  Points		  [10, 0; 0, 30]
		  DstBlock		  "SOC=0\n->i=0"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Const6"
		  SrcPort		  1
		  DstBlock		  "SOC=0\n->i=0"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Const2"
		  SrcPort		  1
		  Points		  [-160, 0]
		  DstBlock		  "SOC\nalgorithm"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Preq=0\ncondition"
		  SrcPort		  1
		  Points		  [0, 0; 25, 0]
		  Branch {
		    Points		    [0, -35]
		    DstBlock		    "Limits"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 0]
		    Branch {
		    DstBlock		    "power available\nto bus (W)"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 60]
		    DstBlock		    "enhancedToWorkspace3"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "# batteries1"
		  SrcPort		  1
		  Points		  [130, 0]
		  DstBlock		  "Preq=0\ncondition"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "# batteries2"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    DstBlock		    "Goto <mc>, <gc>, <sdo>"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -45]
		    DstBlock		    "enhancedToWorkspace1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "NNet"
		  SrcPort		  1
		  Points		  [0, 0; 125, 0]
		  Branch {
		    Points		    [0, -40]
		    DstBlock		    "# batteries2"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Pout"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Pout"
		  SrcPort		  1
		  DstBlock		  "# batteries1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "max pack\npwr (W)"
		  SrcPort		  1
		  DstBlock		  "Goto <cs>1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  Points		  [0, 0; 20, 0]
		  Branch {
		    DstBlock		    "Logical\nOperator"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Preq=0\ncondition"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  DstBlock		  "NNet"
		  DstPort		  enable
		}
		Line {
		  SrcBlock		  "Const4"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "1/# batteries"
		  SrcPort		  1
		  DstBlock		  "NNet"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "power req'd\ninto bus (W)"
		  SrcPort		  1
		  Points		  [0, 0; 15, 0]
		  Branch {
		    Points		    [15, 0]
		    Branch {
		    DstBlock		    "1/# batteries"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -170; 150, 0]
		    Branch {
		    Points		    [0, 0]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -30; 515, 0]
		    Branch {
		    DstBlock		    "Preq=0\ncondition"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -25]
		    DstBlock		    "Limits"
		    DstPort		    1
		    }
		    }
		    }
		  }
		  Branch {
		    DstBlock		    "enhancedToWorkspace"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "SOC\nalgorithm"
		  SrcPort		  1
		  Points		  [0, 0; -15, 0]
		  Branch {
		    Points		    [0, -45]
		    Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "NNet"
		    DstPort		    2
		    }
		  }
		  Branch {
		    Points		    [-30, 0]
		    Branch {
		    Points		    [0, 65]
		    Branch {
		    Points		    [0, 60]
		    DstBlock		    "max pack\npwr (W)"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Goto <sdo>, <cs>"
		    DstPort		    1
		    }
		    }
		    Branch {
		    DstBlock		    "stop sim"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Const"
		  SrcPort		  1
		  DstBlock		  "stop sim"
		  DstPort		  enable
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "signal\nannotator"
	      Ports		      [1, 1]
	      Position		      [375, 56, 420, 84]
	      NamePlacement	      "alternate"
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"signal\nannotator"
		Location		[202, 77, 966, 752]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "In1"
		  Position		  [110, 103, 140, 117]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		  Port {
		    PortNumber		    1
		    Name		    "ess_pwr_out_r"
		    TestPoint		    off
		    LinearAnalysisOutput    off
		    LinearAnalysisInput	    off
		    RTWStorageClass	    "Auto"
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  Position		  [430, 103, 460, 117]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "[]"
		}
		Line {
		  Name			  "ess_pwr_out_r"
		  Labels		  [0, 0]
		  SrcBlock		  "In1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "required out"
	      Position		      [500, 60, 520, 80]
	      FontName		      "Arial"
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "power available\nto bus (W)"
	      Position		      [330, 110, 350, 130]
	      FontName		      "Arial"
	      Port		      "2"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "sensors"
	      Position		      [645, 360, 665, 380]
	      FontName		      "Arial"
	      Port		      "3"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "power req'd\ninto bus (W)"
	      SrcPort		      1
	      Points		      [0, 0; 35, 0]
	      Branch {
		Points			[0, -50]
		DstBlock		"signal\nannotator"
		DstPort			1
	      }
	      Branch {
		DstBlock		"model"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "model"
	      SrcPort		      1
	      DstBlock		      "power available\nto bus (W)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "control"
	      SrcPort		      1
	      DstBlock		      "Terminator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Bus\nCreator"
	      SrcPort		      1
	      DstBlock		      "sensors"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "signal\nannotator"
	      SrcPort		      1
	      DstBlock		      "required out"
	      DstPort		      1
	    }
	    Line {
	      Name		      "bus_voltage"
	      Labels		      [0, 0]
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      1
	    }
	    Line {
	      Name		      "ess_max_pwr"
	      Labels		      [0, 0]
	      SrcBlock		      "From2"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      2
	    }
	    Line {
	      Name		      "SOC"
	      Labels		      [0, 0]
	      SrcBlock		      "From5"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      3
	    }
	    Line {
	      Name		      "ess_maxV_limited"
	      Labels		      [0, 0]
	      SrcBlock		      "From6"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      4
	    }
	    Line {
	      Name		      "ess_soc_limited"
	      Labels		      [0, 0]
	      SrcBlock		      "From7"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      5
	    }
	    Line {
	      Name		      "mc_voltage_limited"
	      Labels		      [0, 0]
	      SrcBlock		      "From9"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      6
	    }
	    Line {
	      Name		      "ess_pwr_limited"
	      Labels		      [0, 0]
	      SrcBlock		      "From10"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      7
	    }
	    Line {
	      Name		      "ess_minV_limited"
	      Labels		      [0, 0]
	      SrcBlock		      "From11"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      8
	    }
	    Annotation {
	      Position		      [247, 190]
	      BackgroundColor	      "yellow"
	      Text		      "Interface"
	      FontName		      "Arial"
	      FontSize		      22
	      FontWeight	      "bold"
	      FontAngle		      "italic"
	    }
	    Annotation {
	      Position		      [252, 40]
	      BackgroundColor	      "yellow"
	      Text		      "Model"
	      FontName		      "Arial"
	      FontSize		      22
	      FontWeight	      "bold"
	      FontAngle		      "italic"
	    }
	  }
	}
	Block {
	  BlockType		  Goto
	  Name			  "reqOutTag"
	  Position		  [365, 124, 465, 166]
	  ForegroundColor	  "red"
	  BackgroundColor	  "black"
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	  GotoTag		  "essReqOut"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "sensorsTag"
	  Position		  [365, 274, 465, 316]
	  ForegroundColor	  "red"
	  BackgroundColor	  "black"
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	  GotoTag		  "essSensors"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Outport
	  Name			  "power available\nto bus (W)"
	  Position		  [425, 210, 445, 230]
	  FontName		  "Arial"
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Line {
	  SrcBlock		  "power req'd\ninto bus (W)"
	  SrcPort		  1
	  DstBlock		  "energy\nstorage <ess>\nnnet"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "controlTag"
	  SrcPort		  1
	  Points		  [15, 0; 0, -60]
	  DstBlock		  "energy\nstorage <ess>\nnnet"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "energy\nstorage <ess>\nnnet"
	  SrcPort		  1
	  Points		  [40, 0]
	  DstBlock		  "reqOutTag"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "energy\nstorage <ess>\nnnet"
	  SrcPort		  2
	  DstBlock		  "power available\nto bus (W)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "energy\nstorage <ess>\nnnet"
	  SrcPort		  3
	  Points		  [25, 0; 0, 60]
	  DstBlock		  "sensorsTag"
	  DstPort		  1
	}
	Annotation {
	  Position		  [297, 40]
	  BackgroundColor	  "yellow"
	  Text			  "Energy Storage System"
	  FontName		  "Arial"
	  FontSize		  18
	  FontWeight		  "bold"
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "energy storage <ess>\nSaber"
      Ports		      [1, 1]
      Position		      [190, 408, 255, 452]
      BackgroundColor	      "yellow"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskType		      "Stand-Alone Energy Storage System Mask"
      MaskPromptString	      "General Name of this Component [char]|Log Varia"
"bles to Workspace?|Initialization File(s) [cell array of char]|Modification C"
"ell [2 column cell array of param and val]|Icon image file name [char--evalua"
"ted]|DEBUG"
      MaskStyleString	      "edit,popup(Don't Log|Log Variable),edit,edit,ed"
"it,popup(ON|OFF)"
      MaskTunableValueString  "on,on,on,on,on,on"
      MaskCallbackString      "|||||"
      MaskEnableString	      "on,on,on,on,on,on"
      MaskVisibilityString    "on,on,on,on,on,on"
      MaskToolTipString	      "on,on,on,on,on,on"
      MaskVariables	      "generalName=@1;logPick=@2;initFileName=@3;modCe"
"ll=@4;imgFileName=@5;DEBUG=&6;"
      MaskInitialization      "% initialization via m-file script\nadvSACompMa"
"skInit;"
      MaskDisplay	      "image(imread(imgFileName))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      MaskValueString	      "'ess'|Log Variable|{}|{}|'bdi_ess.jpg'|OFF"
      MaskVariableAliases     ",,,,,"
      System {
	Name			"energy storage <ess>\nSaber"
	Location		[202, 77, 966, 744]
	Open			off
	ModelBrowserVisibility	on
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "power req'd\ninto bus (W)"
	  Position		  [140, 200, 160, 220]
	  FontName		  "Arial"
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Block NOTES"
	  Ports			  []
	  Position		  [75, 90, 131, 130]
	  BackgroundColor	  "green"
	  ShowName		  off
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "disp('Block\\nNOTES')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Block NOTES"
	    Location		    [256, 329, 741, 634]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Annotation {
	      Position		      [242, 146]
	      Text		      "This is a stand-alone version of an ene"
"rgy storage system\n\nSeveral different models are available"
	    }
	  }
	}
	Block {
	  BlockType		  From
	  Name			  "controlTag"
	  Position		  [80, 276, 190, 314]
	  ForegroundColor	  "red"
	  BackgroundColor	  "black"
	  CloseFcn		  "tagdialog Close"
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	  GotoTag		  "essControl"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "documentation9"
	  Ports			  []
	  Position		  [145, 91, 174, 130]
	  BackgroundColor	  "orange"
	  DropShadow		  on
	  ShowName		  off
	  OpenFcn		  "web(['file:\\\\\\' which('energy_storage.ht"
"m')]);"
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "documentation9"
	    Location		    [129, 62, 308, 146]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "energy storage <ess>\nSaber"
	  Ports			  [2, 3]
	  Position		  [240, 198, 305, 242]
	  ForegroundColor	  "magenta"
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('bdi_ess.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "energy storage <ess>\nSaber"
	    Location		    [223, 98, 1135, 874]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "power req'd\ninto bus (W)"
	      Position		      [145, 110, 165, 130]
	      FontName		      "Arial"
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "control"
	      Position		      [45, 230, 65, 250]
	      FontName		      "Arial"
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      BusCreator
	      Name		      "Bus\nCreator"
	      Ports		      [3, 1]
	      Position		      [525, 202, 550, 348]
	      ShowName		      off
	      Inputs		      "3"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      Position		      [340, 213, 425, 237]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "bus_voltage"
	      Port {
		PortNumber		1
		Name			"bus_voltage"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From2"
	      Position		      [340, 263, 440, 287]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_max_pwr"
	      Port {
		PortNumber		1
		Name			"ess_max_pwr"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From5"
	      Position		      [340, 313, 440, 337]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	      Port {
		PortNumber		1
		Name			"SOC"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility1"
	      Position		      [245, 212, 330, 234]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "bus_voltage"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility2"
	      Position		      [245, 262, 330, 284]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_max_pwr"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility6"
	      Position		      [245, 312, 330, 334]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      Terminator
	      Name		      "Terminator"
	      Position		      [95, 230, 115, 250]
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "model"
	      Ports		      [1, 1]
	      Position		      [230, 90, 270, 150]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"model"
		Location		[214, 70, 945, 750]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"automatic"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "power req'd\ninto bus (W)"
		  Position		  [25, 35, 45, 55]
		  FontName		  "Arial"
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  Ports			  []
		  Position		  [885, 230, 941, 270]
		  BackgroundColor	  "green"
		  ShowName		  off
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [64, 843, 576, 1017]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Annotation {
		    Position		    [256, 77]
		    Text		    "Saber co-simulation\n"
		    }
		  }
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux"
		  Ports			  [1, 5]
		  Position		  [515, 106, 525, 184]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "[1 10 10 10 10]"
		  BusSelectionMode	  off
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux1"
		  Ports			  [1, 10]
		  Position		  [85, 270, 90, 315]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "10"
		  BusSelectionMode	  off
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux10"
		  Ports			  [1, 10]
		  Position		  [70, 620, 75, 665]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "10"
		  BusSelectionMode	  off
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux11"
		  Ports			  [1, 10]
		  Position		  [180, 515, 185, 560]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "10"
		  BusSelectionMode	  off
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux12"
		  Ports			  [1, 10]
		  Position		  [180, 585, 185, 630]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "10"
		  BusSelectionMode	  off
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux13"
		  Ports			  [1, 10]
		  Position		  [180, 655, 185, 700]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "10"
		  BusSelectionMode	  off
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux2"
		  Ports			  [1, 10]
		  Position		  [180, 305, 185, 350]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "10"
		  BusSelectionMode	  off
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux3"
		  Ports			  [1, 10]
		  Position		  [75, 340, 80, 385]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "10"
		  BusSelectionMode	  off
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux4"
		  Ports			  [1, 10]
		  Position		  [180, 375, 185, 420]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "10"
		  BusSelectionMode	  off
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux5"
		  Ports			  [1, 10]
		  Position		  [75, 410, 80, 455]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "10"
		  BusSelectionMode	  off
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux6"
		  Ports			  [1, 10]
		  Position		  [180, 445, 185, 490]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "10"
		  BusSelectionMode	  off
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux8"
		  Ports			  [1, 10]
		  Position		  [75, 480, 80, 525]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "10"
		  BusSelectionMode	  off
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux9"
		  Ports			  [1, 10]
		  Position		  [80, 550, 85, 595]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "10"
		  BusSelectionMode	  off
		}
		Block {
		  BlockType		  "S-Function"
		  Name			  "Matrix\nConcatenation1"
		  Ports			  [17, 1]
		  Position		  [250, 111, 340, 689]
		  ShowName		  off
		  FunctionName		  "smatrxcat"
		  Parameters		  "numInports,catMethod"
		  PortCounts		  "[]"
		  SFunctionModules	  "''"
		  MaskType		  "Matrix Concatenation"
		  MaskDescription	  "Perform horizontal or vertical conc"
"atenation.  1-D vector input signals are treated as column vectors, i.e., [Mx"
"1] matrices.  The output is always a matrix."
		  MaskPromptString	  "Number of inputs:|Concatenation met"
"hod:"
		  MaskStyleString	  "edit,popup(Horizontal|Vertical)"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskVariables		  "numInports=@1;catMethod=@2;"
		  MaskInitialization	  "xy = matrxcatmask('icon');"
		  MaskDisplay		  "plot(xy.x,xy.y);\ntext(0.15,0.86,xy"
".label);\n"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "normalized"
		  MaskValueString	  "17|Horizontal"
		  MaskVariableAliases	  ","
		}
		Block {
		  BlockType		  Reference
		  Name			  "Matrix\nConcatenation10"
		  Ports			  [10, 1]
		  Position		  [100, 550, 115, 595]
		  ShowName		  off
		  SourceBlock		  "simulink3/Signals\n& Systems/Matrix"
"\nConcatenation"
		  SourceType		  "Matrix Concatenation"
		  numInports		  "10"
		  catMethod		  "Horizontal"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Matrix\nConcatenation11"
		  Ports			  [10, 1]
		  Position		  [90, 620, 105, 665]
		  ShowName		  off
		  SourceBlock		  "simulink3/Signals\n& Systems/Matrix"
"\nConcatenation"
		  SourceType		  "Matrix Concatenation"
		  numInports		  "10"
		  catMethod		  "Horizontal"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Matrix\nConcatenation12"
		  Ports			  [10, 1]
		  Position		  [200, 515, 215, 560]
		  ShowName		  off
		  SourceBlock		  "simulink3/Signals\n& Systems/Matrix"
"\nConcatenation"
		  SourceType		  "Matrix Concatenation"
		  numInports		  "10"
		  catMethod		  "Horizontal"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Matrix\nConcatenation13"
		  Ports			  [10, 1]
		  Position		  [200, 585, 215, 630]
		  ShowName		  off
		  SourceBlock		  "simulink3/Signals\n& Systems/Matrix"
"\nConcatenation"
		  SourceType		  "Matrix Concatenation"
		  numInports		  "10"
		  catMethod		  "Horizontal"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Matrix\nConcatenation14"
		  Ports			  [10, 1]
		  Position		  [200, 655, 215, 700]
		  ShowName		  off
		  SourceBlock		  "simulink3/Signals\n& Systems/Matrix"
"\nConcatenation"
		  SourceType		  "Matrix Concatenation"
		  numInports		  "10"
		  catMethod		  "Horizontal"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Matrix\nConcatenation2"
		  Ports			  [10, 1]
		  Position		  [105, 270, 120, 315]
		  ShowName		  off
		  SourceBlock		  "simulink3/Signals\n& Systems/Matrix"
"\nConcatenation"
		  SourceType		  "Matrix Concatenation"
		  numInports		  "10"
		  catMethod		  "Horizontal"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Matrix\nConcatenation3"
		  Ports			  [10, 1]
		  Position		  [200, 305, 215, 350]
		  ShowName		  off
		  SourceBlock		  "simulink3/Signals\n& Systems/Matrix"
"\nConcatenation"
		  SourceType		  "Matrix Concatenation"
		  numInports		  "10"
		  catMethod		  "Horizontal"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Matrix\nConcatenation4"
		  Ports			  [10, 1]
		  Position		  [95, 340, 110, 385]
		  ShowName		  off
		  SourceBlock		  "simulink3/Signals\n& Systems/Matrix"
"\nConcatenation"
		  SourceType		  "Matrix Concatenation"
		  numInports		  "10"
		  catMethod		  "Horizontal"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Matrix\nConcatenation5"
		  Ports			  [10, 1]
		  Position		  [200, 375, 215, 420]
		  ShowName		  off
		  SourceBlock		  "simulink3/Signals\n& Systems/Matrix"
"\nConcatenation"
		  SourceType		  "Matrix Concatenation"
		  numInports		  "10"
		  catMethod		  "Horizontal"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Matrix\nConcatenation6"
		  Ports			  [10, 1]
		  Position		  [95, 410, 110, 455]
		  ShowName		  off
		  SourceBlock		  "simulink3/Signals\n& Systems/Matrix"
"\nConcatenation"
		  SourceType		  "Matrix Concatenation"
		  numInports		  "10"
		  catMethod		  "Horizontal"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Matrix\nConcatenation7"
		  Ports			  [10, 1]
		  Position		  [200, 445, 215, 490]
		  ShowName		  off
		  SourceBlock		  "simulink3/Signals\n& Systems/Matrix"
"\nConcatenation"
		  SourceType		  "Matrix Concatenation"
		  numInports		  "10"
		  catMethod		  "Horizontal"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Matrix\nConcatenation9"
		  Ports			  [10, 1]
		  Position		  [95, 480, 110, 525]
		  ShowName		  off
		  SourceBlock		  "simulink3/Signals\n& Systems/Matrix"
"\nConcatenation"
		  SourceType		  "Matrix Concatenation"
		  numInports		  "10"
		  catMethod		  "Horizontal"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Power"
		  Ports			  [2, 1]
		  Position		  [820, 85, 910, 145]
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "Power"
		    Location		    [1175, 566, 1551, 664]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Current"
		    Position		    [25, 13, 55, 27]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Voltage"
		    Position		    [35, 43, 65, 57]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Product
		    Name		    "P=i*V"
		    Ports		    [2, 1]
		    Position		    [90, 26, 135, 59]
		    Inputs		    "2"
		    Multiplication	    "Element-wise(.*)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "enhancedToWorkspace"
		    Ports		    [1]
		    Position		    [230, 12, 325, 28]
		    ShowName		    off
		    CopyFcn		    "breakLinkCopyFcn"
		    ParentCloseFcn	    "breakLinkParCloseFcn"
		    FontSize		    8
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    on
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "enhancedToWorkspace"
		    MaskDescription	    "A wrapper for the Simulink \"To W"
"orkspace\" block that allows you to evaluate the name of the variable to log "
"to workspace. This is useful to avoid the double logging errors that occur wh"
"en you pull in two library models that attempt to log to the same variable."
		    MaskHelp		    "<h2>Enhanced To Workspace Block</"
"h2>\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gen"
"eral name of the variable. Variables are saved to the workspace as <i>general"
"Name_specificName</i>. Note that this is an evaluated variable. If you would "
"like to type in the value directly, it must be surrounded with single quotes."
" Otherwise you can input the name of a variable containing a char string.</li"
">\n<li><b>Specific Name:</b> This is the specific name of the variable. Note "
"that this is input as a char literal (i.e., you don't need quotes).</li>\n<li"
"><b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the var"
"iable will not be logged to the workspace. If 1, the variable will be logged."
" This is done so that variable logging can be turned off to improve speed.</l"
"i>\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toge"
"ther to allow one to dynamically resolve variable names at run time in simuli"
"nk. This is most powerful when used in conjunction with a masked subsystem to"
" allow multiple instances of that masked subsytem to be used in the same mode"
"l. The strategy is to set the generalName in the block mask which will allow "
"the block to change the general name for all variable logging on the fly. \n<"
"h3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspac"
"e block. These files are located in the &lt; ADVISOR root &gt;/GUI directory "
":\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initializatio"
"n for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the "
"block callback when the simulink block is copied. It is necessary to break th"
"e link to the enhancedToWorkspace similar to the To Workspace block in order "
"for it to be able to configure itself. (Try copying simulink's To Workspace b"
"lock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i"
"> This file is similar to the breakLinkCopyFcn and is used when a parent syst"
"em is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'K"
"eefe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</"
"B> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type"
"</B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</"
"UL>\n</VARDEF>\n-->\n"
		    MaskPromptString	    "General Name [char-evaluated]|Spe"
"cific Name [char-literal]|Enable flag (1=on,0=off)"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskVariables	    "generalName=@1;specificName=&2;lo"
"gFlag=@3;"
		    MaskInitialization	    "enhancedToWsMaker"
		    MaskDisplay		    "disp([generalName,'_',specificNam"
"e])"
		    MaskSelfModifiable	    on
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "generalName|pwr_out_a|logFlag"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "enhancedToWorkspace"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Avail\nPower"
		    Position		    [245, 38, 275, 52]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "[]"
		    }
		    Line {
		    SrcBlock		    "P=i*V"
		    SrcPort		    1
		    Points		    [60, 0]
		    Branch {
		    DstBlock		    "Avail\nPower"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -25]
		    DstBlock		    "enhancedToWorkspace"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Current"
		    SrcPort		    1
		    Points		    [0, 15]
		    DstBlock		    "P=i*V"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Voltage"
		    SrcPort		    1
		    DstBlock		    "P=i*V"
		    DstPort		    2
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Power request"
		  Ports			  [1, 1]
		  Position		  [75, 24, 180, 66]
		  AncestorBlock		  "lib_energy_storage/Ess Choices/ener"
"gy storage <ess>\nSaber/Power request"
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "Power request"
		    Location		    [118, 519, 774, 762]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "power req'd"
		    Position		    [35, 113, 65, 127]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "1/# batteries"
		    Position		    [280, 105, 330, 135]
		    Gain		    "1/ess_module_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator1"
		    Position		    [390, 97, 420, 128]
		    ShowName		    off
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "enhancedToWorkspace"
		    Ports		    [1]
		    Position		    [245, 187, 340, 203]
		    ShowName		    off
		    CopyFcn		    "breakLinkCopyFcn"
		    ParentCloseFcn	    "breakLinkParCloseFcn"
		    FontSize		    8
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    on
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "enhancedToWorkspace"
		    MaskDescription	    "A wrapper for the Simulink \"To W"
"orkspace\" block that allows you to evaluate the name of the variable to log "
"to workspace. This is useful to avoid the double logging errors that occur wh"
"en you pull in two library models that attempt to log to the same variable."
		    MaskHelp		    "<h2>Enhanced To Workspace Block</"
"h2>\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gen"
"eral name of the variable. Variables are saved to the workspace as <i>general"
"Name_specificName</i>. Note that this is an evaluated variable. If you would "
"like to type in the value directly, it must be surrounded with single quotes."
" Otherwise you can input the name of a variable containing a char string.</li"
">\n<li><b>Specific Name:</b> This is the specific name of the variable. Note "
"that this is input as a char literal (i.e., you don't need quotes).</li>\n<li"
"><b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the var"
"iable will not be logged to the workspace. If 1, the variable will be logged."
" This is done so that variable logging can be turned off to improve speed.</l"
"i>\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toge"
"ther to allow one to dynamically resolve variable names at run time in simuli"
"nk. This is most powerful when used in conjunction with a masked subsystem to"
" allow multiple instances of that masked subsytem to be used in the same mode"
"l. The strategy is to set the generalName in the block mask which will allow "
"the block to change the general name for all variable logging on the fly. \n<"
"h3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspac"
"e block. These files are located in the &lt; ADVISOR root &gt;/GUI directory "
":\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initializatio"
"n for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the "
"block callback when the simulink block is copied. It is necessary to break th"
"e link to the enhancedToWorkspace similar to the To Workspace block in order "
"for it to be able to configure itself. (Try copying simulink's To Workspace b"
"lock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i"
"> This file is similar to the breakLinkCopyFcn and is used when a parent syst"
"em is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'K"
"eefe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</"
"B> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type"
"</B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</"
"UL>\n</VARDEF>\n-->\n"
		    MaskPromptString	    "General Name [char-evaluated]|Spe"
"cific Name [char-literal]|Enable flag (1=on,0=off)"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskVariables	    "generalName=@1;specificName=&2;lo"
"gFlag=@3;"
		    MaskInitialization	    "enhancedToWsMaker"
		    MaskDisplay		    "disp([generalName,'_',specificNam"
"e])"
		    MaskSelfModifiable	    on
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "generalName|pwr_out_r|logFlag"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "enhancedToWorkspace"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "if P==0"
		    Position		    [330, 40, 350, 60]
		    Value		    "0"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "if P==0, pass \nP=0.0001"
		    Position		    [495, 100, 525, 130]
		    Threshold		    "0.1"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "non-zero power"
		    Position		    [400, 22, 460, 38]
		    Value		    "0.0001"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "P request"
		    Position		    [585, 108, 615, 122]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "[]"
		    }
		    Line {
		    SrcBlock		    "power req'd"
		    SrcPort		    1
		    Points		    [130, 0]
		    Branch {
		    DstBlock		    "1/# batteries"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 75]
		    DstBlock		    "enhancedToWorkspace"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "1/# batteries"
		    SrcPort		    1
		    Points		    [35, 0]
		    Branch {
		    Points		    [0, 35; 75, 0; 0, -30]
		    DstBlock		    "if P==0, pass \nP=0.0001"
		    DstPort		    3
		    }
		    Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "if P==0, pass \nP=0.0001"
		    SrcPort		    1
		    DstBlock		    "P request"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "if P==0"
		    SrcPort		    1
		    Points		    [20, 0]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "non-zero power"
		    SrcPort		    1
		    Points		    [15, 0]
		    DstBlock		    "if P==0, pass \nP=0.0001"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator1"
		    SrcPort		    1
		    DstBlock		    "if P==0, pass \nP=0.0001"
		    DstPort		    2
		    }
		  }
		}
		Block {
		  BlockType		  "S-Function"
		  Name			  "S-Function that calls \nSaber co-si"
"mulation\ninputs: power request\nload parameters\noutputs: accessory power\nm"
"odel outputs: currrent, voltage"
		  Ports			  [1, 1]
		  Position		  [360, 131, 480, 159]
		  ForegroundColor	  "magenta"
		  FunctionName		  "SaberCosimSfun"
		  Parameters		  "strrep(which('advisor'),'advisor.m'"
",'tmp\\'),time_step,Saber_Battery_IO_File"
		  PortCounts		  "[]"
		  SFunctionModules	  "''"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "SOC's"
		  Ports			  [1]
		  Position		  [670, 184, 735, 216]
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "SOC's"
		    Location		    [214, 70, 961, 766]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Saber SOC's"
		    Position		    [25, 25, 55, 40]
		    Orientation		    "down"
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Const"
		    Position		    [470, 35, 540, 55]
		    Orientation		    "down"
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    "enable_stop"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <sdo>, <cs>"
		    Position		    [360, 54, 405, 76]
		    BackgroundColor	    "lightBlue"
		    ShowName		    off
		    GotoTag		    "SOC"
		    TagVisibility	    "scoped"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Mean"
		    Ports		    [1, 1]
		    Position		    [110, 82, 150, 108]
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    System {
		    Name		    "Mean"
		    Location		    [541, 326, 825, 423]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In"
		    Position		    [25, 33, 55, 47]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Average over \n10 modules"
		    Position		    [140, 25, 195, 55]
		    Gain		    "1/10"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum2"
		    Ports		    [1, 1]
		    Position		    [80, 25, 110, 55]
		    ShowName		    off
		    IconShape		    "round"
		    Inputs		    "1"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out"
		    Position		    [220, 33, 250, 47]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "[]"
		    }
		    Line {
		    SrcBlock		    "Sum2"
		    SrcPort		    1
		    DstBlock		    "Average over \n10 modules"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "In"
		    SrcPort		    1
		    DstBlock		    "Sum2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Average over \n10 modules"
		    SrcPort		    1
		    DstBlock		    "Out"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "enhancedToWorkspace"
		    Ports		    [1]
		    Position		    [100, 52, 195, 68]
		    ShowName		    off
		    CopyFcn		    "breakLinkCopyFcn"
		    ParentCloseFcn	    "breakLinkParCloseFcn"
		    FontSize		    8
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    on
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "enhancedToWorkspace"
		    MaskDescription	    "A wrapper for the Simulink \"To W"
"orkspace\" block that allows you to evaluate the name of the variable to log "
"to workspace. This is useful to avoid the double logging errors that occur wh"
"en you pull in two library models that attempt to log to the same variable."
		    MaskHelp		    "<h2>Enhanced To Workspace Block</"
"h2>\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gen"
"eral name of the variable. Variables are saved to the workspace as <i>general"
"Name_specificName</i>. Note that this is an evaluated variable. If you would "
"like to type in the value directly, it must be surrounded with single quotes."
" Otherwise you can input the name of a variable containing a char string.</li"
">\n<li><b>Specific Name:</b> This is the specific name of the variable. Note "
"that this is input as a char literal (i.e., you don't need quotes).</li>\n<li"
"><b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the var"
"iable will not be logged to the workspace. If 1, the variable will be logged."
" This is done so that variable logging can be turned off to improve speed.</l"
"i>\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toge"
"ther to allow one to dynamically resolve variable names at run time in simuli"
"nk. This is most powerful when used in conjunction with a masked subsystem to"
" allow multiple instances of that masked subsytem to be used in the same mode"
"l. The strategy is to set the generalName in the block mask which will allow "
"the block to change the general name for all variable logging on the fly. \n<"
"h3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspac"
"e block. These files are located in the &lt; ADVISOR root &gt;/GUI directory "
":\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initializatio"
"n for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the "
"block callback when the simulink block is copied. It is necessary to break th"
"e link to the enhancedToWorkspace similar to the To Workspace block in order "
"for it to be able to configure itself. (Try copying simulink's To Workspace b"
"lock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i"
"> This file is similar to the breakLinkCopyFcn and is used when a parent syst"
"em is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'K"
"eefe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</"
"B> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type"
"</B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</"
"UL>\n</VARDEF>\n-->\n"
		    MaskPromptString	    "General Name [char-evaluated]|Spe"
"cific Name [char-literal]|Enable flag (1=on,0=off)"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskVariables	    "generalName=@1;specificName=&2;lo"
"gFlag=@3;"
		    MaskInitialization	    "enhancedToWsMaker"
		    MaskDisplay		    "disp([generalName,'_',specificNam"
"e])"
		    MaskSelfModifiable	    on
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "generalName|saber_ess_SOC|logFlag"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "enhancedToWorkspace"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "soc mem"
		    Position		    [230, 80, 260, 110]
		    X0			    "ess_init_soc"
		    InheritSampleTime	    off
		    RTWStateStorageClass    "Auto"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "stop sim"
		    Ports		    [1, 0, 1]
		    Position		    [475, 79, 535, 111]
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    on
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    System {
		    Name		    "stop sim"
		    Location		    [427, 258, 823, 468]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "SOC"
		    Position		    [75, 85, 95, 105]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [170, 25, 190, 45]
		    StatesWhenEnabling	    "held"
		    ShowOutputPort	    off
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Const"
		    Position		    [95, 145, 165, 165]
		    Orientation		    "up"
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    "0.1"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    Position		    [185, 88, 215, 112]
		    Operator		    "<"
		    }
		    Block {
		    BlockType		    Stop
		    Name		    "Stop Simulation"
		    Position		    [255, 83, 295, 117]
		    }
		    Line {
		    SrcBlock		    "Const"
		    SrcPort		    1
		    Points		    [0, -35]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "SOC"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "Stop Simulation"
		    DstPort		    1
		    }
		    }
		    }
		    Line {
		    SrcBlock		    "Saber SOC's"
		    SrcPort		    1
		    Points		    [0, 0; 0, 15]
		    Branch {
		    Points		    [0, 35]
		    DstBlock		    "Mean"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "enhancedToWorkspace"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Const"
		    SrcPort		    1
		    DstBlock		    "stop sim"
		    DstPort		    enable
		    }
		    Line {
		    SrcBlock		    "Mean"
		    SrcPort		    1
		    DstBlock		    "soc mem"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "soc mem"
		    SrcPort		    1
		    Points		    [60, 0]
		    Branch {
		    Points		    [0, -30]
		    DstBlock		    "Goto <sdo>, <cs>"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "stop sim"
		    DstPort		    1
		    }
		    }
		  }
		}
		Block {
		  BlockType		  Gain
		  Name			  "Saber Current \nReversed"
		  Position		  [545, 107, 590, 123]
		  NamePlacement		  "alternate"
		  Gain			  "-1"
		  Multiplication	  "Element-wise(K.*u)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Temps"
		  Ports			  [1]
		  Position		  [670, 248, 740, 282]
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "Temps"
		    Location		    [994, 803, 1293, 940]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Saber Temps"
		    Position		    [25, 25, 55, 40]
		    Orientation		    "down"
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Mean"
		    Ports		    [1, 1]
		    Position		    [140, 47, 180, 73]
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    System {
		    Name		    "Mean"
		    Location		    [1009, 776, 1293, 873]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In"
		    Position		    [25, 33, 55, 47]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Average over \n10 modules"
		    Position		    [140, 25, 195, 55]
		    Gain		    "1/10"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum2"
		    Ports		    [1, 1]
		    Position		    [80, 25, 110, 55]
		    ShowName		    off
		    IconShape		    "round"
		    Inputs		    "1"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out"
		    Position		    [220, 33, 250, 47]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "[]"
		    }
		    Line {
		    SrcBlock		    "Sum2"
		    SrcPort		    1
		    DstBlock		    "Average over \n10 modules"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "In"
		    SrcPort		    1
		    DstBlock		    "Sum2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Average over \n10 modules"
		    SrcPort		    1
		    DstBlock		    "Out"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "enhancedToWorkspace"
		    Ports		    [1]
		    Position		    [205, 52, 300, 68]
		    ShowName		    off
		    CopyFcn		    "breakLinkCopyFcn"
		    ParentCloseFcn	    "breakLinkParCloseFcn"
		    FontSize		    8
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    on
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "enhancedToWorkspace"
		    MaskDescription	    "A wrapper for the Simulink \"To W"
"orkspace\" block that allows you to evaluate the name of the variable to log "
"to workspace. This is useful to avoid the double logging errors that occur wh"
"en you pull in two library models that attempt to log to the same variable."
		    MaskHelp		    "<h2>Enhanced To Workspace Block</"
"h2>\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gen"
"eral name of the variable. Variables are saved to the workspace as <i>general"
"Name_specificName</i>. Note that this is an evaluated variable. If you would "
"like to type in the value directly, it must be surrounded with single quotes."
" Otherwise you can input the name of a variable containing a char string.</li"
">\n<li><b>Specific Name:</b> This is the specific name of the variable. Note "
"that this is input as a char literal (i.e., you don't need quotes).</li>\n<li"
"><b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the var"
"iable will not be logged to the workspace. If 1, the variable will be logged."
" This is done so that variable logging can be turned off to improve speed.</l"
"i>\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toge"
"ther to allow one to dynamically resolve variable names at run time in simuli"
"nk. This is most powerful when used in conjunction with a masked subsystem to"
" allow multiple instances of that masked subsytem to be used in the same mode"
"l. The strategy is to set the generalName in the block mask which will allow "
"the block to change the general name for all variable logging on the fly. \n<"
"h3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspac"
"e block. These files are located in the &lt; ADVISOR root &gt;/GUI directory "
":\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initializatio"
"n for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the "
"block callback when the simulink block is copied. It is necessary to break th"
"e link to the enhancedToWorkspace similar to the To Workspace block in order "
"for it to be able to configure itself. (Try copying simulink's To Workspace b"
"lock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i"
"> This file is similar to the breakLinkCopyFcn and is used when a parent syst"
"em is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'K"
"eefe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</"
"B> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type"
"</B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</"
"UL>\n</VARDEF>\n-->\n"
		    MaskPromptString	    "General Name [char-evaluated]|Spe"
"cific Name [char-literal]|Enable flag (1=on,0=off)"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskVariables	    "generalName=@1;specificName=&2;lo"
"gFlag=@3;"
		    MaskInitialization	    "enhancedToWsMaker"
		    MaskDisplay		    "disp([generalName,'_',specificNam"
"e])"
		    MaskSelfModifiable	    on
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "generalName|mod_tmp|logFlag"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "enhancedToWorkspace"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "enhancedToWorkspace1"
		    Ports		    [1]
		    Position		    [135, 102, 230, 118]
		    ShowName		    off
		    CopyFcn		    "breakLinkCopyFcn"
		    ParentCloseFcn	    "breakLinkParCloseFcn"
		    FontSize		    8
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    on
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "enhancedToWorkspace"
		    MaskDescription	    "A wrapper for the Simulink \"To W"
"orkspace\" block that allows you to evaluate the name of the variable to log "
"to workspace. This is useful to avoid the double logging errors that occur wh"
"en you pull in two library models that attempt to log to the same variable."
		    MaskHelp		    "<h2>Enhanced To Workspace Block</"
"h2>\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gen"
"eral name of the variable. Variables are saved to the workspace as <i>general"
"Name_specificName</i>. Note that this is an evaluated variable. If you would "
"like to type in the value directly, it must be surrounded with single quotes."
" Otherwise you can input the name of a variable containing a char string.</li"
">\n<li><b>Specific Name:</b> This is the specific name of the variable. Note "
"that this is input as a char literal (i.e., you don't need quotes).</li>\n<li"
"><b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the var"
"iable will not be logged to the workspace. If 1, the variable will be logged."
" This is done so that variable logging can be turned off to improve speed.</l"
"i>\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toge"
"ther to allow one to dynamically resolve variable names at run time in simuli"
"nk. This is most powerful when used in conjunction with a masked subsystem to"
" allow multiple instances of that masked subsytem to be used in the same mode"
"l. The strategy is to set the generalName in the block mask which will allow "
"the block to change the general name for all variable logging on the fly. \n<"
"h3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspac"
"e block. These files are located in the &lt; ADVISOR root &gt;/GUI directory "
":\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initializatio"
"n for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the "
"block callback when the simulink block is copied. It is necessary to break th"
"e link to the enhancedToWorkspace similar to the To Workspace block in order "
"for it to be able to configure itself. (Try copying simulink's To Workspace b"
"lock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i"
"> This file is similar to the breakLinkCopyFcn and is used when a parent syst"
"em is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'K"
"eefe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</"
"B> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type"
"</B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</"
"UL>\n</VARDEF>\n-->\n"
		    MaskPromptString	    "General Name [char-evaluated]|Spe"
"cific Name [char-literal]|Enable flag (1=on,0=off)"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskVariables	    "generalName=@1;specificName=&2;lo"
"gFlag=@3;"
		    MaskInitialization	    "enhancedToWsMaker"
		    MaskDisplay		    "disp([generalName,'_',specificNam"
"e])"
		    MaskSelfModifiable	    on
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "generalName|saber_ess_temp|logFla"
"g"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "enhancedToWorkspace1"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		    }
		    }
		    Line {
		    SrcBlock		    "Saber Temps"
		    SrcPort		    1
		    Points		    [0, 0; 0, 15]
		    Branch {
		    DstBlock		    "Mean"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 50]
		    DstBlock		    "enhancedToWorkspace1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Mean"
		    SrcPort		    1
		    DstBlock		    "enhancedToWorkspace"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Thermal Power"
		  Ports			  [1]
		  Position		  [670, 310, 755, 340]
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "Thermal Power"
		    Location		    [279, 398, 758, 535]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Saber Thermal P"
		    Position		    [45, 42, 75, 58]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "# batteries"
		    Position		    [190, 41, 240, 59]
		    Gain		    "ess_module_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    "Saturation"
		    Position		    [120, 35, 150, 65]
		    UpperLimit		    "inf"
		    LowerLimit		    "0"
		    LinearizeAsGain	    on
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum2"
		    Ports		    [1, 1]
		    Position		    [310, 35, 340, 65]
		    ShowName		    off
		    IconShape		    "round"
		    Inputs		    "1"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "enhancedToWorkspace"
		    Ports		    [1]
		    Position		    [315, 87, 410, 103]
		    ShowName		    off
		    CopyFcn		    "breakLinkCopyFcn"
		    ParentCloseFcn	    "breakLinkParCloseFcn"
		    FontSize		    8
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    on
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "enhancedToWorkspace"
		    MaskDescription	    "A wrapper for the Simulink \"To W"
"orkspace\" block that allows you to evaluate the name of the variable to log "
"to workspace. This is useful to avoid the double logging errors that occur wh"
"en you pull in two library models that attempt to log to the same variable."
		    MaskHelp		    "<h2>Enhanced To Workspace Block</"
"h2>\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gen"
"eral name of the variable. Variables are saved to the workspace as <i>general"
"Name_specificName</i>. Note that this is an evaluated variable. If you would "
"like to type in the value directly, it must be surrounded with single quotes."
" Otherwise you can input the name of a variable containing a char string.</li"
">\n<li><b>Specific Name:</b> This is the specific name of the variable. Note "
"that this is input as a char literal (i.e., you don't need quotes).</li>\n<li"
"><b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the var"
"iable will not be logged to the workspace. If 1, the variable will be logged."
" This is done so that variable logging can be turned off to improve speed.</l"
"i>\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toge"
"ther to allow one to dynamically resolve variable names at run time in simuli"
"nk. This is most powerful when used in conjunction with a masked subsystem to"
" allow multiple instances of that masked subsytem to be used in the same mode"
"l. The strategy is to set the generalName in the block mask which will allow "
"the block to change the general name for all variable logging on the fly. \n<"
"h3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspac"
"e block. These files are located in the &lt; ADVISOR root &gt;/GUI directory "
":\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initializatio"
"n for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the "
"block callback when the simulink block is copied. It is necessary to break th"
"e link to the enhancedToWorkspace similar to the To Workspace block in order "
"for it to be able to configure itself. (Try copying simulink's To Workspace b"
"lock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i"
"> This file is similar to the breakLinkCopyFcn and is used when a parent syst"
"em is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'K"
"eefe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</"
"B> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type"
"</B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</"
"UL>\n</VARDEF>\n-->\n"
		    MaskPromptString	    "General Name [char-evaluated]|Spe"
"cific Name [char-literal]|Enable flag (1=on,0=off)"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskVariables	    "generalName=@1;specificName=&2;lo"
"gFlag=@3;"
		    MaskInitialization	    "enhancedToWsMaker"
		    MaskDisplay		    "disp([generalName,'_',specificNam"
"e])"
		    MaskSelfModifiable	    on
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "generalName|saber_ess_th_pwr|logF"
"lag"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "enhancedToWorkspace"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "enhancedToWorkspace1"
		    Ports		    [1]
		    Position		    [370, 42, 465, 58]
		    ShowName		    off
		    CopyFcn		    "breakLinkCopyFcn"
		    ParentCloseFcn	    "breakLinkParCloseFcn"
		    FontSize		    8
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    on
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "enhancedToWorkspace"
		    MaskDescription	    "A wrapper for the Simulink \"To W"
"orkspace\" block that allows you to evaluate the name of the variable to log "
"to workspace. This is useful to avoid the double logging errors that occur wh"
"en you pull in two library models that attempt to log to the same variable."
		    MaskHelp		    "<h2>Enhanced To Workspace Block</"
"h2>\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gen"
"eral name of the variable. Variables are saved to the workspace as <i>general"
"Name_specificName</i>. Note that this is an evaluated variable. If you would "
"like to type in the value directly, it must be surrounded with single quotes."
" Otherwise you can input the name of a variable containing a char string.</li"
">\n<li><b>Specific Name:</b> This is the specific name of the variable. Note "
"that this is input as a char literal (i.e., you don't need quotes).</li>\n<li"
"><b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the var"
"iable will not be logged to the workspace. If 1, the variable will be logged."
" This is done so that variable logging can be turned off to improve speed.</l"
"i>\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toge"
"ther to allow one to dynamically resolve variable names at run time in simuli"
"nk. This is most powerful when used in conjunction with a masked subsystem to"
" allow multiple instances of that masked subsytem to be used in the same mode"
"l. The strategy is to set the generalName in the block mask which will allow "
"the block to change the general name for all variable logging on the fly. \n<"
"h3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspac"
"e block. These files are located in the &lt; ADVISOR root &gt;/GUI directory "
":\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initializatio"
"n for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the "
"block callback when the simulink block is copied. It is necessary to break th"
"e link to the enhancedToWorkspace similar to the To Workspace block in order "
"for it to be able to configure itself. (Try copying simulink's To Workspace b"
"lock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i"
"> This file is similar to the breakLinkCopyFcn and is used when a parent syst"
"em is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'K"
"eefe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</"
"B> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type"
"</B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</"
"UL>\n</VARDEF>\n-->\n"
		    MaskPromptString	    "General Name [char-evaluated]|Spe"
"cific Name [char-literal]|Enable flag (1=on,0=off)"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskVariables	    "generalName=@1;specificName=&2;lo"
"gFlag=@3;"
		    MaskInitialization	    "enhancedToWsMaker"
		    MaskDisplay		    "disp([generalName,'_',specificNam"
"e])"
		    MaskSelfModifiable	    on
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "generalName|pwr_loss_a|logFlag"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "enhancedToWorkspace1"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		    }
		    }
		    Line {
		    SrcBlock		    "Sum2"
		    SrcPort		    1
		    DstBlock		    "enhancedToWorkspace1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "# batteries"
		    SrcPort		    1
		    Points		    [25, 0]
		    Branch {
		    DstBlock		    "Sum2"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 45]
		    DstBlock		    "enhancedToWorkspace"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Saber Thermal P"
		    SrcPort		    1
		    DstBlock		    "Saturation"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Saturation"
		    SrcPort		    1
		    DstBlock		    "# batteries"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Time Dependent Power Request"
		  Ports			  [1, 1]
		  Position		  [195, 33, 325, 57]
		  AncestorBlock		  "lib_energy_storage/Ess Choices/ener"
"gy storage <ess>\nSaber/Time Dependent Power Request"
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "Time Dependent Power Request"
		    Location		    [127, 108, 885, 796]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "P request"
		    Position		    [25, 358, 55, 372]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    Port {
		    PortNumber		    1
		    Name		    "P request"
		    TestPoint		    off
		    LinearAnalysisOutput    off
		    LinearAnalysisInput	    off
		    RTWStorageClass	    "Auto"
		    }
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    Position		    [105, 65, 135, 95]
		    Value		    "0"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Enabled\nSubsystem1"
		    Ports		    [1, 1, 1]
		    Position		    [270, 163, 370, 187]
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    on
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    System {
		    Name		    "Enabled\nSubsystem1"
		    Location		    [421, 301, 919, 601]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [110, 103, 140, 117]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [235, 20, 255, 40]
		    StatesWhenEnabling	    "held"
		    ShowOutputPort	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    Position		    [360, 103, 390, 117]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "[]"
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    From
		    Name		    "From"
		    Position		    [220, 452, 270, 468]
		    CloseFcn		    "tagdialog Close"
		    GotoTag		    "time"
		    }
		    Block {
		    BlockType		    From
		    Name		    "From1"
		    Position		    [190, 262, 240, 278]
		    CloseFcn		    "tagdialog Close"
		    GotoTag		    "time"
		    }
		    Block {
		    BlockType		    From
		    Name		    "From4"
		    Position		    [95, 137, 145, 153]
		    CloseFcn		    "tagdialog Close"
		    GotoTag		    "time"
		    }
		    Block {
		    BlockType		    InitialCondition
		    Name		    "IC"
		    Position		    [330, 443, 385, 477]
		    Value		    "time_step"
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Matrix\nConcatenation1"
		    Ports		    [6, 1]
		    Position		    [565, 35, 595, 600]
		    ShowName		    off
		    SourceBlock		    "lib_energy_storage/Ess Choices/en"
"ergy storage <ess>\nSaber/Matrix\nConcatenation1"
		    SourceType		    "Matrix Concatenation"
		    numInports		    "6"
		    catMethod		    "Horizontal"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    Position		    [380, 255, 410, 285]
		    X0			    ".001"
		    InheritSampleTime	    on
		    RTWStateStorageClass    "Auto"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory2"
		    Position		    [245, 350, 275, 380]
		    ShowName		    off
		    X0			    "80"
		    InheritSampleTime	    on
		    RTWStateStorageClass    "Auto"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    Position		    [225, 122, 255, 153]
		    ShowName		    off
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    "Saturation"
		    Position		    [275, 255, 305, 285]
		    UpperLimit		    "inf"
		    LowerLimit		    ".001"
		    LinearizeAsGain	    on
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "P request time"
		    Position		    [680, 313, 710, 327]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "[]"
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    Points		    [60, 0]
		    DstBlock		    "Enabled\nSubsystem1"
		    DstPort		    enable
		    }
		    Line {
		    SrcBlock		    "From4"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Enabled\nSubsystem1"
		    SrcPort		    1
		    DstBlock		    "Matrix\nConcatenation1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Memory2"
		    SrcPort		    1
		    DstBlock		    "Matrix\nConcatenation1"
		    DstPort		    4
		    }
		    Line {
		    SrcBlock		    "Matrix\nConcatenation1"
		    SrcPort		    1
		    DstBlock		    "P request time"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "IC"
		    SrcPort		    1
		    DstBlock		    "Matrix\nConcatenation1"
		    DstPort		    5
		    }
		    Line {
		    SrcBlock		    "Saturation"
		    SrcPort		    1
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "From1"
		    SrcPort		    1
		    DstBlock		    "Saturation"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    DstBlock		    "Matrix\nConcatenation1"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "From"
		    SrcPort		    1
		    DstBlock		    "IC"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    Points		    [55, 0]
		    Branch {
		    Points		    [0, 50]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Matrix\nConcatenation1"
		    DstPort		    1
		    }
		    }
		    Line {
		    Name		    "P request"
		    Labels		    [0, 0]
		    SrcBlock		    "P request"
		    SrcPort		    1
		    Points		    [35, 0]
		    Branch {
		    Points		    [85, 0]
		    Branch {
		    DstBlock		    "Memory2"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 190]
		    DstBlock		    "Matrix\nConcatenation1"
		    DstPort		    6
		    }
		    }
		    Branch {
		    Points		    [0, -190]
		    DstBlock		    "Enabled\nSubsystem1"
		    DstPort		    1
		    }
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Voltages"
		  Ports			  [1, 1]
		  Position		  [630, 114, 770, 146]
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "Voltages"
		    Location		    [713, 524, 1254, 752]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Saber\nVoltages"
		    Position		    [25, 93, 55, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "# batteries"
		    Position		    [90, 91, 140, 109]
		    Gain		    "ess_module_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <mc>, <gc>, <sdo>"
		    Position		    [345, 60, 425, 80]
		    BackgroundColor	    "lightBlue"
		    ShowName		    off
		    GotoTag		    "bus_voltage"
		    TagVisibility	    "scoped"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    Ports		    [1, 1]
		    Position		    [185, 25, 215, 55]
		    ShowName		    off
		    IconShape		    "round"
		    Inputs		    "1"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "enhancedToWorkspace"
		    Ports		    [1]
		    Position		    [185, 127, 280, 143]
		    ShowName		    off
		    CopyFcn		    "breakLinkCopyFcn"
		    ParentCloseFcn	    "breakLinkParCloseFcn"
		    FontSize		    8
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    on
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "enhancedToWorkspace"
		    MaskDescription	    "A wrapper for the Simulink \"To W"
"orkspace\" block that allows you to evaluate the name of the variable to log "
"to workspace. This is useful to avoid the double logging errors that occur wh"
"en you pull in two library models that attempt to log to the same variable."
		    MaskHelp		    "<h2>Enhanced To Workspace Block</"
"h2>\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gen"
"eral name of the variable. Variables are saved to the workspace as <i>general"
"Name_specificName</i>. Note that this is an evaluated variable. If you would "
"like to type in the value directly, it must be surrounded with single quotes."
" Otherwise you can input the name of a variable containing a char string.</li"
">\n<li><b>Specific Name:</b> This is the specific name of the variable. Note "
"that this is input as a char literal (i.e., you don't need quotes).</li>\n<li"
"><b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the var"
"iable will not be logged to the workspace. If 1, the variable will be logged."
" This is done so that variable logging can be turned off to improve speed.</l"
"i>\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toge"
"ther to allow one to dynamically resolve variable names at run time in simuli"
"nk. This is most powerful when used in conjunction with a masked subsystem to"
" allow multiple instances of that masked subsytem to be used in the same mode"
"l. The strategy is to set the generalName in the block mask which will allow "
"the block to change the general name for all variable logging on the fly. \n<"
"h3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspac"
"e block. These files are located in the &lt; ADVISOR root &gt;/GUI directory "
":\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initializatio"
"n for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the "
"block callback when the simulink block is copied. It is necessary to break th"
"e link to the enhancedToWorkspace similar to the To Workspace block in order "
"for it to be able to configure itself. (Try copying simulink's To Workspace b"
"lock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i"
"> This file is similar to the breakLinkCopyFcn and is used when a parent syst"
"em is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'K"
"eefe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</"
"B> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type"
"</B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</"
"UL>\n</VARDEF>\n-->\n"
		    MaskPromptString	    "General Name [char-evaluated]|Spe"
"cific Name [char-literal]|Enable flag (1=on,0=off)"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskVariables	    "generalName=@1;specificName=&2;lo"
"gFlag=@3;"
		    MaskInitialization	    "enhancedToWsMaker"
		    MaskDisplay		    "disp([generalName,'_',specificNam"
"e])"
		    MaskSelfModifiable	    on
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "generalName|saber_ess_voltage|log"
"Flag"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "enhancedToWorkspace"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "enhancedToWorkspace1"
		    Ports		    [1]
		    Position		    [345, 107, 440, 123]
		    ShowName		    off
		    CopyFcn		    "breakLinkCopyFcn"
		    ParentCloseFcn	    "breakLinkParCloseFcn"
		    FontSize		    8
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    on
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "enhancedToWorkspace"
		    MaskDescription	    "A wrapper for the Simulink \"To W"
"orkspace\" block that allows you to evaluate the name of the variable to log "
"to workspace. This is useful to avoid the double logging errors that occur wh"
"en you pull in two library models that attempt to log to the same variable."
		    MaskHelp		    "<h2>Enhanced To Workspace Block</"
"h2>\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gen"
"eral name of the variable. Variables are saved to the workspace as <i>general"
"Name_specificName</i>. Note that this is an evaluated variable. If you would "
"like to type in the value directly, it must be surrounded with single quotes."
" Otherwise you can input the name of a variable containing a char string.</li"
">\n<li><b>Specific Name:</b> This is the specific name of the variable. Note "
"that this is input as a char literal (i.e., you don't need quotes).</li>\n<li"
"><b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the var"
"iable will not be logged to the workspace. If 1, the variable will be logged."
" This is done so that variable logging can be turned off to improve speed.</l"
"i>\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toge"
"ther to allow one to dynamically resolve variable names at run time in simuli"
"nk. This is most powerful when used in conjunction with a masked subsystem to"
" allow multiple instances of that masked subsytem to be used in the same mode"
"l. The strategy is to set the generalName in the block mask which will allow "
"the block to change the general name for all variable logging on the fly. \n<"
"h3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspac"
"e block. These files are located in the &lt; ADVISOR root &gt;/GUI directory "
":\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initializatio"
"n for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the "
"block callback when the simulink block is copied. It is necessary to break th"
"e link to the enhancedToWorkspace similar to the To Workspace block in order "
"for it to be able to configure itself. (Try copying simulink's To Workspace b"
"lock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i"
"> This file is similar to the breakLinkCopyFcn and is used when a parent syst"
"em is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'K"
"eefe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</"
"B> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type"
"</B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</"
"UL>\n</VARDEF>\n-->\n"
		    MaskPromptString	    "General Name [char-evaluated]|Spe"
"cific Name [char-literal]|Enable flag (1=on,0=off)"
		    MaskStyleString	    "edit,edit,edit"
		    MaskTunableValueString  "on,on,on"
		    MaskCallbackString	    "||"
		    MaskEnableString	    "on,on,on"
		    MaskVisibilityString    "on,on,on"
		    MaskToolTipString	    "on,on,on"
		    MaskVariables	    "generalName=@1;specificName=&2;lo"
"gFlag=@3;"
		    MaskInitialization	    "enhancedToWsMaker"
		    MaskDisplay		    "disp([generalName,'_',specificNam"
"e])"
		    MaskSelfModifiable	    on
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "generalName|voltage|logFlag"
		    MaskVariableAliases	    ",,"
		    System {
		    Name		    "enhancedToWorkspace1"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "ADV\nVoltage"
		    Position		    [465, 33, 495, 47]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "[]"
		    }
		    Line {
		    SrcBlock		    "# batteries"
		    SrcPort		    1
		    Points		    [-10, 0; 35, 0]
		    Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "enhancedToWorkspace"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    Points		    [0, 0; 30, 0]
		    Branch {
		    Points		    [0, 30; 65, 0]
		    Branch {
		    DstBlock		    "Goto <mc>, <gc>, <sdo>"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 45]
		    DstBlock		    "enhancedToWorkspace1"
		    DstPort		    1
		    }
		    }
		    Branch {
		    DstBlock		    "ADV\nVoltage"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Saber\nVoltages"
		    SrcPort		    1
		    DstBlock		    "# batteries"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace"
		  Ports			  [1]
		  Position		  [630, 42, 725, 58]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|current|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "ess_max_soc"
		  Position		  [70, 210, 100, 240]
		  Value			  "ess_max_soc"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "ess_max_volts"
		  Position		  [70, 140, 100, 170]
		  Value			  "ess_max_volts"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "ess_min_soc"
		  Position		  [170, 245, 200, 275]
		  Value			  "ess_min_soc"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "ess_min_volts"
		  Position		  [175, 175, 205, 205]
		  Value			  "ess_min_volts"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "ess_mod_cpm"
		  Position		  [135, 665, 165, 695]
		  Value			  "ess_mod_cpm"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "ess_th_res"
		  Position		  [25, 630, 55, 660]
		  Value			  "ess_th_res"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "max pack\npwr (W)"
		  Ports			  []
		  Position		  [830, 235, 860, 265]
		  ShowPortLabels	  off
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "max pack\npwr (W)"
		    Location		    [806, 295, 1261, 432]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Goto
		    Name		    "Goto <cs>1"
		    Position		    [340, 60, 420, 80]
		    BackgroundColor	    "lightBlue"
		    ShowName		    off
		    GotoTag		    "ess_max_pwr"
		    TagVisibility	    "scoped"
		    }
		    Block {
		    BlockType		    Ground
		    Name		    "Ground"
		    Position		    [245, 60, 265, 80]
		    }
		    Line {
		    SrcBlock		    "Ground"
		    SrcPort		    1
		    DstBlock		    "Goto <cs>1"
		    DstPort		    1
		    }
		    Annotation {
		    Position		    [92, 38]
		    Text		    "Edit in the future\nUsed in serie"
"s power follower"
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "saber_air_temp"
		  Position		  [135, 595, 165, 625]
		  Value			  "saber_air_temp"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "saber_init_soc"
		  Position		  [130, 315, 160, 345]
		  Value			  "saber_init_soc"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "saber_init_temp"
		  Position		  [35, 560, 65, 590]
		  Value			  "saber_init_temp"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "saber_init_voc"
		  Position		  [30, 280, 60, 310]
		  Value			  "saber_init_voc"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "saber_k_cb"
		  Position		  [125, 455, 155, 485]
		  Value			  "saber_k_cb"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "saber_k_cc"
		  Position		  [30, 490, 60, 520]
		  Value			  "saber_k_cc"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "saber_k_rc"
		  Position		  [25, 350, 55, 380]
		  Value			  "saber_k_rc"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "saber_k_re"
		  Position		  [125, 385, 155, 415]
		  Value			  "saber_k_re"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "saber_k_rt"
		  Position		  [25, 420, 55, 450]
		  Value			  "saber_k_rt"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "saber_k_soc"
		  Position		  [135, 525, 165, 555]
		  Value			  "saber_k_soc"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Outport
		  Name			  "power available\nto bus (W)"
		  Position		  [990, 105, 1010, 125]
		  FontName		  "Arial"
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "S-Function that calls \nSaber co-si"
"mulation\ninputs: power request\nload parameters\noutputs: accessory power\nm"
"odel outputs: currrent, voltage"
		  SrcPort		  1
		  DstBlock		  "Demux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  2
		  DstBlock		  "Voltages"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  4
		  Points		  [70, 0; 0, 105]
		  DstBlock		  "Temps"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  3
		  Points		  [85, 0; 0, 55]
		  DstBlock		  "SOC's"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Voltages"
		  SrcPort		  1
		  DstBlock		  "Power"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Power"
		  SrcPort		  1
		  DstBlock		  "power available\nto bus (W)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  1
		  DstBlock		  "Saber Current \nReversed"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saber Current \nReversed"
		  SrcPort		  1
		  Points		  [15, 0; 0, -15]
		  Branch {
		    DstBlock		    "Power"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -50]
		    DstBlock		    "enhancedToWorkspace"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  5
		  Points		  [0, 150]
		  DstBlock		  "Thermal Power"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "power req'd\ninto bus (W)"
		  SrcPort		  1
		  DstBlock		  "Power request"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Matrix\nConcatenation1"
		  SrcPort		  1
		  DstBlock		  "S-Function that calls \nSaber co-si"
"mulation\ninputs: power request\nload parameters\noutputs: accessory power\nm"
"odel outputs: currrent, voltage"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Time Dependent Power Request"
		  SrcPort		  1
		  Points		  [25, 0; 0, 35; -150, 0; 0, 40]
		  DstBlock		  "Matrix\nConcatenation1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "ess_max_volts"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "ess_min_volts"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "ess_max_soc"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation1"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "ess_min_soc"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation1"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  2
		  DstBlock		  "Matrix\nConcatenation2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  3
		  DstBlock		  "Matrix\nConcatenation2"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  4
		  DstBlock		  "Matrix\nConcatenation2"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  5
		  DstBlock		  "Matrix\nConcatenation2"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  6
		  DstBlock		  "Matrix\nConcatenation2"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  7
		  DstBlock		  "Matrix\nConcatenation2"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  8
		  DstBlock		  "Matrix\nConcatenation2"
		  DstPort		  8
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  9
		  DstBlock		  "Matrix\nConcatenation2"
		  DstPort		  9
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  10
		  DstBlock		  "Matrix\nConcatenation2"
		  DstPort		  10
		}
		Line {
		  SrcBlock		  "saber_init_soc"
		  SrcPort		  1
		  DstBlock		  "Demux2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  2
		  DstBlock		  "Matrix\nConcatenation3"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  3
		  DstBlock		  "Matrix\nConcatenation3"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  4
		  DstBlock		  "Matrix\nConcatenation3"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  5
		  DstBlock		  "Matrix\nConcatenation3"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  6
		  DstBlock		  "Matrix\nConcatenation3"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  7
		  DstBlock		  "Matrix\nConcatenation3"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  8
		  DstBlock		  "Matrix\nConcatenation3"
		  DstPort		  8
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  9
		  DstBlock		  "Matrix\nConcatenation3"
		  DstPort		  9
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  10
		  DstBlock		  "Matrix\nConcatenation3"
		  DstPort		  10
		}
		Line {
		  SrcBlock		  "saber_k_rc"
		  SrcPort		  1
		  DstBlock		  "Demux3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux3"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation4"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux3"
		  SrcPort		  2
		  DstBlock		  "Matrix\nConcatenation4"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux3"
		  SrcPort		  3
		  DstBlock		  "Matrix\nConcatenation4"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Demux3"
		  SrcPort		  4
		  DstBlock		  "Matrix\nConcatenation4"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Demux3"
		  SrcPort		  5
		  DstBlock		  "Matrix\nConcatenation4"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "Demux3"
		  SrcPort		  6
		  DstBlock		  "Matrix\nConcatenation4"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "Demux3"
		  SrcPort		  7
		  DstBlock		  "Matrix\nConcatenation4"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "Demux3"
		  SrcPort		  8
		  DstBlock		  "Matrix\nConcatenation4"
		  DstPort		  8
		}
		Line {
		  SrcBlock		  "Demux3"
		  SrcPort		  9
		  DstBlock		  "Matrix\nConcatenation4"
		  DstPort		  9
		}
		Line {
		  SrcBlock		  "Demux3"
		  SrcPort		  10
		  DstBlock		  "Matrix\nConcatenation4"
		  DstPort		  10
		}
		Line {
		  SrcBlock		  "saber_k_re"
		  SrcPort		  1
		  DstBlock		  "Demux4"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux4"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation5"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux4"
		  SrcPort		  2
		  DstBlock		  "Matrix\nConcatenation5"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux4"
		  SrcPort		  3
		  DstBlock		  "Matrix\nConcatenation5"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Demux4"
		  SrcPort		  4
		  DstBlock		  "Matrix\nConcatenation5"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Demux4"
		  SrcPort		  5
		  DstBlock		  "Matrix\nConcatenation5"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "Demux4"
		  SrcPort		  6
		  DstBlock		  "Matrix\nConcatenation5"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "Demux4"
		  SrcPort		  7
		  DstBlock		  "Matrix\nConcatenation5"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "Demux4"
		  SrcPort		  8
		  DstBlock		  "Matrix\nConcatenation5"
		  DstPort		  8
		}
		Line {
		  SrcBlock		  "Demux4"
		  SrcPort		  9
		  DstBlock		  "Matrix\nConcatenation5"
		  DstPort		  9
		}
		Line {
		  SrcBlock		  "Demux4"
		  SrcPort		  10
		  DstBlock		  "Matrix\nConcatenation5"
		  DstPort		  10
		}
		Line {
		  SrcBlock		  "Demux5"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation6"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux5"
		  SrcPort		  2
		  DstBlock		  "Matrix\nConcatenation6"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux5"
		  SrcPort		  3
		  DstBlock		  "Matrix\nConcatenation6"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Demux5"
		  SrcPort		  4
		  DstBlock		  "Matrix\nConcatenation6"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Demux5"
		  SrcPort		  5
		  DstBlock		  "Matrix\nConcatenation6"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "Demux5"
		  SrcPort		  6
		  DstBlock		  "Matrix\nConcatenation6"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "Demux5"
		  SrcPort		  7
		  DstBlock		  "Matrix\nConcatenation6"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "Demux5"
		  SrcPort		  8
		  DstBlock		  "Matrix\nConcatenation6"
		  DstPort		  8
		}
		Line {
		  SrcBlock		  "Demux5"
		  SrcPort		  9
		  DstBlock		  "Matrix\nConcatenation6"
		  DstPort		  9
		}
		Line {
		  SrcBlock		  "Demux5"
		  SrcPort		  10
		  DstBlock		  "Matrix\nConcatenation6"
		  DstPort		  10
		}
		Line {
		  SrcBlock		  "saber_k_cb"
		  SrcPort		  1
		  DstBlock		  "Demux6"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux6"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation7"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux6"
		  SrcPort		  2
		  DstBlock		  "Matrix\nConcatenation7"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux6"
		  SrcPort		  3
		  DstBlock		  "Matrix\nConcatenation7"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Demux6"
		  SrcPort		  4
		  DstBlock		  "Matrix\nConcatenation7"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Demux6"
		  SrcPort		  5
		  DstBlock		  "Matrix\nConcatenation7"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "Demux6"
		  SrcPort		  6
		  DstBlock		  "Matrix\nConcatenation7"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "Demux6"
		  SrcPort		  7
		  DstBlock		  "Matrix\nConcatenation7"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "Demux6"
		  SrcPort		  8
		  DstBlock		  "Matrix\nConcatenation7"
		  DstPort		  8
		}
		Line {
		  SrcBlock		  "Demux6"
		  SrcPort		  9
		  DstBlock		  "Matrix\nConcatenation7"
		  DstPort		  9
		}
		Line {
		  SrcBlock		  "Demux6"
		  SrcPort		  10
		  DstBlock		  "Matrix\nConcatenation7"
		  DstPort		  10
		}
		Line {
		  SrcBlock		  "saber_k_rt"
		  SrcPort		  1
		  DstBlock		  "Demux5"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Matrix\nConcatenation2"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation1"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "saber_init_voc"
		  SrcPort		  1
		  DstBlock		  "Demux1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Matrix\nConcatenation3"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation1"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "Matrix\nConcatenation4"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation1"
		  DstPort		  8
		}
		Line {
		  SrcBlock		  "Matrix\nConcatenation6"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation1"
		  DstPort		  10
		}
		Line {
		  SrcBlock		  "Matrix\nConcatenation7"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation1"
		  DstPort		  11
		}
		Line {
		  SrcBlock		  "Matrix\nConcatenation5"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation1"
		  DstPort		  9
		}
		Line {
		  SrcBlock		  "saber_k_cc"
		  SrcPort		  1
		  DstBlock		  "Demux8"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux8"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation9"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux8"
		  SrcPort		  2
		  DstBlock		  "Matrix\nConcatenation9"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux8"
		  SrcPort		  3
		  DstBlock		  "Matrix\nConcatenation9"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Demux8"
		  SrcPort		  4
		  DstBlock		  "Matrix\nConcatenation9"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Demux8"
		  SrcPort		  5
		  DstBlock		  "Matrix\nConcatenation9"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "Demux8"
		  SrcPort		  6
		  DstBlock		  "Matrix\nConcatenation9"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "Demux8"
		  SrcPort		  7
		  DstBlock		  "Matrix\nConcatenation9"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "Demux8"
		  SrcPort		  8
		  DstBlock		  "Matrix\nConcatenation9"
		  DstPort		  8
		}
		Line {
		  SrcBlock		  "Demux8"
		  SrcPort		  9
		  DstBlock		  "Matrix\nConcatenation9"
		  DstPort		  9
		}
		Line {
		  SrcBlock		  "Demux8"
		  SrcPort		  10
		  DstBlock		  "Matrix\nConcatenation9"
		  DstPort		  10
		}
		Line {
		  SrcBlock		  "saber_init_temp"
		  SrcPort		  1
		  DstBlock		  "Demux9"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux9"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation10"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux9"
		  SrcPort		  2
		  DstBlock		  "Matrix\nConcatenation10"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux9"
		  SrcPort		  3
		  DstBlock		  "Matrix\nConcatenation10"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Demux9"
		  SrcPort		  4
		  DstBlock		  "Matrix\nConcatenation10"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Demux9"
		  SrcPort		  5
		  DstBlock		  "Matrix\nConcatenation10"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "Demux9"
		  SrcPort		  6
		  DstBlock		  "Matrix\nConcatenation10"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "Demux9"
		  SrcPort		  7
		  DstBlock		  "Matrix\nConcatenation10"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "Demux9"
		  SrcPort		  8
		  DstBlock		  "Matrix\nConcatenation10"
		  DstPort		  8
		}
		Line {
		  SrcBlock		  "Demux9"
		  SrcPort		  9
		  DstBlock		  "Matrix\nConcatenation10"
		  DstPort		  9
		}
		Line {
		  SrcBlock		  "Demux9"
		  SrcPort		  10
		  DstBlock		  "Matrix\nConcatenation10"
		  DstPort		  10
		}
		Line {
		  SrcBlock		  "ess_th_res"
		  SrcPort		  1
		  DstBlock		  "Demux10"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux10"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation11"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux10"
		  SrcPort		  2
		  DstBlock		  "Matrix\nConcatenation11"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux10"
		  SrcPort		  3
		  DstBlock		  "Matrix\nConcatenation11"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Demux10"
		  SrcPort		  4
		  DstBlock		  "Matrix\nConcatenation11"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Demux10"
		  SrcPort		  5
		  DstBlock		  "Matrix\nConcatenation11"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "Demux10"
		  SrcPort		  6
		  DstBlock		  "Matrix\nConcatenation11"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "Demux10"
		  SrcPort		  7
		  DstBlock		  "Matrix\nConcatenation11"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "Demux10"
		  SrcPort		  8
		  DstBlock		  "Matrix\nConcatenation11"
		  DstPort		  8
		}
		Line {
		  SrcBlock		  "Demux10"
		  SrcPort		  9
		  DstBlock		  "Matrix\nConcatenation11"
		  DstPort		  9
		}
		Line {
		  SrcBlock		  "Demux10"
		  SrcPort		  10
		  DstBlock		  "Matrix\nConcatenation11"
		  DstPort		  10
		}
		Line {
		  SrcBlock		  "saber_k_soc"
		  SrcPort		  1
		  DstBlock		  "Demux11"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux11"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation12"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux11"
		  SrcPort		  2
		  DstBlock		  "Matrix\nConcatenation12"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux11"
		  SrcPort		  3
		  DstBlock		  "Matrix\nConcatenation12"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Demux11"
		  SrcPort		  4
		  DstBlock		  "Matrix\nConcatenation12"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Demux11"
		  SrcPort		  5
		  DstBlock		  "Matrix\nConcatenation12"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "Demux11"
		  SrcPort		  6
		  DstBlock		  "Matrix\nConcatenation12"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "Demux11"
		  SrcPort		  7
		  DstBlock		  "Matrix\nConcatenation12"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "Demux11"
		  SrcPort		  8
		  DstBlock		  "Matrix\nConcatenation12"
		  DstPort		  8
		}
		Line {
		  SrcBlock		  "Demux11"
		  SrcPort		  9
		  DstBlock		  "Matrix\nConcatenation12"
		  DstPort		  9
		}
		Line {
		  SrcBlock		  "Demux11"
		  SrcPort		  10
		  DstBlock		  "Matrix\nConcatenation12"
		  DstPort		  10
		}
		Line {
		  SrcBlock		  "Matrix\nConcatenation12"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation1"
		  DstPort		  13
		}
		Line {
		  SrcBlock		  "saber_air_temp"
		  SrcPort		  1
		  DstBlock		  "Demux12"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux12"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation13"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux12"
		  SrcPort		  2
		  DstBlock		  "Matrix\nConcatenation13"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux12"
		  SrcPort		  3
		  DstBlock		  "Matrix\nConcatenation13"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Demux12"
		  SrcPort		  4
		  DstBlock		  "Matrix\nConcatenation13"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Demux12"
		  SrcPort		  5
		  DstBlock		  "Matrix\nConcatenation13"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "Demux12"
		  SrcPort		  6
		  DstBlock		  "Matrix\nConcatenation13"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "Demux12"
		  SrcPort		  7
		  DstBlock		  "Matrix\nConcatenation13"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "Demux12"
		  SrcPort		  8
		  DstBlock		  "Matrix\nConcatenation13"
		  DstPort		  8
		}
		Line {
		  SrcBlock		  "Demux12"
		  SrcPort		  9
		  DstBlock		  "Matrix\nConcatenation13"
		  DstPort		  9
		}
		Line {
		  SrcBlock		  "Demux12"
		  SrcPort		  10
		  DstBlock		  "Matrix\nConcatenation13"
		  DstPort		  10
		}
		Line {
		  SrcBlock		  "Matrix\nConcatenation13"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation1"
		  DstPort		  15
		}
		Line {
		  SrcBlock		  "ess_mod_cpm"
		  SrcPort		  1
		  DstBlock		  "Demux13"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux13"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation14"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux13"
		  SrcPort		  2
		  DstBlock		  "Matrix\nConcatenation14"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux13"
		  SrcPort		  3
		  DstBlock		  "Matrix\nConcatenation14"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Demux13"
		  SrcPort		  4
		  DstBlock		  "Matrix\nConcatenation14"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Demux13"
		  SrcPort		  5
		  DstBlock		  "Matrix\nConcatenation14"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "Demux13"
		  SrcPort		  6
		  DstBlock		  "Matrix\nConcatenation14"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "Matrix\nConcatenation14"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation1"
		  DstPort		  17
		}
		Line {
		  SrcBlock		  "Matrix\nConcatenation9"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation1"
		  DstPort		  12
		}
		Line {
		  SrcBlock		  "Matrix\nConcatenation10"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation1"
		  DstPort		  14
		}
		Line {
		  SrcBlock		  "Matrix\nConcatenation11"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation1"
		  DstPort		  16
		}
		Line {
		  SrcBlock		  "Demux13"
		  SrcPort		  7
		  DstBlock		  "Matrix\nConcatenation14"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "Demux13"
		  SrcPort		  9
		  DstBlock		  "Matrix\nConcatenation14"
		  DstPort		  9
		}
		Line {
		  SrcBlock		  "Demux13"
		  SrcPort		  8
		  DstBlock		  "Matrix\nConcatenation14"
		  DstPort		  8
		}
		Line {
		  SrcBlock		  "Demux13"
		  SrcPort		  10
		  DstBlock		  "Matrix\nConcatenation14"
		  DstPort		  10
		}
		Line {
		  SrcBlock		  "Power request"
		  SrcPort		  1
		  DstBlock		  "Time Dependent Power Request"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "signal\nannotator"
	      Ports		      [1, 1]
	      Position		      [375, 56, 420, 84]
	      NamePlacement	      "alternate"
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"signal\nannotator"
		Location		[202, 77, 966, 752]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "In1"
		  Position		  [110, 103, 140, 117]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		  Port {
		    PortNumber		    1
		    Name		    "ess_pwr_out_r"
		    TestPoint		    off
		    LinearAnalysisOutput    off
		    LinearAnalysisInput	    off
		    RTWStorageClass	    "Auto"
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  Position		  [430, 103, 460, 117]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "[]"
		}
		Line {
		  Name			  "ess_pwr_out_r"
		  Labels		  [0, 0]
		  SrcBlock		  "In1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "required out"
	      Position		      [500, 60, 520, 80]
	      FontName		      "Arial"
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "power available\nto bus (W)"
	      Position		      [330, 110, 350, 130]
	      FontName		      "Arial"
	      Port		      "2"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "sensors"
	      Position		      [580, 265, 600, 285]
	      FontName		      "Arial"
	      Port		      "3"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "power req'd\ninto bus (W)"
	      SrcPort		      1
	      Points		      [0, 0; 35, 0]
	      Branch {
		Points			[0, -50]
		DstBlock		"signal\nannotator"
		DstPort			1
	      }
	      Branch {
		DstBlock		"model"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "model"
	      SrcPort		      1
	      DstBlock		      "power available\nto bus (W)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "control"
	      SrcPort		      1
	      DstBlock		      "Terminator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Bus\nCreator"
	      SrcPort		      1
	      DstBlock		      "sensors"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "signal\nannotator"
	      SrcPort		      1
	      DstBlock		      "required out"
	      DstPort		      1
	    }
	    Line {
	      Name		      "bus_voltage"
	      Labels		      [0, 0]
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      1
	    }
	    Line {
	      Name		      "ess_max_pwr"
	      Labels		      [0, 0]
	      SrcBlock		      "From2"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      2
	    }
	    Line {
	      Name		      "SOC"
	      Labels		      [0, 0]
	      SrcBlock		      "From5"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      3
	    }
	    Annotation {
	      Position		      [247, 190]
	      BackgroundColor	      "yellow"
	      Text		      "Interface"
	      FontName		      "Arial"
	      FontSize		      22
	      FontWeight	      "bold"
	      FontAngle		      "italic"
	    }
	    Annotation {
	      Position		      [252, 40]
	      BackgroundColor	      "yellow"
	      Text		      "Model"
	      FontName		      "Arial"
	      FontSize		      22
	      FontWeight	      "bold"
	      FontAngle		      "italic"
	    }
	  }
	}
	Block {
	  BlockType		  Goto
	  Name			  "reqOutTag"
	  Position		  [365, 124, 465, 166]
	  ForegroundColor	  "red"
	  BackgroundColor	  "black"
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	  GotoTag		  "essReqOut"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "sensorsTag"
	  Position		  [365, 274, 465, 316]
	  ForegroundColor	  "red"
	  BackgroundColor	  "black"
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	  GotoTag		  "essSensors"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Outport
	  Name			  "power available\nto bus (W)"
	  Position		  [425, 210, 445, 230]
	  FontName		  "Arial"
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Line {
	  SrcBlock		  "power req'd\ninto bus (W)"
	  SrcPort		  1
	  DstBlock		  "energy storage <ess>\nSaber"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "controlTag"
	  SrcPort		  1
	  Points		  [15, 0; 0, -65]
	  DstBlock		  "energy storage <ess>\nSaber"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "energy storage <ess>\nSaber"
	  SrcPort		  1
	  Points		  [40, 0]
	  DstBlock		  "reqOutTag"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "energy storage <ess>\nSaber"
	  SrcPort		  2
	  DstBlock		  "power available\nto bus (W)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "energy storage <ess>\nSaber"
	  SrcPort		  3
	  Points		  [25, 0; 0, 60]
	  DstBlock		  "sensorsTag"
	  DstPort		  1
	}
	Annotation {
	  Position		  [297, 40]
	  BackgroundColor	  "yellow"
	  Text			  "Energy Storage System"
	  FontName		  "Arial"
	  FontSize		  18
	  FontWeight		  "bold"
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "energy storage <ess>\nfundamental model"
      Ports		      [1, 1]
      Position		      [190, 238, 255, 282]
      BackgroundColor	      "yellow"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskType		      "Stand-Alone Energy Storage System Mask"
      MaskPromptString	      "General Name of this Component [char]|Log Varia"
"bles to Workspace?|Initialization File(s) [cell array of char]|Modification C"
"ell [2 column cell array of param and val]|Icon image file name [char--evalua"
"ted]|DEBUG"
      MaskStyleString	      "edit,popup(Don't Log|Log Variable),edit,edit,ed"
"it,popup(ON|OFF)"
      MaskTunableValueString  "on,on,on,on,on,on"
      MaskCallbackString      "|||||"
      MaskEnableString	      "on,on,on,on,on,on"
      MaskVisibilityString    "on,on,on,on,on,on"
      MaskToolTipString	      "on,on,on,on,on,on"
      MaskVariables	      "generalName=@1;logPick=@2;initFileName=@3;modCe"
"ll=@4;imgFileName=@5;DEBUG=&6;"
      MaskInitialization      "% initialization via m-file script\nadvSACompMa"
"skInit;"
      MaskDisplay	      "image(imread(imgFileName))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      MaskValueString	      "'ess'|Log Variable|{}|{}|'bdi_ess.jpg'|OFF"
      MaskVariableAliases     ",,,,,"
      System {
	Name			"energy storage <ess>\nfundamental model"
	Location		[202, 77, 966, 744]
	Open			off
	ModelBrowserVisibility	on
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "power req'd\ninto bus (W)"
	  Position		  [140, 200, 160, 220]
	  FontName		  "Arial"
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Block NOTES"
	  Ports			  []
	  Position		  [75, 90, 131, 130]
	  BackgroundColor	  "green"
	  ShowName		  off
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "disp('Block\\nNOTES')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Block NOTES"
	    Location		    [256, 329, 741, 634]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Annotation {
	      Position		      [242, 146]
	      Text		      "This is a stand-alone version of an ene"
"rgy storage system\n\nSeveral different models are available"
	    }
	  }
	}
	Block {
	  BlockType		  From
	  Name			  "controlTag"
	  Position		  [80, 276, 190, 314]
	  ForegroundColor	  "red"
	  BackgroundColor	  "black"
	  CloseFcn		  "tagdialog Close"
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	  GotoTag		  "essControl"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "documentation9"
	  Ports			  []
	  Position		  [145, 91, 174, 130]
	  BackgroundColor	  "orange"
	  DropShadow		  on
	  ShowName		  off
	  OpenFcn		  "web(['file:\\\\\\' which('energy_storage.ht"
"m')]);"
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "documentation9"
	    Location		    [129, 62, 308, 146]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "energy storage <ess>\nfundamental model"
	  Ports			  [2, 3]
	  Position		  [240, 198, 305, 242]
	  ForegroundColor	  "magenta"
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('bdi_ess.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "energy storage <ess>\nfundamental model"
	    Location		    [214, 74, 961, 744]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "power req'd\ninto bus (W)"
	      Position		      [155, 130, 175, 150]
	      FontName		      "Arial"
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "control"
	      Position		      [70, 295, 90, 315]
	      FontName		      "Arial"
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      BusCreator
	      Name		      "Bus\nCreator"
	      Ports		      [3, 1]
	      Position		      [530, 245, 555, 375]
	      ShowName		      off
	      Inputs		      "3"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      Position		      [340, 253, 425, 277]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "bus_voltage"
	      Port {
		PortNumber		1
		Name			"bus_voltage"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From2"
	      Position		      [340, 298, 440, 322]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_max_pwr"
	      Port {
		PortNumber		1
		Name			"ess_max_pwr"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From5"
	      Position		      [340, 343, 440, 367]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	      Port {
		PortNumber		1
		Name			"SOC"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility1"
	      Position		      [245, 252, 330, 274]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "bus_voltage"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility2"
	      Position		      [245, 297, 330, 319]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_max_pwr"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility6"
	      Position		      [245, 342, 330, 364]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      Terminator
	      Name		      "Terminator"
	      Position		      [120, 295, 140, 315]
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "model"
	      Ports		      [1, 1]
	      Position		      [235, 110, 275, 170]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"model"
		Location		[275, 106, 1025, 488]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"automatic"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "power req'd\ninto bus (W)"
		  Position		  [25, 110, 45, 130]
		  FontName		  "Arial"
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Gain
		  Name			  "# batteries"
		  Position		  [560, 65, 610, 85]
		  Gain			  "ess_module_num"
		  Multiplication	  "Element-wise(K.*u)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Gain
		  Name			  "# batteries1"
		  Position		  [615, 106, 665, 124]
		  Gain			  "ess_module_num"
		  Multiplication	  "Element-wise(K.*u)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Gain
		  Name			  "1/# batteries"
		  Position		  [165, 105, 215, 135]
		  Gain			  "1/ess_module_num"
		  Multiplication	  "Element-wise(K.*u)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  Ports			  []
		  Position		  [850, 400, 906, 440]
		  BackgroundColor	  "green"
		  ShowName		  off
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [211, 187, 723, 361]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Annotation {
		    Position		    [256, 77]
		    Text		    "Fundamentally based SOC model dev"
"eloped at BYU\nFiles needed:\ninput1.dat\ninput2.dat\ninput3.dat\nnrel13cs.dl"
"l"
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "C->K"
		  Position		  [365, 311, 395, 329]
		  Value			  "273"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  Position		  [290, 70, 310, 90]
		  DisplayTime		  off
		  Decimation		  "10"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Const"
		  Position		  [840, 195, 910, 215]
		  Orientation		  "down"
		  ShowName		  off
		  FontName		  "Arial"
		  Value			  "enable_stop"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux"
		  Ports			  [1, 6]
		  Position		  [490, 85, 510, 155]
		  ShowName		  off
		  Outputs		  "6"
		  BusSelectionMode	  off
		}
		Block {
		  BlockType		  MATLABFcn
		  Name			  "Discharge Model\nOutputs:\nPreq(W)"
"\nPavail (W)\nVoltage (V)\nCurrent (A)\nSOC\nHeat Gen (W)"
		  Position		  [405, 105, 465, 135]
		  MATLABFcn		  "fund_byu(u(2),u(1)+t_soc,1,u(3))"
		  OutputDimensions	  "-1"
		  OutputSignalType	  "auto"
		  Output1D		  on
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto <cs>1"
		  Position		  [690, 270, 770, 290]
		  BackgroundColor	  "lightBlue"
		  ShowName		  off
		  GotoTag		  "ess_max_pwr"
		  TagVisibility		  "scoped"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto <mc>, <gc>, <sdo>"
		  Position		  [740, 150, 820, 170]
		  BackgroundColor	  "lightBlue"
		  ShowName		  off
		  GotoTag		  "bus_voltage"
		  TagVisibility		  "scoped"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto <sdo>, <cs>"
		  Position		  [635, 209, 680, 231]
		  BackgroundColor	  "lightBlue"
		  ShowName		  off
		  GotoTag		  "SOC"
		  TagVisibility		  "scoped"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  Position		  [685, 100, 715, 130]
		  ShowName		  off
		  X0			  "12*ess_module_num"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  Position		  [550, 200, 575, 230]
		  ShowName		  off
		  X0			  "ess_init_soc"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [3, 1]
		  Position		  [375, 92, 390, 148]
		  ShowName		  off
		  Inputs		  "3"
		  DisplayOption		  "none"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  Position		  [225, 147, 255, 178]
		  ShowName		  off
		  Operator		  ">"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  Ports			  [2, 1]
		  Position		  [365, 262, 395, 293]
		  Orientation		  "left"
		  IconShape		  "rectangular"
		  Inputs		  "++"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  Position		  [280, 130, 310, 160]
		  ShowName		  off
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Temp (in C)"
		  Position		  [435, 255, 460, 285]
		  Orientation		  "left"
		  X0			  "amb_tmp"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  Terminator
		  Name			  "Terminator1"
		  Position		  [535, 40, 555, 60]
		  ShowName		  off
		}
		Block {
		  BlockType		  Constant
		  Name			  "do ess calcs?"
		  Position		  [645, 355, 705, 370]
		  Orientation		  "down"
		  ShowName		  off
		  Value			  "ess_th_calc"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace"
		  Ports			  [1]
		  Position		  [165, 302, 260, 318]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|pwr_out_r|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace1"
		  Ports			  [1]
		  Position		  [620, 462, 715, 478]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|pwr_loss_a|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace1"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace2"
		  Ports			  [1]
		  Position		  [740, 422, 835, 438]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|air_th_pwr|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace2"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace3"
		  Ports			  [1]
		  Position		  [740, 402, 835, 418]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|air_tmp|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace3"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace4"
		  Ports			  [1]
		  Position		  [740, 382, 835, 398]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|mod_tmp|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace4"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace5"
		  Ports			  [1]
		  Position		  [565, 167, 660, 183]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|current|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace5"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace6"
		  Ports			  [1]
		  Position		  [740, 107, 835, 123]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|voltage|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace6"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace7"
		  Ports			  [1]
		  Position		  [675, 32, 770, 48]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|pwr_out_a|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace7"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "ess tmp"
		  Ports			  [1, 3, 1]
		  Position		  [630, 383, 720, 437]
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "ess tmp"
		    Location		    [431, 254, 962, 524]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Qess_gen"
		    Position		    [25, 205, 45, 225]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [390, 217, 420, 243]
		    StatesWhenEnabling	    "reset"
		    ShowOutputPort	    off
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "#of mods"
		    Position		    [390, 88, 415, 112]
		    Gain		    "ess_module_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "1/#of mods"
		    Position		    [95, 203, 120, 227]
		    Gain		    "1/ess_module_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "1/mcp"
		    Position		    [380, 153, 405, 177]
		    Gain		    "1/(ess_module_mass*ess_mod_cp)"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Block NOTES"
		    Ports		    []
		    Position		    [445, 220, 501, 260]
		    BackgroundColor	    "green"
		    ShowName		    off
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskDisplay		    "disp('Block\\nNOTES')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "Block NOTES"
		    Location		    [505, 510, 924, 573]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Annotation {
		    Position		    [207, 33]
		    Text		    "This block models the thermal beh"
"avior of a battery module with active air cooling.\nThe module is modeled as "
"a single lumped thermal mass.  \nThe fan is on whenever the battery temp is >"
" the set temp."
		    }
		    }
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    Position		    [250, 165, 285, 185]
		    Orientation		    "left"
		    FontName		    "Arial"
		    X0			    "cyc_mph(1,2)*.447"
		    InheritSampleTime	    off
		    RTWStateStorageClass    "Auto"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    Position		    [100, 30, 135, 50]
		    Orientation		    "left"
		    FontName		    "Arial"
		    X0			    "cyc_mph(1,2)*.447"
		    InheritSampleTime	    off
		    RTWStateStorageClass    "Auto"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux20"
		    Ports		    [3, 1]
		    Position		    [195, 84, 200, 156]
		    NamePlacement	    "alternate"
		    ShowName		    off
		    Inputs		    "3"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Qc"
		    Ports		    [2, 1]
		    Position		    [350, 114, 360, 221]
		    ShowName		    off
		    IconShape		    "rectangular"
		    Inputs		    "++"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Qess_case"
		    Position		    [235, 108, 315, 132]
		    NamePlacement	    "alternate"
		    FontName		    "Arial"
		    Expr		    "(u(2) - u(1))/u(3)"
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    "Saturation3"
		    Position		    [190, 29, 200, 51]
		    Orientation		    "left"
		    ShowName		    off
		    UpperLimit		    "1"
		    LowerLimit		    "0"
		    LinearizeAsGain	    on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Tair,ave"
		    Ports		    [1, 2, 1]
		    Position		    [30, 107, 140, 158]
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    on
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    System {
		    Name		    "Tair,ave"
		    Location		    [467, 91, 867, 319]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Qess_case"
		    Position		    [45, 35, 65, 55]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [265, 167, 295, 193]
		    StatesWhenEnabling	    "reset"
		    ShowOutputPort	    off
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Block NOTES"
		    Ports		    []
		    Position		    [325, 165, 381, 205]
		    BackgroundColor	    "green"
		    ShowName		    off
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskDisplay		    "disp('Block\\nNOTES')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "Block NOTES"
		    Location		    [505, 510, 924, 573]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Annotation {
		    Position		    [207, 33]
		    Text		    "This block determins the average "
"temperature of the cooling air over the module."
		    }
		    }
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Tamb-(Q/mcp)/2"
		    Position		    [90, 34, 330, 56]
		    Expr		    "amb_tmp - (u(1)/(ess_mod_airflow*"
"air_cp))/2 "
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "do ex calcs?1"
		    Position		    [35, 105, 115, 125]
		    ShowName		    off
		    Value		    "ess_th_res_on"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Tair_ave"
		    Position		    [355, 35, 375, 55]
		    Port		    "1"
		    OutputWhenDisabled	    "reset"
		    InitialOutput	    "amb_tmp"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Th Res"
		    Position		    [355, 105, 375, 125]
		    Port		    "2"
		    OutputWhenDisabled	    "reset"
		    InitialOutput	    "ess_th_res_off"
		    }
		    Line {
		    SrcBlock		    "do ex calcs?1"
		    SrcPort		    1
		    DstBlock		    "Th Res"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Qess_case"
		    SrcPort		    1
		    DstBlock		    "Tamb-(Q/mcp)/2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Tamb-(Q/mcp)/2"
		    SrcPort		    1
		    DstBlock		    "Tair_ave"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Integrator
		    Name		    "Tess2"
		    Ports		    [1, 1]
		    Position		    [420, 155, 440, 175]
		    ExternalReset	    "none"
		    InitialConditionSource  "internal"
		    InitialCondition	    "ess_mod_init_tmp"
		    LimitOutput		    off
		    UpperSaturationLimit    "inf"
		    LowerSaturationLimit    "-inf"
		    ShowSaturationPort	    off
		    ShowStatePort	    off
		    AbsoluteTolerance	    "auto"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "thermostat"
		    Position		    [235, 29, 340, 51]
		    Orientation		    "left"
		    NamePlacement	    "alternate"
		    FontName		    "Arial"
		    Expr		    "u(1) - ess_set_tmp"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Tess"
		    Position		    [470, 155, 490, 175]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Tair"
		    Position		    [470, 60, 490, 80]
		    NamePlacement	    "alternate"
		    Port		    "2"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "[]"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Qair"
		    Position		    [470, 90, 490, 110]
		    Port		    "3"
		    OutputWhenDisabled	    "reset"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Tair,ave"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    Points		    [0, -50]
		    DstBlock		    "Tair"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Mux20"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Tair,ave"
		    SrcPort		    2
		    DstBlock		    "Mux20"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Mux20"
		    SrcPort		    1
		    DstBlock		    "Qess_case"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "#of mods"
		    SrcPort		    1
		    DstBlock		    "Qair"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    Points		    [-230, 0]
		    DstBlock		    "Tair,ave"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [-10, 0]
		    DstBlock		    "Tair,ave"
		    DstPort		    enable
		    }
		    Line {
		    SrcBlock		    "Saturation3"
		    SrcPort		    1
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "thermostat"
		    SrcPort		    1
		    DstBlock		    "Saturation3"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "1/#of mods"
		    SrcPort		    1
		    Points		    [210, 0]
		    DstBlock		    "Qc"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Qess_gen"
		    SrcPort		    1
		    DstBlock		    "1/#of mods"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Tess2"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    Points		    [0, -85; -80, 0]
		    Branch {
		    Points		    [0, -40]
		    DstBlock		    "thermostat"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [-185, 0]
		    DstBlock		    "Mux20"
		    DstPort		    1
		    }
		    }
		    Branch {
		    DstBlock		    "Tess"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "1/mcp"
		    SrcPort		    1
		    DstBlock		    "Tess2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Qess_case"
		    SrcPort		    1
		    Points		    [5, 0]
		    Branch {
		    Points		    [0, -20]
		    DstBlock		    "#of mods"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 55]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [10, 0]
		    DstBlock		    "Qc"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Qc"
		    SrcPort		    1
		    DstBlock		    "1/mcp"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "max pack\npwr (W)"
		  Ports			  [1, 1]
		  Position		  [625, 265, 655, 295]
		  ShowPortLabels	  off
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "max pack\npwr (W)"
		    Location		    [498, 540, 953, 677]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "SOC"
		    Position		    [35, 43, 65, 57]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "# batteries"
		    Position		    [245, 35, 295, 65]
		    Gain		    "ess_module_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Lookup
		    Name		    "max power"
		    Position		    [165, 35, 195, 65]
		    InputValues		    "ess_max_p_soc"
		    OutputValues	    "ess_max_p"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "ess\ndischarge\npwr"
		    Position		    [355, 40, 375, 60]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "# batteries"
		    SrcPort		    1
		    DstBlock		    "ess\ndischarge\npwr"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "max power"
		    SrcPort		    1
		    DstBlock		    "# batteries"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "SOC"
		    SrcPort		    1
		    DstBlock		    "max power"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "pzero"
		  Position		  [230, 186, 260, 204]
		  Value			  "0"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "soc"
		  Position		  [175, 162, 210, 178]
		  Value			  ".01"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "stop sim"
		  Ports			  [1, 0, 1]
		  Position		  [845, 229, 905, 261]
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "stop sim"
		    Location		    [425, 256, 821, 466]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "SOC"
		    Position		    [75, 85, 95, 105]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [170, 25, 190, 45]
		    StatesWhenEnabling	    "held"
		    ShowOutputPort	    off
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Const"
		    Position		    [95, 145, 165, 165]
		    Orientation		    "up"
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    "0.1"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    Position		    [185, 88, 215, 112]
		    Operator		    "<"
		    }
		    Block {
		    BlockType		    Stop
		    Name		    "Stop Simulation"
		    Position		    [255, 83, 295, 117]
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "Stop Simulation"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "SOC"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Const"
		    SrcPort		    1
		    Points		    [0, -35]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "power available\nto bus (W)"
		  Position		  [860, 65, 880, 85]
		  FontName		  "Arial"
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "ess tmp"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    Points		    [0, -45; -250, 0]
		    DstBlock		    "Temp (in C)"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "enhancedToWorkspace4"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "ess tmp"
		  SrcPort		  3
		  DstBlock		  "enhancedToWorkspace2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "ess tmp"
		  SrcPort		  2
		  DstBlock		  "enhancedToWorkspace3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "do ess calcs?"
		  SrcPort		  1
		  DstBlock		  "ess tmp"
		  DstPort		  enable
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  6
		  Points		  [0, 265; 90, 0]
		  Branch {
		    DstBlock		    "ess tmp"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "enhancedToWorkspace1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "max pack\npwr (W)"
		  SrcPort		  1
		  DstBlock		  "Goto <cs>1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Const"
		  SrcPort		  1
		  DstBlock		  "stop sim"
		  DstPort		  enable
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "C->K"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Temp (in C)"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  Points		  [15, 0; 0, 5]
		  Branch {
		    DstBlock		    "Goto <sdo>, <cs>"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 25]
		    Branch {
		    Points		    [10, 0]
		    Branch {
		    Points		    [0, 35]
		    DstBlock		    "max pack\npwr (W)"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "stop sim"
		    DstPort		    1
		    }
		    }
		    Branch {
		    Points		    [-425, 0; 0, -90]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [0, 0; 5, 0]
		  Branch {
		    DstBlock		    "Goto <mc>, <gc>, <sdo>"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "enhancedToWorkspace6"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  3
		  DstBlock		  "# batteries1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "# batteries1"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "# batteries"
		  SrcPort		  1
		  Points		  [0, 0; 45, 0]
		  Branch {
		    DstBlock		    "power available\nto bus (W)"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "enhancedToWorkspace7"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  1
		  Points		  [0, -45]
		  DstBlock		  "Terminator1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  Points		  [35, 0; 0, -25]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "1/# batteries"
		  SrcPort		  1
		  Points		  [45, 0]
		  DstBlock		  "Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "soc"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  Points		  [0, -20]
		  DstBlock		  "Switch"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "pzero"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "power req'd\ninto bus (W)"
		  SrcPort		  1
		  Points		  [0, 0; 95, 0]
		  Branch {
		    DstBlock		    "1/# batteries"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 190]
		    DstBlock		    "enhancedToWorkspace"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [45, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  2
		  Points		  [30, 0]
		  DstBlock		  "# batteries"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  4
		  Points		  [35, 0]
		  DstBlock		  "enhancedToWorkspace5"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  5
		  Points		  [20, 0]
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Discharge Model\nOutputs:\nPreq(W)"
"\nPavail (W)\nVoltage (V)\nCurrent (A)\nSOC\nHeat Gen (W)"
		  SrcPort		  1
		  DstBlock		  "Demux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "Discharge Model\nOutputs:\nPreq(W)"
"\nPavail (W)\nVoltage (V)\nCurrent (A)\nSOC\nHeat Gen (W)"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "signal\nannotator"
	      Ports		      [1, 1]
	      Position		      [385, 76, 430, 104]
	      NamePlacement	      "alternate"
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"signal\nannotator"
		Location		[202, 77, 966, 752]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "In1"
		  Position		  [110, 103, 140, 117]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		  Port {
		    PortNumber		    1
		    Name		    "ess_pwr_out_r"
		    TestPoint		    off
		    LinearAnalysisOutput    off
		    LinearAnalysisInput	    off
		    RTWStorageClass	    "Auto"
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  Position		  [430, 103, 460, 117]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "[]"
		}
		Line {
		  Name			  "ess_pwr_out_r"
		  Labels		  [0, 0]
		  SrcBlock		  "In1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "required out"
	      Position		      [510, 80, 530, 100]
	      FontName		      "Arial"
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "power available\nto bus (W)"
	      Position		      [340, 130, 360, 150]
	      FontName		      "Arial"
	      Port		      "2"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "sensors"
	      Position		      [580, 300, 600, 320]
	      FontName		      "Arial"
	      Port		      "3"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "power req'd\ninto bus (W)"
	      SrcPort		      1
	      Points		      [0, 0; 35, 0]
	      Branch {
		Points			[0, -50]
		DstBlock		"signal\nannotator"
		DstPort			1
	      }
	      Branch {
		DstBlock		"model"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "model"
	      SrcPort		      1
	      DstBlock		      "power available\nto bus (W)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "control"
	      SrcPort		      1
	      DstBlock		      "Terminator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Bus\nCreator"
	      SrcPort		      1
	      DstBlock		      "sensors"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "signal\nannotator"
	      SrcPort		      1
	      DstBlock		      "required out"
	      DstPort		      1
	    }
	    Line {
	      Name		      "bus_voltage"
	      Labels		      [0, 0]
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      1
	    }
	    Line {
	      Name		      "ess_max_pwr"
	      Labels		      [0, 0]
	      SrcBlock		      "From2"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      2
	    }
	    Line {
	      Name		      "SOC"
	      Labels		      [0, 0]
	      SrcBlock		      "From5"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      3
	    }
	    Annotation {
	      Position		      [257, 210]
	      BackgroundColor	      "yellow"
	      Text		      "Interface"
	      FontName		      "Arial"
	      FontSize		      22
	      FontWeight	      "bold"
	      FontAngle		      "italic"
	    }
	    Annotation {
	      Position		      [262, 60]
	      BackgroundColor	      "yellow"
	      Text		      "Model"
	      FontName		      "Arial"
	      FontSize		      22
	      FontWeight	      "bold"
	      FontAngle		      "italic"
	    }
	  }
	}
	Block {
	  BlockType		  Goto
	  Name			  "reqOutTag"
	  Position		  [365, 124, 465, 166]
	  ForegroundColor	  "red"
	  BackgroundColor	  "black"
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	  GotoTag		  "essReqOut"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "sensorsTag"
	  Position		  [365, 274, 465, 316]
	  ForegroundColor	  "red"
	  BackgroundColor	  "black"
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	  GotoTag		  "essSensors"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Outport
	  Name			  "power available\nto bus (W)"
	  Position		  [425, 210, 445, 230]
	  FontName		  "Arial"
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Line {
	  SrcBlock		  "power req'd\ninto bus (W)"
	  SrcPort		  1
	  DstBlock		  "energy storage <ess>\nfundamental model"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "controlTag"
	  SrcPort		  1
	  Points		  [15, 0; 0, -65]
	  DstBlock		  "energy storage <ess>\nfundamental model"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "energy storage <ess>\nfundamental model"
	  SrcPort		  1
	  Points		  [40, 0]
	  DstBlock		  "reqOutTag"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "energy storage <ess>\nfundamental model"
	  SrcPort		  2
	  DstBlock		  "power available\nto bus (W)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "energy storage <ess>\nfundamental model"
	  SrcPort		  3
	  Points		  [25, 0; 0, 60]
	  DstBlock		  "sensorsTag"
	  DstPort		  1
	}
	Annotation {
	  Position		  [297, 40]
	  BackgroundColor	  "yellow"
	  Text			  "Energy Storage System"
	  FontName		  "Arial"
	  FontSize		  18
	  FontWeight		  "bold"
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "energy storage <ess>\noptima\nfundamental model"
      Ports		      [1, 1]
      Position		      [190, 318, 255, 362]
      BackgroundColor	      "yellow"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskType		      "Stand-Alone Energy Storage System Mask"
      MaskPromptString	      "General Name of this Component [char]|Log Varia"
"bles to Workspace?|Initialization File(s) [cell array of char]|Modification C"
"ell [2 column cell array of param and val]|Icon image file name [char--evalua"
"ted]|DEBUG"
      MaskStyleString	      "edit,popup(Don't Log|Log Variable),edit,edit,ed"
"it,popup(ON|OFF)"
      MaskTunableValueString  "on,on,on,on,on,on"
      MaskCallbackString      "|||||"
      MaskEnableString	      "on,on,on,on,on,on"
      MaskVisibilityString    "on,on,on,on,on,on"
      MaskToolTipString	      "on,on,on,on,on,on"
      MaskVariables	      "generalName=@1;logPick=@2;initFileName=@3;modCe"
"ll=@4;imgFileName=@5;DEBUG=&6;"
      MaskInitialization      "% initialization via m-file script\nadvSACompMa"
"skInit;"
      MaskDisplay	      "image(imread(imgFileName))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      MaskValueString	      "'ess'|Log Variable|{}|{}|'bdi_ess.jpg'|OFF"
      MaskVariableAliases     ",,,,,"
      System {
	Name			"energy storage <ess>\noptima\nfundamental mod"
"el"
	Location		[202, 77, 966, 744]
	Open			off
	ModelBrowserVisibility	on
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "power req'd\ninto bus (W)"
	  Position		  [140, 200, 160, 220]
	  FontName		  "Arial"
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Block NOTES"
	  Ports			  []
	  Position		  [75, 90, 131, 130]
	  BackgroundColor	  "green"
	  ShowName		  off
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "disp('Block\\nNOTES')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Block NOTES"
	    Location		    [256, 329, 741, 634]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Annotation {
	      Position		      [242, 146]
	      Text		      "This is a stand-alone version of an ene"
"rgy storage system\n\nSeveral different models are available"
	    }
	  }
	}
	Block {
	  BlockType		  From
	  Name			  "controlTag"
	  Position		  [80, 276, 190, 314]
	  ForegroundColor	  "red"
	  BackgroundColor	  "black"
	  CloseFcn		  "tagdialog Close"
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	  GotoTag		  "essControl"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "documentation9"
	  Ports			  []
	  Position		  [145, 91, 174, 130]
	  BackgroundColor	  "orange"
	  DropShadow		  on
	  ShowName		  off
	  OpenFcn		  "web(['file:\\\\\\' which('energy_storage.ht"
"m')]);"
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "documentation9"
	    Location		    [129, 62, 308, 146]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "energy storage <ess>\noptima\nfundamental m"
"odel"
	  Ports			  [2, 3]
	  Position		  [240, 198, 305, 242]
	  ForegroundColor	  "magenta"
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('bdi_ess.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "energy storage <ess>\noptima\nfundamental"
" model"
	    Location		    [32, 173, 1022, 676]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "power req'd\ninto bus (W)"
	      Position		      [150, 125, 170, 145]
	      FontName		      "Arial"
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "control"
	      Position		      [55, 420, 75, 440]
	      FontName		      "Arial"
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      BusCreator
	      Name		      "Bus\nCreator"
	      Ports		      [3, 1]
	      Position		      [605, 236, 630, 654]
	      ShowName		      off
	      Inputs		      "3"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      Position		      [365, 293, 450, 317]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "bus_voltage"
	      Port {
		PortNumber		1
		Name			"bus_voltage"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From2"
	      Position		      [365, 428, 465, 452]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_max_pwr"
	      Port {
		PortNumber		1
		Name			"ess_max_pwr"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From5"
	      Position		      [370, 573, 470, 597]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	      Port {
		PortNumber		1
		Name			"SOC"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility1"
	      Position		      [270, 292, 355, 314]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "bus_voltage"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility2"
	      Position		      [270, 427, 355, 449]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "ess_max_pwr"
	    }
	    Block {
	      BlockType		      GotoTagVisibility
	      Name		      "Goto Tag\nVisibility6"
	      Position		      [275, 572, 360, 594]
	      BackgroundColor	      "lightBlue"
	      ShowName		      off
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      Terminator
	      Name		      "Terminator"
	      Position		      [105, 420, 125, 440]
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "model"
	      Ports		      [1, 1]
	      Position		      [240, 105, 280, 165]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"model"
		Location		[275, 111, 1025, 493]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"automatic"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "power req'd\ninto bus (W)"
		  Position		  [25, 110, 45, 130]
		  FontName		  "Arial"
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Gain
		  Name			  "# batteries"
		  Position		  [560, 65, 610, 85]
		  Gain			  "ess_module_num"
		  Multiplication	  "Element-wise(K.*u)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Gain
		  Name			  "# batteries1"
		  Position		  [615, 106, 665, 124]
		  Gain			  "ess_module_num"
		  Multiplication	  "Element-wise(K.*u)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Gain
		  Name			  "1/# batteries"
		  Position		  [165, 105, 215, 135]
		  Gain			  "1/ess_module_num"
		  Multiplication	  "Element-wise(K.*u)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  Ports			  []
		  Position		  [850, 400, 906, 440]
		  BackgroundColor	  "green"
		  ShowName		  off
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [211, 187, 723, 361]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Annotation {
		    Position		    [256, 77]
		    Text		    "Fundamentally based SOC model dev"
"eloped at BYU\nFiles needed:\ninput1.dat\ninput2.dat\ninput3.dat\nnrel13cs.dl"
"l"
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "C->K"
		  Position		  [365, 311, 395, 329]
		  Value			  "273"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  Position		  [290, 70, 310, 90]
		  DisplayTime		  off
		  Decimation		  "10"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Const"
		  Position		  [840, 195, 910, 215]
		  Orientation		  "down"
		  ShowName		  off
		  FontName		  "Arial"
		  Value			  "enable_stop"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux"
		  Ports			  [1, 6]
		  Position		  [490, 85, 510, 155]
		  ShowName		  off
		  Outputs		  "6"
		  BusSelectionMode	  off
		}
		Block {
		  BlockType		  MATLABFcn
		  Name			  "Discharge Model\nOutputs:\nPreq(W)"
"\nPavail (W)\nVoltage (V)\nCurrent (A)\nSOC\nHeat Gen (W)"
		  Position		  [405, 105, 465, 135]
		  MATLABFcn		  "fund_byuop(u(2),u(1)+t_soc,1,u(3))"
		  OutputDimensions	  "-1"
		  OutputSignalType	  "auto"
		  Output1D		  on
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto <cs>1"
		  Position		  [690, 270, 770, 290]
		  BackgroundColor	  "lightBlue"
		  ShowName		  off
		  GotoTag		  "ess_max_pwr"
		  TagVisibility		  "scoped"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto <mc>, <gc>, <sdo>"
		  Position		  [740, 150, 820, 170]
		  BackgroundColor	  "lightBlue"
		  ShowName		  off
		  GotoTag		  "bus_voltage"
		  TagVisibility		  "scoped"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto <sdo>, <cs>"
		  Position		  [635, 209, 680, 231]
		  BackgroundColor	  "lightBlue"
		  ShowName		  off
		  GotoTag		  "SOC"
		  TagVisibility		  "scoped"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  Position		  [685, 100, 715, 130]
		  ShowName		  off
		  X0			  "12*ess_module_num"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  Position		  [550, 200, 575, 230]
		  ShowName		  off
		  X0			  "ess_init_soc"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [3, 1]
		  Position		  [375, 92, 390, 148]
		  ShowName		  off
		  Inputs		  "3"
		  DisplayOption		  "none"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  Position		  [225, 147, 255, 178]
		  ShowName		  off
		  Operator		  ">"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  Ports			  [2, 1]
		  Position		  [365, 262, 395, 293]
		  Orientation		  "left"
		  IconShape		  "rectangular"
		  Inputs		  "++"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  Position		  [280, 130, 310, 160]
		  ShowName		  off
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Temp (in C)"
		  Position		  [435, 255, 460, 285]
		  Orientation		  "left"
		  X0			  "amb_tmp"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  Terminator
		  Name			  "Terminator1"
		  Position		  [535, 40, 555, 60]
		  ShowName		  off
		}
		Block {
		  BlockType		  Constant
		  Name			  "do ess calcs?"
		  Position		  [645, 355, 705, 370]
		  Orientation		  "down"
		  ShowName		  off
		  Value			  "ess_th_calc"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace"
		  Ports			  [1]
		  Position		  [160, 267, 255, 283]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|pwr_out_r|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace1"
		  Ports			  [1]
		  Position		  [620, 462, 715, 478]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|pwr_loss_a|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace1"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace2"
		  Ports			  [1]
		  Position		  [740, 422, 835, 438]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|air_th_pwr|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace2"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace3"
		  Ports			  [1]
		  Position		  [740, 402, 835, 418]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|air_tmp|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace3"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace4"
		  Ports			  [1]
		  Position		  [740, 382, 835, 398]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|mod_tmp|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace4"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace5"
		  Ports			  [1]
		  Position		  [565, 167, 660, 183]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|current|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace5"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace6"
		  Ports			  [1]
		  Position		  [745, 107, 840, 123]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|voltage|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace6"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enhancedToWorkspace7"
		  Ports			  [1]
		  Position		  [675, 32, 770, 48]
		  ShowName		  off
		  CopyFcn		  "breakLinkCopyFcn"
		  ParentCloseFcn	  "breakLinkParCloseFcn"
		  FontSize		  8
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "enhancedToWorkspace"
		  MaskDescription	  "A wrapper for the Simulink \"To Wor"
"kspace\" block that allows you to evaluate the name of the variable to log to"
" workspace. This is useful to avoid the double logging errors that occur when"
" you pull in two library models that attempt to log to the same variable."
		  MaskHelp		  "<h2>Enhanced To Workspace Block</h2"
">\n<h3>Parameters</h3>\n<UL>\n<li><b>General Name:</b> This is the more gener"
"al name of the variable. Variables are saved to the workspace as <i>generalNa"
"me_specificName</i>. Note that this is an evaluated variable. If you would li"
"ke to type in the value directly, it must be surrounded with single quotes. O"
"therwise you can input the name of a variable containing a char string.</li>"
"\n<li><b>Specific Name:</b> This is the specific name of the variable. Note t"
"hat this is input as a char literal (i.e., you don't need quotes).</li>\n<li>"
"<b>Enable Flag:</b> This flag should have the value of 0 or 1. If 0, the vari"
"able will not be logged to the workspace. If 1, the variable will be logged. "
"This is done so that variable logging can be turned off to improve speed.</li"
">\n</ul>\n<h3>Overview</h3>\n<p>The enhanced to workspace block was put toget"
"her to allow one to dynamically resolve variable names at run time in simulin"
"k. This is most powerful when used in conjunction with a masked subsystem to "
"allow multiple instances of that masked subsytem to be used in the same model"
". The strategy is to set the generalName in the block mask which will allow t"
"he block to change the general name for all variable logging on the fly. \n<h"
"3>Helper Files</h3>\n<p>Three m-files are required by the enhancedToWorkspace"
" block. These files are located in the &lt; ADVISOR root &gt;/GUI directory :"
"\n<ul>\n<li><i>enhancedToWsMaker.m</i> This file runs the mask initialization"
" for the block</li>\n<li><i>breakLinkCopyFcn.m</i> This file is used by the b"
"lock callback when the simulink block is copied. It is necessary to break the"
" link to the enhancedToWorkspace similar to the To Workspace block in order f"
"or it to be able to configure itself. (Try copying simulink's To Workspace bl"
"ock--it is impossible to make a link)</li>\n<li><i>breakLinkParCloseFcn.m</i>"
" This file is similar to the breakLinkCopyFcn and is used when a parent syste"
"m is closed</li>\n</ul>\n<hr>\n\n<p>Created 2003-Jan-21, Michael Patrick O'Ke"
"efe, NREL</p>\n\n<!--\n<VARDEF>\n<H3>var_name</H3>\n<UL>\n<LI><B>data type</B"
"> data type here</LI>\n<LI><B>units</B> units here</LI>\n<LI><B>vehicle type<"
"/B> vehicle type here</LI>\n<LI><B>description</B> description here</LI>\n</U"
"L>\n</VARDEF>\n-->\n"
		  MaskPromptString	  "General Name [char-evaluated]|Speci"
"fic Name [char-literal]|Enable flag (1=on,0=off)"
		  MaskStyleString	  "edit,edit,edit"
		  MaskTunableValueString  "on,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVariables		  "generalName=@1;specificName=&2;logF"
"lag=@3;"
		  MaskInitialization	  "enhancedToWsMaker"
		  MaskDisplay		  "disp([generalName,'_',specificName]"
")"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "generalName|pwr_out_a|logFlag"
		  MaskVariableAliases	  ",,"
		  System {
		    Name		    "enhancedToWorkspace7"
		    Location		    [453, 361, 913, 631]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "automatic"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [65, 93, 95, 107]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [145, 85, 205, 115]
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "ess tmp"
		  Ports			  [1, 3, 1]
		  Position		  [630, 383, 720, 437]
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "ess tmp"
		    Location		    [431, 254, 962, 524]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Qess_gen"
		    Position		    [25, 205, 45, 225]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [390, 217, 420, 243]
		    StatesWhenEnabling	    "reset"
		    ShowOutputPort	    off
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "#of mods"
		    Position		    [390, 88, 415, 112]
		    Gain		    "ess_module_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "1/#of mods"
		    Position		    [95, 203, 120, 227]
		    Gain		    "1/ess_module_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "1/mcp"
		    Position		    [380, 153, 405, 177]
		    Gain		    "1/(ess_module_mass*ess_mod_cp)"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Block NOTES"
		    Ports		    []
		    Position		    [445, 220, 501, 260]
		    BackgroundColor	    "green"
		    ShowName		    off
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskDisplay		    "disp('Block\\nNOTES')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "Block NOTES"
		    Location		    [505, 510, 924, 573]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Annotation {
		    Position		    [207, 33]
		    Text		    "This block models the thermal beh"
"avior of a battery module with active air cooling.\nThe module is modeled as "
"a single lumped thermal mass.  \nThe fan is on whenever the battery temp is >"
" the set temp."
		    }
		    }
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    Position		    [250, 165, 285, 185]
		    Orientation		    "left"
		    FontName		    "Arial"
		    X0			    "cyc_mph(1,2)*.447"
		    InheritSampleTime	    off
		    RTWStateStorageClass    "Auto"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    Position		    [100, 30, 135, 50]
		    Orientation		    "left"
		    FontName		    "Arial"
		    X0			    "cyc_mph(1,2)*.447"
		    InheritSampleTime	    off
		    RTWStateStorageClass    "Auto"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux20"
		    Ports		    [3, 1]
		    Position		    [195, 84, 200, 156]
		    NamePlacement	    "alternate"
		    ShowName		    off
		    Inputs		    "3"
		    DisplayOption	    "none"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Qc"
		    Ports		    [2, 1]
		    Position		    [350, 114, 360, 221]
		    ShowName		    off
		    IconShape		    "rectangular"
		    Inputs		    "++"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Qess_case"
		    Position		    [235, 108, 315, 132]
		    NamePlacement	    "alternate"
		    FontName		    "Arial"
		    Expr		    "(u(2) - u(1))/u(3)"
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    "Saturation3"
		    Position		    [190, 29, 200, 51]
		    Orientation		    "left"
		    ShowName		    off
		    UpperLimit		    "1"
		    LowerLimit		    "0"
		    LinearizeAsGain	    on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Tair,ave"
		    Ports		    [1, 2, 1]
		    Position		    [30, 107, 140, 158]
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    on
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    System {
		    Name		    "Tair,ave"
		    Location		    [467, 91, 867, 319]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Qess_case"
		    Position		    [45, 35, 65, 55]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [265, 167, 295, 193]
		    StatesWhenEnabling	    "reset"
		    ShowOutputPort	    off
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Block NOTES"
		    Ports		    []
		    Position		    [325, 165, 381, 205]
		    BackgroundColor	    "green"
		    ShowName		    off
		    ShowPortLabels	    on
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskDisplay		    "disp('Block\\nNOTES')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "Block NOTES"
		    Location		    [505, 510, 924, 573]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Annotation {
		    Position		    [207, 33]
		    Text		    "This block determins the average "
"temperature of the cooling air over the module."
		    }
		    }
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "Tamb-(Q/mcp)/2"
		    Position		    [90, 34, 330, 56]
		    Expr		    "amb_tmp - (u(1)/(ess_mod_airflow*"
"air_cp))/2 "
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "do ex calcs?1"
		    Position		    [35, 105, 115, 125]
		    ShowName		    off
		    Value		    "ess_th_res_on"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Tair_ave"
		    Position		    [355, 35, 375, 55]
		    Port		    "1"
		    OutputWhenDisabled	    "reset"
		    InitialOutput	    "amb_tmp"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Th Res"
		    Position		    [355, 105, 375, 125]
		    Port		    "2"
		    OutputWhenDisabled	    "reset"
		    InitialOutput	    "ess_th_res_off"
		    }
		    Line {
		    SrcBlock		    "do ex calcs?1"
		    SrcPort		    1
		    DstBlock		    "Th Res"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Qess_case"
		    SrcPort		    1
		    DstBlock		    "Tamb-(Q/mcp)/2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Tamb-(Q/mcp)/2"
		    SrcPort		    1
		    DstBlock		    "Tair_ave"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Integrator
		    Name		    "Tess2"
		    Ports		    [1, 1]
		    Position		    [420, 155, 440, 175]
		    ExternalReset	    "none"
		    InitialConditionSource  "internal"
		    InitialCondition	    "ess_mod_init_tmp"
		    LimitOutput		    off
		    UpperSaturationLimit    "inf"
		    LowerSaturationLimit    "-inf"
		    ShowSaturationPort	    off
		    ShowStatePort	    off
		    AbsoluteTolerance	    "auto"
		    }
		    Block {
		    BlockType		    Fcn
		    Name		    "thermostat"
		    Position		    [235, 29, 340, 51]
		    Orientation		    "left"
		    NamePlacement	    "alternate"
		    FontName		    "Arial"
		    Expr		    "u(1) - ess_set_tmp"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Tess"
		    Position		    [470, 155, 490, 175]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Tair"
		    Position		    [470, 60, 490, 80]
		    NamePlacement	    "alternate"
		    Port		    "2"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "[]"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Qair"
		    Position		    [470, 90, 490, 110]
		    Port		    "3"
		    OutputWhenDisabled	    "reset"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Tair,ave"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    Points		    [0, -50]
		    DstBlock		    "Tair"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Mux20"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Tair,ave"
		    SrcPort		    2
		    DstBlock		    "Mux20"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Mux20"
		    SrcPort		    1
		    DstBlock		    "Qess_case"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "#of mods"
		    SrcPort		    1
		    DstBlock		    "Qair"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    Points		    [-230, 0]
		    DstBlock		    "Tair,ave"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [-10, 0]
		    DstBlock		    "Tair,ave"
		    DstPort		    enable
		    }
		    Line {
		    SrcBlock		    "Saturation3"
		    SrcPort		    1
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "thermostat"
		    SrcPort		    1
		    DstBlock		    "Saturation3"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "1/#of mods"
		    SrcPort		    1
		    Points		    [210, 0]
		    DstBlock		    "Qc"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Qess_gen"
		    SrcPort		    1
		    DstBlock		    "1/#of mods"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Tess2"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    Points		    [0, -85; -80, 0]
		    Branch {
		    Points		    [0, -40]
		    DstBlock		    "thermostat"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [-185, 0]
		    DstBlock		    "Mux20"
		    DstPort		    1
		    }
		    }
		    Branch {
		    DstBlock		    "Tess"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "1/mcp"
		    SrcPort		    1
		    DstBlock		    "Tess2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Qess_case"
		    SrcPort		    1
		    Points		    [5, 0]
		    Branch {
		    Points		    [0, -20]
		    DstBlock		    "#of mods"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 55]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [10, 0]
		    DstBlock		    "Qc"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Qc"
		    SrcPort		    1
		    DstBlock		    "1/mcp"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "max pack\npwr (W)"
		  Ports			  [1, 1]
		  Position		  [625, 265, 655, 295]
		  ShowPortLabels	  off
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "max pack\npwr (W)"
		    Location		    [498, 540, 953, 677]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "SOC"
		    Position		    [35, 43, 65, 57]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "# batteries"
		    Position		    [245, 35, 295, 65]
		    Gain		    "ess_module_num"
		    Multiplication	    "Element-wise(K.*u)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Lookup
		    Name		    "max power"
		    Position		    [165, 35, 195, 65]
		    InputValues		    "ess_max_p_soc"
		    OutputValues	    "ess_max_p"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "ess\ndischarge\npwr"
		    Position		    [355, 40, 375, 60]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "# batteries"
		    SrcPort		    1
		    DstBlock		    "ess\ndischarge\npwr"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "max power"
		    SrcPort		    1
		    DstBlock		    "# batteries"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "SOC"
		    SrcPort		    1
		    DstBlock		    "max power"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "pzero"
		  Position		  [230, 186, 260, 204]
		  Value			  "0"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "soc"
		  Position		  [175, 162, 210, 178]
		  Value			  ".01"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "stop sim"
		  Ports			  [1, 0, 1]
		  Position		  [845, 229, 905, 261]
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  on
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "stop sim"
		    Location		    [423, 258, 819, 468]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "SOC"
		    Position		    [75, 85, 95, 105]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [170, 25, 190, 45]
		    StatesWhenEnabling	    "held"
		    ShowOutputPort	    off
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Const"
		    Position		    [95, 145, 165, 165]
		    Orientation		    "up"
		    ShowName		    off
		    FontName		    "Arial"
		    Value		    ".001"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    Position		    [185, 88, 215, 112]
		    Operator		    "<"
		    }
		    Block {
		    BlockType		    Stop
		    Name		    "Stop Simulation"
		    Position		    [255, 83, 295, 117]
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "Stop Simulation"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "SOC"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Const"
		    SrcPort		    1
		    Points		    [0, -35]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "power available\nto bus (W)"
		  Position		  [860, 65, 880, 85]
		  FontName		  "Arial"
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "ess tmp"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    Points		    [0, -45; -250, 0]
		    DstBlock		    "Temp (in C)"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "enhancedToWorkspace4"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "ess tmp"
		  SrcPort		  3
		  DstBlock		  "enhancedToWorkspace2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "ess tmp"
		  SrcPort		  2
		  DstBlock		  "enhancedToWorkspace3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "do ess calcs?"
		  SrcPort		  1
		  DstBlock		  "ess tmp"
		  DstPort		  enable
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  6
		  Points		  [0, 265; 90, 0]
		  Branch {
		    DstBlock		    "ess tmp"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "enhancedToWorkspace1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "max pack\npwr (W)"
		  SrcPort		  1
		  DstBlock		  "Goto <cs>1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Const"
		  SrcPort		  1
		  DstBlock		  "stop sim"
		  DstPort		  enable
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "C->K"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Temp (in C)"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  Points		  [15, 0; 0, 5]
		  Branch {
		    DstBlock		    "Goto <sdo>, <cs>"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 25]
		    Branch {
		    Points		    [10, 0]
		    Branch {
		    Points		    [0, 35]
		    DstBlock		    "max pack\npwr (W)"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "stop sim"
		    DstPort		    1
		    }
		    }
		    Branch {
		    Points		    [-425, 0; 0, -90]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [0, 0; 5, 0]
		  Branch {
		    DstBlock		    "Goto <mc>, <gc>, <sdo>"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "enhancedToWorkspace6"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  3
		  DstBlock		  "# batteries1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "# batteries1"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "# batteries"
		  SrcPort		  1
		  Points		  [0, 0; 45, 0]
		  Branch {
		    DstBlock		    "power available\nto bus (W)"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "enhancedToWorkspace7"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  1
		  Points		  [0, -45]
		  DstBlock		  "Terminator1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  Points		  [35, 0; 0, -25]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "1/# batteries"
		  SrcPort		  1
		  Points		  [45, 0]
		  DstBlock		  "Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "soc"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  Points		  [0, -20]
		  DstBlock		  "Switch"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "pzero"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "power req'd\ninto bus (W)"
		  SrcPort		  1
		  Points		  [0, 0; 95, 0]
		  Branch {
		    DstBlock		    "1/# batteries"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "enhancedToWorkspace"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [45, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  2
		  Points		  [30, 0]
		  DstBlock		  "# batteries"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  4
		  Points		  [35, 0]
		  DstBlock		  "enhancedToWorkspace5"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  5
		  Points		  [20, 0]
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Discharge Model\nOutputs:\nPreq(W)"
"\nPavail (W)\nVoltage (V)\nCurrent (A)\nSOC\nHeat Gen (W)"
		  SrcPort		  1
		  DstBlock		  "Demux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "Discharge Model\nOutputs:\nPreq(W)"
"\nPavail (W)\nVoltage (V)\nCurrent (A)\nSOC\nHeat Gen (W)"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "signal\nannotator"
	      Ports		      [1, 1]
	      Position		      [385, 71, 430, 99]
	      NamePlacement	      "alternate"
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"signal\nannotator"
		Location		[202, 77, 966, 752]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "In1"
		  Position		  [110, 103, 140, 117]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		  Port {
		    PortNumber		    1
		    Name		    "ess_pwr_out_r"
		    TestPoint		    off
		    LinearAnalysisOutput    off
		    LinearAnalysisInput	    off
		    RTWStorageClass	    "Auto"
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  Position		  [430, 103, 460, 117]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "[]"
		}
		Line {
		  Name			  "ess_pwr_out_r"
		  Labels		  [0, 0]
		  SrcBlock		  "In1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "required out"
	      Position		      [510, 75, 530, 95]
	      FontName		      "Arial"
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "power available\nto bus (W)"
	      Position		      [335, 125, 355, 145]
	      FontName		      "Arial"
	      Port		      "2"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "sensors"
	      Position		      [655, 435, 675, 455]
	      FontName		      "Arial"
	      Port		      "3"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "power req'd\ninto bus (W)"
	      SrcPort		      1
	      Points		      [0, 0; 40, 0]
	      Branch {
		Points			[0, -50]
		DstBlock		"signal\nannotator"
		DstPort			1
	      }
	      Branch {
		DstBlock		"model"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "model"
	      SrcPort		      1
	      DstBlock		      "power available\nto bus (W)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "control"
	      SrcPort		      1
	      DstBlock		      "Terminator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Bus\nCreator"
	      SrcPort		      1
	      DstBlock		      "sensors"
	      DstPort		      1
	    }
	    Line {
	      Name		      "ess_max_pwr"
	      Labels		      [0, 0]
	      SrcBlock		      "From2"
	      SrcPort		      1
	      Points		      [0, 5]
	      DstBlock		      "Bus\nCreator"
	      DstPort		      2
	    }
	    Line {
	      Name		      "SOC"
	      Labels		      [0, 0]
	      SrcBlock		      "From5"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "signal\nannotator"
	      SrcPort		      1
	      DstBlock		      "required out"
	      DstPort		      1
	    }
	    Line {
	      Name		      "bus_voltage"
	      Labels		      [0, 0]
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Bus\nCreator"
	      DstPort		      1
	    }
	    Annotation {
	      Position		      [257, 205]
	      BackgroundColor	      "yellow"
	      Text		      "Interface"
	      FontName		      "Arial"
	      FontSize		      22
	      FontWeight	      "bold"
	      FontAngle		      "italic"
	    }
	    Annotation {
	      Position		      [262, 55]
	      BackgroundColor	      "yellow"
	      Text		      "Model"
	      FontName		      "Arial"
	      FontSize		      22
	      FontWeight	      "bold"
	      FontAngle		      "italic"
	    }
	  }
	}
	Block {
	  BlockType		  Goto
	  Name			  "reqOutTag"
	  Position		  [365, 124, 465, 166]
	  ForegroundColor	  "red"
	  BackgroundColor	  "black"
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	  GotoTag		  "essReqOut"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "sensorsTag"
	  Position		  [365, 274, 465, 316]
	  ForegroundColor	  "red"
	  BackgroundColor	  "black"
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	  GotoTag		  "essSensors"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Outport
	  Name			  "power available\nto bus (W)"
	  Position		  [425, 210, 445, 230]
	  FontName		  "Arial"
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Line {
	  SrcBlock		  "power req'd\ninto bus (W)"
	  SrcPort		  1
	  DstBlock		  "energy storage <ess>\noptima\nfundamental m"
"odel"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "controlTag"
	  SrcPort		  1
	  Points		  [15, 0; 0, -65]
	  DstBlock		  "energy storage <ess>\noptima\nfundamental m"
"odel"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "energy storage <ess>\noptima\nfundamental m"
"odel"
	  SrcPort		  1
	  Points		  [40, 0]
	  DstBlock		  "reqOutTag"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "energy storage <ess>\noptima\nfundamental m"
"odel"
	  SrcPort		  2
	  DstBlock		  "power available\nto bus (W)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "energy storage <ess>\noptima\nfundamental m"
"odel"
	  SrcPort		  3
	  Points		  [25, 0; 0, 60]
	  DstBlock		  "sensorsTag"
	  DstPort		  1
	}
	Annotation {
	  Position		  [297, 40]
	  BackgroundColor	  "yellow"
	  Text			  "Energy Storage System"
	  FontName		  "Arial"
	  FontSize		  18
	  FontWeight		  "bold"
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "ess config"
      Ports		      [1, 1]
      Position		      [70, 79, 135, 121]
      BackgroundColor	      "lightBlue"
      ShowName		      off
      ShowPortLabels	      off
      BlockChoice	      "energy storage <ess>"
      TemplateBlock	      "self"
      MemberBlocks	      "Ultracapacitor  System,energy storage <ess>,ene"
"rgy storage <ess> RC,energy storage <ess> nnet,energy storage <ess> Saber,ene"
"rgy storage <ess> fundamental model,energy storage <ess> optima fundamental m"
"odel"
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      System {
	Name			"ess config"
	Location		[148, 182, 646, 482]
	Open			off
	ModelBrowserVisibility	on
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "power req'd\ninto bus (W)"
	  Position		  [20, 40, 40, 60]
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "energy\nstorage <ess>"
	  Ports			  [1, 1]
	  Position		  [100, 40, 140, 80]
	  BackgroundColor	  "lightBlue"
	  AncestorBlock		  "lib_energy_storage2/energy\nstorage <ess>"
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskType		  "Stand-Alone IC Energy Storage System Mask"
	  MaskPromptString	  "General Name of this Component [char]|Log V"
"ariables to Workspace?|Initialization File(s) [cell array of char]|Modificati"
"on Cell [2 column cell array of param and val]|Icon image file name [char--ev"
"aluated]"
	  MaskStyleString	  "edit,popup(Don't Log|Log Variable),edit,edi"
"t,edit"
	  MaskTunableValueString  "on,on,on,on,on"
	  MaskCallbackString	  "||||"
	  MaskEnableString	  "on,on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on,on"
	  MaskToolTipString	  "on,on,on,on,on"
	  MaskVariables		  "generalName=@1;logPick=@2;initFileName=@3;m"
"odCell=@4;imgFileName=@5;"
	  MaskInitialization	  "% initialization via m-file function\nDB=0;"
" % debug off\nlogFlag=advSACompMaskInit(generalName,logPick,initFileName,modC"
"ell,DB);"
	  MaskDisplay		  "image(imread(imgFileName))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "'ess'|Log Variable|{}|{}|'bdi_ess.jpg'"
	  MaskVariableAliases	  ",,,,"
	  System {
	    Name		    "energy\nstorage <ess>"
	    Location		    [202, 77, 966, 744]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "power req'd\ninto bus (W)"
	      Position		      [140, 200, 160, 220]
	      FontName		      "Arial"
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [75, 90, 131, 130]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[256, 329, 741, 634]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [242, 146]
		  Text			  "This is a stand-alone version of an"
" energy storage system\n\nSeveral different models are available"
		}
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      Position		      [80, 276, 190, 314]
	      ForegroundColor	      "red"
	      BackgroundColor	      "black"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      FontName		      "Arial"
	      FontSize		      16
	      FontWeight	      "bold"
	      GotoTag		      "essControl"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto1"
	      Position		      [365, 274, 465, 316]
	      ForegroundColor	      "red"
	      BackgroundColor	      "black"
	      ShowName		      off
	      FontName		      "Arial"
	      FontSize		      16
	      FontWeight	      "bold"
	      GotoTag		      "essSensors"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto2"
	      Position		      [365, 124, 465, 166]
	      ForegroundColor	      "red"
	      BackgroundColor	      "black"
	      ShowName		      off
	      FontName		      "Arial"
	      FontSize		      16
	      FontWeight	      "bold"
	      GotoTag		      "essReqOut"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Ultracapacitor\n System"
	      Ports		      [2, 3]
	      Position		      [245, 200, 305, 240]
	      SourceBlock	      "lib_energy_storage2/Ess Choices/Ultraca"
"pacitor\n System"
	      SourceType	      "Unknown"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "documentation9"
	      Ports		      []
	      Position		      [145, 91, 174, 130]
	      BackgroundColor	      "orange"
	      DropShadow	      on
	      ShowName		      off
	      OpenFcn		      "web(['file:\\\\\\' which('energy_storag"
"e.htm')]);"
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "image(imread('doc_man.jpg'))"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"documentation9"
		Location		[129, 62, 308, 146]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "power available\nto bus (W)"
	      Position		      [425, 210, 445, 230]
	      FontName		      "Arial"
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Ultracapacitor\n System"
	      SrcPort		      3
	      Points		      [25, 0; 0, 60]
	      DstBlock		      "Goto1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Ultracapacitor\n System"
	      SrcPort		      2
	      DstBlock		      "power available\nto bus (W)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Ultracapacitor\n System"
	      SrcPort		      1
	      Points		      [40, 0]
	      DstBlock		      "Goto2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From1"
	      SrcPort		      1
	      Points		      [15, 0; 0, -65]
	      DstBlock		      "Ultracapacitor\n System"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "power req'd\ninto bus (W)"
	      SrcPort		      1
	      DstBlock		      "Ultracapacitor\n System"
	      DstPort		      1
	    }
	    Annotation {
	      Position		      [297, 40]
	      BackgroundColor	      "yellow"
	      Text		      "Energy Storage System"
	      FontName		      "Arial"
	      FontSize		      18
	      FontWeight	      "bold"
	    }
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "power available\nto bus (W)"
	  Position		  [200, 40, 220, 60]
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "[]"
	}
	Line {
	  SrcBlock		  "power req'd\ninto bus (W)"
	  SrcPort		  1
	  Points		  [20, 0; 0, 10]
	  DstBlock		  "energy\nstorage <ess>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "energy\nstorage <ess>"
	  SrcPort		  1
	  Points		  [20, 0; 0, -10]
	  DstBlock		  "power available\nto bus (W)"
	  DstPort		  1
	}
      }
    }
    Annotation {
      Position		      [96, 36]
      ForegroundColor	      "blue"
      BackgroundColor	      "yellow"
      Text		      "Energy Storage:"
      DropShadow	      on
      FontName		      "Arial"
      FontSize		      14
    }
  }
}
