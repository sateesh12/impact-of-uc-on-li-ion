Library {
  Name			  "lib_transmission"
  Version		  4.1.1
  LibraryLinkDisplay	  "none"
  CovSaveName		  "covdata"
  CovMetricSettings	  "dw"
  CovNameIncrementing	  off
  CovHtmlReporting	  on
  BlockNameDataTip	  off
  BlockParametersDataTip  off
  BlockDescriptionStringDataTip	off
  ToolBar		  off
  StatusBar		  off
  BrowserShowLibraryLinks off
  BrowserLookUnderMasks	  off
  Created		  "Tue May 30 16:37:54 2000"
  UpdateHistory		  "UpdateHistoryWhenSave"
  ModifiedByFormat	  "%<Auto>"
  LastModifiedBy	  "tmarkel"
  ModifiedDateFormat	  "%<Auto>"
  LastModifiedDate	  "Fri Sep 20 16:05:52 2002"
  ModifiedComment	  "tmarkel -- Fri Sep 20 16:05:52 2002 -- Version 1.10"
"2\nmodified Pout/Pin calc block - moved !=0 check to before bombproof block; "
"value after bombproof is never zero\n\nthere are still some issues with this "
"calculation to be resolved at a later date\n"
  ModifiedHistory	  "tmarkel -- Fri Sep 20 16:05:52 2002 -- Version 1.10"
"2\nmodified Pout/Pin calc block - moved !=0 check to before bombproof block; "
"value after bombproof is never zero\n\nthere are still some issues with this "
"calculation to be resolved at a later date\n\n\ntmarkel -- Fri Sep 20 14:16:5"
"5 2002 -- Version 1.101\nchanged t loss when tx_eff=0 to be the total torque "
"in request\n\nabrooker -- Fri May 24 14:07:33 2002 -- Version 1.100\n\nmokeef"
"e -- Thu Apr 18 08:38:43 2002 -- Version 1.99\nsaving the model:\no \"without"
" the model browser open\"\no with only top-level screen visible \no with \"fi"
"t to view\" enabled\no with \"status bar\" off and \"toolbar\" off\no with \""
"prompt to update model history with each save\" on\n\n"
  ModelVersionFormat	  "1.%<AutoIncrement:102>"
  ConfigurationManager	  "none"
  SimParamPage		  "Solver"
  AlgebraicLoopMsg	  "warning"
  MinStepSizeMsg	  "warning"
  UnconnectedInputMsg	  "warning"
  UnconnectedOutputMsg	  "warning"
  UnconnectedLineMsg	  "warning"
  InheritedTsInSrcMsg	  "warning"
  SingleTaskRateTransMsg  "none"
  MultiTaskRateTransMsg	  "error"
  IntegerOverflowMsg	  "warning"
  CheckForMatrixSingularity "none"
  UnnecessaryDatatypeConvMsg "none"
  Int32ToFloatConvMsg	  "warning"
  InvalidFcnCallConnMsg	  "error"
  SignalLabelMismatchMsg  "none"
  LinearizationMsg	  "none"
  VectorMatrixConversionMsg "none"
  SfunCompatibilityCheckMsg "none"
  BlockPriorityViolationMsg "warning"
  ArrayBoundsChecking	  "none"
  ConsistencyChecking	  "none"
  Profile		  off
  SimulationMode	  "normal"
  RTWRetainRTWFile	  off
  RTWMakeCommand	  "make_rtw"
  RTWGenerateCodeOnly	  off
  TLCProfiler		  off
  TLCDebug		  off
  TLCCoverage		  off
  ExtModeMexFile	  "ext_comm"
  ExtModeBatchMode	  off
  ExtModeTrigType	  "manual"
  ExtModeTrigMode	  "normal"
  ExtModeTrigPort	  "1"
  ExtModeTrigElement	  "any"
  ExtModeTrigDuration	  1000
  ExtModeTrigHoldOff	  0
  ExtModeTrigDelay	  0
  ExtModeTrigDirection	  "rising"
  ExtModeTrigLevel	  0
  ExtModeArchiveMode	  "off"
  ExtModeAutoIncOneShot	  off
  ExtModeIncDirWhenArm	  off
  ExtModeAddSuffixToVar	  off
  ExtModeWriteAllDataToWs off
  ExtModeArmWhenConnect	  on
  ExtModeSkipDownloadWhenConnect off
  ExtModeLogAll		  on
  ExtModeAutoUpdateStatusClock on
  BlockDefaults {
    Orientation		    "right"
    ForegroundColor	    "black"
    BackgroundColor	    "white"
    DropShadow		    off
    NamePlacement	    "normal"
    FontName		    "Helvetica"
    FontSize		    10
    FontWeight		    "normal"
    FontAngle		    "normal"
    ShowName		    on
  }
  AnnotationDefaults {
    HorizontalAlignment	    "center"
    VerticalAlignment	    "middle"
    ForegroundColor	    "black"
    BackgroundColor	    "white"
    DropShadow		    off
    FontName		    "Helvetica"
    FontSize		    10
    FontWeight		    "normal"
    FontAngle		    "normal"
  }
  LineDefaults {
    FontName		    "Helvetica"
    FontSize		    9
    FontWeight		    "normal"
    FontAngle		    "normal"
  }
  System {
    Name		    "lib_transmission"
    Location		    [2, 44, 998, 742]
    Open		    on
    ModelBrowserVisibility  off
    ModelBrowserWidth	    200
    ScreenColor		    "automatic"
    PaperOrientation	    "landscape"
    PaperPositionMode	    "auto"
    PaperType		    "usletter"
    PaperUnits		    "inches"
    ZoomFactor		    "124"
    ReportName		    "simulink-default.rpt"
    Block {
      BlockType		      SubSystem
      Name		      "CVT gearbox \n<gb>"
      Ports		      [2, 2]
      Position		      [165, 183, 205, 247]
      BackgroundColor	      "yellow"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      System {
	Name			"CVT gearbox \n<gb>"
	Location		[118, 74, 970, 669]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "torque and speed req'd\nat output side of c"
"vt\n(Nm), (rad/s)"
	  Position		  [50, 15, 70, 35]
	  FontName		  "Arial"
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Inport
	  Name			  "torque and speed avail.\nat input side of c"
"vt\n(Nm), (rad/s)"
	  Position		  [55, 450, 75, 470]
	  FontName		  "Arial"
	  Port			  "2"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Block NOTES1"
	  Ports			  []
	  Position		  [415, 515, 471, 555]
	  BackgroundColor	  "green"
	  ShowName		  off
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "disp('Block\\nNOTES')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Block NOTES1"
	    Location		    [618, 312, 1120, 494]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Annotation {
	      Position		      [247, 17]
	      VerticalAlignment	      "top"
	      Text		      "This gearbox model includes loss data, "
"rotational inertia, and a gear reduction."
	    }
	    Annotation {
	      Position		      [252, 37]
	      VerticalAlignment	      "top"
	      Text		      "The loss torque is zero when the gears "
"are not turning,\nand is applied at the input side of the gear reduction."
	    }
	    Annotation {
	      Position		      [252, 72]
	      VerticalAlignment	      "top"
	      Text		      "The inertia torque is the input torque "
"required to accelerate the\nfinal drive's inertia as measured on the input si"
"de."
	    }
	    Annotation {
	      Position		      [252, 107]
	      VerticalAlignment	      "top"
	      Text		      "Available output torque is estimated as"
"suming that the gearbox efficiency for theavailable input\ntorque andspeed is"
" the same as the gearbox efficiency for the REQUESTED input torque."
	    }
	    Annotation {
	      Position		      [252, 142]
	      VerticalAlignment	      "top"
	      Text		      "This is a good assumption, at least for"
" the VW 4-speed manual transaxle of SAE 820741. \nIn the VW transaxle, effici"
"ency is fairly independent of torque and speed at high torques."
	    }
	  }
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux"
	  Ports			  [1, 2]
	  Position		  [135, 209, 155, 251]
	  FontName		  "Arial"
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux1"
	  Ports			  [1, 2]
	  Position		  [140, 441, 160, 474]
	  FontName		  "Arial"
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  Memory
	  Name			  "Memory"
	  Position		  [370, 325, 400, 355]
	  Orientation		  "left"
	  X0			  "0.9"
	  InheritSampleTime	  off
	  RTWStateStorageClass	  "Auto"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux"
	  Ports			  [2, 1]
	  Position		  [685, 26, 705, 59]
	  FontName		  "Arial"
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux1"
	  Ports			  [2, 1]
	  Position		  [665, 433, 685, 502]
	  FontName		  "Arial"
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Pout/Pin,\nneglecting inertia"
	  Ports			  [4, 1]
	  Position		  [545, 256, 575, 309]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "Pout/Pin,\nneglecting inertia"
	    Location		    [179, 341, 687, 630]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Tin"
	      Position		      [25, 85, 45, 105]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Tinertia"
	      Position		      [25, 140, 45, 160]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Tout"
	      Position		      [25, 5, 45, 25]
	      Port		      "3"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gear ratio"
	      Position		      [25, 40, 45, 60]
	      Port		      "4"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [115, 155, 135, 175]
	      Orientation	      "up"
	      FontName		      "Arial"
	      Value		      "eps"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      Position		      [370, 140, 390, 160]
	      Orientation	      "left"
	      FontName		      "Arial"
	      Value		      "0.5"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Pout/Pin\n(neglecting\ninertia)"
	      Ports		      [2, 1]
	      Position		      [295, 88, 315, 117]
	      FontName		      "Arial"
	      Inputs		      "*/"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [215, 101, 235, 119]
	      FontName		      "Arial"
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [365, 89, 395, 121]
	      FontName		      "Arial"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Tin-Tinertia"
	      Ports		      [2, 1]
	      Position		      [75, 85, 95, 120]
	      FontName		      "Arial"
	      IconShape		      "rectangular"
	      Inputs		      "+-"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "make division\nbombproof"
	      Ports		      [2, 1]
	      Position		      [160, 95, 180, 130]
	      FontName		      "Arial"
	      IconShape		      "rectangular"
	      Inputs		      "++"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Pout/Pin"
	      Position		      [435, 95, 455, 115]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Pout/Pin"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Pout/Pin\n(neglecting\ninertia)"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"Switch"
		DstPort			2
	      }
	      Branch {
		Points			[0, -10]
		DstBlock		"Switch"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "Pout/Pin\n(neglecting\ninertia)"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "gear ratio"
	      SrcPort		      1
	      Points		      [140, 0; 0, 55]
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "make division\nbombproof"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Tinertia"
	      SrcPort		      1
	      Points		      [5, 0; 0, -40]
	      DstBlock		      "Tin-Tinertia"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Tout"
	      SrcPort		      1
	      Points		      [225, 0; 0, 80]
	      DstBlock		      "Pout/Pin\n(neglecting\ninertia)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Tin"
	      SrcPort		      1
	      DstBlock		      "Tin-Tinertia"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Tin-Tinertia"
	      SrcPort		      1
	      DstBlock		      "make division\nbombproof"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [0, -30]
	      DstBlock		      "make division\nbombproof"
	      DstPort		      2
	    }
	    Annotation {
	      Position		      [252, 207]
	      VerticalAlignment	      "top"
	      Text		      "Pout/Pin, neglecting inertia, is used t"
"o estimate the output torque given the\ninput torque in a very simple forward"
"-facing calculation."
	    }
	  }
	}
	Block {
	  BlockType		  Product
	  Name			  "Product"
	  Ports			  [2, 1]
	  Position		  [410, 436, 430, 454]
	  FontName		  "Arial"
	  Inputs		  "2"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Product
	  Name			  "Product1"
	  Ports			  [2, 1]
	  Position		  [535, 351, 555, 369]
	  FontName		  "Arial"
	  Inputs		  "2"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum2"
	  Ports			  [3, 1]
	  Position		  [455, 60, 475, 140]
	  FontName		  "Arial"
	  IconShape		  "rectangular"
	  Inputs		  "+++"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum3"
	  Ports			  [2, 1]
	  Position		  [485, 420, 505, 455]
	  FontName		  "Arial"
	  IconShape		  "rectangular"
	  Inputs		  "-+"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch2"
	  Position		  [510, 94, 540, 126]
	  FontName		  "Arial"
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace10"
	  Position		  [540, 390, 620, 410]
	  Orientation		  "down"
	  NamePlacement		  "alternate"
	  VariableName		  "gb_ni_trq_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace2"
	  Position		  [185, 120, 265, 140]
	  VariableName		  "gb_trq_out_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace3"
	  Position		  [185, 160, 265, 180]
	  VariableName		  "gb_spd_out_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace4"
	  Position		  [660, 350, 740, 370]
	  VariableName		  "gb_trq_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace5"
	  Position		  [660, 390, 740, 410]
	  VariableName		  "gb_spd_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace6"
	  Position		  [205, 475, 285, 495]
	  VariableName		  "gb_trq_in_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace7"
	  Position		  [205, 515, 285, 535]
	  VariableName		  "gb_spd_in_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace8"
	  Position		  [635, 100, 715, 120]
	  VariableName		  "gb_trq_in_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace9"
	  Position		  [635, 145, 715, 165]
	  VariableName		  "gb_spd_in_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "cvt controller interface"
	  Ports			  [3, 1]
	  Position		  [215, 209, 320, 271]
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "cvt controller interface"
	    Location		    [649, 680, 1065, 911]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "T_gb_out"
	      Position		      [40, 45, 60, 65]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "w_gb_out"
	      Position		      [40, 105, 60, 125]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "eta_gb"
	      Position		      [40, 170, 60, 190]
	      Port		      "3"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>"
	      Position		      [185, 34, 290, 66]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "gear_ratio"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <vc>"
	      Position		      [95, 39, 165, 71]
	      GotoTag		      "T_gb_out"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <vc>1"
	      Position		      [95, 99, 170, 131]
	      GotoTag		      "w_gb_out"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <vc>2"
	      Position		      [95, 164, 170, 196]
	      GotoTag		      "eta_gb"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear_ratio"
	      Position		      [325, 40, 345, 60]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "T_gb_out"
	      SrcPort		      1
	      DstBlock		      "Goto <vc>"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "w_gb_out"
	      SrcPort		      1
	      DstBlock		      "Goto <vc>1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "eta_gb"
	      SrcPort		      1
	      DstBlock		      "Goto <vc>2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <vc>"
	      SrcPort		      1
	      DstBlock		      "gear_ratio"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "effect of inertia\n(Nm)"
	  Ports			  [1, 1]
	  Position		  [370, 152, 400, 188]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "effect of inertia\n(Nm)"
	    Location		    [4, 399, 457, 594]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "gb input speed (rad/s)"
	      Position		      [50, 25, 70, 45]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      Position		      [195, 15, 300, 55]
	      FontName		      "Arial"
	      Gain		      "gb_inertia"
	      Multiplication	      "Element-wise(K.*u)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Derivative
	      Name		      "d/dt"
	      Position		      [125, 25, 155, 45]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "drag torque\n(Nm)"
	      Position		      [350, 25, 370, 45]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "drag torque\n(Nm)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gb input speed (rad/s)"
	      SrcPort		      1
	      DstBlock		      "d/dt"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "d/dt"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Annotation {
	      Position		      [212, 102]
	      VerticalAlignment	      "top"
	      Text		      "The inertia torque is the input torque "
"required to accelerate the\ngearbox's inertia as measured on the input side."
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "gearbox \nefficiency"
	  Ports			  [1]
	  Position		  [640, 260, 670, 310]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "gearbox \nefficiency"
	    Location		    [549, 260, 949, 480]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "In1"
	      Position		      [25, 128, 55, 142]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [90, 85, 110, 105]
	      FontName		      "Arial"
	      Value		      "eps"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      Position		      [90, 35, 110, 55]
	      FontName		      "Arial"
	      Value		      "1"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [205, 68, 225, 97]
	      FontName		      "Arial"
	      Inputs		      "*/"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [270, 119, 300, 151]
	      FontName		      "Arial"
	      Threshold		      "1"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To Workspace11"
	      Position		      [330, 125, 370, 145]
	      VariableName	      "eta_gb"
	      MaxDataPoints	      "inf"
	      Decimation	      "1"
	      SampleTime	      "-1"
	      SaveFormat	      "Array"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "make division\nbombproof"
	      Ports		      [2, 1]
	      Position		      [155, 70, 175, 105]
	      FontName		      "Arial"
	      IconShape		      "rectangular"
	      Inputs		      "++"
	      SaturateOnIntegerOverflow	on
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      Points		      [20, 0; 0, 40]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [75, 0]
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "make division\nbombproof"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "In1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[175, 0]
		Branch {
		  Points		  [0, 10]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Branch {
		  DstBlock		  "Switch"
		  DstPort		  2
		}
	      }
	      Branch {
		Points			[0, -55]
		DstBlock		"make division\nbombproof"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "To Workspace11"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      DstBlock		      "make division\nbombproof"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "gearing\n(Nm), (rad/s)"
	  Ports			  [2, 2]
	  Position		  [285, 12, 320, 63]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "gearing\n(Nm), (rad/s)"
	    Location		    [275, 428, 831, 623]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "output shaft\ntorque and speed\n (Nm), "
"(rad/s)"
	      Position		      [55, 25, 75, 45]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gear ratio"
	      Position		      [55, 120, 75, 140]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      Ports		      [1, 2]
	      Position		      [140, 16, 160, 49]
	      FontName		      "Arial"
	      Outputs		      "2"
	      BusSelectionMode	      off
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn1"
	      Position		      [300, 69, 330, 91]
	      ShowName		      off
	      FontName		      "Arial"
	      Expr		      "1/u"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      Ports		      [2, 1]
	      Position		      [355, 21, 375, 39]
	      FontName		      "Arial"
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      Ports		      [2, 1]
	      Position		      [355, 116, 375, 134]
	      FontName		      "Arial"
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "input shaft torque (Nm)"
	      Position		      [455, 20, 475, 40]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "input shaft speed (rad/s)"
	      Position		      [455, 115, 475, 135]
	      Port		      "2"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      DstBlock		      "input shaft speed (rad/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "input shaft torque (Nm)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Fcn1"
	      SrcPort		      1
	      Points		      [0, -45]
	      DstBlock		      "Product2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "output shaft\ntorque and speed\n (Nm), "
"(rad/s)"
	      SrcPort		      1
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gear ratio"
	      SrcPort		      1
	      Points		      [190, 0]
	      Branch {
		Points			[0, -50]
		DstBlock		"Fcn1"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Product3"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      DstBlock		      "Product2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      Points		      [60, 0; 0, 80]
	      DstBlock		      "Product3"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "gearing\n(Nm), (rad/s)1"
	  Ports			  [3, 2]
	  Position		  [545, 428, 580, 502]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "gearing\n(Nm), (rad/s)1"
	    Location		    [277, 426, 746, 612]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "input shaft torque (Nm)"
	      Position		      [75, 15, 95, 35]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "input shaft speed (rad/s)"
	      Position		      [75, 120, 95, 140]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gear ratio"
	      Position		      [75, 70, 95, 90]
	      Port		      "3"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn1"
	      Position		      [175, 69, 205, 91]
	      ShowName		      off
	      FontName		      "Arial"
	      Expr		      "1/u"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      Ports		      [2, 1]
	      Position		      [275, 21, 295, 39]
	      FontName		      "Arial"
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      Ports		      [2, 1]
	      Position		      [275, 116, 295, 134]
	      FontName		      "Arial"
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "output shaft torque (Nm)"
	      Position		      [375, 20, 395, 40]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "output shaft speed (rad/s)"
	      Position		      [375, 115, 395, 135]
	      Port		      "2"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "input shaft speed (rad/s)"
	      SrcPort		      1
	      DstBlock		      "Product3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "input shaft torque (Nm)"
	      SrcPort		      1
	      DstBlock		      "Product2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "output shaft torque (Nm)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      DstBlock		      "output shaft speed (rad/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gear ratio"
	      SrcPort		      1
	      Points		      [45, 0]
	      Branch {
		DstBlock		"Fcn1"
		DstPort			1
	      }
	      Branch {
		Points			[0, -45]
		DstBlock		"Product2"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Fcn1"
	      SrcPort		      1
	      Points		      [25, 0; 0, 40]
	      DstBlock		      "Product3"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "help1"
	  Ports			  []
	  Position		  [371, 514, 402, 557]
	  BackgroundColor	  "yellow"
	  DropShadow		  on
	  ShowName		  off
	  OpenFcn		  "web(['file:\\\\\\' which('cvt.htm')]);"
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "help1"
	    Location		    [203, 331, 569, 538]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "loss\n(Nm)"
	  Ports			  [2, 1]
	  Position		  [370, 79, 405, 121]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "loss\n(Nm)"
	    Location		    [105, 256, 728, 554]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "output torque\nand speed\n(Nm), (rad/s)"
	      Position		      [50, 65, 70, 85]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "pulley ratio"
	      Position		      [50, 185, 70, 205]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs2"
	      Position		      [440, 110, 470, 140]
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux1"
	      Ports		      [1, 2]
	      Position		      [115, 54, 135, 96]
	      FontName		      "Arial"
	      Outputs		      "2"
	      BusSelectionMode	      off
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Input Torque:\n3-D interpolation"
	      Ports		      [3, 1]
	      Position		      [195, 35, 240, 225]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"Input Torque:\n3-D interpolation"
		Location		[51, 193, 965, 538]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "output\ntorque (N*m)"
		  Position		  [145, 30, 165, 50]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Inport
		  Name			  "output\nspeed (rad/s)"
		  Position		  [195, 65, 215, 85]
		  Port			  "2"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Inport
		  Name			  "pulley\nratio"
		  Position		  [35, 210, 55, 230]
		  Port			  "3"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  Position		  [485, 95, 505, 115]
		  FontName		  "Arial"
		  Value			  "eps"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant4"
		  Position		  [725, 265, 745, 285]
		  FontName		  "Arial"
		  Value			  "0"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux2"
		  Ports			  [1, 2]
		  Position		  [415, 159, 435, 201]
		  FontName		  "Arial"
		  Outputs		  "2"
		  BusSelectionMode	  off
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up\nTable1"
		  Position		  [265, 198, 295, 222]
		  InputValues		  "[1:max(size(gb_ratio))]"
		  OutputValues		  "gb_ratio"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up\nTable2"
		  Position		  [320, 218, 350, 242]
		  InputValues		  "[1:max(size(gb_ratio))]"
		  OutputValues		  "gb_ratio"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux1"
		  Ports			  [4, 1]
		  Position		  [455, 162, 475, 238]
		  Inputs		  "4"
		  DisplayOption		  "none"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux2"
		  Ports			  [3, 1]
		  Position		  [590, 167, 610, 233]
		  Inputs		  "3"
		  DisplayOption		  "none"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux3"
		  Ports			  [2, 1]
		  Position		  [325, 150, 345, 185]
		  Inputs		  "2"
		  DisplayOption		  "none"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux4"
		  Ports			  [2, 1]
		  Position		  [320, 15, 340, 50]
		  Inputs		  "2"
		  DisplayOption		  "none"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux7"
		  Ports			  [4, 1]
		  Position		  [265, 19, 285, 166]
		  Inputs		  "4"
		  DisplayOption		  "none"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  Ports			  [3, 1]
		  Position		  [370, 77, 390, 113]
		  FontName		  "Arial"
		  Inputs		  "3"
		  Multiplication	  "Element-wise(.*)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Product
		  Name			  "Product2"
		  Ports			  [3, 1]
		  Position		  [710, 192, 730, 228]
		  FontName		  "Arial"
		  Inputs		  "*//"
		  Multiplication	  "Element-wise(.*)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum2"
		  Ports			  [2, 1]
		  Position		  [535, 72, 565, 103]
		  IconShape		  "rectangular"
		  Inputs		  "2"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  Position		  [765, 204, 795, 236]
		  FontName		  "Arial"
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "indices of nearest\npulley ratios f"
"or which\nthere exist maps"
		  Ports			  [1, 2]
		  Position		  [90, 199, 230, 241]
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "indices of nearest\npulley ratios"
" for which\nthere exist maps"
		    Location		    [80, 295, 541, 504]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    Position		    [15, 60, 35, 80]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    Position		    [190, 5, 210, 25]
		    Value		    "1"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Lookup
		    Name		    "Look-Up\nTable"
		    Position		    [70, 58, 100, 82]
		    InputValues		    "fliplr(gb_ratio)"
		    OutputValues	    "fliplr([1:max(size(gb_ratio))])"
		    }
		    Block {
		    BlockType		    Rounding
		    Name		    "Rounding\nFunction"
		    Position		    [150, 55, 180, 85]
		    Operator		    "fix"
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    "Saturation"
		    Position		    [290, 56, 320, 74]
		    UpperLimit		    "max(size(gb_ratio))"
		    LowerLimit		    "1"
		    LinearizeAsGain	    on
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    Ports		    [2, 1]
		    Position		    [245, 55, 265, 75]
		    IconShape		    "rectangular"
		    Inputs		    "++"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "index of\nupper bounding\nmap"
		    Position		    [355, 55, 375, 75]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "index of\nlower bounding\nmap"
		    Position		    [355, 130, 375, 150]
		    Port		    "2"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Look-Up\nTable"
		    SrcPort		    1
		    DstBlock		    "Rounding\nFunction"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Look-Up\nTable"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    Points		    [5, 0; 0, 45]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Rounding\nFunction"
		    SrcPort		    1
		    Points		    [25, 0]
		    Branch {
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, 70]
		    DstBlock		    "index of\nlower bounding\nmap"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Saturation"
		    SrcPort		    1
		    DstBlock		    "index of\nupper bounding\nmap"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    DstBlock		    "Saturation"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Fcn
		  Name			  "linear eqn\nfor power"
		  Position		  [640, 189, 670, 211]
		  Expr			  "u[5]*(u[6]-u[3])+u[1]"
		}
		Block {
		  BlockType		  Fcn
		  Name			  "slope for\nlinear interp."
		  Position		  [525, 189, 555, 211]
		  Expr			  "(u[1]-u[2])/(u[3]-u[4]+eps)"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "trq in \nlook-up"
		  Ports			  [1, 1]
		  Position		  [315, 70, 345, 120]
		  ShowPortLabels	  off
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskPromptString	  "Vector of output speeds|Vector of i"
"nput torques|Table of output torques|Vector of gear ratios"
		  MaskStyleString	  "edit,edit,edit,edit"
		  MaskTunableValueString  "on,on,on,on"
		  MaskCallbackString	  "|||"
		  MaskEnableString	  "on,on,on,on"
		  MaskVisibilityString	  "on,on,on,on"
		  MaskToolTipString	  "on,on,on,on"
		  MaskVariables		  "P1=@1;P2=@2;P3=@3;P4=@4;"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_map_spd_out*gb_spd_scale|gb_map_"
"trq_in*gb_trq_scale|gb_map_trq_out*gb_trq_scale|gb_ratio"
		  MaskVariableAliases	  ",,,"
		  System {
		    Name		    "trq in \nlook-up"
		    Location		    [131, 568, 361, 644]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [25, 33, 55, 47]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    "S-Function"
		    Name		    "S-Function5"
		    Ports		    [1, 1]
		    Position		    [80, 28, 150, 52]
		    FunctionName	    "sfun_gb_loss"
		    Parameters		    "P1,P2,P3,P4"
		    PortCounts		    "[]"
		    SFunctionModules	    "''"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    Position		    [175, 33, 205, 47]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "S-Function5"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function5"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "input\ntorque (Nm)"
		  Position		  [835, 210, 855, 230]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "pulley\nratio"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    DstBlock		    "indices of nearest\npulley ratios"
" for which\nthere exist maps"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 70; 505, 0]
		    Branch {
		    DstBlock		    "Mux2"
		    DstPort		    3
		    }
		    Branch {
		    Points		    [120, 0]
		    DstBlock		    "Product2"
		    DstPort		    3
		    }
		  }
		}
		Line {
		  SrcBlock		  "indices of nearest\npulley ratios f"
"or which\nthere exist maps"
		  SrcPort		  1
		  Points		  [5, 0; 0, 0]
		  Branch {
		    DstBlock		    "Look-Up\nTable1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -100]
		    DstBlock		    "Mux7"
		    DstPort		    3
		  }
		}
		Line {
		  SrcBlock		  "indices of nearest\npulley ratios f"
"or which\nthere exist maps"
		  SrcPort		  2
		  Points		  [15, 0]
		  Branch {
		    DstBlock		    "Look-Up\nTable2"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Mux7"
		    DstPort		    4
		  }
		}
		Line {
		  SrcBlock		  "Mux7"
		  SrcPort		  1
		  DstBlock		  "trq in \nlook-up"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "slope for\nlinear interp."
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Mux2"
		  SrcPort		  1
		  DstBlock		  "linear eqn\nfor power"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux1"
		  SrcPort		  1
		  Points		  [30, 0]
		  Branch {
		    Points		    [0, -20]
		    DstBlock		    "Mux2"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "slope for\nlinear interp."
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  2
		  DstBlock		  "Mux1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "output\ntorque (N*m)"
		  SrcPort		  1
		  DstBlock		  "Mux7"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  1
		  DstBlock		  "Mux1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Look-Up\nTable1"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    DstBlock		    "Mux1"
		    DstPort		    3
		  }
		  Branch {
		    Points		    [0, -50]
		    DstBlock		    "Mux3"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Look-Up\nTable2"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    DstBlock		    "Mux1"
		    DstPort		    4
		  }
		  Branch {
		    Points		    [0, -30; -50, 0]
		    DstBlock		    "Mux3"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "output\nspeed (rad/s)"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    DstBlock		    "Mux7"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, -65; 65, 0]
		    Branch {
		    Points		    [0, 15]
		    Branch {
		    DstBlock		    "Mux4"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 15]
		    DstBlock		    "Mux4"
		    DstPort		    2
		    }
		    }
		    Branch {
		    Points		    [220, 0]
		    Branch {
		    DstBlock		    "Sum2"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [230, 0]
		    DstBlock		    "Switch1"
		    DstPort		    2
		    }
		    }
		  }
		}
		Line {
		  SrcBlock		  "trq in \nlook-up"
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Mux4"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Product1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux3"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Product1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Demux2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "linear eqn\nfor power"
		  SrcPort		  1
		  DstBlock		  "Product2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum2"
		  SrcPort		  1
		  Points		  [125, 0]
		  DstBlock		  "Product2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product2"
		  SrcPort		  1
		  DstBlock		  "Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  DstBlock		  "input\ntorque (Nm)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant4"
		  SrcPort		  1
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Sum2"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      Ports		      [2, 1]
	      Position		      [290, 21, 320, 54]
	      Inputs		      "*/"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum2"
	      Ports		      [2, 1]
	      Position		      [375, 107, 405, 138]
	      IconShape		      "rectangular"
	      Inputs		      "-+"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "loss torque at\ninput shaft (Nm)"
	      Position		      [525, 115, 545, 135]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Demux1"
	      SrcPort		      2
	      Points		      [40, 0]
	      DstBlock		      "Input Torque:\n3-D interpolation"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "output torque\nand speed\n(Nm), (rad/s)"
	      SrcPort		      1
	      DstBlock		      "Demux1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "pulley ratio"
	      SrcPort		      1
	      Points		      [75, 0]
	      Branch {
		DstBlock		"Input Torque:\n3-D interpolation"
		DstPort			3
	      }
	      Branch {
		Points			[0, 65; 125, 0]
		DstBlock		"Product3"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Demux1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"Input Torque:\n3-D interpolation"
		DstPort			1
	      }
	      Branch {
		Points			[0, -35]
		DstBlock		"Product3"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      Points		      [15, 0; 0, 75]
	      DstBlock		      "Sum2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum2"
	      SrcPort		      1
	      DstBlock		      "Abs2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Abs2"
	      SrcPort		      1
	      DstBlock		      "loss torque at\ninput shaft (Nm)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Input Torque:\n3-D interpolation"
	      SrcPort		      1
	      DstBlock		      "Sum2"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "torque and speed req'd\nat input side of cv"
"t\n(Nm), (rad/s)"
	  Position		  [755, 35, 775, 55]
	  FontName		  "Arial"
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Block {
	  BlockType		  Outport
	  Name			  "torque and speed avail.\nat output side of "
"cvt\n(Nm), (rad/s)"
	  Position		  [760, 460, 780, 480]
	  FontName		  "Arial"
	  Port			  "2"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Line {
	  SrcBlock		  "Pout/Pin,\nneglecting inertia"
	  SrcPort		  1
	  Points		  [25, 0]
	  Branch {
	    DstBlock		    "gearbox \nefficiency"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 55; -185, 0]
	    Branch {
	      Points		      [0, 85; -25, 0]
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Branch {
	      DstBlock		      "Memory"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "Switch2"
	  SrcPort		  1
	  Points		  [10, 0]
	  Branch {
	    Points		    [0, 135; -25, 0]
	    DstBlock		    "Pout/Pin,\nneglecting inertia"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -75]
	    DstBlock		    "Mux"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "To Workspace8"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Sum2"
	  SrcPort		  1
	  DstBlock		  "Switch2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux1"
	  SrcPort		  1
	  DstBlock		  "torque and speed avail.\nat output side of "
"cvt\n(Nm), (rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sum3"
	  SrcPort		  1
	  DstBlock		  "gearing\n(Nm), (rad/s)1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "torque and speed avail.\nat input side of c"
"vt\n(Nm), (rad/s)"
	  SrcPort		  1
	  DstBlock		  "Demux1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux"
	  SrcPort		  1
	  DstBlock		  "torque and speed req'd\nat input side of cv"
"t\n(Nm), (rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearing\n(Nm), (rad/s)"
	  SrcPort		  1
	  Points		  [105, 0; 0, 50]
	  DstBlock		  "Sum2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gearing\n(Nm), (rad/s)"
	  SrcPort		  2
	  Points		  [20, 0]
	  Branch {
	    Points		    [140, 0]
	    Branch {
	      Points		      [0, 60]
	      DstBlock		      "Switch2"
	      DstPort		      2
	    }
	    Branch {
	      Points		      [95, 0]
	      Branch {
		DstBlock		"Mux"
		DstPort			2
	      }
	      Branch {
		Points			[0, 105]
		DstBlock		"To Workspace9"
		DstPort			1
	      }
	    }
	  }
	  Branch {
	    Points		    [0, 120]
	    DstBlock		    "effect of inertia\n(Nm)"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "effect of inertia\n(Nm)"
	  SrcPort		  1
	  Points		  [25, 0]
	  Branch {
	    Points		    [0, 0]
	    Branch {
	      Points		      [60, 0; 0, -50]
	      DstBlock		      "Switch2"
	      DstPort		      3
	    }
	    Branch {
	      Points		      [0, -45]
	      DstBlock		      "Sum2"
	      DstPort		      3
	    }
	  }
	  Branch {
	    Points		    [0, 105]
	    Branch {
	      Points		      [0, 155]
	      DstBlock		      "Sum3"
	      DstPort		      1
	    }
	    Branch {
	      DstBlock		      "Pout/Pin,\nneglecting inertia"
	      DstPort		      2
	    }
	  }
	}
	Line {
	  SrcBlock		  "torque and speed req'd\nat output side of c"
"vt\n(Nm), (rad/s)"
	  SrcPort		  1
	  Points		  [45, 0]
	  Branch {
	    DstBlock		    "gearing\n(Nm), (rad/s)"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 65]
	    Branch {
	      DstBlock		      "loss\n(Nm)"
	      DstPort		      1
	    }
	    Branch {
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  2
	  Points		  [10, 0]
	  Branch {
	    DstBlock		    "cvt controller interface"
	    DstPort		    2
	  }
	  Branch {
	    DstBlock		    "To Workspace3"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    Points		    [30, 0]
	    Branch {
	      DstBlock		      "cvt controller interface"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [0, 70]
	      DstBlock		      "Pout/Pin,\nneglecting inertia"
	      DstPort		      3
	    }
	  }
	  Branch {
	    Points		    [0, -90]
	    DstBlock		    "To Workspace2"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "gearing\n(Nm), (rad/s)1"
	  SrcPort		  2
	  Points		  [50, 0]
	  Branch {
	    Points		    [0, 0]
	    DstBlock		    "Mux1"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [0, -85]
	    DstBlock		    "To Workspace5"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "gearing\n(Nm), (rad/s)1"
	  SrcPort		  1
	  Points		  [40, 0]
	  Branch {
	    DstBlock		    "Mux1"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -90]
	    DstBlock		    "To Workspace4"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  1
	  Points		  [25, 0]
	  Branch {
	    DstBlock		    "Product"
	    DstPort		    2
	  }
	  Branch {
	    DstBlock		    "To Workspace6"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  2
	  Points		  [15, 0]
	  Branch {
	    DstBlock		    "gearing\n(Nm), (rad/s)1"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [0, 60]
	    DstBlock		    "To Workspace7"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "loss\n(Nm)"
	  SrcPort		  1
	  DstBlock		  "Sum2"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "cvt controller interface"
	  SrcPort		  1
	  Points		  [55, 0]
	  Branch {
	    Points		    [0, -40; -110, 0; 0, -90]
	    Branch {
	      DstBlock		      "loss\n(Nm)"
	      DstPort		      2
	    }
	    Branch {
	      DstBlock		      "gearing\n(Nm), (rad/s)"
	      DstPort		      2
	    }
	  }
	  Branch {
	    Points		    [0, 65; 135, 0]
	    Branch {
	      DstBlock		      "Pout/Pin,\nneglecting inertia"
	      DstPort		      4
	    }
	    Branch {
	      Points		      [0, 50]
	      Branch {
		Points			[0, 135]
		DstBlock		"gearing\n(Nm), (rad/s)1"
		DstPort			3
	      }
	      Branch {
		DstBlock		"Product1"
		DstPort			1
	      }
	    }
	  }
	}
	Line {
	  SrcBlock		  "Memory"
	  SrcPort		  1
	  Points		  [-165, 0]
	  DstBlock		  "cvt controller interface"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Product1"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "To Workspace10"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Product"
	  SrcPort		  1
	  Points		  [25, 0]
	  Branch {
	    DstBlock		    "Sum3"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [0, -80]
	    DstBlock		    "Product1"
	    DstPort		    2
	  }
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "SubLibraries"
      Ports		      []
      Position		      [261, 517, 300, 548]
      BackgroundColor	      "darkGreen"
      ShowPortLabels	      on
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      System {
	Name			"SubLibraries"
	Location		[82, 115, 869, 511]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  SubSystem
	  Name			  "3D discrete lookup\ntable"
	  Ports			  [3, 1]
	  Position		  [115, 254, 145, 306]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskPromptString	  "Row Lookup|Column Lookup|Lookup Matrix"
	  MaskStyleString	  "edit,edit,edit"
	  MaskTunableValueString  "on,on,on"
	  MaskCallbackString	  "||"
	  MaskEnableString	  "on,on,on"
	  MaskVisibilityString	  "on,on,on"
	  MaskToolTipString	  "on,on,on"
	  MaskVariables		  "tx_map_spd=@1;tx_map_trq=@2;tx_eff_map=@3;"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "tx_map_spd|tx_map_trq|tx_eff_map"
	  MaskVariableAliases	  ",,"
	  System {
	    Name		    "3D discrete lookup\ntable"
	    Location		    [131, 118, 739, 592]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "automatic"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "lookup speed (rad/s)"
	      Position		      [45, 68, 75, 82]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "lookup trq (Nm)"
	      Position		      [40, 208, 70, 222]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gear_number \n(e.g., 1, 2, 3)"
	      Position		      [40, 348, 70, 362]
	      Port		      "3"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      Ports		      [3, 1]
	      Position		      [225, 3, 235, 427]
	      ShowName		      off
	      Inputs		      "3"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      Position		      [125, 60, 155, 90]
	      UpperLimit	      "max(tx_map_spd)"
	      LowerLimit	      "min(tx_map_spd)"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation1"
	      Position		      [120, 200, 150, 230]
	      UpperLimit	      "max(tx_map_trq)"
	      LowerLimit	      "min(tx_map_trq)"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation2"
	      Position		      [120, 340, 150, 370]
	      UpperLimit	      "size(tx_eff_map,3)"
	      LowerLimit	      "1"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      MATLABFcn
	      Name		      "interp2d"
	      Position		      [255, 200, 315, 230]
	      MATLABFcn		      "interp2(tx_map_trq, tx_map_spd, tx_eff_"
"map(:,:,u(3)),u(2),u(1))"
	      OutputDimensions	      "1"
	      OutputSignalType	      "real"
	      Output1D		      on
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "tx_eff"
	      Position		      [345, 208, 375, 222]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      DstBlock		      "interp2d"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "interp2d"
	      SrcPort		      1
	      DstBlock		      "tx_eff"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "lookup speed (rad/s)"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "lookup trq (Nm)"
	      SrcPort		      1
	      DstBlock		      "Saturation1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation1"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gear_number \n(e.g., 1, 2, 3)"
	      SrcPort		      1
	      DstBlock		      "Saturation2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation2"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      3
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "3D discrete lookup\ntable (sfun)"
	  Ports			  [3, 1]
	  Position		  [465, 254, 495, 306]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskPromptString	  "Row Lookup|Column Lookup|Lookup Matrix"
	  MaskStyleString	  "edit,edit,edit"
	  MaskTunableValueString  "on,on,on"
	  MaskCallbackString	  "||"
	  MaskEnableString	  "on,on,on"
	  MaskVisibilityString	  "on,on,on"
	  MaskToolTipString	  "on,on,on"
	  MaskVariables		  "tx_map_spd=@1;tx_map_trq=@2;tx_eff_map=@3;"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "tx_map_spd|tx_map_trq|tx_eff_map"
	  MaskVariableAliases	  ",,"
	  System {
	    Name		    "3D discrete lookup\ntable (sfun)"
	    Location		    [135, 114, 743, 588]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "automatic"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "lookup speed (rad/s)"
	      Position		      [45, 68, 75, 82]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "lookup trq (Nm)"
	      Position		      [40, 208, 70, 222]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gear_number \n(e.g., 1, 2, 3)"
	      Position		      [40, 348, 70, 362]
	      Port		      "3"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      Ports		      [3, 1]
	      Position		      [225, 3, 235, 427]
	      ShowName		      off
	      Inputs		      "3"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      Position		      [125, 60, 155, 90]
	      UpperLimit	      "max(tx_map_spd)"
	      LowerLimit	      "min(tx_map_spd)"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation1"
	      Position		      [120, 200, 150, 230]
	      UpperLimit	      "max(tx_map_trq)"
	      LowerLimit	      "min(tx_map_trq)"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation2"
	      Position		      [120, 340, 150, 370]
	      UpperLimit	      "size(tx_eff_map,3)"
	      LowerLimit	      "1"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      "S-Function"
	      Name		      "discrete interp2d"
	      Ports		      [1, 1]
	      Position		      [255, 199, 380, 231]
	      FunctionName	      "sfun_discreteLookup3d"
	      Parameters	      "tx_map_trq, tx_map_spd, tx_eff_map"
	      PortCounts	      "[]"
	      SFunctionModules	      "''"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "tx_eff"
	      Position		      [405, 208, 435, 222]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Line {
	      SrcBlock		      "Saturation2"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "gear_number \n(e.g., 1, 2, 3)"
	      SrcPort		      1
	      DstBlock		      "Saturation2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation1"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "lookup trq (Nm)"
	      SrcPort		      1
	      DstBlock		      "Saturation1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "lookup speed (rad/s)"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      DstBlock		      "discrete interp2d"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "discrete interp2d"
	      SrcPort		      1
	      DstBlock		      "tx_eff"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "gear determination\n(e.g., 1st gear, 2nd, e"
"tc.)"
	  Ports			  [1, 1]
	  Position		  [110, 144, 250, 186]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "gear determination\n(e.g., 1st gear, 2nd,"
" etc.)"
	    Location		    [27, 183, 603, 498]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "in_1"
	      Position		      [15, 75, 35, 95]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "Look-Up\nTable"
	      Position		      [70, 73, 100, 97]
	      InputValues	      "fliplr([gb_ratio(1)+0.00001,gb_ratio(2:"
"end)])"
	      OutputValues	      "fliplr( [1:length(gb_ratio)] )"
	    }
	    Block {
	      BlockType		      Rounding
	      Name		      "Rounding\nFunction"
	      Position		      [150, 70, 180, 100]
	      Operator		      "round"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "index of\nlower bounding\nmap"
	      Position		      [245, 75, 265, 95]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "in_1"
	      SrcPort		      1
	      DstBlock		      "Look-Up\nTable"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Look-Up\nTable"
	      SrcPort		      1
	      DstBlock		      "Rounding\nFunction"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Rounding\nFunction"
	      SrcPort		      1
	      DstBlock		      "index of\nlower bounding\nmap"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "loss\n(Nm)"
	  Ports			  [3, 1]
	  Position		  [150, 44, 185, 86]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskPromptString	  "table of efficiency values (spd rad/s, trq "
"Nm)|vector of output torque values for lookup table (Nm)|vector of output spe"
"eds for lookup table (rad/s)|Speed scale for the transmission gear box|Torque"
" scale for the transmission gear box"
	  MaskStyleString	  "edit,edit,edit,edit,edit"
	  MaskTunableValueString  "on,on,on,on,on"
	  MaskCallbackString	  "||||"
	  MaskEnableString	  "on,on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on,on"
	  MaskToolTipString	  "on,on,on,on,on"
	  MaskVariables		  "tx_eff_map=@1;tx_map_trq=@2;tx_map_spd=@3;g"
"b_spd_scale=@4;gb_trq_scale=@5;"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "tx_eff_map|tx_map_trq|tx_map_spd|gb_spd_sca"
"le|gb_trq_scale"
	  MaskVariableAliases	  ",,,,"
	  System {
	    Name		    "loss\n(Nm)"
	    Location		    [2, 40, 1022, 722]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "output torque\nand speed\n(Nm), (rad/s)"
	      Position		      [50, 60, 70, 80]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gear ratio"
	      Position		      [45, 520, 65, 540]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gear_number"
	      Position		      [45, 445, 65, 465]
	      Port		      "3"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "3D discrete lookup\ntable (sfun)"
	      Ports		      [3, 1]
	      Position		      [285, 279, 315, 331]
	      SourceBlock	      "lib_transmission/SubLibraries/3D discre"
"te lookup\ntable (sfun)"
	      SourceType	      "Unknown"
	      tx_map_spd	      "tx_map_spd"
	      tx_map_trq	      "tx_map_trq"
	      tx_eff_map	      "tx_eff_map"
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs"
	      Position		      [300, 16, 330, 34]
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [885, 595, 941, 635]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[370, 401, 872, 583]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [247, 17]
		  VerticalAlignment	  "top"
		  Text			  "Revision Notes:"
		}
		Annotation {
		  Position		  [252, 37]
		  VerticalAlignment	  "top"
		  Text			  "09/20/02:tm modifed lower input to "
"switch after T_loss_at_input to pass the \ntotal torque input as the loss whe"
"n tx_eff=0\n5 July 2001:mpo changing loss block to a lookup table methodology"
"\n12/20/00:tm revised loss saturation block. lower limit changed \nfrom 1 to "
"0 and upper limit changed from 100 to inf to prevent over or under penalties"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [600, 305, 625, 325]
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      Position		      [350, 386, 375, 404]
	      Value		      "1"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      Position		      [620, 223, 645, 237]
	      ShowName		      off
	      Value		      "eps"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      Position		      [915, 370, 940, 390]
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      Position		      [1000, 420, 1025, 440]
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      Ports		      [1, 2]
	      Position		      [110, 41, 115, 99]
	      BackgroundColor	      "black"
	      ShowName		      off
	      Outputs		      "2"
	      BusSelectionMode	      off
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      Position		      [525, 291, 590, 309]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "T_out"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From10"
	      Position		      [500, 200, 605, 220]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "tx_eff"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From11"
	      Position		      [870, 353, 955, 367]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "w_out"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From4"
	      Position		      [500, 395, 640, 415]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "one_minus_tx_eff"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From5"
	      Position		      [500, 444, 630, 466]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "T_out_abs"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From6"
	      Position		      [500, 495, 605, 515]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "gear_ratio"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From7"
	      Position		      [500, 75, 640, 95]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "one_minus_tx_eff"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From8"
	      Position		      [500, 119, 630, 141]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "T_out_abs"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From9"
	      Position		      [500, 165, 605, 185]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "gear_ratio"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto"
	      Position		      [135, 439, 240, 471]
	      GotoTag		      "gear_number"
	      TagVisibility	      "local"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto1"
	      Position		      [135, 516, 240, 544]
	      GotoTag		      "gear_ratio"
	      TagVisibility	      "local"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto2"
	      Position		      [180, 45, 285, 65]
	      NamePlacement	      "alternate"
	      GotoTag		      "T_out"
	      TagVisibility	      "local"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto3"
	      Position		      [180, 75, 285, 95]
	      GotoTag		      "w_out"
	      TagVisibility	      "local"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto4"
	      Position		      [415, 290, 455, 320]
	      GotoTag		      "tx_eff"
	      TagVisibility	      "local"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto5"
	      Position		      [430, 337, 550, 363]
	      GotoTag		      "one_minus_tx_eff"
	      TagVisibility	      "local"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto6"
	      Position		      [355, 15, 460, 35]
	      GotoTag		      "T_out_abs"
	      TagVisibility	      "local"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [4, 1]
	      Position		      [765, 63, 785, 242]
	      ShowName		      off
	      Inputs		      "**//"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      Ports		      [3, 1]
	      Position		      [720, 382, 740, 528]
	      Inputs		      "**/"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      Position		      [715, 292, 745, 323]
	      Operator		      ">="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      Position		      [975, 351, 990, 384]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [395, 340, 415, 360]
	      ShowName		      off
	      IconShape		      "round"
	      Inputs		      "|-+"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [865, 294, 895, 326]
	      FontName		      "Arial"
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      Position		      [1050, 304, 1080, 336]
	      FontName		      "Arial"
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch2"
	      Position		      [660, 204, 690, 236]
	      ShowName		      off
	      FontName		      "Arial"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch3"
	      Position		      [810, 229, 840, 261]
	      ShowName		      off
	      FontName		      "Arial"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To Workspace"
	      Position		      [110, 564, 240, 586]
	      VariableName	      "current_gear_ratio"
	      MaxDataPoints	      "1"
	      Decimation	      "1"
	      SampleTime	      "-1"
	      SaveFormat	      "Array"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "ensure efficiency\nis between \n0% and "
"100%,\ninclusive"
	      Position		      [340, 290, 370, 320]
	      NamePlacement	      "alternate"
	      UpperLimit	      "1"
	      LowerLimit	      "0"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      From
	      Name		      "gear number (1st, 2nd, 3rd, etc.)"
	      Position		      [135, 356, 230, 374]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "gear_number"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "product1"
	      Ports		      [2, 1]
	      Position		      [760, 251, 790, 284]
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "scaled trq_out"
	      Ports		      [2, 1]
	      Position		      [185, 284, 200, 326]
	      Inputs		      "*/"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "scaled w_out"
	      Ports		      [2, 1]
	      Position		      [205, 236, 220, 269]
	      NamePlacement	      "alternate"
	      Inputs		      "/*"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "spd scale"
	      Position		      [15, 237, 95, 253]
	      NamePlacement	      "alternate"
	      Value		      "gb_spd_scale"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      From
	      Name		      "spd_out"
	      Position		      [105, 253, 190, 267]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "w_out"
	    }
	    Block {
	      BlockType		      From
	      Name		      "trq out"
	      Position		      [15, 286, 95, 304]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "T_out"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "trq scale"
	      Position		      [85, 307, 165, 323]
	      Value		      "gb_trq_scale"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "loss torque at\ninput shaft (Nm)"
	      Position		      [1120, 310, 1140, 330]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "output torque\nand speed\n(Nm), (rad/s)"
	      SrcPort		      1
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      DstBlock		      "Goto3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gear number (1st, 2nd, 3rd, etc.)"
	      SrcPort		      1
	      Points		      [0, -35; 35, 0]
	      DstBlock		      "3D discrete lookup\ntable (sfun)"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      Points		      [45, 0; 0, -135]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From4"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From6"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From5"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From7"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From8"
	      SrcPort		      1
	      Points		      [100, 0]
	      Branch {
		DstBlock		"Product"
		DstPort			2
	      }
	      Branch {
		Points			[0, 130]
		DstBlock		"product1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "From9"
	      SrcPort		      1
	      Points		      [105, 0]
	      Branch {
		DstBlock		"Product"
		DstPort			3
	      }
	      Branch {
		Points			[0, 100]
		DstBlock		"product1"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "loss torque at\ninput shaft (Nm)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From11"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [5, 0; 0, -50]
	      DstBlock		      "Switch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      Points		      [35, 0]
	      Branch {
		DstBlock		"Goto2"
		DstPort			1
	      }
	      Branch {
		Points			[0, -30]
		DstBlock		"Abs"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Abs"
	      SrcPort		      1
	      DstBlock		      "Goto6"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "3D discrete lookup\ntable (sfun)"
	      SrcPort		      1
	      DstBlock		      "ensure efficiency\nis between \n0% and "
"100%,\ninclusive"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "ensure efficiency\nis between \n0% and "
"100%,\ninclusive"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"Goto4"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Sum"
		DstPort			1
	      }
	    }
	    Line {
	      Labels		      [1, 0]
	      SrcBlock		      "scaled w_out"
	      SrcPort		      1
	      Points		      [0, 35]
	      DstBlock		      "3D discrete lookup\ntable (sfun)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "trq out"
	      SrcPort		      1
	      DstBlock		      "scaled trq_out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "scaled trq_out"
	      SrcPort		      1
	      DstBlock		      "3D discrete lookup\ntable (sfun)"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "trq scale"
	      SrcPort		      1
	      DstBlock		      "scaled trq_out"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [25, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "Goto5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "spd_out"
	      SrcPort		      1
	      DstBlock		      "scaled w_out"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "spd scale"
	      SrcPort		      1
	      DstBlock		      "scaled w_out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gear ratio"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"Goto1"
		DstPort			1
	      }
	      Branch {
		Points			[0, 45]
		DstBlock		"To Workspace"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "gear_number"
	      SrcPort		      1
	      DstBlock		      "Goto"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch2"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "From10"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"Switch2"
		DstPort			1
	      }
	      Branch {
		Points			[0, 10; 0, 0]
		Branch {
		  DstBlock		  "Switch2"
		  DstPort		  2
		}
		Branch {
		  Points		  [0, 25]
		  DstBlock		  "Switch3"
		  DstPort		  2
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch3"
	      SrcPort		      1
	      Points		      [0, 55]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Switch3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "product1"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      3
	    }
	    Annotation {
	      Position		      [278, 191]
	      ForegroundColor	      "white"
	      BackgroundColor	      "black"
	      Text		      "\nLOOKUP TABLE FOR TRANSMISSION EFFICIE"
"NCY\n"
	    }
	    Annotation {
	      Position		      [838, 414]
	      Text		      "T_loss_at_input"
	    }
	    Annotation {
	      Position		      [833, 488]
	      Text		      "\"Regen\" case\n(energy flowing from\nw"
"heel side of transmission\nto engine side of transmission)"
	    }
	    Annotation {
	      Position		      [840, 198]
	      Text		      "T_loss_at_input"
	    }
	    Annotation {
	      Position		      [874, 121]
	      Text		      "Normal \"Powered\" case\n(energy flow f"
"rom engine\nthrough transmission to wheels)"
	    }
	    Annotation {
	      Position		      [1067, 275]
	      Text		      "Switch to Determine \nif Gears are Turn"
"ing\n--No loss if gears \nare not turning"
	    }
	    Annotation {
	      Position		      [903, 278]
	      Text		      "Switch for Powered\n or Regen Case"
	    }
	    Annotation {
	      Position		      [1034, 501]
	      Text		      "Note: saturation block keeps\nloss posi"
"tive-- for both powered\nand regen cases, a\npositive value represents a \"lo"
"ss\""
	    }
	    Annotation {
	      Position		      [1069, 400]
	      Text		      "no_loss case"
	    }
	    Annotation {
	      Position		      [376, 87]
	      Text		      "speed at transmission output, rad/s"
	    }
	    Annotation {
	      Position		      [371, 55]
	      Text		      "torque at transmission output, Nm"
	    }
	    Annotation {
	      Position		      [269, 276]
	      Text		      "spd"
	    }
	    Annotation {
	      Position		      [263, 297]
	      Text		      "trq"
	    }
	    Annotation {
	      Position		      [254, 318]
	      Text		      "gear"
	    }
	    Annotation {
	      Position		      [990, 198]
	      ForegroundColor	      "white"
	      BackgroundColor	      "black"
	      Text		      "\nTORQUE LOSS CALCULATION\n"
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "loss\n(Nm) old methodology"
	  Ports			  [2, 1]
	  Position		  [600, 54, 635, 96]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "loss\n(Nm) old methodology"
	    Location		    [2, 201, 992, 520]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "output torque\nand speed\n(Nm), (rad/s)"
	      Position		      [50, 25, 70, 45]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gear ratio"
	      Position		      [65, 145, 85, 165]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs"
	      Position		      [430, 10, 460, 40]
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [865, 20, 921, 60]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[364, 407, 866, 589]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [247, 17]
		  VerticalAlignment	  "top"
		  Text			  "Revision Notes:"
		}
		Annotation {
		  Position		  [252, 37]
		  VerticalAlignment	  "top"
		  Text			  "12/20/00:tm revised loss saturation"
" block. lower limit changed \nfrom 1 to 0 and upper limit changed from 100 to"
" inf to prevent over or under penalties"
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [750, 205, 770, 225]
	      Orientation	      "up"
	      FontName		      "Arial"
	      Value		      "eps"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      Position		      [145, 248, 335, 272]
	      Value		      "gb_loss_input_spd_coeff/gb_spd_scale"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      Position		      [140, 159, 330, 181]
	      Value		      "gb_loss_input_trq_coeff/gb_trq_scale"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      Position		      [140, 203, 335, 227]
	      Value		      "gb_loss_output_spd_coeff/gb_spd_scale"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      Position		      [140, 113, 330, 137]
	      Value		      "gb_loss_output_trq_coeff/gb_trq_scale"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      Position		      [537, 200, 663, 220]
	      Orientation	      "up"
	      NamePlacement	      "alternate"
	      Value		      "gb_loss_const"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      Position		      [100, 74, 370, 96]
	      Value		      "gb_loss_output_pwr_coeff/gb_spd_scale/g"
"b_trq_scale"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant7"
	      Position		      [815, 180, 835, 200]
	      Orientation	      "up"
	      FontName		      "Arial"
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      Ports		      [1, 2]
	      Position		      [390, 16, 410, 49]
	      FontName		      "Arial"
	      Outputs		      "2"
	      BusSelectionMode	      off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [380, 237, 410, 268]
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      Ports		      [2, 1]
	      Position		      [350, 147, 380, 178]
	      Inputs		      "/*"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      Ports		      [2, 1]
	      Position		      [505, 17, 535, 48]
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      Ports		      [2, 1]
	      Position		      [505, 122, 535, 153]
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product4"
	      Ports		      [3, 1]
	      Position		      [505, 69, 535, 101]
	      Inputs		      "3"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      Position		      [775, 132, 805, 163]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      Position		      [775, 70, 805, 100]
	      UpperLimit	      "inf"
	      LowerLimit	      "0"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [415, 142, 445, 173]
	      IconShape		      "rectangular"
	      Inputs		      "++"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum1"
	      Ports		      [2, 1]
	      Position		      [440, 232, 470, 263]
	      IconShape		      "rectangular"
	      Inputs		      "++"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum2"
	      Ports		      [4, 1]
	      Position		      [620, 24, 650, 121]
	      IconShape		      "rectangular"
	      Inputs		      "++++"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum3"
	      Ports		      [2, 1]
	      Position		      [652, 140, 683, 155]
	      Orientation	      "up"
	      NamePlacement	      "alternate"
	      IconShape		      "rectangular"
	      Inputs		      "++"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [840, 79, 870, 111]
	      FontName		      "Arial"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "loss torque"
	      Ports		      [3, 1]
	      Position		      [715, 69, 745, 101]
	      Inputs		      "*//"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "loss torque at\ninput shaft (Nm)"
	      Position		      [905, 85, 925, 105]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Abs"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"Product2"
		DstPort			1
	      }
	      Branch {
		Points			[0, 50]
		DstBlock		"Product4"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      DstBlock		      "Abs"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [5, 0; 0, -55]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [0, -15]
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			2
	      }
	      Branch {
		Points			[-85, 0]
		DstBlock		"Sum3"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant7"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      Points		      [40, 0; 0, -55]
	      DstBlock		      "Sum2"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "Sum2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "output torque\nand speed\n(Nm), (rad/s)"
	      SrcPort		      1
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "Sum1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      Points		      [15, 0; 0, -120]
	      DstBlock		      "Product2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum1"
	      SrcPort		      1
	      Points		      [5, 0; 0, -105]
	      DstBlock		      "Product3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      Points		      [0, -85]
	      DstBlock		      "Sum2"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "gear ratio"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		DstBlock		"Product1"
		DstPort			1
	      }
	      Branch {
		Points			[0, 90]
		Branch {
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 45; 575, 0; 0, -195]
		  DstBlock		  "loss torque"
		  DstPort		  3
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      Points		      [65, 0]
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      Points		      [85, 0]
	      DstBlock		      "Sum1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      DstBlock		      "Product4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product4"
	      SrcPort		      1
	      Points		      [30, 0; 0, -25]
	      DstBlock		      "Sum2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "loss torque at\ninput shaft (Nm)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum2"
	      SrcPort		      1
	      DstBlock		      "loss torque"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      Points		      [10, 0; 0, 90; 50, 0]
	      Branch {
		Points			[5, 0]
		Branch {
		  DstBlock		  "Product3"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, -35]
		  DstBlock		  "Product4"
		  DstPort		  3
		}
	      }
	      Branch {
		Points			[0, 45; 185, 0]
		Branch {
		  Points		  [90, 0; 0, -35]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 0]
		  DstBlock		  "Sum3"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "loss torque"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum3"
	      SrcPort		      1
	      Points		      [0, -50]
	      DstBlock		      "loss torque"
	      DstPort		      2
	    }
	    Annotation {
	      Position		      [832, 247]
	      VerticalAlignment	      "top"
	      Text		      "Loss torque applied at input side is a "
"function of\n output speed, output torque, and gear number.\nThere is no loss"
" if the gears are not turning."
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "notes on \n3D discrete lookup\ntable"
	  Ports			  []
	  Position		  [271, 262, 310, 293]
	  BackgroundColor	  "green"
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "notes on \n3D discrete lookup\ntable"
	    Location		    [480, 158, 978, 458]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Annotation {
	      Position		      [250, 58]
	      Text		      "performs a \"2D\" lookup\nfor the speci"
"fied\nz height of the 3D lookup matrix\n(i.e., no interpolation on z, only di"
"screte) "
	    }
	    Annotation {
	      Position		      [252, 235]
	      Text		      "created 5 July 2001 mpo\nRevision histo"
"ry:\n..."
	    }
	    Annotation {
	      Position		      [99, 134]
	      Text		      "3 inputs:\n(1) X lookup\n(2) Y lookup\n"
"(3) discrete Z value (integer)\n\n1 output:\n(1) looked up value"
	    }
	    Annotation {
	      Position		      [334, 136]
	      Text		      "3 masked inputs:\n(1) array of X values"
" in table\n(2) array of Y values in table\n(3) 3D lookup table (i.e., 2D tabl"
"es for several Z values)"
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "notes on \nloss (Nm)"
	  Ports			  []
	  Position		  [276, 47, 315, 78]
	  BackgroundColor	  "green"
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "notes on \nloss (Nm)"
	    Location		    [382, 172, 912, 472]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Annotation {
	      Position		      [354, 141]
	      Text		      "4 masked inputs:\n(1) map of efficienci"
"es by spd and trq and gear number (discrete)\n(2) array of trq values in effi"
"ciency map lookup table\n(3) array of spd values in efficiency map lookup tab"
"le\n(4) the ratios in the gear box "
	    }
	    Annotation {
	      Position		      [99, 144]
	      Text		      "2 inputs:\n(1) trq and spd at output (w"
"heel side) \nof Transmission (muxxed)\n(2) current gear ratio\n\n1 output:\n("
"1) trq loss at input (engine side) of\ntransmission"
	    }
	    Annotation {
	      Position		      [252, 235]
	      Text		      "created 5 July 2001 mpo\nRevision histo"
"ry:\n..."
	    }
	    Annotation {
	      Position		      [240, 43]
	      Text		      "Calculates the torque loss due to \ntra"
"nsmission inefficiencies\n(torque lost at input to transmission)"
	    }
	    Annotation {
	      Position		      [98, 251]
	      Text		      "note: tx_map_spd and tx_map_trq\n are o"
"utput (wheelside) values"
	    }
	    Annotation {
	      Position		      [408, 58]
	      BackgroundColor	      "lightBlue"
	      Text		      "data needs:\ntx_map_spd\ntx_map_trq\ntx"
"_eff_map\ngb_ratio"
	    }
	  }
	}
	Annotation {
	  Position		  [84, 34]
	  Text			  "Trq and Spd at Output\n(Nm) and (rad/s)"
	}
	Annotation {
	  Position		  [69, 87]
	  Text			  "Gear Ratio\n(input spd/output spd)"
	}
	Annotation {
	  Position		  [225, 64]
	  Text			  "Trq loss\nat input (Nm)"
	}
	Annotation {
	  Position		  [58, 165]
	  Text			  "gear ratio\n(input/output spd)"
	}
	Annotation {
	  Position		  [321, 159]
	  Text			  "gear (1st, 2nd, etc.)"
	}
	Annotation {
	  Position		  [289, 205]
	  BackgroundColor	  "lightBlue"
	  Text			  "data needs:\ngb_ratio"
	}
	Annotation {
	  Position		  [616, 28]
	  Text			  "Below is the loss block for a gear box base"
"d\non loss equation--used with ADVISOR v. 3.1 and below"
	}
	Annotation {
	  Position		  [60, 259]
	  Text			  "X_lookup"
	}
	Annotation {
	  Position		  [58, 282]
	  Text			  "Y_lookup"
	}
	Annotation {
	  Position		  [55, 304]
	  Text			  "Z_discrete value"
	}
	Annotation {
	  Position		  [203, 281]
	  Text			  "looked up value"
	}
	Annotation {
	  Position		  [400, 254]
	  Text			  "X_lookup"
	}
	Annotation {
	  Position		  [398, 277]
	  Text			  "Y_lookup"
	}
	Annotation {
	  Position		  [395, 299]
	  Text			  "Z_discrete value"
	}
	Annotation {
	  Position		  [553, 281]
	  Text			  "looked up value"
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "clutch <cl>"
      Ports		      [3, 2]
      Position		      [215, 50, 260, 120]
      BackgroundColor	      "yellow"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskType		      "Clutch"
      MaskDescription	      "Clutch for use with ADVISOR 2"
      MaskHelp		      "First input is req'd clutch output torque and s"
"peed, muxed together.\nSecond input is clutch state, with 1 => disengaged, 2 "
"=> slipping, and 3=> engaged.\nThird input is available clutch input torque a"
"nd limited clutch input speed.\nFirst output is req'd clutch input torque and"
" speed, muxed together.\nSecond output is available clutch output torque and "
"limited clutch output speed.\nThe logic implemented by this block is as follo"
"ws:\n          IF (clutch is disengaged) THEN (req'd input torque=0), (req'd "
"input speed=req'd output speed (the engine control is responsible for computi"
"ng correct engine spin-down speed)), (avail. output torque=0), (limited outpu"
"t speed=req'd output speed)\n          IF (clutch is slipping) THEN (req'd in"
"put torque=req'd output torque), (req'd input speed=user-defined slip speed),"
" (avail. output torque=avail. input torque), (limited output speed=req'd outp"
"ut speed)\n          IF (clutch is engaged) THEN (req'd input torque=req'd ou"
"tput torque), (req'd input speed=req'd output speed), (avail. output torque=a"
"vail. input torque), (limited output speed=limited input speed) \n\nThe clutc"
"h will transmit no more than its maximum torque as driving or braking torque."
      MaskPromptString	      "Input shaft speed when clutch slips (rad/s):|Ma"
"ximum torque clutch can transmit:"
      MaskStyleString	      "edit,edit"
      MaskTunableValueString  "on,on"
      MaskCallbackString      "|"
      MaskEnableString	      "on,on"
      MaskVisibilityString    "on,on"
      MaskToolTipString	      "on,on"
      MaskVariables	      "slip_spd=@1;maxtrq=@2;"
      MaskDisplay	      "image(imread('bdi_cl.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      MaskValueString	      "vc_launch_spd|max(fc_max_trq)*fc_trq_scale"
      MaskVariableAliases     ","
      System {
	Name			"clutch <cl>"
	Location		[167, 74, 834, 643]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "In1"
	  Position		  [25, 28, 55, 42]
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Inport
	  Name			  "clutch state:\n1 => disengaged\n2 => slippi"
"ng\n3 => engaged"
	  Position		  [35, 188, 65, 202]
	  Port			  "2"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Inport
	  Name			  "In2"
	  Position		  [20, 453, 50, 467]
	  Port			  "3"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant"
	  Position		  [135, 225, 155, 245]
	  Value			  "1"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant1"
	  Position		  [135, 290, 155, 310]
	  Value			  "2"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant2"
	  Position		  [135, 360, 155, 380]
	  Value			  "3"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant3"
	  Position		  [360, 105, 380, 125]
	  Orientation		  "up"
	  NamePlacement		  "alternate"
	  Value			  "0"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant4"
	  Position		  [328, 240, 402, 260]
	  Orientation		  "up"
	  Value			  "slip_spd"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant5"
	  Position		  [310, 460, 330, 480]
	  Value			  "0"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux"
	  Ports			  [1, 2]
	  Position		  [90, 17, 125, 53]
	  Outputs		  "2"
	  BusSelectionMode	  off
	  Port {
	    PortNumber		    1
	    Name		    "output torque"
	    TestPoint		    off
	    LinearAnalysisOutput    off
	    LinearAnalysisInput	    off
	    RTWStorageClass	    "Auto"
	  }
	  Port {
	    PortNumber		    2
	    Name		    "output\nspeed\nreq'd"
	    TestPoint		    off
	    LinearAnalysisOutput    off
	    LinearAnalysisInput	    off
	    RTWStorageClass	    "Auto"
	  }
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux1"
	  Ports			  [1, 2]
	  Position		  [115, 442, 150, 478]
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>"
	  Position		  [165, 69, 250, 91]
	  GotoTag		  "T_cl_out"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>1"
	  Position		  [165, 109, 250, 131]
	  GotoTag		  "w_cl_out"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Logic
	  Name			  "Logical\nOperator"
	  Ports			  [1, 1]
	  Position		  [315, 39, 345, 71]
	  Operator		  "NOT"
	  Inputs		  "1"
	}
	Block {
	  BlockType		  Logic
	  Name			  "Logical\nOperator1"
	  Ports			  [1, 1]
	  Position		  [310, 169, 340, 201]
	  Operator		  "NOT"
	  Inputs		  "1"
	}
	Block {
	  BlockType		  Logic
	  Name			  "Logical\nOperator2"
	  Ports			  [1, 1]
	  Position		  [310, 384, 340, 416]
	  Operator		  "NOT"
	  Inputs		  "1"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux"
	  Ports			  [2, 1]
	  Position		  [540, 27, 575, 63]
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux1"
	  Ports			  [2, 1]
	  Position		  [490, 452, 525, 488]
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Product
	  Name			  "Product"
	  Ports			  [1, 1]
	  Position		  [50, 504, 80, 536]
	  Inputs		  "1"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Product
	  Name			  "Product1"
	  Ports			  [1, 1]
	  Position		  [495, 514, 525, 546]
	  Inputs		  "1"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Saturate
	  Name			  "Saturation"
	  Position		  [425, 445, 455, 475]
	  UpperLimit		  "maxtrq"
	  LowerLimit		  "-maxtrq"
	  LinearizeAsGain	  on
	}
	Block {
	  BlockType		  Saturate
	  Name			  "Saturation1"
	  Position		  [450, 20, 480, 50]
	  UpperLimit		  "maxtrq"
	  LowerLimit		  "-maxtrq"
	  LinearizeAsGain	  on
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch"
	  Position		  [385, 20, 415, 50]
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch1"
	  Position		  [380, 145, 410, 175]
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch2"
	  Position		  [370, 445, 400, 475]
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch3"
	  Position		  [370, 510, 400, 540]
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace1"
	  Position		  [100, 511, 195, 529]
	  ShowName		  off
	  VariableName		  "clutch_pwr_in_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace2"
	  Position		  [545, 521, 640, 539]
	  ShowName		  off
	  VariableName		  "clutch_pwr_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "clutch\ndisengaged"
	  Position		  [185, 187, 215, 218]
	  Operator		  "=="
	  Port {
	    PortNumber		    1
	    Name		    "clutch\ndisengaged"
	    TestPoint		    off
	    LinearAnalysisOutput    off
	    LinearAnalysisInput	    off
	    RTWStorageClass	    "Auto"
	  }
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "clutch\nengaged"
	  Position		  [185, 322, 215, 353]
	  Operator		  "=="
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "clutch\nslipping"
	  Position		  [185, 252, 215, 283]
	  Operator		  "=="
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "help"
	  Ports			  []
	  Position		  [520, 286, 559, 332]
	  BackgroundColor	  "yellow"
	  DropShadow		  on
	  ShowName		  off
	  OpenFcn		  "web(['file:\\\\\\' which('clutch.htm')]);"
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "help"
	    Location		    [203, 331, 569, 538]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "Out1"
	  Position		  [600, 38, 630, 52]
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "[]"
	}
	Block {
	  BlockType		  Outport
	  Name			  "Out2"
	  Position		  [605, 463, 635, 477]
	  Port			  "2"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "[]"
	}
	Line {
	  SrcBlock		  "Saturation1"
	  SrcPort		  1
	  DstBlock		  "Mux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Switch"
	  SrcPort		  1
	  DstBlock		  "Saturation1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Saturation"
	  SrcPort		  1
	  DstBlock		  "Mux1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Switch2"
	  SrcPort		  1
	  DstBlock		  "Saturation"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant"
	  SrcPort		  1
	  Points		  [10, 0]
	  DstBlock		  "clutch\ndisengaged"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Constant1"
	  SrcPort		  1
	  Points		  [10, 0]
	  DstBlock		  "clutch\nslipping"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "clutch state:\n1 => disengaged\n2 => slippi"
"ng\n3 => engaged"
	  SrcPort		  1
	  Points		  [55, 0]
	  Branch {
	    DstBlock		    "clutch\ndisengaged"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 65]
	    Branch {
	      DstBlock		      "clutch\nslipping"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [0, 70]
	      DstBlock		      "clutch\nengaged"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "In1"
	  SrcPort		  1
	  DstBlock		  "Demux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux"
	  SrcPort		  1
	  DstBlock		  "Out1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant2"
	  SrcPort		  1
	  Points		  [10, 0]
	  DstBlock		  "clutch\nengaged"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "clutch\nslipping"
	  SrcPort		  1
	  Points		  [75, 0]
	  DstBlock		  "Logical\nOperator1"
	  DstPort		  1
	}
	Line {
	  Name			  "clutch\ndisengaged"
	  SrcBlock		  "clutch\ndisengaged"
	  SrcPort		  1
	  Points		  [50, 0]
	  Branch {
	    Points		    [0, -150]
	    DstBlock		    "Logical\nOperator"
	    DstPort		    1
	  }
	  Branch {
	    Labels		    [1, 0]
	    Points		    [0, 195]
	    DstBlock		    "Logical\nOperator2"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Logical\nOperator"
	  SrcPort		  1
	  Points		  [10, 0; 0, -20]
	  DstBlock		  "Switch"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Constant3"
	  SrcPort		  1
	  DstBlock		  "Switch"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Logical\nOperator1"
	  SrcPort		  1
	  Points		  [0, -25]
	  DstBlock		  "Switch1"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Constant4"
	  SrcPort		  1
	  DstBlock		  "Switch1"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Switch1"
	  SrcPort		  1
	  Points		  [105, 0; 0, -105]
	  DstBlock		  "Mux"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  1
	  DstBlock		  "Switch2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Logical\nOperator2"
	  SrcPort		  1
	  Points		  [10, 0]
	  DstBlock		  "Switch2"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Constant5"
	  SrcPort		  1
	  DstBlock		  "Switch2"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  2
	  Points		  [45, 0; 0, 45]
	  DstBlock		  "Switch3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Switch3"
	  SrcPort		  1
	  Points		  [65, 0; 0, -45]
	  DstBlock		  "Mux1"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "clutch\nengaged"
	  SrcPort		  1
	  Points		  [5, 0; 0, 185]
	  DstBlock		  "Switch3"
	  DstPort		  2
	}
	Line {
	  Name			  "output torque"
	  Labels		  [0, 0]
	  SrcBlock		  "Demux"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    DstBlock		    "Switch"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 55]
	    DstBlock		    "Goto <sdo>"
	    DstPort		    1
	  }
	}
	Line {
	  Name			  "output\nspeed\nreq'd"
	  SrcBlock		  "Demux"
	  SrcPort		  2
	  Points		  [5, 0]
	  Branch {
	    Points		    [100, 0; 0, 105]
	    Branch {
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Branch {
	      Labels		      [1, 0]
	      Points		      [0, 385]
	      DstBlock		      "Switch3"
	      DstPort		      3
	    }
	  }
	  Branch {
	    Points		    [0, 75]
	    DstBlock		    "Goto <sdo>1"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "In2"
	  SrcPort		  1
	  Points		  [10, 0]
	  Branch {
	    DstBlock		    "Demux1"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 30; -30, 0]
	    DstBlock		    "Product"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Product"
	  SrcPort		  1
	  DstBlock		  "To Workspace1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Product1"
	  SrcPort		  1
	  DstBlock		  "To Workspace2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux1"
	  SrcPort		  1
	  Points		  [25, 0]
	  Branch {
	    DstBlock		    "Out2"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 35; -75, 0]
	    DstBlock		    "Product1"
	    DstPort		    1
	  }
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "clutch <cl>\nfor par S/A"
      Ports		      [3, 2]
      Position		      [135, 55, 180, 125]
      BackgroundColor	      "yellow"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskType		      "Clutch"
      MaskDescription	      "Clutch for use with ADVISOR 2"
      MaskHelp		      "First input is req'd clutch output torque and s"
"peed, muxed together.\nSecond input is clutch state, with 1 => disengaged, 2 "
"=> slipping, and 3=> engaged.\nThird input is available clutch input torque a"
"nd limited clutch input speed.\nFirst output is req'd clutch input torque and"
" speed, muxed together.\nSecond output is available clutch output torque and "
"limited clutch output speed.\nThe logic implemented by this block is as follo"
"ws:\n          IF (clutch is disengaged) THEN (req'd input torque=0), (req'd "
"input speed=req'd output speed (the engine control is responsible for computi"
"ng correct engine spin-down speed)), (avail. output torque=0), (limited outpu"
"t speed=req'd output speed)\n          IF (clutch is slipping) THEN (req'd in"
"put torque=req'd output torque), (req'd input speed=user-defined slip speed),"
" (avail. output torque=avail. input torque), (limited output speed=req'd outp"
"ut speed)\n          IF (clutch is engaged) THEN (req'd input torque=req'd ou"
"tput torque), (req'd input speed=req'd output speed), (avail. output torque=a"
"vail. input torque), (limited output speed=limited input speed) \n\nThe clutc"
"h will transmit no more than its maximum torque as driving or braking torque."
      MaskPromptString	      "Input shaft speed when clutch slips (rad/s):|Ma"
"ximum torque clutch can transmit:"
      MaskStyleString	      "edit,edit"
      MaskTunableValueString  "on,on"
      MaskCallbackString      "|"
      MaskEnableString	      "on,on"
      MaskVisibilityString    "on,on"
      MaskToolTipString	      "on,on"
      MaskVariables	      "slip_spd=@1;maxtrq=@2;"
      MaskDisplay	      "image(imread('bdi_cl.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      MaskValueString	      "vc_launch_spd|max(fc_max_trq)*fc_trq_scale+max("
"mc_max_trq)*mc_overtrq_factor*mc_trq_scale"
      MaskVariableAliases     ","
      System {
	Name			"clutch <cl>\nfor par S/A"
	Location		[177, 74, 860, 643]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "In1"
	  Position		  [25, 28, 55, 42]
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Inport
	  Name			  "clutch state:\n1 => disengaged\n2 => slippi"
"ng\n3 => engaged"
	  Position		  [35, 188, 65, 202]
	  Port			  "2"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Inport
	  Name			  "In2"
	  Position		  [20, 453, 50, 467]
	  Port			  "3"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant"
	  Position		  [135, 225, 155, 245]
	  Value			  "1"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant1"
	  Position		  [135, 290, 155, 310]
	  Value			  "2"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant2"
	  Position		  [135, 360, 155, 380]
	  Value			  "3"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant3"
	  Position		  [360, 105, 380, 125]
	  Orientation		  "up"
	  NamePlacement		  "alternate"
	  Value			  "0"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant4"
	  Position		  [328, 240, 402, 260]
	  Orientation		  "up"
	  Value			  "slip_spd"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant5"
	  Position		  [310, 460, 330, 480]
	  Value			  "0"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux"
	  Ports			  [1, 2]
	  Position		  [90, 17, 125, 53]
	  Outputs		  "2"
	  BusSelectionMode	  off
	  Port {
	    PortNumber		    1
	    Name		    "output torque"
	    TestPoint		    off
	    LinearAnalysisOutput    off
	    LinearAnalysisInput	    off
	    RTWStorageClass	    "Auto"
	  }
	  Port {
	    PortNumber		    2
	    Name		    "output\nspeed\nreq'd"
	    TestPoint		    off
	    LinearAnalysisOutput    off
	    LinearAnalysisInput	    off
	    RTWStorageClass	    "Auto"
	  }
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux1"
	  Ports			  [1, 2]
	  Position		  [115, 442, 150, 478]
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>"
	  Position		  [165, 69, 250, 91]
	  GotoTag		  "T_cl_out"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>1"
	  Position		  [165, 109, 250, 131]
	  GotoTag		  "w_cl_out"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Logic
	  Name			  "Logical\nOperator"
	  Ports			  [1, 1]
	  Position		  [315, 39, 345, 71]
	  Operator		  "NOT"
	  Inputs		  "1"
	}
	Block {
	  BlockType		  Logic
	  Name			  "Logical\nOperator1"
	  Ports			  [1, 1]
	  Position		  [310, 169, 340, 201]
	  Operator		  "NOT"
	  Inputs		  "1"
	}
	Block {
	  BlockType		  Logic
	  Name			  "Logical\nOperator2"
	  Ports			  [1, 1]
	  Position		  [310, 384, 340, 416]
	  Operator		  "NOT"
	  Inputs		  "1"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux"
	  Ports			  [2, 1]
	  Position		  [540, 27, 575, 63]
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux1"
	  Ports			  [2, 1]
	  Position		  [490, 452, 525, 488]
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Product
	  Name			  "Product"
	  Ports			  [1, 1]
	  Position		  [50, 504, 80, 536]
	  Inputs		  "1"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Product
	  Name			  "Product1"
	  Ports			  [1, 1]
	  Position		  [495, 514, 525, 546]
	  Inputs		  "1"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Saturate
	  Name			  "Saturation"
	  Position		  [425, 445, 455, 475]
	  UpperLimit		  "maxtrq"
	  LowerLimit		  "-maxtrq"
	  LinearizeAsGain	  on
	}
	Block {
	  BlockType		  Saturate
	  Name			  "Saturation1"
	  Position		  [450, 20, 480, 50]
	  UpperLimit		  "maxtrq"
	  LowerLimit		  "-maxtrq"
	  LinearizeAsGain	  on
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch"
	  Position		  [385, 20, 415, 50]
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch1"
	  Position		  [380, 145, 410, 175]
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch2"
	  Position		  [370, 445, 400, 475]
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch3"
	  Position		  [370, 510, 400, 540]
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace1"
	  Position		  [100, 511, 195, 529]
	  ShowName		  off
	  VariableName		  "clutch_pwr_in_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace2"
	  Position		  [545, 521, 640, 539]
	  ShowName		  off
	  VariableName		  "clutch_pwr_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "clutch\ndisengaged"
	  Position		  [185, 187, 215, 218]
	  Operator		  "=="
	  Port {
	    PortNumber		    1
	    Name		    "clutch\ndisengaged"
	    TestPoint		    off
	    LinearAnalysisOutput    off
	    LinearAnalysisInput	    off
	    RTWStorageClass	    "Auto"
	  }
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "clutch\nengaged"
	  Position		  [185, 322, 215, 353]
	  Operator		  "=="
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "clutch\nslipping"
	  Position		  [185, 252, 215, 283]
	  Operator		  "=="
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "help"
	  Ports			  []
	  Position		  [520, 286, 559, 332]
	  BackgroundColor	  "yellow"
	  DropShadow		  on
	  ShowName		  off
	  OpenFcn		  "web(['file:\\\\\\' which('clutch.htm')]);"
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "help"
	    Location		    [203, 331, 569, 538]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "Out1"
	  Position		  [600, 38, 630, 52]
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "[]"
	}
	Block {
	  BlockType		  Outport
	  Name			  "Out2"
	  Position		  [605, 463, 635, 477]
	  Port			  "2"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "[]"
	}
	Line {
	  SrcBlock		  "Mux1"
	  SrcPort		  1
	  Points		  [25, 0]
	  Branch {
	    Points		    [0, 35; -75, 0]
	    DstBlock		    "Product1"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Out2"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Product1"
	  SrcPort		  1
	  DstBlock		  "To Workspace2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Product"
	  SrcPort		  1
	  DstBlock		  "To Workspace1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "In2"
	  SrcPort		  1
	  Points		  [10, 0]
	  Branch {
	    Points		    [0, 30; -30, 0]
	    DstBlock		    "Product"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Demux1"
	    DstPort		    1
	  }
	}
	Line {
	  Name			  "output\nspeed\nreq'd"
	  SrcBlock		  "Demux"
	  SrcPort		  2
	  Points		  [5, 0]
	  Branch {
	    Points		    [0, 75]
	    DstBlock		    "Goto <sdo>1"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [100, 0; 0, 105]
	    Branch {
	      Labels		      [1, 0]
	      Points		      [0, 385]
	      DstBlock		      "Switch3"
	      DstPort		      3
	    }
	    Branch {
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  Name			  "output torque"
	  Labels		  [0, 0]
	  SrcBlock		  "Demux"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    Points		    [0, 55]
	    DstBlock		    "Goto <sdo>"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Switch"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "clutch\nengaged"
	  SrcPort		  1
	  Points		  [5, 0; 0, 185]
	  DstBlock		  "Switch3"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Switch3"
	  SrcPort		  1
	  Points		  [65, 0; 0, -45]
	  DstBlock		  "Mux1"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  2
	  Points		  [45, 0; 0, 45]
	  DstBlock		  "Switch3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant5"
	  SrcPort		  1
	  DstBlock		  "Switch2"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Logical\nOperator2"
	  SrcPort		  1
	  Points		  [10, 0]
	  DstBlock		  "Switch2"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  1
	  DstBlock		  "Switch2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Switch1"
	  SrcPort		  1
	  Points		  [105, 0; 0, -105]
	  DstBlock		  "Mux"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Constant4"
	  SrcPort		  1
	  DstBlock		  "Switch1"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Logical\nOperator1"
	  SrcPort		  1
	  Points		  [0, -25]
	  DstBlock		  "Switch1"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Constant3"
	  SrcPort		  1
	  DstBlock		  "Switch"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Logical\nOperator"
	  SrcPort		  1
	  Points		  [10, 0; 0, -20]
	  DstBlock		  "Switch"
	  DstPort		  2
	}
	Line {
	  Name			  "clutch\ndisengaged"
	  SrcBlock		  "clutch\ndisengaged"
	  SrcPort		  1
	  Points		  [50, 0]
	  Branch {
	    Labels		    [1, 0]
	    Points		    [0, 195]
	    DstBlock		    "Logical\nOperator2"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -150]
	    DstBlock		    "Logical\nOperator"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "clutch\nslipping"
	  SrcPort		  1
	  Points		  [75, 0]
	  DstBlock		  "Logical\nOperator1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant2"
	  SrcPort		  1
	  Points		  [10, 0]
	  DstBlock		  "clutch\nengaged"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Mux"
	  SrcPort		  1
	  DstBlock		  "Out1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "In1"
	  SrcPort		  1
	  DstBlock		  "Demux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "clutch state:\n1 => disengaged\n2 => slippi"
"ng\n3 => engaged"
	  SrcPort		  1
	  Points		  [55, 0]
	  Branch {
	    Points		    [0, 65]
	    Branch {
	      Points		      [0, 70]
	      DstBlock		      "clutch\nengaged"
	      DstPort		      1
	    }
	    Branch {
	      DstBlock		      "clutch\nslipping"
	      DstPort		      1
	    }
	  }
	  Branch {
	    DstBlock		    "clutch\ndisengaged"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Constant1"
	  SrcPort		  1
	  Points		  [10, 0]
	  DstBlock		  "clutch\nslipping"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Constant"
	  SrcPort		  1
	  Points		  [10, 0]
	  DstBlock		  "clutch\ndisengaged"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Switch2"
	  SrcPort		  1
	  DstBlock		  "Saturation"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Saturation"
	  SrcPort		  1
	  DstBlock		  "Mux1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Switch"
	  SrcPort		  1
	  DstBlock		  "Saturation1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Saturation1"
	  SrcPort		  1
	  DstBlock		  "Mux"
	  DstPort		  1
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "clutch par CVT <cl>"
      Ports		      [3, 2]
      Position		      [320, 50, 365, 120]
      BackgroundColor	      "yellow"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskType		      "Clutch"
      MaskDescription	      "Clutch for use with ADVISOR 2"
      MaskHelp		      "First input is req'd clutch output torque and s"
"peed, muxed together.\nSecond input is clutch state, with 1 => disengaged, 2 "
"=> slipping, and 3=> engaged.\nThird input is available clutch input torque a"
"nd limited clutch input speed.\nFirst output is req'd clutch input torque and"
" speed, muxed together.\nSecond output is available clutch output torque and "
"limited clutch output speed.\nThe logic implemented by this block is as follo"
"ws:\n          IF (clutch is disengaged) THEN (req'd input torque=0), (req'd "
"input speed=req'd output speed (the engine control is responsible for computi"
"ng correct engine spin-down speed)), (avail. output torque=0), (limited outpu"
"t speed=req'd output speed)\n          IF (clutch is slipping) THEN (req'd in"
"put torque=req'd output torque), (req'd input speed=user-defined slip speed),"
" (avail. output torque=avail. input torque), (limited output speed=req'd outp"
"ut speed)\n          IF (clutch is engaged) THEN (req'd input torque=req'd ou"
"tput torque), (req'd input speed=req'd output speed), (avail. output torque=a"
"vail. input torque), (limited output speed=limited input speed) \n\nThe clutc"
"h will transmit no more than its maximum torque as driving or braking torque."
      MaskPromptString	      "Input shaft speed when clutch slips (rad/s):|Ma"
"ximum torque clutch can transmit:"
      MaskStyleString	      "edit,edit"
      MaskTunableValueString  "on,on"
      MaskCallbackString      "|"
      MaskEnableString	      "on,on"
      MaskVisibilityString    "on,on"
      MaskToolTipString	      "on,on"
      MaskVariables	      "slip_spd=@1;maxtrq=@2;"
      MaskDisplay	      "image(imread('bdi_cl.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      MaskValueString	      "vc_launch_spd|max(fc_max_trq)*fc_trq_scale+max("
"mc_max_trq)*mc_trq_scale*mc_overtrq_factor"
      MaskVariableAliases     ","
      System {
	Name			"clutch par CVT <cl>"
	Location		[189, 74, 856, 643]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "In1"
	  Position		  [25, 28, 55, 42]
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Inport
	  Name			  "clutch state:\n1 => disengaged\n2 => slippi"
"ng\n3 => engaged"
	  Position		  [35, 188, 65, 202]
	  Port			  "2"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Inport
	  Name			  "In2"
	  Position		  [20, 453, 50, 467]
	  Port			  "3"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant"
	  Position		  [135, 225, 155, 245]
	  Value			  "1"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant1"
	  Position		  [135, 290, 155, 310]
	  Value			  "2"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant2"
	  Position		  [135, 360, 155, 380]
	  Value			  "3"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant3"
	  Position		  [360, 105, 380, 125]
	  Orientation		  "up"
	  NamePlacement		  "alternate"
	  Value			  "0"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant4"
	  Position		  [328, 240, 402, 260]
	  Orientation		  "up"
	  Value			  "slip_spd"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant5"
	  Position		  [310, 460, 330, 480]
	  Value			  "0"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux"
	  Ports			  [1, 2]
	  Position		  [90, 17, 125, 53]
	  Outputs		  "2"
	  BusSelectionMode	  off
	  Port {
	    PortNumber		    1
	    Name		    "output torque"
	    TestPoint		    off
	    LinearAnalysisOutput    off
	    LinearAnalysisInput	    off
	    RTWStorageClass	    "Auto"
	  }
	  Port {
	    PortNumber		    2
	    Name		    "output\nspeed\nreq'd"
	    TestPoint		    off
	    LinearAnalysisOutput    off
	    LinearAnalysisInput	    off
	    RTWStorageClass	    "Auto"
	  }
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux1"
	  Ports			  [1, 2]
	  Position		  [115, 442, 150, 478]
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>"
	  Position		  [165, 69, 250, 91]
	  GotoTag		  "T_cl_out"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>1"
	  Position		  [165, 109, 250, 131]
	  GotoTag		  "w_cl_out"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Logic
	  Name			  "Logical\nOperator"
	  Ports			  [1, 1]
	  Position		  [315, 39, 345, 71]
	  Operator		  "NOT"
	  Inputs		  "1"
	}
	Block {
	  BlockType		  Logic
	  Name			  "Logical\nOperator1"
	  Ports			  [1, 1]
	  Position		  [310, 169, 340, 201]
	  Operator		  "NOT"
	  Inputs		  "1"
	}
	Block {
	  BlockType		  Logic
	  Name			  "Logical\nOperator2"
	  Ports			  [1, 1]
	  Position		  [310, 384, 340, 416]
	  Operator		  "NOT"
	  Inputs		  "1"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux"
	  Ports			  [2, 1]
	  Position		  [540, 27, 575, 63]
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux1"
	  Ports			  [2, 1]
	  Position		  [490, 452, 525, 488]
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Product
	  Name			  "Product"
	  Ports			  [1, 1]
	  Position		  [50, 504, 80, 536]
	  Inputs		  "1"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Product
	  Name			  "Product1"
	  Ports			  [1, 1]
	  Position		  [495, 514, 525, 546]
	  Inputs		  "1"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Saturate
	  Name			  "Saturation"
	  Position		  [425, 445, 455, 475]
	  UpperLimit		  "maxtrq"
	  LowerLimit		  "-maxtrq"
	  LinearizeAsGain	  on
	}
	Block {
	  BlockType		  Saturate
	  Name			  "Saturation1"
	  Position		  [450, 20, 480, 50]
	  UpperLimit		  "maxtrq"
	  LowerLimit		  "-maxtrq"
	  LinearizeAsGain	  on
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch"
	  Position		  [385, 20, 415, 50]
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch1"
	  Position		  [380, 145, 410, 175]
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch2"
	  Position		  [370, 445, 400, 475]
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch3"
	  Position		  [370, 510, 400, 540]
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace1"
	  Position		  [100, 511, 195, 529]
	  ShowName		  off
	  VariableName		  "clutch_pwr_in_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace2"
	  Position		  [545, 521, 640, 539]
	  ShowName		  off
	  VariableName		  "clutch_pwr_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "clutch\ndisengaged"
	  Position		  [185, 187, 215, 218]
	  Operator		  "=="
	  Port {
	    PortNumber		    1
	    Name		    "clutch\ndisengaged"
	    TestPoint		    off
	    LinearAnalysisOutput    off
	    LinearAnalysisInput	    off
	    RTWStorageClass	    "Auto"
	  }
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "clutch\nengaged"
	  Position		  [185, 322, 215, 353]
	  Operator		  "=="
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "clutch\nslipping"
	  Position		  [185, 252, 215, 283]
	  Operator		  "=="
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "help"
	  Ports			  []
	  Position		  [520, 286, 559, 332]
	  BackgroundColor	  "yellow"
	  DropShadow		  on
	  ShowName		  off
	  OpenFcn		  "web(['file:\\\\\\' which('clutch.htm')]);"
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "help"
	    Location		    [203, 331, 569, 538]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "Out1"
	  Position		  [600, 38, 630, 52]
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "[]"
	}
	Block {
	  BlockType		  Outport
	  Name			  "Out2"
	  Position		  [605, 463, 635, 477]
	  Port			  "2"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "[]"
	}
	Line {
	  SrcBlock		  "Saturation1"
	  SrcPort		  1
	  DstBlock		  "Mux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Switch"
	  SrcPort		  1
	  DstBlock		  "Saturation1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Saturation"
	  SrcPort		  1
	  DstBlock		  "Mux1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Switch2"
	  SrcPort		  1
	  DstBlock		  "Saturation"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant"
	  SrcPort		  1
	  Points		  [10, 0]
	  DstBlock		  "clutch\ndisengaged"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Constant1"
	  SrcPort		  1
	  Points		  [10, 0]
	  DstBlock		  "clutch\nslipping"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "clutch state:\n1 => disengaged\n2 => slippi"
"ng\n3 => engaged"
	  SrcPort		  1
	  Points		  [55, 0]
	  Branch {
	    DstBlock		    "clutch\ndisengaged"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 65]
	    Branch {
	      DstBlock		      "clutch\nslipping"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [0, 70]
	      DstBlock		      "clutch\nengaged"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "In1"
	  SrcPort		  1
	  DstBlock		  "Demux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux"
	  SrcPort		  1
	  DstBlock		  "Out1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant2"
	  SrcPort		  1
	  Points		  [10, 0]
	  DstBlock		  "clutch\nengaged"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "clutch\nslipping"
	  SrcPort		  1
	  Points		  [75, 0]
	  DstBlock		  "Logical\nOperator1"
	  DstPort		  1
	}
	Line {
	  Name			  "clutch\ndisengaged"
	  SrcBlock		  "clutch\ndisengaged"
	  SrcPort		  1
	  Points		  [50, 0]
	  Branch {
	    Points		    [0, -150]
	    DstBlock		    "Logical\nOperator"
	    DstPort		    1
	  }
	  Branch {
	    Labels		    [1, 0]
	    Points		    [0, 195]
	    DstBlock		    "Logical\nOperator2"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Logical\nOperator"
	  SrcPort		  1
	  Points		  [10, 0; 0, -20]
	  DstBlock		  "Switch"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Constant3"
	  SrcPort		  1
	  DstBlock		  "Switch"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Logical\nOperator1"
	  SrcPort		  1
	  Points		  [0, -25]
	  DstBlock		  "Switch1"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Constant4"
	  SrcPort		  1
	  DstBlock		  "Switch1"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Switch1"
	  SrcPort		  1
	  Points		  [105, 0; 0, -105]
	  DstBlock		  "Mux"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  1
	  DstBlock		  "Switch2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Logical\nOperator2"
	  SrcPort		  1
	  Points		  [10, 0]
	  DstBlock		  "Switch2"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Constant5"
	  SrcPort		  1
	  DstBlock		  "Switch2"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  2
	  Points		  [45, 0; 0, 45]
	  DstBlock		  "Switch3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Switch3"
	  SrcPort		  1
	  Points		  [65, 0; 0, -45]
	  DstBlock		  "Mux1"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "clutch\nengaged"
	  SrcPort		  1
	  Points		  [5, 0; 0, 185]
	  DstBlock		  "Switch3"
	  DstPort		  2
	}
	Line {
	  Name			  "output torque"
	  Labels		  [0, 0]
	  SrcBlock		  "Demux"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    DstBlock		    "Switch"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 55]
	    DstBlock		    "Goto <sdo>"
	    DstPort		    1
	  }
	}
	Line {
	  Name			  "output\nspeed\nreq'd"
	  SrcBlock		  "Demux"
	  SrcPort		  2
	  Points		  [5, 0]
	  Branch {
	    Points		    [100, 0; 0, 105]
	    Branch {
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Branch {
	      Labels		      [1, 0]
	      Points		      [0, 385]
	      DstBlock		      "Switch3"
	      DstPort		      3
	    }
	  }
	  Branch {
	    Points		    [0, 75]
	    DstBlock		    "Goto <sdo>1"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "In2"
	  SrcPort		  1
	  Points		  [10, 0]
	  Branch {
	    DstBlock		    "Demux1"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 30; -30, 0]
	    DstBlock		    "Product"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Product"
	  SrcPort		  1
	  DstBlock		  "To Workspace1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Product1"
	  SrcPort		  1
	  DstBlock		  "To Workspace2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux1"
	  SrcPort		  1
	  Points		  [25, 0]
	  Branch {
	    DstBlock		    "Out2"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 35; -75, 0]
	    DstBlock		    "Product1"
	    DstPort		    1
	  }
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "final drive <fd>"
      Ports		      [2, 2]
      Position		      [55, 513, 100, 562]
      BackgroundColor	      "yellow"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskDisplay	      "image(imread('bdi_fd.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      System {
	Name			"final drive <fd>"
	Location		[78, 204, 911, 657]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "torque and speed req'd\nat output side of f"
"inal drive\n(Nm), (rad/s)"
	  Position		  [70, 35, 90, 55]
	  FontName		  "Arial"
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Inport
	  Name			  "torque and speed avail.\nat input side of f"
"inal drive\n(Nm), (rad/s)"
	  Position		  [65, 315, 85, 335]
	  FontName		  "Arial"
	  Port			  "2"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Block NOTES"
	  Ports			  []
	  Position		  [740, 380, 796, 420]
	  BackgroundColor	  "green"
	  ShowName		  off
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "disp('Block\\nNOTES')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Block NOTES"
	    Location		    [147, 331, 616, 448]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Annotation {
	      Position		      [222, 17]
	      VerticalAlignment	      "top"
	      Text		      "This final drive model includes loss da"
"ta, rotational inertia, and a gear reduction."
	    }
	    Annotation {
	      Position		      [227, 37]
	      VerticalAlignment	      "top"
	      Text		      "The loss torque is zero when the gears "
"are not turning,\nand is applied at the input side of the gear reduction."
	    }
	    Annotation {
	      Position		      [227, 67]
	      VerticalAlignment	      "top"
	      Text		      "The inertia torque is the input torque "
"required to accelerate the\nfinal drive's inertia as measured on the input si"
"de."
	    }
	  }
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux"
	  Ports			  [1, 2]
	  Position		  [155, 26, 175, 59]
	  FontName		  "Arial"
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux1"
	  Ports			  [1, 2]
	  Position		  [150, 306, 170, 339]
	  FontName		  "Arial"
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  Gain
	  Name			  "Gain"
	  Position		  [240, 35, 310, 65]
	  FontName		  "Arial"
	  Gain			  "fd_ratio"
	  Multiplication	  "Element-wise(K.*u)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Gain
	  Name			  "Gain1"
	  Position		  [305, 70, 375, 100]
	  FontName		  "Arial"
	  Gain			  "1/fd_ratio"
	  Multiplication	  "Element-wise(K.*u)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Gain
	  Name			  "Gain2"
	  Position		  [550, 285, 620, 315]
	  FontName		  "Arial"
	  Gain			  "fd_ratio"
	  Multiplication	  "Element-wise(K.*u)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Gain
	  Name			  "Gain3"
	  Position		  [550, 345, 620, 375]
	  FontName		  "Arial"
	  Gain			  "1/fd_ratio"
	  Multiplication	  "Element-wise(K.*u)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux"
	  Ports			  [2, 1]
	  Position		  [605, 26, 625, 59]
	  FontName		  "Arial"
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux1"
	  Ports			  [2, 1]
	  Position		  [660, 291, 680, 324]
	  FontName		  "Arial"
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum1"
	  Ports			  [3, 1]
	  Position		  [510, 276, 530, 324]
	  FontName		  "Arial"
	  IconShape		  "rectangular"
	  Inputs		  "--+"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum2"
	  Ports			  [3, 1]
	  Position		  [520, 70, 540, 150]
	  FontName		  "Arial"
	  IconShape		  "rectangular"
	  Inputs		  "+++"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace2"
	  Position		  [220, 95, 300, 115]
	  VariableName		  "fd_trq_out_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace3"
	  Position		  [220, 135, 300, 155]
	  VariableName		  "fd_spd_out_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace4"
	  Position		  [595, 100, 675, 120]
	  VariableName		  "fd_trq_in_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace5"
	  Position		  [595, 140, 675, 160]
	  VariableName		  "fd_spd_in_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace6"
	  Position		  [225, 240, 305, 260]
	  VariableName		  "fd_trq_in_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace7"
	  Position		  [225, 280, 305, 300]
	  VariableName		  "fd_spd_in_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace8"
	  Position		  [655, 215, 735, 235]
	  VariableName		  "fd_trq_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace9"
	  Position		  [655, 255, 735, 275]
	  VariableName		  "fd_spd_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "effect of inertia\n(Nm)"
	  Ports			  [1, 1]
	  Position		  [420, 167, 450, 203]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "effect of inertia\n(Nm)"
	    Location		    [4, 399, 457, 562]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "fd input speed (rad/s)"
	      Position		      [50, 25, 70, 45]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      Position		      [210, 16, 280, 54]
	      FontName		      "Arial"
	      Gain		      "fd_inertia"
	      Multiplication	      "Element-wise(K.*u)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Derivative
	      Name		      "d/dt"
	      Position		      [135, 25, 165, 45]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "drag torque\n(Nm)"
	      Position		      [350, 25, 370, 45]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "drag torque\n(Nm)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "d/dt"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "fd input speed (rad/s)"
	      SrcPort		      1
	      DstBlock		      "d/dt"
	      DstPort		      1
	    }
	    Annotation {
	      Position		      [212, 102]
	      VerticalAlignment	      "top"
	      Text		      "The inertia torque is the input torque "
"required to accelerate the\nfinal drive's inertia as measured on the input si"
"de."
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "help"
	  Ports			  []
	  Position		  [700, 380, 732, 422]
	  BackgroundColor	  "yellow"
	  DropShadow		  on
	  ShowName		  off
	  OpenFcn		  "web(['file:\\\\\\' which('wheel_axle.htm')]"
");"
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "help"
	    Location		    [203, 331, 569, 538]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "loss\n(Nm)"
	  Ports			  [1, 1]
	  Position		  [420, 92, 450, 128]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "loss\n(Nm)"
	    Location		    [709, 717, 1135, 911]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "fd output speed (rad/s)"
	      Position		      [60, 55, 80, 75]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [210, 95, 230, 115]
	      Orientation	      "up"
	      FontName		      "Arial"
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [285, 49, 315, 81]
	      FontName		      "Arial"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "final drive loss torque\n(Nm)"
	      Position		      [115, 14, 195, 36]
	      FontName		      "Arial"
	      Value		      "fd_loss"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "drag torque\n(Nm)"
	      Position		      [380, 55, 400, 75]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "final drive loss torque\n(Nm)"
	      SrcPort		      1
	      Points		      [20, 0; 0, 30]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "drag torque\n(Nm)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "fd output speed (rad/s)"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [0, -15]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Annotation {
	      Position		      [232, 142]
	      VerticalAlignment	      "top"
	      Text		      "The loss torque is zero when the gears "
"are not turning,\nand is applied at the input side of the gear reduction."
	    }
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "torque and speed req'd\nat input side of fi"
"nal drive\n(Nm), (rad/s)"
	  Position		  [735, 35, 755, 55]
	  FontName		  "Arial"
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Block {
	  BlockType		  Outport
	  Name			  "torque and speed avail.\nat output side of "
"final drive\n(Nm), (rad/s)"
	  Position		  [735, 300, 755, 320]
	  FontName		  "Arial"
	  Port			  "2"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Line {
	  SrcBlock		  "Sum1"
	  SrcPort		  1
	  DstBlock		  "Gain2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "torque and speed avail.\nat input side of f"
"inal drive\n(Nm), (rad/s)"
	  SrcPort		  1
	  DstBlock		  "Demux1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux1"
	  SrcPort		  1
	  DstBlock		  "torque and speed avail.\nat output side of "
"final drive\n(Nm), (rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "loss\n(Nm)"
	  SrcPort		  1
	  Points		  [40, 0]
	  Branch {
	    DstBlock		    "Sum1"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Sum2"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "effect of inertia\n(Nm)"
	  SrcPort		  1
	  Points		  [35, 0]
	  Branch {
	    Points		    [0, 115]
	    DstBlock		    "Sum1"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [0, -50]
	    DstBlock		    "Sum2"
	    DstPort		    3
	  }
	}
	Line {
	  SrcBlock		  "Gain"
	  SrcPort		  1
	  Points		  [80, 0]
	  Branch {
	    Points		    [0, 60]
	    Branch {
	      DstBlock		      "loss\n(Nm)"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [0, 75]
	      DstBlock		      "effect of inertia\n(Nm)"
	      DstPort		      1
	    }
	  }
	  Branch {
	    Points		    [160, 0]
	    Branch {
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Branch {
	      Points		      [0, 100]
	      DstBlock		      "To Workspace5"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "Gain1"
	  SrcPort		  1
	  DstBlock		  "Sum2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "torque and speed req'd\nat output side of f"
"inal drive\n(Nm), (rad/s)"
	  SrcPort		  1
	  DstBlock		  "Demux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux"
	  SrcPort		  1
	  DstBlock		  "torque and speed req'd\nat input side of fi"
"nal drive\n(Nm), (rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  1
	  Points		  [25, 0; 0, 50]
	  Branch {
	    DstBlock		    "Gain1"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "To Workspace2"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  2
	  Points		  [15, 0]
	  Branch {
	    DstBlock		    "Gain"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 95]
	    DstBlock		    "To Workspace3"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Sum2"
	  SrcPort		  1
	  Points		  [20, 0]
	  Branch {
	    Points		    [0, -75]
	    DstBlock		    "Mux"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 0]
	    DstBlock		    "To Workspace4"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    DstBlock		    "Sum1"
	    DstPort		    3
	  }
	  Branch {
	    Points		    [0, -65]
	    DstBlock		    "To Workspace6"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  2
	  Points		  [25, 0]
	  Branch {
	    Points		    [120, 0; 0, 30]
	    DstBlock		    "Gain3"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -40]
	    DstBlock		    "To Workspace7"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Gain3"
	  SrcPort		  1
	  Points		  [15, 0; 0, -45]
	  Branch {
	    DstBlock		    "Mux1"
	    DstPort		    2
	  }
	  Branch {
	    DstBlock		    "To Workspace9"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Gain2"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    DstBlock		    "Mux1"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -75]
	    DstBlock		    "To Workspace8"
	    DstPort		    1
	  }
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "gearbox <gb>"
      Ports		      [2, 2]
      Position		      [30, 203, 95, 247]
      BackgroundColor	      "yellow"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskDisplay	      "image(imread('bdi_gb.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      System {
	Name			"gearbox <gb>"
	Location		[81, 141, 936, 742]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "torque and speed req'd\nat output side of g"
"earbox\n(Nm), (rad/s)"
	  Position		  [55, 15, 75, 35]
	  FontName		  "Arial"
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Inport
	  Name			  "torque and speed avail.\nat input side of g"
"earbox\n(Nm), (rad/s)"
	  Position		  [60, 450, 80, 470]
	  FontName		  "Arial"
	  Port			  "2"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Block NOTES"
	  Ports			  []
	  Position		  [770, 535, 826, 575]
	  BackgroundColor	  "green"
	  ShowName		  off
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "disp('Block\\nNOTES')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Block NOTES"
	    Location		    [364, 407, 866, 589]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Annotation {
	      Position		      [247, 17]
	      VerticalAlignment	      "top"
	      Text		      "This gearbox model includes loss data, "
"rotational inertia, and a gear reduction."
	    }
	    Annotation {
	      Position		      [252, 37]
	      VerticalAlignment	      "top"
	      Text		      "The loss torque is zero when the gears "
"are not turning,\nand is applied at the input side of the gear reduction."
	    }
	    Annotation {
	      Position		      [252, 72]
	      VerticalAlignment	      "top"
	      Text		      "The inertia torque is the input torque "
"required to accelerate the\nfinal drive's inertia as measured on the input si"
"de."
	    }
	    Annotation {
	      Position		      [252, 107]
	      VerticalAlignment	      "top"
	      Text		      "Available output torque is estimated as"
"suming that the gearbox efficiency for theavailable input\ntorque andspeed is"
" the same as the gearbox efficiency for the REQUESTED input torque."
	    }
	    Annotation {
	      Position		      [252, 142]
	      VerticalAlignment	      "top"
	      Text		      "This is a good assumption, at least for"
" the VW 4-speed manual transaxle of SAE 820741. \nIn the VW transaxle, effici"
"ency is fairly independent of torque and speed at high torques."
	    }
	  }
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant"
	  Position		  [540, 140, 560, 160]
	  Orientation		  "left"
	  Value			  "0"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux"
	  Ports			  [1, 2]
	  Position		  [140, 209, 160, 251]
	  FontName		  "Arial"
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux1"
	  Ports			  [1, 2]
	  Position		  [145, 441, 165, 474]
	  FontName		  "Arial"
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  From
	  Name			  "From <vc>"
	  Position		  [190, 101, 275, 119]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "gear_number"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto"
	  Position		  [320, 494, 415, 526]
	  GotoTag		  "gb_spd_in_a"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Logic
	  Name			  "Logical\nOperator"
	  Ports			  [1, 1]
	  Position		  [455, 164, 485, 196]
	  Operator		  "NOT"
	  Inputs		  "1"
	}
	Block {
	  BlockType		  Memory
	  Name			  "Memory"
	  Position		  [225, 325, 255, 355]
	  Orientation		  "left"
	  X0			  "0"
	  InheritSampleTime	  off
	  RTWStateStorageClass	  "Auto"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux"
	  Ports			  [2, 1]
	  Position		  [690, 26, 710, 59]
	  FontName		  "Arial"
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux1"
	  Ports			  [2, 1]
	  Position		  [670, 433, 690, 502]
	  FontName		  "Arial"
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Pout/Pin,\nneglecting inertia"
	  Ports			  [4, 1]
	  Position		  [545, 256, 575, 309]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "Pout/Pin,\nneglecting inertia"
	    Location		    [360, 372, 944, 724]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Tin"
	      Position		      [25, 85, 45, 105]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Tinertia"
	      Position		      [25, 140, 45, 160]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Tout"
	      Position		      [25, 5, 45, 25]
	      Port		      "3"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gear ratio"
	      Position		      [25, 40, 45, 60]
	      Port		      "4"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      Position		      [320, 225, 340, 245]
	      Orientation	      "up"
	      FontName		      "Arial"
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Pout/Pin\n(neglecting\ninertia)"
	      Ports		      [2, 1]
	      Position		      [295, 89, 320, 116]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('/')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Pout/Pin\n(neglecting\ninertia)"
		Location		[388, 142, 777, 391]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  Position		  [30, 50, 50, 70]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Inport
		  Name			  "in_2"
		  Position		  [10, 80, 30, 100]
		  Port			  "2"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn"
		  Position		  [60, 79, 90, 101]
		  FontName		  "Arial"
		  FontSize		  8
		  Expr			  "1/u"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  Ports			  [2, 1]
		  Position		  [130, 56, 150, 74]
		  FontName		  "Arial"
		  FontSize		  8
		  Inputs		  "2"
		  Multiplication	  "Element-wise(.*)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  Position		  [180, 55, 200, 75]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "in_2"
		  SrcPort		  1
		  DstBlock		  "Fcn"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Fcn"
		  SrcPort		  1
		  Points		  [15, 0; 0, -20]
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [215, 101, 235, 119]
	      FontName		      "Arial"
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      Position		      [285, 158, 315, 182]
	      Operator		      "~="
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      Position		      [425, 135, 455, 165]
	      UpperLimit	      "inf"
	      LowerLimit	      "0"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [365, 134, 395, 166]
	      FontName		      "Arial"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Tin-Tinertia"
	      Ports		      [2, 1]
	      Position		      [75, 85, 95, 120]
	      FontName		      "Arial"
	      IconShape		      "rectangular"
	      Inputs		      "+-"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "make division\nbombproof"
	      Ports		      [1, 1]
	      Position		      [140, 83, 170, 137]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"make division\nbombproof"
		Location		[140, 206, 831, 679]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"automatic"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Tin-Tinertia"
		  Position		  [55, 168, 85, 182]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  Ports			  []
		  Position		  [570, 395, 626, 435]
		  BackgroundColor	  "green"
		  ShowName		  off
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [364, 407, 866, 589]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Annotation {
		    Position		    [250, 64]
		    Text		    "this block added 10 July 2001 by "
"mpo:\noriginally a -eps was added to the denominator by default. \nHowever, c"
"ases were ecountered where Tin-Tineratia was equal to -eps causing\nthe denom"
"inator to be zero. This added checking is more rhobust"
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  Position		  [190, 265, 210, 285]
		  Orientation		  "up"
		  FontName		  "Arial"
		  Value			  "eps"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  Position		  [105, 265, 125, 285]
		  Orientation		  "up"
		  FontName		  "Arial"
		  Value			  "0"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  Ports			  [2, 1]
		  Position		  [235, 217, 245, 248]
		  Inputs		  "2"
		  Multiplication	  "Element-wise(.*)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  Position		  [145, 213, 175, 237]
		  Operator		  "=="
		}
		Block {
		  BlockType		  Sum
		  Name			  "make division\nbombproof"
		  Ports			  [2, 1]
		  Position		  [315, 165, 335, 200]
		  FontName		  "Arial"
		  IconShape		  "rectangular"
		  Inputs		  "++"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  Position		  [385, 178, 415, 192]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "[]"
		}
		Line {
		  SrcBlock		  "make division\nbombproof"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [0, -20]
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  Points		  [15, 0; 0, -45]
		  DstBlock		  "make division\nbombproof"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [0, -30]
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Tin-Tinertia"
		  SrcPort		  1
		  Points		  [25, 0]
		  Branch {
		    Points		    [0, 45]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "make division\nbombproof"
		    DstPort		    1
		  }
		}
		Annotation {
		  Position		  [332, 112]
		  Text			  "only add eps if Tin-Tinertia is == "
"0 (this avoids problems when Tin-Tineratia == -eps \nwhich happens from time "
"to time"
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Pout/Pin"
	      Position		      [490, 140, 510, 160]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [0, -5]
	      Branch {
		Points			[20, 0]
		DstBlock		"Switch"
		DstPort			3
	      }
	      Branch {
		Points			[-75, 0; 0, -40]
		DstBlock		"Relational\nOperator"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "make division\nbombproof"
	      SrcPort		      1
	      Points		      [0, 5]
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Tinertia"
	      SrcPort		      1
	      Points		      [5, 0; 0, -40]
	      DstBlock		      "Tin-Tinertia"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Tin"
	      SrcPort		      1
	      DstBlock		      "Tin-Tinertia"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Pout/Pin\n(neglecting\ninertia)"
	      SrcPort		      1
	      Points		      [10, 0; 0, 35]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [15, 0; 0, -20]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Pout/Pin"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Tin-Tinertia"
	      SrcPort		      1
	      Points		      [20, 0; 0, 5]
	      Branch {
		DstBlock		"make division\nbombproof"
		DstPort			1
	      }
	      Branch {
		Points			[0, 55]
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Tout"
	      SrcPort		      1
	      Points		      [225, 0; 0, 80]
	      DstBlock		      "Pout/Pin\n(neglecting\ninertia)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "Pout/Pin\n(neglecting\ninertia)"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gear ratio"
	      SrcPort		      1
	      Points		      [140, 0; 0, 55]
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Annotation {
	      Position		      [242, 292]
	      VerticalAlignment	      "top"
	      Text		      "Pout/Pin, neglecting inertia, is used t"
"o estimate the output torque given the\ninput torque in a very simple forward"
"-facing calculation."
	    }
	  }
	}
	Block {
	  BlockType		  Product
	  Name			  "Product"
	  Ports			  [2, 1]
	  Position		  [380, 436, 400, 454]
	  FontName		  "Arial"
	  Inputs		  "2"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Product
	  Name			  "Product1"
	  Ports			  [2, 1]
	  Position		  [545, 346, 565, 364]
	  FontName		  "Arial"
	  Inputs		  "2"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum2"
	  Ports			  [3, 1]
	  Position		  [460, 55, 480, 135]
	  FontName		  "Arial"
	  IconShape		  "rectangular"
	  Inputs		  "+++"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum3"
	  Ports			  [2, 1]
	  Position		  [490, 420, 510, 455]
	  FontName		  "Arial"
	  IconShape		  "rectangular"
	  Inputs		  "-+"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch"
	  Position		  [535, 90, 565, 120]
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace10"
	  Position		  [550, 385, 630, 405]
	  Orientation		  "down"
	  NamePlacement		  "alternate"
	  VariableName		  "gb_ni_trq_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace2"
	  Position		  [190, 120, 270, 140]
	  VariableName		  "gb_trq_out_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace3"
	  Position		  [190, 160, 270, 180]
	  VariableName		  "gb_spd_out_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace4"
	  Position		  [665, 350, 745, 370]
	  VariableName		  "gb_trq_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace5"
	  Position		  [665, 390, 745, 410]
	  VariableName		  "gb_spd_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace6"
	  Position		  [210, 475, 290, 495]
	  VariableName		  "gb_trq_in_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace7"
	  Position		  [210, 515, 290, 535]
	  VariableName		  "gb_spd_in_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace8"
	  Position		  [640, 95, 720, 115]
	  VariableName		  "gb_trq_in_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace9"
	  Position		  [640, 135, 720, 155]
	  VariableName		  "gb_spd_in_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "effect of inertia\n(Nm)"
	  Ports			  [1, 1]
	  Position		  [375, 152, 405, 188]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "effect of inertia\n(Nm)"
	    Location		    [6, 397, 459, 592]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "gb input speed (rad/s)"
	      Position		      [50, 25, 70, 45]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      Position		      [195, 15, 300, 55]
	      FontName		      "Arial"
	      Gain		      "gb_inertia"
	      Multiplication	      "Element-wise(K.*u)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Derivative
	      Name		      "d/dt"
	      Position		      [125, 25, 155, 45]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "drag torque\n(Nm)"
	      Position		      [350, 25, 370, 45]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "drag torque\n(Nm)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "d/dt"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gb input speed (rad/s)"
	      SrcPort		      1
	      DstBlock		      "d/dt"
	      DstPort		      1
	    }
	    Annotation {
	      Position		      [212, 102]
	      VerticalAlignment	      "top"
	      Text		      "The inertia torque is the input torque "
"required to accelerate the\ngearbox's inertia as measured on the input side."
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "gearbox controller interface"
	  Ports			  [3, 2]
	  Position		  [220, 209, 325, 271]
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "gearbox controller interface"
	    Location		    [259, 357, 675, 588]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "T_gb_out"
	      Position		      [40, 45, 60, 65]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "w_gb_out"
	      Position		      [40, 105, 60, 125]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "eta_gb"
	      Position		      [40, 170, 60, 190]
	      Port		      "3"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>"
	      Position		      [185, 34, 290, 66]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "gear_ratio"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>1"
	      Position		      [185, 89, 290, 121]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "shifting"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <vc>"
	      Position		      [95, 39, 165, 71]
	      GotoTag		      "T_gb_out"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <vc>1"
	      Position		      [95, 99, 170, 131]
	      GotoTag		      "w_gb_out"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto <vc>2"
	      Position		      [95, 164, 170, 196]
	      GotoTag		      "eta_gb"
	      TagVisibility	      "global"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear_ratio"
	      Position		      [325, 40, 345, 60]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "shifting"
	      Position		      [325, 95, 345, 115]
	      Port		      "2"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "From <vc>"
	      SrcPort		      1
	      DstBlock		      "gear_ratio"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "eta_gb"
	      SrcPort		      1
	      DstBlock		      "Goto <vc>2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "w_gb_out"
	      SrcPort		      1
	      DstBlock		      "Goto <vc>1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "T_gb_out"
	      SrcPort		      1
	      DstBlock		      "Goto <vc>"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <vc>1"
	      SrcPort		      1
	      DstBlock		      "shifting"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "gearing\n(Nm), (rad/s)"
	  Ports			  [2, 2]
	  Position		  [295, 12, 330, 63]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "gearing\n(Nm), (rad/s)"
	    Location		    [281, 422, 837, 617]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "output shaft\ntorque and speed\n (Nm), "
"(rad/s)"
	      Position		      [55, 25, 75, 45]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gear ratio"
	      Position		      [55, 120, 75, 140]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      Ports		      [1, 2]
	      Position		      [140, 16, 160, 49]
	      FontName		      "Arial"
	      Outputs		      "2"
	      BusSelectionMode	      off
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn1"
	      Position		      [300, 69, 330, 91]
	      ShowName		      off
	      FontName		      "Arial"
	      Expr		      "1/u"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      Ports		      [2, 1]
	      Position		      [355, 21, 375, 39]
	      FontName		      "Arial"
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      Ports		      [2, 1]
	      Position		      [355, 116, 375, 134]
	      FontName		      "Arial"
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "input shaft torque (Nm)"
	      Position		      [455, 20, 475, 40]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "input shaft speed (rad/s)"
	      Position		      [455, 115, 475, 135]
	      Port		      "2"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      DstBlock		      "input shaft speed (rad/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "input shaft torque (Nm)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Fcn1"
	      SrcPort		      1
	      Points		      [0, -45]
	      DstBlock		      "Product2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "output shaft\ntorque and speed\n (Nm), "
"(rad/s)"
	      SrcPort		      1
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gear ratio"
	      SrcPort		      1
	      Points		      [190, 0]
	      Branch {
		Points			[0, -50]
		DstBlock		"Fcn1"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Product3"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      DstBlock		      "Product2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      Points		      [60, 0; 0, 80]
	      DstBlock		      "Product3"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "gearing\n(Nm), (rad/s)1"
	  Ports			  [3, 2]
	  Position		  [550, 428, 585, 502]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "gearing\n(Nm), (rad/s)1"
	    Location		    [277, 426, 746, 612]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "input shaft torque (Nm)"
	      Position		      [75, 15, 95, 35]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "input shaft speed (rad/s)"
	      Position		      [75, 120, 95, 140]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gear ratio"
	      Position		      [75, 70, 95, 90]
	      Port		      "3"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn1"
	      Position		      [175, 69, 205, 91]
	      ShowName		      off
	      FontName		      "Arial"
	      Expr		      "1/u"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      Ports		      [2, 1]
	      Position		      [275, 21, 295, 39]
	      FontName		      "Arial"
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      Ports		      [2, 1]
	      Position		      [275, 116, 295, 134]
	      FontName		      "Arial"
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "output shaft torque (Nm)"
	      Position		      [375, 20, 395, 40]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "output shaft speed (rad/s)"
	      Position		      [375, 115, 395, 135]
	      Port		      "2"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Fcn1"
	      SrcPort		      1
	      Points		      [25, 0; 0, 40]
	      DstBlock		      "Product3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gear ratio"
	      SrcPort		      1
	      Points		      [45, 0]
	      Branch {
		Points			[0, -45]
		DstBlock		"Product2"
		DstPort			2
	      }
	      Branch {
		DstBlock		"Fcn1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      DstBlock		      "output shaft speed (rad/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "output shaft torque (Nm)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "input shaft torque (Nm)"
	      SrcPort		      1
	      DstBlock		      "Product2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "input shaft speed (rad/s)"
	      SrcPort		      1
	      DstBlock		      "Product3"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "help"
	  Ports			  []
	  Position		  [724, 534, 757, 577]
	  BackgroundColor	  "yellow"
	  DropShadow		  on
	  ShowName		  off
	  OpenFcn		  "web(['file:\\\\\\' which('gearbox.htm')]);"
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "help"
	    Location		    [203, 331, 569, 538]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "loss\n(Nm)"
	  Ports			  [3, 1]
	  Position		  [370, 74, 405, 116]
	  SourceBlock		  "lib_transmission/SubLibraries/loss\n(Nm)"
	  SourceType		  ""
	  tx_eff_map		  "tx_eff_map"
	  tx_map_trq		  "tx_map_trq"
	  tx_map_spd		  "tx_map_spd"
	  gb_spd_scale		  "gb_spd_scale"
	  gb_trq_scale		  "gb_trq_scale"
	}
	Block {
	  BlockType		  Outport
	  Name			  "torque and speed req'd\nat input side of ge"
"arbox\n(Nm), (rad/s)"
	  Position		  [760, 35, 780, 55]
	  FontName		  "Arial"
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Block {
	  BlockType		  Outport
	  Name			  "torque and speed avail.\nat output side of "
"gearbox\n(Nm), (rad/s)"
	  Position		  [765, 460, 785, 480]
	  FontName		  "Arial"
	  Port			  "2"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Line {
	  SrcBlock		  "gearbox controller interface"
	  SrcPort		  1
	  Points		  [55, 0]
	  Branch {
	    Points		    [0, 80; 135, 0]
	    Branch {
	      DstBlock		      "Pout/Pin,\nneglecting inertia"
	      DstPort		      4
	    }
	    Branch {
	      Points		      [0, 45]
	      Branch {
		Points			[0, 140]
		DstBlock		"gearing\n(Nm), (rad/s)1"
		DstPort			3
	      }
	      Branch {
		DstBlock		"Product1"
		DstPort			1
	      }
	    }
	  }
	  Branch {
	    Points		    [0, -25; -110, 0; 0, -105]
	    Branch {
	      Points		      [0, -45]
	      DstBlock		      "gearing\n(Nm), (rad/s)"
	      DstPort		      2
	    }
	    Branch {
	      DstBlock		      "loss\n(Nm)"
	      DstPort		      2
	    }
	  }
	}
	Line {
	  SrcBlock		  "loss\n(Nm)"
	  SrcPort		  1
	  DstBlock		  "Sum2"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Constant"
	  SrcPort		  1
	  Points		  [-15, 0]
	  DstBlock		  "Switch"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Switch"
	  SrcPort		  1
	  Points		  [45, 0]
	  Branch {
	    Points		    [0, -70]
	    DstBlock		    "Mux"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "To Workspace8"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Logical\nOperator"
	  SrcPort		  1
	  Points		  [25, 0; 0, -75]
	  DstBlock		  "Switch"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "gearbox controller interface"
	  SrcPort		  2
	  Points		  [110, 0]
	  DstBlock		  "Logical\nOperator"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sum2"
	  SrcPort		  1
	  Points		  [10, 0]
	  Branch {
	    DstBlock		    "Switch"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 165]
	    DstBlock		    "Pout/Pin,\nneglecting inertia"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  2
	  Points		  [15, 0]
	  Branch {
	    Points		    [0, 45]
	    Branch {
	      DstBlock		      "Goto"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [0, 15]
	      DstBlock		      "To Workspace7"
	      DstPort		      1
	    }
	  }
	  Branch {
	    DstBlock		    "gearing\n(Nm), (rad/s)1"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  1
	  Points		  [25, 0]
	  Branch {
	    DstBlock		    "To Workspace6"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Product"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "gearing\n(Nm), (rad/s)1"
	  SrcPort		  1
	  Points		  [50, 0]
	  Branch {
	    Points		    [0, -90]
	    DstBlock		    "To Workspace4"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Mux1"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "gearing\n(Nm), (rad/s)1"
	  SrcPort		  2
	  Points		  [60, 0]
	  Branch {
	    DstBlock		    "To Workspace5"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Mux1"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    Points		    [0, -90]
	    DstBlock		    "To Workspace2"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [30, 0]
	    Branch {
	      Points		      [0, 70]
	      DstBlock		      "Pout/Pin,\nneglecting inertia"
	      DstPort		      3
	    }
	    Branch {
	      DstBlock		      "gearbox controller interface"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  2
	  Points		  [10, 0]
	  Branch {
	    DstBlock		    "To Workspace3"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "gearbox controller interface"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "torque and speed req'd\nat output side of g"
"earbox\n(Nm), (rad/s)"
	  SrcPort		  1
	  Points		  [45, 0]
	  Branch {
	    Labels		    [1, 0]
	    Points		    [0, 55]
	    Branch {
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Branch {
	      DstBlock		      "loss\n(Nm)"
	      DstPort		      1
	    }
	  }
	  Branch {
	    DstBlock		    "gearing\n(Nm), (rad/s)"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "effect of inertia\n(Nm)"
	  SrcPort		  1
	  Points		  [25, 0]
	  Branch {
	    Points		    [0, 105]
	    Branch {
	      DstBlock		      "Pout/Pin,\nneglecting inertia"
	      DstPort		      2
	    }
	    Branch {
	      Points		      [0, 155]
	      DstBlock		      "Sum3"
	      DstPort		      1
	    }
	  }
	  Branch {
	    Points		    [0, -50]
	    DstBlock		    "Sum2"
	    DstPort		    3
	  }
	}
	Line {
	  SrcBlock		  "gearing\n(Nm), (rad/s)"
	  SrcPort		  2
	  Points		  [15, 0]
	  Branch {
	    Points		    [235, 0]
	    Branch {
	      Points		      [0, 95]
	      DstBlock		      "To Workspace9"
	      DstPort		      1
	    }
	    Branch {
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	  }
	  Branch {
	    Points		    [0, 120]
	    DstBlock		    "effect of inertia\n(Nm)"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "gearing\n(Nm), (rad/s)"
	  SrcPort		  1
	  Points		  [100, 0; 0, 45]
	  DstBlock		  "Sum2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux"
	  SrcPort		  1
	  DstBlock		  "torque and speed req'd\nat input side of ge"
"arbox\n(Nm), (rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Memory"
	  SrcPort		  1
	  Points		  [-15, 0]
	  DstBlock		  "gearbox controller interface"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Pout/Pin,\nneglecting inertia"
	  SrcPort		  1
	  Points		  [35, 0; 0, 55; -255, 0]
	  Branch {
	    Points		    [0, 100]
	    DstBlock		    "Product"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Memory"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "torque and speed avail.\nat input side of g"
"earbox\n(Nm), (rad/s)"
	  SrcPort		  1
	  DstBlock		  "Demux1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sum3"
	  SrcPort		  1
	  DstBlock		  "gearing\n(Nm), (rad/s)1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux1"
	  SrcPort		  1
	  DstBlock		  "torque and speed avail.\nat output side of "
"gearbox\n(Nm), (rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Product"
	  SrcPort		  1
	  Points		  [60, 0]
	  Branch {
	    DstBlock		    "Sum3"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [0, -85]
	    DstBlock		    "Product1"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "Product1"
	  SrcPort		  1
	  Points		  [20, 0]
	  DstBlock		  "To Workspace10"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <vc>"
	  SrcPort		  1
	  DstBlock		  "loss\n(Nm)"
	  DstPort		  3
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "hydraulic\ntorque\nconverter <htc>"
      Ports		      [2, 2]
      Position		      [65, 349, 115, 411]
      BackgroundColor	      "yellow"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskDisplay	      "image(imread('bdi_htc.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      System {
	Name			"hydraulic\ntorque\nconverter <htc>"
	Location		[-6, 74, 1018, 774]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "req'd output\ntrq and spd\n(Nm), (rad/s)"
	  Position		  [35, 258, 65, 272]
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Inport
	  Name			  "trq and spd\navailable at\ninput (Nm), (rad"
"/s)"
	  Position		  [60, 568, 90, 582]
	  Port			  "2"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Saturate
	  Name			  ">0\n"
	  Position		  [635, 335, 665, 365]
	  UpperLimit		  "inf"
	  LowerLimit		  "0"
	  LinearizeAsGain	  on
	}
	Block {
	  BlockType		  Saturate
	  Name			  ">0."
	  Position		  [650, 605, 680, 635]
	  UpperLimit		  "inf"
	  LowerLimit		  "0"
	  LinearizeAsGain	  on
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Block NOTES"
	  Ports			  []
	  Position		  [890, 610, 946, 650]
	  BackgroundColor	  "green"
	  ShowName		  off
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "disp('Block\\nNOTES')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Block NOTES"
	    Location		    [435, 526, 894, 676]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Annotation {
	      Position		      [227, 12]
	      VerticalAlignment	      "top"
	      Text		      "This block predicts the relative speed "
"of the HTC input (pump) and output\n(turbine).  Torque converter lockup is mo"
"deled.\n\n1/24/00:tm updated gear_ratio flag to shifting flag\n"
	    }
	  }
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant"
	  Position		  [620, 150, 640, 170]
	  ShowName		  off
	  Value			  "0"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux2"
	  Ports			  [1, 2]
	  Position		  [90, 226, 100, 304]
	  ShowName		  off
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux3"
	  Ports			  [1, 2]
	  Position		  [180, 546, 215, 599]
	  ShowName		  off
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  From
	  Name			  "From <vc>"
	  Position		  [540, 200, 615, 220]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux1"
	  Ports			  [2, 1]
	  Position		  [880, 252, 915, 288]
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux3"
	  Ports			  [2, 1]
	  Position		  [760, 537, 795, 573]
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux4"
	  Ports			  [2, 1]
	  Position		  [205, 341, 215, 379]
	  ShowName		  off
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "SR"
	  Ports			  [2, 2]
	  Position		  [295, 352, 325, 388]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "SR"
	    Location		    [33, 82, 838, 699]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "T,w\nreq out"
	      Position		      [50, 30, 70, 50]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "w in"
	      Position		      [415, 45, 435, 65]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      ">0"
	      Position		      [665, 235, 695, 265]
	      UpperLimit	      "inf"
	      LowerLimit	      "eps"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [245, 270, 265, 290]
	      Orientation	      "left"
	      ShowName		      off
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      Position		      [250, 542, 350, 568]
	      ShowName		      off
	      Value		      "vc_idle_spd+eps"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      Position		      [355, 195, 385, 215]
	      ShowName		      off
	      Value		      "1"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>"
	      Position		      [170, 153, 235, 177]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "locked_up"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "K_adv"
	      Ports		      [1, 1]
	      Position		      [170, 80, 200, 110]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"K_adv"
		Location		[598, 298, 1140, 543]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Req'd output\ntrq and spd\n(Nm), (r"
"ad/s)"
		  Position		  [20, 58, 50, 72]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Saturate
		  Name			  ">0"
		  Position		  [95, 50, 125, 80]
		  UpperLimit		  "inf"
		  LowerLimit		  "eps"
		  LinearizeAsGain	  on
		}
		Block {
		  BlockType		  Fcn
		  Name			  "K_adv=wout/(Tout)^0.5"
		  Position		  [155, 51, 275, 79]
		  FontName		  "Arial"
		  Expr			  "u[2]/u[1]^0.5"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation"
		  Position		  [315, 50, 345, 80]
		  UpperLimit		  "max(htc_k_adv)"
		  LowerLimit		  "min(htc_k_adv)"
		  LinearizeAsGain	  on
		}
		Block {
		  BlockType		  Outport
		  Name			  "K_adv"
		  Position		  [400, 58, 430, 72]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "[]"
		}
		Line {
		  SrcBlock		  ">0"
		  SrcPort		  1
		  DstBlock		  "K_adv=wout/(Tout)^0.5"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Req'd output\ntrq and spd\n(Nm), (r"
"ad/s)"
		  SrcPort		  1
		  DstBlock		  ">0"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "K_adv=wout/(Tout)^0.5"
		  SrcPort		  1
		  DstBlock		  "Saturation"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation"
		  SrcPort		  1
		  DstBlock		  "K_adv"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "K_adv_coast"
	      Ports		      [1, 1]
	      Position		      [215, 355, 245, 385]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"K_adv_coast"
		Location		[625, 725, 1116, 903]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Req'd output\ntrq and spd\n(Nm), (r"
"ad/s)"
		  Position		  [20, 58, 50, 72]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Fcn
		  Name			  "K_adv=wout/(abs(Tout))^0.5"
		  Position		  [125, 51, 245, 79]
		  FontName		  "Arial"
		  Expr			  "u[2]/abs(u[1]+eps)^0.5"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation"
		  Position		  [310, 50, 340, 80]
		  UpperLimit		  "max(htc_k_adv_coast)"
		  LowerLimit		  "min(htc_k_adv_coast)"
		  LinearizeAsGain	  on
		}
		Block {
		  BlockType		  Outport
		  Name			  "K_adv_coast"
		  Position		  [400, 58, 430, 72]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "[]"
		}
		Line {
		  SrcBlock		  "K_adv=wout/(abs(Tout))^0.5"
		  SrcPort		  1
		  DstBlock		  "Saturation"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation"
		  SrcPort		  1
		  DstBlock		  "K_adv_coast"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Req'd output\ntrq and spd\n(Nm), (r"
"ad/s)"
		  SrcPort		  1
		  DstBlock		  "K_adv=wout/(abs(Tout))^0.5"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      Ports		      [1, 1]
	      Position		      [355, 149, 385, 181]
	      ShowName		      off
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      Ports		      [1, 1]
	      Position		      [345, 261, 375, 289]
	      ShowName		      off
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      Ports		      [2, 1]
	      Position		      [500, 427, 530, 458]
	      Function		      "min"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      Position		      [250, 232, 280, 263]
	      ShowName		      off
	      Operator		      ">="
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "SR Look-Up\nTable\nSR=wout/win"
	      Position		      [335, 75, 365, 105]
	      InputValues	      "htc_k_adv"
	      OutputValues	      "htc_sr"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "SR Look-Up\nTable\nSR=wout/win\ncoast"
	      Position		      [335, 355, 365, 385]
	      InputValues	      "fliplr(htc_k_adv_coast)"
	      OutputValues	      "fliplr(htc_sr_coast)"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "SRmax=\nwout/win,min"
	      Ports		      [2, 1]
	      Position		      [435, 525, 455, 565]
	      Inputs		      "*/"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Selector
	      Name		      "T"
	      Ports		      [1, 1]
	      Position		      [175, 225, 205, 255]
	      InputType		      "Vector"
	      ElementSrc	      "Internal"
	      Elements		      "1"
	      RowSrc		      "Internal"
	      Rows		      "1"
	      ColumnSrc		      "Internal"
	      Columns		      "1"
	      InputPortWidth	      "2"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To Workspace1"
	      Position		      [270, 190, 340, 210]
	      ForegroundColor	      "blue"
	      ShowName		      off
	      VariableName	      "htc_locked"
	      MaxDataPoints	      "inf"
	      Decimation	      "1"
	      SampleTime	      "-1"
	      SaveFormat	      "Array"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To Workspace3"
	      Position		      [395, 265, 465, 285]
	      ShowName		      off
	      VariableName	      "htc_coasting"
	      MaxDataPoints	      "inf"
	      Decimation	      "1"
	      SampleTime	      "-1"
	      SaveFormat	      "Array"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "if coasting"
	      Position		      [595, 235, 625, 265]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "locked up,\nthen SR=1"
	      Position		      [420, 150, 450, 180]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "min,max"
	      Position		      [425, 355, 455, 385]
	      UpperLimit	      "inf"
	      LowerLimit	      "1"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "shifting SR"
	      Ports		      [3, 1]
	      Position		      [510, 35, 540, 75]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"shifting SR"
		Location		[276, 391, 1167, 777]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "T,w\nreq out"
		  Position		  [35, 35, 55, 55]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Inport
		  Name			  "w in"
		  Position		  [35, 85, 55, 105]
		  Port			  "2"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Inport
		  Name			  "SR"
		  Position		  [50, 330, 70, 350]
		  Port			  "3"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Gain
		  Name			  "-3200 rpm/second\nallowable in engi"
"ne\nspeed"
		  Position		  [220, 153, 310, 187]
		  Gain			  "-3200*pi/30"
		  Multiplication	  "Element-wise(K.*u)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Saturate
		  Name			  ">0"
		  Position		  [90, 80, 120, 110]
		  UpperLimit		  "inf"
		  LowerLimit		  "eps"
		  LinearizeAsGain	  on
		}
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  Position		  [40, 150, 60, 170]
		  DisplayTime		  off
		  Decimation		  "10"
		}
		Block {
		  BlockType		  From
		  Name			  "From <vc>1"
		  Position		  [555, 280, 630, 300]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "shifting"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory3"
		  Position		  [160, 80, 190, 110]
		  ShowName		  off
		  X0			  "eps"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory4"
		  Position		  [95, 165, 125, 195]
		  ShowName		  off
		  X0			  "0"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  MinMax
		  Name			  "MinMax"
		  Ports			  [2, 1]
		  Position		  [580, 157, 610, 188]
		  Function		  "min"
		  Inputs		  "2"
		}
		Block {
		  BlockType		  Product
		  Name			  "SRmax=\nwout/win,min"
		  Ports			  [2, 1]
		  Position		  [510, 40, 530, 80]
		  Inputs		  "*/"
		  Multiplication	  "Element-wise(.*)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Sum
		  Name			  "dt=t-(t-1)"
		  Ports			  [2, 1]
		  Position		  [155, 153, 185, 182]
		  IconShape		  "rectangular"
		  Inputs		  "+-"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Switch
		  Name			  "shifting,\nthen limit \nengine spee"
"d\nchange"
		  Position		  [665, 275, 695, 305]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Sum
		  Name			  "win,min=\nwin,prev+rate*dt"
		  Ports			  [2, 1]
		  Position		  [345, 92, 375, 123]
		  IconShape		  "rectangular"
		  Inputs		  "++"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Selector
		  Name			  "wout,req"
		  Ports			  [1, 1]
		  Position		  [345, 30, 375, 60]
		  InputType		  "Vector"
		  ElementSrc		  "Internal"
		  Elements		  "2"
		  RowSrc		  "Internal"
		  Rows			  "1"
		  ColumnSrc		  "Internal"
		  Columns		  "1"
		  InputPortWidth	  "2"
		}
		Block {
		  BlockType		  Outport
		  Name			  "SR\nlimited"
		  Position		  [790, 280, 810, 300]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "-3200 rpm/second\nallowable in engi"
"ne\nspeed"
		  SrcPort		  1
		  Points		  [15, 0]
		  DstBlock		  "win,min=\nwin,prev+rate*dt"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  ">0"
		  SrcPort		  1
		  DstBlock		  "Memory3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "w in"
		  SrcPort		  1
		  DstBlock		  ">0"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "MinMax"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "shifting,\nthen limit \nengine spee"
"d\nchange"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "shifting,\nthen limit \nengine spee"
"d\nchange"
		  SrcPort		  1
		  DstBlock		  "SR\nlimited"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "SR"
		  SrcPort		  1
		  Points		  [375, 0]
		  Branch {
		    Points		    [0, -160]
		    DstBlock		    "MinMax"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [195, 0; 0, -40]
		    DstBlock		    "shifting,\nthen limit \nengine sp"
"eed\nchange"
		    DstPort		    3
		  }
		}
		Line {
		  SrcBlock		  "SRmax=\nwout/win,min"
		  SrcPort		  1
		  Points		  [30, 0; 0, 95]
		  DstBlock		  "MinMax"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "From <vc>1"
		  SrcPort		  1
		  DstBlock		  "shifting,\nthen limit \nengine spee"
"d\nchange"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "T,w\nreq out"
		  SrcPort		  1
		  DstBlock		  "wout,req"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "wout,req"
		  SrcPort		  1
		  Points		  [115, 0]
		  DstBlock		  "SRmax=\nwout/win,min"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "win,min=\nwin,prev+rate*dt"
		  SrcPort		  1
		  Points		  [115, 0]
		  DstBlock		  "SRmax=\nwout/win,min"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory3"
		  SrcPort		  1
		  Points		  [135, 0]
		  DstBlock		  "win,min=\nwin,prev+rate*dt"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "dt=t-(t-1)"
		  SrcPort		  1
		  DstBlock		  "-3200 rpm/second\nallowable in engi"
"ne\nspeed"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    DstBlock		    "dt=t-(t-1)"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 20]
		    DstBlock		    "Memory4"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory4"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "dt=t-(t-1)"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Selector
	      Name		      "wout,req"
	      Ports		      [1, 1]
	      Position		      [285, 490, 315, 520]
	      InputType		      "Vector"
	      ElementSrc	      "Internal"
	      Elements		      "2"
	      RowSrc		      "Internal"
	      Rows		      "1"
	      ColumnSrc		      "Internal"
	      Columns		      "1"
	      InputPortWidth	      "2"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "SR"
	      Position		      [730, 240, 750, 260]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "coasting"
	      Position		      [730, 325, 750, 345]
	      Port		      "2"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "K_adv"
	      SrcPort		      1
	      Points		      [115, 0]
	      DstBlock		      "SR Look-Up\nTable\nSR=wout/win"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [0, 0]
	      Branch {
		Points			[0, 60]
		DstBlock		"coasting"
		DstPort			1
	      }
	      Branch {
		DstBlock		"To Workspace3"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      ">0"
	      SrcPort		      1
	      DstBlock		      "SR"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "if coasting"
	      SrcPort		      1
	      DstBlock		      ">0"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "K_adv_coast"
	      SrcPort		      1
	      DstBlock		      "SR Look-Up\nTable\nSR=wout/win\ncoast"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "if coasting"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "min,max"
	      SrcPort		      1
	      Points		      [25, 0]
	      DstBlock		      "MinMax"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "wout,req"
	      SrcPort		      1
	      Points		      [100, 0]
	      DstBlock		      "SRmax=\nwout/win,min"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "SRmax=\nwout/win,min"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "SRmax=\nwout/win,min"
	      SrcPort		      1
	      Points		      [25, 0]
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "shifting SR"
	      SrcPort		      1
	      Points		      [35, 0]
	      DstBlock		      "if coasting"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "locked up,\nthen SR=1"
	      SrcPort		      1
	      Points		      [15, 0; 0, -95]
	      DstBlock		      "shifting SR"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "w in"
	      SrcPort		      1
	      DstBlock		      "shifting SR"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "SR Look-Up\nTable\nSR=wout/win"
	      SrcPort		      1
	      Points		      [35, 0]
	      DstBlock		      "locked up,\nthen SR=1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "locked up,\nthen SR=1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      DstBlock		      "locked up,\nthen SR=1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [40, 0]
	      Branch {
		Points			[0, 25]
		DstBlock		"Logical\nOperator1"
		DstPort			1
	      }
	      Branch {
		DstBlock		"if coasting"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "T"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [-5, 0]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "SR Look-Up\nTable\nSR=wout/win\ncoast"
	      SrcPort		      1
	      DstBlock		      "min,max"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "T,w\nreq out"
	      SrcPort		      1
	      Points		      [55, 0]
	      Branch {
		Points			[25, 0]
		Branch {
		  DstBlock		  "shifting SR"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "K_adv"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[0, 200]
		Branch {
		  Points		  [0, 130]
		  Branch {
		    Points		    [0, 135]
		    DstBlock		    "wout,req"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "K_adv_coast"
		    DstPort		    1
		  }
		}
		Branch {
		  DstBlock		  "T"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "From <vc>"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"Logical\nOperator"
		DstPort			1
	      }
	      Branch {
		DstBlock		"To Workspace1"
		DstPort			1
	      }
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "T, shifting"
	  Ports			  [5, 1]
	  Position		  [145, 158, 175, 222]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "T, shifting"
	    Location		    [164, 219, 728, 707]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "TR"
	      Position		      [40, 83, 70, 97]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Req'd \ninput trq"
	      Position		      [35, 28, 65, 42]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Req'd output\ntrq"
	      Position		      [35, 213, 65, 227]
	      Port		      "3"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "htc_spd_in_a"
	      Position		      [45, 288, 75, 302]
	      Port		      "4"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "SR"
	      Position		      [60, 388, 90, 402]
	      Port		      "5"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>2"
	      Position		      [145, 175, 220, 195]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "shifting"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      Position		      [200, 50, 230, 80]
	      ShowName		      off
	      X0		      "0"
	      InheritSampleTime	      off
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory1"
	      Position		      [170, 380, 200, 410]
	      X0		      "0"
	      InheritSampleTime	      off
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      Ports		      [2, 1]
	      Position		      [440, 202, 470, 233]
	      Function		      "min"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "TR Look-Up\nTable\nTR=Tout/Tin"
	      Position		      [235, 380, 265, 410]
	      InputValues	      "htc_sr"
	      OutputValues	      "htc_tr"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "T_max"
	      Ports		      [2, 1]
	      Position		      [425, 252, 455, 283]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"T_max"
		Location		[614, 391, 1113, 614]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "w_APU"
		  Position		  [20, 45, 40, 65]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Inport
		  Name			  "TR"
		  Position		  [30, 120, 50, 140]
		  Port			  "2"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation1"
		  Position		  [85, 46, 115, 64]
		  FontName		  "Arial"
		  UpperLimit		  "max(fc_map_spd)*fc_spd_scale"
		  LowerLimit		  "min(fc_map_spd)*fc_spd_scale"
		  LinearizeAsGain	  on
		}
		Block {
		  BlockType		  Product
		  Name			  "Tin*TR=\nTout"
		  Ports			  [2, 1]
		  Position		  [275, 50, 295, 90]
		  Inputs		  "2"
		  Multiplication	  "Element-wise(.*)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Lookup
		  Name			  "max_torque lookup"
		  Position		  [180, 43, 210, 67]
		  InputValues		  "fc_map_spd*fc_spd_scale"
		  OutputValues		  "fc_max_trq*fc_trq_scale"
		}
		Block {
		  BlockType		  Outport
		  Name			  "T_max\nmax gain from htc"
		  Position		  [360, 45, 380, 65]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "max_torque lookup"
		  SrcPort		  1
		  Points		  [45, 0]
		  DstBlock		  "Tin*TR=\nTout"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "TR"
		  SrcPort		  1
		  Points		  [205, 0]
		  DstBlock		  "Tin*TR=\nTout"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Tin*TR=\nTout"
		  SrcPort		  1
		  Points		  [0, -15]
		  DstBlock		  "T_max\nmax gain from htc"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "w_APU"
		  SrcPort		  1
		  DstBlock		  "Saturation1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation1"
		  SrcPort		  1
		  DstBlock		  "max_torque lookup"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Tin*TR=\nTout,req"
	      Ports		      [2, 1]
	      Position		      [145, 45, 165, 85]
	      ShowName		      off
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "engine speed\nestimator"
	      Ports		      [1, 1]
	      Position		      [360, 280, 390, 310]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"engine speed\nestimator"
		Location		[350, 221, 709, 375]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "htc_spd_in_a"
		  Position		  [40, 38, 70, 52]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory2"
		  Position		  [120, 30, 150, 60]
		  ShowName		  off
		  X0			  "0"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  Position		  [190, 38, 220, 52]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "[]"
		}
		Line {
		  SrcBlock		  "Memory2"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "htc_spd_in_a"
		  SrcPort		  1
		  DstBlock		  "Memory2"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "shifting,\noverride zero\nTrequest"
	      Position		      [305, 195, 335, 225]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "T req"
	      Position		      [500, 213, 530, 227]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Line {
	      SrcBlock		      "Tin*TR=\nTout,req"
	      SrcPort		      1
	      DstBlock		      "Memory"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "TR"
	      SrcPort		      1
	      Points		      [55, 0]
	      DstBlock		      "Tin*TR=\nTout,req"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Req'd \ninput trq"
	      SrcPort		      1
	      Points		      [60, 0]
	      DstBlock		      "Tin*TR=\nTout,req"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [40, 0; 0, 135]
	      DstBlock		      "shifting,\noverride zero\nTrequest"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "T_max"
	      SrcPort		      1
	      Points		      [10, 0; 0, -25; -45, 0]
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "shifting,\noverride zero\nTrequest"
	      SrcPort		      1
	      DstBlock		      "MinMax"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "TR Look-Up\nTable\nTR=Tout/Tin"
	      SrcPort		      1
	      Points		      [140, 0]
	      DstBlock		      "T_max"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      DstBlock		      "T req"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "engine speed\nestimator"
	      SrcPort		      1
	      Points		      [5, 0; 0, -35]
	      DstBlock		      "T_max"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory1"
	      SrcPort		      1
	      DstBlock		      "TR Look-Up\nTable\nTR=Tout/Tin"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "SR"
	      SrcPort		      1
	      DstBlock		      "Memory1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "htc_spd_in_a"
	      SrcPort		      1
	      DstBlock		      "engine speed\nestimator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Req'd output\ntrq"
	      SrcPort		      1
	      DstBlock		      "shifting,\noverride zero\nTrequest"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From <vc>2"
	      SrcPort		      1
	      Points		      [10, 0; 0, 25]
	      DstBlock		      "shifting,\noverride zero\nTrequest"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "TR"
	  Ports			  [2, 1]
	  Position		  [370, 107, 400, 143]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "TR"
	    Location		    [169, 372, 967, 851]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "SR"
	      Position		      [60, 80, 80, 100]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "coasting"
	      Position		      [230, 265, 250, 285]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "1/SR*TR \nfor coast"
	      Position		      [555, 89, 580, 111]
	      FontName		      "Arial"
	      Expr		      "1/u"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      Position		      [250, 195, 280, 215]
	      ShowName		      off
	      Value		      "1"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>"
	      Position		      [155, 153, 220, 177]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "locked_up"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      Ports		      [1, 1]
	      Position		      [250, 149, 280, 181]
	      ShowName		      off
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      Ports		      [1, 1]
	      Position		      [290, 259, 320, 291]
	      ShowName		      off
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "TR Look-Up\nTable\nTR=Tout/Tin"
	      Position		      [230, 75, 260, 105]
	      InputValues	      "htc_sr"
	      OutputValues	      "htc_tr"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "TR Look-Up\nTable\nTR=Tout/Tin\ncoast"
	      Position		      [245, 380, 275, 410]
	      InputValues	      "htc_sr_coast"
	      OutputValues	      "htc_tr_coast"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To Workspace11"
	      Position		      [700, 85, 770, 105]
	      ShowName		      off
	      VariableName	      "htc_efficiency"
	      MaxDataPoints	      "inf"
	      Decimation	      "1"
	      SampleTime	      "-1"
	      SaveFormat	      "Array"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "effic=SR*TR"
	      Ports		      [2, 1]
	      Position		      [480, 45, 500, 85]
	      Inputs		      "**"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "if coasting"
	      Position		      [400, 260, 430, 290]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "if coasting1"
	      Position		      [640, 80, 670, 110]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "locked up,\nthen TR=1"
	      Position		      [315, 150, 345, 180]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "min,max"
	      Position		      [320, 380, 350, 410]
	      UpperLimit	      "htc_max_coast_tr"
	      LowerLimit	      "htc_min_coast_tr"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "TR"
	      Position		      [620, 265, 640, 285]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "if coasting1"
	      SrcPort		      1
	      DstBlock		      "To Workspace11"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "1/SR*TR \nfor coast"
	      SrcPort		      1
	      Points		      [40, 0]
	      DstBlock		      "if coasting1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "effic=SR*TR"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		Points			[0, 35]
		DstBlock		"1/SR*TR \nfor coast"
		DstPort			1
	      }
	      Branch {
		Points			[90, 0]
		DstBlock		"if coasting1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, -45; 280, 0; 0, -135]
		DstBlock		"if coasting1"
		DstPort			2
	      }
	      Branch {
		DstBlock		"if coasting"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "if coasting"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		DstBlock		"effic=SR*TR"
		DstPort			2
	      }
	      Branch {
		DstBlock		"TR"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "coasting"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "SR"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		Points			[15, 0]
		Branch {
		  Points		  [0, -35]
		  DstBlock		  "effic=SR*TR"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "TR Look-Up\nTable\nTR=Tout/Tin"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[0, 305]
		DstBlock		"TR Look-Up\nTable\nTR=Tout/Tin\ncoast"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "min,max"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "if coasting"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "TR Look-Up\nTable\nTR=Tout/Tin\ncoast"
	      SrcPort		      1
	      DstBlock		      "min,max"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "locked up,\nthen TR=1"
	      SrcPort		      1
	      Points		      [35, 0]
	      DstBlock		      "if coasting"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      DstBlock		      "locked up,\nthen TR=1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <vc>"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "locked up,\nthen TR=1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "TR Look-Up\nTable\nTR=Tout/Tin"
	      SrcPort		      1
	      Points		      [35, 0]
	      DstBlock		      "locked up,\nthen TR=1"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  Product
	  Name			  "Tin=\nTout,req/TR"
	  Ports			  [2, 1]
	  Position		  [505, 115, 525, 155]
	  Inputs		  "/*"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace"
	  Position		  [890, 210, 960, 230]
	  ShowName		  off
	  VariableName		  "htc_trq_in_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace1"
	  Position		  [860, 305, 930, 325]
	  ShowName		  off
	  VariableName		  "htc_spd_in_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace10"
	  Position		  [655, 470, 725, 490]
	  ShowName		  off
	  VariableName		  "htc_trq_inertia"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace2"
	  Position		  [225, 220, 295, 240]
	  ShowName		  off
	  VariableName		  "htc_trq_out_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace3"
	  Position		  [215, 120, 285, 140]
	  ShowName		  off
	  VariableName		  "htc_spd_out_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace4"
	  Position		  [255, 530, 325, 550]
	  ShowName		  off
	  VariableName		  "htc_trq_in_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace5"
	  Position		  [270, 575, 340, 595]
	  ShowName		  off
	  VariableName		  "htc_spd_in_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace6"
	  Position		  [765, 500, 835, 520]
	  ShowName		  off
	  VariableName		  "htc_trq_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace7"
	  Position		  [770, 610, 845, 630]
	  ShowName		  off
	  VariableName		  "htc_spd_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace8"
	  Position		  [465, 495, 535, 515]
	  ShowName		  off
	  VariableName		  "htc_sr_hist"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace9"
	  Position		  [465, 425, 535, 445]
	  ShowName		  off
	  VariableName		  "htc_tr_hist"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  Product
	  Name			  "Tout=\nTin*TR"
	  Ports			  [2, 1]
	  Position		  [445, 530, 465, 570]
	  Inputs		  "**"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Sum
	  Name			  "Tout_a = \nTout-\nTinertia"
	  Ports			  [2, 1]
	  Position		  [635, 527, 690, 558]
	  IconShape		  "rectangular"
	  Inputs		  "-+"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Sum
	  Name			  "Treq, in = \nTin+\nTinertia"
	  Ports			  [2, 1]
	  Position		  [770, 157, 825, 188]
	  IconShape		  "rectangular"
	  Inputs		  "++"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "effect of inertia\n(Nm)"
	  Ports			  [1, 1]
	  Position		  [500, 262, 530, 298]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "effect of inertia\n(Nm)"
	    Location		    [330, 318, 821, 471]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "turbine/output\nspeed (rad/s)"
	      Position		      [50, 15, 70, 35]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [30, 74, 135, 96]
	      FontName		      "Arial"
	      Value		      "htc_inertia"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [290, 13, 310, 57]
	      FontName		      "Arial"
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Derivative
	      Name		      "d/dt"
	      Position		      [155, 15, 185, 35]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "inertia torque\n(Nm)"
	      Position		      [380, 25, 400, 45]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "inertia torque\n(Nm)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [70, 0; 0, -40]
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "turbine/output\nspeed (rad/s)"
	      SrcPort		      1
	      DstBlock		      "d/dt"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "d/dt"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Annotation {
	      Position		      [247, 117]
	      VerticalAlignment	      "top"
	      Text		      "This block computes the torque required"
" to overcome the inertia of the\nturbine (plus 1/2 fluid in htc)."
	    }
	  }
	}
	Block {
	  BlockType		  Switch
	  Name			  "shifting,\nignore inertia\ntorque in reques"
"t"
	  Position		  [685, 210, 715, 240]
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  Product
	  Name			  "win=\nwout/SR"
	  Ports			  [2, 1]
	  Position		  [445, 330, 465, 370]
	  Inputs		  "*/"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Product
	  Name			  "wout=\nwin*SR"
	  Ports			  [2, 1]
	  Position		  [435, 600, 455, 640]
	  Inputs		  "**"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Outport
	  Name			  "req'd input\ntrq and spd\n(Nm), (rad/s)"
	  Position		  [975, 263, 1005, 277]
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Block {
	  BlockType		  Outport
	  Name			  "trq and spd\navailable at\noutput (Nm), (ra"
"d/s)"
	  Position		  [895, 548, 925, 562]
	  Port			  "2"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Line {
	  SrcBlock		  ">0."
	  SrcPort		  1
	  Points		  [25, 0]
	  Branch {
	    Points		    [0, -55]
	    DstBlock		    "Mux3"
	    DstPort		    2
	  }
	  Branch {
	    DstBlock		    "To Workspace7"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "wout=\nwin*SR"
	  SrcPort		  1
	  DstBlock		  ">0."
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux3"
	  SrcPort		  1
	  Points		  [20, 0]
	  Branch {
	    DstBlock		    "To Workspace4"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Tout=\nTin*TR"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "trq and spd\navailable at\ninput (Nm), (rad"
"/s)"
	  SrcPort		  1
	  DstBlock		  "Demux3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Tout=\nTin*TR"
	  SrcPort		  1
	  DstBlock		  "Tout_a = \nTout-\nTinertia"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Mux3"
	  SrcPort		  1
	  DstBlock		  "trq and spd\navailable at\noutput (Nm), (ra"
"d/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "win=\nwout/SR"
	  SrcPort		  1
	  DstBlock		  ">0\n"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "T, shifting"
	  SrcPort		  1
	  Points		  [0, 60]
	  Branch {
	    Points		    [0, 100]
	    DstBlock		    "Mux4"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [25, 0]
	    Branch {
	      Points		      [210, 0; 0, -105]
	      DstBlock		      "Tin=\nTout,req/TR"
	      DstPort		      2
	    }
	    Branch {
	      Points		      [0, -20]
	      DstBlock		      "To Workspace2"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "Demux2"
	  SrcPort		  1
	  Points		  [5, 0; 0, -55]
	  DstBlock		  "T, shifting"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Demux3"
	  SrcPort		  2
	  Points		  [10, 0]
	  Branch {
	    Points		    [20, 0]
	    Branch {
	      DstBlock		      "To Workspace5"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [0, 45]
	      DstBlock		      "wout=\nwin*SR"
	      DstPort		      2
	    }
	  }
	  Branch {
	    Points		    [0, -55]
	    Branch {
	      Points		      [0, -150]
	      DstBlock		      "SR"
	      DstPort		      2
	    }
	    Branch {
	      Points		      [-110, 0; 0, -330]
	      DstBlock		      "T, shifting"
	      DstPort		      4
	    }
	  }
	}
	Line {
	  SrcBlock		  "Mux4"
	  SrcPort		  1
	  DstBlock		  "SR"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "SR"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    Points		    [55, 0]
	    Branch {
	      DstBlock		      "win=\nwout/SR"
	      DstPort		      2
	    }
	    Branch {
	      Points		      [0, 80]
	      Branch {
		Points			[0, 65]
		Branch {
		  Points		  [0, 105]
		  DstBlock		  "wout=\nwin*SR"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "To Workspace8"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[-270, 0]
		DstBlock		"T, shifting"
		DstPort			5
	      }
	    }
	  }
	  Branch {
	    Points		    [0, -245]
	    DstBlock		    "TR"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Tout_a = \nTout-\nTinertia"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    DstBlock		    "Mux3"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -35]
	    DstBlock		    "To Workspace6"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Demux2"
	  SrcPort		  2
	  Points		  [85, 0]
	  Branch {
	    Points		    [0, -10]
	    Branch {
	      DstBlock		      "Mux4"
	      DstPort		      2
	    }
	    Branch {
	      Points		      [240, 0; 0, 5]
	      Branch {
		DstBlock		"win=\nwout/SR"
		DstPort			1
	      }
	      Branch {
		DstBlock		"effect of inertia\n(Nm)"
		DstPort			1
	      }
	    }
	  }
	  Branch {
	    Points		    [0, -155]
	    DstBlock		    "To Workspace3"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  ">0\n"
	  SrcPort		  1
	  Points		  [175, 0; 0, -35]
	  Branch {
	    DstBlock		    "To Workspace1"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -35]
	    DstBlock		    "Mux1"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "Constant"
	  SrcPort		  1
	  Points		  [25, 0]
	  DstBlock		  "shifting,\nignore inertia\ntorque in reques"
"t"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "effect of inertia\n(Nm)"
	  SrcPort		  1
	  Points		  [75, 0]
	  Branch {
	    Points		    [0, 200]
	    Branch {
	      Points		      [0, 55]
	      DstBlock		      "Tout_a = \nTout-\nTinertia"
	      DstPort		      1
	    }
	    Branch {
	      DstBlock		      "To Workspace10"
	      DstPort		      1
	    }
	  }
	  Branch {
	    Points		    [20, 0; 0, -45]
	    DstBlock		    "shifting,\nignore inertia\ntorque in requ"
"est"
	    DstPort		    3
	  }
	}
	Line {
	  SrcBlock		  "TR"
	  SrcPort		  1
	  Points		  [20, 0]
	  Branch {
	    Points		    [0, 310]
	    Branch {
	      Points		      [0, 105]
	      DstBlock		      "Tout=\nTin*TR"
	      DstPort		      1
	    }
	    Branch {
	      DstBlock		      "To Workspace9"
	      DstPort		      1
	    }
	  }
	  Branch {
	    Points		    [55, 0]
	    Branch {
	      DstBlock		      "Tin=\nTout,req/TR"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [0, -35; -350, 0]
	      DstBlock		      "T, shifting"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "SR"
	  SrcPort		  2
	  Points		  [25, 0]
	  DstBlock		  "TR"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Mux1"
	  SrcPort		  1
	  DstBlock		  "req'd input\ntrq and spd\n(Nm), (rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Treq, in = \nTin+\nTinertia"
	  SrcPort		  1
	  Points		  [0, 45; 15, 0]
	  Branch {
	    Points		    [20, 0]
	    Branch {
	      DstBlock		      "Mux1"
	      DstPort		      1
	    }
	    Branch {
	      DstBlock		      "To Workspace"
	      DstPort		      1
	    }
	  }
	  Branch {
	    Points		    [0, -160; -725, 0; 0, 120]
	    DstBlock		    "T, shifting"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "shifting,\nignore inertia\ntorque in reques"
"t"
	  SrcPort		  1
	  Points		  [35, 0]
	  DstBlock		  "Treq, in = \nTin+\nTinertia"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Tin=\nTout,req/TR"
	  SrcPort		  1
	  Points		  [225, 0]
	  DstBlock		  "Treq, in = \nTin+\nTinertia"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "req'd output\ntrq and spd\n(Nm), (rad/s)"
	  SrcPort		  1
	  DstBlock		  "Demux2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <vc>"
	  SrcPort		  1
	  Points		  [30, 0; 0, 15]
	  DstBlock		  "shifting,\nignore inertia\ntorque in reques"
"t"
	  DstPort		  2
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "hydraulic torque\nconverter for \nparallel hybr"
"id <htc>"
      Ports		      [2, 2]
      Position		      [180, 349, 230, 411]
      BackgroundColor	      "yellow"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskDisplay	      "image(imread('bdi_htc.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      System {
	Name			"hydraulic torque\nconverter for \nparallel hy"
"brid <htc>"
	Location		[2, 102, 1006, 754]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "req'd output\ntrq and spd\n(Nm), (rad/s)"
	  Position		  [35, 258, 65, 272]
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Inport
	  Name			  "trq and spd\navailable at\ninput (Nm), (rad"
"/s)"
	  Position		  [60, 568, 90, 582]
	  Port			  "2"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Saturate
	  Name			  ">0\n"
	  Position		  [635, 335, 665, 365]
	  UpperLimit		  "inf"
	  LowerLimit		  "0"
	  LinearizeAsGain	  on
	}
	Block {
	  BlockType		  Saturate
	  Name			  ">0."
	  Position		  [650, 605, 680, 635]
	  UpperLimit		  "inf"
	  LowerLimit		  "0"
	  LinearizeAsGain	  on
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Block NOTES"
	  Ports			  []
	  Position		  [890, 610, 946, 650]
	  BackgroundColor	  "green"
	  ShowName		  off
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "disp('Block\\nNOTES')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Block NOTES"
	    Location		    [433, 528, 892, 678]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Annotation {
	      Position		      [227, 12]
	      VerticalAlignment	      "top"
	      Text		      "This block predicts the relative speed "
"of the HTC input (pump) and output\n(turbine).  Torque converter lockup is mo"
"deled.\n"
	    }
	  }
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant"
	  Position		  [620, 150, 640, 170]
	  ShowName		  off
	  Value			  "0"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux2"
	  Ports			  [1, 2]
	  Position		  [90, 226, 100, 304]
	  ShowName		  off
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux3"
	  Ports			  [1, 2]
	  Position		  [180, 546, 215, 599]
	  ShowName		  off
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  From
	  Name			  "From <vc>"
	  Position		  [555, 200, 630, 220]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux1"
	  Ports			  [2, 1]
	  Position		  [880, 252, 915, 288]
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux3"
	  Ports			  [2, 1]
	  Position		  [760, 537, 795, 573]
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux4"
	  Ports			  [2, 1]
	  Position		  [205, 341, 215, 379]
	  ShowName		  off
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "SR"
	  Ports			  [2, 2]
	  Position		  [295, 352, 325, 388]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "SR"
	    Location		    [47, 106, 852, 723]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "T,w\nreq out"
	      Position		      [50, 30, 70, 50]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "w in"
	      Position		      [415, 45, 435, 65]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      ">0"
	      Position		      [665, 235, 695, 265]
	      UpperLimit	      "inf"
	      LowerLimit	      "eps"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [245, 270, 265, 290]
	      Orientation	      "left"
	      ShowName		      off
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      Position		      [250, 542, 350, 568]
	      ShowName		      off
	      Value		      "vc_idle_spd+eps"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      Position		      [355, 195, 385, 215]
	      ShowName		      off
	      Value		      "1"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>"
	      Position		      [170, 153, 235, 177]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "locked_up"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "K_adv"
	      Ports		      [1, 1]
	      Position		      [170, 80, 200, 110]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"K_adv"
		Location		[385, 297, 927, 542]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Req'd output\ntrq and spd\n(Nm), (r"
"ad/s)"
		  Position		  [20, 58, 50, 72]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Saturate
		  Name			  ">0"
		  Position		  [95, 50, 125, 80]
		  UpperLimit		  "inf"
		  LowerLimit		  "eps"
		  LinearizeAsGain	  on
		}
		Block {
		  BlockType		  Fcn
		  Name			  "K_adv=wout/(Tout)^0.5"
		  Position		  [155, 51, 275, 79]
		  FontName		  "Arial"
		  Expr			  "u[2]/u[1]^0.5"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation"
		  Position		  [315, 50, 345, 80]
		  UpperLimit		  "max(htc_k_adv)"
		  LowerLimit		  "min(htc_k_adv)"
		  LinearizeAsGain	  on
		}
		Block {
		  BlockType		  Outport
		  Name			  "K_adv"
		  Position		  [400, 58, 430, 72]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "[]"
		}
		Line {
		  SrcBlock		  ">0"
		  SrcPort		  1
		  DstBlock		  "K_adv=wout/(Tout)^0.5"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Req'd output\ntrq and spd\n(Nm), (r"
"ad/s)"
		  SrcPort		  1
		  DstBlock		  ">0"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "K_adv=wout/(Tout)^0.5"
		  SrcPort		  1
		  DstBlock		  "Saturation"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation"
		  SrcPort		  1
		  DstBlock		  "K_adv"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "K_adv_coast"
	      Ports		      [1, 1]
	      Position		      [215, 355, 245, 385]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"K_adv_coast"
		Location		[218, 421, 709, 599]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Req'd output\ntrq and spd\n(Nm), (r"
"ad/s)"
		  Position		  [20, 58, 50, 72]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Fcn
		  Name			  "K_adv=wout/(abs(Tout))^0.5"
		  Position		  [125, 51, 245, 79]
		  FontName		  "Arial"
		  Expr			  "u[2]/abs(u[1]+eps)^0.5"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation"
		  Position		  [310, 50, 340, 80]
		  ForegroundColor	  "red"
		  UpperLimit		  "max(htc_k_adv_coast)"
		  LowerLimit		  "0"
		  LinearizeAsGain	  on
		}
		Block {
		  BlockType		  Outport
		  Name			  "K_adv_coast"
		  Position		  [400, 58, 430, 72]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "[]"
		}
		Line {
		  SrcBlock		  "K_adv=wout/(abs(Tout))^0.5"
		  SrcPort		  1
		  DstBlock		  "Saturation"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation"
		  SrcPort		  1
		  DstBlock		  "K_adv_coast"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Req'd output\ntrq and spd\n(Nm), (r"
"ad/s)"
		  SrcPort		  1
		  DstBlock		  "K_adv=wout/(abs(Tout))^0.5"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      Ports		      [1, 1]
	      Position		      [355, 149, 385, 181]
	      ShowName		      off
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      Ports		      [1, 1]
	      Position		      [345, 261, 375, 289]
	      ShowName		      off
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      Ports		      [2, 1]
	      Position		      [500, 427, 530, 458]
	      Function		      "min"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      Position		      [250, 232, 280, 263]
	      ShowName		      off
	      Operator		      ">="
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "SR Look-Up\nTable\nSR=wout/win"
	      Position		      [335, 75, 365, 105]
	      InputValues	      "htc_k_adv"
	      OutputValues	      "htc_sr"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "SR Look-Up\nTable\nSR=wout/win\ncoast"
	      Position		      [335, 355, 365, 385]
	      InputValues	      "fliplr(htc_k_adv_coast)"
	      OutputValues	      "fliplr(htc_sr_coast)"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "SRmax=\nwout/win,min"
	      Ports		      [2, 1]
	      Position		      [435, 525, 455, 565]
	      Inputs		      "*/"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Selector
	      Name		      "T"
	      Ports		      [1, 1]
	      Position		      [175, 225, 205, 255]
	      InputType		      "Vector"
	      ElementSrc	      "Internal"
	      Elements		      "1"
	      RowSrc		      "Internal"
	      Rows		      "1"
	      ColumnSrc		      "Internal"
	      Columns		      "1"
	      InputPortWidth	      "2"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To Workspace1"
	      Position		      [270, 190, 340, 210]
	      ForegroundColor	      "blue"
	      ShowName		      off
	      VariableName	      "htc_locked"
	      MaxDataPoints	      "inf"
	      Decimation	      "1"
	      SampleTime	      "-1"
	      SaveFormat	      "Array"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To Workspace3"
	      Position		      [395, 265, 465, 285]
	      ShowName		      off
	      VariableName	      "htc_coasting"
	      MaxDataPoints	      "inf"
	      Decimation	      "1"
	      SampleTime	      "-1"
	      SaveFormat	      "Array"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "if coasting"
	      Position		      [595, 235, 625, 265]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "locked up,\nthen SR=1"
	      Position		      [420, 150, 450, 180]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "min,max"
	      Position		      [425, 355, 455, 385]
	      UpperLimit	      "inf"
	      LowerLimit	      "1"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "shifting SR"
	      Ports		      [3, 1]
	      Position		      [510, 35, 540, 75]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"shifting SR"
		Location		[83, 256, 974, 642]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "T,w\nreq out"
		  Position		  [35, 35, 55, 55]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Inport
		  Name			  "w in"
		  Position		  [35, 85, 55, 105]
		  Port			  "2"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Inport
		  Name			  "SR"
		  Position		  [50, 330, 70, 350]
		  Port			  "3"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Gain
		  Name			  "-3200 rpm/second\nallowable in engi"
"ne\nspeed"
		  Position		  [220, 153, 310, 187]
		  Gain			  "-3200*pi/30"
		  Multiplication	  "Element-wise(K.*u)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Saturate
		  Name			  ">0"
		  Position		  [90, 80, 120, 110]
		  UpperLimit		  "inf"
		  LowerLimit		  "eps"
		  LinearizeAsGain	  on
		}
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  Position		  [40, 150, 60, 170]
		  DisplayTime		  off
		  Decimation		  "10"
		}
		Block {
		  BlockType		  From
		  Name			  "From <vc>1"
		  Position		  [555, 280, 630, 300]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "shifting"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory3"
		  Position		  [160, 80, 190, 110]
		  ShowName		  off
		  X0			  "eps"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory4"
		  Position		  [95, 165, 125, 195]
		  ShowName		  off
		  X0			  "0"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  MinMax
		  Name			  "MinMax"
		  Ports			  [2, 1]
		  Position		  [580, 157, 610, 188]
		  Function		  "min"
		  Inputs		  "2"
		}
		Block {
		  BlockType		  Product
		  Name			  "SRmax=\nwout/win,min"
		  Ports			  [2, 1]
		  Position		  [510, 40, 530, 80]
		  Inputs		  "*/"
		  Multiplication	  "Element-wise(.*)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Sum
		  Name			  "dt=t-(t-1)"
		  Ports			  [2, 1]
		  Position		  [155, 153, 185, 182]
		  IconShape		  "rectangular"
		  Inputs		  "+-"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Switch
		  Name			  "shifting,\nthen limit \nengine spee"
"d\nchange"
		  Position		  [665, 275, 695, 305]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Sum
		  Name			  "win,min=\nwin,prev+rate*dt"
		  Ports			  [2, 1]
		  Position		  [345, 92, 375, 123]
		  IconShape		  "rectangular"
		  Inputs		  "++"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Selector
		  Name			  "wout,req"
		  Ports			  [1, 1]
		  Position		  [345, 30, 375, 60]
		  InputType		  "Vector"
		  ElementSrc		  "Internal"
		  Elements		  "2"
		  RowSrc		  "Internal"
		  Rows			  "1"
		  ColumnSrc		  "Internal"
		  Columns		  "1"
		  InputPortWidth	  "2"
		}
		Block {
		  BlockType		  Outport
		  Name			  "SR\nlimited"
		  Position		  [790, 280, 810, 300]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "-3200 rpm/second\nallowable in engi"
"ne\nspeed"
		  SrcPort		  1
		  Points		  [15, 0]
		  DstBlock		  "win,min=\nwin,prev+rate*dt"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  ">0"
		  SrcPort		  1
		  DstBlock		  "Memory3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "w in"
		  SrcPort		  1
		  DstBlock		  ">0"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "MinMax"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "shifting,\nthen limit \nengine spee"
"d\nchange"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "shifting,\nthen limit \nengine spee"
"d\nchange"
		  SrcPort		  1
		  DstBlock		  "SR\nlimited"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "SR"
		  SrcPort		  1
		  Points		  [375, 0]
		  Branch {
		    Points		    [0, -160]
		    DstBlock		    "MinMax"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [195, 0; 0, -40]
		    DstBlock		    "shifting,\nthen limit \nengine sp"
"eed\nchange"
		    DstPort		    3
		  }
		}
		Line {
		  SrcBlock		  "SRmax=\nwout/win,min"
		  SrcPort		  1
		  Points		  [30, 0; 0, 95]
		  DstBlock		  "MinMax"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "From <vc>1"
		  SrcPort		  1
		  DstBlock		  "shifting,\nthen limit \nengine spee"
"d\nchange"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "T,w\nreq out"
		  SrcPort		  1
		  DstBlock		  "wout,req"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "wout,req"
		  SrcPort		  1
		  Points		  [115, 0]
		  DstBlock		  "SRmax=\nwout/win,min"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "win,min=\nwin,prev+rate*dt"
		  SrcPort		  1
		  Points		  [115, 0]
		  DstBlock		  "SRmax=\nwout/win,min"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory3"
		  SrcPort		  1
		  Points		  [135, 0]
		  DstBlock		  "win,min=\nwin,prev+rate*dt"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "dt=t-(t-1)"
		  SrcPort		  1
		  DstBlock		  "-3200 rpm/second\nallowable in engi"
"ne\nspeed"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    DstBlock		    "dt=t-(t-1)"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 20]
		    DstBlock		    "Memory4"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory4"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "dt=t-(t-1)"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Selector
	      Name		      "wout,req"
	      Ports		      [1, 1]
	      Position		      [285, 490, 315, 520]
	      InputType		      "Vector"
	      ElementSrc	      "Internal"
	      Elements		      "2"
	      RowSrc		      "Internal"
	      Rows		      "1"
	      ColumnSrc		      "Internal"
	      Columns		      "1"
	      InputPortWidth	      "2"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "SR"
	      Position		      [730, 240, 750, 260]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "coasting"
	      Position		      [730, 325, 750, 345]
	      Port		      "2"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "K_adv"
	      SrcPort		      1
	      Points		      [115, 0]
	      DstBlock		      "SR Look-Up\nTable\nSR=wout/win"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [0, 0]
	      Branch {
		Points			[0, 60]
		DstBlock		"coasting"
		DstPort			1
	      }
	      Branch {
		DstBlock		"To Workspace3"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      ">0"
	      SrcPort		      1
	      DstBlock		      "SR"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "if coasting"
	      SrcPort		      1
	      DstBlock		      ">0"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "K_adv_coast"
	      SrcPort		      1
	      DstBlock		      "SR Look-Up\nTable\nSR=wout/win\ncoast"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "if coasting"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "min,max"
	      SrcPort		      1
	      Points		      [25, 0]
	      DstBlock		      "MinMax"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "wout,req"
	      SrcPort		      1
	      Points		      [100, 0]
	      DstBlock		      "SRmax=\nwout/win,min"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "SRmax=\nwout/win,min"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "SRmax=\nwout/win,min"
	      SrcPort		      1
	      Points		      [25, 0]
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "shifting SR"
	      SrcPort		      1
	      Points		      [35, 0]
	      DstBlock		      "if coasting"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "locked up,\nthen SR=1"
	      SrcPort		      1
	      Points		      [15, 0; 0, -95]
	      DstBlock		      "shifting SR"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "w in"
	      SrcPort		      1
	      DstBlock		      "shifting SR"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "SR Look-Up\nTable\nSR=wout/win"
	      SrcPort		      1
	      Points		      [35, 0]
	      DstBlock		      "locked up,\nthen SR=1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "locked up,\nthen SR=1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      DstBlock		      "locked up,\nthen SR=1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "T"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [-5, 0]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "SR Look-Up\nTable\nSR=wout/win\ncoast"
	      SrcPort		      1
	      DstBlock		      "min,max"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "T,w\nreq out"
	      SrcPort		      1
	      Points		      [55, 0]
	      Branch {
		Points			[25, 0]
		Branch {
		  DstBlock		  "shifting SR"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "K_adv"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[0, 200]
		Branch {
		  Points		  [0, 130]
		  Branch {
		    Points		    [0, 135]
		    DstBlock		    "wout,req"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "K_adv_coast"
		    DstPort		    1
		  }
		}
		Branch {
		  DstBlock		  "T"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "From <vc>"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"Logical\nOperator"
		DstPort			1
	      }
	      Branch {
		DstBlock		"To Workspace1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [0, 5; 45, 0]
	      Branch {
		DstBlock		"Logical\nOperator1"
		DstPort			1
	      }
	      Branch {
		Points			[250, 0]
		DstBlock		"if coasting"
		DstPort			2
	      }
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "T, shifting"
	  Ports			  [5, 1]
	  Position		  [145, 158, 175, 222]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "T, shifting"
	    Location		    [235, 172, 799, 660]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "TR"
	      Position		      [40, 83, 70, 97]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Req'd \ninput trq"
	      Position		      [35, 28, 65, 42]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Req'd output\ntrq"
	      Position		      [35, 213, 65, 227]
	      Port		      "3"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "htc_spd_in_a"
	      Position		      [45, 288, 75, 302]
	      Port		      "4"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "SR"
	      Position		      [60, 388, 90, 402]
	      Port		      "5"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>2"
	      Position		      [140, 170, 215, 190]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "shifting"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      Position		      [200, 50, 230, 80]
	      ShowName		      off
	      X0		      "0"
	      InheritSampleTime	      off
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory1"
	      Position		      [170, 380, 200, 410]
	      X0		      "0"
	      InheritSampleTime	      off
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      MinMax
	      Name		      "MinMax"
	      Ports		      [2, 1]
	      Position		      [440, 202, 470, 233]
	      Function		      "min"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "TR Look-Up\nTable\nTR=Tout/Tin"
	      Position		      [235, 380, 265, 410]
	      InputValues	      "htc_sr"
	      OutputValues	      "htc_tr"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "T_max"
	      Ports		      [2, 1]
	      Position		      [425, 252, 455, 283]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"T_max"
		Location		[289, 327, 860, 583]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "w_APU"
		  Position		  [20, 45, 40, 65]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Inport
		  Name			  "TR"
		  Position		  [25, 180, 45, 200]
		  Port			  "2"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  Ports			  []
		  Position		  [505, 195, 561, 235]
		  BackgroundColor	  "green"
		  ShowName		  off
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [435, 526, 819, 628]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Annotation {
		    Position		    [192, 36]
		    Text		    "Notes: engine_on flag causes alge"
"bric loop. Is it necessary? \nDoesn't seem to be. Disabled 10/31/00:tm"
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  Position		  [225, 140, 255, 170]
		  Value			  "1"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  From
		  Name			  "From <vc>"
		  Position		  [30, 135, 105, 155]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "engine_on"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  Position		  [135, 85, 165, 115]
		  Gain			  "tc_mc_to_fc_ratio"
		  Multiplication	  "Element-wise(K.*u)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain1"
		  Position		  [255, 85, 285, 115]
		  Gain			  "tc_mc_to_fc_ratio"
		  Multiplication	  "Element-wise(K.*u)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation1"
		  Position		  [75, 46, 105, 64]
		  FontName		  "Arial"
		  UpperLimit		  "max(fc_map_spd)*fc_spd_scale"
		  LowerLimit		  "min(fc_map_spd)*fc_spd_scale"
		  LinearizeAsGain	  on
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [310, 46, 330, 79]
		  ShowName		  off
		  IconShape		  "rectangular"
		  Inputs		  "++"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  Position		  [365, 60, 395, 90]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Terminator
		  Name			  "Terminator"
		  Position		  [150, 135, 170, 155]
		}
		Block {
		  BlockType		  Product
		  Name			  "Tin*TR=\nTout"
		  Ports			  [2, 1]
		  Position		  [435, 65, 455, 105]
		  Inputs		  "2"
		  Multiplication	  "Element-wise(.*)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Lookup
		  Name			  "max_torque \nmc lookup1"
		  Position		  [195, 88, 225, 112]
		  InputValues		  "mc_map_spd*mc_spd_scale"
		  OutputValues		  "mc_max_trq*mc_overtrq_factor*mc_trq"
"_scale"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "max_torque lookup"
		  Position		  [195, 43, 225, 67]
		  InputValues		  "fc_map_spd*fc_spd_scale"
		  OutputValues		  "fc_max_trq*fc_trq_scale"
		}
		Block {
		  BlockType		  Outport
		  Name			  "T_max\nmax gain from htc"
		  Position		  [510, 75, 530, 95]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "From <vc>"
		  SrcPort		  1
		  DstBlock		  "Terminator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  DstBlock		  "Tin*TR=\nTout"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Gain1"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [55, 0]
		    DstBlock		    "Switch"
		    DstPort		    3
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [80, 0; 0, -80]
		  DstBlock		  "Switch"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "max_torque \nmc lookup1"
		  SrcPort		  1
		  DstBlock		  "Gain1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "max_torque \nmc lookup1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation1"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    DstBlock		    "Gain"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "max_torque lookup"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "max_torque lookup"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "TR"
		  SrcPort		  1
		  Points		  [370, 0]
		  DstBlock		  "Tin*TR=\nTout"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Tin*TR=\nTout"
		  SrcPort		  1
		  DstBlock		  "T_max\nmax gain from htc"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "w_APU"
		  SrcPort		  1
		  DstBlock		  "Saturation1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Tin*TR=\nTout,req"
	      Ports		      [2, 1]
	      Position		      [145, 45, 165, 85]
	      ShowName		      off
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "engine speed\nestimator"
	      Ports		      [1, 1]
	      Position		      [360, 280, 390, 310]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"engine speed\nestimator"
		Location		[354, 221, 713, 375]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "htc_spd_in_a"
		  Position		  [40, 38, 70, 52]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory2"
		  Position		  [120, 30, 150, 60]
		  ShowName		  off
		  X0			  "0"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  Position		  [190, 38, 220, 52]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "[]"
		}
		Line {
		  SrcBlock		  "Memory2"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "htc_spd_in_a"
		  SrcPort		  1
		  DstBlock		  "Memory2"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "shifting,\noverride zero\nTrequest"
	      Position		      [305, 195, 335, 225]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "T req"
	      Position		      [500, 213, 530, 227]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Line {
	      SrcBlock		      "Tin*TR=\nTout,req"
	      SrcPort		      1
	      DstBlock		      "Memory"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "TR"
	      SrcPort		      1
	      Points		      [55, 0]
	      DstBlock		      "Tin*TR=\nTout,req"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Req'd \ninput trq"
	      SrcPort		      1
	      Points		      [60, 0]
	      DstBlock		      "Tin*TR=\nTout,req"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [40, 0; 0, 135]
	      DstBlock		      "shifting,\noverride zero\nTrequest"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "T_max"
	      SrcPort		      1
	      Points		      [10, 0; 0, -25; -45, 0]
	      DstBlock		      "MinMax"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "shifting,\noverride zero\nTrequest"
	      SrcPort		      1
	      DstBlock		      "MinMax"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "TR Look-Up\nTable\nTR=Tout/Tin"
	      SrcPort		      1
	      Points		      [140, 0]
	      DstBlock		      "T_max"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "MinMax"
	      SrcPort		      1
	      DstBlock		      "T req"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "engine speed\nestimator"
	      SrcPort		      1
	      Points		      [5, 0; 0, -35]
	      DstBlock		      "T_max"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory1"
	      SrcPort		      1
	      DstBlock		      "TR Look-Up\nTable\nTR=Tout/Tin"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "SR"
	      SrcPort		      1
	      DstBlock		      "Memory1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "htc_spd_in_a"
	      SrcPort		      1
	      DstBlock		      "engine speed\nestimator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Req'd output\ntrq"
	      SrcPort		      1
	      DstBlock		      "shifting,\noverride zero\nTrequest"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From <vc>2"
	      SrcPort		      1
	      Points		      [15, 0; 0, 30]
	      DstBlock		      "shifting,\noverride zero\nTrequest"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "TR"
	  Ports			  [2, 1]
	  Position		  [370, 107, 400, 143]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "TR"
	    Location		    [112, 213, 910, 692]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "SR"
	      Position		      [60, 80, 80, 100]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "coasting"
	      Position		      [230, 265, 250, 285]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "1/SR*TR \nfor coast"
	      Position		      [555, 89, 580, 111]
	      FontName		      "Arial"
	      Expr		      "1/u"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      Position		      [250, 195, 280, 215]
	      ShowName		      off
	      Value		      "1"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>"
	      Position		      [155, 153, 220, 177]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "locked_up"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      Ports		      [1, 1]
	      Position		      [250, 149, 280, 181]
	      ShowName		      off
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      Ports		      [1, 1]
	      Position		      [290, 259, 320, 291]
	      ShowName		      off
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "TR Look-Up\nTable\nTR=Tout/Tin"
	      Position		      [230, 75, 260, 105]
	      InputValues	      "htc_sr"
	      OutputValues	      "htc_tr"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "TR Look-Up\nTable\nTR=Tout/Tin\ncoast"
	      Position		      [245, 380, 275, 410]
	      InputValues	      "htc_sr_coast"
	      OutputValues	      "htc_tr_coast"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To Workspace11"
	      Position		      [700, 85, 770, 105]
	      ShowName		      off
	      VariableName	      "htc_efficiency"
	      MaxDataPoints	      "inf"
	      Decimation	      "1"
	      SampleTime	      "-1"
	      SaveFormat	      "Array"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "effic=SR*TR"
	      Ports		      [2, 1]
	      Position		      [480, 45, 500, 85]
	      Inputs		      "**"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "if coasting"
	      Position		      [400, 260, 430, 290]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "if coasting1"
	      Position		      [640, 80, 670, 110]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "locked up,\nthen TR=1"
	      Position		      [315, 150, 345, 180]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "min,max"
	      Position		      [320, 380, 350, 410]
	      UpperLimit	      "htc_max_coast_tr"
	      LowerLimit	      "htc_min_coast_tr"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "TR"
	      Position		      [620, 265, 640, 285]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "if coasting1"
	      SrcPort		      1
	      DstBlock		      "To Workspace11"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "1/SR*TR \nfor coast"
	      SrcPort		      1
	      Points		      [40, 0]
	      DstBlock		      "if coasting1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "effic=SR*TR"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		Points			[0, 35]
		DstBlock		"1/SR*TR \nfor coast"
		DstPort			1
	      }
	      Branch {
		Points			[90, 0]
		DstBlock		"if coasting1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, -45; 280, 0; 0, -135]
		DstBlock		"if coasting1"
		DstPort			2
	      }
	      Branch {
		DstBlock		"if coasting"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "if coasting"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		DstBlock		"effic=SR*TR"
		DstPort			2
	      }
	      Branch {
		DstBlock		"TR"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "coasting"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "SR"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		Points			[15, 0]
		Branch {
		  Points		  [0, -35]
		  DstBlock		  "effic=SR*TR"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "TR Look-Up\nTable\nTR=Tout/Tin"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[0, 305]
		DstBlock		"TR Look-Up\nTable\nTR=Tout/Tin\ncoast"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "min,max"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "if coasting"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "TR Look-Up\nTable\nTR=Tout/Tin\ncoast"
	      SrcPort		      1
	      DstBlock		      "min,max"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "locked up,\nthen TR=1"
	      SrcPort		      1
	      Points		      [35, 0]
	      DstBlock		      "if coasting"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      DstBlock		      "locked up,\nthen TR=1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <vc>"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "locked up,\nthen TR=1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "TR Look-Up\nTable\nTR=Tout/Tin"
	      SrcPort		      1
	      Points		      [35, 0]
	      DstBlock		      "locked up,\nthen TR=1"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  Product
	  Name			  "Tin=\nTout,req/TR"
	  Ports			  [2, 1]
	  Position		  [505, 115, 525, 155]
	  Inputs		  "/*"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace"
	  Position		  [890, 210, 960, 230]
	  ShowName		  off
	  VariableName		  "htc_trq_in_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace1"
	  Position		  [860, 305, 930, 325]
	  ShowName		  off
	  VariableName		  "htc_spd_in_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace10"
	  Position		  [655, 470, 725, 490]
	  ShowName		  off
	  VariableName		  "htc_trq_inertia"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace2"
	  Position		  [225, 220, 295, 240]
	  ShowName		  off
	  VariableName		  "htc_trq_out_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace3"
	  Position		  [215, 120, 285, 140]
	  ShowName		  off
	  VariableName		  "htc_spd_out_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace4"
	  Position		  [255, 530, 325, 550]
	  ShowName		  off
	  VariableName		  "htc_trq_in_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace5"
	  Position		  [270, 575, 340, 595]
	  ShowName		  off
	  VariableName		  "htc_spd_in_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace6"
	  Position		  [765, 500, 835, 520]
	  ShowName		  off
	  VariableName		  "htc_trq_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace7"
	  Position		  [770, 610, 845, 630]
	  ShowName		  off
	  VariableName		  "htc_spd_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace8"
	  Position		  [465, 495, 535, 515]
	  ShowName		  off
	  VariableName		  "htc_sr_hist"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace9"
	  Position		  [465, 425, 535, 445]
	  ShowName		  off
	  VariableName		  "htc_tr_hist"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  Product
	  Name			  "Tout=\nTin*TR"
	  Ports			  [2, 1]
	  Position		  [445, 530, 465, 570]
	  Inputs		  "**"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Sum
	  Name			  "Tout_a = \nTout-\nTinertia"
	  Ports			  [2, 1]
	  Position		  [635, 527, 690, 558]
	  IconShape		  "rectangular"
	  Inputs		  "-+"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Sum
	  Name			  "Treq, in = \nTin+\nTinertia"
	  Ports			  [2, 1]
	  Position		  [770, 157, 825, 188]
	  IconShape		  "rectangular"
	  Inputs		  "++"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "effect of inertia\n(Nm)"
	  Ports			  [1, 1]
	  Position		  [500, 262, 530, 298]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "effect of inertia\n(Nm)"
	    Location		    [332, 316, 823, 469]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "turbine/output\nspeed (rad/s)"
	      Position		      [50, 15, 70, 35]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [30, 74, 135, 96]
	      FontName		      "Arial"
	      Value		      "htc_inertia"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [290, 13, 310, 57]
	      FontName		      "Arial"
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Derivative
	      Name		      "d/dt"
	      Position		      [155, 15, 185, 35]
	      FontName		      "Arial"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "inertia torque\n(Nm)"
	      Position		      [380, 25, 400, 45]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "inertia torque\n(Nm)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [70, 0; 0, -40]
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "turbine/output\nspeed (rad/s)"
	      SrcPort		      1
	      DstBlock		      "d/dt"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "d/dt"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Annotation {
	      Position		      [247, 117]
	      VerticalAlignment	      "top"
	      Text		      "This block computes the torque required"
" to overcome the inertia of the\nturbine (plus 1/2 fluid in htc)."
	    }
	  }
	}
	Block {
	  BlockType		  Switch
	  Name			  "shifting,\nignore inertia\ntorque in reques"
"t"
	  Position		  [685, 210, 715, 240]
	  Threshold		  "eps"
	}
	Block {
	  BlockType		  Product
	  Name			  "win=\nwout/SR"
	  Ports			  [2, 1]
	  Position		  [445, 330, 465, 370]
	  Inputs		  "*/"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Product
	  Name			  "wout=\nwin*SR"
	  Ports			  [2, 1]
	  Position		  [435, 600, 455, 640]
	  Inputs		  "**"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Outport
	  Name			  "req'd input\ntrq and spd\n(Nm), (rad/s)"
	  Position		  [975, 263, 1005, 277]
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Block {
	  BlockType		  Outport
	  Name			  "trq and spd\navailable at\noutput (Nm), (ra"
"d/s)"
	  Position		  [895, 548, 925, 562]
	  Port			  "2"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Line {
	  SrcBlock		  "req'd output\ntrq and spd\n(Nm), (rad/s)"
	  SrcPort		  1
	  DstBlock		  "Demux2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Tin=\nTout,req/TR"
	  SrcPort		  1
	  Points		  [225, 0]
	  DstBlock		  "Treq, in = \nTin+\nTinertia"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "shifting,\nignore inertia\ntorque in reques"
"t"
	  SrcPort		  1
	  Points		  [35, 0]
	  DstBlock		  "Treq, in = \nTin+\nTinertia"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Treq, in = \nTin+\nTinertia"
	  SrcPort		  1
	  Points		  [0, 45; 15, 0]
	  Branch {
	    Points		    [0, -160; -725, 0; 0, 120]
	    DstBlock		    "T, shifting"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [20, 0]
	    Branch {
	      DstBlock		      "To Workspace"
	      DstPort		      1
	    }
	    Branch {
	      DstBlock		      "Mux1"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "Mux1"
	  SrcPort		  1
	  DstBlock		  "req'd input\ntrq and spd\n(Nm), (rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "SR"
	  SrcPort		  2
	  Points		  [25, 0]
	  DstBlock		  "TR"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "TR"
	  SrcPort		  1
	  Points		  [20, 0]
	  Branch {
	    Points		    [55, 0]
	    Branch {
	      Points		      [0, -35; -350, 0]
	      DstBlock		      "T, shifting"
	      DstPort		      1
	    }
	    Branch {
	      DstBlock		      "Tin=\nTout,req/TR"
	      DstPort		      1
	    }
	  }
	  Branch {
	    Points		    [0, 310]
	    Branch {
	      DstBlock		      "To Workspace9"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [0, 105]
	      DstBlock		      "Tout=\nTin*TR"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "effect of inertia\n(Nm)"
	  SrcPort		  1
	  Points		  [75, 0]
	  Branch {
	    Points		    [20, 0; 0, -45]
	    DstBlock		    "shifting,\nignore inertia\ntorque in requ"
"est"
	    DstPort		    3
	  }
	  Branch {
	    Points		    [0, 200]
	    Branch {
	      DstBlock		      "To Workspace10"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [0, 55]
	      DstBlock		      "Tout_a = \nTout-\nTinertia"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "Constant"
	  SrcPort		  1
	  Points		  [25, 0]
	  DstBlock		  "shifting,\nignore inertia\ntorque in reques"
"t"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  ">0\n"
	  SrcPort		  1
	  Points		  [175, 0; 0, -35]
	  Branch {
	    Points		    [0, -35]
	    DstBlock		    "Mux1"
	    DstPort		    2
	  }
	  Branch {
	    DstBlock		    "To Workspace1"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Demux2"
	  SrcPort		  2
	  Points		  [85, 0]
	  Branch {
	    Points		    [0, -155]
	    DstBlock		    "To Workspace3"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -10]
	    Branch {
	      Points		      [240, 0; 0, 5]
	      Branch {
		DstBlock		"effect of inertia\n(Nm)"
		DstPort			1
	      }
	      Branch {
		DstBlock		"win=\nwout/SR"
		DstPort			1
	      }
	    }
	    Branch {
	      DstBlock		      "Mux4"
	      DstPort		      2
	    }
	  }
	}
	Line {
	  SrcBlock		  "Tout_a = \nTout-\nTinertia"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    Points		    [0, -35]
	    DstBlock		    "To Workspace6"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Mux3"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "SR"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    Points		    [0, -245]
	    DstBlock		    "TR"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [55, 0]
	    Branch {
	      Points		      [0, 80]
	      Branch {
		Points			[-270, 0]
		DstBlock		"T, shifting"
		DstPort			5
	      }
	      Branch {
		Points			[0, 65]
		Branch {
		  DstBlock		  "To Workspace8"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 105]
		  DstBlock		  "wout=\nwin*SR"
		  DstPort		  1
		}
	      }
	    }
	    Branch {
	      DstBlock		      "win=\nwout/SR"
	      DstPort		      2
	    }
	  }
	}
	Line {
	  SrcBlock		  "Mux4"
	  SrcPort		  1
	  DstBlock		  "SR"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux3"
	  SrcPort		  2
	  Points		  [10, 0]
	  Branch {
	    Points		    [0, -55]
	    Branch {
	      Points		      [-110, 0; 0, -330]
	      DstBlock		      "T, shifting"
	      DstPort		      4
	    }
	    Branch {
	      Points		      [0, -150]
	      DstBlock		      "SR"
	      DstPort		      2
	    }
	  }
	  Branch {
	    Points		    [20, 0]
	    Branch {
	      Points		      [0, 45]
	      DstBlock		      "wout=\nwin*SR"
	      DstPort		      2
	    }
	    Branch {
	      DstBlock		      "To Workspace5"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "Demux2"
	  SrcPort		  1
	  Points		  [5, 0; 0, -55]
	  DstBlock		  "T, shifting"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "T, shifting"
	  SrcPort		  1
	  Points		  [0, 60]
	  Branch {
	    Points		    [25, 0]
	    Branch {
	      Points		      [0, -20]
	      DstBlock		      "To Workspace2"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [210, 0; 0, -105]
	      DstBlock		      "Tin=\nTout,req/TR"
	      DstPort		      2
	    }
	  }
	  Branch {
	    Points		    [0, 100]
	    DstBlock		    "Mux4"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "win=\nwout/SR"
	  SrcPort		  1
	  DstBlock		  ">0\n"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux3"
	  SrcPort		  1
	  DstBlock		  "trq and spd\navailable at\noutput (Nm), (ra"
"d/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Tout=\nTin*TR"
	  SrcPort		  1
	  DstBlock		  "Tout_a = \nTout-\nTinertia"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "trq and spd\navailable at\ninput (Nm), (rad"
"/s)"
	  SrcPort		  1
	  DstBlock		  "Demux3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux3"
	  SrcPort		  1
	  Points		  [20, 0]
	  Branch {
	    DstBlock		    "Tout=\nTin*TR"
	    DstPort		    2
	  }
	  Branch {
	    DstBlock		    "To Workspace4"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "wout=\nwin*SR"
	  SrcPort		  1
	  DstBlock		  ">0."
	  DstPort		  1
	}
	Line {
	  SrcBlock		  ">0."
	  SrcPort		  1
	  Points		  [25, 0]
	  Branch {
	    DstBlock		    "To Workspace7"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -55]
	    DstBlock		    "Mux3"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "From <vc>"
	  SrcPort		  1
	  Points		  [25, 0; 0, 15]
	  DstBlock		  "shifting,\nignore inertia\ntorque in reques"
"t"
	  DstPort		  2
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "planetary\n gearset\n <pg> prius"
      Ports		      [4, 4]
      Position		      [260, 184, 315, 241]
      BackgroundColor	      "yellow"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskDisplay	      "image(imread('bdi_psplit.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      System {
	Name			"planetary\n gearset\n <pg> prius"
	Location		[100, 74, 878, 630]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "torque and speed required\nfrom ring gear\n"
"(Nm), (rad/s)1"
	  Position		  [70, 25, 90, 45]
	  FontName		  "Arial"
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Inport
	  Name			  "torque and speed avail.\nfrom fuel converte"
"r\n(Nm), (rad/s)"
	  Position		  [70, 315, 90, 335]
	  FontName		  "Arial"
	  Port			  "2"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Inport
	  Name			  "torque and speed avail.\nfrom generator\n(N"
"m), (rad/s)"
	  Position		  [70, 395, 90, 415]
	  FontName		  "Arial"
	  Port			  "3"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Inport
	  Name			  "torque and speed available\nfrom motor\n(Nm"
"), (rad/s)1"
	  Position		  [70, 485, 90, 505]
	  FontName		  "Arial"
	  Port			  "4"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux"
	  Ports			  [1, 2]
	  Position		  [145, 386, 165, 419]
	  ShowName		  off
	  FontName		  "Arial"
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux1"
	  Ports			  [1, 2]
	  Position		  [150, 306, 170, 339]
	  ShowName		  off
	  FontName		  "Arial"
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux2"
	  Ports			  [1, 2]
	  Position		  [160, 15, 195, 50]
	  ShowName		  off
	  FontName		  "Arial"
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux3"
	  Ports			  [1, 2]
	  Position		  [145, 476, 165, 509]
	  ShowName		  off
	  FontName		  "Arial"
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  From
	  Name			  "From <vc>"
	  Position		  [450, 21, 535, 39]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_trq_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <vc>1"
	  Position		  [450, 61, 535, 79]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_spd_req"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <vc>"
	  Position		  [305, 15, 405, 35]
	  GotoTag		  "pgs_trq_spd_r"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux"
	  Ports			  [2, 1]
	  Position		  [585, 31, 605, 64]
	  ShowName		  off
	  FontName		  "Arial"
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux1"
	  Ports			  [2, 1]
	  Position		  [560, 136, 580, 169]
	  ShowName		  off
	  FontName		  "Arial"
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux2"
	  Ports			  [2, 1]
	  Position		  [585, 231, 605, 264]
	  ShowName		  off
	  FontName		  "Arial"
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux3"
	  Ports			  [2, 1]
	  Position		  [585, 321, 605, 354]
	  FontName		  "Arial"
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum2"
	  Ports			  [2, 1]
	  Position		  [535, 307, 565, 338]
	  IconShape		  "rectangular"
	  Inputs		  "++"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum5"
	  Ports			  [2, 1]
	  Position		  [445, 142, 475, 173]
	  IconShape		  "rectangular"
	  Inputs		  "+-"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum6"
	  Ports			  [2, 1]
	  Position		  [525, 186, 555, 219]
	  IconShape		  "rectangular"
	  Inputs		  "+-"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Terminator
	  Name			  "Terminator"
	  Position		  [190, 410, 210, 430]
	  ShowName		  off
	}
	Block {
	  BlockType		  Terminator
	  Name			  "Terminator2"
	  Position		  [190, 380, 210, 400]
	  ShowName		  off
	}
	Block {
	  BlockType		  Gain
	  Name			  "engine_to_generator"
	  Position		  [305, 93, 420, 137]
	  NamePlacement		  "alternate"
	  Gain			  "-tx_pg_s/(tx_pg_r+tx_pg_s)"
	  Multiplication	  "Element-wise(K.*u)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Gain
	  Name			  "gain"
	  Position		  [355, 287, 455, 343]
	  NamePlacement		  "alternate"
	  ShowName		  off
	  Gain			  "tx_pg_r/(tx_pg_r+tx_pg_s)"
	  Multiplication	  "Element-wise(K.*u)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Gain
	  Name			  "gain2"
	  Position		  [195, 328, 295, 362]
	  NamePlacement		  "alternate"
	  ShowName		  off
	  Gain			  "1+tx_pg_r/tx_pg_s"
	  Multiplication	  "Element-wise(K.*u)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Gain
	  Name			  "gain5"
	  Position		  [345, 157, 425, 193]
	  NamePlacement		  "alternate"
	  ShowName		  off
	  Gain			  "tx_pg_r/tx_pg_s"
	  Multiplication	  "Element-wise(K.*u)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "spd out"
	  Position		  [120, 86, 195, 104]
	  Orientation		  "left"
	  ShowName		  off
	  FontName		  "Arial"
	  VariableName		  "pg_spd_out_r"
	  MaxDataPoints		  "100000"
	  Decimation		  "1"
	  SampleTime		  "0"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "trq out"
	  Position		  [50, 117, 125, 133]
	  Orientation		  "left"
	  ShowName		  off
	  FontName		  "Arial"
	  VariableName		  "pg_trq_out_r"
	  MaxDataPoints		  "100000"
	  Decimation		  "1"
	  SampleTime		  "0"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  Outport
	  Name			  "torque and speed req'd\nfrom fuel converter"
"\n(Nm), (rad/s)"
	  Position		  [665, 40, 685, 60]
	  FontName		  "Arial"
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Block {
	  BlockType		  Outport
	  Name			  "torque and speed req'd\nfrom generator\n(Nm"
"), (rad/s)"
	  Position		  [665, 145, 685, 165]
	  FontName		  "Arial"
	  Port			  "2"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Block {
	  BlockType		  Outport
	  Name			  "torque and speed req'd\nfrom motor\n(Nm), ("
"rad/s)1"
	  Position		  [670, 240, 690, 260]
	  FontName		  "Arial"
	  Port			  "3"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Block {
	  BlockType		  Outport
	  Name			  "torque and speed available\nto final drive"
"\n(Nm), (rad/s)1"
	  Position		  [670, 330, 690, 350]
	  FontName		  "Arial"
	  Port			  "4"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Line {
	  SrcBlock		  "torque and speed available\nfrom motor\n(Nm"
"), (rad/s)1"
	  SrcPort		  1
	  DstBlock		  "Demux3"
	  DstPort		  1
	}
	Line {
	  Labels		  [0, 0]
	  SrcBlock		  "Demux3"
	  SrcPort		  2
	  Points		  [145, 0]
	  Branch {
	    Points		    [0, -325]
	    DstBlock		    "gain5"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [255, 0]
	    DstBlock		    "Mux3"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "Demux3"
	  SrcPort		  1
	  Points		  [330, 0; 0, -155]
	  DstBlock		  "Sum2"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Mux3"
	  SrcPort		  1
	  DstBlock		  "torque and speed available\nto final drive"
"\n(Nm), (rad/s)1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sum2"
	  SrcPort		  1
	  DstBlock		  "Mux3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sum5"
	  SrcPort		  1
	  DstBlock		  "Mux1"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "engine_to_generator"
	  SrcPort		  1
	  Points		  [80, 0; 0, 30]
	  DstBlock		  "Mux1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux1"
	  SrcPort		  1
	  DstBlock		  "torque and speed req'd\nfrom generator\n(Nm"
"), (rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sum6"
	  SrcPort		  1
	  Points		  [0, 35]
	  DstBlock		  "Mux2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux2"
	  SrcPort		  1
	  DstBlock		  "torque and speed req'd\nfrom motor\n(Nm), ("
"rad/s)1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gain2"
	  SrcPort		  1
	  Points		  [10, 0; 0, -195]
	  DstBlock		  "Sum5"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  2
	  Points		  [0, 10]
	  DstBlock		  "Terminator"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  1
	  Points		  [0, -5]
	  DstBlock		  "Terminator2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "torque and speed avail.\nfrom generator\n(N"
"m), (rad/s)"
	  SrcPort		  1
	  DstBlock		  "Demux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  1
	  Points		  [105, 0]
	  Branch {
	    Points		    [0, -200]
	    DstBlock		    "engine_to_generator"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "gain"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  2
	  Points		  [5, 0]
	  DstBlock		  "gain2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "torque and speed avail.\nfrom fuel converte"
"r\n(Nm), (rad/s)"
	  SrcPort		  1
	  DstBlock		  "Demux1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "gain5"
	  SrcPort		  1
	  DstBlock		  "Sum5"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <vc>"
	  SrcPort		  1
	  Points		  [0, 10]
	  DstBlock		  "Mux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <vc>1"
	  SrcPort		  1
	  Points		  [0, -15]
	  DstBlock		  "Mux"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Mux"
	  SrcPort		  1
	  DstBlock		  "torque and speed req'd\nfrom fuel converter"
"\n(Nm), (rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux2"
	  SrcPort		  1
	  Points		  [20, 0]
	  Branch {
	    Labels		    [2, 0]
	    Points		    [25, 0; 0, 170]
	    DstBlock		    "Sum6"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 100]
	    DstBlock		    "trq out"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Demux2"
	  SrcPort		  2
	  Points		  [10, 0; 0, 55]
	  Branch {
	    Points		    [0, 160]
	    DstBlock		    "Mux2"
	    DstPort		    2
	  }
	  Branch {
	    DstBlock		    "spd out"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "gain"
	  SrcPort		  1
	  Points		  [45, 0]
	  Branch {
	    DstBlock		    "Sum2"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -105]
	    DstBlock		    "Sum6"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "torque and speed required\nfrom ring gear\n"
"(Nm), (rad/s)1"
	  SrcPort		  1
	  Points		  [25, 0]
	  Branch {
	    Points		    [0, -25; 170, 0]
	    DstBlock		    "Goto <vc>"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Demux2"
	    DstPort		    1
	  }
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "torque\ncoupler <tc>"
      Ports		      [3, 3]
      Position		      [60, 51, 100, 99]
      BackgroundColor	      "yellow"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskDisplay	      "image(imread('bdi_tc.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      System {
	Name			"torque\ncoupler <tc>"
	Location		[77, 121, 971, 758]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "torque and speed req'd\nat output side of t"
"orque coupler\n(Nm), (rad/s)"
	  Position		  [75, 30, 95, 50]
	  FontName		  "Arial"
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Inport
	  Name			  "torque and speed avail.\nat main input\n(Nm"
"), (rad/s)"
	  Position		  [75, 230, 95, 250]
	  FontName		  "Arial"
	  Port			  "2"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Inport
	  Name			  "torque and speed avail.\nat motor input to "
"tc\n(Nm), (rad/s)"
	  Position		  [60, 550, 80, 570]
	  FontName		  "Arial"
	  Port			  "3"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Block NOTES"
	  Ports			  []
	  Position		  [650, 665, 706, 705]
	  BackgroundColor	  "green"
	  ShowName		  off
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "disp('Block\\nNOTES')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Block NOTES"
	    Location		    [633, 487, 1083, 797]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Annotation {
	      Position		      [222, 17]
	      VerticalAlignment	      "top"
	      Text		      "This block models a chain- or belt-driv"
"en torque coupler, with three gears:  one each\nfor the motor, main input (th"
"e engine or gearbox), and main output (to the gearbox\nor final drive).  It i"
"ncludes losses in the chain or belt, but leaves inertia effects to be\nconsid"
"ered in the appropriate component.\n\nThe entire torque required out of the t"
"orque coupler (plus losses) is required from the\nengine.  The engine provide"
"s only as much torque as its engine controller (see the\n<vc> block) allows. "
" Any remaining unmet torque request is submitted to the motor,\nwhich meets t"
"he request to the best of its ability.\n\nThe torque converter output speed i"
"s limited by the maximum speeds of both the\nmotor and the engine.\n\nThe los"
"s torque is zero when the gears are not turning, and is applied at the output"
"\n gear.\n\nThe gears connecting the main input and main output to the torque"
" converter's belt\nor chain are assumed to be of the same size, so that main "
"input speed = main output"
	    }
	    Annotation {
	      Position		      [222, 263]
	      Text		      "speed, while the motor's speed may be d"
"ifferent.  The ratio of motor speed to main\noutput speed is stored in the va"
"riable tc_mc_to_fc_spd_ratio."
	    }
	  }
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux"
	  Ports			  [1, 2]
	  Position		  [160, 21, 180, 54]
	  FontName		  "Arial"
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux1"
	  Ports			  [1, 2]
	  Position		  [160, 221, 180, 254]
	  FontName		  "Arial"
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux2"
	  Ports			  [1, 2]
	  Position		  [160, 541, 180, 574]
	  FontName		  "Arial"
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  MinMax
	  Name			  "MinMax"
	  Ports			  [2, 1]
	  Position		  [230, 302, 260, 333]
	  Function		  "min"
	  Inputs		  "2"
	}
	Block {
	  BlockType		  MinMax
	  Name			  "MinMax1"
	  Ports			  [2, 1]
	  Position		  [410, 602, 440, 633]
	  Function		  "min"
	  Inputs		  "2"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux"
	  Ports			  [2, 1]
	  Position		  [500, 21, 520, 54]
	  FontName		  "Arial"
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux1"
	  Ports			  [2, 1]
	  Position		  [525, 206, 545, 239]
	  FontName		  "Arial"
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux2"
	  Ports			  [2, 1]
	  Position		  [515, 541, 535, 574]
	  FontName		  "Arial"
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Product
	  Name			  "Product"
	  Ports			  [1, 1]
	  Position		  [70, 375, 95, 405]
	  ShowName		  off
	  Inputs		  "1"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Product
	  Name			  "Product1"
	  Ports			  [1, 1]
	  Position		  [70, 415, 95, 445]
	  ShowName		  off
	  Inputs		  "1"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace2"
	  Position		  [80, 110, 160, 130]
	  Orientation		  "left"
	  VariableName		  "tc_trq_out_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace3"
	  Position		  [80, 150, 160, 170]
	  Orientation		  "left"
	  VariableName		  "tc_spd_out_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace4"
	  Position		  [505, 460, 585, 480]
	  VariableName		  "tc_trq_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace5"
	  Position		  [505, 500, 585, 520]
	  VariableName		  "tc_spd_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace6"
	  Position		  [160, 400, 240, 420]
	  ShowName		  off
	  VariableName		  "tc_pwr_in_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  Gain
	  Name			  "effect of motor torque\nat output of tc (Nm"
")"
	  Position		  [225, 477, 330, 553]
	  FontName		  "Arial"
	  Gain			  "tc_mc_to_fc_ratio"
	  Multiplication	  "Element-wise(K.*u)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "help"
	  Ports			  []
	  Position		  [606, 664, 637, 707]
	  BackgroundColor	  "yellow"
	  DropShadow		  on
	  ShowName		  off
	  OpenFcn		  "web(['file:\\\\\\' which('torque_coupler.ht"
"m')]);"
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "help"
	    Location		    [203, 331, 569, 538]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "loss\n(Nm)"
	  Ports			  [1, 1]
	  Position		  [240, 47, 270, 83]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "loss\n(Nm)"
	    Location		    [247, 304, 673, 498]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "tc output speed (rad/s)"
	      Position		      [60, 55, 80, 75]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [210, 95, 230, 115]
	      Orientation	      "up"
	      FontName		      "Arial"
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [285, 49, 315, 81]
	      FontName		      "Arial"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "torque coupler loss torque\n(Nm)"
	      Position		      [115, 14, 195, 36]
	      FontName		      "Arial"
	      Value		      "tc_loss"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "drag torque\n(Nm)"
	      Position		      [380, 55, 400, 75]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [0, -15]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "tc output speed (rad/s)"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "drag torque\n(Nm)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "torque coupler loss torque\n(Nm)"
	      SrcPort		      1
	      Points		      [20, 0; 0, 30]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Annotation {
	      Position		      [232, 142]
	      VerticalAlignment	      "top"
	      Text		      "The loss torque is zero when the gears "
"are not turning,\nand is applied at the torque coupler's output gear."
	    }
	  }
	}
	Block {
	  BlockType		  Gain
	  Name			  "speed of output gear\ncorresponding to moto"
"r spd\n(rad/s)"
	  Position		  [220, 590, 340, 660]
	  FontName		  "Arial"
	  Gain			  "1/tc_mc_to_fc_ratio"
	  Multiplication	  "Element-wise(K.*u)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Gain
	  Name			  "speed req'd\nof motor (rad/s)"
	  Position		  [370, 282, 475, 358]
	  FontName		  "Arial"
	  Gain			  "tc_mc_to_fc_ratio"
	  Multiplication	  "Element-wise(K.*u)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Sum
	  Name			  "sum\n"
	  Ports			  [2, 1]
	  Position		  [125, 370, 145, 450]
	  FontName		  "Arial"
	  IconShape		  "rectangular"
	  Inputs		  "++"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Sum
	  Name			  "torque avail.\nat output side\nof tc (Nm)"
	  Ports			  [3, 1]
	  Position		  [415, 434, 435, 506]
	  FontName		  "Arial"
	  IconShape		  "rectangular"
	  Inputs		  "-++"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Sum
	  Name			  "total torque\nreq'd at output\ngear (Nm)"
	  Ports			  [2, 1]
	  Position		  [310, 12, 330, 83]
	  FontName		  "Arial"
	  IconShape		  "rectangular"
	  Inputs		  "++"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Gain
	  Name			  "total torque req'd\nof motor (Nm)"
	  Position		  [350, 180, 470, 250]
	  FontName		  "Arial"
	  Gain			  "1/tc_mc_to_fc_ratio"
	  Multiplication	  "Element-wise(K.*u)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Sum
	  Name			  "unmet\ntorque\nrequest\n(Nm)"
	  Ports			  [2, 1]
	  Position		  [305, 177, 325, 248]
	  FontName		  "Arial"
	  IconShape		  "rectangular"
	  Inputs		  "+-"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Outport
	  Name			  "torque and speed req'd\nat main input to to"
"rque coupler\n(Nm), (rad/s)"
	  Position		  [625, 30, 645, 50]
	  FontName		  "Arial"
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Block {
	  BlockType		  Outport
	  Name			  "torque and speed req'd\nat motor input to t"
"orque coupler\n(Nm), (rad/s)"
	  Position		  [620, 215, 640, 235]
	  FontName		  "Arial"
	  Port			  "2"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Block {
	  BlockType		  Outport
	  Name			  "torque and speed avail.\nat output side of "
"torque coupler\n(Nm), (rad/s)"
	  Position		  [620, 550, 640, 570]
	  FontName		  "Arial"
	  Port			  "3"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Line {
	  SrcBlock		  "MinMax1"
	  SrcPort		  1
	  Points		  [25, 0; 0, -55; 10, 0]
	  Branch {
	    Points		    [0, -55]
	    DstBlock		    "To Workspace5"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Mux2"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "torque avail.\nat output side\nof tc (Nm)"
	  SrcPort		  1
	  Points		  [30, 0]
	  Branch {
	    DstBlock		    "To Workspace4"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 80]
	    DstBlock		    "Mux2"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    Points		    [0, 90]
	    DstBlock		    "To Workspace2"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "total torque\nreq'd at output\ngear (Nm)"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "MinMax"
	  SrcPort		  1
	  Points		  [80, 0]
	  Branch {
	    Points		    [0, 290]
	    DstBlock		    "MinMax1"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "speed req'd\nof motor (rad/s)"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "speed of output gear\ncorresponding to moto"
"r spd\n(rad/s)"
	  SrcPort		  1
	  DstBlock		  "MinMax1"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Demux2"
	  SrcPort		  2
	  Points		  [15, 0; 0, 60]
	  DstBlock		  "speed of output gear\ncorresponding to moto"
"r spd\n(rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux2"
	  SrcPort		  1
	  DstBlock		  "torque and speed avail.\nat output side of "
"torque coupler\n(Nm), (rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "effect of motor torque\nat output of tc (Nm"
")"
	  SrcPort		  1
	  Points		  [45, 0; 0, -20]
	  DstBlock		  "torque avail.\nat output side\nof tc (Nm)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Demux2"
	  SrcPort		  1
	  Points		  [15, 0; 0, -35]
	  DstBlock		  "effect of motor torque\nat output of tc (Nm"
")"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  1
	  Points		  [85, 0]
	  Branch {
	    Points		    [0, 240]
	    DstBlock		    "torque avail.\nat output side\nof tc (Nm)"
	    DstPort		    2
	  }
	  Branch {
	    DstBlock		    "unmet\ntorque\nrequest\n(Nm)"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "loss\n(Nm)"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    Points		    [0, 380]
	    DstBlock		    "torque avail.\nat output side\nof tc (Nm)"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "total torque\nreq'd at output\ngear (Nm)"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "speed req'd\nof motor (rad/s)"
	  SrcPort		  1
	  Points		  [5, 0; 0, -90]
	  DstBlock		  "Mux1"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "total torque req'd\nof motor (Nm)"
	  SrcPort		  1
	  DstBlock		  "Mux1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux1"
	  SrcPort		  1
	  DstBlock		  "torque and speed req'd\nat motor input to t"
"orque coupler\n(Nm), (rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  2
	  Points		  [0, 80]
	  DstBlock		  "MinMax"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "unmet\ntorque\nrequest\n(Nm)"
	  SrcPort		  1
	  DstBlock		  "total torque req'd\nof motor (Nm)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "total torque\nreq'd at output\ngear (Nm)"
	  SrcPort		  1
	  Points		  [25, 0]
	  Branch {
	    Points		    [0, 105; -70, 0]
	    DstBlock		    "unmet\ntorque\nrequest\n(Nm)"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [35, 0; 0, -20]
	    DstBlock		    "Mux"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  2
	  Points		  [25, 0; 0, 20]
	  Branch {
	    Points		    [0, 65]
	    Branch {
	      Points		      [0, 30]
	      Branch {
		DstBlock		"To Workspace3"
		DstPort			1
	      }
	      Branch {
		Points			[0, 150]
		DstBlock		"MinMax"
		DstPort			1
	      }
	    }
	    Branch {
	      Points		      [235, 0; 0, -85]
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	  }
	  Branch {
	    DstBlock		    "loss\n(Nm)"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "torque and speed req'd\nat output side of t"
"orque coupler\n(Nm), (rad/s)"
	  SrcPort		  1
	  DstBlock		  "Demux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux"
	  SrcPort		  1
	  DstBlock		  "torque and speed req'd\nat main input to to"
"rque coupler\n(Nm), (rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "sum\n"
	  SrcPort		  1
	  DstBlock		  "To Workspace6"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Product"
	  SrcPort		  1
	  DstBlock		  "sum\n"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "torque and speed avail.\nat main input\n(Nm"
"), (rad/s)"
	  SrcPort		  1
	  Points		  [45, 0]
	  Branch {
	    DstBlock		    "Demux1"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 115; -105, 0; 0, 35]
	    DstBlock		    "Product"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "torque and speed avail.\nat motor input to "
"tc\n(Nm), (rad/s)"
	  SrcPort		  1
	  Points		  [50, 0]
	  Branch {
	    DstBlock		    "Demux2"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -75; -95, 0; 0, -55]
	    DstBlock		    "Product1"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Product1"
	  SrcPort		  1
	  DstBlock		  "sum\n"
	  DstPort		  2
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "torque\ncoupler <tc>\nDIRECT SPLIT"
      Ports		      [3, 2]
      Position		      [430, 51, 470, 99]
      BackgroundColor	      "yellow"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskDisplay	      "image(imread('bdi_tc.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      System {
	Name			"torque\ncoupler <tc>\nDIRECT SPLIT"
	Location		[19, 86, 911, 883]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "torque and speed req'd\nat output side of t"
"orque coupler\n(Nm), (rad/s)"
	  Position		  [75, 30, 95, 50]
	  FontName		  "Arial"
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Inport
	  Name			  "torque and speed avail.\nat main input\n(Nm"
"), (rad/s)"
	  Position		  [75, 230, 95, 250]
	  FontName		  "Arial"
	  Port			  "2"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Inport
	  Name			  "torque and speed avail.\nat motor input to "
"tc\n(Nm), (rad/s)"
	  Position		  [60, 550, 80, 570]
	  FontName		  "Arial"
	  Port			  "3"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Block NOTES"
	  Ports			  []
	  Position		  [655, 585, 711, 625]
	  BackgroundColor	  "green"
	  ShowName		  off
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "disp('Block\\nNOTES')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Block NOTES"
	    Location		    [637, 483, 1138, 908]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Annotation {
	      Position		      [242, 32]
	      VerticalAlignment	      "top"
	      Text		      "This block generically models a chain- "
"or belt-driven torque coupler, with three gears:  one each\nfor the motor, ma"
"in input (the engine or gearbox), and main output (to the gearbox\nor final d"
"rive).  It includes losses in the chain or belt, but leaves inertia effects t"
"o be\nconsidered in the appropriate component.\n\nThe entire torque required "
"out of the torque coupler (plus losses) is sent to the control\nstrategy. The"
" control strategy <CS> then decides how much the electric motor \nand the ICE"
" must supply. It then sends the EM and ICE separate requests. The 2 sources\n"
"then send their achieved torque signals to the Torque Coupler, where they are"
" added\nand sent to the block immediately before this.\n\nThe torque coupler "
"output speed is limited by the maximum speeds of both the\nmotor and the engi"
"ne. The loss torque is zero when the gears are not \nturning, and is applied "
"at the output gear.\n\nThe gears connecting the main input and main output to"
" the torque converter's belt\nor chain are assumed to be of the same size, so"
" that main input speed = main output\nspeed, while the motor's speed may be d"
"ifferent.  The ratio of motor speed to main\noutput speed is stored in the va"
"riable tc_mc_to_fc_spd_ratio.\n\nNOTE: This block is modeled after the HONDA "
"Insight. It represents a hypothetical Torque\nCoupler, since in the Insight, "
"the EM and ICE are on the same shaft. Change the\nvalues of the ratio and ine"
"rtia if modeling another torque coupler.\n\n"
	    }
	  }
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux"
	  Ports			  [1, 2]
	  Position		  [160, 21, 180, 54]
	  FontName		  "Arial"
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux1"
	  Ports			  [1, 2]
	  Position		  [160, 221, 180, 254]
	  FontName		  "Arial"
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux2"
	  Ports			  [1, 2]
	  Position		  [160, 541, 180, 574]
	  FontName		  "Arial"
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  MinMax
	  Name			  "MinMax"
	  Ports			  [2, 1]
	  Position		  [230, 302, 260, 333]
	  Function		  "min"
	  Inputs		  "2"
	}
	Block {
	  BlockType		  MinMax
	  Name			  "MinMax1"
	  Ports			  [2, 1]
	  Position		  [410, 602, 440, 633]
	  Function		  "min"
	  Inputs		  "2"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux"
	  Ports			  [2, 1]
	  Position		  [500, 21, 520, 54]
	  FontName		  "Arial"
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux2"
	  Ports			  [2, 1]
	  Position		  [530, 336, 550, 369]
	  FontName		  "Arial"
	  Inputs		  "2"
	  DisplayOption		  "none"
	}
	Block {
	  BlockType		  Product
	  Name			  "Product"
	  Ports			  [1, 1]
	  Position		  [70, 375, 95, 405]
	  ShowName		  off
	  Inputs		  "1"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Product
	  Name			  "Product1"
	  Ports			  [1, 1]
	  Position		  [70, 415, 95, 445]
	  ShowName		  off
	  Inputs		  "1"
	  Multiplication	  "Element-wise(.*)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace2"
	  Position		  [80, 110, 160, 130]
	  Orientation		  "left"
	  VariableName		  "tc_trq_out_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace3"
	  Position		  [80, 150, 160, 170]
	  Orientation		  "left"
	  VariableName		  "tc_spd_out_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace4"
	  Position		  [520, 275, 600, 295]
	  VariableName		  "tc_trq_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace5"
	  Position		  [520, 230, 600, 250]
	  VariableName		  "tc_spd_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace6"
	  Position		  [160, 400, 240, 420]
	  ShowName		  off
	  VariableName		  "tc_pwr_in_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  Gain
	  Name			  "effect of motor torque\nat output of tc (Nm"
")"
	  Position		  [225, 477, 330, 553]
	  FontName		  "Arial"
	  Gain			  "tc_mc_to_fc_ratio"
	  Multiplication	  "Element-wise(K.*u)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "help"
	  Ports			  []
	  Position		  [611, 584, 642, 627]
	  BackgroundColor	  "yellow"
	  DropShadow		  on
	  ShowName		  off
	  OpenFcn		  "web(['file:\\\\\\' which('torque_coupler.ht"
"m')]);"
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "image(imread('doc_man.jpg'))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "help"
	    Location		    [203, 331, 569, 538]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "loss\n(Nm)"
	  Ports			  [1, 1]
	  Position		  [335, 102, 365, 138]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "loss\n(Nm)"
	    Location		    [249, 302, 690, 524]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "tc output speed (rad/s)"
	      Position		      [60, 55, 80, 75]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [210, 95, 230, 115]
	      Orientation	      "up"
	      FontName		      "Arial"
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [285, 49, 315, 81]
	      FontName		      "Arial"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "torque coupler loss torque\n(Nm)"
	      Position		      [115, 14, 195, 36]
	      FontName		      "Arial"
	      Value		      "tc_loss"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "drag torque\n(Nm)"
	      Position		      [380, 55, 400, 75]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      SrcBlock		      "torque coupler loss torque\n(Nm)"
	      SrcPort		      1
	      Points		      [20, 0; 0, 30]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "drag torque\n(Nm)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "tc output speed (rad/s)"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [0, -15]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Annotation {
	      Position		      [232, 142]
	      VerticalAlignment	      "top"
	      Text		      "The loss torque is zero when the gears "
"are not turning,\nand is applied at the torque coupler's output gear.\n\nFOR "
"THE INSIGHT, tc_loss==0"
	    }
	  }
	}
	Block {
	  BlockType		  Gain
	  Name			  "speed of output gear\ncorresponding to moto"
"r spd\n(rad/s)"
	  Position		  [220, 590, 340, 660]
	  FontName		  "Arial"
	  Gain			  "1/tc_mc_to_fc_ratio"
	  Multiplication	  "Element-wise(K.*u)"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Sum
	  Name			  "sum\n"
	  Ports			  [2, 1]
	  Position		  [125, 370, 145, 450]
	  FontName		  "Arial"
	  IconShape		  "rectangular"
	  Inputs		  "++"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Sum
	  Name			  "torque avail.\nat output side\nof tc (Nm)"
	  Ports			  [2, 1]
	  Position		  [435, 306, 455, 379]
	  FontName		  "Arial"
	  IconShape		  "rectangular"
	  Inputs		  "++"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Sum
	  Name			  "total torque\nreq'd at output\ngear (Nm)\nL"
"oss==0 for the INSIGHT"
	  Ports			  [2, 1]
	  Position		  [410, 67, 430, 138]
	  FontName		  "Arial"
	  IconShape		  "rectangular"
	  Inputs		  "++"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Outport
	  Name			  "torque and speed req'd\nat main input to to"
"rque coupler\n(Nm), (rad/s)"
	  Position		  [625, 30, 645, 50]
	  FontName		  "Arial"
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Block {
	  BlockType		  Outport
	  Name			  "torque and speed avail.\nat output side of "
"torque coupler\n(Nm), (rad/s)"
	  Position		  [640, 345, 660, 365]
	  FontName		  "Arial"
	  Port			  "2"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "0"
	}
	Line {
	  SrcBlock		  "MinMax1"
	  SrcPort		  1
	  Points		  [35, 0; 0, -260]
	  Branch {
	    Points		    [0, -120]
	    DstBlock		    "To Workspace5"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Mux2"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "speed of output gear\ncorresponding to moto"
"r spd\n(rad/s)"
	  SrcPort		  1
	  DstBlock		  "MinMax1"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Demux2"
	  SrcPort		  2
	  Points		  [15, 0; 0, 60]
	  DstBlock		  "speed of output gear\ncorresponding to moto"
"r spd\n(rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "effect of motor torque\nat output of tc (Nm"
")"
	  SrcPort		  1
	  Points		  [45, 0; 0, -155]
	  DstBlock		  "torque avail.\nat output side\nof tc (Nm)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Demux2"
	  SrcPort		  1
	  Points		  [15, 0; 0, -35]
	  DstBlock		  "effect of motor torque\nat output of tc (Nm"
")"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  2
	  Points		  [10, 0; 0, 80]
	  DstBlock		  "MinMax"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "torque and speed req'd\nat output side of t"
"orque coupler\n(Nm), (rad/s)"
	  SrcPort		  1
	  DstBlock		  "Demux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux"
	  SrcPort		  1
	  DstBlock		  "torque and speed req'd\nat main input to to"
"rque coupler\n(Nm), (rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "sum\n"
	  SrcPort		  1
	  DstBlock		  "To Workspace6"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Product"
	  SrcPort		  1
	  DstBlock		  "sum\n"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "torque and speed avail.\nat main input\n(Nm"
"), (rad/s)"
	  SrcPort		  1
	  Points		  [45, 0]
	  Branch {
	    DstBlock		    "Demux1"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 115; -105, 0; 0, 35]
	    DstBlock		    "Product"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "torque and speed avail.\nat motor input to "
"tc\n(Nm), (rad/s)"
	  SrcPort		  1
	  Points		  [50, 0]
	  Branch {
	    DstBlock		    "Demux2"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -75; -95, 0; 0, -55]
	    DstBlock		    "Product1"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Product1"
	  SrcPort		  1
	  DstBlock		  "sum\n"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  1
	  Points		  [195, 0; 0, 95]
	  DstBlock		  "torque avail.\nat output side\nof tc (Nm)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "MinMax"
	  SrcPort		  1
	  Points		  [80, 0; 0, 290]
	  DstBlock		  "MinMax1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux2"
	  SrcPort		  1
	  DstBlock		  "torque and speed avail.\nat output side of "
"torque coupler\n(Nm), (rad/s)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "torque avail.\nat output side\nof tc (Nm)"
	  SrcPort		  1
	  Points		  [45, 0]
	  Branch {
	    DstBlock		    "To Workspace4"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Mux2"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  2
	  Points		  [25, 0]
	  Branch {
	    Points		    [0, 75]
	    Branch {
	      Points		      [0, 40]
	      Branch {
		DstBlock		"To Workspace3"
		DstPort			1
	      }
	      Branch {
		Points			[0, 150]
		DstBlock		"MinMax"
		DstPort			1
	      }
	    }
	    Branch {
	      DstBlock		      "loss\n(Nm)"
	      DstPort		      1
	    }
	  }
	  Branch {
	    DstBlock		    "Mux"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    Points		    [0, 90]
	    DstBlock		    "To Workspace2"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [205, 0]
	    DstBlock		    "total torque\nreq'd at output\ngear (Nm)"
"\nLoss==0 for the INSIGHT"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "loss\n(Nm)"
	  SrcPort		  1
	  DstBlock		  "total torque\nreq'd at output\ngear (Nm)\nL"
"oss==0 for the INSIGHT"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "total torque\nreq'd at output\ngear (Nm)\nL"
"oss==0 for the INSIGHT"
	  SrcPort		  1
	  Points		  [20, 0; 0, -75]
	  DstBlock		  "Mux"
	  DstPort		  1
	}
	Annotation {
	  Position		  [671, 720]
	  Text			  "FOR THE HONDA INSIGHT\nSince both the Elect"
"ric Motor and the IC Engine are on the same shaft,\nthere is no actual torque"
" coupler. Thus, this is a hypothetical torque coupler used for \ngenerality, "
"with a transmission ratio of 1 (The variable is tc_mc_to_fc_ratio),\nwith zer"
"o losses. In case this model is used for any other configuration, losses\nand"
" a ratio may be added.\n\n"
	}
	Annotation {
	  Position		  [275, 718]
	  Text			  "Ratio = 1 for the HONDA INSIGHT"
	}
	Annotation {
	  Position		  [233, 22]
	  Text			  "Torque"
	}
	Annotation {
	  Position		  [236, 82]
	  Text			  "Speed"
	}
      }
    }
    Annotation {
      Position		      [81, 26]
      ForegroundColor	      "blue"
      BackgroundColor	      "yellow"
      Text		      "Torque Coupler:"
      DropShadow	      on
      FontName		      "Arial"
      FontSize		      14
    }
    Annotation {
      Position		      [56, 161]
      ForegroundColor	      "blue"
      BackgroundColor	      "yellow"
      Text		      "Gearbox:"
      DropShadow	      on
      FontName		      "Arial"
      FontSize		      14
    }
    Annotation {
      Position		      [196, 26]
      ForegroundColor	      "blue"
      BackgroundColor	      "yellow"
      Text		      "Clutch:"
      DropShadow	      on
      FontName		      "Arial"
      FontSize		      14
    }
    Annotation {
      Position		      [116, 306]
      ForegroundColor	      "blue"
      BackgroundColor	      "yellow"
      Text		      "hydraulic torque converter:"
      DropShadow	      on
      FontName		      "Arial"
      FontSize		      14
    }
    Annotation {
      Position		      [76, 476]
      ForegroundColor	      "blue"
      BackgroundColor	      "yellow"
      Text		      "Final Drive:"
      DropShadow	      on
      FontName		      "Arial"
      FontSize		      14
    }
    Annotation {
      Position		      [279, 478]
      Text		      "-----------------------------------------------"
"------------------------------"
    }
    Annotation {
      Position		      [197, 529]
      BackgroundColor	      "darkGreen"
      Text		      "common\nsub-libraries"
    }
  }
}
