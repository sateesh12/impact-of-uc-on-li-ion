Model {
  Name			  "BD_PAR_saber_cosim"
  Version		  4.1.1
  SampleTimeColors	  off
  LibraryLinkDisplay	  "none"
  WideLines		  off
  ShowLineDimensions	  off
  ShowPortDataTypes	  off
  ShowStorageClass	  off
  ExecutionOrder	  off
  RecordCoverage	  off
  CovPath		  "/"
  CovSaveName		  "covdata"
  CovMetricSettings	  "dw"
  CovNameIncrementing	  off
  CovHtmlReporting	  on
  BlockNameDataTip	  off
  BlockParametersDataTip  on
  BlockDescriptionStringDataTip	off
  ToolBar		  on
  StatusBar		  off
  BrowserShowLibraryLinks on
  BrowserLookUnderMasks	  on
  Created		  "Wed May 31 09:08:08 2000"
  UpdateHistory		  "UpdateHistoryNever"
  ModifiedByFormat	  "%<Auto>"
  LastModifiedBy	  "ssprik"
  ModifiedDateFormat	  "%<Auto>"
  LastModifiedDate	  "Wed Sep 24 15:12:53 2003"
  ModelVersionFormat	  "1.%<AutoIncrement:364>"
  ConfigurationManager	  "none"
  SimParamPage		  "Solver"
  StartTime		  "0.0"
  StopTime		  "max(cyc_mph(:,1))"
  SolverMode		  "SingleTasking"
  Solver		  "ode1"
  RelTol		  "1e-3"
  AbsTol		  "1e-3"
  Refine		  "1"
  MaxStep		  "1"
  MinStep		  "auto"
  MaxNumMinSteps	  "-1"
  InitialStep		  "auto"
  FixedStep		  "1"
  MaxOrder		  5
  OutputOption		  "RefineOutputTimes"
  OutputTimes		  "[]"
  LoadExternalInput	  off
  ExternalInput		  "[t, u]"
  SaveTime		  off
  TimeSaveName		  "tout"
  SaveState		  off
  StateSaveName		  "xout"
  SaveOutput		  off
  OutputSaveName	  "yout"
  LoadInitialState	  off
  InitialState		  "xInitial"
  SaveFinalState	  off
  FinalStateName	  "xFinal"
  SaveFormat		  "Array"
  LimitDataPoints	  off
  MaxDataPoints		  "1000"
  Decimation		  "1"
  AlgebraicLoopMsg	  "warning"
  MinStepSizeMsg	  "warning"
  UnconnectedInputMsg	  "warning"
  UnconnectedOutputMsg	  "warning"
  UnconnectedLineMsg	  "none"
  InheritedTsInSrcMsg	  "warning"
  SingleTaskRateTransMsg  "none"
  MultiTaskRateTransMsg	  "error"
  IntegerOverflowMsg	  "warning"
  CheckForMatrixSingularity "none"
  UnnecessaryDatatypeConvMsg "none"
  Int32ToFloatConvMsg	  "warning"
  InvalidFcnCallConnMsg	  "error"
  SignalLabelMismatchMsg  "none"
  LinearizationMsg	  "none"
  VectorMatrixConversionMsg "none"
  SfunCompatibilityCheckMsg "none"
  BlockPriorityViolationMsg "warning"
  ArrayBoundsChecking	  "none"
  ConsistencyChecking	  "none"
  ZeroCross		  on
  Profile		  off
  SimulationMode	  "normal"
  RTWSystemTargetFile	  "grt.tlc"
  RTWInlineParameters	  off
  RTWRetainRTWFile	  off
  RTWTemplateMakefile	  "grt_vc.tmf"
  RTWMakeCommand	  "make_rtw"
  RTWGenerateCodeOnly	  off
  TLCProfiler		  off
  TLCDebug		  off
  TLCCoverage		  off
  AccelSystemTargetFile	  "accel.tlc"
  AccelTemplateMakefile	  "accel_default_tmf"
  AccelMakeCommand	  "make_rtw"
  TryForcingSFcnDF	  off
  ExtModeMexFile	  "ext_comm"
  ExtModeBatchMode	  off
  ExtModeTrigType	  "manual"
  ExtModeTrigMode	  "oneshot"
  ExtModeTrigPort	  "1"
  ExtModeTrigElement	  "any"
  ExtModeTrigDuration	  1000
  ExtModeTrigHoldOff	  0
  ExtModeTrigDelay	  0
  ExtModeTrigDirection	  "rising"
  ExtModeTrigLevel	  0
  ExtModeArchiveMode	  "off"
  ExtModeAutoIncOneShot	  off
  ExtModeIncDirWhenArm	  off
  ExtModeAddSuffixToVar	  off
  ExtModeWriteAllDataToWs off
  ExtModeArmWhenConnect	  off
  ExtModeSkipDownloadWhenConnect off
  ExtModeLogAll		  on
  ExtModeAutoUpdateStatusClock on
  OptimizeBlockIOStorage  on
  BufferReuse		  on
  ParameterPooling	  on
  BlockReductionOpt	  on
  RTWExpressionDepthLimit 5
  BooleanDataType	  off
  BlockDefaults {
    Orientation		    "right"
    ForegroundColor	    "black"
    BackgroundColor	    "white"
    DropShadow		    off
    NamePlacement	    "normal"
    FontName		    "Helvetica"
    FontSize		    10
    FontWeight		    "normal"
    FontAngle		    "normal"
    ShowName		    on
  }
  AnnotationDefaults {
    HorizontalAlignment	    "center"
    VerticalAlignment	    "middle"
    ForegroundColor	    "black"
    BackgroundColor	    "white"
    DropShadow		    off
    FontName		    "Helvetica"
    FontSize		    10
    FontWeight		    "normal"
    FontAngle		    "normal"
  }
  LineDefaults {
    FontName		    "Helvetica"
    FontSize		    9
    FontWeight		    "normal"
    FontAngle		    "normal"
  }
  System {
    Name		    "BD_PAR_saber_cosim"
    Location		    [41, 189, 1119, 540]
    Open		    on
    ModelBrowserVisibility  off
    ModelBrowserWidth	    193
    ScreenColor		    "white"
    PaperOrientation	    "landscape"
    PaperPositionMode	    "auto"
    PaperType		    "usletter"
    PaperUnits		    "inches"
    ZoomFactor		    "100"
    ReportName		    "simulink-default.rpt"
    Block {
      BlockType		      Reference
      Name		      "2 axle -->\n1 driveline\nconverter"
      Ports		      [3, 3]
      Position		      [250, 155, 275, 215]
      SourceBlock	      "lib_wheel/2 axle -->\n1 driveline\nconverter"
      SourceType	      "SubSystem"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
    }
    Block {
      BlockType		      Goto
      Name		      "<cs>"
      Position		      [955, 112, 1020, 128]
      GotoTag		      "ex_cat_tmp"
      TagVisibility	      "global"
    }
    Block {
      BlockType		      SubSystem
      Name		      "<sdo> par"
      Ports		      []
      Position		      [134, 67, 197, 111]
      BackgroundColor	      "yellow"
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskDisplay	      "image(imread('bdi_sdo.jpg'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      System {
	Name			"<sdo> par"
	Location		[7, 125, 611, 982]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Constant
	  Name			  "Constant"
	  Position		  [110, 475, 130, 495]
	  Value			  "1"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  From
	  Name			  "From <vc>"
	  Position		  [380, 352, 435, 378]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <vc>1"
	  Position		  [45, 21, 110, 39]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "key_on"
	}
	Block {
	  BlockType		  From
	  Name			  "From <veh>"
	  Position		  [375, 305, 435, 325]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "mpha"
	}
	Block {
	  BlockType		  From
	  Name			  "From<cs>"
	  Position		  [55, 379, 135, 401]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "engine_on"
	}
	Block {
	  BlockType		  From
	  Name			  "From<cyc>"
	  Position		  [335, 601, 435, 619]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "grade"
	}
	Block {
	  BlockType		  From
	  Name			  "From<cyc>1"
	  Position		  [340, 646, 440, 664]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "elevation"
	}
	Block {
	  BlockType		  From
	  Name			  "From<cyc>2"
	  Position		  [340, 691, 440, 709]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "distance"
	}
	Block {
	  BlockType		  From
	  Name			  "From<fc>"
	  Position		  [40, 283, 135, 307]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_trq_out_a"
	}
	Block {
	  BlockType		  From
	  Name			  "From<fc>1"
	  Position		  [40, 323, 135, 347]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_spd_out_a"
	}
	Block {
	  BlockType		  From
	  Name			  "From<gb>"
	  Position		  [370, 39, 455, 61]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "gear_ratio"
	}
	Block {
	  BlockType		  From
	  Name			  "From<gb>1"
	  Position		  [370, 79, 455, 101]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "gear_number"
	}
	Block {
	  BlockType		  From
	  Name			  "From<main>"
	  Position		  [345, 741, 445, 759]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "time"
	}
	Block {
	  BlockType		  From
	  Name			  "From<vc>/engine control"
	  Position		  [50, 171, 140, 189]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_trq_limited"
	}
	Block {
	  BlockType		  From
	  Name			  "From<vc>/engine control2"
	  Position		  [45, 221, 140, 239]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_spd_limited"
	}
	Block {
	  BlockType		  From
	  Name			  "From<vc>2"
	  Position		  [365, 248, 455, 272]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "clutch_state"
	}
	Block {
	  BlockType		  From
	  Name			  "From<vc>3"
	  Position		  [375, 143, 455, 167]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "cyc_mph_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From<vc>4"
	  Position		  [365, 198, 455, 222]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "bus_voltage"
	}
	Block {
	  BlockType		  From
	  Name			  "From<vc>5"
	  Position		  [50, 433, 135, 457]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "clutch_state"
	}
	Block {
	  BlockType		  From
	  Name			  "From<wh>"
	  Position		  [55, 74, 135, 96]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "slip_limited"
	}
	Block {
	  BlockType		  From
	  Name			  "From<wh>1"
	  Position		  [50, 125, 135, 145]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "brake_limited"
	}
	Block {
	  BlockType		  Logic
	  Name			  "Logical\nOperator"
	  Ports			  [1, 1]
	  Position		  [150, 378, 180, 402]
	  Operator		  "NOT"
	  Inputs		  "1"
	}
	Block {
	  BlockType		  Logic
	  Name			  "Logical\nOperator1"
	  Ports			  [1, 1]
	  Position		  [130, 18, 160, 42]
	  ShowName		  off
	  Operator		  "NOT"
	  Inputs		  "1"
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator"
	  Position		  [155, 437, 185, 468]
	  Operator		  "=="
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace"
	  Position		  [510, 740, 535, 760]
	  FontName		  "Arial"
	  VariableName		  "t"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "0"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace1"
	  Position		  [485, 307, 535, 323]
	  VariableName		  "mpha"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace2"
	  Position		  [490, 356, 540, 374]
	  VariableName		  "shifting"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace3"
	  Position		  [475, 82, 550, 98]
	  VariableName		  "gear_number"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace38"
	  Position		  [180, 74, 270, 96]
	  VariableName		  "lim_wh_traction"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace39"
	  Position		  [475, 42, 550, 58]
	  VariableName		  "gear_ratio"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace4"
	  Position		  [180, 287, 255, 303]
	  ShowName		  off
	  VariableName		  "fc_trq_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace41"
	  Position		  [180, 126, 265, 144]
	  VariableName		  "lim_wh_brake"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace42"
	  Position		  [185, 21, 250, 39]
	  VariableName		  "lim_key_off"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace44"
	  Position		  [485, 144, 545, 166]
	  VariableName		  "cyc_mph_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace5"
	  Position		  [185, 326, 260, 344]
	  ShowName		  off
	  VariableName		  "fc_spd_out_a"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace51"
	  Position		  [185, 170, 255, 190]
	  VariableName		  "lim_fc_trq"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace52"
	  Position		  [485, 200, 545, 220]
	  VariableName		  "pb_voltage"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace54"
	  Position		  [475, 250, 545, 270]
	  VariableName		  "clutch_state"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace55"
	  Position		  [210, 442, 290, 468]
	  VariableName		  "lim_clutch_dis"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace56"
	  Position		  [195, 378, 280, 402]
	  VariableName		  "lim_engine_off"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace57"
	  Position		  [185, 220, 255, 240]
	  VariableName		  "lim_fc_spd"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace59"
	  Position		  [480, 598, 560, 622]
	  VariableName		  "grade"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace60"
	  Position		  [485, 643, 565, 667]
	  VariableName		  "elevation"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace61"
	  Position		  [485, 688, 565, 712]
	  VariableName		  "distance"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Line {
	  SrcBlock		  "From<main>"
	  SrcPort		  1
	  DstBlock		  "To Workspace"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From<fc>1"
	  SrcPort		  1
	  DstBlock		  "To Workspace5"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From<fc>"
	  SrcPort		  1
	  DstBlock		  "To Workspace4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Relational\nOperator"
	  SrcPort		  1
	  DstBlock		  "To Workspace55"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Logical\nOperator"
	  SrcPort		  1
	  DstBlock		  "To Workspace56"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From<cs>"
	  SrcPort		  1
	  DstBlock		  "Logical\nOperator"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant"
	  SrcPort		  1
	  Points		  [5, 0]
	  DstBlock		  "Relational\nOperator"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From<vc>5"
	  SrcPort		  1
	  DstBlock		  "Relational\nOperator"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From<cyc>2"
	  SrcPort		  1
	  DstBlock		  "To Workspace61"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From<cyc>1"
	  SrcPort		  1
	  DstBlock		  "To Workspace60"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From<cyc>"
	  SrcPort		  1
	  DstBlock		  "To Workspace59"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From<wh>1"
	  SrcPort		  1
	  DstBlock		  "To Workspace41"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From<wh>"
	  SrcPort		  1
	  DstBlock		  "To Workspace38"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Logical\nOperator1"
	  SrcPort		  1
	  DstBlock		  "To Workspace42"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <vc>1"
	  SrcPort		  1
	  DstBlock		  "Logical\nOperator1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <vc>"
	  SrcPort		  1
	  DstBlock		  "To Workspace2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <veh>"
	  SrcPort		  1
	  DstBlock		  "To Workspace1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From<vc>2"
	  SrcPort		  1
	  DstBlock		  "To Workspace54"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From<vc>4"
	  SrcPort		  1
	  DstBlock		  "To Workspace52"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From<vc>3"
	  SrcPort		  1
	  DstBlock		  "To Workspace44"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From<gb>"
	  SrcPort		  1
	  DstBlock		  "To Workspace39"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From<vc>/engine control2"
	  SrcPort		  1
	  DstBlock		  "To Workspace57"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From<vc>/engine control"
	  SrcPort		  1
	  DstBlock		  "To Workspace51"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From<gb>1"
	  SrcPort		  1
	  DstBlock		  "To Workspace3"
	  DstPort		  1
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "<vc> par"
      Ports		      [0, 1]
      Position		      [260, 39, 325, 91]
      BackgroundColor	      "yellow"
      ShowPortLabels	      on
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskDisplay	      "image(imread('bdi_vc.jpg'))\n"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      System {
	Name			"<vc> par"
	Location		[86, 103, 1073, 771]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  From
	  Name			  "From <fc>"
	  Position		  [540, 472, 635, 488]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_spd_out_r"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>1"
	  Position		  [185, 61, 275, 79]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>2"
	  Position		  [185, 86, 280, 104]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "eta_gb"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>3"
	  Position		  [180, 120, 275, 140]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "slip_limited"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>4"
	  Position		  [570, 251, 665, 269]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>5"
	  Position		  [540, 452, 635, 468]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>6"
	  Position		  [570, 282, 665, 298]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>7"
	  Position		  [540, 416, 635, 434]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_cl_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From <gb>8"
	  Position		  [570, 317, 665, 333]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "engine_on"
	}
	Block {
	  BlockType		  From
	  Name			  "From <mc>3"
	  Position		  [570, 224, 660, 246]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "shifting"
	}
	Block {
	  BlockType		  From
	  Name			  "From <veh>"
	  Position		  [30, 332, 105, 348]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_prev"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>"
	  Position		  [30, 370, 90, 390]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>1"
	  Position		  [25, 291, 110, 309]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>2"
	  Position		  [50, 477, 160, 493]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_drivetrain_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>3"
	  Position		  [55, 511, 155, 529]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "w_wheel_ach"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>4"
	  Position		  [540, 501, 625, 519]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>5"
	  Position		  [50, 571, 170, 589]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_rear_brake"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>6"
	  Position		  [540, 536, 625, 554]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "clutch_state"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>7"
	  Position		  [55, 445, 115, 465]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>8"
	  Position		  [300, 315, 360, 335]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From <wh>9"
	  Position		  [40, 206, 125, 224]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "v_ave_req"
	}
	Block {
	  BlockType		  From
	  Name			  "From<gb>"
	  Position		  [185, 26, 275, 44]
	  NamePlacement		  "alternate"
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "T_gb_out"
	}
	Block {
	  BlockType		  From
	  Name			  "From<wh>4"
	  Position		  [50, 536, 165, 554]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_max_front_brake"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto"
	  Position		  [370, 47, 445, 73]
	  NamePlacement		  "alternate"
	  GotoTag		  "gear_number"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>"
	  Position		  [760, 435, 825, 455]
	  NamePlacement		  "alternate"
	  GotoTag		  "engine_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc>1"
	  Position		  [755, 470, 835, 490]
	  GotoTag		  "spd_command"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <fc><mc>"
	  Position		  [760, 506, 810, 524]
	  GotoTag		  "key_on"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>"
	  Position		  [355, 85, 445, 105]
	  GotoTag		  "gear_ratio"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <gb>1"
	  Position		  [365, 121, 445, 139]
	  GotoTag		  "shifting"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>"
	  Position		  [780, 236, 850, 254]
	  NamePlacement		  "alternate"
	  GotoTag		  "clutch_state"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <sdo>1"
	  Position		  [460, 311, 545, 329]
	  GotoTag		  "slip_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>"
	  Position		  [455, 240, 540, 260]
	  NamePlacement		  "alternate"
	  GotoTag		  "F_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>1"
	  Position		  [185, 304, 275, 326]
	  GotoTag		  "v_req_limited"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>2"
	  Position		  [205, 341, 295, 359]
	  GotoTag		  "wt_front_axle"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>3"
	  Position		  [250, 481, 335, 499]
	  GotoTag		  "F_front_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>4"
	  Position		  [250, 544, 335, 566]
	  GotoTag		  "F_rear_brake"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto <wh>5"
	  Position		  [235, 205, 345, 225]
	  GotoTag		  "F_front_brake_req"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Ground
	  Name			  "Ground"
	  Position		  [100, 615, 120, 635]
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator"
	  Position		  [405, 302, 435, 333]
	  Operator		  "~="
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  Ports			  [2, 1]
	  Position		  [405, 232, 435, 263]
	  IconShape		  "rectangular"
	  Inputs		  "-+"
	  SaturateOnIntegerOverflow on
	}
	Block {
	  BlockType		  Terminator
	  Name			  "Terminator"
	  Position		  [185, 356, 200, 374]
	  ShowName		  off
	}
	Block {
	  BlockType		  Terminator
	  Name			  "Terminator1"
	  Position		  [185, 379, 200, 401]
	  ShowName		  off
	}
	Block {
	  BlockType		  Reference
	  Name			  "braking strategy"
	  Ports			  [2, 2]
	  Position		  [190, 202, 220, 253]
	  NamePlacement		  "alternate"
	  SourceBlock		  "lib_controls/SubSystem/braking strategy"
	  SourceType		  "SubSystem"
	  ShowPortLabels	  "off"
	  TreatAsAtomicUnit	  "off"
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "config traction control"
	  Ports			  [3, 5]
	  Position		  [130, 277, 165, 403]
	  BackgroundColor	  "darkGreen"
	  ShowName		  off
	  AttributesFormatString  "%<BlockChoice>"
	  ShowPortLabels	  off
	  BlockChoice		  "traction control 2 axle"
	  TemplateBlock		  "lib_controls/SubSystem/config traction cont"
"rol"
	  MemberBlocks		  "traction control 2 axle,traction control J2"
"452 2 axle"
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "config traction control"
	    Location		    [148, 182, 646, 482]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "time-average\nvehicle speed\n req'd (m/"
"s)"
	      Position		      [20, 40, 40, 60]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "vehicle speed at\nbeginning of time\n s"
"tep (m/s)"
	      Position		      [20, 80, 40, 100]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "total tractive\nforce req'd\n(N)"
	      Position		      [20, 120, 40, 140]
	      Port		      "3"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "traction control 2 axle"
	      Ports		      [3, 5]
	      Position		      [100, 40, 140, 80]
	      BackgroundColor	      "darkGreen"
	      SourceBlock	      "lib_controls/SubSystem/traction control"
" 2 axle"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "off"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd force\n(N)"
	      Position		      [200, 40, 220, 60]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "req'd speed\n(m/s)"
	      Position		      [200, 80, 220, 100]
	      Port		      "2"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nfront axle\n(N)"
	      Position		      [200, 120, 220, 140]
	      Port		      "3"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "weight on\nrear axle\n(N)"
	      Position		      [200, 160, 220, 180]
	      Port		      "4"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "front/total \ntraction ratio"
	      Position		      [200, 200, 220, 220]
	      Port		      "5"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Line {
	      SrcBlock		      "time-average\nvehicle speed\n req'd (m/"
"s)"
	      SrcPort		      1
	      Points		      [20, 0; 0, -5]
	      DstBlock		      "traction control 2 axle"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "vehicle speed at\nbeginning of time\n s"
"tep (m/s)"
	      SrcPort		      1
	      Points		      [20, 0; 0, -30]
	      DstBlock		      "traction control 2 axle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "total tractive\nforce req'd\n(N)"
	      SrcPort		      1
	      Points		      [40, 0]
	      DstBlock		      "traction control 2 axle"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "traction control 2 axle"
	      SrcPort		      1
	      Points		      [20, 0; 0, 10]
	      DstBlock		      "req'd force\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control 2 axle"
	      SrcPort		      2
	      Points		      [10, 0; 0, 40]
	      DstBlock		      "req'd speed\n(m/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control 2 axle"
	      SrcPort		      3
	      Points		      [35, 0; 0, 70]
	      DstBlock		      "weight on\nfront axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control 2 axle"
	      SrcPort		      4
	      Points		      [35, 0; 0, 100]
	      DstBlock		      "weight on\nrear axle\n(N)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "traction control 2 axle"
	      SrcPort		      5
	      Points		      [0, 130]
	      DstBlock		      "front/total \ntraction ratio"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "engine on\n(parallel hybrid)"
	  Ports			  [5, 3]
	  Position		  [680, 424, 715, 536]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "engine on\n(parallel hybrid)"
	    Location		    [52, 135, 986, 783]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "trq req'd\nout of clutch\n(N*m)"
	      Position		      [35, 13, 65, 27]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "spd req'd\nout of clutch\n(N*m)1"
	      Position		      [25, 103, 55, 117]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "fc_spd_out_r"
	      Position		      [415, 553, 445, 567]
	      Port		      "3"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "v_ave_req"
	      Position		      [160, 523, 190, 537]
	      Port		      "4"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "clutch\nstate"
	      Position		      [100, 468, 130, 482]
	      Port		      "5"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)"
	      Position		      [165, 271, 225, 289]
	      ShowName		      off
	      Value		      "cs_lo_soc"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)1"
	      Position		      [115, 376, 190, 394]
	      Value		      "cs_off_trq_frac"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)2"
	      Position		      [745, 105, 785, 125]
	      Value		      "fc_on"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "(--)3"
	      Position		      [520, 322, 570, 338]
	      Value		      "fc_tstat"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES1"
	      Ports		      []
	      Position		      [830, 60, 886, 100]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES1"
		Location		[296, 542, 726, 743]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [212, 12]
		  VerticalAlignment	  "top"
		  Text			  "This engine state computer keeps th"
"e engine on if:\n[\n1) key is on, AND\n2) (trq is too high AND speed is too h"
"igh for idle) OR engine is allowed to idle, AND\n3) vehicle speed >= cs_elect"
"ric_launch_spd [ in m/s ], AND\n4) req'd trq > (cs_off_trq_frac * max_trq_at_"
"spd) OR SOC<cs_lo_soc\n]\nOR\n[ engine was previously on AND the transmission"
" is shifting ]\n\nThe last condition is added to prevent the engine from unre"
"alistically\nshutting down for a second or two during a shift."
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [110, 27, 145, 43]
	      ShowName		      off
	      Value		      "1e-3"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      Position		      [325, 77, 395, 93]
	      ShowName		      off
	      Value		      "vc_idle_bool"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant10"
	      Position		      [170, 232, 300, 248]
	      ShowName		      off
	      Value		      "cs_charge_deplete_bool"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant11"
	      Position		      [95, 66, 210, 84]
	      ShowName		      off
	      Value		      "cs_electric_decel_spd"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      Position		      [140, 117, 210, 133]
	      ShowName		      off
	      Value		      "vc_idle_spd"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      Position		      [400, 509, 480, 531]
	      ShowName		      off
	      Value		      "vc_launch_spd"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      Position		      [155, 480, 175, 500]
	      Value		      "1"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      Position		      [215, 535, 235, 555]
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      Position		      [155, 585, 175, 605]
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant7"
	      Position		      [740, 550, 760, 570]
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant8"
	      Position		      [240, 389, 270, 411]
	      Value		      "eps"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant9"
	      Position		      [635, 370, 655, 390]
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <ess>"
	      Position		      [105, 254, 150, 276]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "SOC"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>1"
	      Position		      [105, 148, 190, 172]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "v_req_limited"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>2"
	      Position		      [585, 243, 655, 257]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "shifting"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>3"
	      Position		      [440, 470, 525, 490]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "ess_max_pwr"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <vc>4"
	      Position		      [515, 286, 585, 304]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "fc_clt_tmp"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      Position		      [585, 318, 615, 342]
	      Gain		      "vc_fc_warm_tmp_frac"
	      Multiplication	      "Element-wise(K.*u)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      Position		      [390, 390, 420, 420]
	      Gain		      "tc_mc_to_fc_ratio"
	      Multiplication	      "Element-wise(K.*u)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator10"
	      Ports		      [3, 1]
	      Position		      [340, 511, 370, 569]
	      ShowName		      off
	      Operator		      "AND"
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator11"
	      Ports		      [1, 1]
	      Position		      [350, 235, 380, 255]
	      ShowName		      off
	      Operator		      "NOT"
	      Inputs		      "1"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator12"
	      Ports		      [3, 1]
	      Position		      [810, 154, 840, 186]
	      ShowName		      off
	      Operator		      "AND"
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator13"
	      Ports		      [2, 1]
	      Position		      [685, 298, 715, 327]
	      ShowName		      off
	      Operator		      "AND"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator2"
	      Ports		      [2, 1]
	      Position		      [425, 41, 445, 74]
	      ShowName		      off
	      Operator		      "OR"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator3"
	      Ports		      [2, 1]
	      Position		      [365, 31, 395, 64]
	      ShowName		      off
	      Operator		      "AND"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator4"
	      Ports		      [2, 1]
	      Position		      [285, 21, 305, 54]
	      ShowName		      off
	      Operator		      "OR"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator5"
	      Ports		      [3, 1]
	      Position		      [585, 125, 615, 235]
	      ShowName		      off
	      Operator		      "AND"
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator6"
	      Ports		      [3, 1]
	      Position		      [385, 322, 405, 358]
	      ShowName		      off
	      Operator		      "OR"
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator7"
	      Ports		      [2, 1]
	      Position		      [680, 243, 710, 272]
	      ShowName		      off
	      Operator		      "AND"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator8"
	      Ports		      [5, 1]
	      Position		      [755, 161, 785, 219]
	      ShowName		      off
	      Operator		      "OR"
	      Inputs		      "5"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator9"
	      Ports		      [2, 1]
	      Position		      [520, 160, 545, 195]
	      ShowName		      off
	      Operator		      "OR"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "Look-Up Table"
	      Position		      [205, 175, 235, 205]
	      InputValues	      "[cs_lo_soc cs_hi_soc cs_hi_soc+eps]"
	      OutputValues	      "[cs_electric_launch_spd_lo cs_electric_"
"launch_spd_hi cs_electric_launch_spd_hi]"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Manual \nSwitch"
	      Ports		      [2, 1]
	      Position		      [695, 397, 725, 433]
	      SourceBlock	      "simulink3/Nonlinear/Manual Switch"
	      SourceType	      "Manual Switch"
	      sw		      "1"
	      action		      "0"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      Position		      [685, 340, 715, 370]
	      Orientation	      "left"
	      X0		      "cyc_mph(1,2)>0"
	      InheritSampleTime	      off
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [235, 347, 265, 378]
	      ShowName		      off
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      Ports		      [2, 1]
	      Position		      [465, 427, 495, 458]
	      ShowName		      off
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      Ports		      [2, 1]
	      Position		      [510, 397, 540, 428]
	      ShowName		      off
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      Position		      [275, 153, 300, 182]
	      ShowName		      off
	      Operator		      ">="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      Position		      [290, 324, 315, 351]
	      ShowName		      off
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      Position		      [255, 257, 285, 288]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      Position		      [290, 379, 315, 406]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator4"
	      Position		      [635, 459, 660, 486]
	      ShowName		      off
	      Operator		      ">="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator5"
	      Position		      [635, 289, 660, 316]
	      ShowName		      off
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator6"
	      Position		      [635, 409, 660, 436]
	      ShowName		      off
	      Operator		      ">="
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      Position		      [595, 525, 625, 555]
	      UpperLimit	      "max(fc_map_spd)*fc_spd_scale"
	      LowerLimit	      "vc_idle_spd*vc_idle_bool"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Subsystem"
	      Ports		      [1, 1]
	      Position		      [555, 427, 600, 463]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskType		      "Running Average"
	      MaskDescription	      "Running Average"
	      MaskHelp		      "Output is the average of the last (Aver"
"aging Time) seconds of input."
	      MaskPromptString	      "Averaging Time Steps (#)"
	      MaskStyleString	      "edit"
	      MaskTunableValueString  "on"
	      MaskEnableString	      "on"
	      MaskVisibilityString    "on"
	      MaskToolTipString	      "on"
	      MaskVariables	      "n=@1;"
	      MaskDisplay	      "disp('Running\\nAverage')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "3"
	      System {
		Name			"Subsystem"
		Location		[137, 366, 771, 685]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "in_1"
		  Position		  [50, 110, 70, 130]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  Position		  [75, 210, 95, 230]
		  DisplayTime		  off
		  Decimation		  "10"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  Position		  [75, 274, 115, 296]
		  FontName		  "Arial"
		  Value			  "n"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  Position		  [380, 224, 420, 246]
		  FontName		  "Arial"
		  Value			  "1"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  From
		  Name			  "From <vc>2"
		  Position		  [120, 88, 190, 102]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "shifting"
		}
		Block {
		  BlockType		  Integrator
		  Name			  "Integrator"
		  Ports			  [1, 1]
		  Position		  [295, 100, 315, 120]
		  ExternalReset		  "none"
		  InitialConditionSource  "internal"
		  InitialCondition	  "0"
		  LimitOutput		  off
		  UpperSaturationLimit	  "inf"
		  LowerSaturationLimit	  "-inf"
		  ShowSaturationPort	  off
		  ShowStatePort		  off
		  AbsoluteTolerance	  "auto"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  Position		  [135, 235, 165, 265]
		  X0			  "-0.1"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  Position		  [170, 30, 200, 60]
		  X0			  "0"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  Ports			  [2, 1]
		  Position		  [505, 109, 525, 136]
		  Inputs		  "*/"
		  Multiplication	  "Element-wise(.*)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  Ports			  [2, 1]
		  Position		  [210, 271, 230, 289]
		  Inputs		  "2"
		  Multiplication	  "Element-wise(.*)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  Position		  [250, 187, 280, 218]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [440, 105, 460, 125]
		  IconShape		  "rectangular"
		  Inputs		  "+-"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  Ports			  [2, 1]
		  Position		  [170, 210, 190, 230]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|+-"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  Position		  [305, 190, 335, 220]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  Position		  [450, 190, 480, 220]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch2"
		  Position		  [235, 95, 265, 125]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch3"
		  Position		  [115, 30, 145, 60]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  VariableTransportDelay
		  Name			  "Variable\nTransport Delay"
		  Position		  [375, 137, 405, 168]
		  MaximumDelay		  "n"
		  InitialInput		  "0"
		  MaximumPoints		  "1024"
		  PadeOrder		  "0"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  Position		  [550, 115, 570, 135]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Variable\nTransport Delay"
		  SrcPort		  1
		  Points		  [15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Integrator"
		  SrcPort		  1
		  Points		  [25, 0]
		  Branch {
		    Points		    [0, 35]
		    DstBlock		    "Variable\nTransport Delay"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 30]
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -25]
		    Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -15; 175, 0]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  Points		  [0, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [55, 0]
		    DstBlock		    "Switch"
		    DstPort		    3
		  }
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [0, -45]
		    DstBlock		    "Variable\nTransport Delay"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [80, 0]
		    Branch {
		    DstBlock		    "Switch1"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, -10]
		    DstBlock		    "Switch1"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [0, -20]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  Points		  [0, -75]
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Switch2"
		  SrcPort		  1
		  DstBlock		  "Integrator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch3"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "in_1"
		  SrcPort		  1
		  Points		  [25, 0]
		  Branch {
		    DstBlock		    "Switch2"
		    DstPort		    3
		  }
		  Branch {
		    DstBlock		    "Switch3"
		    DstPort		    3
		  }
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    DstBlock		    "Switch2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -30; -120, 0]
		    DstBlock		    "Switch3"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "From <vc>2"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    Points		    [0, 15]
		    DstBlock		    "Switch2"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, -15; -120, 0; 0, -35]
		    DstBlock		    "Switch3"
		    DstPort		    2
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [515, 513, 545, 567]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      Position		      [810, 534, 835, 566]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch3"
	      Position		      [400, 239, 430, 281]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch4"
	      Position		      [445, 294, 475, 336]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "T>~0"
	      Position		      [170, 12, 200, 43]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To Workspace"
	      Position		      [325, 181, 480, 199]
	      VariableName	      "cs_electric_launch_spd_probe"
	      MaxDataPoints	      "inf"
	      Decimation	      "1"
	      SampleTime	      "-1"
	      SaveFormat	      "Array"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch\ndisengaged"
	      Position		      [210, 467, 240, 498]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "key_on"
	      Ports		      [0, 1]
	      Position		      [575, 29, 630, 61]
	      NamePlacement	      "alternate"
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskType		      "Repeating table"
	      MaskDescription	      "Repeating table.\nEnter values of time "
"and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table. Time valu"
"es should be monotonically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskInitialization      "period = max(@1); t = @1; y = @2;"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "vc_key_on(:,1)|vc_key_on(:,2)"
	      MaskVariableAliases     ","
	      Port {
		PortNumber		1
		Name			"ignition key is on"
		TestPoint		off
		LinearAnalysisOutput	off
		LinearAnalysisInput	off
		RTWStorageClass		"Auto"
	      }
	      System {
		Name			"key_on"
		Location		[5, 42, 410, 213]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  Position		  [45, 60, 65, 80]
		  DisplayTime		  off
		  Decimation		  "10"
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  Position		  [110, 60, 150, 80]
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  Position		  [210, 58, 250, 82]
		  InputValues		  "t"
		  OutputValues		  "y"
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  Position		  [285, 60, 305, 80]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  DstBlock		  "Fcn1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max_torque\n lookup"
	      Position		      [115, 343, 145, 367]
	      NamePlacement	      "alternate"
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      OutputValues	      "fc_max_trq*fc_trq_scale"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "max_torque\n lookup1"
	      Position		      [455, 393, 485, 417]
	      NamePlacement	      "alternate"
	      InputValues	      "mc_map_spd*mc_spd_scale"
	      OutputValues	      "mc_max_trq*mc_trq_scale*mc_overtrq_fact"
"or"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "moving next\ntime"
	      Position		      [210, 572, 240, 603]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "not\nmoving"
	      Position		      [275, 522, 305, 553]
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "repeated cycle:\n speed required at\nen"
"d of NEXT step"
	      Ports		      [0, 1]
	      Position		      [70, 542, 105, 578]
	      FontName		      "Arial"
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskType		      "Forward looking repeating table"
	      MaskDescription	      "Forward looking repeating table.\nEnter"
" values of time and output for first cycle."
	      MaskHelp		      "Repeats cycle given in table with a one"
" time step forward offset. Time values should be monotonically increasing."
	      MaskPromptString	      "Time values:|Output values:"
	      MaskStyleString	      "edit,edit"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskVariables	      "t=@1;y=@2;"
	      MaskInitialization      "period = max(t);"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "cyc_mph(:,1)|cyc_mph(:,2)"
	      MaskVariableAliases     ","
	      System {
		Name			"repeated cycle:\n speed required at\n"
"end of NEXT step"
		Location		[57, 72, 432, 234]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  Position		  [45, 60, 65, 80]
		  DisplayTime		  off
		  Decimation		  "10"
		}
		Block {
		  BlockType		  Fcn
		  Name			  "Fcn1"
		  Position		  [110, 25, 150, 45]
		  ForegroundColor	  "green"
		  Expr			  "rem(u[1],period)"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "Look-Up Table"
		  Position		  [260, 33, 300, 57]
		  InputValues		  "t"
		  OutputValues		  "y"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  Position		  [90, 85, 120, 115]
		  ForegroundColor	  "green"
		  X0			  "-0.1"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [150, 62, 180, 93]
		  ForegroundColor	  "green"
		  IconShape		  "rectangular"
		  Inputs		  "+-"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  Ports			  [2, 1]
		  Position		  [205, 26, 235, 59]
		  ForegroundColor	  "green"
		  IconShape		  "rectangular"
		  Inputs		  "++"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  Position		  [335, 35, 355, 55]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Look-Up Table"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Look-Up Table"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Fcn1"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0; 0, -15]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [0, -35]
		    DstBlock		    "Fcn1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "spd>set point"
	      Position		      [235, 52, 265, 83]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "w>idle"
	      Position		      [275, 102, 305, 133]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "engine on"
	      Position		      [875, 163, 905, 177]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "spd command\n (rad/s)"
	      Position		      [865, 543, 895, 557]
	      Port		      "2"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "key on"
	      Position		      [765, 38, 795, 52]
	      Port		      "3"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Line {
	      SrcBlock		      "Subsystem"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"Relational\nOperator6"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Relational\nOperator4"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      Points		      [70, 0; 0, 15]
	      DstBlock		      "Relational\nOperator6"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <vc>3"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <vc>1"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		DstBlock		"spd>set point"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "T>~0"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator4"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "spd>set point"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant11"
	      SrcPort		      1
	      DstBlock		      "spd>set point"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "spd req'd\nout of clutch\n(N*m)1"
	      SrcPort		      1
	      Points		      [35, 0]
	      Branch {
		DstBlock		"w>idle"
		DstPort			1
	      }
	      Branch {
		Points			[0, 245]
		Branch {
		  Points		  [0, 80; 230, 0]
		  Branch {
		    Points		    [0, -30]
		    DstBlock		    "Gain1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Product2"
		    DstPort		    1
		  }
		}
		Branch {
		  DstBlock		  "max_torque\n lookup"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "w>idle"
	      SrcPort		      1
	      Points		      [0, -65]
	      DstBlock		      "Logical\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "w>idle"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant9"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Manual \nSwitch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Manual \nSwitch"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      5
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator6"
	      SrcPort		      1
	      DstBlock		      "Manual \nSwitch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		Points			[0, 15]
		DstBlock		"Product3"
		DstPort			2
	      }
	      Branch {
		DstBlock		"max_torque\n lookup1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "max_torque\n lookup1"
	      SrcPort		      1
	      DstBlock		      "Product3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      Points		      [50, 0]
	      DstBlock		      "Logical\nOperator6"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "Subsystem"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nstate"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      DstBlock		      "not\nmoving"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "v_ave_req"
	      SrcPort		      1
	      DstBlock		      "not\nmoving"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "not\nmoving"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator10"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "moving next\ntime"
	      SrcPort		      1
	      Points		      [80, 0]
	      DstBlock		      "Logical\nOperator10"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "clutch\ndisengaged"
	      SrcPort		      1
	      Points		      [80, 0]
	      DstBlock		      "Logical\nOperator10"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      DstBlock		      "moving next\ntime"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "repeated cycle:\n speed required at\nen"
"d of NEXT step"
	      SrcPort		      1
	      Points		      [75, 0; 0, 20]
	      DstBlock		      "moving next\ntime"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant7"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "spd command\n (rad/s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "fc_spd_out_r"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator10"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator4"
	      SrcPort		      1
	      Points		      [70, 0; 0, -275]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "(--)"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <ess>"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		Points			[0, -75]
		DstBlock		"Look-Up Table"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator11"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		Points			[0, 55]
		DstBlock		"Logical\nOperator6"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Switch3"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "Constant10"
	      SrcPort		      1
	      Points		      [0, 20; 25, 0]
	      Branch {
		Points			[0, -15]
		DstBlock		"Logical\nOperator11"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Switch3"
		DstPort			2
	      }
	      Branch {
		Points			[0, 40]
		Branch {
		  Points		  [0, 15]
		  DstBlock		  "Switch4"
		  DstPort		  2
		}
		Branch {
		  DstBlock		  "Switch4"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Look-Up Table"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"To Workspace"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch4"
	      SrcPort		      1
	      Points		      [30, 0; 0, -100]
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator9"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator2"
	      SrcPort		      1
	      Points		      [105, 0; 0, 85]
	      DstBlock		      "Logical\nOperator5"
	      DstPort		      1
	    }
	    Line {
	      Name		      "ignition key is on"
	      Labels		      [0, 0]
	      SrcBlock		      "key_on"
	      SrcPort		      1
	      Points		      [85, 0]
	      Branch {
		Points			[0, 105; 70, 0; 0, 20]
		DstBlock		"Logical\nOperator12"
		DstPort			2
	      }
	      Branch {
		DstBlock		"key on"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator8"
	      SrcPort		      1
	      Points		      [0, -10]
	      DstBlock		      "Logical\nOperator12"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "(--)3"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator13"
	      SrcPort		      1
	      Points		      [10, 0; 0, -125]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From <vc>4"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator5"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator13"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      Points		      [-15, 0; 0, -35]
	      Branch {
		DstBlock		"Logical\nOperator13"
		DstPort			2
	      }
	      Branch {
		DstBlock		"Logical\nOperator7"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator6"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator5"
	      SrcPort		      1
	      Points		      [0, -10]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator3"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "trq req'd\nout of clutch\n(N*m)"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, 310]
		Branch {
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 120]
		  DstBlock		  "Product2"
		  DstPort		  2
		}
	      }
	      Branch {
		DstBlock		"T>~0"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator7"
	      SrcPort		      1
	      Points		      [10, 0; 0, -80]
	      DstBlock		      "Logical\nOperator8"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From <vc>2"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator7"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      DstBlock		      "T>~0"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch3"
	      SrcPort		      1
	      Points		      [70, 0]
	      DstBlock		      "Logical\nOperator9"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator6"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Switch4"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant8"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "(--)1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"Relational\nOperator3"
		DstPort			1
	      }
	      Branch {
		Points			[0, -15]
		DstBlock		"Product"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "max_torque\n lookup"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "(--)2"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator12"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator12"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		DstBlock		"engine on"
		DstPort			1
	      }
	      Branch {
		Points			[0, 185]
		Branch {
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 165; -55, 0]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
	      }
	    }
	    Annotation {
	      Position		      [800, 394]
	      Text		      "engine not suppressed\nif mc insufficie"
"nt "
	    }
	    Annotation {
	      Position		      [666, 217]
	      Text		      "engine not shut \ndown during shifts"
	    }
	    Annotation {
	      Position		      [578, 374]
	      Text		      "engine on if engine on \npreviously and"
" engine \nnot warm"
	    }
	    Annotation {
	      Position		      [496, 72]
	      Text		      "engine not shut off\n rather than idle"
	    }
	    Annotation {
	      Position		      [423, 147]
	      Text		      "engine not \nsuppressed for\nelectric l"
"aunch"
	    }
	    Annotation {
	      Position		      [740, 494]
	      Text		      "engine not suppressed if \ness insuffic"
"ient "
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "front and rear\nbrake controller\n(achievab"
"le)"
	  Ports			  [6, 2]
	  Position		  [195, 456, 230, 584]
	  SourceBlock		  "lib_controls/SubSystem/front and rear\nbrak"
"e controller\n(achievable)"
	  SourceType		  "SubSystem"
	  ShowPortLabels	  "off"
	  TreatAsAtomicUnit	  "off"
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "parallel clutch\ncontrol"
	  Ports			  [4, 1]
	  Position		  [715, 240, 750, 320]
	  ForegroundColor	  "gray"
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "parallel clutch\ncontrol"
	    Location		    [87, 106, 1000, 728]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "shifting"
	      Position		      [30, 18, 60, 32]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_in_r"
	      Position		      [30, 58, 60, 72]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_in_r"
	      Position		      [25, 168, 55, 182]
	      Port		      "3"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "engine on"
	      Position		      [30, 388, 60, 402]
	      Port		      "4"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [835, 565, 891, 605]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[315, 744, 773, 944]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		  Text			  "This clutch control block determine"
"s the clutch state given the req'd clutch output torque \nand speed (labelled"
" as gearbox input torque and speed), and the gear number history.\n          "
"                conditions                                                   "
"                    clutch state\ngear is being shifted OR (trq <~ 0 AND (eng"
"ine is                                     1 == disengaged\nclutched to avoid"
" compression braking OR spd < idle))                                         "
"                     \n\n(trq >~ 0) AND (spd < launch speed) AND clutch      "
"                                 2 == slipping     \nwas not engaged during p"
"revious time step                                                            "
"     \n\nneither of above sets of conditions are met                         "
"                 3 == engaged\n\nBut the clutch is always disengaged when the"
" engine is off or was off within the past 0.5 s."
		}
	      }
	    }
	    Block {
	      BlockType		      Clock
	      Name		      "Clock"
	      Position		      [40, 535, 60, 555]
	      DisplayTime	      off
	      Decimation	      "10"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [145, 83, 180, 107]
	      Value		      "1e-3"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      Position		      [145, 124, 225, 146]
	      Value		      "vc_clutch_bool"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      Position		      [145, 189, 225, 211]
	      Value		      "vc_idle_spd"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      Position		      [145, 255, 180, 275]
	      Value		      "1e-3"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      Position		      [145, 319, 225, 341]
	      Value		      "vc_launch_spd"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      Position		      [570, 355, 605, 375]
	      Orientation	      "left"
	      Value		      "2.5"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      Position		      [790, 175, 810, 195]
	      Orientation	      "left"
	      Value		      "1"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Fcn
	      Name		      "Fcn:\n1 if clutch disengaged\n2 if clut"
"ch slipping\n3 if clutch engaged"
	      Position		      [660, 110, 720, 140]
	      Expr		      "u[1]+2*u[2]*(1-u[1])*(1-u[3])+3*u[3]*(1"
"-u[1])"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      Ports		      [2, 1]
	      Position		      [380, 67, 410, 98]
	      Operator		      "AND"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      Ports		      [2, 1]
	      Position		      [315, 127, 345, 158]
	      Operator		      "OR"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Manual Switch"
	      Ports		      [2, 1]
	      Position		      [410, 387, 440, 423]
	      ForegroundColor	      "gray"
	      SourceBlock	      "simulink3/Nonlinear/Manual Switch"
	      SourceType	      "Manual Switch"
	      sw		      "1"
	      action		      "0"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory"
	      Position		      [570, 300, 600, 330]
	      Orientation	      "left"
	      X0		      "1+(2*(cyc_mph(1,2)>0))"
	      InheritSampleTime	      off
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory1"
	      Position		      [170, 415, 200, 445]
	      X0		      "cyc_mph(1,2)>0"
	      InheritSampleTime	      off
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory2"
	      Position		      [170, 565, 200, 595]
	      X0		      "-1"
	      InheritSampleTime	      off
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      Ports		      [3, 1]
	      Position		      [590, 107, 625, 143]
	      Inputs		      "3"
	      DisplayOption	      "none"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      Position		      [300, 57, 330, 88]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      Position		      [260, 177, 290, 208]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      Position		      [260, 242, 290, 273]
	      Operator		      ">"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      Position		      [260, 307, 290, 338]
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [235, 537, 265, 568]
	      IconShape		      "rectangular"
	      Inputs		      "+-"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [790, 120, 820, 150]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      Position		      [330, 400, 360, 430]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      TransportDelay
	      Name		      "Transport\nDelay"
	      Position		      [170, 475, 200, 505]
	      DelayTime		      "0.2"
	      InitialInput	      "0"
	      BufferSize	      "1024"
	      PadeOrder		      "0"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\ndisengaged"
	      Ports		      [2, 1]
	      Position		      [450, 17, 480, 48]
	      Operator		      "OR"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nengaged"
	      Ports		      [2, 1]
	      Position		      [520, 117, 550, 148]
	      Operator		      "NOR"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping"
	      Ports		      [3, 1]
	      Position		      [380, 254, 410, 286]
	      Operator		      "AND"
	      Inputs		      "3"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping1"
	      Ports		      [2, 1]
	      Position		      [235, 386, 265, 419]
	      Operator		      "AND"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "clutch\nslipping2"
	      Ports		      [2, 1]
	      Position		      [235, 466, 265, 499]
	      Operator		      "AND"
	      Inputs		      "2"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "clutch was NOT\nfully engaged\nduring l"
"ast time step"
	      Position		      [475, 305, 510, 340]
	      Orientation	      "left"
	      Operator		      "<"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "gearbox speed\nestimator"
	      Ports		      [1, 1]
	      Position		      [80, 160, 110, 190]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"gearbox speed\nestimator"
		Location		[224, 217, 812, 726]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_in_r\nif no gear change"
		  Position		  [45, 18, 75, 32]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  Ports			  []
		  Position		  [515, 345, 571, 385]
		  BackgroundColor	  "green"
		  ShowName		  off
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [497, 485, 832, 570]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Annotation {
		    Position		    [167, 41]
		    Text		    "The requested engine speed is rep"
"laced by an estimate of the\nengine's previous speed whenever the vehicle mis"
"sed the trace\n by more than 1 mph on the last time step."
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  Position		  [165, 240, 185, 260]
		  Orientation		  "left"
		  Value			  "eps"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  Position		  [315, 165, 335, 185]
		  Orientation		  "left"
		  Value			  "0"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  Position		  [230, 360, 250, 380]
		  Orientation		  "left"
		  Value			  "1"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  Position		  [230, 460, 250, 480]
		  Orientation		  "left"
		  Value			  "0.11"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  From
		  Name			  "From"
		  Position		  [195, 40, 285, 70]
		  Orientation		  "left"
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "gb_spd_in_a"
		}
		Block {
		  BlockType		  From
		  Name			  "From <cyc>"
		  Position		  [30, 304, 120, 336]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "cyc_mph_r"
		}
		Block {
		  BlockType		  From
		  Name			  "From <veh>"
		  Position		  [30, 99, 85, 131]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "mpha"
		}
		Block {
		  BlockType		  From
		  Name			  "From <wh>/\ntire slip model (m/s)"
		  Position		  [30, 184, 120, 216]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "veh_spd_a_rec"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  Position		  [150, 97, 190, 133]
		  Gain			  "0.447"
		  Multiplication	  "Element-wise(K.*u)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical"
		  Ports			  [2, 1]
		  Position		  [375, 317, 405, 348]
		  Operator		  "AND"
		  Inputs		  "2"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  Position		  [370, 115, 400, 145]
		  X0			  "cyc_mph(1,2)*0.447/wh_radius*fd_rat"
"io*gb_ratio(gb_num_init)"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  Position		  [310, 310, 340, 340]
		  X0			  "1"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  Ports			  [3, 1]
		  Position		  [215, 99, 245, 131]
		  Inputs		  "**/"
		  Multiplication	  "Element-wise(.*)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational"
		  Position		  [225, 307, 255, 338]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational1"
		  Position		  [225, 412, 255, 443]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [160, 192, 190, 223]
		  IconShape		  "rectangular"
		  Inputs		  "++"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  Ports			  [2, 1]
		  Position		  [160, 297, 190, 328]
		  IconShape		  "rectangular"
		  Inputs		  "-+"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  Position		  [310, 110, 340, 140]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  Position		  [445, 120, 475, 150]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "dt"
		  Ports			  [0, 1]
		  Position		  [165, 408, 185, 432]
		  ShowPortLabels	  off
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "dt"
		    Location		    [240, 561, 480, 665]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    Position		    [25, 25, 45, 45]
		    DisplayTime		    off
		    Decimation		    "10"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    Position		    [75, 53, 105, 77]
		    X0			    "-1"
		    InheritSampleTime	    off
		    RTWStateStorageClass    "Auto"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum4"
		    Ports		    [2, 1]
		    Position		    [130, 27, 160, 58]
		    IconShape		    "rectangular"
		    Inputs		    "+-"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    Position		    [185, 38, 215, 52]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Sum4"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Sum4"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Sum4"
		    DstPort		    1
		    }
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  Position		  [545, 128, 575, 142]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "[]"
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Product"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  Labels		  [1, 0]
		  SrcBlock		  "From <wh>/\ntire slip model (m/s)"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -25; 155, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [0, -5]
		  DstBlock		  "Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <cyc>"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <veh>"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    DstBlock		    "Gain"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 190]
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Relational"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gb_spd_in_r\nif no gear change"
		  SrcPort		  1
		  Points		  [350, 0]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "From"
		  SrcPort		  1
		  Points		  [0, 50]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational1"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Logical"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical"
		  SrcPort		  1
		  Points		  [10, 0; 0, -200]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "dt"
		  SrcPort		  1
		  DstBlock		  "Relational1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "clutch\nstate"
	      Position		      [855, 128, 885, 142]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, 180]
		DstBlock		"Memory"
		DstPort			1
	      }
	      Branch {
		DstBlock		"clutch\nstate"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Fcn:\n1 if clutch disengaged\n2 if clut"
"ch slipping\n3 if clutch engaged"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Manual Switch"
	      SrcPort		      1
	      Points		      [315, 0; 0, -270]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      DstBlock		      "Manual Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gearbox speed\nestimator"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Points			[0, 140]
		DstBlock		"Relational\nOperator3"
		DstPort			1
	      }
	      Branch {
		Points			[105, 0; 0, 10]
		DstBlock		"Relational\nOperator1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "gb_spd_in_r"
	      SrcPort		      1
	      DstBlock		      "gearbox speed\nestimator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      Points		      [45, 0]
	      DstBlock		      "Switch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory2"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Clock"
	      SrcPort		      1
	      Points		      [80, 0]
	      Branch {
		Points			[0, 35]
		DstBlock		"Memory2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Sum"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping2"
	      SrcPort		      1
	      Points		      [25, 0; 0, -60]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Transport\nDelay"
	      SrcPort		      1
	      DstBlock		      "clutch\nslipping2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping1"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "clutch\nslipping1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "engine on"
	      SrcPort		      1
	      Points		      [80, 0]
	      Branch {
		Points			[0, -20; 250, 0]
		DstBlock		"Manual Switch"
		DstPort			1
	      }
	      Branch {
		Points			[0, 35]
		Branch {
		  Points		  [0, 30]
		  Branch {
		    Points		    [75, 0]
		    DstBlock		    "clutch\nslipping2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 30]
		    DstBlock		    "Transport\nDelay"
		    DstPort		    1
		  }
		}
		Branch {
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
	      }
	      Branch {
		DstBlock		"clutch\nslipping1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      DstBlock		      "Fcn:\n1 if clutch disengaged\n2 if clut"
"ch slipping\n3 if clutch engaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "clutch\nengaged"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "clutch\ndisengaged"
	      SrcPort		      1
	      Points		      [10, 0; 0, 40]
	      Branch {
		Points			[0, 50]
		DstBlock		"clutch\nengaged"
		DstPort			1
	      }
	      Branch {
		Points			[80, 0]
		DstBlock		"Mux"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      DstBlock		      "clutch\nslipping"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "clutch\nslipping"
	      SrcPort		      1
	      Points		      [80, 0; 0, -95]
	      Branch {
		Points			[0, -35]
		DstBlock		"clutch\nengaged"
		DstPort			2
	      }
	      Branch {
		Points			[80, 0]
		DstBlock		"Mux"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      Points		      [30, 0; 0, -55]
	      DstBlock		      "clutch\nslipping"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory"
	      SrcPort		      1
	      DstBlock		      "clutch was NOT\nfully engaged\nduring l"
"ast time step"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      Points		      [-30, 0; 0, -35]
	      DstBlock		      "clutch was NOT\nfully engaged\nduring l"
"ast time step"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "clutch was NOT\nfully engaged\nduring l"
"ast time step"
	      SrcPort		      1
	      Points		      [-120, 0; 0, -45]
	      DstBlock		      "clutch\nslipping"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [90, 0; 0, -15]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gb_trq_in_r"
	      SrcPort		      1
	      Points		      [70, 0]
	      Branch {
		Points			[0, 185]
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      Points		      [15, 0; 0, -45]
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "shifting"
	      SrcPort		      1
	      DstBlock		      "clutch\ndisengaged"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      Points		      [-15, 0; 0, -40]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "pre-TX parallel\ngearbox control"
	  Ports			  [4, 3]
	  Position		  [300, 42, 335, 143]
	  FontName		  "Arial"
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "pre-TX parallel\ngearbox control"
	    Location		    [12, 74, 1189, 776]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "gb_trq_out_r"
	      Position		      [45, 75, 65, 95]
	      FontName		      "Arial"
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "gb_spd_out_r"
	      Position		      [45, 320, 65, 340]
	      FontName		      "Arial"
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "prev.\nPout/Pin"
	      Position		      [45, 175, 65, 195]
	      FontName		      "Arial"
	      Port		      "3"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "tires are at\ntraction limit"
	      Position		      [45, 20, 65, 40]
	      FontName		      "Arial"
	      Port		      "4"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Block NOTES"
	      Ports		      []
	      Position		      [890, 605, 946, 645]
	      BackgroundColor	      "green"
	      ShowName		      off
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskDisplay	      "disp('Block\\nNOTES')"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Block NOTES"
		Location		[229, 259, 687, 388]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Annotation {
		  Position		  [227, 12]
		  VerticalAlignment	  "top"
		  Text			  "This gearbox control block computes"
" the current gear number given the gearbox's\nreq'd output torque and speed a"
"nd an estimate its efficiency.  Upshifts occur, given a\ncertain engine speed"
",  when the estimated engine load falls below the upshift curve\nin engine sp"
"eed/load space, and downshifts likewise occur when estimated engine\nload ris"
"es above the downshift curve.  Separate upshift and downshift curves are\ndef"
"ined for each gear.  An upshift may not be immediately followed by a downshif"
"t.\nIf the tires are about to slip, don't upshift unless the engine would be "
"at max. speed.\nEnforce this rule by setting the load to 1 when the tires are"
" about to slip."
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [330, 40, 350, 60]
	      Orientation	      "left"
	      Value		      "1"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      Position		      [525, 200, 545, 220]
	      Orientation	      "left"
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant14"
	      Position		      [445, 608, 540, 622]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant15"
	      Position		      [375, 473, 470, 487]
	      ForegroundColor	      "red"
	      Value		      "tx_speed_dep"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      Position		      [525, 285, 545, 305]
	      Orientation	      "left"
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      Ports		      [1, 2]
	      Position		      [715, 461, 720, 499]
	      BackgroundColor	      "black"
	      ShowName		      off
	      Outputs		      "2"
	      BusSelectionMode	      off
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      Position		      [545, 580, 670, 600]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From <logic>2"
	      Position		      [25, 534, 130, 566]
	      ForegroundColor	      "red"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "v_req_limited"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      Position		      [545, 640, 670, 660]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_num"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From2"
	      Position		      [485, 500, 610, 520]
	      NamePlacement	      "alternate"
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_gear_ratio"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From3"
	      Position		      [485, 525, 610, 545]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "def_shifting"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From4"
	      Position		      [485, 435, 610, 455]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "spd_dep_muxed"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      Position		      [470, 302, 495, 328]
	      FontName		      "Arial"
	      Gain		      "-1"
	      Multiplication	      "Element-wise(K.*u)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto"
	      Position		      [250, 525, 370, 545]
	      NamePlacement	      "alternate"
	      GotoTag		      "spd_dep_muxed"
	      TagVisibility	      "local"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto1"
	      Position		      [250, 549, 370, 571]
	      GotoTag		      "spd_dep_gear_num"
	      TagVisibility	      "local"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto4"
	      Position		      [810, 370, 945, 390]
	      GotoTag		      "def_gear_num"
	      TagVisibility	      "local"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto5"
	      Position		      [820, 185, 930, 205]
	      GotoTag		      "def_gear_ratio"
	      TagVisibility	      "local"
	    }
	    Block {
	      BlockType		      Goto
	      Name		      "Goto6"
	      Position		      [830, 260, 940, 280]
	      NamePlacement	      "alternate"
	      GotoTag		      "def_shifting"
	      TagVisibility	      "local"
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      Ports		      [2, 1]
	      Position		      [630, 497, 635, 548]
	      ShowName		      off
	      Inputs		      "2"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      Ports		      [2, 1]
	      Position		      [225, 87, 255, 118]
	      Inputs		      "*/"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      RateLimiter
	      Name		      "Rate Limiter"
	      Position		      [510, 367, 540, 393]
	      Orientation	      "left"
	      RisingSlewLimit	      "1/(gb_shift_delay+eps)"
	      FallingSlewLimit	      "-1/(gb_shift_delay+eps)"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      Position		      [80, 175, 110, 195]
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "0.2"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation1"
	      Position		      [710, 186, 730, 204]
	      FontName		      "Arial"
	      UpperLimit	      "gb_gears_num"
	      LowerLimit	      "1"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Speed Dependent Shifting"
	      Ports		      [1, 2]
	      Position		      [175, 522, 205, 573]
	      SourceBlock	      "lib_controls/SubSystem/Speed Dependent "
"Shifting"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "off"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [325, 80, 355, 110]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      Position		      [520, 235, 550, 265]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch2"
	      Position		      [520, 155, 550, 185]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch3"
	      Position		      [690, 600, 720, 630]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch4"
	      Position		      [660, 465, 690, 495]
	      Threshold		      "0.5"
	    }
	    Block {
	      BlockType		      ToWorkspace
	      Name		      "To WS"
	      Position		      [360, 339, 400, 361]
	      BackgroundColor	      "red"
	      VariableName	      "spd"
	      MaxDataPoints	      "inf"
	      Decimation	      "1"
	      SampleTime	      "-1"
	      SaveFormat	      "Array"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "allow downshift?"
	      Ports		      [1, 1]
	      Position		      [420, 232, 450, 268]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"allow downshift?"
		Location		[328, 265, 817, 480]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gearnum"
		  Position		  [35, 35, 55, 55]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator"
		  Ports			  [2, 1]
		  Position		  [375, 43, 405, 67]
		  FontName		  "Arial"
		  Operator		  "NOR"
		  Inputs		  "2"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  Position		  [145, 60, 180, 80]
		  FontName		  "Arial"
		  X0			  "1"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  Position		  [145, 105, 180, 125]
		  FontName		  "Arial"
		  X0			  "1"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  Position		  [225, 38, 255, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator2"
		  Position		  [225, 98, 255, 122]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  Outport
		  Name			  "allow shift"
		  Position		  [445, 45, 465, 65]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Logical\nOperator"
		  SrcPort		  1
		  DstBlock		  "allow shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gearnum"
		  SrcPort		  1
		  Points		  [45, 0]
		  Branch {
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 25]
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 35]
		    DstBlock		    "Relational\nOperator2"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [15, 0; 0, -15]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 30; -60, 0]
		    DstBlock		    "Memory1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator2"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical\nOperator"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "allow upshift?"
	      Ports		      [4, 1]
	      Position		      [420, 152, 450, 188]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"allow upshift?"
		Location		[132, 265, 847, 659]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gearnum"
		  Position		  [35, 25, 55, 45]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_trq_out_r"
		  Position		  [35, 145, 55, 165]
		  Port			  "2"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_out_r"
		  Position		  [35, 105, 55, 125]
		  Port			  "3"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Inport
		  Name			  "prev Pout/Pin"
		  Position		  [35, 185, 55, 205]
		  Port			  "4"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES1"
		  Ports			  []
		  Position		  [645, 340, 701, 380]
		  BackgroundColor	  "green"
		  ShowName		  off
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES1"
		    Location		    [229, 259, 576, 405]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Annotation {
		    Position		    [172, 12]
		    VerticalAlignment	    "top"
		    Text		    "This block prevents an upshift if"
" it the engine is not on and\nthe upshift would make the motor power low enou"
"gh that it\ncould not provide the required input power.  However, an upshift"
"\nis allowed if to stay in the current gear would put the motor\nbeyond 95% o"
"f its maximum speed.\n\nThis block is to be used in pretransmission parallel "
"hybrids\n(where the engine and motor torques are combined on the\nengine side"
" of the transmission) ONLY."
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  Position		  [110, 75, 130, 95]
		  Orientation		  "left"
		  Value			  "1"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  Position		  [100, 347, 375, 373]
		  Value			  "max(mc_map_spd)*mc_spd_scale/tc_mc_"
"to_fc_ratio*.95"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  From
		  Name			  "From <vc>"
		  Position		  [15, 232, 80, 258]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "engine_on"
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical\nOperator1"
		  Ports			  [3, 1]
		  Position		  [615, 53, 645, 97]
		  Operator		  "OR"
		  Inputs		  "3"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  Position		  [125, 230, 155, 260]
		  X0			  "1"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  Ports			  [2, 1]
		  Position		  [310, 37, 340, 68]
		  Inputs		  "2"
		  Multiplication	  "Element-wise(.*)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  Position		  [540, 42, 570, 73]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator1"
		  Position		  [395, 287, 425, 318]
		  Operator		  ">"
		}
		Block {
		  BlockType		  Saturate
		  Name			  "Saturation"
		  Position		  [165, 29, 205, 61]
		  FontName		  "Arial"
		  UpperLimit		  "gb_gears_num"
		  LowerLimit		  "1"
		  LinearizeAsGain	  on
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [105, 27, 135, 58]
		  IconShape		  "rectangular"
		  Inputs		  "++"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Product
		  Name			  "est. req'd\ninput pwr\n(W)"
		  Ports			  [3, 1]
		  Position		  [310, 109, 340, 141]
		  Inputs		  "**/"
		  Multiplication	  "Element-wise(.*)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Lookup
		  Name			  "gear ratio"
		  Position		  [245, 33, 275, 57]
		  FontName		  "Arial"
		  InputValues		  "[1:length(gb_ratio)]"
		  OutputValues		  "gb_ratio"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "gear ratio1"
		  Position		  [250, 258, 280, 282]
		  FontName		  "Arial"
		  InputValues		  "[1:length(gb_ratio)]"
		  OutputValues		  "gb_ratio"
		}
		Block {
		  BlockType		  Lookup
		  Name			  "motor\ntorque\ncapability"
		  Position		  [380, 45, 410, 65]
		  FontName		  "Arial"
		  InputValues		  "mc_map_spd*mc_spd_scale"
		  OutputValues		  "mc_max_trq*mc_trq_scale*mc_overtrq_"
"factor+eps"
		}
		Block {
		  BlockType		  Product
		  Name			  "motor (input to gb)\npwr capability"
		  Ports			  [2, 1]
		  Position		  [455, 32, 485, 63]
		  Inputs		  "2"
		  Multiplication	  "Element-wise(.*)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Product
		  Name			  "req'd input spd\nif no gear change"
		  Ports			  [2, 1]
		  Position		  [310, 276, 340, 309]
		  Inputs		  "2"
		  Multiplication	  "Element-wise(.*)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Outport
		  Name			  "allow shift"
		  Position		  [675, 65, 695, 85]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "req'd input spd\nif no gear change"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational\nOperator1"
		  SrcPort		  1
		  Points		  [170, 0]
		  DstBlock		  "Logical\nOperator1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "gb_spd_out_r"
		  SrcPort		  1
		  Points		  [150, 0]
		  Branch {
		    Points		    [0, 185]
		    DstBlock		    "req'd input spd\nif no gear chang"
"e"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [85, 0]
		    Branch {
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "est. req'd\ninput pwr\n(W)"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "prev gearnum"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    Points		    [0, 235]
		    DstBlock		    "gear ratio1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "gear ratio1"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "req'd input spd\nif no gear change"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Saturation"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Saturation"
		  SrcPort		  1
		  DstBlock		  "gear ratio"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gear ratio"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "motor\ntorque\ncapability"
		  SrcPort		  1
		  DstBlock		  "motor (input to gb)\npwr capability"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    DstBlock		    "motor\ntorque\ncapability"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -15]
		    DstBlock		    "motor (input to gb)\npwr capabili"
"ty"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "motor (input to gb)\npwr capability"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "est. req'd\ninput pwr\n(W)"
		  SrcPort		  1
		  Points		  [175, 0; 0, -60]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "gb_trq_out_r"
		  SrcPort		  1
		  Points		  [215, 0; 0, -30]
		  DstBlock		  "est. req'd\ninput pwr\n(W)"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "prev Pout/Pin"
		  SrcPort		  1
		  Points		  [225, 0; 0, -60]
		  DstBlock		  "est. req'd\ninput pwr\n(W)"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Logical\nOperator1"
		  SrcPort		  1
		  DstBlock		  "allow shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "Logical\nOperator1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "From <vc>"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  Points		  [430, 0; 0, -170]
		  DstBlock		  "Logical\nOperator1"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "current\ngear\nnumber"
	      Ports		      [2, 1]
	      Position		      [655, 177, 675, 213]
	      FontName		      "Arial"
	      IconShape		      "rectangular"
	      Inputs		      "++"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "delta\ngear\nnumber"
	      Position		      [585, 189, 615, 221]
	      FontName		      "Arial"
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "downshift \ncommand"
	      Ports		      [3, 1]
	      Position		      [420, 289, 450, 341]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"downshift \ncommand"
		Location		[431, 372, 906, 667]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  Position		  [45, 98, 75, 112]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		  DisplayOption		  "none"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  ">"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  Ports			  [1, 1]
		  Position		  [240, 100, 270, 150]
		  ShowPortLabels	  off
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear in"
"terplation (extrapolation outside of bounds) to determine the shift point loa"
"d fraction associated with the current gear number and speed. \n\nThe Speeds "
"parameter should be defined as an array of vectors containing speeds for each"
" gear number.  The Load Fractions parameter should be defined as a array of v"
"ectors containing load fractions indexed by the speeds in the Speeds paramete"
"r for each gear number."
		  MaskHelp		  "Reference the base workspace variab"
"les - gb_**shift_spd and gb_**shift_load  where ** is either up for upshift c"
"onditions or dn for downshift conditions.\n\nOr define the arrays as follows:"
"\n\n{[spd1 spd2 spd3 spd4]; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load"
"3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array contains one ro"
"w for each gear in the gearbox.  Speeds should be defined in rad/s and loads "
"as a decimal fraction.\n\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_dnshift_spd|gb_dnshift_load"
		  MaskVariableAliases	  ","
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [25, 33, 55, 47]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    "S-Function"
		    Name		    "S-Function"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    PortCounts		    "[]"
		    SFunctionModules	    "''"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    Position		    [185, 33, 215, 47]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  Position		  [420, 43, 450, 57]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [55, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "engine\ntorque\ncapability"
	      Position		      [185, 205, 215, 225]
	      Orientation	      "up"
	      FontName		      "Arial"
	      InputValues	      "fc_map_spd*fc_spd_scale"
	      OutputValues	      "fc_max_trq*fc_trq_scale+eps"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "gb_spd_in_r"
	      Ports		      [2, 1]
	      Position		      [150, 323, 170, 347]
	      FontName		      "Arial"
	      Inputs		      "2"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio"
	      Position		      [400, 368, 430, 392]
	      Orientation	      "left"
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      OutputValues	      "gb_ratio"
	    }
	    Block {
	      BlockType		      Lookup
	      Name		      "gear ratio1"
	      Position		      [770, 183, 800, 207]
	      FontName		      "Arial"
	      InputValues	      "[1:length(gb_ratio)]"
	      OutputValues	      "gb_ratio"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "gearbox speed\nestimator"
	      Ports		      [1, 1]
	      Position		      [275, 320, 305, 350]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"gearbox speed\nestimator"
		Location		[224, 217, 812, 726]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gb_spd_in_r\nif no gear change"
		  Position		  [45, 18, 75, 32]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Block NOTES"
		  Ports			  []
		  Position		  [515, 345, 571, 385]
		  BackgroundColor	  "green"
		  ShowName		  off
		  ShowPortLabels	  on
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskDisplay		  "disp('Block\\nNOTES')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "Block NOTES"
		    Location		    [497, 485, 832, 570]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Annotation {
		    Position		    [167, 41]
		    Text		    "The requested engine speed is rep"
"laced by an estimate of the\nengine's previous speed whenever the vehicle mis"
"sed the trace\n by more than 1 mph on the last time step."
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  Position		  [165, 240, 185, 260]
		  Orientation		  "left"
		  Value			  "eps"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  Position		  [315, 165, 335, 185]
		  Orientation		  "left"
		  Value			  "0"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  Position		  [230, 360, 250, 380]
		  Orientation		  "left"
		  Value			  "2"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant3"
		  Position		  [230, 460, 250, 480]
		  Orientation		  "left"
		  Value			  "0.11"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  From
		  Name			  "From"
		  Position		  [195, 40, 285, 70]
		  Orientation		  "left"
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "gb_spd_in_a"
		}
		Block {
		  BlockType		  From
		  Name			  "From <cyc>"
		  Position		  [30, 304, 120, 336]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "cyc_mph_r"
		}
		Block {
		  BlockType		  From
		  Name			  "From <veh>"
		  Position		  [30, 99, 85, 131]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "mpha"
		}
		Block {
		  BlockType		  From
		  Name			  "From <wh>/\ntire slip model (m/s)"
		  Position		  [30, 184, 120, 216]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "veh_spd_a_rec"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  Position		  [150, 97, 190, 133]
		  Gain			  "0.447"
		  Multiplication	  "Element-wise(K.*u)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Logic
		  Name			  "Logical"
		  Ports			  [2, 1]
		  Position		  [375, 317, 405, 348]
		  Operator		  "AND"
		  Inputs		  "2"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory"
		  Position		  [370, 110, 400, 140]
		  X0			  "cyc_mph(1,2)*0.447/wh_radius*fd_rat"
"io*gb_ratio(gb_num_init)"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  Memory
		  Name			  "Memory1"
		  Position		  [310, 310, 340, 340]
		  X0			  "1"
		  InheritSampleTime	  off
		  RTWStateStorageClass	  "Auto"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  Ports			  [3, 1]
		  Position		  [215, 99, 245, 131]
		  Inputs		  "**/"
		  Multiplication	  "Element-wise(.*)"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational"
		  Position		  [225, 307, 255, 338]
		  Operator		  ">"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational1"
		  Position		  [225, 412, 255, 443]
		  Operator		  "<="
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [160, 192, 190, 223]
		  IconShape		  "rectangular"
		  Inputs		  "++"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  Ports			  [2, 1]
		  Position		  [160, 297, 190, 328]
		  IconShape		  "rectangular"
		  Inputs		  "-+"
		  SaturateOnIntegerOverflow on
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  Position		  [310, 110, 340, 140]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  Position		  [445, 120, 475, 150]
		  Threshold		  "eps"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "dt"
		  Ports			  [0, 1]
		  Position		  [165, 408, 185, 432]
		  ShowPortLabels	  off
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  System {
		    Name		    "dt"
		    Location		    [240, 561, 480, 665]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    Position		    [25, 25, 45, 45]
		    DisplayTime		    off
		    Decimation		    "10"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    Position		    [75, 53, 105, 77]
		    X0			    "-1"
		    InheritSampleTime	    off
		    RTWStateStorageClass    "Auto"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum4"
		    Ports		    [2, 1]
		    Position		    [130, 27, 160, 58]
		    IconShape		    "rectangular"
		    Inputs		    "+-"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    Position		    [185, 38, 215, 52]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Sum4"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Sum4"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Sum4"
		    DstPort		    1
		    }
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  Position		  [545, 128, 575, 142]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "[]"
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Product"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  Labels		  [1, 0]
		  SrcBlock		  "From <wh>/\ntire slip model (m/s)"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -25; 155, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Memory"
		  SrcPort		  1
		  DstBlock		  "Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <cyc>"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From <veh>"
		  SrcPort		  1
		  Points		  [35, 0]
		  Branch {
		    DstBlock		    "Gain"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 190]
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Relational"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational"
		  SrcPort		  1
		  DstBlock		  "Memory1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  DstBlock		  "Memory"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "gb_spd_in_r\nif no gear change"
		  SrcPort		  1
		  Points		  [350, 0]
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "From"
		  SrcPort		  1
		  Points		  [0, 50]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant3"
		  SrcPort		  1
		  Points		  [-15, 0]
		  DstBlock		  "Relational1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Relational1"
		  SrcPort		  1
		  Points		  [100, 0]
		  DstBlock		  "Logical"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Memory1"
		  SrcPort		  1
		  DstBlock		  "Logical"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Logical"
		  SrcPort		  1
		  Points		  [10, 0; 0, -200]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "dt"
		  SrcPort		  1
		  DstBlock		  "Relational1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "load=T/\n(maxT\nat spd)"
	      Position		      [275, 96, 295, 114]
	      FontName		      "Arial"
	      UpperLimit	      "1"
	      LowerLimit	      "0"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev gear\nnumber"
	      Position		      [670, 35, 710, 55]
	      Orientation	      "left"
	      FontName		      "Arial"
	      X0		      "gb_num_init"
	      InheritSampleTime	      off
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "prev gear\nratio"
	      Position		      [205, 370, 240, 390]
	      Orientation	      "left"
	      FontName		      "Arial"
	      X0		      "gb_ratio(gb_num_init)"
	      InheritSampleTime	      off
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "shifting1"
	      Ports		      [1, 1]
	      Position		      [775, 254, 805, 286]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"shifting1"
		Location		[166, 208, 456, 399]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "gear\nnumber"
		  Position		  [15, 50, 35, 70]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  Position		  [20, 131, 120, 159]
		  FontName		  "Arial"
		  Value			  "gb_shift_delay-1e-6"
		  VectorParams1D	  on
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  Position		  [185, 53, 215, 77]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "time since last shift"
		  Ports			  [1, 1]
		  Position		  [65, 43, 125, 77]
		  ShowName		  off
		  ShowPortLabels	  off
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskDisplay		  "disp('time since\\nlast shift')"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  System {
		    Name		    "time since last shift"
		    Location		    [16, 396, 306, 535]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    Position		    [10, 60, 30, 80]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "just shifted"
		    Ports		    [1, 1]
		    Position		    [60, 57, 110, 83]
		    ShowName		    off
		    ShowPortLabels	    off
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskDisplay		    "disp('just\\nshifted')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "just shifted"
		    Location		    [140, 214, 463, 359]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    Position		    [55, 55, 75, 75]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    Position		    [120, 55, 155, 75]
		    FontName		    "Arial"
		    X0			    "1"
		    InheritSampleTime	    off
		    RTWStateStorageClass    "Auto"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    Position		    [190, 58, 220, 82]
		    FontName		    "Arial"
		    Operator		    "~="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    Position		    [250, 60, 270, 80]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 30; 75, 0; 0, -20]
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "timer"
		    Ports		    [1, 1]
		    Position		    [140, 55, 175, 85]
		    ShowName		    off
		    ShowPortLabels	    off
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskDisplay		    "disp('timer')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    System {
		    Name		    "timer"
		    Location		    [455, 179, 859, 394]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "trigger"
		    Position		    [15, 125, 35, 145]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    Position		    [100, 100, 120, 120]
		    FontName		    "Arial"
		    Value		    "1"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant1"
		    Position		    [100, 150, 120, 170]
		    FontName		    "Arial"
		    Value		    "0"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant2"
		    Position		    [150, 5, 170, 25]
		    FontName		    "Arial"
		    Value		    "0"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    Position		    [265, 59, 295, 91]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "no-lag\nReset Integrator"
		    Ports		    [3, 1]
		    Position		    [155, 96, 205, 174]
		    ShowPortLabels	    off
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    MaskType		    "No-lag Reset Integrator"
		    MaskDescription	    "No-lag Reset Integrator"
		    MaskHelp		    "Integrates first input using Eule"
"r technique.\\nAt the time step that input 2 <> zero,\\noutput is reset to in"
"put 3."
		    MaskPromptString	    "Initial Value"
		    MaskStyleString	    "edit"
		    MaskTunableValueString  "on"
		    MaskEnableString	    "on"
		    MaskVisibilityString    "on"
		    MaskToolTipString	    "on"
		    MaskInitialization	    "initval=@1;"
		    MaskDisplay		    "disp('1/s\\nw/ reset\\nno lag')"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "15"
		    System {
		    Name		    "no-lag\nReset Integrator"
		    Location		    [258, 616, 780, 880]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "in_1"
		    Position		    [60, 100, 80, 120]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_2"
		    Position		    [60, 140, 80, 160]
		    Port		    "2"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "in_3"
		    Position		    [45, 185, 65, 205]
		    Port		    "3"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    Position		    [125, 205, 145, 225]
		    Orientation		    "up"
		    NamePlacement	    "alternate"
		    Value		    "0"
		    VectorParams1D	    on
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    Position		    [340, 55, 375, 75]
		    Orientation		    "left"
		    FontName		    "Arial"
		    X0			    "initval"
		    InheritSampleTime	    off
		    RTWStateStorageClass    "Auto"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    Ports		    [2, 1]
		    Position		    [160, 96, 180, 114]
		    FontName		    "Arial"
		    Inputs		    "2"
		    Multiplication	    "Element-wise(.*)"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    Ports		    [2, 1]
		    Position		    [230, 90, 250, 110]
		    FontName		    "Arial"
		    IconShape		    "rectangular"
		    Inputs		    "++"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Switch
		    Name		    "Switch"
		    Position		    [290, 139, 320, 171]
		    FontName		    "Arial"
		    Threshold		    "eps"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "dt"
		    Ports		    [0, 1]
		    Position		    [112, 50, 138, 80]
		    Orientation		    "down"
		    ShowPortLabels	    off
		    TreatAsAtomicUnit	    off
		    RTWSystemCode	    "Auto"
		    RTWFcnNameOpts	    "Auto"
		    RTWFileNameOpts	    "Auto"
		    System {
		    Name		    "dt"
		    Location		    [80, 285, 429, 424]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    Position		    [65, 60, 85, 80]
		    FontName		    "Arial"
		    FontSize		    8
		    DisplayTime		    off
		    Decimation		    "10"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory1"
		    Position		    [125, 85, 160, 105]
		    FontName		    "Arial"
		    FontSize		    8
		    X0			    "-1"
		    InheritSampleTime	    off
		    RTWStateStorageClass    "Auto"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    Ports		    [2, 1]
		    Position		    [205, 65, 225, 85]
		    FontName		    "Arial"
		    FontSize		    8
		    IconShape		    "rectangular"
		    Inputs		    "+-"
		    SaturateOnIntegerOverflow on
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    Position		    [255, 65, 275, 85]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory1"
		    SrcPort		    1
		    Points		    [10, 0; 0, -15]
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "Memory1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    }
		    }
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "in_2==0"
		    Position		    [160, 143, 190, 167]
		    Operator		    "=="
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    Position		    [455, 145, 475, 165]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    Points		    [0, -40]
		    DstBlock		    "in_2==0"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "in_2==0"
		    SrcPort		    1
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    Points		    [85, 0]
		    Branch {
		    Points		    [0, -90]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    Points		    [10, 0; 0, 45]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    Points		    [-130, 0; 0, 30]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "dt"
		    SrcPort		    1
		    Points		    [0, 15]
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "in_2"
		    SrcPort		    1
		    DstBlock		    "in_2==0"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_3"
		    SrcPort		    1
		    Points		    [200, 0; 0, -30]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "time"
		    Position		    [350, 65, 370, 85]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "no-lag\nReset Integrator"
		    SrcPort		    1
		    Points		    [35, 0; 0, -50]
		    DstBlock		    "Switch"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Constant1"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant2"
		    SrcPort		    1
		    Points		    [35, 0; 0, 50]
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "trigger"
		    SrcPort		    1
		    Points		    [15, 0]
		    Branch {
		    DstBlock		    "no-lag\nReset Integrator"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, -60]
		    DstBlock		    "Switch"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Switch"
		    SrcPort		    1
		    DstBlock		    "time"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "out_1"
		    Position		    [225, 60, 245, 80]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "timer"
		    SrcPort		    1
		    DstBlock		    "out_1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "just shifted"
		    SrcPort		    1
		    DstBlock		    "timer"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "in_1"
		    SrcPort		    1
		    DstBlock		    "just shifted"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "out_1"
		  Position		  [250, 55, 270, 75]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "time since last shift"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [15, 0; 0, -75]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "gear\nnumber"
		  SrcPort		  1
		  DstBlock		  "time since last shift"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "out_1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "upshift\n command"
	      Ports		      [3, 1]
	      Position		      [420, 64, 450, 116]
	      ShowPortLabels	      off
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"upshift\n command"
		Location		[324, 355, 799, 650]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "prev gear number"
		  Position		  [45, 103, 75, 117]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine load"
		  Position		  [45, 38, 75, 52]
		  Port			  "2"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Inport
		  Name			  "engine speed"
		  Position		  [45, 133, 75, 147]
		  Port			  "3"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [2, 1]
		  Position		  [130, 107, 165, 143]
		  Inputs		  "2"
		  DisplayOption		  "none"
		}
		Block {
		  BlockType		  RelationalOperator
		  Name			  "Relational\nOperator"
		  Position		  [350, 38, 380, 62]
		  FontName		  "Arial"
		  Operator		  "<"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "load fraction"
		  Ports			  [1, 1]
		  Position		  [245, 100, 275, 150]
		  ShowPortLabels	  off
		  TreatAsAtomicUnit	  off
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		  MaskType		  "Gear Selector"
		  MaskDescription	  "This block will perform a linear in"
"terplation (extrapolation outside of bounds) to determine the shift point loa"
"d fraction associated with the current gear number and speed. \n\nThe Speeds "
"parameter should be defined as an array of vectors containing speeds for each"
" gear number.  The Load Fractions parameter should be defined as a array of v"
"ectors containing load fractions indexed by the speeds in the Speeds paramete"
"r for each gear number."
		  MaskHelp		  "Reference the base workspace variab"
"les - gb_**shift_spd and gb_**shift_load  where ** is either up for upshift c"
"onditions or dn for downshift conditions.\n\nOr define the arrays as follows:"
"\n\n{[spd1 spd2 spd3 spd4]; [spd1 spd2 spd3 spd4]; ...}\n\n{[load1 load2 load"
"3 load4]; [load1 load2 load3 load4]; ...}\n\nwhere each array contains one ro"
"w for each gear in the gearbox.  Speeds should be defined in rad/s and loads "
"as a decimal fraction.\n\n"
		  MaskPromptString	  "Speeds:|Load Fractions:"
		  MaskStyleString	  "edit,edit"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskVariables		  "spd=@1;load=@2;"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "gb_upshift_spd|gb_upshift_load"
		  MaskVariableAliases	  ","
		  System {
		    Name		    "load fraction"
		    Location		    [464, 440, 704, 522]
		    Open		    off
		    ModelBrowserVisibility  off
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [25, 33, 55, 47]
		    Port		    "1"
		    LatchInput		    off
		    Interpolate		    on
		    }
		    Block {
		    BlockType		    "S-Function"
		    Name		    "S-Function"
		    Ports		    [1, 1]
		    Position		    [80, 25, 160, 55]
		    FunctionName	    "sfun_gearbox"
		    Parameters		    "load, spd"
		    PortCounts		    "[]"
		    SFunctionModules	    "''"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    Position		    [185, 33, 215, 47]
		    Port		    "1"
		    OutputWhenDisabled	    "held"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "S-Function"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "S-Function"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "command"
		  Position		  [420, 43, 450, 57]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "Relational\nOperator"
		  SrcPort		  1
		  DstBlock		  "command"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine speed"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "load fraction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "prev gear number"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "engine load"
		  SrcPort		  1
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "load fraction"
		  SrcPort		  1
		  Points		  [50, 0; 0, -70]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      Product
	      Name		      "~gb_trq_in_r"
	      Ports		      [3, 1]
	      Position		      [150, 77, 170, 113]
	      FontName		      "Arial"
	      Inputs		      "*//"
	      Multiplication	      "Element-wise(.*)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear number, out"
	      Position		      [785, 605, 805, 625]
	      FontName		      "Arial"
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "gear ratio, out"
	      Position		      [785, 445, 805, 465]
	      FontName		      "Arial"
	      Port		      "2"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "shifting, out"
	      Position		      [785, 490, 805, 510]
	      FontName		      "Arial"
	      Port		      "3"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "0"
	    }
	    Line {
	      Labels		      [1, 0]
	      SrcBlock		      "Switch3"
	      SrcPort		      1
	      DstBlock		      "gear number, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      Points		      [0, 10]
	      DstBlock		      "shifting, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      Points		      [0, -15]
	      DstBlock		      "gear ratio, out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      2
	      DstBlock		      "Goto1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Speed Dependent Shifting"
	      SrcPort		      1
	      DstBlock		      "Goto"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From <logic>2"
	      SrcPort		      1
	      DstBlock		      "Speed Dependent Shifting"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch4"
	      SrcPort		      1
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From3"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From2"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Switch4"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From4"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Switch4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant15"
	      SrcPort		      1
	      DstBlock		      "Switch4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant14"
	      SrcPort		      1
	      DstBlock		      "Switch3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "gearbox speed\nestimator"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		Points			[0, 15]
		DstBlock		"To WS"
		DstPort			1
	      }
	      Branch {
		Points			[10, 0]
		Branch {
		  Points		  [30, 0]
		  Branch {
		    Points		    [30, 0]
		    DstBlock		    "downshift \ncommand"
		    DstPort		    3
		  }
		  Branch {
		    Points		    [0, -230]
		    DstBlock		    "upshift\n command"
		    DstPort		    3
		  }
		}
		Branch {
		  Points		  [0, -80; -145, 0]
		  DstBlock		  "engine\ntorque\ncapability"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "allow upshift?"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "upshift\n command"
	      SrcPort		      1
	      Points		      [50, 0]
	      DstBlock		      "Switch2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		Points			[0, 220]
		DstBlock		"downshift \ncommand"
		DstPort			2
	      }
	      Branch {
		Points			[20, 0]
		DstBlock		"upshift\n command"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "tires are at\ntraction limit"
	      SrcPort		      1
	      Points		      [230, 0; 0, 65]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "~gb_trq_in_r"
	      SrcPort		      1
	      DstBlock		      "Product2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "load=T/\n(maxT\nat spd)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Rate Limiter"
	      SrcPort		      1
	      DstBlock		      "gear ratio"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "gear ratio"
	      SrcPort		      1
	      DstBlock		      "prev gear\nratio"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "prev gear\nratio"
	      SrcPort		      1
	      Points		      [-75, 0; 0, -40]
	      Branch {
		DstBlock		"gb_spd_in_r"
		DstPort			2
	      }
	      Branch {
		Points			[0, -235]
		DstBlock		"~gb_trq_in_r"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "gb_trq_out_r"
	      SrcPort		      1
	      Points		      [60, 0]
	      Branch {
		DstBlock		"~gb_trq_in_r"
		DstPort			1
	      }
	      Branch {
		Points			[0, 80]
		DstBlock		"allow upshift?"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "gb_spd_out_r"
	      SrcPort		      1
	      Points		      [60, 0]
	      Branch {
		DstBlock		"gb_spd_in_r"
		DstPort			1
	      }
	      Branch {
		Points			[0, -155]
		DstBlock		"allow upshift?"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      Points		      [0, -75]
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      Points		      [5, 0]
	      Branch {
		Points			[0, -90]
		DstBlock		"~gb_trq_in_r"
		DstPort			2
	      }
	      Branch {
		DstBlock		"allow upshift?"
		DstPort			4
	      }
	    }
	    Line {
	      SrcBlock		      "prev.\nPout/Pin"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [-15, 0]
	      DstBlock		      "Switch2"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "prev gear\nnumber"
	      SrcPort		      1
	      Points		      [-30, 0]
	      Branch {
		Points			[0, 140]
		DstBlock		"current\ngear\nnumber"
		DstPort			1
	      }
	      Branch {
		Points			[-240, 0; 0, 205]
		Branch {
		  Points		  [0, -170]
		  Branch {
		    Points		    [10, 0]
		    DstBlock		    "upshift\n command"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 75]
		    Branch {
		    Points		    [0, 145]
		    DstBlock		    "downshift \ncommand"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "allow upshift?"
		    DstPort		    1
		    }
		  }
		}
		Branch {
		  DstBlock		  "allow downshift?"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "gear ratio1"
	      SrcPort		      1
	      DstBlock		      "Goto5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation1"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, 75]
		Branch {
		  Points		  [0, 110]
		  Branch {
		    DstBlock		    "Goto4"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Rate Limiter"
		    DstPort		    1
		  }
		}
		Branch {
		  DstBlock		  "shifting1"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[0, 0]
		Branch {
		  DstBlock		  "gear ratio1"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, -150]
		  DstBlock		  "prev gear\nnumber"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "current\ngear\nnumber"
	      SrcPort		      1
	      DstBlock		      "Saturation1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "delta\ngear\nnumber"
	      SrcPort		      1
	      DstBlock		      "current\ngear\nnumber"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "shifting1"
	      SrcPort		      1
	      DstBlock		      "Goto6"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch2"
	      SrcPort		      1
	      Points		      [15, 0; 0, 25]
	      Branch {
		DstBlock		"delta\ngear\nnumber"
		DstPort			1
	      }
	      Branch {
		DstBlock		"delta\ngear\nnumber"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "delta\ngear\nnumber"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "engine\ntorque\ncapability"
	      SrcPort		      1
	      Points		      [0, -90]
	      DstBlock		      "Product2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "downshift \ncommand"
	      SrcPort		      1
	      DstBlock		      "Gain1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "allow downshift?"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "load=T/\n(maxT\nat spd)"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "gb_spd_in_r"
	      SrcPort		      1
	      DstBlock		      "gearbox speed\nestimator"
	      DstPort		      1
	    }
	    Annotation {
	      Position		      [897, 127]
	      Text		      "local GOTO blocks:"
	    }
	    Annotation {
	      Position		      [887, 159]
	      Text		      "default gear ratio\ncalculation"
	    }
	    Annotation {
	      Position		      [888, 301]
	      Text		      "default shifting\ncalculation"
	    }
	    Annotation {
	      Position		      [879, 434]
	      Text		      "default gear number\ncalculation"
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "sim stop\nsubsystem"
	  Ports			  []
	  Position		  [50, 25, 80, 75]
	  SourceBlock		  "lib_controls/SubSystem/sim stop\nsubsystem"
	  SourceType		  "SubSystem"
	  ShowPortLabels	  "on"
	  TreatAsAtomicUnit	  "off"
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	}
	Block {
	  BlockType		  Outport
	  Name			  "clutch\nstate"
	  Position		  [815, 273, 845, 287]
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "[]"
	}
	Line {
	  SrcBlock		  "pre-TX parallel\ngearbox control"
	  SrcPort		  3
	  DstBlock		  "Goto <gb>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "pre-TX parallel\ngearbox control"
	  SrcPort		  2
	  DstBlock		  "Goto <gb>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "pre-TX parallel\ngearbox control"
	  SrcPort		  1
	  DstBlock		  "Goto"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>7"
	  SrcPort		  1
	  Points		  [60, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievab"
"le)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievab"
"le)"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>5"
	  SrcPort		  1
	  Points		  [0, -10]
	  DstBlock		  "front and rear\nbrake controller\n(achievab"
"le)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "From<wh>4"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievab"
"le)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <wh>3"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievab"
"le)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <wh>2"
	  SrcPort		  1
	  DstBlock		  "front and rear\nbrake controller\n(achievab"
"le)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "front and rear\nbrake controller\n(achievab"
"le)"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>9"
	  SrcPort		  1
	  DstBlock		  "braking strategy"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>1"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>8"
	  SrcPort		  1
	  DstBlock		  "Relational\nOperator"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Relational\nOperator"
	  SrcPort		  1
	  DstBlock		  "Goto <sdo>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "parallel clutch\ncontrol"
	  SrcPort		  1
	  Points		  [10, 0]
	  Branch {
	    DstBlock		    "clutch\nstate"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Goto <sdo>"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "From <gb>8"
	  SrcPort		  1
	  Points		  [30, 0]
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From <gb>4"
	  SrcPort		  1
	  Points		  [30, 0]
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <gb>6"
	  SrcPort		  1
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <mc>3"
	  SrcPort		  1
	  Points		  [35, 0]
	  DstBlock		  "parallel clutch\ncontrol"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  2
	  DstBlock		  "Goto <wh>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <veh>"
	  SrcPort		  1
	  DstBlock		  "config traction control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  1
	  DstBlock		  "Goto <wh>5"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    Points		    [190, 0]
	    Branch {
	      Points		      [0, 20]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [0, -35]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	  }
	  Branch {
	    DstBlock		    "braking strategy"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "braking strategy"
	  SrcPort		  2
	  DstBlock		  "Sum"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <wh>6"
	  SrcPort		  1
	  Points		  [35, 0]
	  DstBlock		  "engine on\n(parallel hybrid)"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "engine on\n(parallel hybrid)"
	  SrcPort		  1
	  DstBlock		  "Goto <fc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>7"
	  SrcPort		  1
	  Points		  [25, 0]
	  DstBlock		  "engine on\n(parallel hybrid)"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>5"
	  SrcPort		  1
	  DstBlock		  "engine on\n(parallel hybrid)"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From <wh>4"
	  SrcPort		  1
	  Points		  [35, 0]
	  DstBlock		  "engine on\n(parallel hybrid)"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "engine on\n(parallel hybrid)"
	  SrcPort		  2
	  DstBlock		  "Goto <fc>1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <fc>"
	  SrcPort		  1
	  DstBlock		  "engine on\n(parallel hybrid)"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "engine on\n(parallel hybrid)"
	  SrcPort		  3
	  DstBlock		  "Goto <fc><mc>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>2"
	  SrcPort		  1
	  DstBlock		  "pre-TX parallel\ngearbox control"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From <gb>1"
	  SrcPort		  1
	  Points		  [5, 0]
	  DstBlock		  "pre-TX parallel\ngearbox control"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From<gb>"
	  SrcPort		  1
	  Points		  [5, 0]
	  DstBlock		  "pre-TX parallel\ngearbox control"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From <gb>3"
	  SrcPort		  1
	  DstBlock		  "pre-TX parallel\ngearbox control"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  3
	  Points		  [20, 0]
	  DstBlock		  "Goto <wh>2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  4
	  DstBlock		  "Terminator"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "config traction control"
	  SrcPort		  5
	  DstBlock		  "Terminator1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Ground"
	  SrcPort		  1
	  Points		  [0, -15; 55, 0]
	  DstBlock		  "front and rear\nbrake controller\n(achievab"
"le)"
	  DstPort		  6
	}
	Annotation {
	  Position		  [207, 289]
	  Text			  "force\nrequired (N)"
	}
      }
    }
    Block {
      BlockType		      Clock
      Name		      "Clock"
      Position		      [110, 15, 130, 35]
      DisplayTime	      off
      Decimation	      "10"
    }
    Block {
      BlockType		      Goto
      Name		      "Goto<sdo>"
      Position		      [145, 18, 215, 32]
      GotoTag		      "time"
      TagVisibility	      "global"
    }
    Block {
      BlockType		      ToWorkspace
      Name		      "HC, CO,\nNOx, PM (g/s)"
      Position		      [885, 77, 935, 93]
      FontName		      "Arial"
      VariableName	      "emis"
      MaxDataPoints	      "inf"
      Decimation	      "1"
      SampleTime	      "0"
      SaveFormat	      "Array"
    }
    Block {
      BlockType		      SubSystem
      Name		      "Interactive Graphics"
      Ports		      []
      Position		      [992, 25, 1057, 79]
      AttributesFormatString  "%<BlockChoice>"
      LinkData {
	BlockName		"off/Live Inputs/veh/roll res interactive"
	DialogParameters {
	  BlockChoice		  "roll res force req (N)"
	}
      }
      ShowPortLabels	      on
      BlockChoice	      "off"
      TemplateBlock	      "lib_interactive/Interactive Graphics"
      MemberBlocks	      "off,on"
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      System {
	Name			"Interactive Graphics"
	Location		[148, 182, 646, 482]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Reference
	  Name			  "off"
	  Tag			  "Altia_off"
	  Ports			  []
	  Position		  [100, 40, 140, 80]
	  Orientation		  "up"
	  SourceBlock		  "lib_interactive/off"
	  SourceType		  ""
	}
      }
    }
    Block {
      BlockType		      Logic
      Name		      "Logical\nOperator1"
      Ports		      [2, 1]
      Position		      [845, 45, 870, 65]
      Orientation	      "left"
      ShowName		      off
      Operator		      "AND"
      Inputs		      "2"
    }
    Block {
      BlockType		      SubSystem
      Name		      "Mechanical Accessory\nLoads <acc>"
      Ports		      [2, 2]
      Position		      [615, 30, 665, 110]
      ShowPortLabels	      on
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskDisplay	      "image(imread('bdi_acc_pic.bmp'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      System {
	Name			"Mechanical Accessory\nLoads <acc>"
	Location		[188, 200, 863, 885]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "In1"
	  Position		  [95, 233, 125, 247]
	  ShowName		  off
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Inport
	  Name			  "In2"
	  Position		  [95, 348, 125, 362]
	  ShowName		  off
	  Port			  "2"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant"
	  Position		  [80, 493, 110, 507]
	  ShowName		  off
	  Value			  "eps"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux"
	  Ports			  [1, 2]
	  Position		  [165, 211, 170, 269]
	  BackgroundColor	  "black"
	  ShowName		  off
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux1"
	  Ports			  [1, 2]
	  Position		  [165, 326, 170, 384]
	  BackgroundColor	  "black"
	  ShowName		  off
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  From
	  Name			  "From"
	  Position		  [75, 277, 155, 293]
	  BackgroundColor	  "magenta"
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_spd_est"
	}
	Block {
	  BlockType		  From
	  Name			  "From1"
	  Position		  [70, 117, 150, 133]
	  BackgroundColor	  "cyan"
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "acc_on"
	}
	Block {
	  BlockType		  From
	  Name			  "From2"
	  Position		  [75, 392, 155, 408]
	  BackgroundColor	  "magenta"
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_spd_est"
	}
	Block {
	  BlockType		  From
	  Name			  "From3"
	  Position		  [70, 67, 150, 83]
	  BackgroundColor	  "lightBlue"
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "signal_one"
	}
	Block {
	  BlockType		  From
	  Name			  "From4"
	  Position		  [70, 92, 150, 108]
	  BackgroundColor	  "green"
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "signal_two"
	}
	Block {
	  BlockType		  From
	  Name			  "From5"
	  Position		  [130, 452, 210, 468]
	  BackgroundColor	  "orange"
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "engine_on"
	}
	Block {
	  BlockType		  From
	  Name			  "From6"
	  Position		  [80, 472, 160, 488]
	  BackgroundColor	  "magenta"
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_spd_est"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto"
	  Position		  [310, 244, 400, 266]
	  BackgroundColor	  "lightBlue"
	  ShowName		  off
	  GotoTag		  "signal_one"
	  TagVisibility		  "local"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto1"
	  Position		  [310, 359, 400, 381]
	  BackgroundColor	  "green"
	  ShowName		  off
	  GotoTag		  "signal_two"
	  TagVisibility		  "local"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto2"
	  Position		  [285, 464, 375, 486]
	  BackgroundColor	  "cyan"
	  ShowName		  off
	  GotoTag		  "acc_on"
	  TagVisibility		  "local"
	}
	Block {
	  BlockType		  Logic
	  Name			  "Logical\nOperator"
	  Ports			  [2, 1]
	  Position		  [240, 445, 270, 505]
	  ShowName		  off
	  Operator		  "AND"
	  Inputs		  "2"
	}
	Block {
	  BlockType		  Reference
	  Name			  "Mechanical Accessory\nLoads v2 <acc>"
	  Ports			  [3, 2]
	  Position		  [200, 61, 250, 139]
	  LinkData {
	    BlockName		    "backward model/mechanical accessories (Nm"
")"
	    DialogParameters {
	      BlockChoice	      "Mechanical Accessories: Speed Dependant"
" and Variable Electrical"
	    }
	    BlockName		    "estimated mechanical torque/mechanical ac"
"cessories (Nm)"
	    DialogParameters {
	      BlockChoice	      "Mechanical Accessories: Const Mech Var "
"Elect"
	    }
	  }
	  SourceBlock		  "lib_accessory/Mechanical Accessory\nLoads v"
"2 <acc>"
	  SourceType		  "Unknown"
	  load_on		  "not(ess_on)*1"
	  acc_max_spd		  "inf"
	  acc_min_spd		  "(vc_idle_spd*vc_idle_bool)+eps"
	  ic_mech_trq		  "0"
	  ic_mech_pwr		  "0"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux"
	  Ports			  [3, 1]
	  Position		  [265, 206, 270, 304]
	  ShowName		  off
	  Inputs		  "3"
	  DisplayOption		  "bar"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux1"
	  Ports			  [3, 1]
	  Position		  [265, 321, 270, 419]
	  ShowName		  off
	  Inputs		  "3"
	  DisplayOption		  "bar"
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator"
	  Position		  [200, 468, 220, 512]
	  ShowName		  off
	  Operator		  ">"
	}
	Block {
	  BlockType		  Outport
	  Name			  "Out1"
	  Position		  [320, 73, 350, 87]
	  ShowName		  off
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "[]"
	}
	Block {
	  BlockType		  Outport
	  Name			  "Out2"
	  Position		  [320, 113, 350, 127]
	  ShowName		  off
	  Port			  "2"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "[]"
	}
	Line {
	  SrcBlock		  "Logical\nOperator"
	  SrcPort		  1
	  DstBlock		  "Goto2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Relational\nOperator"
	  SrcPort		  1
	  DstBlock		  "Logical\nOperator"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From5"
	  SrcPort		  1
	  DstBlock		  "Logical\nOperator"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant"
	  SrcPort		  1
	  DstBlock		  "Relational\nOperator"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From6"
	  SrcPort		  1
	  DstBlock		  "Relational\nOperator"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From2"
	  SrcPort		  1
	  DstBlock		  "Mux1"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  2
	  DstBlock		  "Mux1"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  1
	  DstBlock		  "Mux1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "In2"
	  SrcPort		  1
	  DstBlock		  "Demux1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux1"
	  SrcPort		  1
	  DstBlock		  "Goto1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From"
	  SrcPort		  1
	  DstBlock		  "Mux"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  2
	  DstBlock		  "Mux"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  1
	  DstBlock		  "Mux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "In1"
	  SrcPort		  1
	  DstBlock		  "Demux"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mux"
	  SrcPort		  1
	  DstBlock		  "Goto"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From1"
	  SrcPort		  1
	  DstBlock		  "Mechanical Accessory\nLoads v2 <acc>"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From4"
	  SrcPort		  1
	  DstBlock		  "Mechanical Accessory\nLoads v2 <acc>"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Mechanical Accessory\nLoads v2 <acc>"
	  SrcPort		  2
	  DstBlock		  "Out2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mechanical Accessory\nLoads v2 <acc>"
	  SrcPort		  1
	  DstBlock		  "Out1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From3"
	  SrcPort		  1
	  DstBlock		  "Mechanical Accessory\nLoads v2 <acc>"
	  DstPort		  1
	}
	Annotation {
	  Position		  [103, 465]
	  Text			  "from  <vc>"
	}
	Annotation {
	  Position		  [213, 392]
	  Text			  "aux spd achieved"
	}
	Annotation {
	  Position		  [215, 362]
	  Text			  "speed achieved"
	}
	Annotation {
	  Position		  [218, 332]
	  Text			  "torque achieved"
	}
	Annotation {
	  Position		  [216, 275]
	  Text			  "aux spd req"
	}
	Annotation {
	  Position		  [217, 244]
	  Text			  "speed req"
	}
	Annotation {
	  Position		  [218, 214]
	  Text			  "torque req"
	}
	Annotation {
	  Position		  [43, 400]
	  Text			  "from  <fc>"
	}
	Annotation {
	  Position		  [43, 285]
	  Text			  "from  <fc>"
	}
      }
    }
    Block {
      BlockType		      Reference
      Name		      "NOTES"
      Ports		      []
      Position		      [20, 237, 70, 271]
      BackgroundColor	      "green"
      ShowName		      off
      SourceBlock	      "lib_help/NOTES"
      SourceType	      ""
    }
    Block {
      BlockType		      SubSystem
      Name		      "Parallel Cosimulation"
      Ports		      [1, 1]
      Position		      [570, 160, 845, 290]
      FontName		      "Arial"
      ShowPortLabels	      on
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      MaskDisplay	      "image(imread('par_cosim.bmp'))"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      System {
	Name			"Parallel Cosimulation"
	Location		[64, 250, 1264, 937]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "trq and spd\nreq'd of motor"
	  Position		  [45, 253, 75, 267]
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant"
	  Position		  [845, 12, 960, 28]
	  Value			  "mc_output_switch"
	  VectorParams1D	  on
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux"
	  Ports			  [1, 2]
	  Position		  [210, 220, 215, 300]
	  BackgroundColor	  "black"
	  ShowName		  off
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux1"
	  Ports			  [1, 7]
	  Position		  [635, 45, 655, 555]
	  Outputs		  "[4 4 2 2 30 12 4]"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  Demux
	  Name			  "Demux2"
	  Ports			  [1, 2]
	  Position		  [1040, 130, 1045, 210]
	  BackgroundColor	  "black"
	  ShowName		  off
	  Outputs		  "2"
	  BusSelectionMode	  off
	}
	Block {
	  BlockType		  From
	  Name			  "From"
	  Position		  [250, 309, 330, 331]
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "fc_spd_out_a"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto1"
	  Position		  [830, 419, 925, 441]
	  GotoTag		  "mc_trq_out_a"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto2"
	  Position		  [830, 454, 925, 476]
	  GotoTag		  "mc_spd_out_a"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  "S-Function"
	  Name			  "Matrix\nConcatenation2"
	  Ports			  [4, 1]
	  Position		  [395, 218, 410, 382]
	  FunctionName		  "smatrxcat"
	  Parameters		  "numInports,catMethod"
	  PortCounts		  "[]"
	  SFunctionModules	  "''"
	  MaskType		  "Matrix Concatenation"
	  MaskDescription	  "Perform horizontal or vertical concatenatio"
"n.  1-D vector input signals are treated as column vectors, i.e., [Mx1] matri"
"ces.  The output is always a matrix."
	  MaskPromptString	  "Number of inputs:|Concatenation method:"
	  MaskStyleString	  "edit,popup(Horizontal|Vertical)"
	  MaskTunableValueString  "on,on"
	  MaskCallbackString	  "|"
	  MaskEnableString	  "on,on"
	  MaskVisibilityString	  "on,on"
	  MaskToolTipString	  "on,on"
	  MaskVariables		  "numInports=@1;catMethod=@2;"
	  MaskInitialization	  "xy = matrxcatmask('icon');"
	  MaskDisplay		  "plot(xy.x,xy.y);\ntext(0.15,0.86,xy.label);"
"\n"
	  MaskSelfModifiable	  on
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "normalized"
	  MaskValueString	  "4|Horizontal"
	  MaskVariableAliases	  ","
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Model Data In"
	  Ports			  [0, 1]
	  Position		  [250, 352, 325, 368]
	  ShowPortLabels	  off
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  MaskDisplay		  "disp('Parallel')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "Model Data In"
	    Location		    [233, 430, 639, 918]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "automatic"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      SubSystem
	      Name		      "Aux Loads\n14V and 42V"
	      Ports		      [0, 1]
	      Position		      [85, 85, 125, 105]
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"Aux Loads\n14V and 42V"
		Location		[18, 679, 346, 965]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Reference
		  Name			  "Aux Loads\n14V"
		  Ports			  [0, 1]
		  Position		  [60, 130, 100, 150]
		  SourceBlock		  "lib_cosimulation/Aux Loads\n14V"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Aux Loads\n42V"
		  Ports			  [0, 1]
		  Position		  [60, 200, 100, 220]
		  SourceBlock		  "lib_cosimulation/Aux Loads\n42V"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Elec Aux Loads\nAdditional"
		  Ports			  [0, 1]
		  Position		  [55, 59, 100, 81]
		  SourceBlock		  "lib_cosimulation/Elec Aux Loads\nAd"
"ditional"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  "S-Function"
		  Name			  "Matrix\nConcatenation1"
		  Ports			  [3, 1]
		  Position		  [215, 35, 230, 245]
		  FunctionName		  "smatrxcat"
		  Parameters		  "numInports,catMethod"
		  PortCounts		  "[]"
		  SFunctionModules	  "''"
		  MaskType		  "Matrix Concatenation"
		  MaskDescription	  "Perform horizontal or vertical conc"
"atenation.  1-D vector input signals are treated as column vectors, i.e., [Mx"
"1] matrices.  The output is always a matrix."
		  MaskPromptString	  "Number of inputs:|Concatenation met"
"hod:"
		  MaskStyleString	  "edit,popup(Horizontal|Vertical)"
		  MaskTunableValueString  "on,on"
		  MaskCallbackString	  "|"
		  MaskEnableString	  "on,on"
		  MaskVisibilityString	  "on,on"
		  MaskToolTipString	  "on,on"
		  MaskVariables		  "numInports=@1;catMethod=@2;"
		  MaskInitialization	  "xy = matrxcatmask('icon');"
		  MaskDisplay		  "plot(xy.x,xy.y);\ntext(0.15,0.86,xy"
".label);\n"
		  MaskSelfModifiable	  on
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "normalized"
		  MaskValueString	  "3|Horizontal"
		  MaskVariableAliases	  ","
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  Position		  [260, 133, 290, 147]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "[]"
		}
		Line {
		  SrcBlock		  "Matrix\nConcatenation1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Aux Loads\n14V"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Aux Loads\n42V"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Elec Aux Loads\nAdditional"
		  SrcPort		  1
		  DstBlock		  "Matrix\nConcatenation1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "DC/DC converter"
	      Ports		      [0, 1]
	      Position		      [85, 145, 125, 165]
	      SourceBlock	      "lib_cosimulation/DC//DC converter"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Block {
	      BlockType		      "S-Function"
	      Name		      "Matrix\nConcatenation1"
	      Ports		      [6, 1]
	      Position		      [265, 57, 285, 433]
	      FunctionName	      "smatrxcat"
	      Parameters	      "numInports,catMethod"
	      PortCounts	      "[]"
	      SFunctionModules	      "''"
	      MaskType		      "Matrix Concatenation"
	      MaskDescription	      "Perform horizontal or vertical concaten"
"ation.  1-D vector input signals are treated as column vectors, i.e., [Mx1] m"
"atrices.  The output is always a matrix."
	      MaskPromptString	      "Number of inputs:|Concatenation method:"
	      MaskStyleString	      "edit,popup(Horizontal|Vertical)"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskVariables	      "numInports=@1;catMethod=@2;"
	      MaskInitialization      "xy = matrxcatmask('icon');"
	      MaskDisplay	      "plot(xy.x,xy.y);\ntext(0.15,0.86,xy.lab"
"el);\n"
	      MaskSelfModifiable      on
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "normalized"
	      MaskValueString	      "6|Horizontal"
	      MaskVariableAliases     ","
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Regulator"
	      Ports		      [0, 1]
	      Position		      [85, 325, 125, 345]
	      SourceBlock	      "lib_cosimulation/Regulator"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "ess param inputs"
	      Ports		      [0, 1]
	      Position		      [85, 204, 135, 226]
	      AttributesFormatString  "%<BlockChoice>"
	      ShowPortLabels	      off
	      BlockChoice	      "Saber lib pb"
	      TemplateBlock	      "lib_cosimulation/ess param inputs"
	      MemberBlocks	      "Rint,Saber lib pb"
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"ess param inputs"
		Location		[148, 182, 646, 482]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Reference
		  Name			  "Saber lib pb"
		  Ports			  [0, 1]
		  Position		  [100, 40, 140, 80]
		  SourceBlock		  "lib_cosimulation/Saber lib pb"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  Position		  [200, 40, 220, 60]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "[]"
		}
		Line {
		  SrcBlock		  "Saber lib pb"
		  SrcPort		  1
		  Points		  [20, 0; 0, -10]
		  DstBlock		  "Out1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "ess2 param inputs"
	      Ports		      [0, 1]
	      Position		      [85, 264, 135, 286]
	      AttributesFormatString  "%<BlockChoice>"
	      ShowPortLabels	      off
	      BlockChoice	      "Saber lib pb2"
	      TemplateBlock	      "lib_cosimulation/ess2 param inputs"
	      MemberBlocks	      "Rint2,Saber lib pb2"
	      TreatAsAtomicUnit	      off
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"ess2 param inputs"
		Location		[148, 182, 646, 482]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Reference
		  Name			  "Saber lib pb2"
		  Ports			  [0, 1]
		  Position		  [100, 40, 140, 80]
		  SourceBlock		  "lib_cosimulation/Saber lib pb2"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		  TreatAsAtomicUnit	  "off"
		  RTWSystemCode		  "Auto"
		  RTWFcnNameOpts	  "Auto"
		  RTWFileNameOpts	  "Auto"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  Position		  [200, 40, 220, 60]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "[]"
		}
		Line {
		  SrcBlock		  "Saber lib pb2"
		  SrcPort		  1
		  Points		  [20, 0; 0, -10]
		  DstBlock		  "Out1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "motor"
	      Ports		      [0, 1]
	      Position		      [85, 385, 125, 405]
	      SourceBlock	      "lib_cosimulation/motor"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Out1"
	      Position		      [325, 238, 355, 252]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Line {
	      SrcBlock		      "ess2 param inputs"
	      SrcPort		      1
	      DstBlock		      "Matrix\nConcatenation1"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "ess param inputs"
	      SrcPort		      1
	      DstBlock		      "Matrix\nConcatenation1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Matrix\nConcatenation1"
	      SrcPort		      1
	      DstBlock		      "Out1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Aux Loads\n14V and 42V"
	      SrcPort		      1
	      DstBlock		      "Matrix\nConcatenation1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "DC/DC converter"
	      SrcPort		      1
	      DstBlock		      "Matrix\nConcatenation1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Regulator"
	      SrcPort		      1
	      DstBlock		      "Matrix\nConcatenation1"
	      DstPort		      5
	    }
	    Line {
	      SrcBlock		      "motor"
	      SrcPort		      1
	      DstBlock		      "Matrix\nConcatenation1"
	      DstPort		      6
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Motor RPM Req"
	  Ports			  [1, 1]
	  Position		  [250, 271, 325, 289]
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "Motor RPM Req"
	    Location		    [301, 292, 1059, 984]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "w_apu"
	      Position		      [25, 358, 55, 372]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [105, 65, 135, 95]
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Enabled\nSubsystem"
	      Ports		      [1, 1, 1]
	      Position		      [270, 163, 370, 187]
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      on
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"Enabled\nSubsystem"
		Location		[421, 301, 919, 601]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "In1"
		  Position		  [110, 103, 140, 117]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  EnablePort
		  Name			  "Enable"
		  Ports			  []
		  Position		  [235, 20, 255, 40]
		  StatesWhenEnabling	  "held"
		  ShowOutputPort	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  Position		  [360, 103, 390, 117]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "[]"
		}
		Line {
		  SrcBlock		  "In1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      Position		      [220, 452, 270, 468]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "time"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      Position		      [190, 262, 240, 278]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "time"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From4"
	      Position		      [95, 137, 145, 153]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "time"
	    }
	    Block {
	      BlockType		      InitialCondition
	      Name		      "IC"
	      Position		      [330, 443, 385, 477]
	      Value		      "time_step"
	    }
	    Block {
	      BlockType		      "S-Function"
	      Name		      "Matrix\nConcatenation1"
	      Ports		      [6, 1]
	      Position		      [565, 29, 590, 606]
	      FunctionName	      "smatrxcat"
	      Parameters	      "numInports,catMethod"
	      PortCounts	      "[]"
	      SFunctionModules	      "''"
	      MaskType		      "Matrix Concatenation"
	      MaskDescription	      "Perform horizontal or vertical concaten"
"ation.  1-D vector input signals are treated as column vectors, i.e., [Mx1] m"
"atrices.  The output is always a matrix."
	      MaskPromptString	      "Number of inputs:|Concatenation method:"
	      MaskStyleString	      "edit,popup(Horizontal|Vertical)"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskVariables	      "numInports=@1;catMethod=@2;"
	      MaskInitialization      "xy = matrxcatmask('icon');"
	      MaskDisplay	      "plot(xy.x,xy.y);\ntext(0.15,0.86,xy.lab"
"el);\n"
	      MaskSelfModifiable      on
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "normalized"
	      MaskValueString	      "6|Horizontal"
	      MaskVariableAliases     ","
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory1"
	      Position		      [380, 255, 410, 285]
	      X0		      ".001"
	      InheritSampleTime	      on
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory2"
	      Position		      [245, 350, 275, 380]
	      ShowName		      off
	      X0		      "0"
	      InheritSampleTime	      on
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      Position		      [225, 122, 255, 153]
	      ShowName		      off
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      Position		      [275, 255, 305, 285]
	      UpperLimit	      "inf"
	      LowerLimit	      ".001"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      Scope
	      Name		      "mc_rpm_r"
	      Ports		      [1]
	      Position		      [505, 504, 535, 536]
	      Floating		      off
	      Location		      [343, 430, 667, 669]
	      Open		      off
	      NumInputPorts	      "1"
	      TickLabels	      "OneTimeTick"
	      ZoomMode		      "yonly"
	      List {
		ListType		AxesTitles
		axes1			"%<SignalLabel>"
	      }
	      Grid		      "on"
	      TimeRange		      "10"
	      YMin		      "0"
	      YMax		      "2000"
	      SaveToWorkspace	      off
	      SaveName		      "ScopeData5"
	      DataFormat	      "StructureWithTime"
	      LimitDataPoints	      on
	      MaxDataPoints	      "5000"
	      Decimation	      "1"
	      SampleInput	      off
	      SampleTime	      "0"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "rad/s -> rpm1"
	      Position		      [125, 350, 155, 380]
	      Gain		      "60/(2*pi)"
	      Multiplication	      "Element-wise(K.*u)"
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "RPM"
	      Position		      [680, 313, 710, 327]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [60, 0]
	      DstBlock		      "Enabled\nSubsystem"
	      DstPort		      enable
	    }
	    Line {
	      SrcBlock		      "From4"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Enabled\nSubsystem"
	      SrcPort		      1
	      DstBlock		      "Matrix\nConcatenation1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Memory2"
	      SrcPort		      1
	      DstBlock		      "Matrix\nConcatenation1"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "Matrix\nConcatenation1"
	      SrcPort		      1
	      DstBlock		      "RPM"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "IC"
	      SrcPort		      1
	      DstBlock		      "Matrix\nConcatenation1"
	      DstPort		      5
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Memory1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory1"
	      SrcPort		      1
	      DstBlock		      "Matrix\nConcatenation1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "IC"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [55, 0]
	      Branch {
		Points			[0, 50]
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Matrix\nConcatenation1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "w_apu"
	      SrcPort		      1
	      DstBlock		      "rad/s -> rpm1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "rad/s -> rpm1"
	      SrcPort		      1
	      Points		      [0, 0; 5, 0]
	      Branch {
		Points			[15, 0]
		Branch {
		  DstBlock		  "Memory2"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 190; 295, 0]
		  Branch {
		    DstBlock		    "Matrix\nConcatenation1"
		    DstPort		    6
		  }
		  Branch {
		    Points		    [0, -35]
		    DstBlock		    "mc_rpm_r"
		    DstPort		    1
		  }
		}
	      }
	      Branch {
		Points			[0, -190]
		DstBlock		"Enabled\nSubsystem"
		DstPort			1
	      }
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Motor Trq Req"
	  Ports			  [1, 1]
	  Position		  [250, 231, 325, 249]
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "Motor Trq Req"
	    Location		    [404, 114, 1162, 806]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "trq"
	      Position		      [25, 358, 55, 372]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [105, 65, 135, 95]
	      Value		      "0"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Enabled\nSubsystem"
	      Ports		      [1, 1, 1]
	      Position		      [270, 163, 370, 187]
	      ShowPortLabels	      on
	      TreatAsAtomicUnit	      on
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	      System {
		Name			"Enabled\nSubsystem"
		Location		[421, 301, 919, 601]
		Open			off
		ModelBrowserVisibility	off
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "In1"
		  Position		  [110, 103, 140, 117]
		  Port			  "1"
		  LatchInput		  off
		  Interpolate		  on
		}
		Block {
		  BlockType		  EnablePort
		  Name			  "Enable"
		  Ports			  []
		  Position		  [235, 20, 255, 40]
		  StatesWhenEnabling	  "held"
		  ShowOutputPort	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "Out1"
		  Position		  [360, 103, 390, 117]
		  Port			  "1"
		  OutputWhenDisabled	  "held"
		  InitialOutput		  "[]"
		}
		Line {
		  SrcBlock		  "In1"
		  SrcPort		  1
		  DstBlock		  "Out1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      From
	      Name		      "From"
	      Position		      [220, 452, 270, 468]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "time"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From1"
	      Position		      [190, 262, 240, 278]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "time"
	    }
	    Block {
	      BlockType		      From
	      Name		      "From4"
	      Position		      [95, 137, 145, 153]
	      CloseFcn		      "tagdialog Close"
	      GotoTag		      "time"
	    }
	    Block {
	      BlockType		      InitialCondition
	      Name		      "IC"
	      Position		      [330, 443, 385, 477]
	      Value		      "time_step"
	    }
	    Block {
	      BlockType		      "S-Function"
	      Name		      "Matrix\nConcatenation2"
	      Ports		      [6, 1]
	      Position		      [565, 29, 590, 606]
	      FunctionName	      "smatrxcat"
	      Parameters	      "numInports,catMethod"
	      PortCounts	      "[]"
	      SFunctionModules	      "''"
	      MaskType		      "Matrix Concatenation"
	      MaskDescription	      "Perform horizontal or vertical concaten"
"ation.  1-D vector input signals are treated as column vectors, i.e., [Mx1] m"
"atrices.  The output is always a matrix."
	      MaskPromptString	      "Number of inputs:|Concatenation method:"
	      MaskStyleString	      "edit,popup(Horizontal|Vertical)"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskVariables	      "numInports=@1;catMethod=@2;"
	      MaskInitialization      "xy = matrxcatmask('icon');"
	      MaskDisplay	      "plot(xy.x,xy.y);\ntext(0.15,0.86,xy.lab"
"el);\n"
	      MaskSelfModifiable      on
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "normalized"
	      MaskValueString	      "6|Horizontal"
	      MaskVariableAliases     ","
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory1"
	      Position		      [380, 255, 410, 285]
	      X0		      ".001"
	      InheritSampleTime	      on
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      Memory
	      Name		      "Memory2"
	      Position		      [245, 350, 275, 380]
	      ShowName		      off
	      X0		      "0"
	      InheritSampleTime	      on
	      RTWStateStorageClass    "Auto"
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      Position		      [225, 122, 255, 153]
	      ShowName		      off
	      Operator		      "=="
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      Position		      [275, 255, 305, 285]
	      UpperLimit	      "inf"
	      LowerLimit	      ".001"
	      LinearizeAsGain	      on
	    }
	    Block {
	      BlockType		      Scope
	      Name		      "mc_trq_r"
	      Ports		      [1]
	      Position		      [485, 494, 515, 526]
	      Floating		      off
	      Location		      [342, 132, 666, 371]
	      Open		      off
	      NumInputPorts	      "1"
	      TickLabels	      "OneTimeTick"
	      ZoomMode		      "yonly"
	      List {
		ListType		AxesTitles
		axes1			"%<SignalLabel>"
	      }
	      Grid		      "on"
	      TimeRange		      "10"
	      YMin		      "0"
	      YMax		      "600"
	      SaveToWorkspace	      off
	      SaveName		      "ScopeData4"
	      DataFormat	      "StructureWithTime"
	      LimitDataPoints	      on
	      MaxDataPoints	      "5000"
	      Decimation	      "1"
	      SampleInput	      off
	      SampleTime	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "trq array"
	      Position		      [680, 313, 710, 327]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Line {
	      SrcBlock		      "trq"
	      SrcPort		      1
	      Points		      [35, 0]
	      Branch {
		Points			[0, -190]
		DstBlock		"Enabled\nSubsystem"
		DstPort			1
	      }
	      Branch {
		Points			[85, 0]
		Branch {
		  DstBlock		  "Memory2"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 190; 270, 0]
		  Branch {
		    DstBlock		    "Matrix\nConcatenation2"
		    DstPort		    6
		  }
		  Branch {
		    Points		    [0, -45]
		    DstBlock		    "mc_trq_r"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [55, 0]
	      Branch {
		DstBlock		"Matrix\nConcatenation2"
		DstPort			1
	      }
	      Branch {
		Points			[0, 50]
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "From"
	      SrcPort		      1
	      DstBlock		      "IC"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory1"
	      SrcPort		      1
	      DstBlock		      "Matrix\nConcatenation2"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "From1"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Memory1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "IC"
	      SrcPort		      1
	      DstBlock		      "Matrix\nConcatenation2"
	      DstPort		      5
	    }
	    Line {
	      SrcBlock		      "Matrix\nConcatenation2"
	      SrcPort		      1
	      DstBlock		      "trq array"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Memory2"
	      SrcPort		      1
	      DstBlock		      "Matrix\nConcatenation2"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "Enabled\nSubsystem"
	      SrcPort		      1
	      DstBlock		      "Matrix\nConcatenation2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "From4"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [60, 0]
	      DstBlock		      "Enabled\nSubsystem"
	      DstPort		      enable
	    }
	  }
	}
	Block {
	  BlockType		  MultiPortSwitch
	  Name			  "Multiport\nSwitch"
	  Ports			  [4, 1]
	  Position		  [990, 12, 1020, 58]
	  Inputs		  "3"
	}
	Block {
	  BlockType		  Mux
	  Name			  "Mux"
	  Ports			  [2, 1]
	  Position		  [835, 492, 840, 523]
	  ShowName		  off
	  Inputs		  "2"
	  DisplayOption		  "bar"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Parallel Cosim"
	  Ports			  [1, 1]
	  Position		  [490, 275, 550, 325]
	  AttributesFormatString  "%<BlockChoice>"
	  ShowPortLabels	  off
	  BlockChoice		  "Par Saber Text File Exchange"
	  TemplateBlock		  "lib_cosimulation/Parallel Cosim"
	  MemberBlocks		  "Par Saber Text File Exchange"
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "Parallel Cosim"
	    Location		    [148, 182, 646, 482]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "In"
	      Position		      [20, 40, 40, 60]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Par Saber Text File Exchange"
	      Ports		      [1, 1]
	      Position		      [100, 40, 140, 80]
	      SourceBlock	      "lib_cosimulation/Par Saber Text File Ex"
"change"
	      SourceType	      "Unknown"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "out"
	      Position		      [200, 40, 220, 60]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Line {
	      SrcBlock		      "In"
	      SrcPort		      1
	      Points		      [20, 0; 0, 10]
	      DstBlock		      "Par Saber Text File Exchange"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Par Saber Text File Exchange"
	      SrcPort		      1
	      Points		      [20, 0; 0, -10]
	      DstBlock		      "out"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Saber_ess2_outputs"
	  Ports			  [1]
	  Position		  [690, 144, 760, 176]
	  AttributesFormatString  "%<BlockChoice>"
	  ShowPortLabels	  on
	  BlockChoice		  "Saber_pb2"
	  TemplateBlock		  "lib_outputs/Saber_ess2_outputs"
	  MemberBlocks		  "Saber_pb2,Saber_rint2"
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "Saber_ess2_outputs"
	    Location		    [148, 182, 646, 482]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "In1"
	      Position		      [20, 40, 40, 60]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Saber_pb2"
	      Ports		      [1]
	      Position		      [100, 40, 140, 80]
	      SourceBlock	      "lib_outputs/Saber_pb2"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Line {
	      SrcBlock		      "In1"
	      SrcPort		      1
	      Points		      [20, 0; 0, 10]
	      DstBlock		      "Saber_pb2"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Saber_ess_outputs"
	  Ports			  [1]
	  Position		  [690, 74, 760, 106]
	  AttributesFormatString  "%<BlockChoice>"
	  ShowPortLabels	  on
	  BlockChoice		  "Saber_pb"
	  TemplateBlock		  "lib_outputs/Saber_ess_outputs"
	  MemberBlocks		  "Saber_pb,Saber_rint"
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "Saber_ess_outputs"
	    Location		    [148, 182, 646, 482]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "In1"
	      Position		      [20, 40, 40, 60]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Saber_pb"
	      Ports		      [1]
	      Position		      [100, 40, 140, 80]
	      SourceBlock	      "lib_outputs/Saber_pb"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	      TreatAsAtomicUnit	      "off"
	      RTWSystemCode	      "Auto"
	      RTWFcnNameOpts	      "Auto"
	      RTWFileNameOpts	      "Auto"
	    }
	    Line {
	      SrcBlock		      "In1"
	      SrcPort		      1
	      Points		      [20, 0; 0, 10]
	      DstBlock		      "Saber_pb"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace1"
	  Position		  [245, 163, 395, 187]
	  ShowName		  off
	  VariableName		  "mc_spd_out_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace2"
	  Position		  [245, 123, 395, 147]
	  ShowName		  off
	  VariableName		  "mc_trq_out_r"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace3"
	  Position		  [1060, 138, 1160, 162]
	  ShowName		  off
	  VariableName		  "mc_trq_out_a2"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  ToWorkspace
	  Name			  "To Workspace4"
	  Position		  [1060, 179, 1160, 201]
	  ShowName		  off
	  VariableName		  "mc_spd_out_a2"
	  MaxDataPoints		  "inf"
	  Decimation		  "1"
	  SampleTime		  "-1"
	  SaveFormat		  "Array"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "if trq_req <=1\ntrq_ach = trq_req\n&\nspd_a"
"ch=spd_req"
	  Ports			  [2, 1]
	  Position		  [870, 562, 970, 613]
	  ShowPortLabels	  on
	  TreatAsAtomicUnit	  off
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	  System {
	    Name		    "if trq_req <=1\ntrq_ach = trq_req\n&\nspd"
"_ach=spd_req"
	    Location		    [157, 655, 655, 955]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "ach"
	      Position		      [25, 198, 55, 212]
	      Port		      "1"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "req"
	      Position		      [25, 103, 55, 117]
	      Port		      "2"
	      LatchInput	      off
	      Interpolate	      on
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs"
	      Position		      [245, 95, 275, 125]
	      SaturateOnIntegerOverflow	on
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [245, 145, 275, 175]
	      Value		      "1"
	      VectorParams1D	      on
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      Position		      [305, 102, 335, 133]
	      Operator		      "<="
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [365, 105, 395, 135]
	      Threshold		      "eps"
	    }
	    Block {
	      BlockType		      Selector
	      Name		      "trq r"
	      Ports		      [1, 1]
	      Position		      [90, 91, 130, 129]
	      InputType		      "Vector"
	      ElementSrc	      "Internal"
	      Elements		      "[1]"
	      RowSrc		      "Internal"
	      Rows		      "1"
	      ColumnSrc		      "Internal"
	      Columns		      "1"
	      InputPortWidth	      "2"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Out1"
	      Position		      [435, 113, 465, 127]
	      Port		      "1"
	      OutputWhenDisabled      "held"
	      InitialOutput	      "[]"
	    }
	    Line {
	      SrcBlock		      "req"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"trq r"
		DstPort			1
	      }
	      Branch {
		Points			[0, -40; 280, 0]
		DstBlock		"Switch"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Out1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Abs"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "ach"
	      SrcPort		      1
	      Points		      [290, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "trq r"
	      SrcPort		      1
	      DstBlock		      "Abs"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "saber acc 14v\noutput gotos"
	  Ports			  [1]
	  Position		  [690, 356, 760, 384]
	  SourceBlock		  "lib_outputs/saber acc 14v\noutput gotos"
	  SourceType		  "SubSystem"
	  ShowPortLabels	  "on"
	  TreatAsAtomicUnit	  "off"
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	}
	Block {
	  BlockType		  Reference
	  Name			  "saber acc HiV\noutput gotos"
	  Ports			  [1]
	  Position		  [690, 426, 760, 454]
	  SourceBlock		  "lib_outputs/saber acc HiV\noutput gotos"
	  SourceType		  "SubSystem"
	  ShowPortLabels	  "on"
	  TreatAsAtomicUnit	  "off"
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	}
	Block {
	  BlockType		  Reference
	  Name			  "saber acc additional\noutputs"
	  Ports			  [1]
	  Position		  [690, 286, 760, 314]
	  SourceBlock		  "lib_outputs/saber acc additional\noutputs"
	  SourceType		  "SubSystem"
	  ShowPortLabels	  "on"
	  TreatAsAtomicUnit	  "off"
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	}
	Block {
	  BlockType		  Reference
	  Name			  "saber dcdc output\ngotos"
	  Ports			  [1]
	  Position		  [690, 216, 760, 244]
	  SourceBlock		  "lib_outputs/saber dcdc output\ngotos"
	  SourceType		  "SubSystem"
	  ShowPortLabels	  "on"
	  TreatAsAtomicUnit	  "off"
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	}
	Block {
	  BlockType		  Reference
	  Name			  "saber mc output\ngotos"
	  Ports			  [1, 2]
	  Position		  [685, 493, 755, 522]
	  SourceBlock		  "lib_outputs/saber mc output\ngotos"
	  SourceType		  "SubSystem"
	  ShowPortLabels	  "on"
	  TreatAsAtomicUnit	  "off"
	  RTWSystemCode		  "Auto"
	  RTWFcnNameOpts	  "Auto"
	  RTWFileNameOpts	  "Auto"
	}
	Block {
	  BlockType		  Outport
	  Name			  "trq and spd\navail from motor"
	  Position		  [1075, 28, 1105, 42]
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "[]"
	}
	Line {
	  SrcBlock		  "trq and spd\nreq'd of motor"
	  SrcPort		  1
	  Points		  [60, 0]
	  Branch {
	    Points		    [0, 340]
	    DstBlock		    "if trq_req <=1\ntrq_ach = trq_req\n&\nspd"
"_ach=spd_req"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [30, 0]
	    Branch {
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [0, -230]
	      DstBlock		      "Multiport\nSwitch"
	      DstPort		      2
	    }
	  }
	}
	Line {
	  SrcBlock		  "Matrix\nConcatenation2"
	  SrcPort		  1
	  DstBlock		  "Parallel Cosim"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  1
	  Points		  [0, 0; 5, 0]
	  Branch {
	    Points		    [0, -105]
	    DstBlock		    "To Workspace2"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Motor Trq Req"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Demux"
	  SrcPort		  2
	  Points		  [0, 0; 15, 0]
	  Branch {
	    Points		    [-5, 0]
	    DstBlock		    "To Workspace1"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Motor RPM Req"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Motor Trq Req"
	  SrcPort		  1
	  DstBlock		  "Matrix\nConcatenation2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Motor RPM Req"
	  SrcPort		  1
	  DstBlock		  "Matrix\nConcatenation2"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Parallel Cosim"
	  SrcPort		  1
	  DstBlock		  "Demux1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  3
	  DstBlock		  "saber dcdc output\ngotos"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "saber mc output\ngotos"
	  SrcPort		  2
	  Points		  [5, 0]
	  Branch {
	    Points		    [0, -85]
	    DstBlock		    "Goto1"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Mux"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  2
	  DstBlock		  "Saber_ess2_outputs"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  1
	  DstBlock		  "Saber_ess_outputs"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "saber mc output\ngotos"
	  SrcPort		  1
	  Points		  [0, 0; 10, 0]
	  Branch {
	    Points		    [45, 15]
	    DstBlock		    "Mux"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [0, -35]
	    DstBlock		    "Goto2"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "From"
	  SrcPort		  1
	  DstBlock		  "Matrix\nConcatenation2"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Model Data In"
	  SrcPort		  1
	  DstBlock		  "Matrix\nConcatenation2"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "Mux"
	  SrcPort		  1
	  Points		  [0, 0]
	  Branch {
	    Points		    [0, 65]
	    DstBlock		    "if trq_req <=1\ntrq_ach = trq_req\n&\nspd"
"_ach=spd_req"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [115, 0; 0, -470]
	    DstBlock		    "Multiport\nSwitch"
	    DstPort		    3
	  }
	}
	Line {
	  SrcBlock		  "Demux2"
	  SrcPort		  1
	  DstBlock		  "To Workspace3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux2"
	  SrcPort		  2
	  DstBlock		  "To Workspace4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Multiport\nSwitch"
	  SrcPort		  1
	  Points		  [0, 0]
	  Branch {
	    DstBlock		    "trq and spd\navail from motor"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "Demux2"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Constant"
	  SrcPort		  1
	  DstBlock		  "Multiport\nSwitch"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "if trq_req <=1\ntrq_ach = trq_req\n&\nspd_a"
"ch=spd_req"
	  SrcPort		  1
	  DstBlock		  "Multiport\nSwitch"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  5
	  DstBlock		  "saber acc 14v\noutput gotos"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  6
	  DstBlock		  "saber acc HiV\noutput gotos"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  7
	  DstBlock		  "saber mc output\ngotos"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Demux1"
	  SrcPort		  4
	  DstBlock		  "saber acc additional\noutputs"
	  DstPort		  1
	}
      }
    }
    Block {
      BlockType		      Reference
      Name		      "clutch <cl>"
      Ports		      [3, 2]
      Position		      [385, 30, 430, 100]
      BackgroundColor	      "yellow"
      SourceBlock	      "lib_transmission/clutch <cl>"
      SourceType	      "Clutch"
      slip_spd		      "vc_launch_spd"
      maxtrq		      "max(fc_max_trq)*fc_trq_scale"
    }
    Block {
      BlockType		      Constant
      Name		      "do ex calcs?"
      Position		      [900, 17, 960, 33]
      Orientation	      "left"
      ShowName		      off
      Value		      "ex_calc"
      VectorParams1D	      on
    }
    Block {
      BlockType		      Constant
      Name		      "do ex calcs?1"
      Position		      [890, 58, 945, 72]
      Orientation	      "left"
      ShowName		      off
      Value		      "fc_emis"
      VectorParams1D	      on
    }
    Block {
      BlockType		      Reference
      Name		      "drive cycle\n<cyc>"
      Ports		      [0, 1]
      Position		      [30, 121, 65, 189]
      BackgroundColor	      "yellow"
      SourceBlock	      "lib_drive_cycle/drive cycle\n<cyc>"
      SourceType	      ""
    }
    Block {
      BlockType		      Reference
      Name		      "exhaust sys\n<ex>"
      Ports		      [1, 2, 1]
      Position		      [815, 73, 865, 117]
      BackgroundColor	      "yellow"
      SourceBlock	      "lib_exhaust/exhaust sys\n<ex>"
      SourceType	      ""
    }
    Block {
      BlockType		      Reference
      Name		      "final drive <fd>"
      Ports		      [2, 2]
      Position		      [310, 153, 355, 202]
      BackgroundColor	      "yellow"
      SourceBlock	      "lib_transmission/final drive <fd>"
      SourceType	      ""
    }
    Block {
      BlockType		      Reference
      Name		      "fuel\nconverter\n <fc>"
      Ports		      [1, 3]
      Position		      [720, 25, 790, 75]
      BackgroundColor	      "yellow"
      LinkData {
	BlockName		"fuel use and EO emis Configurable Subsystem"
	DialogParameters {
	  BlockChoice		  "fuel use and EO emis"
	}
      }
      SourceBlock	      "lib_fuel_converter/fuel\nconverter\n <fc>"
      SourceType	      ""
    }
    Block {
      BlockType		      Reference
      Name		      "gearbox <gb>"
      Ports		      [2, 2]
      Position		      [385, 153, 450, 197]
      BackgroundColor	      "yellow"
      SourceBlock	      "lib_transmission/gearbox <gb>"
      SourceType	      ""
    }
    Block {
      BlockType		      Reference
      Name		      "help"
      Ports		      []
      Position		      [30, 35, 77, 97]
      BackgroundColor	      "yellow"
      DropShadow	      on
      ShowName		      off
      SourceBlock	      "lib_help/help"
      SourceType	      ""
    }
    Block {
      BlockType		      SubSystem
      Name		      "par <cs> config"
      Ports		      [1, 1]
      Position		      [475, 31, 515, 69]
      ShowName		      off
      AttributesFormatString  "%<BlockChoice>"
      ShowPortLabels	      off
      BlockChoice	      "electric assist control strategy <cs>"
      TemplateBlock	      "lib_controls/par <cs> config"
      MemberBlocks	      "Adaptive control strategy <cs>,Fuzzy Logic cont"
"rol strategy <cs>,Fuzzy Logic control strategy with Emissions <cs>,electric a"
"ssist control strategy <cs>,electric assist control strategy bal <cs>"
      TreatAsAtomicUnit	      off
      RTWSystemCode	      "Auto"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      System {
	Name			"par <cs> config"
	Location		[148, 182, 646, 482]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "trq and spd req'd\ninto clutch\n(N*m, rad/s"
")"
	  Position		  [20, 40, 40, 60]
	  Port			  "1"
	  LatchInput		  off
	  Interpolate		  on
	}
	Block {
	  BlockType		  Reference
	  Name			  "electric assist\ncontrol strategy\n<cs>"
	  Ports			  [1, 1]
	  Position		  [100, 40, 140, 80]
	  SourceBlock		  "lib_controls/electric assist\ncontrol strat"
"egy\n<cs>"
	  SourceType		  ""
	}
	Block {
	  BlockType		  Outport
	  Name			  "trq and spd\nreq'd from\nengine\n(N*m, rad/"
"s)"
	  Position		  [200, 40, 220, 60]
	  Port			  "1"
	  OutputWhenDisabled	  "held"
	  InitialOutput		  "[]"
	}
	Line {
	  SrcBlock		  "trq and spd req'd\ninto clutch\n(N*m, rad/s"
")"
	  SrcPort		  1
	  Points		  [20, 0; 0, 10]
	  DstBlock		  "electric assist\ncontrol strategy\n<cs>"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "electric assist\ncontrol strategy\n<cs>"
	  SrcPort		  1
	  Points		  [20, 0; 0, -10]
	  DstBlock		  "trq and spd\nreq'd from\nengine\n(N*m, rad/"
"s)"
	  DstPort		  1
	}
      }
    }
    Block {
      BlockType		      Reference
      Name		      "torque\ncoupler <tc>"
      Ports		      [3, 3]
      Position		      [485, 156, 525, 204]
      BackgroundColor	      "yellow"
      SourceBlock	      "lib_transmission/torque\ncoupler <tc>"
      SourceType	      ""
    }
    Block {
      BlockType		      ToWorkspace
      Name		      "total fuel used (gal)"
      Position		      [820, 12, 870, 28]
      FontName		      "Arial"
      VariableName	      "gal"
      MaxDataPoints	      "inf"
      Decimation	      "1"
      SampleTime	      "0"
      SaveFormat	      "Array"
    }
    Block {
      BlockType		      Reference
      Name		      "vehicle <veh>"
      Ports		      [2, 1]
      Position		      [90, 143, 145, 187]
      BackgroundColor	      "yellow"
      LinkData {
	BlockName		"record achieved\nforce outputs/rolling resist"
"ance force"
	DialogParameters {
	  BlockChoice		  "force req'd to overcome rolling resistance "
"(N)"
	}
	BlockName		"rolling resistance force"
	DialogParameters {
	  BlockChoice		  "force req'd to overcome rolling resistance "
"(N)"
	}
	BlockName		"vehicle speed"
	DialogParameters {
	  BlockChoice		  "vehicle speed (m/s)"
	}
      }
      SourceBlock	      "lib_vehicle/vehicle <veh>"
      SourceType	      ""
    }
    Block {
      BlockType		      Reference
      Name		      "wheel and axle \nfront/rear <wh>"
      Ports		      [3, 3]
      Position		      [170, 157, 220, 213]
      BackgroundColor	      "yellow"
      SourceBlock	      "lib_wheel/wheel and axle \nfront//rear <wh>"
      SourceType	      ""
    }
    Line {
      SrcBlock		      "wheel and axle \nfront/rear <wh>"
      SrcPort		      3
      Points		      [0, 55; -150, 0]
      DstBlock		      "vehicle <veh>"
      DstPort		      2
    }
    Line {
      SrcBlock		      "final drive <fd>"
      SrcPort		      2
      Points		      [5, 0; 0, 75; -130, 0]
      DstBlock		      "2 axle -->\n1 driveline\nconverter"
      DstPort		      3
    }
    Line {
      SrcBlock		      "final drive <fd>"
      SrcPort		      1
      DstBlock		      "gearbox <gb>"
      DstPort		      1
    }
    Line {
      SrcBlock		      "drive cycle\n<cyc>"
      SrcPort		      1
      DstBlock		      "vehicle <veh>"
      DstPort		      1
    }
    Line {
      SrcBlock		      "clutch <cl>"
      SrcPort		      1
      DstBlock		      "par <cs> config"
      DstPort		      1
    }
    Line {
      SrcBlock		      "fuel\nconverter\n <fc>"
      SrcPort		      2
      Points		      [5, 0]
      DstBlock		      "exhaust sys\n<ex>"
      DstPort		      1
    }
    Line {
      SrcBlock		      "do ex calcs?"
      SrcPort		      1
      DstBlock		      "Logical\nOperator1"
      DstPort		      1
    }
    Line {
      SrcBlock		      "fuel\nconverter\n <fc>"
      SrcPort		      1
      Points		      [0, -15]
      DstBlock		      "total fuel used (gal)"
      DstPort		      1
    }
    Line {
      SrcBlock		      "exhaust sys\n<ex>"
      SrcPort		      1
      DstBlock		      "HC, CO,\nNOx, PM (g/s)"
      DstPort		      1
    }
    Line {
      SrcBlock		      "Logical\nOperator1"
      SrcPort		      1
      DstBlock		      "exhaust sys\n<ex>"
      DstPort		      enable
    }
    Line {
      SrcBlock		      "do ex calcs?1"
      SrcPort		      1
      DstBlock		      "Logical\nOperator1"
      DstPort		      2
    }
    Line {
      SrcBlock		      "Clock"
      SrcPort		      1
      DstBlock		      "Goto<sdo>"
      DstPort		      1
    }
    Line {
      SrcBlock		      "gearbox <gb>"
      SrcPort		      2
      Points		      [0, 75; -160, 0]
      DstBlock		      "final drive <fd>"
      DstPort		      2
    }
    Line {
      SrcBlock		      "torque\ncoupler <tc>"
      SrcPort		      3
      Points		      [0, 60; -160, 0]
      DstBlock		      "gearbox <gb>"
      DstPort		      2
    }
    Line {
      SrcBlock		      "torque\ncoupler <tc>"
      SrcPort		      1
      Points		      [0, -35; -185, 0; 0, -90]
      DstBlock		      "clutch <cl>"
      DstPort		      1
    }
    Line {
      SrcBlock		      "clutch <cl>"
      SrcPort		      2
      Points		      [25, 0; 0, 95]
      DstBlock		      "torque\ncoupler <tc>"
      DstPort		      2
    }
    Line {
      SrcBlock		      "gearbox <gb>"
      SrcPort		      1
      DstBlock		      "torque\ncoupler <tc>"
      DstPort		      1
    }
    Line {
      SrcBlock		      "<vc> par"
      SrcPort		      1
      DstBlock		      "clutch <cl>"
      DstPort		      2
    }
    Line {
      SrcBlock		      "torque\ncoupler <tc>"
      SrcPort		      2
      Points		      [25, 0]
      DstBlock		      "Parallel Cosimulation"
      DstPort		      1
    }
    Line {
      SrcBlock		      "exhaust sys\n<ex>"
      SrcPort		      2
      Points		      [0, 15]
      DstBlock		      "<cs>"
      DstPort		      1
    }
    Line {
      SrcBlock		      "Parallel Cosimulation"
      SrcPort		      1
      Points		      [35, 0; 0, 90; -415, 0]
      DstBlock		      "torque\ncoupler <tc>"
      DstPort		      3
    }
    Line {
      SrcBlock		      "par <cs> config"
      SrcPort		      1
      DstBlock		      "Mechanical Accessory\nLoads <acc>"
      DstPort		      1
    }
    Line {
      SrcBlock		      "Mechanical Accessory\nLoads <acc>"
      SrcPort		      1
      DstBlock		      "fuel\nconverter\n <fc>"
      DstPort		      1
    }
    Line {
      SrcBlock		      "fuel\nconverter\n <fc>"
      SrcPort		      3
      Points		      [0, 80; -220, 0; 0, -55]
      DstBlock		      "Mechanical Accessory\nLoads <acc>"
      DstPort		      2
    }
    Line {
      SrcBlock		      "Mechanical Accessory\nLoads <acc>"
      SrcPort		      2
      Points		      [20, 0; 0, 50; -325, 0; 0, -50]
      DstBlock		      "clutch <cl>"
      DstPort		      3
    }
    Line {
      SrcBlock		      "vehicle <veh>"
      SrcPort		      1
      DstBlock		      "wheel and axle \nfront/rear <wh>"
      DstPort		      1
    }
    Line {
      SrcBlock		      "wheel and axle \nfront/rear <wh>"
      SrcPort		      1
      DstBlock		      "2 axle -->\n1 driveline\nconverter"
      DstPort		      1
    }
    Line {
      SrcBlock		      "wheel and axle \nfront/rear <wh>"
      SrcPort		      2
      DstBlock		      "2 axle -->\n1 driveline\nconverter"
      DstPort		      2
    }
    Line {
      SrcBlock		      "2 axle -->\n1 driveline\nconverter"
      SrcPort		      1
      DstBlock		      "final drive <fd>"
      DstPort		      1
    }
    Line {
      SrcBlock		      "2 axle -->\n1 driveline\nconverter"
      SrcPort		      2
      Points		      [10, 0; 0, 70; -140, 0; 0, -70]
      DstBlock		      "wheel and axle \nfront/rear <wh>"
      DstPort		      2
    }
    Line {
      SrcBlock		      "2 axle -->\n1 driveline\nconverter"
      SrcPort		      3
      Points		      [0, 45; -125, 0]
      DstBlock		      "wheel and axle \nfront/rear <wh>"
      DstPort		      3
    }
  }
}
